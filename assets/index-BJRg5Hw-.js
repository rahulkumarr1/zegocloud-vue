(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))v(b);new MutationObserver(b=>{for(const _ of b)if(_.type==="childList")for(const E of _.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&v(E)}).observe(document,{childList:!0,subtree:!0});function g(b){const _={};return b.integrity&&(_.integrity=b.integrity),b.referrerPolicy&&(_.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?_.credentials="include":b.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function v(b){if(b.ep)return;b.ep=!0;const _=g(b);fetch(b.href,_)}})();/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(c,l){const g=new Set(c.split(","));return l?v=>g.has(v.toLowerCase()):v=>g.has(v)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=c=>c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&(c.charCodeAt(2)>122||c.charCodeAt(2)<97),isModelListener=c=>c.startsWith("onUpdate:"),extend$1=Object.assign,remove=(c,l)=>{const g=c.indexOf(l);g>-1&&c.splice(g,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(c,l)=>hasOwnProperty$2.call(c,l),isArray$2=Array.isArray,isMap=c=>toTypeString(c)==="[object Map]",isSet=c=>toTypeString(c)==="[object Set]",isFunction$1=c=>typeof c=="function",isString$1=c=>typeof c=="string",isSymbol=c=>typeof c=="symbol",isObject$1=c=>c!==null&&typeof c=="object",isPromise=c=>(isObject$1(c)||isFunction$1(c))&&isFunction$1(c.then)&&isFunction$1(c.catch),objectToString=Object.prototype.toString,toTypeString=c=>objectToString.call(c),toRawType=c=>toTypeString(c).slice(8,-1),isPlainObject$1=c=>toTypeString(c)==="[object Object]",isIntegerKey=c=>isString$1(c)&&c!=="NaN"&&c[0]!=="-"&&""+parseInt(c,10)===c,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=c=>{const l=Object.create(null);return g=>l[g]||(l[g]=c(g))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(c=>c.replace(camelizeRE,(l,g)=>g?g.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(c=>c.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(c=>c.charAt(0).toUpperCase()+c.slice(1)),toHandlerKey=cacheStringFunction(c=>c?`on${capitalize(c)}`:""),hasChanged=(c,l)=>!Object.is(c,l),invokeArrayFns=(c,l)=>{for(let g=0;g<c.length;g++)c[g](l)},def=(c,l,g)=>{Object.defineProperty(c,l,{configurable:!0,enumerable:!1,value:g})},looseToNumber=c=>{const l=parseFloat(c);return isNaN(l)?c:l};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(c){if(isArray$2(c)){const l={};for(let g=0;g<c.length;g++){const v=c[g],b=isString$1(v)?parseStringStyle(v):normalizeStyle(v);if(b)for(const _ in b)l[_]=b[_]}return l}else if(isString$1(c)||isObject$1(c))return c}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(c){const l={};return c.replace(styleCommentRE,"").split(listDelimiterRE).forEach(g=>{if(g){const v=g.split(propertyDelimiterRE);v.length>1&&(l[v[0].trim()]=v[1].trim())}}),l}function normalizeClass(c){let l="";if(isString$1(c))l=c;else if(isArray$2(c))for(let g=0;g<c.length;g++){const v=normalizeClass(c[g]);v&&(l+=v+" ")}else if(isObject$1(c))for(const g in c)c[g]&&(l+=g+" ");return l.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(c){return!!c||c===""}const toDisplayString=c=>isString$1(c)?c:c==null?"":isArray$2(c)||isObject$1(c)&&(c.toString===objectToString||!isFunction$1(c.toString))?JSON.stringify(c,replacer,2):String(c),replacer=(c,l)=>l&&l.__v_isRef?replacer(c,l.value):isMap(l)?{[`Map(${l.size})`]:[...l.entries()].reduce((g,[v,b],_)=>(g[stringifySymbol(v,_)+" =>"]=b,g),{})}:isSet(l)?{[`Set(${l.size})`]:[...l.values()].map(g=>stringifySymbol(g))}:isSymbol(l)?stringifySymbol(l):isObject$1(l)&&!isArray$2(l)&&!isPlainObject$1(l)?String(l):l,stringifySymbol=(c,l="")=>{var g;return isSymbol(c)?`Symbol(${(g=c.description)!=null?g:l})`:c};/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(l=!1){this.detached=l,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!l&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(l){if(this._active){const g=activeEffectScope;try{return activeEffectScope=this,l()}finally{activeEffectScope=g}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(l){if(this._active){let g,v;for(g=0,v=this.effects.length;g<v;g++)this.effects[g].stop();for(g=0,v=this.cleanups.length;g<v;g++)this.cleanups[g]();if(this.scopes)for(g=0,v=this.scopes.length;g<v;g++)this.scopes[g].stop(!0);if(!this.detached&&this.parent&&!l){const b=this.parent.scopes.pop();b&&b!==this&&(this.parent.scopes[this.index]=b,b.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(c){return new EffectScope(c)}function recordEffectScope(c,l=activeEffectScope){l&&l.active&&l.effects.push(c)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(l,g,v,b){this.fn=l,this.trigger=g,this.scheduler=v,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,b)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let l=0;l<this._depsLength;l++){const g=this.deps[l];if(g.computed&&(triggerComputed(g.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(l){this._dirtyLevel=l?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let l=shouldTrack,g=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=g,shouldTrack=l}}stop(){var l;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(l=this.onStop)==null||l.call(this),this.active=!1)}}function triggerComputed(c){return c.value}function preCleanupEffect(c){c._trackId++,c._depsLength=0}function postCleanupEffect(c){if(c.deps.length>c._depsLength){for(let l=c._depsLength;l<c.deps.length;l++)cleanupDepEffect(c.deps[l],c);c.deps.length=c._depsLength}}function cleanupDepEffect(c,l){const g=c.get(l);g!==void 0&&l._trackId!==g&&(c.delete(l),c.size===0&&c.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const c=trackStack.pop();shouldTrack=c===void 0?!0:c}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(c,l,g){if(l.get(c)!==c._trackId){l.set(c,c._trackId);const v=c.deps[c._depsLength];v!==l?(v&&cleanupDepEffect(v,c),c.deps[c._depsLength++]=l):c._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(c,l,g){pauseScheduling();for(const v of c.keys()){let b;v._dirtyLevel<l&&(b??(b=c.get(v)===v._trackId))&&(v._shouldSchedule||(v._shouldSchedule=v._dirtyLevel===0),v._dirtyLevel=l),v._shouldSchedule&&(b??(b=c.get(v)===v._trackId))&&(v.trigger(),(!v._runnings||v.allowRecurse)&&v._dirtyLevel!==2&&(v._shouldSchedule=!1,v.scheduler&&queueEffectSchedulers.push(v.scheduler)))}resetScheduling()}const createDep=(c,l)=>{const g=new Map;return g.cleanup=c,g.computed=l,g},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(c,l,g){if(shouldTrack&&activeEffect){let v=targetMap.get(c);v||targetMap.set(c,v=new Map);let b=v.get(g);b||v.set(g,b=createDep(()=>v.delete(g))),trackEffect(activeEffect,b)}}function trigger(c,l,g,v,b,_){const E=targetMap.get(c);if(!E)return;let w=[];if(l==="clear")w=[...E.values()];else if(g==="length"&&isArray$2(c)){const O=Number(v);E.forEach((U,V)=>{(V==="length"||!isSymbol(V)&&V>=O)&&w.push(U)})}else switch(g!==void 0&&w.push(E.get(g)),l){case"add":isArray$2(c)?isIntegerKey(g)&&w.push(E.get("length")):(w.push(E.get(ITERATE_KEY)),isMap(c)&&w.push(E.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(c)||(w.push(E.get(ITERATE_KEY)),isMap(c)&&w.push(E.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(c)&&w.push(E.get(ITERATE_KEY));break}pauseScheduling();for(const O of w)O&&triggerEffects(O,4);resetScheduling()}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(c=>c!=="arguments"&&c!=="caller").map(c=>Symbol[c]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const c={};return["includes","indexOf","lastIndexOf"].forEach(l=>{c[l]=function(...g){const v=toRaw(this);for(let _=0,E=this.length;_<E;_++)track(v,"get",_+"");const b=v[l](...g);return b===-1||b===!1?v[l](...g.map(toRaw)):b}}),["push","pop","shift","unshift","splice"].forEach(l=>{c[l]=function(...g){pauseTracking(),pauseScheduling();const v=toRaw(this)[l].apply(this,g);return resetScheduling(),resetTracking(),v}}),c}function hasOwnProperty$1(c){const l=toRaw(this);return track(l,"has",c),l.hasOwnProperty(c)}class BaseReactiveHandler{constructor(l=!1,g=!1){this._isReadonly=l,this._shallow=g}get(l,g,v){const b=this._isReadonly,_=this._shallow;if(g==="__v_isReactive")return!b;if(g==="__v_isReadonly")return b;if(g==="__v_isShallow")return _;if(g==="__v_raw")return v===(b?_?shallowReadonlyMap:readonlyMap:_?shallowReactiveMap:reactiveMap).get(l)||Object.getPrototypeOf(l)===Object.getPrototypeOf(v)?l:void 0;const E=isArray$2(l);if(!b){if(E&&hasOwn(arrayInstrumentations,g))return Reflect.get(arrayInstrumentations,g,v);if(g==="hasOwnProperty")return hasOwnProperty$1}const w=Reflect.get(l,g,v);return(isSymbol(g)?builtInSymbols.has(g):isNonTrackableKeys(g))||(b||track(l,"get",g),_)?w:isRef(w)?E&&isIntegerKey(g)?w:w.value:isObject$1(w)?b?readonly(w):reactive(w):w}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(l=!1){super(!1,l)}set(l,g,v,b){let _=l[g];if(!this._shallow){const O=isReadonly(_);if(!isShallow(v)&&!isReadonly(v)&&(_=toRaw(_),v=toRaw(v)),!isArray$2(l)&&isRef(_)&&!isRef(v))return O?!1:(_.value=v,!0)}const E=isArray$2(l)&&isIntegerKey(g)?Number(g)<l.length:hasOwn(l,g),w=Reflect.set(l,g,v,b);return l===toRaw(b)&&(E?hasChanged(v,_)&&trigger(l,"set",g,v):trigger(l,"add",g,v)),w}deleteProperty(l,g){const v=hasOwn(l,g);l[g];const b=Reflect.deleteProperty(l,g);return b&&v&&trigger(l,"delete",g,void 0),b}has(l,g){const v=Reflect.has(l,g);return(!isSymbol(g)||!builtInSymbols.has(g))&&track(l,"has",g),v}ownKeys(l){return track(l,"iterate",isArray$2(l)?"length":ITERATE_KEY),Reflect.ownKeys(l)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(l=!1){super(!0,l)}set(l,g){return!0}deleteProperty(l,g){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=c=>c,getProto=c=>Reflect.getPrototypeOf(c);function get(c,l,g=!1,v=!1){c=c.__v_raw;const b=toRaw(c),_=toRaw(l);g||(hasChanged(l,_)&&track(b,"get",l),track(b,"get",_));const{has:E}=getProto(b),w=v?toShallow:g?toReadonly:toReactive;if(E.call(b,l))return w(c.get(l));if(E.call(b,_))return w(c.get(_));c!==b&&c.get(l)}function has(c,l=!1){const g=this.__v_raw,v=toRaw(g),b=toRaw(c);return l||(hasChanged(c,b)&&track(v,"has",c),track(v,"has",b)),c===b?g.has(c):g.has(c)||g.has(b)}function size(c,l=!1){return c=c.__v_raw,!l&&track(toRaw(c),"iterate",ITERATE_KEY),Reflect.get(c,"size",c)}function add(c){c=toRaw(c);const l=toRaw(this);return getProto(l).has.call(l,c)||(l.add(c),trigger(l,"add",c,c)),this}function set(c,l){l=toRaw(l);const g=toRaw(this),{has:v,get:b}=getProto(g);let _=v.call(g,c);_||(c=toRaw(c),_=v.call(g,c));const E=b.call(g,c);return g.set(c,l),_?hasChanged(l,E)&&trigger(g,"set",c,l):trigger(g,"add",c,l),this}function deleteEntry(c){const l=toRaw(this),{has:g,get:v}=getProto(l);let b=g.call(l,c);b||(c=toRaw(c),b=g.call(l,c)),v&&v.call(l,c);const _=l.delete(c);return b&&trigger(l,"delete",c,void 0),_}function clear(){const c=toRaw(this),l=c.size!==0,g=c.clear();return l&&trigger(c,"clear",void 0,void 0),g}function createForEach(c,l){return function(v,b){const _=this,E=_.__v_raw,w=toRaw(E),O=l?toShallow:c?toReadonly:toReactive;return!c&&track(w,"iterate",ITERATE_KEY),E.forEach((U,V)=>v.call(b,O(U),O(V),_))}}function createIterableMethod(c,l,g){return function(...v){const b=this.__v_raw,_=toRaw(b),E=isMap(_),w=c==="entries"||c===Symbol.iterator&&E,O=c==="keys"&&E,U=b[c](...v),V=g?toShallow:l?toReadonly:toReactive;return!l&&track(_,"iterate",O?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:C,done:q}=U.next();return q?{value:C,done:q}:{value:w?[V(C[0]),V(C[1])]:V(C),done:q}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(c){return function(...l){return c==="delete"?!1:c==="clear"?void 0:this}}function createInstrumentations(){const c={get(_){return get(this,_)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},l={get(_){return get(this,_,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},g={get(_){return get(this,_,!0)},get size(){return size(this,!0)},has(_){return has.call(this,_,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},v={get(_){return get(this,_,!0,!0)},get size(){return size(this,!0)},has(_){return has.call(this,_,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(_=>{c[_]=createIterableMethod(_,!1,!1),g[_]=createIterableMethod(_,!0,!1),l[_]=createIterableMethod(_,!1,!0),v[_]=createIterableMethod(_,!0,!0)}),[c,g,l,v]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(c,l){const g=l?c?shallowReadonlyInstrumentations:shallowInstrumentations:c?readonlyInstrumentations:mutableInstrumentations;return(v,b,_)=>b==="__v_isReactive"?!c:b==="__v_isReadonly"?c:b==="__v_raw"?v:Reflect.get(hasOwn(g,b)&&b in v?g:v,b,_)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(c){switch(c){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(c){return c.__v_skip||!Object.isExtensible(c)?0:targetTypeMap(toRawType(c))}function reactive(c){return isReadonly(c)?c:createReactiveObject(c,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(c){return createReactiveObject(c,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(c){return createReactiveObject(c,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(c,l,g,v,b){if(!isObject$1(c)||c.__v_raw&&!(l&&c.__v_isReactive))return c;const _=b.get(c);if(_)return _;const E=getTargetType(c);if(E===0)return c;const w=new Proxy(c,E===2?v:g);return b.set(c,w),w}function isReactive(c){return isReadonly(c)?isReactive(c.__v_raw):!!(c&&c.__v_isReactive)}function isReadonly(c){return!!(c&&c.__v_isReadonly)}function isShallow(c){return!!(c&&c.__v_isShallow)}function isProxy(c){return isReactive(c)||isReadonly(c)}function toRaw(c){const l=c&&c.__v_raw;return l?toRaw(l):c}function markRaw(c){return Object.isExtensible(c)&&def(c,"__v_skip",!0),c}const toReactive=c=>isObject$1(c)?reactive(c):c,toReadonly=c=>isObject$1(c)?readonly(c):c;class ComputedRefImpl{constructor(l,g,v,b){this._setter=g,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>l(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!b,this.__v_isReadonly=v}get value(){const l=toRaw(this);return(!l._cacheable||l.effect.dirty)&&hasChanged(l._value,l._value=l.effect.run())&&triggerRefValue(l,4),trackRefValue(l),l.effect._dirtyLevel>=2&&triggerRefValue(l,2),l._value}set value(l){this._setter(l)}get _dirty(){return this.effect.dirty}set _dirty(l){this.effect.dirty=l}}function computed$1(c,l,g=!1){let v,b;const _=isFunction$1(c);return _?(v=c,b=NOOP):(v=c.get,b=c.set),new ComputedRefImpl(v,b,_||!b,g)}function trackRefValue(c){var l;shouldTrack&&activeEffect&&(c=toRaw(c),trackEffect(activeEffect,(l=c.dep)!=null?l:c.dep=createDep(()=>c.dep=void 0,c instanceof ComputedRefImpl?c:void 0)))}function triggerRefValue(c,l=4,g){c=toRaw(c);const v=c.dep;v&&triggerEffects(v,l)}function isRef(c){return!!(c&&c.__v_isRef===!0)}function ref(c){return createRef(c,!1)}function shallowRef(c){return createRef(c,!0)}function createRef(c,l){return isRef(c)?c:new RefImpl(c,l)}class RefImpl{constructor(l,g){this.__v_isShallow=g,this.dep=void 0,this.__v_isRef=!0,this._rawValue=g?l:toRaw(l),this._value=g?l:toReactive(l)}get value(){return trackRefValue(this),this._value}set value(l){const g=this.__v_isShallow||isShallow(l)||isReadonly(l);l=g?l:toRaw(l),hasChanged(l,this._rawValue)&&(this._rawValue=l,this._value=g?l:toReactive(l),triggerRefValue(this,4))}}function unref(c){return isRef(c)?c.value:c}const shallowUnwrapHandlers={get:(c,l,g)=>unref(Reflect.get(c,l,g)),set:(c,l,g,v)=>{const b=c[l];return isRef(b)&&!isRef(g)?(b.value=g,!0):Reflect.set(c,l,g,v)}};function proxyRefs(c){return isReactive(c)?c:new Proxy(c,shallowUnwrapHandlers)}/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(c,...l){pauseTracking();const g=stack.length?stack[stack.length-1].component:null,v=g&&g.appContext.config.warnHandler,b=getComponentTrace();if(v)callWithErrorHandling(v,g,11,[c+l.join(""),g&&g.proxy,b.map(({vnode:_})=>`at <${formatComponentName(g,_.type)}>`).join(`
`),b]);else{const _=[`[Vue warn]: ${c}`,...l];b.length&&_.push(`
`,...formatTrace(b)),console.warn(..._)}resetTracking()}function getComponentTrace(){let c=stack[stack.length-1];if(!c)return[];const l=[];for(;c;){const g=l[0];g&&g.vnode===c?g.recurseCount++:l.push({vnode:c,recurseCount:0});const v=c.component&&c.component.parent;c=v&&v.vnode}return l}function formatTrace(c){const l=[];return c.forEach((g,v)=>{l.push(...v===0?[]:[`
`],...formatTraceEntry(g))}),l}function formatTraceEntry({vnode:c,recurseCount:l}){const g=l>0?`... (${l} recursive calls)`:"",v=c.component?c.component.parent==null:!1,b=` at <${formatComponentName(c.component,c.type,v)}`,_=">"+g;return c.props?[b,...formatProps(c.props),_]:[b+_]}function formatProps(c){const l=[],g=Object.keys(c);return g.slice(0,3).forEach(v=>{l.push(...formatProp(v,c[v]))}),g.length>3&&l.push(" ..."),l}function formatProp(c,l,g){return isString$1(l)?(l=JSON.stringify(l),g?l:[`${c}=${l}`]):typeof l=="number"||typeof l=="boolean"||l==null?g?l:[`${c}=${l}`]:isRef(l)?(l=formatProp(c,toRaw(l.value),!0),g?l:[`${c}=Ref<`,l,">"]):isFunction$1(l)?[`${c}=fn${l.name?`<${l.name}>`:""}`]:(l=toRaw(l),g?l:[`${c}=`,l])}function callWithErrorHandling(c,l,g,v){try{return v?c(...v):c()}catch(b){handleError(b,l,g)}}function callWithAsyncErrorHandling(c,l,g,v){if(isFunction$1(c)){const _=callWithErrorHandling(c,l,g,v);return _&&isPromise(_)&&_.catch(E=>{handleError(E,l,g)}),_}const b=[];for(let _=0;_<c.length;_++)b.push(callWithAsyncErrorHandling(c[_],l,g,v));return b}function handleError(c,l,g,v=!0){const b=l?l.vnode:null;if(l){let _=l.parent;const E=l.proxy,w=`https://vuejs.org/error-reference/#runtime-${g}`;for(;_;){const U=_.ec;if(U){for(let V=0;V<U.length;V++)if(U[V](c,E,w)===!1)return}_=_.parent}const O=l.appContext.config.errorHandler;if(O){callWithErrorHandling(O,null,10,[c,E,w]);return}}logError(c,g,b,v)}function logError(c,l,g,v=!0){console.error(c)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(c){const l=currentFlushPromise||resolvedPromise;return c?l.then(this?c.bind(this):c):l}function findInsertionIndex(c){let l=flushIndex+1,g=queue.length;for(;l<g;){const v=l+g>>>1,b=queue[v],_=getId(b);_<c||_===c&&b.pre?l=v+1:g=v}return l}function queueJob(c){(!queue.length||!queue.includes(c,isFlushing&&c.allowRecurse?flushIndex+1:flushIndex))&&(c.id==null?queue.push(c):queue.splice(findInsertionIndex(c.id),0,c),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(c){const l=queue.indexOf(c);l>flushIndex&&queue.splice(l,1)}function queuePostFlushCb(c){isArray$2(c)?pendingPostFlushCbs.push(...c):(!activePostFlushCbs||!activePostFlushCbs.includes(c,c.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(c),queueFlush()}function flushPreFlushCbs(c,l,g=isFlushing?flushIndex+1:0){for(;g<queue.length;g++){const v=queue[g];if(v&&v.pre){if(c&&v.id!==c.uid)continue;queue.splice(g,1),g--,v()}}}function flushPostFlushCbs(c){if(pendingPostFlushCbs.length){const l=[...new Set(pendingPostFlushCbs)].sort((g,v)=>getId(g)-getId(v));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...l);return}for(activePostFlushCbs=l,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=c=>c.id==null?1/0:c.id,comparator=(c,l)=>{const g=getId(c)-getId(l);if(g===0){if(c.pre&&!l.pre)return-1;if(l.pre&&!c.pre)return 1}return g};function flushJobs(c){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&l.active!==!1&&callWithErrorHandling(l,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(c,l,...g){if(c.isUnmounted)return;const v=c.vnode.props||EMPTY_OBJ;let b=g;const _=l.startsWith("update:"),E=_&&l.slice(7);if(E&&E in v){const V=`${E==="modelValue"?"model":E}Modifiers`,{number:C,trim:q}=v[V]||EMPTY_OBJ;q&&(b=g.map(ue=>isString$1(ue)?ue.trim():ue)),C&&(b=g.map(looseToNumber))}let w,O=v[w=toHandlerKey(l)]||v[w=toHandlerKey(camelize(l))];!O&&_&&(O=v[w=toHandlerKey(hyphenate(l))]),O&&callWithAsyncErrorHandling(O,c,6,b);const U=v[w+"Once"];if(U){if(!c.emitted)c.emitted={};else if(c.emitted[w])return;c.emitted[w]=!0,callWithAsyncErrorHandling(U,c,6,b)}}function normalizeEmitsOptions(c,l,g=!1){const v=l.emitsCache,b=v.get(c);if(b!==void 0)return b;const _=c.emits;let E={},w=!1;if(!isFunction$1(c)){const O=U=>{const V=normalizeEmitsOptions(U,l,!0);V&&(w=!0,extend$1(E,V))};!g&&l.mixins.length&&l.mixins.forEach(O),c.extends&&O(c.extends),c.mixins&&c.mixins.forEach(O)}return!_&&!w?(isObject$1(c)&&v.set(c,null),null):(isArray$2(_)?_.forEach(O=>E[O]=null):extend$1(E,_),isObject$1(c)&&v.set(c,E),E)}function isEmitListener(c,l){return!c||!isOn(l)?!1:(l=l.slice(2).replace(/Once$/,""),hasOwn(c,l[0].toLowerCase()+l.slice(1))||hasOwn(c,hyphenate(l))||hasOwn(c,l))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(c){const l=currentRenderingInstance;return currentRenderingInstance=c,currentScopeId=c&&c.type.__scopeId||null,l}function pushScopeId(c){currentScopeId=c}function popScopeId(){currentScopeId=null}function withCtx(c,l=currentRenderingInstance,g){if(!l||c._n)return c;const v=(...b)=>{v._d&&setBlockTracking(-1);const _=setCurrentRenderingInstance(l);let E;try{E=c(...b)}finally{setCurrentRenderingInstance(_),v._d&&setBlockTracking(1)}return E};return v._n=!0,v._c=!0,v._d=!0,v}function markAttrsAccessed(){}function renderComponentRoot(c){const{type:l,vnode:g,proxy:v,withProxy:b,props:_,propsOptions:[E],slots:w,attrs:O,emit:U,render:V,renderCache:C,data:q,setupState:ue,ctx:se,inheritAttrs:Y}=c;let pe,ce;const X=setCurrentRenderingInstance(c);try{if(g.shapeFlag&4){const z=b||v,oe=z;pe=normalizeVNode(V.call(oe,z,C,_,ue,q,se)),ce=O}else{const z=l;pe=normalizeVNode(z.length>1?z(_,{attrs:O,slots:w,emit:U}):z(_,null)),ce=l.props?O:getFunctionalFallthrough(O)}}catch(z){blockStack.length=0,handleError(z,c,1),pe=createVNode(Comment)}let P=pe;if(ce&&Y!==!1){const z=Object.keys(ce),{shapeFlag:oe}=P;z.length&&oe&7&&(E&&z.some(isModelListener)&&(ce=filterModelListeners(ce,E)),P=cloneVNode(P,ce))}return g.dirs&&(P=cloneVNode(P),P.dirs=P.dirs?P.dirs.concat(g.dirs):g.dirs),g.transition&&(P.transition=g.transition),pe=P,setCurrentRenderingInstance(X),pe}const getFunctionalFallthrough=c=>{let l;for(const g in c)(g==="class"||g==="style"||isOn(g))&&((l||(l={}))[g]=c[g]);return l},filterModelListeners=(c,l)=>{const g={};for(const v in c)(!isModelListener(v)||!(v.slice(9)in l))&&(g[v]=c[v]);return g};function shouldUpdateComponent(c,l,g){const{props:v,children:b,component:_}=c,{props:E,children:w,patchFlag:O}=l,U=_.emitsOptions;if(l.dirs||l.transition)return!0;if(g&&O>=0){if(O&1024)return!0;if(O&16)return v?hasPropsChanged(v,E,U):!!E;if(O&8){const V=l.dynamicProps;for(let C=0;C<V.length;C++){const q=V[C];if(E[q]!==v[q]&&!isEmitListener(U,q))return!0}}}else return(b||w)&&(!w||!w.$stable)?!0:v===E?!1:v?E?hasPropsChanged(v,E,U):!0:!!E;return!1}function hasPropsChanged(c,l,g){const v=Object.keys(l);if(v.length!==Object.keys(c).length)return!0;for(let b=0;b<v.length;b++){const _=v[b];if(l[_]!==c[_]&&!isEmitListener(g,_))return!0}return!1}function updateHOCHostEl({vnode:c,parent:l},g){for(;l;){const v=l.subTree;if(v.suspense&&v.suspense.activeBranch===c&&(v.el=c.el),v===c)(c=l.vnode).el=g,l=l.parent;else break}}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=c=>c.__isSuspense;function queueEffectWithSuspense(c,l){l&&l.pendingBranch?isArray$2(c)?l.effects.push(...c):l.effects.push(c):queuePostFlushCb(c)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),INITIAL_WATCHER_VALUE={};function watch(c,l,g){return doWatch(c,l,g)}function doWatch(c,l,{immediate:g,deep:v,flush:b,once:_,onTrack:E,onTrigger:w}=EMPTY_OBJ){if(l&&_){const A=l;l=(...le)=>{A(...le),oe()}}const O=currentInstance,U=A=>v===!0?A:traverse(A,v===!1?1:void 0);let V,C=!1,q=!1;if(isRef(c)?(V=()=>c.value,C=isShallow(c)):isReactive(c)?(V=()=>U(c),C=!0):isArray$2(c)?(q=!0,C=c.some(A=>isReactive(A)||isShallow(A)),V=()=>c.map(A=>{if(isRef(A))return A.value;if(isReactive(A))return U(A);if(isFunction$1(A))return callWithErrorHandling(A,O,2)})):isFunction$1(c)?l?V=()=>callWithErrorHandling(c,O,2):V=()=>(ue&&ue(),callWithAsyncErrorHandling(c,O,3,[se])):V=NOOP,l&&v){const A=V;V=()=>traverse(A())}let ue,se=A=>{ue=P.onStop=()=>{callWithErrorHandling(A,O,4),ue=P.onStop=void 0}},Y;if(isInSSRComponentSetup)if(se=NOOP,l?g&&callWithAsyncErrorHandling(l,O,3,[V(),q?[]:void 0,se]):V(),b==="sync"){const A=useSSRContext();Y=A.__watcherHandles||(A.__watcherHandles=[])}else return NOOP;let pe=q?new Array(c.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const ce=()=>{if(!(!P.active||!P.dirty))if(l){const A=P.run();(v||C||(q?A.some((le,$)=>hasChanged(le,pe[$])):hasChanged(A,pe)))&&(ue&&ue(),callWithAsyncErrorHandling(l,O,3,[A,pe===INITIAL_WATCHER_VALUE?void 0:q&&pe[0]===INITIAL_WATCHER_VALUE?[]:pe,se]),pe=A)}else P.run()};ce.allowRecurse=!!l;let X;b==="sync"?X=ce:b==="post"?X=()=>queuePostRenderEffect(ce,O&&O.suspense):(ce.pre=!0,O&&(ce.id=O.uid),X=()=>queueJob(ce));const P=new ReactiveEffect(V,NOOP,X),z=getCurrentScope(),oe=()=>{P.stop(),z&&remove(z.effects,P)};return l?g?ce():pe=P.run():b==="post"?queuePostRenderEffect(P.run.bind(P),O&&O.suspense):P.run(),Y&&Y.push(oe),oe}function instanceWatch(c,l,g){const v=this.proxy,b=isString$1(c)?c.includes(".")?createPathGetter(v,c):()=>v[c]:c.bind(v,v);let _;isFunction$1(l)?_=l:(_=l.handler,g=l);const E=setCurrentInstance(this),w=doWatch(b,_.bind(v),g);return E(),w}function createPathGetter(c,l){const g=l.split(".");return()=>{let v=c;for(let b=0;b<g.length&&v;b++)v=v[g[b]];return v}}function traverse(c,l,g=0,v){if(!isObject$1(c)||c.__v_skip)return c;if(l&&l>0){if(g>=l)return c;g++}if(v=v||new Set,v.has(c))return c;if(v.add(c),isRef(c))traverse(c.value,l,g,v);else if(isArray$2(c))for(let b=0;b<c.length;b++)traverse(c[b],l,g,v);else if(isSet(c)||isMap(c))c.forEach(b=>{traverse(b,l,g,v)});else if(isPlainObject$1(c))for(const b in c)traverse(c[b],l,g,v);return c}function withDirectives(c,l){if(currentRenderingInstance===null)return c;const g=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,v=c.dirs||(c.dirs=[]);for(let b=0;b<l.length;b++){let[_,E,w,O=EMPTY_OBJ]=l[b];_&&(isFunction$1(_)&&(_={mounted:_,updated:_}),_.deep&&traverse(E),v.push({dir:_,instance:g,value:E,oldValue:void 0,arg:w,modifiers:O}))}return c}function invokeDirectiveHook(c,l,g,v){const b=c.dirs,_=l&&l.dirs;for(let E=0;E<b.length;E++){const w=b[E];_&&(w.oldValue=_[E].value);let O=w.dir[v];O&&(pauseTracking(),callWithAsyncErrorHandling(O,g,8,[c.el,w,c,l]),resetTracking())}}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(c,l){return isFunction$1(c)?extend$1({name:c.name},l,{setup:c}):c}const isAsyncWrapper=c=>!!c.type.__asyncLoader,isKeepAlive=c=>c.type.__isKeepAlive;function onActivated(c,l){registerKeepAliveHook(c,"a",l)}function onDeactivated(c,l){registerKeepAliveHook(c,"da",l)}function registerKeepAliveHook(c,l,g=currentInstance){const v=c.__wdc||(c.__wdc=()=>{let b=g;for(;b;){if(b.isDeactivated)return;b=b.parent}return c()});if(injectHook(l,v,g),g){let b=g.parent;for(;b&&b.parent;)isKeepAlive(b.parent.vnode)&&injectToKeepAliveRoot(v,l,g,b),b=b.parent}}function injectToKeepAliveRoot(c,l,g,v){const b=injectHook(l,c,v,!0);onUnmounted(()=>{remove(v[l],b)},g)}function injectHook(c,l,g=currentInstance,v=!1){if(g){const b=g[c]||(g[c]=[]),_=l.__weh||(l.__weh=(...E)=>{if(g.isUnmounted)return;pauseTracking();const w=setCurrentInstance(g),O=callWithAsyncErrorHandling(l,g,c,E);return w(),resetTracking(),O});return v?b.unshift(_):b.push(_),_}}const createHook=c=>(l,g=currentInstance)=>(!isInSSRComponentSetup||c==="sp")&&injectHook(c,(...v)=>l(...v),g),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(c,l=currentInstance){injectHook("ec",c,l)}function renderList(c,l,g,v){let b;const _=g&&g[v];if(isArray$2(c)||isString$1(c)){b=new Array(c.length);for(let E=0,w=c.length;E<w;E++)b[E]=l(c[E],E,void 0,_&&_[E])}else if(typeof c=="number"){b=new Array(c);for(let E=0;E<c;E++)b[E]=l(E+1,E,void 0,_&&_[E])}else if(isObject$1(c))if(c[Symbol.iterator])b=Array.from(c,(E,w)=>l(E,w,void 0,_&&_[w]));else{const E=Object.keys(c);b=new Array(E.length);for(let w=0,O=E.length;w<O;w++){const U=E[w];b[w]=l(c[U],U,w,_&&_[w])}}else b=[];return g&&(g[v]=b),b}const getPublicInstance=c=>c?isStatefulComponent(c)?getExposeProxy(c)||c.proxy:getPublicInstance(c.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:c=>c,$el:c=>c.vnode.el,$data:c=>c.data,$props:c=>c.props,$attrs:c=>c.attrs,$slots:c=>c.slots,$refs:c=>c.refs,$parent:c=>getPublicInstance(c.parent),$root:c=>getPublicInstance(c.root),$emit:c=>c.emit,$options:c=>resolveMergedOptions(c),$forceUpdate:c=>c.f||(c.f=()=>{c.effect.dirty=!0,queueJob(c.update)}),$nextTick:c=>c.n||(c.n=nextTick.bind(c.proxy)),$watch:c=>instanceWatch.bind(c)}),hasSetupBinding=(c,l)=>c!==EMPTY_OBJ&&!c.__isScriptSetup&&hasOwn(c,l),PublicInstanceProxyHandlers={get({_:c},l){const{ctx:g,setupState:v,data:b,props:_,accessCache:E,type:w,appContext:O}=c;let U;if(l[0]!=="$"){const ue=E[l];if(ue!==void 0)switch(ue){case 1:return v[l];case 2:return b[l];case 4:return g[l];case 3:return _[l]}else{if(hasSetupBinding(v,l))return E[l]=1,v[l];if(b!==EMPTY_OBJ&&hasOwn(b,l))return E[l]=2,b[l];if((U=c.propsOptions[0])&&hasOwn(U,l))return E[l]=3,_[l];if(g!==EMPTY_OBJ&&hasOwn(g,l))return E[l]=4,g[l];shouldCacheAccess&&(E[l]=0)}}const V=publicPropertiesMap[l];let C,q;if(V)return l==="$attrs"&&track(c,"get",l),V(c);if((C=w.__cssModules)&&(C=C[l]))return C;if(g!==EMPTY_OBJ&&hasOwn(g,l))return E[l]=4,g[l];if(q=O.config.globalProperties,hasOwn(q,l))return q[l]},set({_:c},l,g){const{data:v,setupState:b,ctx:_}=c;return hasSetupBinding(b,l)?(b[l]=g,!0):v!==EMPTY_OBJ&&hasOwn(v,l)?(v[l]=g,!0):hasOwn(c.props,l)||l[0]==="$"&&l.slice(1)in c?!1:(_[l]=g,!0)},has({_:{data:c,setupState:l,accessCache:g,ctx:v,appContext:b,propsOptions:_}},E){let w;return!!g[E]||c!==EMPTY_OBJ&&hasOwn(c,E)||hasSetupBinding(l,E)||(w=_[0])&&hasOwn(w,E)||hasOwn(v,E)||hasOwn(publicPropertiesMap,E)||hasOwn(b.config.globalProperties,E)},defineProperty(c,l,g){return g.get!=null?c._.accessCache[l]=0:hasOwn(g,"value")&&this.set(c,l,g.value,null),Reflect.defineProperty(c,l,g)}};function normalizePropsOrEmits(c){return isArray$2(c)?c.reduce((l,g)=>(l[g]=null,l),{}):c}let shouldCacheAccess=!0;function applyOptions(c){const l=resolveMergedOptions(c),g=c.proxy,v=c.ctx;shouldCacheAccess=!1,l.beforeCreate&&callHook(l.beforeCreate,c,"bc");const{data:b,computed:_,methods:E,watch:w,provide:O,inject:U,created:V,beforeMount:C,mounted:q,beforeUpdate:ue,updated:se,activated:Y,deactivated:pe,beforeDestroy:ce,beforeUnmount:X,destroyed:P,unmounted:z,render:oe,renderTracked:A,renderTriggered:le,errorCaptured:$,serverPrefetch:k,expose:j,inheritAttrs:K,components:Z,directives:J,filters:D}=l;if(U&&resolveInjections(U,v,null),E)for(const L in E){const W=E[L];isFunction$1(W)&&(v[L]=W.bind(g))}if(b){const L=b.call(g,g);isObject$1(L)&&(c.data=reactive(L))}if(shouldCacheAccess=!0,_)for(const L in _){const W=_[L],ve=isFunction$1(W)?W.bind(g,g):isFunction$1(W.get)?W.get.bind(g,g):NOOP,de=!isFunction$1(W)&&isFunction$1(W.set)?W.set.bind(g):NOOP,ne=computed({get:ve,set:de});Object.defineProperty(v,L,{enumerable:!0,configurable:!0,get:()=>ne.value,set:he=>ne.value=he})}if(w)for(const L in w)createWatcher(w[L],v,g,L);if(O){const L=isFunction$1(O)?O.call(g):O;Reflect.ownKeys(L).forEach(W=>{provide(W,L[W])})}V&&callHook(V,c,"c");function M(L,W){isArray$2(W)?W.forEach(ve=>L(ve.bind(g))):W&&L(W.bind(g))}if(M(onBeforeMount,C),M(onMounted,q),M(onBeforeUpdate,ue),M(onUpdated,se),M(onActivated,Y),M(onDeactivated,pe),M(onErrorCaptured,$),M(onRenderTracked,A),M(onRenderTriggered,le),M(onBeforeUnmount,X),M(onUnmounted,z),M(onServerPrefetch,k),isArray$2(j))if(j.length){const L=c.exposed||(c.exposed={});j.forEach(W=>{Object.defineProperty(L,W,{get:()=>g[W],set:ve=>g[W]=ve})})}else c.exposed||(c.exposed={});oe&&c.render===NOOP&&(c.render=oe),K!=null&&(c.inheritAttrs=K),Z&&(c.components=Z),J&&(c.directives=J)}function resolveInjections(c,l,g=NOOP){isArray$2(c)&&(c=normalizeInject(c));for(const v in c){const b=c[v];let _;isObject$1(b)?"default"in b?_=inject(b.from||v,b.default,!0):_=inject(b.from||v):_=inject(b),isRef(_)?Object.defineProperty(l,v,{enumerable:!0,configurable:!0,get:()=>_.value,set:E=>_.value=E}):l[v]=_}}function callHook(c,l,g){callWithAsyncErrorHandling(isArray$2(c)?c.map(v=>v.bind(l.proxy)):c.bind(l.proxy),l,g)}function createWatcher(c,l,g,v){const b=v.includes(".")?createPathGetter(g,v):()=>g[v];if(isString$1(c)){const _=l[c];isFunction$1(_)&&watch(b,_)}else if(isFunction$1(c))watch(b,c.bind(g));else if(isObject$1(c))if(isArray$2(c))c.forEach(_=>createWatcher(_,l,g,v));else{const _=isFunction$1(c.handler)?c.handler.bind(g):l[c.handler];isFunction$1(_)&&watch(b,_,c)}}function resolveMergedOptions(c){const l=c.type,{mixins:g,extends:v}=l,{mixins:b,optionsCache:_,config:{optionMergeStrategies:E}}=c.appContext,w=_.get(l);let O;return w?O=w:!b.length&&!g&&!v?O=l:(O={},b.length&&b.forEach(U=>mergeOptions$1(O,U,E,!0)),mergeOptions$1(O,l,E)),isObject$1(l)&&_.set(l,O),O}function mergeOptions$1(c,l,g,v=!1){const{mixins:b,extends:_}=l;_&&mergeOptions$1(c,_,g,!0),b&&b.forEach(E=>mergeOptions$1(c,E,g,!0));for(const E in l)if(!(v&&E==="expose")){const w=internalOptionMergeStrats[E]||g&&g[E];c[E]=w?w(c[E],l[E]):l[E]}return c}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(c,l){return l?c?function(){return extend$1(isFunction$1(c)?c.call(this,this):c,isFunction$1(l)?l.call(this,this):l)}:l:c}function mergeInject(c,l){return mergeObjectOptions(normalizeInject(c),normalizeInject(l))}function normalizeInject(c){if(isArray$2(c)){const l={};for(let g=0;g<c.length;g++)l[c[g]]=c[g];return l}return c}function mergeAsArray(c,l){return c?[...new Set([].concat(c,l))]:l}function mergeObjectOptions(c,l){return c?extend$1(Object.create(null),c,l):l}function mergeEmitsOrPropsOptions(c,l){return c?isArray$2(c)&&isArray$2(l)?[...new Set([...c,...l])]:extend$1(Object.create(null),normalizePropsOrEmits(c),normalizePropsOrEmits(l??{})):l}function mergeWatchOptions(c,l){if(!c)return l;if(!l)return c;const g=extend$1(Object.create(null),c);for(const v in l)g[v]=mergeAsArray(c[v],l[v]);return g}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(c,l){return function(v,b=null){isFunction$1(v)||(v=extend$1({},v)),b!=null&&!isObject$1(b)&&(b=null);const _=createAppContext(),E=new WeakSet;let w=!1;const O=_.app={_uid:uid$1++,_component:v,_props:b,_container:null,_context:_,_instance:null,version,get config(){return _.config},set config(U){},use(U,...V){return E.has(U)||(U&&isFunction$1(U.install)?(E.add(U),U.install(O,...V)):isFunction$1(U)&&(E.add(U),U(O,...V))),O},mixin(U){return _.mixins.includes(U)||_.mixins.push(U),O},component(U,V){return V?(_.components[U]=V,O):_.components[U]},directive(U,V){return V?(_.directives[U]=V,O):_.directives[U]},mount(U,V,C){if(!w){const q=createVNode(v,b);return q.appContext=_,C===!0?C="svg":C===!1&&(C=void 0),V&&l?l(q,U):c(q,U,C),w=!0,O._container=U,U.__vue_app__=O,getExposeProxy(q.component)||q.component.proxy}},unmount(){w&&(c(null,O._container),delete O._container.__vue_app__)},provide(U,V){return _.provides[U]=V,O},runWithContext(U){const V=currentApp;currentApp=O;try{return U()}finally{currentApp=V}}};return O}}let currentApp=null;function provide(c,l){if(currentInstance){let g=currentInstance.provides;const v=currentInstance.parent&&currentInstance.parent.provides;v===g&&(g=currentInstance.provides=Object.create(v)),g[c]=l}}function inject(c,l,g=!1){const v=currentInstance||currentRenderingInstance;if(v||currentApp){const b=v?v.parent==null?v.vnode.appContext&&v.vnode.appContext.provides:v.parent.provides:currentApp._context.provides;if(b&&c in b)return b[c];if(arguments.length>1)return g&&isFunction$1(l)?l.call(v&&v.proxy):l}}function initProps(c,l,g,v=!1){const b={},_={};def(_,InternalObjectKey,1),c.propsDefaults=Object.create(null),setFullProps(c,l,b,_);for(const E in c.propsOptions[0])E in b||(b[E]=void 0);g?c.props=v?b:shallowReactive(b):c.type.props?c.props=b:c.props=_,c.attrs=_}function updateProps(c,l,g,v){const{props:b,attrs:_,vnode:{patchFlag:E}}=c,w=toRaw(b),[O]=c.propsOptions;let U=!1;if((v||E>0)&&!(E&16)){if(E&8){const V=c.vnode.dynamicProps;for(let C=0;C<V.length;C++){let q=V[C];if(isEmitListener(c.emitsOptions,q))continue;const ue=l[q];if(O)if(hasOwn(_,q))ue!==_[q]&&(_[q]=ue,U=!0);else{const se=camelize(q);b[se]=resolvePropValue(O,w,se,ue,c,!1)}else ue!==_[q]&&(_[q]=ue,U=!0)}}}else{setFullProps(c,l,b,_)&&(U=!0);let V;for(const C in w)(!l||!hasOwn(l,C)&&((V=hyphenate(C))===C||!hasOwn(l,V)))&&(O?g&&(g[C]!==void 0||g[V]!==void 0)&&(b[C]=resolvePropValue(O,w,C,void 0,c,!0)):delete b[C]);if(_!==w)for(const C in _)(!l||!hasOwn(l,C))&&(delete _[C],U=!0)}U&&trigger(c,"set","$attrs")}function setFullProps(c,l,g,v){const[b,_]=c.propsOptions;let E=!1,w;if(l)for(let O in l){if(isReservedProp(O))continue;const U=l[O];let V;b&&hasOwn(b,V=camelize(O))?!_||!_.includes(V)?g[V]=U:(w||(w={}))[V]=U:isEmitListener(c.emitsOptions,O)||(!(O in v)||U!==v[O])&&(v[O]=U,E=!0)}if(_){const O=toRaw(g),U=w||EMPTY_OBJ;for(let V=0;V<_.length;V++){const C=_[V];g[C]=resolvePropValue(b,O,C,U[C],c,!hasOwn(U,C))}}return E}function resolvePropValue(c,l,g,v,b,_){const E=c[g];if(E!=null){const w=hasOwn(E,"default");if(w&&v===void 0){const O=E.default;if(E.type!==Function&&!E.skipFactory&&isFunction$1(O)){const{propsDefaults:U}=b;if(g in U)v=U[g];else{const V=setCurrentInstance(b);v=U[g]=O.call(null,l),V()}}else v=O}E[0]&&(_&&!w?v=!1:E[1]&&(v===""||v===hyphenate(g))&&(v=!0))}return v}function normalizePropsOptions(c,l,g=!1){const v=l.propsCache,b=v.get(c);if(b)return b;const _=c.props,E={},w=[];let O=!1;if(!isFunction$1(c)){const V=C=>{O=!0;const[q,ue]=normalizePropsOptions(C,l,!0);extend$1(E,q),ue&&w.push(...ue)};!g&&l.mixins.length&&l.mixins.forEach(V),c.extends&&V(c.extends),c.mixins&&c.mixins.forEach(V)}if(!_&&!O)return isObject$1(c)&&v.set(c,EMPTY_ARR),EMPTY_ARR;if(isArray$2(_))for(let V=0;V<_.length;V++){const C=camelize(_[V]);validatePropName(C)&&(E[C]=EMPTY_OBJ)}else if(_)for(const V in _){const C=camelize(V);if(validatePropName(C)){const q=_[V],ue=E[C]=isArray$2(q)||isFunction$1(q)?{type:q}:extend$1({},q);if(ue){const se=getTypeIndex(Boolean,ue.type),Y=getTypeIndex(String,ue.type);ue[0]=se>-1,ue[1]=Y<0||se<Y,(se>-1||hasOwn(ue,"default"))&&w.push(C)}}}const U=[E,w];return isObject$1(c)&&v.set(c,U),U}function validatePropName(c){return c[0]!=="$"&&!isReservedProp(c)}function getType(c){return c===null?"null":typeof c=="function"?c.name||"":typeof c=="object"&&c.constructor&&c.constructor.name||""}function isSameType(c,l){return getType(c)===getType(l)}function getTypeIndex(c,l){return isArray$2(l)?l.findIndex(g=>isSameType(g,c)):isFunction$1(l)&&isSameType(l,c)?0:-1}const isInternalKey=c=>c[0]==="_"||c==="$stable",normalizeSlotValue=c=>isArray$2(c)?c.map(normalizeVNode):[normalizeVNode(c)],normalizeSlot$1=(c,l,g)=>{if(l._n)return l;const v=withCtx((...b)=>normalizeSlotValue(l(...b)),g);return v._c=!1,v},normalizeObjectSlots=(c,l,g)=>{const v=c._ctx;for(const b in c){if(isInternalKey(b))continue;const _=c[b];if(isFunction$1(_))l[b]=normalizeSlot$1(b,_,v);else if(_!=null){const E=normalizeSlotValue(_);l[b]=()=>E}}},normalizeVNodeSlots=(c,l)=>{const g=normalizeSlotValue(l);c.slots.default=()=>g},initSlots=(c,l)=>{if(c.vnode.shapeFlag&32){const g=l._;g?(c.slots=toRaw(l),def(l,"_",g)):normalizeObjectSlots(l,c.slots={})}else c.slots={},l&&normalizeVNodeSlots(c,l);def(c.slots,InternalObjectKey,1)},updateSlots=(c,l,g)=>{const{vnode:v,slots:b}=c;let _=!0,E=EMPTY_OBJ;if(v.shapeFlag&32){const w=l._;w?g&&w===1?_=!1:(extend$1(b,l),!g&&w===1&&delete b._):(_=!l.$stable,normalizeObjectSlots(l,b)),E=l}else l&&(normalizeVNodeSlots(c,l),E={default:1});if(_)for(const w in b)!isInternalKey(w)&&E[w]==null&&delete b[w]};function setRef(c,l,g,v,b=!1){if(isArray$2(c)){c.forEach((q,ue)=>setRef(q,l&&(isArray$2(l)?l[ue]:l),g,v,b));return}if(isAsyncWrapper(v)&&!b)return;const _=v.shapeFlag&4?getExposeProxy(v.component)||v.component.proxy:v.el,E=b?null:_,{i:w,r:O}=c,U=l&&l.r,V=w.refs===EMPTY_OBJ?w.refs={}:w.refs,C=w.setupState;if(U!=null&&U!==O&&(isString$1(U)?(V[U]=null,hasOwn(C,U)&&(C[U]=null)):isRef(U)&&(U.value=null)),isFunction$1(O))callWithErrorHandling(O,w,12,[E,V]);else{const q=isString$1(O),ue=isRef(O);if(q||ue){const se=()=>{if(c.f){const Y=q?hasOwn(C,O)?C[O]:V[O]:O.value;b?isArray$2(Y)&&remove(Y,_):isArray$2(Y)?Y.includes(_)||Y.push(_):q?(V[O]=[_],hasOwn(C,O)&&(C[O]=V[O])):(O.value=[_],c.k&&(V[c.k]=O.value))}else q?(V[O]=E,hasOwn(C,O)&&(C[O]=E)):ue&&(O.value=E,c.k&&(V[c.k]=E))};E?(se.id=-1,queuePostRenderEffect(se,g)):se()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(c){return baseCreateRenderer(c)}function baseCreateRenderer(c,l){const g=getGlobalThis();g.__VUE__=!0;const{insert:v,remove:b,patchProp:_,createElement:E,createText:w,createComment:O,setText:U,setElementText:V,parentNode:C,nextSibling:q,setScopeId:ue=NOOP,insertStaticContent:se}=c,Y=(ye,De,xe,Je=null,ut=null,re=null,Se=void 0,we=null,Ke=!!De.dynamicChildren)=>{if(ye===De)return;ye&&!isSameVNodeType(ye,De)&&(Je=Me(ye),he(ye,ut,re,!0),ye=null),De.patchFlag===-2&&(Ke=!1,De.dynamicChildren=null);const{type:je,ref:St,shapeFlag:xt}=De;switch(je){case Text:pe(ye,De,xe,Je);break;case Comment:ce(ye,De,xe,Je);break;case Static:ye==null&&X(De,xe,Je,Se);break;case Fragment:Z(ye,De,xe,Je,ut,re,Se,we,Ke);break;default:xt&1?oe(ye,De,xe,Je,ut,re,Se,we,Ke):xt&6?J(ye,De,xe,Je,ut,re,Se,we,Ke):(xt&64||xt&128)&&je.process(ye,De,xe,Je,ut,re,Se,we,Ke,dt)}St!=null&&ut&&setRef(St,ye&&ye.ref,re,De||ye,!De)},pe=(ye,De,xe,Je)=>{if(ye==null)v(De.el=w(De.children),xe,Je);else{const ut=De.el=ye.el;De.children!==ye.children&&U(ut,De.children)}},ce=(ye,De,xe,Je)=>{ye==null?v(De.el=O(De.children||""),xe,Je):De.el=ye.el},X=(ye,De,xe,Je)=>{[ye.el,ye.anchor]=se(ye.children,De,xe,Je,ye.el,ye.anchor)},P=({el:ye,anchor:De},xe,Je)=>{let ut;for(;ye&&ye!==De;)ut=q(ye),v(ye,xe,Je),ye=ut;v(De,xe,Je)},z=({el:ye,anchor:De})=>{let xe;for(;ye&&ye!==De;)xe=q(ye),b(ye),ye=xe;b(De)},oe=(ye,De,xe,Je,ut,re,Se,we,Ke)=>{De.type==="svg"?Se="svg":De.type==="math"&&(Se="mathml"),ye==null?A(De,xe,Je,ut,re,Se,we,Ke):k(ye,De,ut,re,Se,we,Ke)},A=(ye,De,xe,Je,ut,re,Se,we)=>{let Ke,je;const{props:St,shapeFlag:xt,transition:Ht,dirs:$t}=ye;if(Ke=ye.el=E(ye.type,re,St&&St.is,St),xt&8?V(Ke,ye.children):xt&16&&$(ye.children,Ke,null,Je,ut,resolveChildrenNamespace(ye,re),Se,we),$t&&invokeDirectiveHook(ye,null,Je,"created"),le(Ke,ye,ye.scopeId,Se,Je),St){for(const He in St)He!=="value"&&!isReservedProp(He)&&_(Ke,He,null,St[He],re,ye.children,Je,ut,ze);"value"in St&&_(Ke,"value",null,St.value,re),(je=St.onVnodeBeforeMount)&&invokeVNodeHook(je,Je,ye)}$t&&invokeDirectiveHook(ye,null,Je,"beforeMount");const ci=needTransition(ut,Ht);ci&&Ht.beforeEnter(Ke),v(Ke,De,xe),((je=St&&St.onVnodeMounted)||ci||$t)&&queuePostRenderEffect(()=>{je&&invokeVNodeHook(je,Je,ye),ci&&Ht.enter(Ke),$t&&invokeDirectiveHook(ye,null,Je,"mounted")},ut)},le=(ye,De,xe,Je,ut)=>{if(xe&&ue(ye,xe),Je)for(let re=0;re<Je.length;re++)ue(ye,Je[re]);if(ut){let re=ut.subTree;if(De===re){const Se=ut.vnode;le(ye,Se,Se.scopeId,Se.slotScopeIds,ut.parent)}}},$=(ye,De,xe,Je,ut,re,Se,we,Ke=0)=>{for(let je=Ke;je<ye.length;je++){const St=ye[je]=we?cloneIfMounted(ye[je]):normalizeVNode(ye[je]);Y(null,St,De,xe,Je,ut,re,Se,we)}},k=(ye,De,xe,Je,ut,re,Se)=>{const we=De.el=ye.el;let{patchFlag:Ke,dynamicChildren:je,dirs:St}=De;Ke|=ye.patchFlag&16;const xt=ye.props||EMPTY_OBJ,Ht=De.props||EMPTY_OBJ;let $t;if(xe&&toggleRecurse(xe,!1),($t=Ht.onVnodeBeforeUpdate)&&invokeVNodeHook($t,xe,De,ye),St&&invokeDirectiveHook(De,ye,xe,"beforeUpdate"),xe&&toggleRecurse(xe,!0),je?j(ye.dynamicChildren,je,we,xe,Je,resolveChildrenNamespace(De,ut),re):Se||W(ye,De,we,null,xe,Je,resolveChildrenNamespace(De,ut),re,!1),Ke>0){if(Ke&16)K(we,De,xt,Ht,xe,Je,ut);else if(Ke&2&&xt.class!==Ht.class&&_(we,"class",null,Ht.class,ut),Ke&4&&_(we,"style",xt.style,Ht.style,ut),Ke&8){const ci=De.dynamicProps;for(let He=0;He<ci.length;He++){const Ee=ci[He],it=xt[Ee],nt=Ht[Ee];(nt!==it||Ee==="value")&&_(we,Ee,it,nt,ut,ye.children,xe,Je,ze)}}Ke&1&&ye.children!==De.children&&V(we,De.children)}else!Se&&je==null&&K(we,De,xt,Ht,xe,Je,ut);(($t=Ht.onVnodeUpdated)||St)&&queuePostRenderEffect(()=>{$t&&invokeVNodeHook($t,xe,De,ye),St&&invokeDirectiveHook(De,ye,xe,"updated")},Je)},j=(ye,De,xe,Je,ut,re,Se)=>{for(let we=0;we<De.length;we++){const Ke=ye[we],je=De[we],St=Ke.el&&(Ke.type===Fragment||!isSameVNodeType(Ke,je)||Ke.shapeFlag&70)?C(Ke.el):xe;Y(Ke,je,St,null,Je,ut,re,Se,!0)}},K=(ye,De,xe,Je,ut,re,Se)=>{if(xe!==Je){if(xe!==EMPTY_OBJ)for(const we in xe)!isReservedProp(we)&&!(we in Je)&&_(ye,we,xe[we],null,Se,De.children,ut,re,ze);for(const we in Je){if(isReservedProp(we))continue;const Ke=Je[we],je=xe[we];Ke!==je&&we!=="value"&&_(ye,we,je,Ke,Se,De.children,ut,re,ze)}"value"in Je&&_(ye,"value",xe.value,Je.value,Se)}},Z=(ye,De,xe,Je,ut,re,Se,we,Ke)=>{const je=De.el=ye?ye.el:w(""),St=De.anchor=ye?ye.anchor:w("");let{patchFlag:xt,dynamicChildren:Ht,slotScopeIds:$t}=De;$t&&(we=we?we.concat($t):$t),ye==null?(v(je,xe,Je),v(St,xe,Je),$(De.children||[],xe,St,ut,re,Se,we,Ke)):xt>0&&xt&64&&Ht&&ye.dynamicChildren?(j(ye.dynamicChildren,Ht,xe,ut,re,Se,we),(De.key!=null||ut&&De===ut.subTree)&&traverseStaticChildren(ye,De,!0)):W(ye,De,xe,St,ut,re,Se,we,Ke)},J=(ye,De,xe,Je,ut,re,Se,we,Ke)=>{De.slotScopeIds=we,ye==null?De.shapeFlag&512?ut.ctx.activate(De,xe,Je,Se,Ke):D(De,xe,Je,ut,re,Se,Ke):G(ye,De,Ke)},D=(ye,De,xe,Je,ut,re,Se)=>{const we=ye.component=createComponentInstance(ye,Je,ut);if(isKeepAlive(ye)&&(we.ctx.renderer=dt),setupComponent(we),we.asyncDep){if(ut&&ut.registerDep(we,M),!ye.el){const Ke=we.subTree=createVNode(Comment);ce(null,Ke,De,xe)}}else M(we,ye,De,xe,ut,re,Se)},G=(ye,De,xe)=>{const Je=De.component=ye.component;if(shouldUpdateComponent(ye,De,xe))if(Je.asyncDep&&!Je.asyncResolved){L(Je,De,xe);return}else Je.next=De,invalidateJob(Je.update),Je.effect.dirty=!0,Je.update();else De.el=ye.el,Je.vnode=De},M=(ye,De,xe,Je,ut,re,Se)=>{const we=()=>{if(ye.isMounted){let{next:St,bu:xt,u:Ht,parent:$t,vnode:ci}=ye;{const tt=locateNonHydratedAsyncRoot(ye);if(tt){St&&(St.el=ci.el,L(ye,St,Se)),tt.asyncDep.then(()=>{ye.isUnmounted||we()});return}}let He=St,Ee;toggleRecurse(ye,!1),St?(St.el=ci.el,L(ye,St,Se)):St=ci,xt&&invokeArrayFns(xt),(Ee=St.props&&St.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ee,$t,St,ci),toggleRecurse(ye,!0);const it=renderComponentRoot(ye),nt=ye.subTree;ye.subTree=it,Y(nt,it,C(nt.el),Me(nt),ye,ut,re),St.el=it.el,He===null&&updateHOCHostEl(ye,it.el),Ht&&queuePostRenderEffect(Ht,ut),(Ee=St.props&&St.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ee,$t,St,ci),ut)}else{let St;const{el:xt,props:Ht}=De,{bm:$t,m:ci,parent:He}=ye,Ee=isAsyncWrapper(De);if(toggleRecurse(ye,!1),$t&&invokeArrayFns($t),!Ee&&(St=Ht&&Ht.onVnodeBeforeMount)&&invokeVNodeHook(St,He,De),toggleRecurse(ye,!0),xt&&Pt){const it=()=>{ye.subTree=renderComponentRoot(ye),Pt(xt,ye.subTree,ye,ut,null)};Ee?De.type.__asyncLoader().then(()=>!ye.isUnmounted&&it()):it()}else{const it=ye.subTree=renderComponentRoot(ye);Y(null,it,xe,Je,ye,ut,re),De.el=it.el}if(ci&&queuePostRenderEffect(ci,ut),!Ee&&(St=Ht&&Ht.onVnodeMounted)){const it=De;queuePostRenderEffect(()=>invokeVNodeHook(St,He,it),ut)}(De.shapeFlag&256||He&&isAsyncWrapper(He.vnode)&&He.vnode.shapeFlag&256)&&ye.a&&queuePostRenderEffect(ye.a,ut),ye.isMounted=!0,De=xe=Je=null}},Ke=ye.effect=new ReactiveEffect(we,NOOP,()=>queueJob(je),ye.scope),je=ye.update=()=>{Ke.dirty&&Ke.run()};je.id=ye.uid,toggleRecurse(ye,!0),je()},L=(ye,De,xe)=>{De.component=ye;const Je=ye.vnode.props;ye.vnode=De,ye.next=null,updateProps(ye,De.props,Je,xe),updateSlots(ye,De.children,xe),pauseTracking(),flushPreFlushCbs(ye),resetTracking()},W=(ye,De,xe,Je,ut,re,Se,we,Ke=!1)=>{const je=ye&&ye.children,St=ye?ye.shapeFlag:0,xt=De.children,{patchFlag:Ht,shapeFlag:$t}=De;if(Ht>0){if(Ht&128){de(je,xt,xe,Je,ut,re,Se,we,Ke);return}else if(Ht&256){ve(je,xt,xe,Je,ut,re,Se,we,Ke);return}}$t&8?(St&16&&ze(je,ut,re),xt!==je&&V(xe,xt)):St&16?$t&16?de(je,xt,xe,Je,ut,re,Se,we,Ke):ze(je,ut,re,!0):(St&8&&V(xe,""),$t&16&&$(xt,xe,Je,ut,re,Se,we,Ke))},ve=(ye,De,xe,Je,ut,re,Se,we,Ke)=>{ye=ye||EMPTY_ARR,De=De||EMPTY_ARR;const je=ye.length,St=De.length,xt=Math.min(je,St);let Ht;for(Ht=0;Ht<xt;Ht++){const $t=De[Ht]=Ke?cloneIfMounted(De[Ht]):normalizeVNode(De[Ht]);Y(ye[Ht],$t,xe,null,ut,re,Se,we,Ke)}je>St?ze(ye,ut,re,!0,!1,xt):$(De,xe,Je,ut,re,Se,we,Ke,xt)},de=(ye,De,xe,Je,ut,re,Se,we,Ke)=>{let je=0;const St=De.length;let xt=ye.length-1,Ht=St-1;for(;je<=xt&&je<=Ht;){const $t=ye[je],ci=De[je]=Ke?cloneIfMounted(De[je]):normalizeVNode(De[je]);if(isSameVNodeType($t,ci))Y($t,ci,xe,null,ut,re,Se,we,Ke);else break;je++}for(;je<=xt&&je<=Ht;){const $t=ye[xt],ci=De[Ht]=Ke?cloneIfMounted(De[Ht]):normalizeVNode(De[Ht]);if(isSameVNodeType($t,ci))Y($t,ci,xe,null,ut,re,Se,we,Ke);else break;xt--,Ht--}if(je>xt){if(je<=Ht){const $t=Ht+1,ci=$t<St?De[$t].el:Je;for(;je<=Ht;)Y(null,De[je]=Ke?cloneIfMounted(De[je]):normalizeVNode(De[je]),xe,ci,ut,re,Se,we,Ke),je++}}else if(je>Ht)for(;je<=xt;)he(ye[je],ut,re,!0),je++;else{const $t=je,ci=je,He=new Map;for(je=ci;je<=Ht;je++){const It=De[je]=Ke?cloneIfMounted(De[je]):normalizeVNode(De[je]);It.key!=null&&He.set(It.key,je)}let Ee,it=0;const nt=Ht-ci+1;let tt=!1,Et=0;const Nt=new Array(nt);for(je=0;je<nt;je++)Nt[je]=0;for(je=$t;je<=xt;je++){const It=ye[je];if(it>=nt){he(It,ut,re,!0);continue}let ri;if(It.key!=null)ri=He.get(It.key);else for(Ee=ci;Ee<=Ht;Ee++)if(Nt[Ee-ci]===0&&isSameVNodeType(It,De[Ee])){ri=Ee;break}ri===void 0?he(It,ut,re,!0):(Nt[ri-ci]=je+1,ri>=Et?Et=ri:tt=!0,Y(It,De[ri],xe,null,ut,re,Se,we,Ke),it++)}const Vt=tt?getSequence(Nt):EMPTY_ARR;for(Ee=Vt.length-1,je=nt-1;je>=0;je--){const It=ci+je,ri=De[It],gi=It+1<St?De[It+1].el:Je;Nt[je]===0?Y(null,ri,xe,gi,ut,re,Se,we,Ke):tt&&(Ee<0||je!==Vt[Ee]?ne(ri,xe,gi,2):Ee--)}}},ne=(ye,De,xe,Je,ut=null)=>{const{el:re,type:Se,transition:we,children:Ke,shapeFlag:je}=ye;if(je&6){ne(ye.component.subTree,De,xe,Je);return}if(je&128){ye.suspense.move(De,xe,Je);return}if(je&64){Se.move(ye,De,xe,dt);return}if(Se===Fragment){v(re,De,xe);for(let xt=0;xt<Ke.length;xt++)ne(Ke[xt],De,xe,Je);v(ye.anchor,De,xe);return}if(Se===Static){P(ye,De,xe);return}if(Je!==2&&je&1&&we)if(Je===0)we.beforeEnter(re),v(re,De,xe),queuePostRenderEffect(()=>we.enter(re),ut);else{const{leave:xt,delayLeave:Ht,afterLeave:$t}=we,ci=()=>v(re,De,xe),He=()=>{xt(re,()=>{ci(),$t&&$t()})};Ht?Ht(re,ci,He):He()}else v(re,De,xe)},he=(ye,De,xe,Je=!1,ut=!1)=>{const{type:re,props:Se,ref:we,children:Ke,dynamicChildren:je,shapeFlag:St,patchFlag:xt,dirs:Ht}=ye;if(we!=null&&setRef(we,null,xe,ye,!0),St&256){De.ctx.deactivate(ye);return}const $t=St&1&&Ht,ci=!isAsyncWrapper(ye);let He;if(ci&&(He=Se&&Se.onVnodeBeforeUnmount)&&invokeVNodeHook(He,De,ye),St&6)Fe(ye.component,xe,Je);else{if(St&128){ye.suspense.unmount(xe,Je);return}$t&&invokeDirectiveHook(ye,null,De,"beforeUnmount"),St&64?ye.type.remove(ye,De,xe,ut,dt,Je):je&&(re!==Fragment||xt>0&&xt&64)?ze(je,De,xe,!1,!0):(re===Fragment&&xt&384||!ut&&St&16)&&ze(Ke,De,xe),Je&&_e(ye)}(ci&&(He=Se&&Se.onVnodeUnmounted)||$t)&&queuePostRenderEffect(()=>{He&&invokeVNodeHook(He,De,ye),$t&&invokeDirectiveHook(ye,null,De,"unmounted")},xe)},_e=ye=>{const{type:De,el:xe,anchor:Je,transition:ut}=ye;if(De===Fragment){Ue(xe,Je);return}if(De===Static){z(ye);return}const re=()=>{b(xe),ut&&!ut.persisted&&ut.afterLeave&&ut.afterLeave()};if(ye.shapeFlag&1&&ut&&!ut.persisted){const{leave:Se,delayLeave:we}=ut,Ke=()=>Se(xe,re);we?we(ye.el,re,Ke):Ke()}else re()},Ue=(ye,De)=>{let xe;for(;ye!==De;)xe=q(ye),b(ye),ye=xe;b(De)},Fe=(ye,De,xe)=>{const{bum:Je,scope:ut,update:re,subTree:Se,um:we}=ye;Je&&invokeArrayFns(Je),ut.stop(),re&&(re.active=!1,he(Se,ye,De,xe)),we&&queuePostRenderEffect(we,De),queuePostRenderEffect(()=>{ye.isUnmounted=!0},De),De&&De.pendingBranch&&!De.isUnmounted&&ye.asyncDep&&!ye.asyncResolved&&ye.suspenseId===De.pendingId&&(De.deps--,De.deps===0&&De.resolve())},ze=(ye,De,xe,Je=!1,ut=!1,re=0)=>{for(let Se=re;Se<ye.length;Se++)he(ye[Se],De,xe,Je,ut)},Me=ye=>ye.shapeFlag&6?Me(ye.component.subTree):ye.shapeFlag&128?ye.suspense.next():q(ye.anchor||ye.el);let We=!1;const rt=(ye,De,xe)=>{ye==null?De._vnode&&he(De._vnode,null,null,!0):Y(De._vnode||null,ye,De,null,null,null,xe),We||(We=!0,flushPreFlushCbs(),flushPostFlushCbs(),We=!1),De._vnode=ye},dt={p:Y,um:he,m:ne,r:_e,mt:D,mc:$,pc:W,pbc:j,n:Me,o:c};let ht,Pt;return l&&([ht,Pt]=l(dt)),{render:rt,hydrate:ht,createApp:createAppAPI(rt,ht)}}function resolveChildrenNamespace({type:c,props:l},g){return g==="svg"&&c==="foreignObject"||g==="mathml"&&c==="annotation-xml"&&l&&l.encoding&&l.encoding.includes("html")?void 0:g}function toggleRecurse({effect:c,update:l},g){c.allowRecurse=l.allowRecurse=g}function needTransition(c,l){return(!c||c&&!c.pendingBranch)&&l&&!l.persisted}function traverseStaticChildren(c,l,g=!1){const v=c.children,b=l.children;if(isArray$2(v)&&isArray$2(b))for(let _=0;_<v.length;_++){const E=v[_];let w=b[_];w.shapeFlag&1&&!w.dynamicChildren&&((w.patchFlag<=0||w.patchFlag===32)&&(w=b[_]=cloneIfMounted(b[_]),w.el=E.el),g||traverseStaticChildren(E,w)),w.type===Text&&(w.el=E.el)}}function getSequence(c){const l=c.slice(),g=[0];let v,b,_,E,w;const O=c.length;for(v=0;v<O;v++){const U=c[v];if(U!==0){if(b=g[g.length-1],c[b]<U){l[v]=b,g.push(v);continue}for(_=0,E=g.length-1;_<E;)w=_+E>>1,c[g[w]]<U?_=w+1:E=w;U<c[g[_]]&&(_>0&&(l[v]=g[_-1]),g[_]=v)}}for(_=g.length,E=g[_-1];_-- >0;)g[_]=E,E=l[E];return g}function locateNonHydratedAsyncRoot(c){const l=c.subTree.component;if(l)return l.asyncDep&&!l.asyncResolved?l:locateNonHydratedAsyncRoot(l)}const isTeleport=c=>c.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(c=!1){blockStack.push(currentBlock=c?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(c){isBlockTreeEnabled+=c}function setupBlock(c){return c.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(c),c}function createElementBlock(c,l,g,v,b,_){return setupBlock(createBaseVNode(c,l,g,v,b,_,!0))}function isVNode(c){return c?c.__v_isVNode===!0:!1}function isSameVNodeType(c,l){return c.type===l.type&&c.key===l.key}const InternalObjectKey="__vInternal",normalizeKey=({key:c})=>c??null,normalizeRef=({ref:c,ref_key:l,ref_for:g})=>(typeof c=="number"&&(c=""+c),c!=null?isString$1(c)||isRef(c)||isFunction$1(c)?{i:currentRenderingInstance,r:c,k:l,f:!!g}:c:null);function createBaseVNode(c,l=null,g=null,v=0,b=null,_=c===Fragment?0:1,E=!1,w=!1){const O={__v_isVNode:!0,__v_skip:!0,type:c,props:l,key:l&&normalizeKey(l),ref:l&&normalizeRef(l),scopeId:currentScopeId,slotScopeIds:null,children:g,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:_,patchFlag:v,dynamicProps:b,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return w?(normalizeChildren(O,g),_&128&&c.normalize(O)):g&&(O.shapeFlag|=isString$1(g)?8:16),isBlockTreeEnabled>0&&!E&&currentBlock&&(O.patchFlag>0||_&6)&&O.patchFlag!==32&&currentBlock.push(O),O}const createVNode=_createVNode;function _createVNode(c,l=null,g=null,v=0,b=null,_=!1){if((!c||c===NULL_DYNAMIC_COMPONENT)&&(c=Comment),isVNode(c)){const w=cloneVNode(c,l,!0);return g&&normalizeChildren(w,g),isBlockTreeEnabled>0&&!_&&currentBlock&&(w.shapeFlag&6?currentBlock[currentBlock.indexOf(c)]=w:currentBlock.push(w)),w.patchFlag|=-2,w}if(isClassComponent(c)&&(c=c.__vccOpts),l){l=guardReactiveProps(l);let{class:w,style:O}=l;w&&!isString$1(w)&&(l.class=normalizeClass(w)),isObject$1(O)&&(isProxy(O)&&!isArray$2(O)&&(O=extend$1({},O)),l.style=normalizeStyle(O))}const E=isString$1(c)?1:isSuspense(c)?128:isTeleport(c)?64:isObject$1(c)?4:isFunction$1(c)?2:0;return createBaseVNode(c,l,g,v,b,E,_,!0)}function guardReactiveProps(c){return c?isProxy(c)||InternalObjectKey in c?extend$1({},c):c:null}function cloneVNode(c,l,g=!1){const{props:v,ref:b,patchFlag:_,children:E}=c,w=l?mergeProps(v||{},l):v;return{__v_isVNode:!0,__v_skip:!0,type:c.type,props:w,key:w&&normalizeKey(w),ref:l&&l.ref?g&&b?isArray$2(b)?b.concat(normalizeRef(l)):[b,normalizeRef(l)]:normalizeRef(l):b,scopeId:c.scopeId,slotScopeIds:c.slotScopeIds,children:E,target:c.target,targetAnchor:c.targetAnchor,staticCount:c.staticCount,shapeFlag:c.shapeFlag,patchFlag:l&&c.type!==Fragment?_===-1?16:_|16:_,dynamicProps:c.dynamicProps,dynamicChildren:c.dynamicChildren,appContext:c.appContext,dirs:c.dirs,transition:c.transition,component:c.component,suspense:c.suspense,ssContent:c.ssContent&&cloneVNode(c.ssContent),ssFallback:c.ssFallback&&cloneVNode(c.ssFallback),el:c.el,anchor:c.anchor,ctx:c.ctx,ce:c.ce}}function createTextVNode(c=" ",l=0){return createVNode(Text,null,c,l)}function normalizeVNode(c){return c==null||typeof c=="boolean"?createVNode(Comment):isArray$2(c)?createVNode(Fragment,null,c.slice()):typeof c=="object"?cloneIfMounted(c):createVNode(Text,null,String(c))}function cloneIfMounted(c){return c.el===null&&c.patchFlag!==-1||c.memo?c:cloneVNode(c)}function normalizeChildren(c,l){let g=0;const{shapeFlag:v}=c;if(l==null)l=null;else if(isArray$2(l))g=16;else if(typeof l=="object")if(v&65){const b=l.default;b&&(b._c&&(b._d=!1),normalizeChildren(c,b()),b._c&&(b._d=!0));return}else{g=32;const b=l._;!b&&!(InternalObjectKey in l)?l._ctx=currentRenderingInstance:b===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?l._=1:(l._=2,c.patchFlag|=1024))}else isFunction$1(l)?(l={default:l,_ctx:currentRenderingInstance},g=32):(l=String(l),v&64?(g=16,l=[createTextVNode(l)]):g=8);c.children=l,c.shapeFlag|=g}function mergeProps(...c){const l={};for(let g=0;g<c.length;g++){const v=c[g];for(const b in v)if(b==="class")l.class!==v.class&&(l.class=normalizeClass([l.class,v.class]));else if(b==="style")l.style=normalizeStyle([l.style,v.style]);else if(isOn(b)){const _=l[b],E=v[b];E&&_!==E&&!(isArray$2(_)&&_.includes(E))&&(l[b]=_?[].concat(_,E):E)}else b!==""&&(l[b]=v[b])}return l}function invokeVNodeHook(c,l,g,v=null){callWithAsyncErrorHandling(c,l,7,[g,v])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(c,l,g){const v=c.type,b=(l?l.appContext:c.appContext)||emptyAppContext,_={uid:uid++,vnode:c,type:v,parent:l,appContext:b,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:l?l.provides:Object.create(b.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(v,b),emitsOptions:normalizeEmitsOptions(v,b),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:v.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:g,suspenseId:g?g.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return _.ctx={_},_.root=l?l.root:_,_.emit=emit.bind(null,_),c.ce&&c.ce(_),_}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const c=getGlobalThis(),l=(g,v)=>{let b;return(b=c[g])||(b=c[g]=[]),b.push(v),_=>{b.length>1?b.forEach(E=>E(_)):b[0](_)}};internalSetCurrentInstance=l("__VUE_INSTANCE_SETTERS__",g=>currentInstance=g),setInSSRSetupState=l("__VUE_SSR_SETTERS__",g=>isInSSRComponentSetup=g)}const setCurrentInstance=c=>{const l=currentInstance;return internalSetCurrentInstance(c),c.scope.on(),()=>{c.scope.off(),internalSetCurrentInstance(l)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(c){return c.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(c,l=!1){l&&setInSSRSetupState(l);const{props:g,children:v}=c.vnode,b=isStatefulComponent(c);initProps(c,g,b,l),initSlots(c,v);const _=b?setupStatefulComponent(c,l):void 0;return l&&setInSSRSetupState(!1),_}function setupStatefulComponent(c,l){const g=c.type;c.accessCache=Object.create(null),c.proxy=markRaw(new Proxy(c.ctx,PublicInstanceProxyHandlers));const{setup:v}=g;if(v){const b=c.setupContext=v.length>1?createSetupContext(c):null,_=setCurrentInstance(c);pauseTracking();const E=callWithErrorHandling(v,c,0,[c.props,b]);if(resetTracking(),_(),isPromise(E)){if(E.then(unsetCurrentInstance,unsetCurrentInstance),l)return E.then(w=>{handleSetupResult(c,w,l)}).catch(w=>{handleError(w,c,0)});c.asyncDep=E}else handleSetupResult(c,E,l)}else finishComponentSetup(c,l)}function handleSetupResult(c,l,g){isFunction$1(l)?c.type.__ssrInlineRender?c.ssrRender=l:c.render=l:isObject$1(l)&&(c.setupState=proxyRefs(l)),finishComponentSetup(c,g)}let compile;function finishComponentSetup(c,l,g){const v=c.type;if(!c.render){if(!l&&compile&&!v.render){const b=v.template||resolveMergedOptions(c).template;if(b){const{isCustomElement:_,compilerOptions:E}=c.appContext.config,{delimiters:w,compilerOptions:O}=v,U=extend$1(extend$1({isCustomElement:_,delimiters:w},E),O);v.render=compile(b,U)}}c.render=v.render||NOOP}{const b=setCurrentInstance(c);pauseTracking();try{applyOptions(c)}finally{resetTracking(),b()}}}function getAttrsProxy(c){return c.attrsProxy||(c.attrsProxy=new Proxy(c.attrs,{get(l,g){return track(c,"get","$attrs"),l[g]}}))}function createSetupContext(c){const l=g=>{c.exposed=g||{}};return{get attrs(){return getAttrsProxy(c)},slots:c.slots,emit:c.emit,expose:l}}function getExposeProxy(c){if(c.exposed)return c.exposeProxy||(c.exposeProxy=new Proxy(proxyRefs(markRaw(c.exposed)),{get(l,g){if(g in l)return l[g];if(g in publicPropertiesMap)return publicPropertiesMap[g](c)},has(l,g){return g in l||g in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=c=>c.replace(classifyRE,l=>l.toUpperCase()).replace(/[-_]/g,"");function getComponentName(c,l=!0){return isFunction$1(c)?c.displayName||c.name:c.name||l&&c.__name}function formatComponentName(c,l,g=!1){let v=getComponentName(l);if(!v&&l.__file){const b=l.__file.match(/([^/\\]+)\.\w+$/);b&&(v=b[1])}if(!v&&c&&c.parent){const b=_=>{for(const E in _)if(_[E]===l)return E};v=b(c.components||c.parent.type.components)||b(c.appContext.components)}return v?classify(v):g?"App":"Anonymous"}function isClassComponent(c){return isFunction$1(c)&&"__vccOpts"in c}const computed=(c,l)=>computed$1(c,l,isInSSRComponentSetup);function h(c,l,g){const v=arguments.length;return v===2?isObject$1(l)&&!isArray$2(l)?isVNode(l)?createVNode(c,null,[l]):createVNode(c,l):createVNode(c,null,l):(v>3?g=Array.prototype.slice.call(arguments,2):v===3&&isVNode(g)&&(g=[g]),createVNode(c,l,g))}const version="3.4.19";/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(c,l,g)=>{l.insertBefore(c,g||null)},remove:c=>{const l=c.parentNode;l&&l.removeChild(c)},createElement:(c,l,g,v)=>{const b=l==="svg"?doc.createElementNS(svgNS,c):l==="mathml"?doc.createElementNS(mathmlNS,c):doc.createElement(c,g?{is:g}:void 0);return c==="select"&&v&&v.multiple!=null&&b.setAttribute("multiple",v.multiple),b},createText:c=>doc.createTextNode(c),createComment:c=>doc.createComment(c),setText:(c,l)=>{c.nodeValue=l},setElementText:(c,l)=>{c.textContent=l},parentNode:c=>c.parentNode,nextSibling:c=>c.nextSibling,querySelector:c=>doc.querySelector(c),setScopeId(c,l){c.setAttribute(l,"")},insertStaticContent(c,l,g,v,b,_){const E=g?g.previousSibling:l.lastChild;if(b&&(b===_||b.nextSibling))for(;l.insertBefore(b.cloneNode(!0),g),!(b===_||!(b=b.nextSibling)););else{templateContainer.innerHTML=v==="svg"?`<svg>${c}</svg>`:v==="mathml"?`<math>${c}</math>`:c;const w=templateContainer.content;if(v==="svg"||v==="mathml"){const O=w.firstChild;for(;O.firstChild;)w.appendChild(O.firstChild);w.removeChild(O)}l.insertBefore(w,g)}return[E?E.nextSibling:l.firstChild,g?g.previousSibling:l.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(c,l,g){const v=c[vtcKey];v&&(l=(l?[l,...v]:[...v]).join(" ")),l==null?c.removeAttribute("class"):g?c.setAttribute("class",l):c.className=l}const vShowOldKey=Symbol("_vod"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(c,l,g){const v=c.style,b=isString$1(g),_=v.display;let E=!1;if(g&&!b){if(l&&!isString$1(l))for(const w in l)g[w]==null&&setStyle(v,w,"");for(const w in g)w==="display"&&(E=!0),setStyle(v,w,g[w])}else if(b){if(l!==g){const w=v[CSS_VAR_TEXT];w&&(g+=";"+w),v.cssText=g,E=displayRE.test(g)}}else l&&c.removeAttribute("style");vShowOldKey in c&&(c[vShowOldKey]=E?v.display:"",v.display=_)}const importantRE=/\s*!important$/;function setStyle(c,l,g){if(isArray$2(g))g.forEach(v=>setStyle(c,l,v));else if(g==null&&(g=""),l.startsWith("--"))c.setProperty(l,g);else{const v=autoPrefix(c,l);importantRE.test(g)?c.setProperty(hyphenate(v),g.replace(importantRE,""),"important"):c[v]=g}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(c,l){const g=prefixCache[l];if(g)return g;let v=camelize(l);if(v!=="filter"&&v in c)return prefixCache[l]=v;v=capitalize(v);for(let b=0;b<prefixes.length;b++){const _=prefixes[b]+v;if(_ in c)return prefixCache[l]=_}return l}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(c,l,g,v,b){if(v&&l.startsWith("xlink:"))g==null?c.removeAttributeNS(xlinkNS,l.slice(6,l.length)):c.setAttributeNS(xlinkNS,l,g);else{const _=isSpecialBooleanAttr(l);g==null||_&&!includeBooleanAttr(g)?c.removeAttribute(l):c.setAttribute(l,_?"":g)}}function patchDOMProp(c,l,g,v,b,_,E){if(l==="innerHTML"||l==="textContent"){v&&E(v,b,_),c[l]=g??"";return}const w=c.tagName;if(l==="value"&&w!=="PROGRESS"&&!w.includes("-")){c._value=g;const U=w==="OPTION"?c.getAttribute("value"):c.value,V=g??"";U!==V&&(c.value=V),g==null&&c.removeAttribute(l);return}let O=!1;if(g===""||g==null){const U=typeof c[l];U==="boolean"?g=includeBooleanAttr(g):g==null&&U==="string"?(g="",O=!0):U==="number"&&(g=0,O=!0)}try{c[l]=g}catch{}O&&c.removeAttribute(l)}function addEventListener(c,l,g,v){c.addEventListener(l,g,v)}function removeEventListener(c,l,g,v){c.removeEventListener(l,g,v)}const veiKey=Symbol("_vei");function patchEvent(c,l,g,v,b=null){const _=c[veiKey]||(c[veiKey]={}),E=_[l];if(v&&E)E.value=v;else{const[w,O]=parseName(l);if(v){const U=_[l]=createInvoker(v,b);addEventListener(c,w,U,O)}else E&&(removeEventListener(c,w,E,O),_[l]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(c){let l;if(optionsModifierRE.test(c)){l={};let v;for(;v=c.match(optionsModifierRE);)c=c.slice(0,c.length-v[0].length),l[v[0].toLowerCase()]=!0}return[c[2]===":"?c.slice(3):hyphenate(c.slice(2)),l]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(c,l){const g=v=>{if(!v._vts)v._vts=Date.now();else if(v._vts<=g.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(v,g.value),l,5,[v])};return g.value=c,g.attached=getNow(),g}function patchStopImmediatePropagation(c,l){if(isArray$2(l)){const g=c.stopImmediatePropagation;return c.stopImmediatePropagation=()=>{g.call(c),c._stopped=!0},l.map(v=>b=>!b._stopped&&v&&v(b))}else return l}const isNativeOn=c=>c.charCodeAt(0)===111&&c.charCodeAt(1)===110&&c.charCodeAt(2)>96&&c.charCodeAt(2)<123,patchProp=(c,l,g,v,b,_,E,w,O)=>{const U=b==="svg";l==="class"?patchClass(c,v,U):l==="style"?patchStyle(c,g,v):isOn(l)?isModelListener(l)||patchEvent(c,l,g,v,E):(l[0]==="."?(l=l.slice(1),!0):l[0]==="^"?(l=l.slice(1),!1):shouldSetAsProp(c,l,v,U))?patchDOMProp(c,l,v,_,E,w,O):(l==="true-value"?c._trueValue=v:l==="false-value"&&(c._falseValue=v),patchAttr(c,l,v,U))};function shouldSetAsProp(c,l,g,v){if(v)return!!(l==="innerHTML"||l==="textContent"||l in c&&isNativeOn(l)&&isFunction$1(g));if(l==="spellcheck"||l==="draggable"||l==="translate"||l==="form"||l==="list"&&c.tagName==="INPUT"||l==="type"&&c.tagName==="TEXTAREA")return!1;if(l==="width"||l==="height"){const b=c.tagName;if(b==="IMG"||b==="VIDEO"||b==="CANVAS"||b==="SOURCE")return!1}return isNativeOn(l)&&isString$1(g)?!1:l in c}const getModelAssigner=c=>{const l=c.props["onUpdate:modelValue"]||!1;return isArray$2(l)?g=>invokeArrayFns(l,g):l};function onCompositionStart(c){c.target.composing=!0}function onCompositionEnd(c){const l=c.target;l.composing&&(l.composing=!1,l.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(c,{modifiers:{lazy:l,trim:g,number:v}},b){c[assignKey]=getModelAssigner(b);const _=v||b.props&&b.props.type==="number";addEventListener(c,l?"change":"input",E=>{if(E.target.composing)return;let w=c.value;g&&(w=w.trim()),_&&(w=looseToNumber(w)),c[assignKey](w)}),g&&addEventListener(c,"change",()=>{c.value=c.value.trim()}),l||(addEventListener(c,"compositionstart",onCompositionStart),addEventListener(c,"compositionend",onCompositionEnd),addEventListener(c,"change",onCompositionEnd))},mounted(c,{value:l}){c.value=l??""},beforeUpdate(c,{value:l,modifiers:{lazy:g,trim:v,number:b}},_){if(c[assignKey]=getModelAssigner(_),c.composing)return;const E=b||c.type==="number"?looseToNumber(c.value):c.value,w=l??"";E!==w&&(document.activeElement===c&&c.type!=="range"&&(g||v&&c.value.trim()===w)||(c.value=w))}},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...c)=>{const l=ensureRenderer().createApp(...c),{mount:g}=l;return l.mount=v=>{const b=normalizeContainer(v);if(!b)return;const _=l._component;!isFunction$1(_)&&!_.render&&!_.template&&(_.template=b.innerHTML),b.innerHTML="";const E=g(b,!1,resolveRootNamespace(b));return b instanceof Element&&(b.removeAttribute("v-cloak"),b.setAttribute("data-v-app","")),E},l};function resolveRootNamespace(c){if(c instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&c instanceof MathMLElement)return"mathml"}function normalizeContainer(c){return isString$1(c)?document.querySelector(c):c}var isVue2=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const piniaSymbol=Symbol();var MutationType;(function(c){c.direct="direct",c.patchObject="patch object",c.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const c=effectScope(!0),l=c.run(()=>ref({}));let g=[],v=[];const b=markRaw({install(_){b._a=_,_.provide(piniaSymbol,b),_.config.globalProperties.$pinia=b,v.forEach(E=>g.push(E)),v=[]},use(_){return!this._a&&!isVue2?v.push(_):g.push(_),this},_p:g,_a:null,_e:c,_s:new Map,state:l});return b}const _imports_0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e";/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(c){return c.__esModule||c[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(c,l){const g={};for(const v in l){const b=l[v];g[v]=isArray$1(b)?b.map(c):c(b)}return g}const noop$1=()=>{},isArray$1=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=c=>c.replace(TRAILING_SLASH_RE,"");function parseURL(c,l,g="/"){let v,b={},_="",E="";const w=l.indexOf("#");let O=l.indexOf("?");return w<O&&w>=0&&(O=-1),O>-1&&(v=l.slice(0,O),_=l.slice(O+1,w>-1?w:l.length),b=c(_)),w>-1&&(v=v||l.slice(0,w),E=l.slice(w,l.length)),v=resolveRelativePath(v??l,g),{fullPath:v+(_&&"?")+_+E,path:v,query:b,hash:E}}function stringifyURL(c,l){const g=l.query?c(l.query):"";return l.path+(g&&"?")+g+(l.hash||"")}function stripBase(c,l){return!l||!c.toLowerCase().startsWith(l.toLowerCase())?c:c.slice(l.length)||"/"}function isSameRouteLocation(c,l,g){const v=l.matched.length-1,b=g.matched.length-1;return v>-1&&v===b&&isSameRouteRecord(l.matched[v],g.matched[b])&&isSameRouteLocationParams(l.params,g.params)&&c(l.query)===c(g.query)&&l.hash===g.hash}function isSameRouteRecord(c,l){return(c.aliasOf||c)===(l.aliasOf||l)}function isSameRouteLocationParams(c,l){if(Object.keys(c).length!==Object.keys(l).length)return!1;for(const g in c)if(!isSameRouteLocationParamsValue(c[g],l[g]))return!1;return!0}function isSameRouteLocationParamsValue(c,l){return isArray$1(c)?isEquivalentArray(c,l):isArray$1(l)?isEquivalentArray(l,c):c===l}function isEquivalentArray(c,l){return isArray$1(l)?c.length===l.length&&c.every((g,v)=>g===l[v]):c.length===1&&c[0]===l}function resolveRelativePath(c,l){if(c.startsWith("/"))return c;if(!c)return l;const g=l.split("/"),v=c.split("/"),b=v[v.length-1];(b===".."||b===".")&&v.push("");let _=g.length-1,E,w;for(E=0;E<v.length;E++)if(w=v[E],w!==".")if(w==="..")_>1&&_--;else break;return g.slice(0,_).join("/")+"/"+v.slice(E-(E===v.length?1:0)).join("/")}var NavigationType;(function(c){c.pop="pop",c.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(c){c.back="back",c.forward="forward",c.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(c){if(!c)if(isBrowser){const l=document.querySelector("base");c=l&&l.getAttribute("href")||"/",c=c.replace(/^\w+:\/\/[^\/]+/,"")}else c="/";return c[0]!=="/"&&c[0]!=="#"&&(c="/"+c),removeTrailingSlash(c)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(c,l){return c.replace(BEFORE_HASH_RE,"#")+l}function getElementPosition(c,l){const g=document.documentElement.getBoundingClientRect(),v=c.getBoundingClientRect();return{behavior:l.behavior,left:v.left-g.left-(l.left||0),top:v.top-g.top-(l.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(c){let l;if("el"in c){const g=c.el,v=typeof g=="string"&&g.startsWith("#"),b=typeof g=="string"?v?document.getElementById(g.slice(1)):document.querySelector(g):g;if(!b)return;l=getElementPosition(b,c)}else l=c;"scrollBehavior"in document.documentElement.style?window.scrollTo(l):window.scrollTo(l.left!=null?l.left:window.pageXOffset,l.top!=null?l.top:window.pageYOffset)}function getScrollKey(c,l){return(history.state?history.state.position-l:-1)+c}const scrollPositions=new Map;function saveScrollPosition(c,l){scrollPositions.set(c,l)}function getSavedScrollPosition(c){const l=scrollPositions.get(c);return scrollPositions.delete(c),l}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(c,l){const{pathname:g,search:v,hash:b}=l,_=c.indexOf("#");if(_>-1){let w=b.includes(c.slice(_))?c.slice(_).length:1,O=b.slice(w);return O[0]!=="/"&&(O="/"+O),stripBase(O,"")}return stripBase(g,c)+v+b}function useHistoryListeners(c,l,g,v){let b=[],_=[],E=null;const w=({state:q})=>{const ue=createCurrentLocation(c,location),se=g.value,Y=l.value;let pe=0;if(q){if(g.value=ue,l.value=q,E&&E===se){E=null;return}pe=Y?q.position-Y.position:0}else v(ue);b.forEach(ce=>{ce(g.value,se,{delta:pe,type:NavigationType.pop,direction:pe?pe>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function O(){E=g.value}function U(q){b.push(q);const ue=()=>{const se=b.indexOf(q);se>-1&&b.splice(se,1)};return _.push(ue),ue}function V(){const{history:q}=window;q.state&&q.replaceState(assign({},q.state,{scroll:computeScrollPosition()}),"")}function C(){for(const q of _)q();_=[],window.removeEventListener("popstate",w),window.removeEventListener("beforeunload",V)}return window.addEventListener("popstate",w),window.addEventListener("beforeunload",V,{passive:!0}),{pauseListeners:O,listen:U,destroy:C}}function buildState(c,l,g,v=!1,b=!1){return{back:c,current:l,forward:g,replaced:v,position:window.history.length,scroll:b?computeScrollPosition():null}}function useHistoryStateNavigation(c){const{history:l,location:g}=window,v={value:createCurrentLocation(c,g)},b={value:l.state};b.value||_(v.value,{back:null,current:v.value,forward:null,position:l.length-1,replaced:!0,scroll:null},!0);function _(O,U,V){const C=c.indexOf("#"),q=C>-1?(g.host&&document.querySelector("base")?c:c.slice(C))+O:createBaseLocation()+c+O;try{l[V?"replaceState":"pushState"](U,"",q),b.value=U}catch(ue){console.error(ue),g[V?"replace":"assign"](q)}}function E(O,U){const V=assign({},l.state,buildState(b.value.back,O,b.value.forward,!0),U,{position:b.value.position});_(O,V,!0),v.value=O}function w(O,U){const V=assign({},b.value,l.state,{forward:O,scroll:computeScrollPosition()});_(V.current,V,!0);const C=assign({},buildState(v.value,O,null),{position:V.position+1},U);_(O,C,!1),v.value=O}return{location:v,state:b,push:w,replace:E}}function createWebHistory(c){c=normalizeBase(c);const l=useHistoryStateNavigation(c),g=useHistoryListeners(c,l.state,l.location,l.replace);function v(_,E=!0){E||g.pauseListeners(),history.go(_)}const b=assign({location:"",base:c,go:v,createHref:createHref.bind(null,c)},l,g);return Object.defineProperty(b,"location",{enumerable:!0,get:()=>l.location.value}),Object.defineProperty(b,"state",{enumerable:!0,get:()=>l.state.value}),b}function isRouteLocation(c){return typeof c=="string"||c&&typeof c=="object"}function isRouteName(c){return typeof c=="string"||typeof c=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(c){c[c.aborted=4]="aborted",c[c.cancelled=8]="cancelled",c[c.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(c,l){return assign(new Error,{type:c,[NavigationFailureSymbol]:!0},l)}function isNavigationFailure(c,l){return c instanceof Error&&NavigationFailureSymbol in c&&(l==null||!!(c.type&l))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(c,l){const g=assign({},BASE_PATH_PARSER_OPTIONS,l),v=[];let b=g.start?"^":"";const _=[];for(const U of c){const V=U.length?[]:[90];g.strict&&!U.length&&(b+="/");for(let C=0;C<U.length;C++){const q=U[C];let ue=40+(g.sensitive?.25:0);if(q.type===0)C||(b+="/"),b+=q.value.replace(REGEX_CHARS_RE,"\\$&"),ue+=40;else if(q.type===1){const{value:se,repeatable:Y,optional:pe,regexp:ce}=q;_.push({name:se,repeatable:Y,optional:pe});const X=ce||BASE_PARAM_PATTERN;if(X!==BASE_PARAM_PATTERN){ue+=10;try{new RegExp(`(${X})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${se}" (${X}): `+z.message)}}let P=Y?`((?:${X})(?:/(?:${X}))*)`:`(${X})`;C||(P=pe&&U.length<2?`(?:/${P})`:"/"+P),pe&&(P+="?"),b+=P,ue+=20,pe&&(ue+=-8),Y&&(ue+=-20),X===".*"&&(ue+=-50)}V.push(ue)}v.push(V)}if(g.strict&&g.end){const U=v.length-1;v[U][v[U].length-1]+=.7000000000000001}g.strict||(b+="/?"),g.end?b+="$":g.strict&&(b+="(?:/|$)");const E=new RegExp(b,g.sensitive?"":"i");function w(U){const V=U.match(E),C={};if(!V)return null;for(let q=1;q<V.length;q++){const ue=V[q]||"",se=_[q-1];C[se.name]=ue&&se.repeatable?ue.split("/"):ue}return C}function O(U){let V="",C=!1;for(const q of c){(!C||!V.endsWith("/"))&&(V+="/"),C=!1;for(const ue of q)if(ue.type===0)V+=ue.value;else if(ue.type===1){const{value:se,repeatable:Y,optional:pe}=ue,ce=se in U?U[se]:"";if(isArray$1(ce)&&!Y)throw new Error(`Provided param "${se}" is an array but it is not repeatable (* or + modifiers)`);const X=isArray$1(ce)?ce.join("/"):ce;if(!X)if(pe)q.length<2&&(V.endsWith("/")?V=V.slice(0,-1):C=!0);else throw new Error(`Missing required param "${se}"`);V+=X}}return V||"/"}return{re:E,score:v,keys:_,parse:w,stringify:O}}function compareScoreArray(c,l){let g=0;for(;g<c.length&&g<l.length;){const v=l[g]-c[g];if(v)return v;g++}return c.length<l.length?c.length===1&&c[0]===80?-1:1:c.length>l.length?l.length===1&&l[0]===80?1:-1:0}function comparePathParserScore(c,l){let g=0;const v=c.score,b=l.score;for(;g<v.length&&g<b.length;){const _=compareScoreArray(v[g],b[g]);if(_)return _;g++}if(Math.abs(b.length-v.length)===1){if(isLastScoreNegative(v))return 1;if(isLastScoreNegative(b))return-1}return b.length-v.length}function isLastScoreNegative(c){const l=c[c.length-1];return c.length>0&&l[l.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(c){if(!c)return[[]];if(c==="/")return[[ROOT_TOKEN]];if(!c.startsWith("/"))throw new Error(`Invalid path "${c}"`);function l(ue){throw new Error(`ERR (${g})/"${U}": ${ue}`)}let g=0,v=g;const b=[];let _;function E(){_&&b.push(_),_=[]}let w=0,O,U="",V="";function C(){U&&(g===0?_.push({type:0,value:U}):g===1||g===2||g===3?(_.length>1&&(O==="*"||O==="+")&&l(`A repeatable param (${U}) must be alone in its segment. eg: '/:ids+.`),_.push({type:1,value:U,regexp:V,repeatable:O==="*"||O==="+",optional:O==="*"||O==="?"})):l("Invalid state to consume buffer"),U="")}function q(){U+=O}for(;w<c.length;){if(O=c[w++],O==="\\"&&g!==2){v=g,g=4;continue}switch(g){case 0:O==="/"?(U&&C(),E()):O===":"?(C(),g=1):q();break;case 4:q(),g=v;break;case 1:O==="("?g=2:VALID_PARAM_RE.test(O)?q():(C(),g=0,O!=="*"&&O!=="?"&&O!=="+"&&w--);break;case 2:O===")"?V[V.length-1]=="\\"?V=V.slice(0,-1)+O:g=3:V+=O;break;case 3:C(),g=0,O!=="*"&&O!=="?"&&O!=="+"&&w--,V="";break;default:l("Unknown state");break}}return g===2&&l(`Unfinished custom RegExp for param "${U}"`),C(),E(),b}function createRouteRecordMatcher(c,l,g){const v=tokensToParser(tokenizePath(c.path),g),b=assign(v,{record:c,parent:l,children:[],alias:[]});return l&&!b.record.aliasOf==!l.record.aliasOf&&l.children.push(b),b}function createRouterMatcher(c,l){const g=[],v=new Map;l=mergeOptions({strict:!1,end:!0,sensitive:!1},l);function b(V){return v.get(V)}function _(V,C,q){const ue=!q,se=normalizeRouteRecord(V);se.aliasOf=q&&q.record;const Y=mergeOptions(l,V),pe=[se];if("alias"in V){const P=typeof V.alias=="string"?[V.alias]:V.alias;for(const z of P)pe.push(assign({},se,{components:q?q.record.components:se.components,path:z,aliasOf:q?q.record:se}))}let ce,X;for(const P of pe){const{path:z}=P;if(C&&z[0]!=="/"){const oe=C.record.path,A=oe[oe.length-1]==="/"?"":"/";P.path=C.record.path+(z&&A+z)}if(ce=createRouteRecordMatcher(P,C,Y),q?q.alias.push(ce):(X=X||ce,X!==ce&&X.alias.push(ce),ue&&V.name&&!isAliasRecord(ce)&&E(V.name)),se.children){const oe=se.children;for(let A=0;A<oe.length;A++)_(oe[A],ce,q&&q.children[A])}q=q||ce,(ce.record.components&&Object.keys(ce.record.components).length||ce.record.name||ce.record.redirect)&&O(ce)}return X?()=>{E(X)}:noop$1}function E(V){if(isRouteName(V)){const C=v.get(V);C&&(v.delete(V),g.splice(g.indexOf(C),1),C.children.forEach(E),C.alias.forEach(E))}else{const C=g.indexOf(V);C>-1&&(g.splice(C,1),V.record.name&&v.delete(V.record.name),V.children.forEach(E),V.alias.forEach(E))}}function w(){return g}function O(V){let C=0;for(;C<g.length&&comparePathParserScore(V,g[C])>=0&&(V.record.path!==g[C].record.path||!isRecordChildOf(V,g[C]));)C++;g.splice(C,0,V),V.record.name&&!isAliasRecord(V)&&v.set(V.record.name,V)}function U(V,C){let q,ue={},se,Y;if("name"in V&&V.name){if(q=v.get(V.name),!q)throw createRouterError(1,{location:V});Y=q.record.name,ue=assign(paramsFromLocation(C.params,q.keys.filter(X=>!X.optional).map(X=>X.name)),V.params&&paramsFromLocation(V.params,q.keys.map(X=>X.name))),se=q.stringify(ue)}else if("path"in V)se=V.path,q=g.find(X=>X.re.test(se)),q&&(ue=q.parse(se),Y=q.record.name);else{if(q=C.name?v.get(C.name):g.find(X=>X.re.test(C.path)),!q)throw createRouterError(1,{location:V,currentLocation:C});Y=q.record.name,ue=assign({},C.params,V.params),se=q.stringify(ue)}const pe=[];let ce=q;for(;ce;)pe.unshift(ce.record),ce=ce.parent;return{name:Y,path:se,params:ue,matched:pe,meta:mergeMetaFields(pe)}}return c.forEach(V=>_(V)),{addRoute:_,resolve:U,removeRoute:E,getRoutes:w,getRecordMatcher:b}}function paramsFromLocation(c,l){const g={};for(const v of l)v in c&&(g[v]=c[v]);return g}function normalizeRouteRecord(c){return{path:c.path,redirect:c.redirect,name:c.name,meta:c.meta||{},aliasOf:void 0,beforeEnter:c.beforeEnter,props:normalizeRecordProps(c),children:c.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in c?c.components||null:c.component&&{default:c.component}}}function normalizeRecordProps(c){const l={},g=c.props||!1;if("component"in c)l.default=g;else for(const v in c.components)l[v]=typeof g=="object"?g[v]:g;return l}function isAliasRecord(c){for(;c;){if(c.record.aliasOf)return!0;c=c.parent}return!1}function mergeMetaFields(c){return c.reduce((l,g)=>assign(l,g.meta),{})}function mergeOptions(c,l){const g={};for(const v in c)g[v]=v in l?l[v]:c[v];return g}function isRecordChildOf(c,l){return l.children.some(g=>g===c||isRecordChildOf(c,g))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(c){return encodeURI(""+c).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(c){return commonEncode(c).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(c){return commonEncode(c).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(c){return encodeQueryValue(c).replace(EQUAL_RE,"%3D")}function encodePath(c){return commonEncode(c).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(c){return c==null?"":encodePath(c).replace(SLASH_RE,"%2F")}function decode(c){try{return decodeURIComponent(""+c)}catch{}return""+c}function parseQuery(c){const l={};if(c===""||c==="?")return l;const v=(c[0]==="?"?c.slice(1):c).split("&");for(let b=0;b<v.length;++b){const _=v[b].replace(PLUS_RE," "),E=_.indexOf("="),w=decode(E<0?_:_.slice(0,E)),O=E<0?null:decode(_.slice(E+1));if(w in l){let U=l[w];isArray$1(U)||(U=l[w]=[U]),U.push(O)}else l[w]=O}return l}function stringifyQuery(c){let l="";for(let g in c){const v=c[g];if(g=encodeQueryKey(g),v==null){v!==void 0&&(l+=(l.length?"&":"")+g);continue}(isArray$1(v)?v.map(_=>_&&encodeQueryValue(_)):[v&&encodeQueryValue(v)]).forEach(_=>{_!==void 0&&(l+=(l.length?"&":"")+g,_!=null&&(l+="="+_))})}return l}function normalizeQuery(c){const l={};for(const g in c){const v=c[g];v!==void 0&&(l[g]=isArray$1(v)?v.map(b=>b==null?null:""+b):v==null?v:""+v)}return l}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let c=[];function l(v){return c.push(v),()=>{const b=c.indexOf(v);b>-1&&c.splice(b,1)}}function g(){c=[]}return{add:l,list:()=>c.slice(),reset:g}}function guardToPromiseFn(c,l,g,v,b){const _=v&&(v.enterCallbacks[b]=v.enterCallbacks[b]||[]);return()=>new Promise((E,w)=>{const O=C=>{C===!1?w(createRouterError(4,{from:g,to:l})):C instanceof Error?w(C):isRouteLocation(C)?w(createRouterError(2,{from:l,to:C})):(_&&v.enterCallbacks[b]===_&&typeof C=="function"&&_.push(C),E())},U=c.call(v&&v.instances[b],l,g,O);let V=Promise.resolve(U);c.length<3&&(V=V.then(O)),V.catch(C=>w(C))})}function extractComponentsGuards(c,l,g,v){const b=[];for(const _ of c)for(const E in _.components){let w=_.components[E];if(!(l!=="beforeRouteEnter"&&!_.instances[E]))if(isRouteComponent(w)){const U=(w.__vccOpts||w)[l];U&&b.push(guardToPromiseFn(U,g,v,_,E))}else{let O=w();b.push(()=>O.then(U=>{if(!U)return Promise.reject(new Error(`Couldn't resolve component "${E}" at "${_.path}"`));const V=isESModule(U)?U.default:U;_.components[E]=V;const q=(V.__vccOpts||V)[l];return q&&guardToPromiseFn(q,g,v,_,E)()}))}}return b}function isRouteComponent(c){return typeof c=="object"||"displayName"in c||"props"in c||"__vccOpts"in c}function useLink(c){const l=inject(routerKey),g=inject(routeLocationKey),v=computed(()=>l.resolve(unref(c.to))),b=computed(()=>{const{matched:O}=v.value,{length:U}=O,V=O[U-1],C=g.matched;if(!V||!C.length)return-1;const q=C.findIndex(isSameRouteRecord.bind(null,V));if(q>-1)return q;const ue=getOriginalPath(O[U-2]);return U>1&&getOriginalPath(V)===ue&&C[C.length-1].path!==ue?C.findIndex(isSameRouteRecord.bind(null,O[U-2])):q}),_=computed(()=>b.value>-1&&includesParams(g.params,v.value.params)),E=computed(()=>b.value>-1&&b.value===g.matched.length-1&&isSameRouteLocationParams(g.params,v.value.params));function w(O={}){return guardEvent(O)?l[unref(c.replace)?"replace":"push"](unref(c.to)).catch(noop$1):Promise.resolve()}return{route:v,href:computed(()=>v.value.href),isActive:_,isExactActive:E,navigate:w}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(c,{slots:l}){const g=reactive(useLink(c)),{options:v}=inject(routerKey),b=computed(()=>({[getLinkClass(c.activeClass,v.linkActiveClass,"router-link-active")]:g.isActive,[getLinkClass(c.exactActiveClass,v.linkExactActiveClass,"router-link-exact-active")]:g.isExactActive}));return()=>{const _=l.default&&l.default(g);return c.custom?_:h("a",{"aria-current":g.isExactActive?c.ariaCurrentValue:null,href:g.href,onClick:g.navigate,class:b.value},_)}}}),RouterLink=RouterLinkImpl;function guardEvent(c){if(!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)&&!c.defaultPrevented&&!(c.button!==void 0&&c.button!==0)){if(c.currentTarget&&c.currentTarget.getAttribute){const l=c.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(l))return}return c.preventDefault&&c.preventDefault(),!0}}function includesParams(c,l){for(const g in l){const v=l[g],b=c[g];if(typeof v=="string"){if(v!==b)return!1}else if(!isArray$1(b)||b.length!==v.length||v.some((_,E)=>_!==b[E]))return!1}return!0}function getOriginalPath(c){return c?c.aliasOf?c.aliasOf.path:c.path:""}const getLinkClass=(c,l,g)=>c??l??g,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(c,{attrs:l,slots:g}){const v=inject(routerViewLocationKey),b=computed(()=>c.route||v.value),_=inject(viewDepthKey,0),E=computed(()=>{let U=unref(_);const{matched:V}=b.value;let C;for(;(C=V[U])&&!C.components;)U++;return U}),w=computed(()=>b.value.matched[E.value]);provide(viewDepthKey,computed(()=>E.value+1)),provide(matchedRouteKey,w),provide(routerViewLocationKey,b);const O=ref();return watch(()=>[O.value,w.value,c.name],([U,V,C],[q,ue,se])=>{V&&(V.instances[C]=U,ue&&ue!==V&&U&&U===q&&(V.leaveGuards.size||(V.leaveGuards=ue.leaveGuards),V.updateGuards.size||(V.updateGuards=ue.updateGuards))),U&&V&&(!ue||!isSameRouteRecord(V,ue)||!q)&&(V.enterCallbacks[C]||[]).forEach(Y=>Y(U))},{flush:"post"}),()=>{const U=b.value,V=c.name,C=w.value,q=C&&C.components[V];if(!q)return normalizeSlot(g.default,{Component:q,route:U});const ue=C.props[V],se=ue?ue===!0?U.params:typeof ue=="function"?ue(U):ue:null,pe=h(q,assign({},se,l,{onVnodeUnmounted:ce=>{ce.component.isUnmounted&&(C.instances[V]=null)},ref:O}));return normalizeSlot(g.default,{Component:pe,route:U})||pe}}});function normalizeSlot(c,l){if(!c)return null;const g=c(l);return g.length===1?g[0]:g}const RouterView=RouterViewImpl;function createRouter(c){const l=createRouterMatcher(c.routes,c),g=c.parseQuery||parseQuery,v=c.stringifyQuery||stringifyQuery,b=c.history,_=useCallbacks(),E=useCallbacks(),w=useCallbacks(),O=shallowRef(START_LOCATION_NORMALIZED);let U=START_LOCATION_NORMALIZED;isBrowser&&c.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const V=applyToParams.bind(null,Me=>""+Me),C=applyToParams.bind(null,encodeParam),q=applyToParams.bind(null,decode);function ue(Me,We){let rt,dt;return isRouteName(Me)?(rt=l.getRecordMatcher(Me),dt=We):dt=Me,l.addRoute(dt,rt)}function se(Me){const We=l.getRecordMatcher(Me);We&&l.removeRoute(We)}function Y(){return l.getRoutes().map(Me=>Me.record)}function pe(Me){return!!l.getRecordMatcher(Me)}function ce(Me,We){if(We=assign({},We||O.value),typeof Me=="string"){const De=parseURL(g,Me,We.path),xe=l.resolve({path:De.path},We),Je=b.createHref(De.fullPath);return assign(De,xe,{params:q(xe.params),hash:decode(De.hash),redirectedFrom:void 0,href:Je})}let rt;if("path"in Me)rt=assign({},Me,{path:parseURL(g,Me.path,We.path).path});else{const De=assign({},Me.params);for(const xe in De)De[xe]==null&&delete De[xe];rt=assign({},Me,{params:C(De)}),We.params=C(We.params)}const dt=l.resolve(rt,We),ht=Me.hash||"";dt.params=V(q(dt.params));const Pt=stringifyURL(v,assign({},Me,{hash:encodeHash(ht),path:dt.path})),ye=b.createHref(Pt);return assign({fullPath:Pt,hash:ht,query:v===stringifyQuery?normalizeQuery(Me.query):Me.query||{}},dt,{redirectedFrom:void 0,href:ye})}function X(Me){return typeof Me=="string"?parseURL(g,Me,O.value.path):assign({},Me)}function P(Me,We){if(U!==Me)return createRouterError(8,{from:We,to:Me})}function z(Me){return le(Me)}function oe(Me){return z(assign(X(Me),{replace:!0}))}function A(Me){const We=Me.matched[Me.matched.length-1];if(We&&We.redirect){const{redirect:rt}=We;let dt=typeof rt=="function"?rt(Me):rt;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=X(dt):{path:dt},dt.params={}),assign({query:Me.query,hash:Me.hash,params:"path"in dt?{}:Me.params},dt)}}function le(Me,We){const rt=U=ce(Me),dt=O.value,ht=Me.state,Pt=Me.force,ye=Me.replace===!0,De=A(rt);if(De)return le(assign(X(De),{state:typeof De=="object"?assign({},ht,De.state):ht,force:Pt,replace:ye}),We||rt);const xe=rt;xe.redirectedFrom=We;let Je;return!Pt&&isSameRouteLocation(v,dt,rt)&&(Je=createRouterError(16,{to:xe,from:dt}),ne(dt,dt,!0,!1)),(Je?Promise.resolve(Je):j(xe,dt)).catch(ut=>isNavigationFailure(ut)?isNavigationFailure(ut,2)?ut:de(ut):W(ut,xe,dt)).then(ut=>{if(ut){if(isNavigationFailure(ut,2))return le(assign({replace:ye},X(ut.to),{state:typeof ut.to=="object"?assign({},ht,ut.to.state):ht,force:Pt}),We||xe)}else ut=Z(xe,dt,!0,ye,ht);return K(xe,dt,ut),ut})}function $(Me,We){const rt=P(Me,We);return rt?Promise.reject(rt):Promise.resolve()}function k(Me){const We=Ue.values().next().value;return We&&typeof We.runWithContext=="function"?We.runWithContext(Me):Me()}function j(Me,We){let rt;const[dt,ht,Pt]=extractChangingRecords(Me,We);rt=extractComponentsGuards(dt.reverse(),"beforeRouteLeave",Me,We);for(const De of dt)De.leaveGuards.forEach(xe=>{rt.push(guardToPromiseFn(xe,Me,We))});const ye=$.bind(null,Me,We);return rt.push(ye),ze(rt).then(()=>{rt=[];for(const De of _.list())rt.push(guardToPromiseFn(De,Me,We));return rt.push(ye),ze(rt)}).then(()=>{rt=extractComponentsGuards(ht,"beforeRouteUpdate",Me,We);for(const De of ht)De.updateGuards.forEach(xe=>{rt.push(guardToPromiseFn(xe,Me,We))});return rt.push(ye),ze(rt)}).then(()=>{rt=[];for(const De of Pt)if(De.beforeEnter)if(isArray$1(De.beforeEnter))for(const xe of De.beforeEnter)rt.push(guardToPromiseFn(xe,Me,We));else rt.push(guardToPromiseFn(De.beforeEnter,Me,We));return rt.push(ye),ze(rt)}).then(()=>(Me.matched.forEach(De=>De.enterCallbacks={}),rt=extractComponentsGuards(Pt,"beforeRouteEnter",Me,We),rt.push(ye),ze(rt))).then(()=>{rt=[];for(const De of E.list())rt.push(guardToPromiseFn(De,Me,We));return rt.push(ye),ze(rt)}).catch(De=>isNavigationFailure(De,8)?De:Promise.reject(De))}function K(Me,We,rt){w.list().forEach(dt=>k(()=>dt(Me,We,rt)))}function Z(Me,We,rt,dt,ht){const Pt=P(Me,We);if(Pt)return Pt;const ye=We===START_LOCATION_NORMALIZED,De=isBrowser?history.state:{};rt&&(dt||ye?b.replace(Me.fullPath,assign({scroll:ye&&De&&De.scroll},ht)):b.push(Me.fullPath,ht)),O.value=Me,ne(Me,We,rt,ye),de()}let J;function D(){J||(J=b.listen((Me,We,rt)=>{if(!Fe.listening)return;const dt=ce(Me),ht=A(dt);if(ht){le(assign(ht,{replace:!0}),dt).catch(noop$1);return}U=dt;const Pt=O.value;isBrowser&&saveScrollPosition(getScrollKey(Pt.fullPath,rt.delta),computeScrollPosition()),j(dt,Pt).catch(ye=>isNavigationFailure(ye,12)?ye:isNavigationFailure(ye,2)?(le(ye.to,dt).then(De=>{isNavigationFailure(De,20)&&!rt.delta&&rt.type===NavigationType.pop&&b.go(-1,!1)}).catch(noop$1),Promise.reject()):(rt.delta&&b.go(-rt.delta,!1),W(ye,dt,Pt))).then(ye=>{ye=ye||Z(dt,Pt,!1),ye&&(rt.delta&&!isNavigationFailure(ye,8)?b.go(-rt.delta,!1):rt.type===NavigationType.pop&&isNavigationFailure(ye,20)&&b.go(-1,!1)),K(dt,Pt,ye)}).catch(noop$1)}))}let G=useCallbacks(),M=useCallbacks(),L;function W(Me,We,rt){de(Me);const dt=M.list();return dt.length?dt.forEach(ht=>ht(Me,We,rt)):console.error(Me),Promise.reject(Me)}function ve(){return L&&O.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Me,We)=>{G.add([Me,We])})}function de(Me){return L||(L=!Me,D(),G.list().forEach(([We,rt])=>Me?rt(Me):We()),G.reset()),Me}function ne(Me,We,rt,dt){const{scrollBehavior:ht}=c;if(!isBrowser||!ht)return Promise.resolve();const Pt=!rt&&getSavedScrollPosition(getScrollKey(Me.fullPath,0))||(dt||!rt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ht(Me,We,Pt)).then(ye=>ye&&scrollToPosition(ye)).catch(ye=>W(ye,Me,We))}const he=Me=>b.go(Me);let _e;const Ue=new Set,Fe={currentRoute:O,listening:!0,addRoute:ue,removeRoute:se,hasRoute:pe,getRoutes:Y,resolve:ce,options:c,push:z,replace:oe,go:he,back:()=>he(-1),forward:()=>he(1),beforeEach:_.add,beforeResolve:E.add,afterEach:w.add,onError:M.add,isReady:ve,install(Me){const We=this;Me.component("RouterLink",RouterLink),Me.component("RouterView",RouterView),Me.config.globalProperties.$router=We,Object.defineProperty(Me.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(O)}),isBrowser&&!_e&&O.value===START_LOCATION_NORMALIZED&&(_e=!0,z(b.location).catch(ht=>{}));const rt={};for(const ht in START_LOCATION_NORMALIZED)Object.defineProperty(rt,ht,{get:()=>O.value[ht],enumerable:!0});Me.provide(routerKey,We),Me.provide(routeLocationKey,shallowReactive(rt)),Me.provide(routerViewLocationKey,O);const dt=Me.unmount;Ue.add(Me),Me.unmount=function(){Ue.delete(Me),Ue.size<1&&(U=START_LOCATION_NORMALIZED,J&&J(),J=null,O.value=START_LOCATION_NORMALIZED,_e=!1,L=!1),dt()}}};function ze(Me){return Me.reduce((We,rt)=>We.then(()=>k(rt)),Promise.resolve())}return Fe}function extractChangingRecords(c,l){const g=[],v=[],b=[],_=Math.max(l.matched.length,c.matched.length);for(let E=0;E<_;E++){const w=l.matched[E];w&&(c.matched.find(U=>isSameRouteRecord(U,w))?v.push(w):g.push(w));const O=c.matched[E];O&&(l.matched.find(U=>isSameRouteRecord(U,O))||b.push(O))}return[g,v,b]}const _export_sfc=(c,l)=>{const g=c.__vccOpts||c;for(const[v,b]of l)g[v]=b;return g},_withScopeId$1=c=>(pushScopeId("data-v-eb85e247"),c=c(),popScopeId(),c),_hoisted_1$2={class:"greetings"},_hoisted_2$2={class:"green"},_hoisted_3$1=_withScopeId$1(()=>createBaseVNode("h3",null," You’ve successfully created a project with ",-1)),_sfc_main$2={__name:"HelloWorld",props:{msg:{type:String,required:!0}},setup(c){return(l,g)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("h1",_hoisted_2$2,toDisplayString(c.msg),1),_hoisted_3$1]))}},HelloWorld=_export_sfc(_sfc_main$2,[["__scopeId","data-v-eb85e247"]]),_withScopeId=c=>(pushScopeId("data-v-27dc959b"),c=c(),popScopeId(),c),_hoisted_1$1=_withScopeId(()=>createBaseVNode("img",{alt:"Vue logo",class:"logo",src:_imports_0,width:"125",height:"125"},null,-1)),_hoisted_2$1={class:"wrapper"},_sfc_main$1={__name:"App",setup(c){return(l,g)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("header",null,[_hoisted_1$1,createBaseVNode("div",_hoisted_2$1,[createVNode(HelloWorld,{msg:"You did it!"}),createBaseVNode("nav",null,[createVNode(unref(RouterLink),{to:"/"},{default:withCtx(()=>[createTextVNode("Home")]),_:1}),createVNode(unref(RouterLink),{to:"/host"},{default:withCtx(()=>[createTextVNode("Host")]),_:1})])])]),createVNode(unref(RouterView))],64))}},App=_export_sfc(_sfc_main$1,[["__scopeId","data-v-27dc959b"]]),scriptRel="modulepreload",assetsURL=function(c){return"/zegocloud-vue/"+c},seen={},__vitePreload=function(l,g,v){let b=Promise.resolve();if(g&&g.length>0){const _=document.getElementsByTagName("link");b=Promise.all(g.map(E=>{if(E=assetsURL(E),E in seen)return;seen[E]=!0;const w=E.endsWith(".css"),O=w?'[rel="stylesheet"]':"";if(!!v)for(let C=_.length-1;C>=0;C--){const q=_[C];if(q.href===E&&(!w||q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${O}`))return;const V=document.createElement("link");if(V.rel=w?"stylesheet":scriptRel,w||(V.as="script",V.crossOrigin=""),V.href=E,document.head.appendChild(V),w)return new Promise((C,q)=>{V.addEventListener("load",C),V.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${E}`)))})}))}return b.then(()=>l()).catch(_=>{const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=_,window.dispatchEvent(E),!E.defaultPrevented)throw _})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZegoExpressWebRTC={exports:{}},ZegoExpressWebRTM={exports:{}},umd={exports:{}},hasRequiredUmd;function requireUmd(){return hasRequiredUmd||(hasRequiredUmd=1,function(c,l){var g=function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var b=null;try{b=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function _(M,L,W){this.low=M|0,this.high=L|0,this.unsigned=!!W}_.prototype.__isLong__,Object.defineProperty(_.prototype,"__isLong__",{value:!0});function E(M){return(M&&M.__isLong__)===!0}function w(M){var L=Math.clz32(M&-M);return M?31-L:L}_.isLong=E;var O={},U={};function V(M,L){var W,ve,de;return L?(M>>>=0,(de=0<=M&&M<256)&&(ve=U[M],ve)?ve:(W=q(M,0,!0),de&&(U[M]=W),W)):(M|=0,(de=-128<=M&&M<128)&&(ve=O[M],ve)?ve:(W=q(M,M<0?-1:0,!1),de&&(O[M]=W),W))}_.fromInt=V;function C(M,L){if(isNaN(M))return L?le:A;if(L){if(M<0)return le;if(M>=P)return Z}else{if(M<=-z)return J;if(M+1>=z)return K}return M<0?C(-M,L).neg():q(M%X|0,M/X|0,L)}_.fromNumber=C;function q(M,L,W){return new _(M,L,W)}_.fromBits=q;var ue=Math.pow;function se(M,L,W){if(M.length===0)throw Error("empty string");if(typeof L=="number"?(W=L,L=!1):L=!!L,M==="NaN"||M==="Infinity"||M==="+Infinity"||M==="-Infinity")return L?le:A;if(W=W||10,W<2||36<W)throw RangeError("radix");var ve;if((ve=M.indexOf("-"))>0)throw Error("interior hyphen");if(ve===0)return se(M.substring(1),L,W).neg();for(var de=C(ue(W,8)),ne=A,he=0;he<M.length;he+=8){var _e=Math.min(8,M.length-he),Ue=parseInt(M.substring(he,he+_e),W);if(_e<8){var Fe=C(ue(W,_e));ne=ne.mul(Fe).add(C(Ue))}else ne=ne.mul(de),ne=ne.add(C(Ue))}return ne.unsigned=L,ne}_.fromString=se;function Y(M,L){return typeof M=="number"?C(M,L):typeof M=="string"?se(M,L):q(M.low,M.high,typeof L=="boolean"?L:M.unsigned)}_.fromValue=Y;var pe=65536,ce=1<<24,X=pe*pe,P=X*X,z=P/2,oe=V(ce),A=V(0);_.ZERO=A;var le=V(0,!0);_.UZERO=le;var $=V(1);_.ONE=$;var k=V(1,!0);_.UONE=k;var j=V(-1);_.NEG_ONE=j;var K=q(-1,2147483647,!1);_.MAX_VALUE=K;var Z=q(-1,-1,!0);_.MAX_UNSIGNED_VALUE=Z;var J=q(0,-2147483648,!1);_.MIN_VALUE=J;var D=_.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*X+(this.low>>>0):this.high*X+(this.low>>>0)},D.toString=function(L){if(L=L||10,L<2||36<L)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(J)){var W=C(L),ve=this.div(W),de=ve.mul(W).sub(this);return ve.toString(L)+de.toInt().toString(L)}else return"-"+this.neg().toString(L);for(var ne=C(ue(L,6),this.unsigned),he=this,_e="";;){var Ue=he.div(ne),Fe=he.sub(Ue.mul(ne)).toInt()>>>0,ze=Fe.toString(L);if(he=Ue,he.isZero())return ze+_e;for(;ze.length<6;)ze="0"+ze;_e=""+ze+_e}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(J)?64:this.neg().getNumBitsAbs();for(var L=this.high!=0?this.high:this.low,W=31;W>0&&!(L&1<<W);W--);return this.high!=0?W+33:W+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return(this.low&1)===1},D.isEven=function(){return(this.low&1)===0},D.equals=function(L){return E(L)||(L=Y(L)),this.unsigned!==L.unsigned&&this.high>>>31===1&&L.high>>>31===1?!1:this.high===L.high&&this.low===L.low},D.eq=D.equals,D.notEquals=function(L){return!this.eq(L)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(L){return this.comp(L)<0},D.lt=D.lessThan,D.lessThanOrEqual=function(L){return this.comp(L)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(L){return this.comp(L)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function(L){return this.comp(L)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(L){if(E(L)||(L=Y(L)),this.eq(L))return 0;var W=this.isNegative(),ve=L.isNegative();return W&&!ve?-1:!W&&ve?1:this.unsigned?L.high>>>0>this.high>>>0||L.high===this.high&&L.low>>>0>this.low>>>0?-1:1:this.sub(L).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(J)?J:this.not().add($)},D.neg=D.negate,D.add=function(L){E(L)||(L=Y(L));var W=this.high>>>16,ve=this.high&65535,de=this.low>>>16,ne=this.low&65535,he=L.high>>>16,_e=L.high&65535,Ue=L.low>>>16,Fe=L.low&65535,ze=0,Me=0,We=0,rt=0;return rt+=ne+Fe,We+=rt>>>16,rt&=65535,We+=de+Ue,Me+=We>>>16,We&=65535,Me+=ve+_e,ze+=Me>>>16,Me&=65535,ze+=W+he,ze&=65535,q(We<<16|rt,ze<<16|Me,this.unsigned)},D.subtract=function(L){return E(L)||(L=Y(L)),this.add(L.neg())},D.sub=D.subtract,D.multiply=function(L){if(this.isZero())return this;if(E(L)||(L=Y(L)),b){var W=b.mul(this.low,this.high,L.low,L.high);return q(W,b.get_high(),this.unsigned)}if(L.isZero())return this.unsigned?le:A;if(this.eq(J))return L.isOdd()?J:A;if(L.eq(J))return this.isOdd()?J:A;if(this.isNegative())return L.isNegative()?this.neg().mul(L.neg()):this.neg().mul(L).neg();if(L.isNegative())return this.mul(L.neg()).neg();if(this.lt(oe)&&L.lt(oe))return C(this.toNumber()*L.toNumber(),this.unsigned);var ve=this.high>>>16,de=this.high&65535,ne=this.low>>>16,he=this.low&65535,_e=L.high>>>16,Ue=L.high&65535,Fe=L.low>>>16,ze=L.low&65535,Me=0,We=0,rt=0,dt=0;return dt+=he*ze,rt+=dt>>>16,dt&=65535,rt+=ne*ze,We+=rt>>>16,rt&=65535,rt+=he*Fe,We+=rt>>>16,rt&=65535,We+=de*ze,Me+=We>>>16,We&=65535,We+=ne*Fe,Me+=We>>>16,We&=65535,We+=he*Ue,Me+=We>>>16,We&=65535,Me+=ve*ze+de*Fe+ne*Ue+he*_e,Me&=65535,q(rt<<16|dt,Me<<16|We,this.unsigned)},D.mul=D.multiply,D.divide=function(L){if(E(L)||(L=Y(L)),L.isZero())throw Error("division by zero");if(b){if(!this.unsigned&&this.high===-2147483648&&L.low===-1&&L.high===-1)return this;var W=(this.unsigned?b.div_u:b.div_s)(this.low,this.high,L.low,L.high);return q(W,b.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?le:A;var ve,de,ne;if(this.unsigned){if(L.unsigned||(L=L.toUnsigned()),L.gt(this))return le;if(L.gt(this.shru(1)))return k;ne=le}else{if(this.eq(J)){if(L.eq($)||L.eq(j))return J;if(L.eq(J))return $;var he=this.shr(1);return ve=he.div(L).shl(1),ve.eq(A)?L.isNegative()?$:j:(de=this.sub(L.mul(ve)),ne=ve.add(de.div(L)),ne)}else if(L.eq(J))return this.unsigned?le:A;if(this.isNegative())return L.isNegative()?this.neg().div(L.neg()):this.neg().div(L).neg();if(L.isNegative())return this.div(L.neg()).neg();ne=A}for(de=this;de.gte(L);){ve=Math.max(1,Math.floor(de.toNumber()/L.toNumber()));for(var _e=Math.ceil(Math.log(ve)/Math.LN2),Ue=_e<=48?1:ue(2,_e-48),Fe=C(ve),ze=Fe.mul(L);ze.isNegative()||ze.gt(de);)ve-=Ue,Fe=C(ve,this.unsigned),ze=Fe.mul(L);Fe.isZero()&&(Fe=$),ne=ne.add(Fe),de=de.sub(ze)}return ne},D.div=D.divide,D.modulo=function(L){if(E(L)||(L=Y(L)),b){var W=(this.unsigned?b.rem_u:b.rem_s)(this.low,this.high,L.low,L.high);return q(W,b.get_high(),this.unsigned)}return this.sub(this.div(L).mul(L))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return q(~this.low,~this.high,this.unsigned)},D.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},D.clz=D.countLeadingZeros,D.countTrailingZeros=function(){return this.low?w(this.low):w(this.high)+32},D.ctz=D.countTrailingZeros,D.and=function(L){return E(L)||(L=Y(L)),q(this.low&L.low,this.high&L.high,this.unsigned)},D.or=function(L){return E(L)||(L=Y(L)),q(this.low|L.low,this.high|L.high,this.unsigned)},D.xor=function(L){return E(L)||(L=Y(L)),q(this.low^L.low,this.high^L.high,this.unsigned)},D.shiftLeft=function(L){return E(L)&&(L=L.toInt()),(L&=63)===0?this:L<32?q(this.low<<L,this.high<<L|this.low>>>32-L,this.unsigned):q(0,this.low<<L-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(L){return E(L)&&(L=L.toInt()),(L&=63)===0?this:L<32?q(this.low>>>L|this.high<<32-L,this.high>>L,this.unsigned):q(this.high>>L-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(L){return E(L)&&(L=L.toInt()),(L&=63)===0?this:L<32?q(this.low>>>L|this.high<<32-L,this.high>>>L,this.unsigned):L===32?q(this.high,0,this.unsigned):q(this.high>>>L-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.rotateLeft=function(L){var W;return E(L)&&(L=L.toInt()),(L&=63)===0?this:L===32?q(this.high,this.low,this.unsigned):L<32?(W=32-L,q(this.low<<L|this.high>>>W,this.high<<L|this.low>>>W,this.unsigned)):(L-=32,W=32-L,q(this.high<<L|this.low>>>W,this.low<<L|this.high>>>W,this.unsigned))},D.rotl=D.rotateLeft,D.rotateRight=function(L){var W;return E(L)&&(L=L.toInt()),(L&=63)===0?this:L===32?q(this.high,this.low,this.unsigned):L<32?(W=32-L,q(this.high<<W|this.low>>>L,this.low<<W|this.high>>>L,this.unsigned)):(L-=32,W=32-L,q(this.low<<W|this.high>>>L,this.high<<W|this.low>>>L,this.unsigned))},D.rotr=D.rotateRight,D.toSigned=function(){return this.unsigned?q(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:q(this.low,this.high,!0)},D.toBytes=function(L){return L?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var L=this.high,W=this.low;return[W&255,W>>>8&255,W>>>16&255,W>>>24,L&255,L>>>8&255,L>>>16&255,L>>>24]},D.toBytesBE=function(){var L=this.high,W=this.low;return[L>>>24,L>>>16&255,L>>>8&255,L&255,W>>>24,W>>>16&255,W>>>8&255,W&255]},_.fromBytes=function(L,W,ve){return ve?_.fromBytesLE(L,W):_.fromBytesBE(L,W)},_.fromBytesLE=function(L,W){return new _(L[0]|L[1]<<8|L[2]<<16|L[3]<<24,L[4]|L[5]<<8|L[6]<<16|L[7]<<24,W)},_.fromBytesBE=function(L,W){return new _(L[4]<<24|L[5]<<16|L[6]<<8|L[7],L[0]<<24|L[1]<<16|L[2]<<8|L[3],W)};var G=_;return v.default=G,"default"in v?v.default:v}({});c.exports=g}(umd)),umd.exports}var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=c;function c(l,g){for(var v=new Array(arguments.length-1),b=0,_=2,E=!0;_<arguments.length;)v[b++]=arguments[_++];return new Promise(function(O,U){v[b]=function(C){if(E)if(E=!1,C)U(C);else{for(var q=new Array(arguments.length-1),ue=0;ue<q.length;)q[ue++]=arguments[ue];O.apply(null,q)}};try{l.apply(g||null,v)}catch(V){E&&(E=!1,U(V))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(c){var l=c;l.length=function(w){var O=w.length;if(!O)return 0;for(var U=0;--O%4>1&&w.charAt(O)==="=";)++U;return Math.ceil(w.length*3)/4-U};for(var g=new Array(64),v=new Array(123),b=0;b<64;)v[g[b]=b<26?b+65:b<52?b+71:b<62?b-4:b-59|43]=b++;l.encode=function(w,O,U){for(var V=null,C=[],q=0,ue=0,se;O<U;){var Y=w[O++];switch(ue){case 0:C[q++]=g[Y>>2],se=(Y&3)<<4,ue=1;break;case 1:C[q++]=g[se|Y>>4],se=(Y&15)<<2,ue=2;break;case 2:C[q++]=g[se|Y>>6],C[q++]=g[Y&63],ue=0;break}q>8191&&((V||(V=[])).push(String.fromCharCode.apply(String,C)),q=0)}return ue&&(C[q++]=g[se],C[q++]=61,ue===1&&(C[q++]=61)),V?(q&&V.push(String.fromCharCode.apply(String,C.slice(0,q))),V.join("")):String.fromCharCode.apply(String,C.slice(0,q))};var _="invalid encoding";l.decode=function(w,O,U){for(var V=U,C=0,q,ue=0;ue<w.length;){var se=w.charCodeAt(ue++);if(se===61&&C>1)break;if((se=v[se])===void 0)throw Error(_);switch(C){case 0:q=se,C=1;break;case 1:O[U++]=q<<2|(se&48)>>4,q=se,C=2;break;case 2:O[U++]=(q&15)<<4|(se&60)>>2,q=se,C=3;break;case 3:O[U++]=(q&3)<<6|se,C=0;break}}if(C===1)throw Error(_);return U-V},l.test=function(w){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(w)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=c;function c(){this._listeners={}}return c.prototype.on=function(g,v,b){return(this._listeners[g]||(this._listeners[g]=[])).push({fn:v,ctx:b||this}),this},c.prototype.off=function(g,v){if(g===void 0)this._listeners={};else if(v===void 0)this._listeners[g]=[];else for(var b=this._listeners[g],_=0;_<b.length;)b[_].fn===v?b.splice(_,1):++_;return this},c.prototype.emit=function(g){var v=this._listeners[g];if(v){for(var b=[],_=1;_<arguments.length;)b.push(arguments[_++]);for(_=0;_<v.length;)v[_].fn.apply(v[_++].ctx,b)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=c(c);function c(_){return typeof Float32Array<"u"?function(){var E=new Float32Array([-0]),w=new Uint8Array(E.buffer),O=w[3]===128;function U(ue,se,Y){E[0]=ue,se[Y]=w[0],se[Y+1]=w[1],se[Y+2]=w[2],se[Y+3]=w[3]}function V(ue,se,Y){E[0]=ue,se[Y]=w[3],se[Y+1]=w[2],se[Y+2]=w[1],se[Y+3]=w[0]}_.writeFloatLE=O?U:V,_.writeFloatBE=O?V:U;function C(ue,se){return w[0]=ue[se],w[1]=ue[se+1],w[2]=ue[se+2],w[3]=ue[se+3],E[0]}function q(ue,se){return w[3]=ue[se],w[2]=ue[se+1],w[1]=ue[se+2],w[0]=ue[se+3],E[0]}_.readFloatLE=O?C:q,_.readFloatBE=O?q:C}():function(){function E(O,U,V,C){var q=U<0?1:0;if(q&&(U=-U),U===0)O(1/U>0?0:2147483648,V,C);else if(isNaN(U))O(2143289344,V,C);else if(U>34028234663852886e22)O((q<<31|2139095040)>>>0,V,C);else if(U<11754943508222875e-54)O((q<<31|Math.round(U/1401298464324817e-60))>>>0,V,C);else{var ue=Math.floor(Math.log(U)/Math.LN2),se=Math.round(U*Math.pow(2,-ue)*8388608)&8388607;O((q<<31|ue+127<<23|se)>>>0,V,C)}}_.writeFloatLE=E.bind(null,l),_.writeFloatBE=E.bind(null,g);function w(O,U,V){var C=O(U,V),q=(C>>31)*2+1,ue=C>>>23&255,se=C&8388607;return ue===255?se?NaN:q*(1/0):ue===0?q*1401298464324817e-60*se:q*Math.pow(2,ue-150)*(se+8388608)}_.readFloatLE=w.bind(null,v),_.readFloatBE=w.bind(null,b)}(),typeof Float64Array<"u"?function(){var E=new Float64Array([-0]),w=new Uint8Array(E.buffer),O=w[7]===128;function U(ue,se,Y){E[0]=ue,se[Y]=w[0],se[Y+1]=w[1],se[Y+2]=w[2],se[Y+3]=w[3],se[Y+4]=w[4],se[Y+5]=w[5],se[Y+6]=w[6],se[Y+7]=w[7]}function V(ue,se,Y){E[0]=ue,se[Y]=w[7],se[Y+1]=w[6],se[Y+2]=w[5],se[Y+3]=w[4],se[Y+4]=w[3],se[Y+5]=w[2],se[Y+6]=w[1],se[Y+7]=w[0]}_.writeDoubleLE=O?U:V,_.writeDoubleBE=O?V:U;function C(ue,se){return w[0]=ue[se],w[1]=ue[se+1],w[2]=ue[se+2],w[3]=ue[se+3],w[4]=ue[se+4],w[5]=ue[se+5],w[6]=ue[se+6],w[7]=ue[se+7],E[0]}function q(ue,se){return w[7]=ue[se],w[6]=ue[se+1],w[5]=ue[se+2],w[4]=ue[se+3],w[3]=ue[se+4],w[2]=ue[se+5],w[1]=ue[se+6],w[0]=ue[se+7],E[0]}_.readDoubleLE=O?C:q,_.readDoubleBE=O?q:C}():function(){function E(O,U,V,C,q,ue){var se=C<0?1:0;if(se&&(C=-C),C===0)O(0,q,ue+U),O(1/C>0?0:2147483648,q,ue+V);else if(isNaN(C))O(0,q,ue+U),O(2146959360,q,ue+V);else if(C>17976931348623157e292)O(0,q,ue+U),O((se<<31|2146435072)>>>0,q,ue+V);else{var Y;if(C<22250738585072014e-324)Y=C/5e-324,O(Y>>>0,q,ue+U),O((se<<31|Y/4294967296)>>>0,q,ue+V);else{var pe=Math.floor(Math.log(C)/Math.LN2);pe===1024&&(pe=1023),Y=C*Math.pow(2,-pe),O(Y*4503599627370496>>>0,q,ue+U),O((se<<31|pe+1023<<20|Y*1048576&1048575)>>>0,q,ue+V)}}}_.writeDoubleLE=E.bind(null,l,0,4),_.writeDoubleBE=E.bind(null,g,4,0);function w(O,U,V,C,q){var ue=O(C,q+U),se=O(C,q+V),Y=(se>>31)*2+1,pe=se>>>20&2047,ce=4294967296*(se&1048575)+ue;return pe===2047?ce?NaN:Y*(1/0):pe===0?Y*5e-324*ce:Y*Math.pow(2,pe-1075)*(ce+4503599627370496)}_.readDoubleLE=w.bind(null,v,0,4),_.readDoubleBE=w.bind(null,b,4,0)}(),_}function l(_,E,w){E[w]=_&255,E[w+1]=_>>>8&255,E[w+2]=_>>>16&255,E[w+3]=_>>>24}function g(_,E,w){E[w]=_>>>24,E[w+1]=_>>>16&255,E[w+2]=_>>>8&255,E[w+3]=_&255}function v(_,E){return(_[E]|_[E+1]<<8|_[E+2]<<16|_[E+3]<<24)>>>0}function b(_,E){return(_[E]<<24|_[E+1]<<16|_[E+2]<<8|_[E+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(c){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(c){var l=c;l.length=function(v){for(var b=0,_=0,E=0;E<v.length;++E)_=v.charCodeAt(E),_<128?b+=1:_<2048?b+=2:(_&64512)===55296&&(v.charCodeAt(E+1)&64512)===56320?(++E,b+=4):b+=3;return b},l.read=function(v,b,_){var E=_-b;if(E<1)return"";for(var w=null,O=[],U=0,V;b<_;)V=v[b++],V<128?O[U++]=V:V>191&&V<224?O[U++]=(V&31)<<6|v[b++]&63:V>239&&V<365?(V=((V&7)<<18|(v[b++]&63)<<12|(v[b++]&63)<<6|v[b++]&63)-65536,O[U++]=55296+(V>>10),O[U++]=56320+(V&1023)):O[U++]=(V&15)<<12|(v[b++]&63)<<6|v[b++]&63,U>8191&&((w||(w=[])).push(String.fromCharCode.apply(String,O)),U=0);return w?(U&&w.push(String.fromCharCode.apply(String,O.slice(0,U))),w.join("")):String.fromCharCode.apply(String,O.slice(0,U))},l.write=function(v,b,_){for(var E=_,w,O,U=0;U<v.length;++U)w=v.charCodeAt(U),w<128?b[_++]=w:w<2048?(b[_++]=w>>6|192,b[_++]=w&63|128):(w&64512)===55296&&((O=v.charCodeAt(U+1))&64512)===56320?(w=65536+((w&1023)<<10)+(O&1023),++U,b[_++]=w>>18|240,b[_++]=w>>12&63|128,b[_++]=w>>6&63|128,b[_++]=w&63|128):(b[_++]=w>>12|224,b[_++]=w>>6&63|128,b[_++]=w&63|128);return _-E}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=c;function c(l,g,v){var b=v||8192,_=b>>>1,E=null,w=b;return function(U){if(U<1||U>_)return l(U);w+U>b&&(E=l(b),w=0);var V=g.call(E,w,w+=U);return w&7&&(w=(w|7)+1),V}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=l;var c=requireMinimal$1();function l(_,E){this.lo=_>>>0,this.hi=E>>>0}var g=l.zero=new l(0,0);g.toNumber=function(){return 0},g.zzEncode=g.zzDecode=function(){return this},g.length=function(){return 1};var v=l.zeroHash="\0\0\0\0\0\0\0\0";l.fromNumber=function(E){if(E===0)return g;var w=E<0;w&&(E=-E);var O=E>>>0,U=(E-O)/4294967296>>>0;return w&&(U=~U>>>0,O=~O>>>0,++O>4294967295&&(O=0,++U>4294967295&&(U=0))),new l(O,U)},l.from=function(E){if(typeof E=="number")return l.fromNumber(E);if(c.isString(E))if(c.Long)E=c.Long.fromString(E);else return l.fromNumber(parseInt(E,10));return E.low||E.high?new l(E.low>>>0,E.high>>>0):g},l.prototype.toNumber=function(E){if(!E&&this.hi>>>31){var w=~this.lo+1>>>0,O=~this.hi>>>0;return w||(O=O+1>>>0),-(w+O*4294967296)}return this.lo+this.hi*4294967296},l.prototype.toLong=function(E){return c.Long?new c.Long(this.lo|0,this.hi|0,!!E):{low:this.lo|0,high:this.hi|0,unsigned:!!E}};var b=String.prototype.charCodeAt;return l.fromHash=function(E){return E===v?g:new l((b.call(E,0)|b.call(E,1)<<8|b.call(E,2)<<16|b.call(E,3)<<24)>>>0,(b.call(E,4)|b.call(E,5)<<8|b.call(E,6)<<16|b.call(E,7)<<24)>>>0)},l.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},l.prototype.zzEncode=function(){var E=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^E)>>>0,this.lo=(this.lo<<1^E)>>>0,this},l.prototype.zzDecode=function(){var E=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^E)>>>0,this.hi=(this.hi>>>1^E)>>>0,this},l.prototype.length=function(){var E=this.lo,w=(this.lo>>>28|this.hi<<4)>>>0,O=this.hi>>>24;return O===0?w===0?E<16384?E<128?1:2:E<2097152?3:4:w<16384?w<128?5:6:w<2097152?7:8:O<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(c){var l=c;l.asPromise=requireAspromise(),l.base64=requireBase64(),l.EventEmitter=requireEventemitter(),l.float=requireFloat(),l.inquire=requireInquire(),l.utf8=requireUtf8(),l.pool=requirePool(),l.LongBits=requireLongbits(),l.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),l.global=l.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,l.emptyArray=Object.freeze?Object.freeze([]):[],l.emptyObject=Object.freeze?Object.freeze({}):{},l.isInteger=Number.isInteger||function(_){return typeof _=="number"&&isFinite(_)&&Math.floor(_)===_},l.isString=function(_){return typeof _=="string"||_ instanceof String},l.isObject=function(_){return _&&typeof _=="object"},l.isset=l.isSet=function(_,E){var w=_[E];return w!=null&&_.hasOwnProperty(E)?typeof w!="object"||(Array.isArray(w)?w.length:Object.keys(w).length)>0:!1},l.Buffer=function(){try{var b=l.inquire("buffer").Buffer;return b.prototype.utf8Write?b:null}catch{return null}}(),l._Buffer_from=null,l._Buffer_allocUnsafe=null,l.newBuffer=function(_){return typeof _=="number"?l.Buffer?l._Buffer_allocUnsafe(_):new l.Array(_):l.Buffer?l._Buffer_from(_):typeof Uint8Array>"u"?_:new Uint8Array(_)},l.Array=typeof Uint8Array<"u"?Uint8Array:Array,l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long"),l.key2Re=/^true|false|0|1$/,l.key32Re=/^-?(?:0|[1-9][0-9]*)$/,l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,l.longToHash=function(_){return _?l.LongBits.from(_).toHash():l.LongBits.zeroHash},l.longFromHash=function(_,E){var w=l.LongBits.fromHash(_);return l.Long?l.Long.fromBits(w.lo,w.hi,E):w.toNumber(!!E)};function g(b,_,E){for(var w=Object.keys(_),O=0;O<w.length;++O)(b[w[O]]===void 0||!E)&&(b[w[O]]=_[w[O]]);return b}l.merge=g,l.lcFirst=function(_){return _.charAt(0).toLowerCase()+_.substring(1)};function v(b){function _(E,w){if(!(this instanceof _))return new _(E,w);Object.defineProperty(this,"message",{get:function(){return E}}),Error.captureStackTrace?Error.captureStackTrace(this,_):Object.defineProperty(this,"stack",{value:new Error().stack||""}),w&&g(this,w)}return(_.prototype=Object.create(Error.prototype)).constructor=_,Object.defineProperty(_.prototype,"name",{get:function(){return b}}),_.prototype.toString=function(){return this.name+": "+this.message},_}l.newError=v,l.ProtocolError=v("ProtocolError"),l.oneOfGetter=function(_){for(var E={},w=0;w<_.length;++w)E[_[w]]=1;return function(){for(var O=Object.keys(this),U=O.length-1;U>-1;--U)if(E[O[U]]===1&&this[O[U]]!==void 0&&this[O[U]]!==null)return O[U]}},l.oneOfSetter=function(_){return function(E){for(var w=0;w<_.length;++w)_[w]!==E&&delete this[_[w]]}},l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},l._configure=function(){var b=l.Buffer;if(!b){l._Buffer_from=l._Buffer_allocUnsafe=null;return}l._Buffer_from=b.from!==Uint8Array.from&&b.from||function(E,w){return new b(E,w)},l._Buffer_allocUnsafe=b.allocUnsafe||function(E){return new b(E)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=O;var c=requireMinimal$1(),l,g=c.LongBits,v=c.base64,b=c.utf8;function _(pe,ce,X){this.fn=pe,this.len=ce,this.next=void 0,this.val=X}function E(){}function w(pe){this.head=pe.head,this.tail=pe.tail,this.len=pe.len,this.next=pe.states}function O(){this.len=0,this.head=new _(E,0,0),this.tail=this.head,this.states=null}var U=function(){return c.Buffer?function(){return(O.create=function(){return new l})()}:function(){return new O}};O.create=U(),O.alloc=function(ce){return new c.Array(ce)},c.Array!==Array&&(O.alloc=c.pool(O.alloc,c.Array.prototype.subarray)),O.prototype._push=function(ce,X,P){return this.tail=this.tail.next=new _(ce,X,P),this.len+=X,this};function V(pe,ce,X){ce[X]=pe&255}function C(pe,ce,X){for(;pe>127;)ce[X++]=pe&127|128,pe>>>=7;ce[X]=pe}function q(pe,ce){this.len=pe,this.next=void 0,this.val=ce}q.prototype=Object.create(_.prototype),q.prototype.fn=C,O.prototype.uint32=function(ce){return this.len+=(this.tail=this.tail.next=new q((ce=ce>>>0)<128?1:ce<16384?2:ce<2097152?3:ce<268435456?4:5,ce)).len,this},O.prototype.int32=function(ce){return ce<0?this._push(ue,10,g.fromNumber(ce)):this.uint32(ce)},O.prototype.sint32=function(ce){return this.uint32((ce<<1^ce>>31)>>>0)};function ue(pe,ce,X){for(;pe.hi;)ce[X++]=pe.lo&127|128,pe.lo=(pe.lo>>>7|pe.hi<<25)>>>0,pe.hi>>>=7;for(;pe.lo>127;)ce[X++]=pe.lo&127|128,pe.lo=pe.lo>>>7;ce[X++]=pe.lo}O.prototype.uint64=function(ce){var X=g.from(ce);return this._push(ue,X.length(),X)},O.prototype.int64=O.prototype.uint64,O.prototype.sint64=function(ce){var X=g.from(ce).zzEncode();return this._push(ue,X.length(),X)},O.prototype.bool=function(ce){return this._push(V,1,ce?1:0)};function se(pe,ce,X){ce[X]=pe&255,ce[X+1]=pe>>>8&255,ce[X+2]=pe>>>16&255,ce[X+3]=pe>>>24}O.prototype.fixed32=function(ce){return this._push(se,4,ce>>>0)},O.prototype.sfixed32=O.prototype.fixed32,O.prototype.fixed64=function(ce){var X=g.from(ce);return this._push(se,4,X.lo)._push(se,4,X.hi)},O.prototype.sfixed64=O.prototype.fixed64,O.prototype.float=function(ce){return this._push(c.float.writeFloatLE,4,ce)},O.prototype.double=function(ce){return this._push(c.float.writeDoubleLE,8,ce)};var Y=c.Array.prototype.set?function(ce,X,P){X.set(ce,P)}:function(ce,X,P){for(var z=0;z<ce.length;++z)X[P+z]=ce[z]};return O.prototype.bytes=function(ce){var X=ce.length>>>0;if(!X)return this._push(V,1,0);if(c.isString(ce)){var P=O.alloc(X=v.length(ce));v.decode(ce,P,0),ce=P}return this.uint32(X)._push(Y,X,ce)},O.prototype.string=function(ce){var X=b.length(ce);return X?this.uint32(X)._push(b.write,X,ce):this._push(V,1,0)},O.prototype.fork=function(){return this.states=new w(this),this.head=this.tail=new _(E,0,0),this.len=0,this},O.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new _(E,0,0),this.len=0),this},O.prototype.ldelim=function(){var ce=this.head,X=this.tail,P=this.len;return this.reset().uint32(P),P&&(this.tail.next=ce.next,this.tail=X,this.len+=P),this},O.prototype.finish=function(){for(var ce=this.head.next,X=this.constructor.alloc(this.len),P=0;ce;)ce.fn(ce.val,X,P),P+=ce.len,ce=ce.next;return X},O._configure=function(pe){l=pe,O.create=U(),l._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=g;var c=requireWriter();(g.prototype=Object.create(c.prototype)).constructor=g;var l=requireMinimal$1();function g(){c.call(this)}g._configure=function(){g.alloc=l._Buffer_allocUnsafe,g.writeBytesBuffer=l.Buffer&&l.Buffer.prototype instanceof Uint8Array&&l.Buffer.prototype.set.name==="set"?function(_,E,w){E.set(_,w)}:function(_,E,w){if(_.copy)_.copy(E,w,0,_.length);else for(var O=0;O<_.length;)E[w++]=_[O++]}},g.prototype.bytes=function(_){l.isString(_)&&(_=l._Buffer_from(_,"base64"));var E=_.length>>>0;return this.uint32(E),E&&this._push(g.writeBytesBuffer,E,_),this};function v(b,_,E){b.length<40?l.utf8.write(b,_,E):_.utf8Write?_.utf8Write(b,E):_.write(b,E)}return g.prototype.string=function(_){var E=l.Buffer.byteLength(_);return this.uint32(E),E&&this._push(v,E,_),this},g._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=_;var c=requireMinimal$1(),l,g=c.LongBits,v=c.utf8;function b(C,q){return RangeError("index out of range: "+C.pos+" + "+(q||1)+" > "+C.len)}function _(C){this.buf=C,this.pos=0,this.len=C.length}var E=typeof Uint8Array<"u"?function(q){if(q instanceof Uint8Array||Array.isArray(q))return new _(q);throw Error("illegal buffer")}:function(q){if(Array.isArray(q))return new _(q);throw Error("illegal buffer")},w=function(){return c.Buffer?function(ue){return(_.create=function(Y){return c.Buffer.isBuffer(Y)?new l(Y):E(Y)})(ue)}:E};_.create=w(),_.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,_.prototype.uint32=function(){var q=4294967295;return function(){if(q=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(q=(q|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(q=(q|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(q=(q|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(q=(q|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return q;if((this.pos+=5)>this.len)throw this.pos=this.len,b(this,10);return q}}(),_.prototype.int32=function(){return this.uint32()|0},_.prototype.sint32=function(){var q=this.uint32();return q>>>1^-(q&1)|0};function O(){var C=new g(0,0),q=0;if(this.len-this.pos>4){for(;q<4;++q)if(C.lo=(C.lo|(this.buf[this.pos]&127)<<q*7)>>>0,this.buf[this.pos++]<128)return C;if(C.lo=(C.lo|(this.buf[this.pos]&127)<<28)>>>0,C.hi=(C.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return C;q=0}else{for(;q<3;++q){if(this.pos>=this.len)throw b(this);if(C.lo=(C.lo|(this.buf[this.pos]&127)<<q*7)>>>0,this.buf[this.pos++]<128)return C}return C.lo=(C.lo|(this.buf[this.pos++]&127)<<q*7)>>>0,C}if(this.len-this.pos>4){for(;q<5;++q)if(C.hi=(C.hi|(this.buf[this.pos]&127)<<q*7+3)>>>0,this.buf[this.pos++]<128)return C}else for(;q<5;++q){if(this.pos>=this.len)throw b(this);if(C.hi=(C.hi|(this.buf[this.pos]&127)<<q*7+3)>>>0,this.buf[this.pos++]<128)return C}throw Error("invalid varint encoding")}_.prototype.bool=function(){return this.uint32()!==0};function U(C,q){return(C[q-4]|C[q-3]<<8|C[q-2]<<16|C[q-1]<<24)>>>0}_.prototype.fixed32=function(){if(this.pos+4>this.len)throw b(this,4);return U(this.buf,this.pos+=4)},_.prototype.sfixed32=function(){if(this.pos+4>this.len)throw b(this,4);return U(this.buf,this.pos+=4)|0};function V(){if(this.pos+8>this.len)throw b(this,8);return new g(U(this.buf,this.pos+=4),U(this.buf,this.pos+=4))}return _.prototype.float=function(){if(this.pos+4>this.len)throw b(this,4);var q=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,q},_.prototype.double=function(){if(this.pos+8>this.len)throw b(this,4);var q=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,q},_.prototype.bytes=function(){var q=this.uint32(),ue=this.pos,se=this.pos+q;if(se>this.len)throw b(this,q);return this.pos+=q,Array.isArray(this.buf)?this.buf.slice(ue,se):ue===se?new this.buf.constructor(0):this._slice.call(this.buf,ue,se)},_.prototype.string=function(){var q=this.bytes();return v.read(q,0,q.length)},_.prototype.skip=function(q){if(typeof q=="number"){if(this.pos+q>this.len)throw b(this,q);this.pos+=q}else do if(this.pos>=this.len)throw b(this);while(this.buf[this.pos++]&128);return this},_.prototype.skipType=function(C){switch(C){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(C=this.uint32()&7)!==4;)this.skipType(C);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+C+" at offset "+this.pos)}return this},_._configure=function(C){l=C,_.create=w(),l._configure();var q=c.Long?"toLong":"toNumber";c.merge(_.prototype,{int64:function(){return O.call(this)[q](!1)},uint64:function(){return O.call(this)[q](!0)},sint64:function(){return O.call(this).zzDecode()[q](!1)},fixed64:function(){return V.call(this)[q](!0)},sfixed64:function(){return V.call(this)[q](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=g;var c=requireReader();(g.prototype=Object.create(c.prototype)).constructor=g;var l=requireMinimal$1();function g(v){c.call(this,v)}return g._configure=function(){l.Buffer&&(g.prototype._slice=l.Buffer.prototype.slice)},g.prototype.string=function(){var b=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+b,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+b,this.len))},g._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=l;var c=requireMinimal$1();(l.prototype=Object.create(c.EventEmitter.prototype)).constructor=l;function l(g,v,b){if(typeof g!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!v,this.responseDelimited=!!b}return l.prototype.rpcCall=function g(v,b,_,E,w){if(!E)throw TypeError("request must be specified");var O=this;if(!w)return c.asPromise(g,O,v,b,_,E);if(!O.rpcImpl){setTimeout(function(){w(Error("already ended"))},0);return}try{return O.rpcImpl(v,b[O.requestDelimited?"encodeDelimited":"encode"](E).finish(),function(V,C){if(V)return O.emit("error",V,v),w(V);if(C===null){O.end(!0);return}if(!(C instanceof _))try{C=_[O.responseDelimited?"decodeDelimited":"decode"](C)}catch(q){return O.emit("error",q,v),w(q)}return O.emit("data",C,v),w(null,C)})}catch(U){O.emit("error",U,v),setTimeout(function(){w(U)},0);return}},l.prototype.end=function(v){return this.rpcImpl&&(v||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(c){var l=c;l.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(c){var l=c;l.build="minimal",l.Writer=requireWriter(),l.BufferWriter=requireWriter_buffer(),l.Reader=requireReader(),l.BufferReader=requireReader_buffer(),l.util=requireMinimal$1(),l.rpc=requireRpc(),l.roots=requireRoots(),l.configure=g;function g(){l.util._configure(),l.Writer._configure(l.BufferWriter),l.Reader._configure(l.BufferReader)}g()}(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var ZegoExpressLogger={exports:{}},deflate$1={},deflate={},trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;const c=4,l=0,g=1,v=2;function b(Ee){let it=Ee.length;for(;--it>=0;)Ee[it]=0}const _=0,E=1,w=2,O=3,U=258,V=29,C=256,q=C+1+V,ue=30,se=19,Y=2*q+1,pe=15,ce=16,X=7,P=256,z=16,oe=17,A=18,le=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K=512,Z=new Array((q+2)*2);b(Z);const J=new Array(ue*2);b(J);const D=new Array(K);b(D);const G=new Array(U-O+1);b(G);const M=new Array(V);b(M);const L=new Array(ue);b(L);function W(Ee,it,nt,tt,Et){this.static_tree=Ee,this.extra_bits=it,this.extra_base=nt,this.elems=tt,this.max_length=Et,this.has_stree=Ee&&Ee.length}let ve,de,ne;function he(Ee,it){this.dyn_tree=Ee,this.max_code=0,this.stat_desc=it}const _e=Ee=>Ee<256?D[Ee]:D[256+(Ee>>>7)],Ue=(Ee,it)=>{Ee.pending_buf[Ee.pending++]=it&255,Ee.pending_buf[Ee.pending++]=it>>>8&255},Fe=(Ee,it,nt)=>{Ee.bi_valid>ce-nt?(Ee.bi_buf|=it<<Ee.bi_valid&65535,Ue(Ee,Ee.bi_buf),Ee.bi_buf=it>>ce-Ee.bi_valid,Ee.bi_valid+=nt-ce):(Ee.bi_buf|=it<<Ee.bi_valid&65535,Ee.bi_valid+=nt)},ze=(Ee,it,nt)=>{Fe(Ee,nt[it*2],nt[it*2+1])},Me=(Ee,it)=>{let nt=0;do nt|=Ee&1,Ee>>>=1,nt<<=1;while(--it>0);return nt>>>1},We=Ee=>{Ee.bi_valid===16?(Ue(Ee,Ee.bi_buf),Ee.bi_buf=0,Ee.bi_valid=0):Ee.bi_valid>=8&&(Ee.pending_buf[Ee.pending++]=Ee.bi_buf&255,Ee.bi_buf>>=8,Ee.bi_valid-=8)},rt=(Ee,it)=>{const nt=it.dyn_tree,tt=it.max_code,Et=it.stat_desc.static_tree,Nt=it.stat_desc.has_stree,Vt=it.stat_desc.extra_bits,It=it.stat_desc.extra_base,ri=it.stat_desc.max_length;let gi,Si,Hi,Gi,Qi,br,pr=0;for(Gi=0;Gi<=pe;Gi++)Ee.bl_count[Gi]=0;for(nt[Ee.heap[Ee.heap_max]*2+1]=0,gi=Ee.heap_max+1;gi<Y;gi++)Si=Ee.heap[gi],Gi=nt[nt[Si*2+1]*2+1]+1,Gi>ri&&(Gi=ri,pr++),nt[Si*2+1]=Gi,!(Si>tt)&&(Ee.bl_count[Gi]++,Qi=0,Si>=It&&(Qi=Vt[Si-It]),br=nt[Si*2],Ee.opt_len+=br*(Gi+Qi),Nt&&(Ee.static_len+=br*(Et[Si*2+1]+Qi)));if(pr!==0){do{for(Gi=ri-1;Ee.bl_count[Gi]===0;)Gi--;Ee.bl_count[Gi]--,Ee.bl_count[Gi+1]+=2,Ee.bl_count[ri]--,pr-=2}while(pr>0);for(Gi=ri;Gi!==0;Gi--)for(Si=Ee.bl_count[Gi];Si!==0;)Hi=Ee.heap[--gi],!(Hi>tt)&&(nt[Hi*2+1]!==Gi&&(Ee.opt_len+=(Gi-nt[Hi*2+1])*nt[Hi*2],nt[Hi*2+1]=Gi),Si--)}},dt=(Ee,it,nt)=>{const tt=new Array(pe+1);let Et=0,Nt,Vt;for(Nt=1;Nt<=pe;Nt++)Et=Et+nt[Nt-1]<<1,tt[Nt]=Et;for(Vt=0;Vt<=it;Vt++){let It=Ee[Vt*2+1];It!==0&&(Ee[Vt*2]=Me(tt[It]++,It))}},ht=()=>{let Ee,it,nt,tt,Et;const Nt=new Array(pe+1);for(nt=0,tt=0;tt<V-1;tt++)for(M[tt]=nt,Ee=0;Ee<1<<le[tt];Ee++)G[nt++]=tt;for(G[nt-1]=tt,Et=0,tt=0;tt<16;tt++)for(L[tt]=Et,Ee=0;Ee<1<<$[tt];Ee++)D[Et++]=tt;for(Et>>=7;tt<ue;tt++)for(L[tt]=Et<<7,Ee=0;Ee<1<<$[tt]-7;Ee++)D[256+Et++]=tt;for(it=0;it<=pe;it++)Nt[it]=0;for(Ee=0;Ee<=143;)Z[Ee*2+1]=8,Ee++,Nt[8]++;for(;Ee<=255;)Z[Ee*2+1]=9,Ee++,Nt[9]++;for(;Ee<=279;)Z[Ee*2+1]=7,Ee++,Nt[7]++;for(;Ee<=287;)Z[Ee*2+1]=8,Ee++,Nt[8]++;for(dt(Z,q+1,Nt),Ee=0;Ee<ue;Ee++)J[Ee*2+1]=5,J[Ee*2]=Me(Ee,5);ve=new W(Z,le,C+1,q,pe),de=new W(J,$,0,ue,pe),ne=new W(new Array(0),k,0,se,X)},Pt=Ee=>{let it;for(it=0;it<q;it++)Ee.dyn_ltree[it*2]=0;for(it=0;it<ue;it++)Ee.dyn_dtree[it*2]=0;for(it=0;it<se;it++)Ee.bl_tree[it*2]=0;Ee.dyn_ltree[P*2]=1,Ee.opt_len=Ee.static_len=0,Ee.sym_next=Ee.matches=0},ye=Ee=>{Ee.bi_valid>8?Ue(Ee,Ee.bi_buf):Ee.bi_valid>0&&(Ee.pending_buf[Ee.pending++]=Ee.bi_buf),Ee.bi_buf=0,Ee.bi_valid=0},De=(Ee,it,nt,tt)=>{const Et=it*2,Nt=nt*2;return Ee[Et]<Ee[Nt]||Ee[Et]===Ee[Nt]&&tt[it]<=tt[nt]},xe=(Ee,it,nt)=>{const tt=Ee.heap[nt];let Et=nt<<1;for(;Et<=Ee.heap_len&&(Et<Ee.heap_len&&De(it,Ee.heap[Et+1],Ee.heap[Et],Ee.depth)&&Et++,!De(it,tt,Ee.heap[Et],Ee.depth));)Ee.heap[nt]=Ee.heap[Et],nt=Et,Et<<=1;Ee.heap[nt]=tt},Je=(Ee,it,nt)=>{let tt,Et,Nt=0,Vt,It;if(Ee.sym_next!==0)do tt=Ee.pending_buf[Ee.sym_buf+Nt++]&255,tt+=(Ee.pending_buf[Ee.sym_buf+Nt++]&255)<<8,Et=Ee.pending_buf[Ee.sym_buf+Nt++],tt===0?ze(Ee,Et,it):(Vt=G[Et],ze(Ee,Vt+C+1,it),It=le[Vt],It!==0&&(Et-=M[Vt],Fe(Ee,Et,It)),tt--,Vt=_e(tt),ze(Ee,Vt,nt),It=$[Vt],It!==0&&(tt-=L[Vt],Fe(Ee,tt,It)));while(Nt<Ee.sym_next);ze(Ee,P,it)},ut=(Ee,it)=>{const nt=it.dyn_tree,tt=it.stat_desc.static_tree,Et=it.stat_desc.has_stree,Nt=it.stat_desc.elems;let Vt,It,ri=-1,gi;for(Ee.heap_len=0,Ee.heap_max=Y,Vt=0;Vt<Nt;Vt++)nt[Vt*2]!==0?(Ee.heap[++Ee.heap_len]=ri=Vt,Ee.depth[Vt]=0):nt[Vt*2+1]=0;for(;Ee.heap_len<2;)gi=Ee.heap[++Ee.heap_len]=ri<2?++ri:0,nt[gi*2]=1,Ee.depth[gi]=0,Ee.opt_len--,Et&&(Ee.static_len-=tt[gi*2+1]);for(it.max_code=ri,Vt=Ee.heap_len>>1;Vt>=1;Vt--)xe(Ee,nt,Vt);gi=Nt;do Vt=Ee.heap[1],Ee.heap[1]=Ee.heap[Ee.heap_len--],xe(Ee,nt,1),It=Ee.heap[1],Ee.heap[--Ee.heap_max]=Vt,Ee.heap[--Ee.heap_max]=It,nt[gi*2]=nt[Vt*2]+nt[It*2],Ee.depth[gi]=(Ee.depth[Vt]>=Ee.depth[It]?Ee.depth[Vt]:Ee.depth[It])+1,nt[Vt*2+1]=nt[It*2+1]=gi,Ee.heap[1]=gi++,xe(Ee,nt,1);while(Ee.heap_len>=2);Ee.heap[--Ee.heap_max]=Ee.heap[1],rt(Ee,it),dt(nt,ri,Ee.bl_count)},re=(Ee,it,nt)=>{let tt,Et=-1,Nt,Vt=it[0*2+1],It=0,ri=7,gi=4;for(Vt===0&&(ri=138,gi=3),it[(nt+1)*2+1]=65535,tt=0;tt<=nt;tt++)Nt=Vt,Vt=it[(tt+1)*2+1],!(++It<ri&&Nt===Vt)&&(It<gi?Ee.bl_tree[Nt*2]+=It:Nt!==0?(Nt!==Et&&Ee.bl_tree[Nt*2]++,Ee.bl_tree[z*2]++):It<=10?Ee.bl_tree[oe*2]++:Ee.bl_tree[A*2]++,It=0,Et=Nt,Vt===0?(ri=138,gi=3):Nt===Vt?(ri=6,gi=3):(ri=7,gi=4))},Se=(Ee,it,nt)=>{let tt,Et=-1,Nt,Vt=it[0*2+1],It=0,ri=7,gi=4;for(Vt===0&&(ri=138,gi=3),tt=0;tt<=nt;tt++)if(Nt=Vt,Vt=it[(tt+1)*2+1],!(++It<ri&&Nt===Vt)){if(It<gi)do ze(Ee,Nt,Ee.bl_tree);while(--It!==0);else Nt!==0?(Nt!==Et&&(ze(Ee,Nt,Ee.bl_tree),It--),ze(Ee,z,Ee.bl_tree),Fe(Ee,It-3,2)):It<=10?(ze(Ee,oe,Ee.bl_tree),Fe(Ee,It-3,3)):(ze(Ee,A,Ee.bl_tree),Fe(Ee,It-11,7));It=0,Et=Nt,Vt===0?(ri=138,gi=3):Nt===Vt?(ri=6,gi=3):(ri=7,gi=4)}},we=Ee=>{let it;for(re(Ee,Ee.dyn_ltree,Ee.l_desc.max_code),re(Ee,Ee.dyn_dtree,Ee.d_desc.max_code),ut(Ee,Ee.bl_desc),it=se-1;it>=3&&Ee.bl_tree[j[it]*2+1]===0;it--);return Ee.opt_len+=3*(it+1)+5+5+4,it},Ke=(Ee,it,nt,tt)=>{let Et;for(Fe(Ee,it-257,5),Fe(Ee,nt-1,5),Fe(Ee,tt-4,4),Et=0;Et<tt;Et++)Fe(Ee,Ee.bl_tree[j[Et]*2+1],3);Se(Ee,Ee.dyn_ltree,it-1),Se(Ee,Ee.dyn_dtree,nt-1)},je=Ee=>{let it=4093624447,nt;for(nt=0;nt<=31;nt++,it>>>=1)if(it&1&&Ee.dyn_ltree[nt*2]!==0)return l;if(Ee.dyn_ltree[9*2]!==0||Ee.dyn_ltree[10*2]!==0||Ee.dyn_ltree[13*2]!==0)return g;for(nt=32;nt<C;nt++)if(Ee.dyn_ltree[nt*2]!==0)return g;return l};let St=!1;const xt=Ee=>{St||(ht(),St=!0),Ee.l_desc=new he(Ee.dyn_ltree,ve),Ee.d_desc=new he(Ee.dyn_dtree,de),Ee.bl_desc=new he(Ee.bl_tree,ne),Ee.bi_buf=0,Ee.bi_valid=0,Pt(Ee)},Ht=(Ee,it,nt,tt)=>{Fe(Ee,(_<<1)+(tt?1:0),3),ye(Ee),Ue(Ee,nt),Ue(Ee,~nt),nt&&Ee.pending_buf.set(Ee.window.subarray(it,it+nt),Ee.pending),Ee.pending+=nt},$t=Ee=>{Fe(Ee,E<<1,3),ze(Ee,P,Z),We(Ee)},ci=(Ee,it,nt,tt)=>{let Et,Nt,Vt=0;Ee.level>0?(Ee.strm.data_type===v&&(Ee.strm.data_type=je(Ee)),ut(Ee,Ee.l_desc),ut(Ee,Ee.d_desc),Vt=we(Ee),Et=Ee.opt_len+3+7>>>3,Nt=Ee.static_len+3+7>>>3,Nt<=Et&&(Et=Nt)):Et=Nt=nt+5,nt+4<=Et&&it!==-1?Ht(Ee,it,nt,tt):Ee.strategy===c||Nt===Et?(Fe(Ee,(E<<1)+(tt?1:0),3),Je(Ee,Z,J)):(Fe(Ee,(w<<1)+(tt?1:0),3),Ke(Ee,Ee.l_desc.max_code+1,Ee.d_desc.max_code+1,Vt+1),Je(Ee,Ee.dyn_ltree,Ee.dyn_dtree)),Pt(Ee),tt&&ye(Ee)},He=(Ee,it,nt)=>(Ee.pending_buf[Ee.sym_buf+Ee.sym_next++]=it,Ee.pending_buf[Ee.sym_buf+Ee.sym_next++]=it>>8,Ee.pending_buf[Ee.sym_buf+Ee.sym_next++]=nt,it===0?Ee.dyn_ltree[nt*2]++:(Ee.matches++,it--,Ee.dyn_ltree[(G[nt]+C+1)*2]++,Ee.dyn_dtree[_e(it)*2]++),Ee.sym_next===Ee.sym_end);return trees._tr_init=xt,trees._tr_stored_block=Ht,trees._tr_flush_block=ci,trees._tr_tally=He,trees._tr_align=$t,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){return hasRequiredAdler32||(hasRequiredAdler32=1,adler32_1=(l,g,v,b)=>{let _=l&65535|0,E=l>>>16&65535|0,w=0;for(;v!==0;){w=v>2e3?2e3:v,v-=w;do _=_+g[b++]|0,E=E+_|0;while(--w);_%=65521,E%=65521}return _|E<<16|0}),adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;const c=()=>{let v,b=[];for(var _=0;_<256;_++){v=_;for(var E=0;E<8;E++)v=v&1?3988292384^v>>>1:v>>>1;b[_]=v}return b},l=new Uint32Array(c());return crc32_1=(v,b,_,E)=>{const w=l,O=E+_;v^=-1;for(let U=E;U<O;U++)v=v>>>8^w[(v^b[U])&255];return v^-1},crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var hasRequiredDeflate$1;function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;const{_tr_init:c,_tr_stored_block:l,_tr_flush_block:g,_tr_tally:v,_tr_align:b}=requireTrees(),_=requireAdler32(),E=requireCrc32(),w=requireMessages(),{Z_NO_FLUSH:O,Z_PARTIAL_FLUSH:U,Z_FULL_FLUSH:V,Z_FINISH:C,Z_BLOCK:q,Z_OK:ue,Z_STREAM_END:se,Z_STREAM_ERROR:Y,Z_DATA_ERROR:pe,Z_BUF_ERROR:ce,Z_DEFAULT_COMPRESSION:X,Z_FILTERED:P,Z_HUFFMAN_ONLY:z,Z_RLE:oe,Z_FIXED:A,Z_DEFAULT_STRATEGY:le,Z_UNKNOWN:$,Z_DEFLATED:k}=requireConstants(),j=9,K=15,Z=8,G=256+1+29,M=30,L=19,W=2*G+1,ve=15,de=3,ne=258,he=ne+de+1,_e=32,Ue=42,Fe=57,ze=69,Me=73,We=91,rt=103,dt=113,ht=666,Pt=1,ye=2,De=3,xe=4,Je=3,ut=(R,at)=>(R.msg=w[at],at),re=R=>R*2-(R>4?9:0),Se=R=>{let at=R.length;for(;--at>=0;)R[at]=0},we=R=>{let at,ke,ft,Ge=R.w_size;at=R.hash_size,ft=at;do ke=R.head[--ft],R.head[ft]=ke>=Ge?ke-Ge:0;while(--at);at=Ge,ft=at;do ke=R.prev[--ft],R.prev[ft]=ke>=Ge?ke-Ge:0;while(--at)};let je=(R,at,ke)=>(at<<R.hash_shift^ke)&R.hash_mask;const St=R=>{const at=R.state;let ke=at.pending;ke>R.avail_out&&(ke=R.avail_out),ke!==0&&(R.output.set(at.pending_buf.subarray(at.pending_out,at.pending_out+ke),R.next_out),R.next_out+=ke,at.pending_out+=ke,R.total_out+=ke,R.avail_out-=ke,at.pending-=ke,at.pending===0&&(at.pending_out=0))},xt=(R,at)=>{g(R,R.block_start>=0?R.block_start:-1,R.strstart-R.block_start,at),R.block_start=R.strstart,St(R.strm)},Ht=(R,at)=>{R.pending_buf[R.pending++]=at},$t=(R,at)=>{R.pending_buf[R.pending++]=at>>>8&255,R.pending_buf[R.pending++]=at&255},ci=(R,at,ke,ft)=>{let Ge=R.avail_in;return Ge>ft&&(Ge=ft),Ge===0?0:(R.avail_in-=Ge,at.set(R.input.subarray(R.next_in,R.next_in+Ge),ke),R.state.wrap===1?R.adler=_(R.adler,at,Ge,ke):R.state.wrap===2&&(R.adler=E(R.adler,at,Ge,ke)),R.next_in+=Ge,R.total_in+=Ge,Ge)},He=(R,at)=>{let ke=R.max_chain_length,ft=R.strstart,Ge,Tt,Qt=R.prev_length,wt=R.nice_match;const Ut=R.strstart>R.w_size-he?R.strstart-(R.w_size-he):0,di=R.window,Ri=R.w_mask,oi=R.prev,Ii=R.strstart+ne;let yi=di[ft+Qt-1],hi=di[ft+Qt];R.prev_length>=R.good_match&&(ke>>=2),wt>R.lookahead&&(wt=R.lookahead);do if(Ge=at,!(di[Ge+Qt]!==hi||di[Ge+Qt-1]!==yi||di[Ge]!==di[ft]||di[++Ge]!==di[ft+1])){ft+=2,Ge++;do;while(di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&di[++ft]===di[++Ge]&&ft<Ii);if(Tt=ne-(Ii-ft),ft=Ii-ne,Tt>Qt){if(R.match_start=at,Qt=Tt,Tt>=wt)break;yi=di[ft+Qt-1],hi=di[ft+Qt]}}while((at=oi[at&Ri])>Ut&&--ke!==0);return Qt<=R.lookahead?Qt:R.lookahead},Ee=R=>{const at=R.w_size;let ke,ft,Ge;do{if(ft=R.window_size-R.lookahead-R.strstart,R.strstart>=at+(at-he)&&(R.window.set(R.window.subarray(at,at+at-ft),0),R.match_start-=at,R.strstart-=at,R.block_start-=at,R.insert>R.strstart&&(R.insert=R.strstart),we(R),ft+=at),R.strm.avail_in===0)break;if(ke=ci(R.strm,R.window,R.strstart+R.lookahead,ft),R.lookahead+=ke,R.lookahead+R.insert>=de)for(Ge=R.strstart-R.insert,R.ins_h=R.window[Ge],R.ins_h=je(R,R.ins_h,R.window[Ge+1]);R.insert&&(R.ins_h=je(R,R.ins_h,R.window[Ge+de-1]),R.prev[Ge&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=Ge,Ge++,R.insert--,!(R.lookahead+R.insert<de)););}while(R.lookahead<he&&R.strm.avail_in!==0)},it=(R,at)=>{let ke=R.pending_buf_size-5>R.w_size?R.w_size:R.pending_buf_size-5,ft,Ge,Tt,Qt=0,wt=R.strm.avail_in;do{if(ft=65535,Tt=R.bi_valid+42>>3,R.strm.avail_out<Tt||(Tt=R.strm.avail_out-Tt,Ge=R.strstart-R.block_start,ft>Ge+R.strm.avail_in&&(ft=Ge+R.strm.avail_in),ft>Tt&&(ft=Tt),ft<ke&&(ft===0&&at!==C||at===O||ft!==Ge+R.strm.avail_in)))break;Qt=at===C&&ft===Ge+R.strm.avail_in?1:0,l(R,0,0,Qt),R.pending_buf[R.pending-4]=ft,R.pending_buf[R.pending-3]=ft>>8,R.pending_buf[R.pending-2]=~ft,R.pending_buf[R.pending-1]=~ft>>8,St(R.strm),Ge&&(Ge>ft&&(Ge=ft),R.strm.output.set(R.window.subarray(R.block_start,R.block_start+Ge),R.strm.next_out),R.strm.next_out+=Ge,R.strm.avail_out-=Ge,R.strm.total_out+=Ge,R.block_start+=Ge,ft-=Ge),ft&&(ci(R.strm,R.strm.output,R.strm.next_out,ft),R.strm.next_out+=ft,R.strm.avail_out-=ft,R.strm.total_out+=ft)}while(Qt===0);return wt-=R.strm.avail_in,wt&&(wt>=R.w_size?(R.matches=2,R.window.set(R.strm.input.subarray(R.strm.next_in-R.w_size,R.strm.next_in),0),R.strstart=R.w_size,R.insert=R.strstart):(R.window_size-R.strstart<=wt&&(R.strstart-=R.w_size,R.window.set(R.window.subarray(R.w_size,R.w_size+R.strstart),0),R.matches<2&&R.matches++,R.insert>R.strstart&&(R.insert=R.strstart)),R.window.set(R.strm.input.subarray(R.strm.next_in-wt,R.strm.next_in),R.strstart),R.strstart+=wt,R.insert+=wt>R.w_size-R.insert?R.w_size-R.insert:wt),R.block_start=R.strstart),R.high_water<R.strstart&&(R.high_water=R.strstart),Qt?xe:at!==O&&at!==C&&R.strm.avail_in===0&&R.strstart===R.block_start?ye:(Tt=R.window_size-R.strstart,R.strm.avail_in>Tt&&R.block_start>=R.w_size&&(R.block_start-=R.w_size,R.strstart-=R.w_size,R.window.set(R.window.subarray(R.w_size,R.w_size+R.strstart),0),R.matches<2&&R.matches++,Tt+=R.w_size,R.insert>R.strstart&&(R.insert=R.strstart)),Tt>R.strm.avail_in&&(Tt=R.strm.avail_in),Tt&&(ci(R.strm,R.window,R.strstart,Tt),R.strstart+=Tt,R.insert+=Tt>R.w_size-R.insert?R.w_size-R.insert:Tt),R.high_water<R.strstart&&(R.high_water=R.strstart),Tt=R.bi_valid+42>>3,Tt=R.pending_buf_size-Tt>65535?65535:R.pending_buf_size-Tt,ke=Tt>R.w_size?R.w_size:Tt,Ge=R.strstart-R.block_start,(Ge>=ke||(Ge||at===C)&&at!==O&&R.strm.avail_in===0&&Ge<=Tt)&&(ft=Ge>Tt?Tt:Ge,Qt=at===C&&R.strm.avail_in===0&&ft===Ge?1:0,l(R,R.block_start,ft,Qt),R.block_start+=ft,St(R.strm)),Qt?De:Pt)},nt=(R,at)=>{let ke,ft;for(;;){if(R.lookahead<he){if(Ee(R),R.lookahead<he&&at===O)return Pt;if(R.lookahead===0)break}if(ke=0,R.lookahead>=de&&(R.ins_h=je(R,R.ins_h,R.window[R.strstart+de-1]),ke=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),ke!==0&&R.strstart-ke<=R.w_size-he&&(R.match_length=He(R,ke)),R.match_length>=de)if(ft=v(R,R.strstart-R.match_start,R.match_length-de),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=de){R.match_length--;do R.strstart++,R.ins_h=je(R,R.ins_h,R.window[R.strstart+de-1]),ke=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart;while(--R.match_length!==0);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=je(R,R.ins_h,R.window[R.strstart+1]);else ft=v(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(ft&&(xt(R,!1),R.strm.avail_out===0))return Pt}return R.insert=R.strstart<de-1?R.strstart:de-1,at===C?(xt(R,!0),R.strm.avail_out===0?De:xe):R.sym_next&&(xt(R,!1),R.strm.avail_out===0)?Pt:ye},tt=(R,at)=>{let ke,ft,Ge;for(;;){if(R.lookahead<he){if(Ee(R),R.lookahead<he&&at===O)return Pt;if(R.lookahead===0)break}if(ke=0,R.lookahead>=de&&(R.ins_h=je(R,R.ins_h,R.window[R.strstart+de-1]),ke=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=de-1,ke!==0&&R.prev_length<R.max_lazy_match&&R.strstart-ke<=R.w_size-he&&(R.match_length=He(R,ke),R.match_length<=5&&(R.strategy===P||R.match_length===de&&R.strstart-R.match_start>4096)&&(R.match_length=de-1)),R.prev_length>=de&&R.match_length<=R.prev_length){Ge=R.strstart+R.lookahead-de,ft=v(R,R.strstart-1-R.prev_match,R.prev_length-de),R.lookahead-=R.prev_length-1,R.prev_length-=2;do++R.strstart<=Ge&&(R.ins_h=je(R,R.ins_h,R.window[R.strstart+de-1]),ke=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart);while(--R.prev_length!==0);if(R.match_available=0,R.match_length=de-1,R.strstart++,ft&&(xt(R,!1),R.strm.avail_out===0))return Pt}else if(R.match_available){if(ft=v(R,0,R.window[R.strstart-1]),ft&&xt(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return Pt}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(ft=v(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<de-1?R.strstart:de-1,at===C?(xt(R,!0),R.strm.avail_out===0?De:xe):R.sym_next&&(xt(R,!1),R.strm.avail_out===0)?Pt:ye},Et=(R,at)=>{let ke,ft,Ge,Tt;const Qt=R.window;for(;;){if(R.lookahead<=ne){if(Ee(R),R.lookahead<=ne&&at===O)return Pt;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=de&&R.strstart>0&&(Ge=R.strstart-1,ft=Qt[Ge],ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge])){Tt=R.strstart+ne;do;while(ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&ft===Qt[++Ge]&&Ge<Tt);R.match_length=ne-(Tt-Ge),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=de?(ke=v(R,1,R.match_length-de),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(ke=v(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),ke&&(xt(R,!1),R.strm.avail_out===0))return Pt}return R.insert=0,at===C?(xt(R,!0),R.strm.avail_out===0?De:xe):R.sym_next&&(xt(R,!1),R.strm.avail_out===0)?Pt:ye},Nt=(R,at)=>{let ke;for(;;){if(R.lookahead===0&&(Ee(R),R.lookahead===0)){if(at===O)return Pt;break}if(R.match_length=0,ke=v(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,ke&&(xt(R,!1),R.strm.avail_out===0))return Pt}return R.insert=0,at===C?(xt(R,!0),R.strm.avail_out===0?De:xe):R.sym_next&&(xt(R,!1),R.strm.avail_out===0)?Pt:ye};function Vt(R,at,ke,ft,Ge){this.good_length=R,this.max_lazy=at,this.nice_length=ke,this.max_chain=ft,this.func=Ge}const It=[new Vt(0,0,0,0,it),new Vt(4,4,8,4,nt),new Vt(4,5,16,8,nt),new Vt(4,6,32,32,nt),new Vt(4,4,16,16,tt),new Vt(8,16,32,32,tt),new Vt(8,16,128,128,tt),new Vt(8,32,128,256,tt),new Vt(32,128,258,1024,tt),new Vt(32,258,258,4096,tt)],ri=R=>{R.window_size=2*R.w_size,Se(R.head),R.max_lazy_match=It[R.level].max_lazy,R.good_match=It[R.level].good_length,R.nice_match=It[R.level].nice_length,R.max_chain_length=It[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=de-1,R.match_available=0,R.ins_h=0};function gi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(W*2),this.dyn_dtree=new Uint16Array((2*M+1)*2),this.bl_tree=new Uint16Array((2*L+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ve+1),this.heap=new Uint16Array(2*G+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*G+1),Se(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Si=R=>{if(!R)return 1;const at=R.state;return!at||at.strm!==R||at.status!==Ue&&at.status!==Fe&&at.status!==ze&&at.status!==Me&&at.status!==We&&at.status!==rt&&at.status!==dt&&at.status!==ht?1:0},Hi=R=>{if(Si(R))return ut(R,Y);R.total_in=R.total_out=0,R.data_type=$;const at=R.state;return at.pending=0,at.pending_out=0,at.wrap<0&&(at.wrap=-at.wrap),at.status=at.wrap===2?Fe:at.wrap?Ue:dt,R.adler=at.wrap===2?0:1,at.last_flush=-2,c(at),ue},Gi=R=>{const at=Hi(R);return at===ue&&ri(R.state),at},Qi=(R,at)=>Si(R)||R.state.wrap!==2?Y:(R.state.gzhead=at,ue),br=(R,at,ke,ft,Ge,Tt)=>{if(!R)return Y;let Qt=1;if(at===X&&(at=6),ft<0?(Qt=0,ft=-ft):ft>15&&(Qt=2,ft-=16),Ge<1||Ge>j||ke!==k||ft<8||ft>15||at<0||at>9||Tt<0||Tt>A||ft===8&&Qt!==1)return ut(R,Y);ft===8&&(ft=9);const wt=new gi;return R.state=wt,wt.strm=R,wt.status=Ue,wt.wrap=Qt,wt.gzhead=null,wt.w_bits=ft,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=Ge+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+de-1)/de),wt.window=new Uint8Array(wt.w_size*2),wt.head=new Uint16Array(wt.hash_size),wt.prev=new Uint16Array(wt.w_size),wt.lit_bufsize=1<<Ge+6,wt.pending_buf_size=wt.lit_bufsize*4,wt.pending_buf=new Uint8Array(wt.pending_buf_size),wt.sym_buf=wt.lit_bufsize,wt.sym_end=(wt.lit_bufsize-1)*3,wt.level=at,wt.strategy=Tt,wt.method=ke,Gi(R)},pr=(R,at)=>br(R,at,k,K,Z,le),Vr=(R,at)=>{if(Si(R)||at>q||at<0)return R?ut(R,Y):Y;const ke=R.state;if(!R.output||R.avail_in!==0&&!R.input||ke.status===ht&&at!==C)return ut(R,R.avail_out===0?ce:Y);const ft=ke.last_flush;if(ke.last_flush=at,ke.pending!==0){if(St(R),R.avail_out===0)return ke.last_flush=-1,ue}else if(R.avail_in===0&&re(at)<=re(ft)&&at!==C)return ut(R,ce);if(ke.status===ht&&R.avail_in!==0)return ut(R,ce);if(ke.status===Ue&&ke.wrap===0&&(ke.status=dt),ke.status===Ue){let Ge=k+(ke.w_bits-8<<4)<<8,Tt=-1;if(ke.strategy>=z||ke.level<2?Tt=0:ke.level<6?Tt=1:ke.level===6?Tt=2:Tt=3,Ge|=Tt<<6,ke.strstart!==0&&(Ge|=_e),Ge+=31-Ge%31,$t(ke,Ge),ke.strstart!==0&&($t(ke,R.adler>>>16),$t(ke,R.adler&65535)),R.adler=1,ke.status=dt,St(R),ke.pending!==0)return ke.last_flush=-1,ue}if(ke.status===Fe){if(R.adler=0,Ht(ke,31),Ht(ke,139),Ht(ke,8),ke.gzhead)Ht(ke,(ke.gzhead.text?1:0)+(ke.gzhead.hcrc?2:0)+(ke.gzhead.extra?4:0)+(ke.gzhead.name?8:0)+(ke.gzhead.comment?16:0)),Ht(ke,ke.gzhead.time&255),Ht(ke,ke.gzhead.time>>8&255),Ht(ke,ke.gzhead.time>>16&255),Ht(ke,ke.gzhead.time>>24&255),Ht(ke,ke.level===9?2:ke.strategy>=z||ke.level<2?4:0),Ht(ke,ke.gzhead.os&255),ke.gzhead.extra&&ke.gzhead.extra.length&&(Ht(ke,ke.gzhead.extra.length&255),Ht(ke,ke.gzhead.extra.length>>8&255)),ke.gzhead.hcrc&&(R.adler=E(R.adler,ke.pending_buf,ke.pending,0)),ke.gzindex=0,ke.status=ze;else if(Ht(ke,0),Ht(ke,0),Ht(ke,0),Ht(ke,0),Ht(ke,0),Ht(ke,ke.level===9?2:ke.strategy>=z||ke.level<2?4:0),Ht(ke,Je),ke.status=dt,St(R),ke.pending!==0)return ke.last_flush=-1,ue}if(ke.status===ze){if(ke.gzhead.extra){let Ge=ke.pending,Tt=(ke.gzhead.extra.length&65535)-ke.gzindex;for(;ke.pending+Tt>ke.pending_buf_size;){let wt=ke.pending_buf_size-ke.pending;if(ke.pending_buf.set(ke.gzhead.extra.subarray(ke.gzindex,ke.gzindex+wt),ke.pending),ke.pending=ke.pending_buf_size,ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge)),ke.gzindex+=wt,St(R),ke.pending!==0)return ke.last_flush=-1,ue;Ge=0,Tt-=wt}let Qt=new Uint8Array(ke.gzhead.extra);ke.pending_buf.set(Qt.subarray(ke.gzindex,ke.gzindex+Tt),ke.pending),ke.pending+=Tt,ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge)),ke.gzindex=0}ke.status=Me}if(ke.status===Me){if(ke.gzhead.name){let Ge=ke.pending,Tt;do{if(ke.pending===ke.pending_buf_size){if(ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge)),St(R),ke.pending!==0)return ke.last_flush=-1,ue;Ge=0}ke.gzindex<ke.gzhead.name.length?Tt=ke.gzhead.name.charCodeAt(ke.gzindex++)&255:Tt=0,Ht(ke,Tt)}while(Tt!==0);ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge)),ke.gzindex=0}ke.status=We}if(ke.status===We){if(ke.gzhead.comment){let Ge=ke.pending,Tt;do{if(ke.pending===ke.pending_buf_size){if(ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge)),St(R),ke.pending!==0)return ke.last_flush=-1,ue;Ge=0}ke.gzindex<ke.gzhead.comment.length?Tt=ke.gzhead.comment.charCodeAt(ke.gzindex++)&255:Tt=0,Ht(ke,Tt)}while(Tt!==0);ke.gzhead.hcrc&&ke.pending>Ge&&(R.adler=E(R.adler,ke.pending_buf,ke.pending-Ge,Ge))}ke.status=rt}if(ke.status===rt){if(ke.gzhead.hcrc){if(ke.pending+2>ke.pending_buf_size&&(St(R),ke.pending!==0))return ke.last_flush=-1,ue;Ht(ke,R.adler&255),Ht(ke,R.adler>>8&255),R.adler=0}if(ke.status=dt,St(R),ke.pending!==0)return ke.last_flush=-1,ue}if(R.avail_in!==0||ke.lookahead!==0||at!==O&&ke.status!==ht){let Ge=ke.level===0?it(ke,at):ke.strategy===z?Nt(ke,at):ke.strategy===oe?Et(ke,at):It[ke.level].func(ke,at);if((Ge===De||Ge===xe)&&(ke.status=ht),Ge===Pt||Ge===De)return R.avail_out===0&&(ke.last_flush=-1),ue;if(Ge===ye&&(at===U?b(ke):at!==q&&(l(ke,0,0,!1),at===V&&(Se(ke.head),ke.lookahead===0&&(ke.strstart=0,ke.block_start=0,ke.insert=0))),St(R),R.avail_out===0))return ke.last_flush=-1,ue}return at!==C?ue:ke.wrap<=0?se:(ke.wrap===2?(Ht(ke,R.adler&255),Ht(ke,R.adler>>8&255),Ht(ke,R.adler>>16&255),Ht(ke,R.adler>>24&255),Ht(ke,R.total_in&255),Ht(ke,R.total_in>>8&255),Ht(ke,R.total_in>>16&255),Ht(ke,R.total_in>>24&255)):($t(ke,R.adler>>>16),$t(ke,R.adler&65535)),St(R),ke.wrap>0&&(ke.wrap=-ke.wrap),ke.pending!==0?ue:se)},bt=R=>{if(Si(R))return Y;const at=R.state.status;return R.state=null,at===dt?ut(R,pe):ue},zt=(R,at)=>{let ke=at.length;if(Si(R))return Y;const ft=R.state,Ge=ft.wrap;if(Ge===2||Ge===1&&ft.status!==Ue||ft.lookahead)return Y;if(Ge===1&&(R.adler=_(R.adler,at,ke,0)),ft.wrap=0,ke>=ft.w_size){Ge===0&&(Se(ft.head),ft.strstart=0,ft.block_start=0,ft.insert=0);let Ut=new Uint8Array(ft.w_size);Ut.set(at.subarray(ke-ft.w_size,ke),0),at=Ut,ke=ft.w_size}const Tt=R.avail_in,Qt=R.next_in,wt=R.input;for(R.avail_in=ke,R.next_in=0,R.input=at,Ee(ft);ft.lookahead>=de;){let Ut=ft.strstart,di=ft.lookahead-(de-1);do ft.ins_h=je(ft,ft.ins_h,ft.window[Ut+de-1]),ft.prev[Ut&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=Ut,Ut++;while(--di);ft.strstart=Ut,ft.lookahead=de-1,Ee(ft)}return ft.strstart+=ft.lookahead,ft.block_start=ft.strstart,ft.insert=ft.lookahead,ft.lookahead=0,ft.match_length=ft.prev_length=de-1,ft.match_available=0,R.next_in=Qt,R.input=wt,R.avail_in=Tt,ft.wrap=Ge,ue};return deflate.deflateInit=pr,deflate.deflateInit2=br,deflate.deflateReset=Gi,deflate.deflateResetKeep=Hi,deflate.deflateSetHeader=Qi,deflate.deflate=Vr,deflate.deflateEnd=bt,deflate.deflateSetDictionary=zt,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;const c=(l,g)=>Object.prototype.hasOwnProperty.call(l,g);return common.assign=function(l){const g=Array.prototype.slice.call(arguments,1);for(;g.length;){const v=g.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(const b in v)c(v,b)&&(l[b]=v[b])}}return l},common.flattenChunks=l=>{let g=0;for(let b=0,_=l.length;b<_;b++)g+=l[b].length;const v=new Uint8Array(g);for(let b=0,_=0,E=l.length;b<E;b++){let w=l[b];v.set(w,_),_+=w.length}return v},common}var strings={},hasRequiredStrings;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;let c=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}const l=new Uint8Array(256);for(let v=0;v<256;v++)l[v]=v>=252?6:v>=248?5:v>=240?4:v>=224?3:v>=192?2:1;l[254]=l[254]=1,strings.string2buf=v=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(v);let b,_,E,w,O,U=v.length,V=0;for(w=0;w<U;w++)_=v.charCodeAt(w),(_&64512)===55296&&w+1<U&&(E=v.charCodeAt(w+1),(E&64512)===56320&&(_=65536+(_-55296<<10)+(E-56320),w++)),V+=_<128?1:_<2048?2:_<65536?3:4;for(b=new Uint8Array(V),O=0,w=0;O<V;w++)_=v.charCodeAt(w),(_&64512)===55296&&w+1<U&&(E=v.charCodeAt(w+1),(E&64512)===56320&&(_=65536+(_-55296<<10)+(E-56320),w++)),_<128?b[O++]=_:_<2048?(b[O++]=192|_>>>6,b[O++]=128|_&63):_<65536?(b[O++]=224|_>>>12,b[O++]=128|_>>>6&63,b[O++]=128|_&63):(b[O++]=240|_>>>18,b[O++]=128|_>>>12&63,b[O++]=128|_>>>6&63,b[O++]=128|_&63);return b};const g=(v,b)=>{if(b<65534&&v.subarray&&c)return String.fromCharCode.apply(null,v.length===b?v:v.subarray(0,b));let _="";for(let E=0;E<b;E++)_+=String.fromCharCode(v[E]);return _};return strings.buf2string=(v,b)=>{const _=b||v.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(v.subarray(0,b));let E,w;const O=new Array(_*2);for(w=0,E=0;E<_;){let U=v[E++];if(U<128){O[w++]=U;continue}let V=l[U];if(V>4){O[w++]=65533,E+=V-1;continue}for(U&=V===2?31:V===3?15:7;V>1&&E<_;)U=U<<6|v[E++]&63,V--;if(V>1){O[w++]=65533;continue}U<65536?O[w++]=U:(U-=65536,O[w++]=55296|U>>10&1023,O[w++]=56320|U&1023)}return g(O,w)},strings.utf8border=(v,b)=>{b=b||v.length,b>v.length&&(b=v.length);let _=b-1;for(;_>=0&&(v[_]&192)===128;)_--;return _<0||_===0?b:_+l[v[_]]>b?_:b},strings}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=c,zstream}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;const c=requireDeflate$1(),l=requireCommon(),g=requireStrings(),v=requireMessages(),b=requireZstream(),_=Object.prototype.toString,{Z_NO_FLUSH:E,Z_SYNC_FLUSH:w,Z_FULL_FLUSH:O,Z_FINISH:U,Z_OK:V,Z_STREAM_END:C,Z_DEFAULT_COMPRESSION:q,Z_DEFAULT_STRATEGY:ue,Z_DEFLATED:se}=requireConstants();function Y(P){this.options=l.assign({level:q,method:se,chunkSize:16384,windowBits:15,memLevel:8,strategy:ue},P||{});let z=this.options;z.raw&&z.windowBits>0?z.windowBits=-z.windowBits:z.gzip&&z.windowBits>0&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;let oe=c.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(oe!==V)throw new Error(v[oe]);if(z.header&&c.deflateSetHeader(this.strm,z.header),z.dictionary){let A;if(typeof z.dictionary=="string"?A=g.string2buf(z.dictionary):_.call(z.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(z.dictionary):A=z.dictionary,oe=c.deflateSetDictionary(this.strm,A),oe!==V)throw new Error(v[oe]);this._dict_set=!0}}Y.prototype.push=function(P,z){const oe=this.strm,A=this.options.chunkSize;let le,$;if(this.ended)return!1;for(z===~~z?$=z:$=z===!0?U:E,typeof P=="string"?oe.input=g.string2buf(P):_.call(P)==="[object ArrayBuffer]"?oe.input=new Uint8Array(P):oe.input=P,oe.next_in=0,oe.avail_in=oe.input.length;;){if(oe.avail_out===0&&(oe.output=new Uint8Array(A),oe.next_out=0,oe.avail_out=A),($===w||$===O)&&oe.avail_out<=6){this.onData(oe.output.subarray(0,oe.next_out)),oe.avail_out=0;continue}if(le=c.deflate(oe,$),le===C)return oe.next_out>0&&this.onData(oe.output.subarray(0,oe.next_out)),le=c.deflateEnd(this.strm),this.onEnd(le),this.ended=!0,le===V;if(oe.avail_out===0){this.onData(oe.output);continue}if($>0&&oe.next_out>0){this.onData(oe.output.subarray(0,oe.next_out)),oe.avail_out=0;continue}if(oe.avail_in===0)break}return!0},Y.prototype.onData=function(P){this.chunks.push(P)},Y.prototype.onEnd=function(P){P===V&&(this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=P,this.msg=this.strm.msg};function pe(P,z){const oe=new Y(z);if(oe.push(P,!0),oe.err)throw oe.msg||v[oe.err];return oe.result}function ce(P,z){return z=z||{},z.raw=!0,pe(P,z)}function X(P,z){return z=z||{},z.gzip=!0,pe(P,z)}return deflate$1.Deflate=Y,deflate$1.deflate=pe,deflate$1.deflateRaw=ce,deflate$1.gzip=X,deflate$1.constants=requireConstants(),deflate$1}var hasRequiredZegoExpressLogger;function requireZegoExpressLogger(){return hasRequiredZegoExpressLogger||(hasRequiredZegoExpressLogger=1,function(c,l){(function(g,v){c.exports=v(requireDeflate())})(typeof self<"u"?self:commonjsGlobal,function(g){return b=[function(E,w){E.exports=g},,function(E,de,O){O.r(de),O.d(de,"ZegoLogger",function(){return lt}),O.d(de,"ZegoDataReport",function(){return P}),O.d(de,"createZegoWebSocket",function(){return ce}),O.d(de,"LoggerStateCenter",function(){return q}),ue.getInstance=function(){return ue.instance||(ue.instance=new ue).u(),ue.instance},ue.prototype.u=function(){},Object.defineProperty(ue.prototype,"testEnvironment",{get:function(){return this.h},set:function(H){this.h=H},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"ENV",{get:function(){return this.v},set:function(H){this.v=H},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"debug",{get:function(){return this.g},set:function(H){this.g=H},enumerable:!1,configurable:!0}),ue.instance=new ue;var U,V,C,q=ue;function ue(){this.h=!0,this.v=0,this.g=!0}(de=we=we||{})[de.IE=0]="IE",de[de.FIREFOX=1]="FIREFOX",de[de.CHROME=2]="CHROME",de[de.SAFARI=3]="SAFARI",de[de.OPERA=4]="OPERA",de[de.WEIXIN=5]="WEIXIN",de[de.WEIXINMINI=6]="WEIXINMINI",de[de.UNKOWN=7]="UNKOWN",(we=U=U||{})[we.BROWSER=0]="BROWSER",we[we.WEIXINMINI=1]="WEIXINMINI",V=V||{},V[V.DEFAULT=0]="DEFAULT",(de=C=C||{})[de.DISABLE=0]="DISABLE",de[de.WEBSOCKET=1]="WEBSOCKET",de[de.HTTPS=2]="HTTPS";var se={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},Y=(pe.prototype.init=function(){var H=this;this.O&&(this.readyState=0,this.O.onOpen(function(y){H.readyState=H.O.readyState,typeof H.onopen=="function"&&(H.onopen(y),H.O.onClose(function(x){H.readyState=H.O.readyState,typeof H.onclose=="function"&&H.onclose(x)}),H.O.onMessage(function(x){typeof H.onmessage=="function"&&H.onmessage(x)}))}),this.O.onError(function(y){H.readyState=H.O.readyState,typeof H.onerror=="function"&&H.onerror(y)}))},pe.prototype.onopen=function(H){},pe.prototype.onerror=function(H){},pe.prototype.onclose=function(H){},pe.prototype.onmessage=function(H){},pe.prototype.send=function(H){this.O&&this.O.send({data:H})},pe.prototype.close=function(){this.O&&this.O.close()},pe);function pe(H,y){this.url=H,this.readyState=3,this.init()}function ce(H,y,x){return y%2===U.BROWSER?(y=H,(x=x)?x.createSocket(y,1):new WebSocket(y)):new Y(H)}var X=function(){return(X=Object.assign||function(H){for(var y,x=1,I=arguments.length;x<I;x++)for(var B in y=arguments[x])Object.prototype.hasOwnProperty.call(y,B)&&(H[B]=y[B]);return H}).apply(this,arguments)},P=(z.prototype.newReport=function(H,y){this.dataStatistics[H]={event_time:Date.now(),time_consumed:0,seq:H,error:0,message:"success",event:y,events:[]}},z.prototype.addMsgExt=function(H,y){this.dataStatistics[H]?this.dataStatistics[H].msg_ext=y:console.warn("".concat(H," not exist"))},z.prototype.addMsgInfo=function(H,y){this.dataStatistics[H]?Object.assign(this.dataStatistics[H],y):console.warn("".concat(H," not exist"))},z.prototype.eventStart=function(H,y){this.dataStatistics[H]?this.dataStatistics[H].events==null?this.logger.warn("zd.es.0 no events"):this.dataStatistics[H].events.push({event:y,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no seq match")},z.prototype.eventEnd=function(H,y,x){if(this.dataStatistics[H]){var I=this.dataStatistics[H].events;if(I&&I.length!==0){for(var B=I.length-1;0<=B;B--)if(I[B].event==y&&I[B].time_consumed==0){I[B].time_consumed=Date.now()-I[B].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},z.prototype.eventEndWithMsg=function(H,y,x){if(this.dataStatistics[H]){var I=this.dataStatistics[H].events;if(I){for(var B=I.length-1;0<=B;B--)if(I[B].event==y&&I[B].time_consumed==0){I[B].time_consumed=Date.now()-I[B].event_time,I[B].msg_ext==null&&(I[B].msg_ext={}),I[B].msg_ext=X({},x);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},z.prototype.eventEndWithMsgInfo=function(H,y,x){if(this.dataStatistics[H]){var I=this.dataStatistics[H].events;if(I){for(var B=I.length-1;0<=B;B--)if(I[B].event==y&&I[B].time_consumed==0){I[B].time_consumed=Date.now()-I[B].event_time,Object.assign(I[B],x);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},z.prototype.addEventInfo=function(H,y,x,I){if(this.dataStatistics[H]){var B=this.dataStatistics[H].events;if(B==null)this.logger.warn("zd.aei.0 no events");else for(var me=B.length-1;0<=me;me--)if(B[me].event==y&&B[me].time_consumed!=null){B[me].msg_ext==null?B[me].msg_ext={}:B[me].msg_ext&&(B[me].msg_ext[x]=I);break}}else this.logger.warn("zd.aei.0 no seq match")},z.prototype.addEventMsg=function(H,y,x,I){if(this.dataStatistics[H]){var B=this.dataStatistics[H].events;if(B==null)this.logger.warn("zd.aem.0 no events");else for(var me=B.length-1;0<=me;me--)if(B[me].event==y){B[me][x]=I;break}}else this.logger.warn("zd.aem.0 no seq match")},z.prototype.addEvent=function(H,y,x){this.dataStatistics[H]?this.dataStatistics[H].events&&(x?this.dataStatistics[H].events.push({event:y,event_time:Date.now(),msg_ext:x}):this.dataStatistics[H].events.push({event:y,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},z.prototype.uploadReport=function(H,y,x,I){var B=this.dataStatistics[H];B!=null&&(y&&(B.event=y),B.time_consumed=Date.now()-B.event_time,x&&this.addMsgInfo(H,{error:x.code,message:x.message||x.msg+" "+(I||"")}),this.logger.report(B),delete this.dataStatistics[H])},z);function z(H){this.dataStatistics={},this.logger=H}var oe,A=["00","01","02","03","04","05","06","07","08","09"];function le(){var H=new Date;return[H.getFullYear()+"/",(A[H.getMonth()+1]||H.getMonth()+1)+"/",(A[H.getDate()]||H.getDate())+" ",(A[H.getHours()]||H.getHours())+":",(A[H.getMinutes()]||H.getMinutes())+":",A[H.getSeconds()]||H.getSeconds(),"."+H.getTime()%1e3].join("")}(we=oe=oe||{}).WEBSOCKET_STATE_CHANGE="zl.net.wsc",we.OPEN_WS="zl.net.opws";var $=function(H,y,x){if(x||arguments.length===2)for(var I,B=0,me=y.length;B<me;B++)!I&&B in y||((I=I||Array.prototype.slice.call(y,0,B))[B]=y[B]);return H.concat(I||Array.prototype.slice.call(y))},k=(Object.defineProperty(j.prototype,"url",{get:function(){return this.j.url},set:function(H){this.j.url=H},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"strategy",{get:function(){return this._.strategy},enumerable:!1,configurable:!0}),j.prototype.setStrategy=function(H){this._.setStrategy(H),this.S=this._.build()},j.prototype.addRemoteWsLog=function(H){var y;if(this.j.env!=U.BROWSER)throw new Error("cannot use net strategy on  mini program");this.closed()&&(y=this.url,this.url="",this.openWebSocketLogServer(y)),this.k.push(H),this.connected()&&this.S&&this.S.active()},j.prototype.stopWebSocketServer=function(){this.O&&(this.O.onclose=null,this.O.onerror=null,this.O.close(),this.O=null)},j.prototype.P=function(){this.O&&this.j.useStrategy&&(this._.setWs(this.O),this._.setCache(this.k),this.S=this._.build())},j.prototype.N=function(H){for(var y=[],x=1;x<arguments.length;x++)y[x-1]=arguments[x];var I=this.T,B="";switch(H){case"onconnecting":this.T==="never_opened"?this.T="first_connecting":this.T="reconnecting";break;case"onopen":this.T="connected";break;case"onclosed":this.T="closed";var me=y[0];me&&(B+=" close code=".concat(me.code));break;case"onerror":this.T="error"}H=oe.WEBSOCKET_STATE_CHANGE+" log ws state change: ".concat(I," -> ").concat(this.T),B&&(H+=B),this.D.info(H)},j.prototype.openWebSocketLogServer=function(H){var y=this;this.url!=H&&((this.url&&this.url!==""||this.T==="never_opened")&&this.D.info(oe.OPEN_WS+" log url change to: ".concat(H)),this.url=H)&&(this.stopWebSocketServer(),this.O=ce(H,this.j.env,this.I),this.P(),this.N("onconnecting"),this.O.onopen=function(){var x;y.j.useStrategy&&(x=y.S)!=null&&x.active(),y.N("onopen")},this.O.onclose=function(){for(var x=[],I=0;I<arguments.length;I++)x[I]=arguments[I];console.warn("onclose   websocket error:",x),y.N.apply(y,$(["onclosed"],x,!1))},this.O.onmessage=function(){},this.O.onerror=function(){for(var x=[],I=0;I<arguments.length;I++)x[I]=arguments[I];console.warn("open log websocket error:",x),y.N("onerror")})},j.prototype.closed=function(){return this.O==null||this.O.readyState==2||this.O.readyState==3},j.prototype.connected=function(){return this.O!==null&&this.O.readyState==1},j.prototype.connecting=function(){return this.O!==null&&this.O.readyState==0},j.prototype.wsSend=function(H){this.O&&this.O.send(H)},j.prototype.destroy=function(){this.O=null},j);function j(H,y,x,I){this.k=H,this.j=y,this.D=x,this.I=I,this.O=null,this.T="never_opened",this._=new xe,this.S=null}Z.prototype.active=function(){var H=this;this.A&&this.A.readyState===1&&this.k.size()!==0&&this.q.canSendLog()&&(this.q.getLog().forEach(function(y){H.A.send(y)}),this.q.onSendLog())};var K=Z;function Z(H,y,x){this.A=H,this.k=y,this.q=x,this.q.onCanSendActive=this.active.bind(this)}function J(H){this.cache=H}D=function(H,y){return(D=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)},function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}D(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}(L,G=J),L.prototype.getLog=function(){return this.cache.clear()},L.prototype.canSendLog=function(){return 0<this.cache.size()},L.prototype.onSendLog=function(){};var D,G,M=L;function L(H){return G.call(this,H)||this}W=function(H,y){return(W=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)},function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}W(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}(ne,ve=J),ne.prototype.canSendLog=function(){return!this.locked&&0<this.cache.size()},ne.prototype.getLog=function(){for(var H=[],y=0;y<this.maxPacketLen-4e3;){var x=this.cache.getOneLogPacket();if(!x||x.length<=0)break;y+=x.length||0,H.push(x)}return H},ne.prototype.onSendLog=function(){var H=this;this.locked=!0,setTimeout(function(){H.locked=!1,H.onCanSendActive&&H.onCanSendActive()},this.maxDelay)};var W,ve,de=ne;function ne(){var H=ve!==null&&ve.apply(this,arguments)||this;return H.maxDelay=10,H.maxPacketLen=20480,H.locked=!1,H}he=function(H,y){return(he=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)},function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}he(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}(Fe,_e=de);var he,_e,Ue=Fe;function Fe(H){return H=_e.call(this,H)||this,H.maxDelay=10,H.maxPacketLen=20480,H}ze=function(H,y){return(ze=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)};var ze,Me;(function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}ze(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)})(We,Me=de);function We(){return Me!==null&&Me.apply(this,arguments)||this}rt=function(H,y){return(rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)};var rt,dt;(function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}rt(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)})(ht,dt=de);function ht(){return dt!==null&&dt.apply(this,arguments)||this}Pt=function(H,y){return(Pt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)};var Pt,ye;(function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}Pt(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)})(De,ye=de);function De(){return ye!==null&&ye.apply(this,arguments)||this}Object.defineProperty(Je.prototype,"strategy",{get:function(){return this.q},enumerable:!1,configurable:!0}),Je.prototype.setWs=function(H){this.A=H},Je.prototype.setCache=function(H){this.k=H},Je.prototype.setStrategy=function(H){H&&(this.q=H)},Je.prototype.build=function(){if(this.A&&this.k)return this.q!==V.DEFAULT?new K(this.A,this.k,new M(this.k)):new K(this.A,this.k,new Ue(this.k));throw new Error("cannot build log sender")};var xe=Je;function Je(){this.q=V.DEFAULT}re.R=function(){return!(!window||!window.localStorage)},re.bin2hex=function(H){for(var y,x="",I=0,B=(H+="").length;I<B;I++)x+=(y=H.charCodeAt(I).toString(16)).length<2?"0"+y:y;return x},re.getCanvasFingerprint=function(I){var y=document.createElement("canvas"),x=y.getContext("2d"),x=(x.textBaseline="top",x.font="14px 'Arial'",x.fillStyle="#f60",x.fillRect(125,1,62,20),x.fillStyle="#069",x.fillText(I,2,15),x.fillStyle="rgba(102, 204, 0, 0.7)",x.fillText(I,4,17),y.toDataURL().replace("data:image/png;base64,","")),I=atob(x);return this.bin2hex(I.slice(-16,-12))},re.generateUUID=function(){var H,y,x=localStorage.getItem(this.C);return x||(H=new Date().getTime(),x="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var B=(H+16*Math.random())%16|0;return H=Math.floor(H/16),(I=="x"?B:3&B|8).toString(36)}),y=this.getCanvasFingerprint("hello, zego")+x.slice(8),localStorage.setItem(this.C,y),x)},re.id=function(){var H;return re.R()?((H=localStorage.getItem(this.C))||(H=re.generateUUID(),localStorage.setItem(this.C,H)),H):""},re.C="z_deviceID";var ut=re;function re(){}var Se=function(){this.url="",this.env=U.BROWSER,this.useStrategy=!0,this.token="",this.deviceid=ut.id()};Object.defineProperty(Ke.prototype,"buffer",{get:function(){return this.queue},set:function(H){this.queue=H},enumerable:!1,configurable:!0}),Ke.prototype.push=function(H){if(!H)throw new Error("item null!");H&&this.queue.push(H)},Ke.prototype.pop=function(){return this.queue.shift()},Ke.prototype.front=function(){return this.queue[0]};var we=Ke;function Ke(){this.queue=[]}je=function(H,y){return(je=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)};var je,St,xt=function(){return(xt=Object.assign||function(H){for(var y,x=1,I=arguments.length;x<I;x++)for(var B in y=arguments[x])Object.prototype.hasOwnProperty.call(y,B)&&(H[B]=y[B]);return H}).apply(this,arguments)},Ht=(function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}je(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}($t,St=we),$t.prototype.size=function(){return this.queue.length},$t.prototype.getOneLogPacket=function(){var H="";if(this.size()){var y=JSON.parse(this.queue[this.queue.length-1]).userid,x=this.j.userid||y;if(x){for(;0<this.queue.length;){if(4e3<(H+this.queue[0]).length)return H;var I=JSON.parse(this.queue[0]),I=xt(xt({},I),{userid:I.userid||x,roomid:I.roomid||this.j.roomid,userName:I.userName||this.j.userName}),H=H+JSON.stringify(I)+`
`;this.queue.shift()}return H===""?void 0:H}}},$t.prototype.clear=function(){for(var H=[];0<this.queue.length;){var y=this.getOneLogPacket();if(!y)break;H.push(y)}return H},$t);function $t(H){var y=St.call(this)||this;return y.j=H,y}var ci=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},He=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},Ee=(it.prototype.save=function(H){return this.J.save(this.M,{log:H})},it.prototype.queryList=function(H){return this.J.queryByCursor(this.M,H)},it.prototype.delete=function(H){return this.J.deleteItems(this.M,H)},it.prototype.storedBytesSize=function(){var H=this;return new Promise(function(y,x){return ci(H,void 0,void 0,function(){var I,B;return He(this,function(me){return I=this.J.openCursor(this.M),B=0,I.onsuccess=function(qe){var Qe,qe=(qe=qe.target)==null?void 0:qe.result;qe?(Qe=qe.value,B+=Qe.log.length,qe.continue()):y(B)},I.onerror=function(Oe){x(Oe)},[2]})})})},it.prototype.lines=function(){return this.J.lines(this.M)},it.prototype.deleteByCount=function(H){return this.J.deleteByCount(this.M,H)},it.prototype.deleteAll=function(){return this.J.deleteAll(this.M)},it);function it(H){this.J=H,this.M="zego_log"}var nt=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},tt=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},Et=(Nt.prototype.openDB=function(H){return nt(this,void 0,void 0,function(){var y,x,I=this;return tt(this,function(B){switch(B.label){case 0:return y=window.indexedDB.open(H.database,H.version),x=this,[4,new Promise(function(me){y.onupgradeneeded=function(Oe){var Qe=Oe.target&&Oe.target.result;H.tableList.forEach(function(qe){var yt;Qe.objectStoreNames.contains(qe.tableName)||(yt=Qe.createObjectStore(qe.tableName,{keyPath:"id",autoIncrement:!0}),qe.tableItems.forEach(function(Re){Re.index&&yt.createIndex(Re.itemName,Re.itemName,{unique:Re.unique})}))})},y.onsuccess=function(Oe){Oe=Oe.target&&Oe.target.result,I.L=Oe,me(y)}})];case 1:return x.W=B.sent(),[2]}})})},Nt.prototype.B=function(){if(!this.W&&!this.L)throw new Error("indexDB not open")},Nt.prototype.save=function(H,y){var x=this;return new Promise(function(I,B){return nt(x,void 0,void 0,function(){var me,Oe;return tt(this,function(Qe){return this.B(),me=this.L.transaction([H],"readwrite").objectStore(H),(Oe=me.add(y)).onsuccess=function(qe){I(Oe.result)},Oe.onerror=function(qe){B("save item fail")},[2]})})})},Nt.prototype.update=function(H,y){var x=this;return new Promise(function(I,B){x.B(),I()})},Nt.prototype.queryById=function(H,y){var x=this;return new Promise(function(I,B){return nt(x,void 0,void 0,function(){var me,Oe;return tt(this,function(Qe){return this.B(),me=this.L.transaction([H]).objectStore(H),(Oe=me.get(y)).onsuccess=function(qe){Oe.result?I(Oe.result):I(null)},Oe.onerror=function(qe){B()},[2]})})})},Nt.prototype.queryByCursor=function(H,y){var x=this;return new Promise(function(I,B){return nt(x,void 0,void 0,function(){var me,Oe;return tt(this,function(Qe){return this.B(),Oe=this.L.transaction([H]).objectStore(H),me=[],(Oe=Oe.openCursor()).onsuccess=function(qe){qe=(qe=qe.target)==null?void 0:qe.result,qe&&(!y||me.length<y)?(me.push(qe.value),qe.continue()):I(me)},Oe.onerror=function(qe){B()},[2]})})})},Nt.prototype.lines=function(H){var y=this;return new Promise(function(x,I){return nt(y,void 0,void 0,function(){var B,me;return tt(this,function(Oe){return this.B(),B=this.L.transaction([H]).objectStore(H),B=B.openCursor(),me=0,B.onsuccess=function(Qe){Qe=(Qe=Qe.target)==null?void 0:Qe.result,Qe?(me++,Qe.continue()):x(me)},B.onerror=function(Qe){I()},[2]})})})},Nt.prototype.openCursor=function(H){return this.B(),this.L.transaction([H]).objectStore(H).openCursor()},Nt.prototype.deleteById=function(H,y){var x=this;return new Promise(function(I,B){return nt(x,void 0,void 0,function(){var me;return tt(this,function(Oe){return this.B(),me=this.L.transaction([H],"readwrite").objectStore(H),(me=me.delete(y)).onsuccess=function(Qe){I()},me.onerror=function(Qe){B()},[2]})})})},Nt.prototype.deleteByCount=function(H,y){var x=this;return new Promise(function(I,B){return nt(x,void 0,void 0,function(){var me,Oe;return tt(this,function(Qe){switch(Qe.label){case 0:this.B(),me=8192,Qe.label=1;case 1:return 0<y?[4,this.queryByCursor(H,Math.min(y,me))]:[3,4];case 2:return(Oe=Qe.sent()).length===0?[3,4]:(y-=me,[4,this.deleteItems(H,Oe)]);case 3:return Qe.sent(),[3,1];case 4:return I(),[2]}})})})},Nt.prototype.deleteAll=function(H){var y=this;return new Promise(function(x,I){return nt(y,void 0,void 0,function(){var B;return tt(this,function(me){return this.B(),B=this.L.transaction([H],"readwrite").objectStore(H),(B=B.clear()).onsuccess=function(Oe){x()},B.onerror=function(Oe){I()},[2]})})})},Nt.prototype.deleteItems=function(H,y){var x=this;return new Promise(function(I){return nt(x,void 0,void 0,function(){var B;return tt(this,function(me){switch(me.label){case 0:return this.B(),B=this.L.transaction([H],"readwrite").objectStore(H),[4,Promise.all(y.map(function(Oe){return new Promise(function(Qe,qe){var yt=B.delete(Oe.id);yt.onsuccess=function(Re){Qe()},yt.onerror=function(Re){qe()}})}))];case 1:return me.sent(),I(),[2]}})})})},Nt);function Nt(){}var Vt={version:1,database:"zego_logger_db",tableList:[{tableName:"zego_log",tableItems:[{itemName:"log",index:!1,unique:!1}]}]};It=function(H,y){return(It=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,I){x.__proto__=I}:function(x,I){for(var B in I)Object.prototype.hasOwnProperty.call(I,B)&&(x[B]=I[B])}))(H,y)},function(H,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function x(){this.constructor=H}It(H,y),H.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}(Si,ri=we);var It,ri,gi=Si;function Si(){return ri!==null&&ri.apply(this,arguments)||this}var Hi=function(){return(Hi=Object.assign||function(H){for(var y,x=1,I=arguments.length;x<I;x++)for(var B in y=arguments[x])Object.prototype.hasOwnProperty.call(y,B)&&(H[B]=y[B]);return H}).apply(this,arguments)},Gi=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},Qi=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},br=(pr.prototype.pushTask=function(H,y,x,I,B){H={task:H},y&&(H=Hi(Hi({},H),{args:y})),x&&(H=Hi(Hi({},H),{successCallback:x})),I&&(H=Hi(Hi({},H),{errorCallback:I})),B&&(H=Hi(Hi({},H),{completeCallback:B})),this.G.push(H)},pr.prototype.X=function(H){return Gi(this,void 0,void 0,function(){var y,x;return Qi(this,function(I){switch(I.label){case 0:y=null,I.label=1;case 1:return I.trys.push([1,4,5,6]),H&&H.args?y=H.task.apply(H,H.args):H&&(y=H.task()),y instanceof Promise?[4,y]:[3,3];case 2:y=I.sent(),I.label=3;case 3:return H.successCallback&&H.successCallback(y),[3,6];case 4:if(x=I.sent(),H.errorCallback)return H.errorCallback(x),[3,6];throw x;case 5:return H.completeCallback&&H.completeCallback(),[7];case 6:return[2]}})})},pr.prototype.runATask=function(){return Gi(this,void 0,void 0,function(){var H;return Qi(this,function(y){switch(y.label){case 0:return this.G.length<=0?[2]:(H=this.G.shift(),H?[4,this.X(H)]:[3,2]);case 1:y.sent(),y.label=2;case 2:return[2]}})})},pr.prototype.runAllTask=function(){return Gi(this,void 0,void 0,function(){var H;return Qi(this,function(y){switch(y.label){case 0:return 0<this.G.length?(H=this.G.shift(),H?[4,this.X(H)]:[3,2]):[3,3];case 1:y.sent(),y.label=2;case 2:return[3,0];case 3:return[2]}})})},pr.prototype.size=function(){return this.G.length},pr);function pr(){this.G=[]}var Vr=O(0),bt=(zt.prototype.writeLine=function(H){H&&H!==""&&this.F.push(H)},zt.prototype.saveAs=function(H,y){var x=document.createElement("a");x.href=URL.createObjectURL(H),x.download=y,x.click()},zt.prototype.createZip=function(){var H="",H=(0<this.F.length&&(H=this.F.join(`
`),this.F=[]),Object(Vr.deflate)(H)),H=this.uint8arrayToBase64(H);return new Blob([H],{type:"text/plain;charset=utf-8"})},zt.prototype.uint8arrayToBase64=function(H){for(var y,x=0,I=H.length,B="";x<I;)y=H.subarray(x,Math.min(x+32768,I)),B+=String.fromCharCode.apply(null,Array.from(y)),x+=32768;return btoa(B)},zt);function zt(){this.F=[]}var R=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},at=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},ke=(ft.prototype.H=function(){return!!(this.j.appid&&this.j.userid&&this.j.userid!==""&&this.j.token&&this.j.token!==""&&this.j.deviceid&&this.j.deviceid!=="")},ft.prototype.setUploadUrl=function(H){this.U=H},ft.prototype.upload=function(H){return R(this,void 0,void 0,function(){var y=this;return at(this,function(x){if(this.H())return[2,new Promise(function(I,B){return R(y,void 0,void 0,function(){var me,Oe=this;return at(this,function(Qe){switch(Qe.label){case 0:return me=function(){return R(Oe,void 0,void 0,function(){var qe,yt,Re=this;return at(this,function(_t){switch(_t.label){case 0:this.Z=!0,(qe=new FormData).append("logs",H),qe.append("hello",this.j.appid.toString()),qe.append("appid",this.j.appid.toString()),qe.append("uin",this.j.userid.toString()),qe.append("timestamp",new Date().getTime().toString()),qe.append("token",this.j.token),qe.append("deviceid",this.j.deviceid),_t.label=1;case 1:return _t.trys.push([1,3,4,5]),[4,Qt.post(this.U,qe,this.proxyCtrl)];case 2:if((yt=_t.sent()).code!==0)throw new Error("upload logs failed, error=".concat(JSON.stringify(yt)));return[3,5];case 3:return yt=_t.sent(),B(yt),[3,5];case 4:return setTimeout(function(){return R(Re,void 0,void 0,function(){return at(this,function(ii){switch(ii.label){case 0:return this.Z=!1,[4,this.K.runATask()];case 1:return ii.sent(),[2]}})})},100),[7];case 5:return[2]}})})},this.Z?(this.K.pushTask(me,[],function(){I()},function(qe){B(qe)}),[3,3]):[3,1];case 1:return[4,me()];case 2:Qe.sent(),I(),Qe.label=3;case 3:return[2]}})})})];throw new Error("cannot upload logs, please login room before you upload logs.")})})},ft);function ft(H,y){this.j=H,this.proxyCtrl=y,this.V="detaillog-global.zego.im",this.U="https://".concat(this.V,"/log/userupload"),this.K=new br,this.Z=!1}var Ge=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},Tt=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},Qt=(wt.post=function(H,y,x){var I=this;return new Promise(function(B,me){return Ge(I,void 0,void 0,function(){var Oe;return Tt(this,function(Qe){try{x?x.startHttpRequest({location:H,body:y,method_no:2,headers:[{name:"Content-Type",val:"multipart/form-data"}],serviceType:2},function(qe){qe.status_code===200?B(qe.body):me("request fail. status="+qe.status_code)},function(qe){me("request fail. result: "+JSON.stringify(qe))}):((Oe=new XMLHttpRequest).open("POST",H,!0),Oe.responseType="json",Oe.send(y),Oe.onreadystatechange=function(){Oe.readyState===XMLHttpRequest.DONE&&(Oe.status===200?B(Oe.response):me("request fail. status="+Oe.status))})}catch(qe){me(qe)}return[2]})})})},wt);function wt(){}var Ut=function(){return(Ut=Object.assign||function(H){for(var y,x=1,I=arguments.length;x<I;x++)for(var B in y=arguments[x])Object.prototype.hasOwnProperty.call(y,B)&&(H[B]=y[B]);return H}).apply(this,arguments)},di=(Ri.prototype.build=function(H){var y=Ut(Ut({},JSON.parse(H)),{sdkid:this.Y});if(++this.$%100==0)return(H=JSON.stringify(y)).substring(1,H.length-1);for(x in y)this.tt.includes(x)||(y[x]===this.nt[x]?delete y[x]:this.nt[x]=y[x]);var x,I=[];for(x in y)this.tt.includes(x)?I.push(y[x]):I.push("".concat(x,":").concat(y[x]));return I.join(",")},Ri.prototype.buildFullMessageLog=function(H){return H=JSON.parse(H),H=Ut(Ut(Ut({},this.nt),H),{sdkid:this.Y}),JSON.stringify(H)},Ri);function Ri(H){this.j=H,this.nt={},this.tt=["time","action","content","sdkid"],this.$=0,this.Y=(H=5,crypto.getRandomValues(new Uint8Array(H)).reduce((y,x)=>y+=(x&=63)<36?x.toString(36):x<62?(x-26).toString(36).toUpperCase():62<x?"-":"_",""))}var oi=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},Ii=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},yi=(Object.defineProperty(hi.prototype,"dbOpened",{get:function(){return this.it},enumerable:!1,configurable:!0}),Object.defineProperty(hi.prototype,"dbTryOpened",{get:function(){return this.et},enumerable:!1,configurable:!0}),hi.prototype.rt=function(){return oi(this,void 0,void 0,function(){var H;return Ii(this,function(y){switch(y.label){case 0:return[4,this.ot.lines()];case 1:return 153600<(H=y.sent())?[4,this.ot.deleteByCount(H/2)]:[3,3];case 2:y.sent(),y.label=3;case 3:return[2]}})})},hi.prototype.makeStorageSpaceUpload=function(){return oi(this,void 0,void 0,function(){var H,y=this;return Ii(this,function(x){return this.st?(H=function(){return oi(y,void 0,void 0,function(){return Ii(this,function(I){switch(I.label){case 0:return[4,this.ot.lines()];case 1:return 3072<I.sent()?[4,this.ut()]:[3,3];case 2:I.sent(),I.label=3;case 3:return[2]}})})},[2,new Promise(function(I,B){return oi(y,void 0,void 0,function(){var me;return Ii(this,function(Oe){switch(Oe.label){case 0:return this.dbOpened?[3,1]:(this.ct.pushTask(H,[],function(){I()},function(Qe){B(Qe)}),[3,5]);case 1:return Oe.trys.push([1,3,,4]),[4,H()];case 2:return Oe.sent(),[3,4];case 3:return me=Oe.sent(),B(me),[2];case 4:I(),Oe.label=5;case 5:return[2]}})})})]):[2]})})},hi.prototype.openDB=function(){return oi(this,void 0,void 0,function(){return Ii(this,function(H){switch(H.label){case 0:return this.et?[2]:(this.et=!0,[4,this.J.openDB(Vt)]);case 1:return H.sent(),this.it=!0,[4,this.rt()];case 2:return H.sent(),[4,this.ct.runAllTask()];case 3:return H.sent(),[4,this.ht.runATask()];case 4:return H.sent(),this.ft(),[2]}})})},hi.prototype.at=function(){return this.st&&hi.isEnvSupport()&&!this.it&&!this.et},hi.prototype.enable=function(){this.st||(this.st=!0,this.at()&&this.openDB())},hi.prototype.saveLog=function(H){this.at()&&this.openDB(),this.k.push(this.lt.build(H)),this.ft()},hi.prototype.removeLogList=function(H){return oi(this,void 0,void 0,function(){return Ii(this,function(y){switch(y.label){case 0:return H.length===0?[2]:[4,this.ot.delete(H)];case 1:return y.sent(),[2]}})})},hi.prototype.empty=function(){return oi(this,void 0,void 0,function(){return Ii(this,function(H){switch(H.label){case 0:return[4,this.ot.queryList(1)];case 1:return[2,H.sent().length===0]}})})},hi.prototype.ft=function(){var H,y=this;this.st&&this.dbOpened&&!this.vt&&(this.vt=!0,(H=function(){var x=y.k.front();x?x&&y.ot.save(x).then(function(){y.k.pop(),H()}).catch(function(I){y.vt=!1,console.error(I)}):y.vt=!1})())},hi.isEnvSupport=function(){return!!(window&&"indexedDB"in window)},hi.prototype.dt=function(){return oi(this,void 0,void 0,function(){var H,y,x,I;return Ii(this,function(B){switch(B.label){case 0:return[4,this.ot.lines()];case 1:H=B.sent(),y=3145728,x=function(){var me,Oe,Qe;return Ii(this,function(qe){switch(qe.label){case 0:return[4,I.ot.queryList(Math.min(y,H))];case 1:return me=qe.sent(),H-=y,me.length<=0?[2,"break"]:(Oe=new bt,me.forEach(function(yt){Oe.writeLine(yt.log)}),Qe=Oe.createZip(),[4,I.wt.upload(Qe)]);case 2:return qe.sent(),[4,I.ot.delete(me)];case 3:return qe.sent(),[2]}})},I=this,B.label=2;case 2:return 0<H?[5,x()]:[3,4];case 3:return B.sent()==="break"?[3,4]:[3,2];case 4:return[2]}})})},hi.prototype.ut=function(){var H=this;return new Promise(function(y,x){return oi(H,void 0,void 0,function(){var I,B=this;return Ii(this,function(me){return I=function(){return oi(B,void 0,void 0,function(){return Ii(this,function(Oe){switch(Oe.label){case 0:return[4,this.dt()];case 1:return Oe.sent(),[2]}})})},this.ht.pushTask(I,[],function(){y()},function(Oe){x(Oe)},function(){0<B.ht.size()&&B.ht.runATask()}),this.dbOpened&&this.ht.size()===1&&this.ht.runATask(),[2]})})})},hi.prototype.bt=function(){var H=this;return new Promise(function(y,x){return oi(H,void 0,void 0,function(){var I,B=this;return Ii(this,function(me){return this.yt=!1,this.gt=!0,I=function(){return oi(B,void 0,void 0,function(){return Ii(this,function(Oe){switch(Oe.label){case 0:return this.gt=!0,[4,this.dt()];case 1:return Oe.sent(),[2]}})})},this.ht.pushTask(I,[],function(){B.yt=!0,B.gt=!1,y()},function(Oe){B.gt=!1,x(Oe)},function(){0<B.ht.size()&&B.ht.runATask()}),this.dbOpened&&this.ht.size()===1&&this.ht.runATask(),[2]})})})},hi.prototype.setUploadUrl=function(H){this.wt.setUploadUrl(H)},hi.prototype.startUpload=function(){return oi(this,void 0,void 0,function(){return Ii(this,function(H){switch(H.label){case 0:if(!this.st)throw new Error("zip logs upload is not enabled.");if(this.Ot!==0&&performance.now()-this.Ot<6e4&&this.yt||this.gt)throw new Error("Logs upload failed. Do not report frequently.");return this.Ot=performance.now(),[4,this.bt()];case 1:return H.sent(),[2]}})})},hi.prototype.destroy=function(){},hi);function hi(H,y){this.j=H,this.proxyCtrl=y,this.J=new Et,this.ot=new Ee(this.J),this.it=!1,this.et=!1,this.k=new gi,this.vt=!1,this.ct=new br,this.ht=new br,this.st=!1,this.Ot=0,this.yt=!1,this.gt=!1,this.wt=new ke(this.j,y),this.lt=new di(this.j)}var fe=function(){return(fe=Object.assign||function(H){for(var y,x=1,I=arguments.length;x<I;x++)for(var B in y=arguments[x])Object.prototype.hasOwnProperty.call(y,B)&&(H[B]=y[B]);return H}).apply(this,arguments)},Ce=function(H,y,x,I){return new(x=x||Promise)(function(B,me){function Oe(yt){try{qe(I.next(yt))}catch(Re){me(Re)}}function Qe(yt){try{qe(I.throw(yt))}catch(Re){me(Re)}}function qe(yt){var Re;yt.done?B(yt.value):((Re=yt.value)instanceof x?Re:new x(function(_t){_t(Re)})).then(Oe,Qe)}qe((I=I.apply(H,y||[])).next())})},et=function(H,y){var x,I,B,me={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]},Oe={next:Qe(0),throw:Qe(1),return:Qe(2)};return typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Qe(qe){return function(yt){var Re=[qe,yt];if(x)throw new TypeError("Generator is already executing.");for(;me=Oe&&Re[Oe=0]?0:me;)try{if(x=1,I&&(B=2&Re[0]?I.return:Re[0]?I.throw||((B=I.return)&&B.call(I),0):I.next)&&!(B=B.call(I,Re[1])).done)return B;switch(I=0,(Re=B?[2&Re[0],B.value]:Re)[0]){case 0:case 1:B=Re;break;case 4:return me.label++,{value:Re[1],done:!1};case 5:me.label++,I=Re[1],Re=[0];continue;case 7:Re=me.ops.pop(),me.trys.pop();continue;default:if(!(B=0<(B=me.trys).length&&B[B.length-1])&&(Re[0]===6||Re[0]===2)){me=0;continue}if(Re[0]===3&&(!B||Re[1]>B[0]&&Re[1]<B[3]))me.label=Re[1];else if(Re[0]===6&&me.label<B[1])me.label=B[1],B=Re;else{if(!(B&&me.label<B[2])){B[2]&&me.ops.pop(),me.trys.pop();continue}me.label=B[2],me.ops.push(Re)}}Re=y.call(H,me)}catch(_t){Re=[6,_t],I=0}finally{x=B=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}}},lt=(Object.defineProperty(pt.prototype,"url",{get:function(){return this.j.url||""},set:function(H){this.j.url=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"logType",{get:function(){return this.j.logType||C.DISABLE},set:function(H){this.j.logType=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"env",{get:function(){return this.j.env},set:function(H){this.j.env=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"appid",{get:function(){return this.j.appid},set:function(H){this.j.appid=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"roomid",{get:function(){return this.j.roomid},set:function(H){this.j.roomid=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"sessionid",{get:function(){return this.j.sessionid},set:function(H){this.j.sessionid=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"userid",{get:function(){return this.j.userid},set:function(H){this.j.userid=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"userName",{get:function(){return this.j.userName},set:function(H){this.j.userName=H},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"version",{get:function(){return this.j.userName},set:function(H){this.j.version=H},enumerable:!1,configurable:!0}),pt.prototype.setLogLevel=function(H){return H=se[H],H!==void 0&&(this.logLevel=H,!0)},pt.prototype.setRemoteLogLevel=function(H){return H=se[H],H!==void 0&&(this.logRemoteLevel=H,!0)},pt.prototype.setSessionInfo=function(H,y,x,I,B,me){this.appid=H,this.roomid=y,this.sessionid=x,this.userid=I,this.userName=B,this.version=me},pt.prototype.setTokenInfo=function(H,y){this.j.token=H,y&&(this.j.userid=y)},pt.prototype.setZipLogConfig=function(H,y){H===1&&this.jt?this.jt.enable():H==0&&y&&this.jt&&(this.jt.destroy(),this.jt=null)},pt.prototype.setZipLogUploadUrl=function(H){this.jt&&this.jt.setUploadUrl(H)},pt.prototype.makeZipLogSpaceUpload=function(){return Ce(this,void 0,void 0,function(){return et(this,function(H){switch(H.label){case 0:return this.jt?[4,this.jt.makeStorageSpaceUpload()]:[3,2];case 1:H.sent(),H.label=2;case 2:return[2]}})})},pt.prototype.uploadStorageLog=function(){return Ce(this,void 0,void 0,function(){return et(this,function(H){switch(H.label){case 0:return this.jt?[4,this.jt.startUpload()]:[3,2];case 1:return H.sent(),[3,3];case 2:throw new Error("cannot use zip log module");case 3:return[2]}})})},pt.prototype.report=function(H){H=this.xt(se.REPORT,H),this.logLevel!==se.DISABLE&&this.logLevel<=se.REPORT&&console.debug(H),this._t(se.REPORT,H,!0)},pt.prototype.debug=function(){for(var H=[],y=0;y<arguments.length;y++)H[y]=arguments[y];var x=this.St(se.DEBUG,H.join(""));this.logLevel!==se.DISABLE&&this.logLevel<=se.DEBUG&&console.debug(x),this.Et(se.DEBUG,x)},pt.prototype.info=function(){for(var H=[],y=0;y<arguments.length;y++)H[y]=arguments[y];var x=this.St(se.INFO,H.join(""));this.logLevel!==se.DISABLE&&this.logLevel<=se.INFO&&console.info(x),this.Et(se.INFO,x)},pt.prototype.warn=function(){for(var H=[],y=0;y<arguments.length;y++)H[y]=arguments[y];var x=this.St(se.WARN,H.join(""));this.logLevel!==se.DISABLE&&this.logLevel<=se.WARN&&console.warn(x),this.Et(se.WARN,x)},pt.prototype.remoteReport=function(){for(var H=[],y=0;y<arguments.length;y++)H[y]=arguments[y];var x=this.St(se.INFO,H.join(""));this.Et(se.INFO,x)},pt.prototype.error=function(){for(var H=[],y=0;y<arguments.length;y++)H[y]=arguments[y];var x=this.St(se.ERROR,H.join(""));this.logLevel!==se.DISABLE&&this.logLevel<=se.ERROR&&(console.error(x),this.env%2===U.BROWSER&&window?this.stateCenter.debug&&window.alert(H.join("").substr(H.join("").indexOf(" ")+1,4500)):(this.env,U.WEIXINMINI)),this.Et(se.ERROR,x)},pt.prototype.Et=function(H,y){this.logRemoteLevel!==se.DISABLE&&this.logRemoteLevel<=H&&(this._t(H,y),this.jt)&&this.jt.saveLog(y)},pt.prototype.setLogServer=function(H){if(this.isDestroy)return!1;try{return H.startsWith("wss:")?(this.logType=C.WEBSOCKET,this.kt.openWebSocketLogServer(H)):H.startsWith("https:")?(this.logType=C.HTTPS,this.Pt(H)):this.logType=C.DISABLE,!0}catch(y){return this.error(JSON.stringify(y)),!1}},pt.prototype.Nt=function(){this.logType==C.WEBSOCKET?this.Tt():this.logType==C.HTTPS&&(this.zt(),this.Dt()),this.logType=C.DISABLE},pt.prototype.Tt=function(){this.kt.stopWebSocketServer()},pt.prototype.Pt=function(H){var y=this;(this.url=H)&&(this.Dt(),this.logUploadTimer||(this.logUploadTimer=setInterval(function(){y.zt()},this.logUploadInterval)))},pt.prototype.Dt=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},pt.prototype._t=function(H,y,x){return x===void 0&&(x=!1),Ce(this,void 0,void 0,function(){return et(this,function(I){if(!this.isDestroy){if(this.logType==C.WEBSOCKET)this.It(H,y);else if(this.logType==C.HTTPS)this.At(H,y,x);else if(this.logLevel!==se.DISABLE&&this.logLevel<=H)for(this.qt.push(y);this.qt.size()>this.Rt;)this.qt.pop()}return[2]})})},pt.prototype.Ct=function(){var H=this;this.kt.connected()&&this.qt.clear().forEach(function(y){H.kt.wsSend(y)})},pt.prototype.clearCache=function(){this.qt.size()!==0&&this.Ct()},pt.prototype.Jt=function(H){this.qt.size()<this.Rt&&this.qt.push(H)},pt.prototype.Mt=function(H){this.kt.connected()?this.kt.wsSend(H):this.Jt(H)},pt.prototype.It=function(H,y){return Ce(this,void 0,void 0,function(){var x;return et(this,function(I){return typeof y=="string"&&4e3<y.length?console.info("log over maximum, ignore"):this.j.useStrategy&&this.env==U.BROWSER?this.kt.addRemoteWsLog(y):this.kt.closed()?(x=this.url,this.url="",this.setLogServer(x),this.Jt(y)):this.kt.connecting()?this.Jt(y):this.kt.connected()&&(this.clearCache(),this.Mt(y)),[2]})})},pt.prototype.At=function(H,y,x){this.qt.push(y),(this.qt.size()>=this.Rt||x===!0)&&this.zt()},pt.prototype.St=function(H,x){var I=le(),x=[x.substr(0,x.indexOf(" "))||x,x.substr(x.indexOf(" ")+1,4500)||x],I={time:I,level:H,action:x[0],content:x[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(I)},pt.prototype.xt=function(H,y){var x=le(),I="",I=this.env%2===U.BROWSER?"rtc":"ali";return y=fe(fe({},y),{time:x,level:H,console:I,appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+y.event_time+"_"+y.seq}),JSON.stringify(y)},pt.prototype.zt=function(){this.qt.size()!=0&&(this.env%2===U.BROWSER?this.Lt():this.SendHttpsLogWeChatMini())},pt.prototype.Lt=function(){var H=this,y=this.qt.buffer.join(`
`),x=this.qt.buffer,I=new XMLHttpRequest;I.onreadystatechange=function(){if(I.readyState==4){if(I.status==200){if(I.responseText.length==0)return;try{var B=JSON.parse(I.responseText).interval;typeof B=="number"&&H.logUploadInterval!==B&&(H.timeInterval=B,H.Pt(H.url))}catch(me){H.qt.buffer=x.concat(H.qt.buffer),console.log("send result failed "+me)}}else H.qt.buffer=x.concat(H.qt.buffer),console.log("send failed "+I.status);x=null}},I.open("POST",this.url,!0),this.env==0?I.send(y):this.env==1&&(I.setRequestHeader("content-type","application/json"),I.send(JSON.stringify({user_id:this.userid,log:y}))),this.qt.buffer=[]},pt.prototype.SendHttpsLogWeChatMini=function(){},pt.prototype.destroy=function(){this.Nt(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),q.instance=void 0,this.kt.destroy(),this.jt&&this.jt.destroy(),this.url=""},pt.logVersion="1.4.3",pt);function pt(H,y){var x=this;this.proxyCtrl=y,this.logLevel=se.INFO,this.logRemoteLevel=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.existUserID=!1,this.isDestroy=!1,this.Rt=8192,this.D={debug:function(){for(var I=[],B=0;B<arguments.length;B++)I[B]=arguments[B];x.debug.apply(x,I)},info:function(){for(var I=[],B=0;B<arguments.length;B++)I[B]=arguments[B];x.info.apply(x,I)},warn:function(){for(var I=[],B=0;B<arguments.length;B++)I[B]=arguments[B];x.warn.apply(x,I)},error:function(){for(var I=[],B=0;B<arguments.length;B++)I[B]=arguments[B];x.error.apply(x,I)}},this.stateCenter=q.getInstance(),this.j=new Se,this.j.env=H,this.qt=new Ht(this.j),this.kt=new k(this.qt,this.j,this.D,this.proxyCtrl),this.env==U.BROWSER&&yi.isEnvSupport()&&(this.jt=new yi(this.j,this.proxyCtrl))}}],_={},v.m=b,v.c=_,v.d=function(E,w,O){v.o(E,w)||Object.defineProperty(E,w,{enumerable:!0,get:O})},v.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"Wt",{value:!0})},v.t=function(E,w){if(1&w&&(E=v(E)),8&w||4&w&&typeof E=="object"&&E&&E.Wt)return E;var O=Object.create(null);if(v.r(O),Object.defineProperty(O,"default",{enumerable:!0,value:E}),2&w&&typeof E!="string")for(var U in E)v.d(O,U,(function(V){return E[V]}).bind(null,U));return O},v.n=function(E){var w=E&&E.Wt?function(){return E.default}:function(){return E};return v.d(w,"a",w),w},v.o=function(E,w){return Object.prototype.hasOwnProperty.call(E,w)},v.p="",v(v.s=2);function v(E){var w;return(_[E]||(w=_[E]={i:E,l:!1,exports:{}},b[E].call(w.exports,w,w.exports,v),w.l=!0,w)).exports}var b,_})}(ZegoExpressLogger)),ZegoExpressLogger.exports}function commonjsRequire(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var hasRequiredLocalforage;function requireLocalforage(){return hasRequiredLocalforage||(hasRequiredLocalforage=1,function(c,l){(function(g){c.exports=g()})(function(){return function g(v,b,_){function E(U,V){if(!b[U]){if(!v[U]){var C=typeof commonjsRequire=="function"&&commonjsRequire;if(!V&&C)return C(U,!0);if(w)return w(U,!0);var q=new Error("Cannot find module '"+U+"'");throw q.code="MODULE_NOT_FOUND",q}var ue=b[U]={exports:{}};v[U][0].call(ue.exports,function(se){var Y=v[U][1][se];return E(Y||se)},ue,ue.exports,g,v,b,_)}return b[U].exports}for(var w=typeof commonjsRequire=="function"&&commonjsRequire,O=0;O<_.length;O++)E(_[O]);return E}({1:[function(g,v,b){(function(_){var E=_.MutationObserver||_.WebKitMutationObserver,w;if(E){var O=0,U=new E(se),V=_.document.createTextNode("");U.observe(V,{characterData:!0}),w=function(){V.data=O=++O%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var C=new _.MessageChannel;C.port1.onmessage=se,w=function(){C.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?w=function(){var pe=_.document.createElement("script");pe.onreadystatechange=function(){se(),pe.onreadystatechange=null,pe.parentNode.removeChild(pe),pe=null},_.document.documentElement.appendChild(pe)}:w=function(){setTimeout(se,0)};var q,ue=[];function se(){q=!0;for(var pe,ce,X=ue.length;X;){for(ce=ue,ue=[],pe=-1;++pe<X;)ce[pe]();X=ue.length}q=!1}v.exports=Y;function Y(pe){ue.push(pe)===1&&!q&&w()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(g,v,b){var _=g(1);function E(){}var w={},O=["REJECTED"],U=["FULFILLED"],V=["PENDING"];v.exports=C;function C(oe){if(typeof oe!="function")throw new TypeError("resolver must be a function");this.state=V,this.queue=[],this.outcome=void 0,oe!==E&&Y(this,oe)}C.prototype.catch=function(oe){return this.then(null,oe)},C.prototype.then=function(oe,A){if(typeof oe!="function"&&this.state===U||typeof A!="function"&&this.state===O)return this;var le=new this.constructor(E);if(this.state!==V){var $=this.state===U?oe:A;ue(le,$,this.outcome)}else this.queue.push(new q(le,oe,A));return le};function q(oe,A,le){this.promise=oe,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof le=="function"&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}q.prototype.callFulfilled=function(oe){w.resolve(this.promise,oe)},q.prototype.otherCallFulfilled=function(oe){ue(this.promise,this.onFulfilled,oe)},q.prototype.callRejected=function(oe){w.reject(this.promise,oe)},q.prototype.otherCallRejected=function(oe){ue(this.promise,this.onRejected,oe)};function ue(oe,A,le){_(function(){var $;try{$=A(le)}catch(k){return w.reject(oe,k)}$===oe?w.reject(oe,new TypeError("Cannot resolve promise with itself")):w.resolve(oe,$)})}w.resolve=function(oe,A){var le=pe(se,A);if(le.status==="error")return w.reject(oe,le.value);var $=le.value;if($)Y(oe,$);else{oe.state=U,oe.outcome=A;for(var k=-1,j=oe.queue.length;++k<j;)oe.queue[k].callFulfilled(A)}return oe},w.reject=function(oe,A){oe.state=O,oe.outcome=A;for(var le=-1,$=oe.queue.length;++le<$;)oe.queue[le].callRejected(A);return oe};function se(oe){var A=oe&&oe.then;if(oe&&(typeof oe=="object"||typeof oe=="function")&&typeof A=="function")return function(){A.apply(oe,arguments)}}function Y(oe,A){var le=!1;function $(Z){le||(le=!0,w.reject(oe,Z))}function k(Z){le||(le=!0,w.resolve(oe,Z))}function j(){A(k,$)}var K=pe(j);K.status==="error"&&$(K.value)}function pe(oe,A){var le={};try{le.value=oe(A),le.status="success"}catch($){le.status="error",le.value=$}return le}C.resolve=ce;function ce(oe){return oe instanceof this?oe:w.resolve(new this(E),oe)}C.reject=X;function X(oe){var A=new this(E);return w.reject(A,oe)}C.all=P;function P(oe){var A=this;if(Object.prototype.toString.call(oe)!=="[object Array]")return this.reject(new TypeError("must be an array"));var le=oe.length,$=!1;if(!le)return this.resolve([]);for(var k=new Array(le),j=0,K=-1,Z=new this(E);++K<le;)J(oe[K],K);return Z;function J(D,G){A.resolve(D).then(M,function(L){$||($=!0,w.reject(Z,L))});function M(L){k[G]=L,++j===le&&!$&&($=!0,w.resolve(Z,k))}}}C.race=z;function z(oe){var A=this;if(Object.prototype.toString.call(oe)!=="[object Array]")return this.reject(new TypeError("must be an array"));var le=oe.length,$=!1;if(!le)return this.resolve([]);for(var k=-1,j=new this(E);++k<le;)K(oe[k]);return j;function K(Z){A.resolve(Z).then(function(J){$||($=!0,w.resolve(j,J))},function(J){$||($=!0,w.reject(j,J))})}}},{1:1}],3:[function(g,v,b){(function(_){typeof _.Promise!="function"&&(_.Promise=g(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(g,v,b){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie};function E(Ie,Ve){if(!(Ie instanceof Ve))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var O=w();function U(){try{if(!O||!O.open)return!1;var Ie=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ve=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Ie||Ve)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function V(Ie,Ve){Ie=Ie||[],Ve=Ve||{};try{return new Blob(Ie,Ve)}catch(ct){if(ct.name!=="TypeError")throw ct;for(var Ne=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new Ne,mt=0;mt<Ie.length;mt+=1)$e.append(Ie[mt]);return $e.getBlob(Ve.type)}}typeof Promise>"u"&&g(3);var C=Promise;function q(Ie,Ve){Ve&&Ie.then(function(Ne){Ve(null,Ne)},function(Ne){Ve(Ne)})}function ue(Ie,Ve,Ne){typeof Ve=="function"&&Ie.then(Ve),typeof Ne=="function"&&Ie.catch(Ne)}function se(Ie){return typeof Ie!="string"&&(console.warn(Ie+" used as a key, but it is not a string."),Ie=String(Ie)),Ie}function Y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var pe="local-forage-detect-blob-support",ce=void 0,X={},P=Object.prototype.toString,z="readonly",oe="readwrite";function A(Ie){for(var Ve=Ie.length,Ne=new ArrayBuffer(Ve),$e=new Uint8Array(Ne),mt=0;mt<Ve;mt++)$e[mt]=Ie.charCodeAt(mt);return Ne}function le(Ie){return new C(function(Ve){var Ne=Ie.transaction(pe,oe),$e=V([""]);Ne.objectStore(pe).put($e,"key"),Ne.onabort=function(mt){mt.preventDefault(),mt.stopPropagation(),Ve(!1)},Ne.oncomplete=function(){var mt=navigator.userAgent.match(/Chrome\/(\d+)/),ct=navigator.userAgent.match(/Edge\//);Ve(ct||!mt||parseInt(mt[1],10)>=43)}}).catch(function(){return!1})}function $(Ie){return typeof ce=="boolean"?C.resolve(ce):le(Ie).then(function(Ve){return ce=Ve,ce})}function k(Ie){var Ve=X[Ie.name],Ne={};Ne.promise=new C(function($e,mt){Ne.resolve=$e,Ne.reject=mt}),Ve.deferredOperations.push(Ne),Ve.dbReady?Ve.dbReady=Ve.dbReady.then(function(){return Ne.promise}):Ve.dbReady=Ne.promise}function j(Ie){var Ve=X[Ie.name],Ne=Ve.deferredOperations.pop();if(Ne)return Ne.resolve(),Ne.promise}function K(Ie,Ve){var Ne=X[Ie.name],$e=Ne.deferredOperations.pop();if($e)return $e.reject(Ve),$e.promise}function Z(Ie,Ve){return new C(function(Ne,$e){if(X[Ie.name]=X[Ie.name]||he(),Ie.db)if(Ve)k(Ie),Ie.db.close();else return Ne(Ie.db);var mt=[Ie.name];Ve&&mt.push(Ie.version);var ct=O.open.apply(O,mt);Ve&&(ct.onupgradeneeded=function(qt){var Bt=ct.result;try{Bt.createObjectStore(Ie.storeName),qt.oldVersion<=1&&Bt.createObjectStore(pe)}catch(jt){if(jt.name==="ConstraintError")console.warn('The database "'+Ie.name+'" has been upgraded from version '+qt.oldVersion+" to version "+qt.newVersion+', but the storage "'+Ie.storeName+'" already exists.');else throw jt}}),ct.onerror=function(qt){qt.preventDefault(),$e(ct.error)},ct.onsuccess=function(){var qt=ct.result;qt.onversionchange=function(Bt){Bt.target.close()},Ne(qt),j(Ie)}})}function J(Ie){return Z(Ie,!1)}function D(Ie){return Z(Ie,!0)}function G(Ie,Ve){if(!Ie.db)return!0;var Ne=!Ie.db.objectStoreNames.contains(Ie.storeName),$e=Ie.version<Ie.db.version,mt=Ie.version>Ie.db.version;if($e&&(Ie.version!==Ve&&console.warn('The database "'+Ie.name+`" can't be downgraded from version `+Ie.db.version+" to version "+Ie.version+"."),Ie.version=Ie.db.version),mt||Ne){if(Ne){var ct=Ie.db.version+1;ct>Ie.version&&(Ie.version=ct)}return!0}return!1}function M(Ie){return new C(function(Ve,Ne){var $e=new FileReader;$e.onerror=Ne,$e.onloadend=function(mt){var ct=btoa(mt.target.result||"");Ve({__local_forage_encoded_blob:!0,data:ct,type:Ie.type})},$e.readAsBinaryString(Ie)})}function L(Ie){var Ve=A(atob(Ie.data));return V([Ve],{type:Ie.type})}function W(Ie){return Ie&&Ie.__local_forage_encoded_blob}function ve(Ie){var Ve=this,Ne=Ve._initReady().then(function(){var $e=X[Ve._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return ue(Ne,Ie,Ie),Ne}function de(Ie){k(Ie);for(var Ve=X[Ie.name],Ne=Ve.forages,$e=0;$e<Ne.length;$e++){var mt=Ne[$e];mt._dbInfo.db&&(mt._dbInfo.db.close(),mt._dbInfo.db=null)}return Ie.db=null,J(Ie).then(function(ct){return Ie.db=ct,G(Ie)?D(Ie):ct}).then(function(ct){Ie.db=Ve.db=ct;for(var qt=0;qt<Ne.length;qt++)Ne[qt]._dbInfo.db=ct}).catch(function(ct){throw K(Ie,ct),ct})}function ne(Ie,Ve,Ne,$e){$e===void 0&&($e=1);try{var mt=Ie.db.transaction(Ie.storeName,Ve);Ne(null,mt)}catch(ct){if($e>0&&(!Ie.db||ct.name==="InvalidStateError"||ct.name==="NotFoundError"))return C.resolve().then(function(){if(!Ie.db||ct.name==="NotFoundError"&&!Ie.db.objectStoreNames.contains(Ie.storeName)&&Ie.version<=Ie.db.version)return Ie.db&&(Ie.version=Ie.db.version+1),D(Ie)}).then(function(){return de(Ie).then(function(){ne(Ie,Ve,Ne,$e-1)})}).catch(Ne);Ne(ct)}}function he(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _e(Ie){var Ve=this,Ne={db:null};if(Ie)for(var $e in Ie)Ne[$e]=Ie[$e];var mt=X[Ne.name];mt||(mt=he(),X[Ne.name]=mt),mt.forages.push(Ve),Ve._initReady||(Ve._initReady=Ve.ready,Ve.ready=ve);var ct=[];function qt(){return C.resolve()}for(var Bt=0;Bt<mt.forages.length;Bt++){var jt=mt.forages[Bt];jt!==Ve&&ct.push(jt._initReady().catch(qt))}var Xt=mt.forages.slice(0);return C.all(ct).then(function(){return Ne.db=mt.db,J(Ne)}).then(function(si){return Ne.db=si,G(Ne,Ve._defaultConfig.version)?D(Ne):si}).then(function(si){Ne.db=mt.db=si,Ve._dbInfo=Ne;for(var Ei=0;Ei<Xt.length;Ei++){var Ui=Xt[Ei];Ui!==Ve&&(Ui._dbInfo.db=Ne.db,Ui._dbInfo.version=Ne.version)}})}function Ue(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=new C(function(mt,ct){Ne.ready().then(function(){ne(Ne._dbInfo,z,function(qt,Bt){if(qt)return ct(qt);try{var jt=Bt.objectStore(Ne._dbInfo.storeName),Xt=jt.get(Ie);Xt.onsuccess=function(){var si=Xt.result;si===void 0&&(si=null),W(si)&&(si=L(si)),mt(si)},Xt.onerror=function(){ct(Xt.error)}}catch(si){ct(si)}})}).catch(ct)});return q($e,Ve),$e}function Fe(Ie,Ve){var Ne=this,$e=new C(function(mt,ct){Ne.ready().then(function(){ne(Ne._dbInfo,z,function(qt,Bt){if(qt)return ct(qt);try{var jt=Bt.objectStore(Ne._dbInfo.storeName),Xt=jt.openCursor(),si=1;Xt.onsuccess=function(){var Ei=Xt.result;if(Ei){var Ui=Ei.value;W(Ui)&&(Ui=L(Ui));var ji=Ie(Ui,Ei.key,si++);ji!==void 0?mt(ji):Ei.continue()}else mt()},Xt.onerror=function(){ct(Xt.error)}}catch(Ei){ct(Ei)}})}).catch(ct)});return q($e,Ve),$e}function ze(Ie,Ve,Ne){var $e=this;Ie=se(Ie);var mt=new C(function(ct,qt){var Bt;$e.ready().then(function(){return Bt=$e._dbInfo,P.call(Ve)==="[object Blob]"?$(Bt.db).then(function(jt){return jt?Ve:M(Ve)}):Ve}).then(function(jt){ne($e._dbInfo,oe,function(Xt,si){if(Xt)return qt(Xt);try{var Ei=si.objectStore($e._dbInfo.storeName);jt===null&&(jt=void 0);var Ui=Ei.put(jt,Ie);si.oncomplete=function(){jt===void 0&&(jt=null),ct(jt)},si.onabort=si.onerror=function(){var ji=Ui.error?Ui.error:Ui.transaction.error;qt(ji)}}catch(ji){qt(ji)}})}).catch(qt)});return q(mt,Ne),mt}function Me(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=new C(function(mt,ct){Ne.ready().then(function(){ne(Ne._dbInfo,oe,function(qt,Bt){if(qt)return ct(qt);try{var jt=Bt.objectStore(Ne._dbInfo.storeName),Xt=jt.delete(Ie);Bt.oncomplete=function(){mt()},Bt.onerror=function(){ct(Xt.error)},Bt.onabort=function(){var si=Xt.error?Xt.error:Xt.transaction.error;ct(si)}}catch(si){ct(si)}})}).catch(ct)});return q($e,Ve),$e}function We(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){ne(Ve._dbInfo,oe,function(ct,qt){if(ct)return mt(ct);try{var Bt=qt.objectStore(Ve._dbInfo.storeName),jt=Bt.clear();qt.oncomplete=function(){$e()},qt.onabort=qt.onerror=function(){var Xt=jt.error?jt.error:jt.transaction.error;mt(Xt)}}catch(Xt){mt(Xt)}})}).catch(mt)});return q(Ne,Ie),Ne}function rt(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){ne(Ve._dbInfo,z,function(ct,qt){if(ct)return mt(ct);try{var Bt=qt.objectStore(Ve._dbInfo.storeName),jt=Bt.count();jt.onsuccess=function(){$e(jt.result)},jt.onerror=function(){mt(jt.error)}}catch(Xt){mt(Xt)}})}).catch(mt)});return q(Ne,Ie),Ne}function dt(Ie,Ve){var Ne=this,$e=new C(function(mt,ct){if(Ie<0){mt(null);return}Ne.ready().then(function(){ne(Ne._dbInfo,z,function(qt,Bt){if(qt)return ct(qt);try{var jt=Bt.objectStore(Ne._dbInfo.storeName),Xt=!1,si=jt.openKeyCursor();si.onsuccess=function(){var Ei=si.result;if(!Ei){mt(null);return}Ie===0||Xt?mt(Ei.key):(Xt=!0,Ei.advance(Ie))},si.onerror=function(){ct(si.error)}}catch(Ei){ct(Ei)}})}).catch(ct)});return q($e,Ve),$e}function ht(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){ne(Ve._dbInfo,z,function(ct,qt){if(ct)return mt(ct);try{var Bt=qt.objectStore(Ve._dbInfo.storeName),jt=Bt.openKeyCursor(),Xt=[];jt.onsuccess=function(){var si=jt.result;if(!si){$e(Xt);return}Xt.push(si.key),si.continue()},jt.onerror=function(){mt(jt.error)}}catch(si){mt(si)}})}).catch(mt)});return q(Ne,Ie),Ne}function Pt(Ie,Ve){Ve=Y.apply(this,arguments);var Ne=this.config();Ie=typeof Ie!="function"&&Ie||{},Ie.name||(Ie.name=Ie.name||Ne.name,Ie.storeName=Ie.storeName||Ne.storeName);var $e=this,mt;if(!Ie.name)mt=C.reject("Invalid arguments");else{var ct=Ie.name===Ne.name&&$e._dbInfo.db,qt=ct?C.resolve($e._dbInfo.db):J(Ie).then(function(Bt){var jt=X[Ie.name],Xt=jt.forages;jt.db=Bt;for(var si=0;si<Xt.length;si++)Xt[si]._dbInfo.db=Bt;return Bt});Ie.storeName?mt=qt.then(function(Bt){if(Bt.objectStoreNames.contains(Ie.storeName)){var jt=Bt.version+1;k(Ie);var Xt=X[Ie.name],si=Xt.forages;Bt.close();for(var Ei=0;Ei<si.length;Ei++){var Ui=si[Ei];Ui._dbInfo.db=null,Ui._dbInfo.version=jt}var ji=new C(function(ki,Zi){var Bi=O.open(Ie.name,jt);Bi.onerror=function(Ti){var Mi=Bi.result;Mi.close(),Zi(Ti)},Bi.onupgradeneeded=function(){var Ti=Bi.result;Ti.deleteObjectStore(Ie.storeName)},Bi.onsuccess=function(){var Ti=Bi.result;Ti.close(),ki(Ti)}});return ji.then(function(ki){Xt.db=ki;for(var Zi=0;Zi<si.length;Zi++){var Bi=si[Zi];Bi._dbInfo.db=ki,j(Bi._dbInfo)}}).catch(function(ki){throw(K(Ie,ki)||C.resolve()).catch(function(){}),ki})}}):mt=qt.then(function(Bt){k(Ie);var jt=X[Ie.name],Xt=jt.forages;Bt.close();for(var si=0;si<Xt.length;si++){var Ei=Xt[si];Ei._dbInfo.db=null}var Ui=new C(function(ji,ki){var Zi=O.deleteDatabase(Ie.name);Zi.onerror=function(){var Bi=Zi.result;Bi&&Bi.close(),ki(Zi.error)},Zi.onblocked=function(){console.warn('dropInstance blocked for database "'+Ie.name+'" until all open connections are closed')},Zi.onsuccess=function(){var Bi=Zi.result;Bi&&Bi.close(),ji(Bi)}});return Ui.then(function(ji){jt.db=ji;for(var ki=0;ki<Xt.length;ki++){var Zi=Xt[ki];j(Zi._dbInfo)}}).catch(function(ji){throw(K(Ie,ji)||C.resolve()).catch(function(){}),ji})})}return q(mt,Ve),mt}var ye={_driver:"asyncStorage",_initStorage:_e,_support:U(),iterate:Fe,getItem:Ue,setItem:ze,removeItem:Me,clear:We,length:rt,key:dt,keys:ht,dropInstance:Pt};function De(){return typeof openDatabase=="function"}var xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Je="~~local_forage_type~",ut=/^~~local_forage_type~([^~]+)~/,re="__lfsc__:",Se=re.length,we="arbf",Ke="blob",je="si08",St="ui08",xt="uic8",Ht="si16",$t="si32",ci="ur16",He="ui32",Ee="fl32",it="fl64",nt=Se+we.length,tt=Object.prototype.toString;function Et(Ie){var Ve=Ie.length*.75,Ne=Ie.length,$e,mt=0,ct,qt,Bt,jt;Ie[Ie.length-1]==="="&&(Ve--,Ie[Ie.length-2]==="="&&Ve--);var Xt=new ArrayBuffer(Ve),si=new Uint8Array(Xt);for($e=0;$e<Ne;$e+=4)ct=xe.indexOf(Ie[$e]),qt=xe.indexOf(Ie[$e+1]),Bt=xe.indexOf(Ie[$e+2]),jt=xe.indexOf(Ie[$e+3]),si[mt++]=ct<<2|qt>>4,si[mt++]=(qt&15)<<4|Bt>>2,si[mt++]=(Bt&3)<<6|jt&63;return Xt}function Nt(Ie){var Ve=new Uint8Array(Ie),Ne="",$e;for($e=0;$e<Ve.length;$e+=3)Ne+=xe[Ve[$e]>>2],Ne+=xe[(Ve[$e]&3)<<4|Ve[$e+1]>>4],Ne+=xe[(Ve[$e+1]&15)<<2|Ve[$e+2]>>6],Ne+=xe[Ve[$e+2]&63];return Ve.length%3===2?Ne=Ne.substring(0,Ne.length-1)+"=":Ve.length%3===1&&(Ne=Ne.substring(0,Ne.length-2)+"=="),Ne}function Vt(Ie,Ve){var Ne="";if(Ie&&(Ne=tt.call(Ie)),Ie&&(Ne==="[object ArrayBuffer]"||Ie.buffer&&tt.call(Ie.buffer)==="[object ArrayBuffer]")){var $e,mt=re;Ie instanceof ArrayBuffer?($e=Ie,mt+=we):($e=Ie.buffer,Ne==="[object Int8Array]"?mt+=je:Ne==="[object Uint8Array]"?mt+=St:Ne==="[object Uint8ClampedArray]"?mt+=xt:Ne==="[object Int16Array]"?mt+=Ht:Ne==="[object Uint16Array]"?mt+=ci:Ne==="[object Int32Array]"?mt+=$t:Ne==="[object Uint32Array]"?mt+=He:Ne==="[object Float32Array]"?mt+=Ee:Ne==="[object Float64Array]"?mt+=it:Ve(new Error("Failed to get type for BinaryArray"))),Ve(mt+Nt($e))}else if(Ne==="[object Blob]"){var ct=new FileReader;ct.onload=function(){var qt=Je+Ie.type+"~"+Nt(this.result);Ve(re+Ke+qt)},ct.readAsArrayBuffer(Ie)}else try{Ve(JSON.stringify(Ie))}catch(qt){console.error("Couldn't convert value into a JSON string: ",Ie),Ve(null,qt)}}function It(Ie){if(Ie.substring(0,Se)!==re)return JSON.parse(Ie);var Ve=Ie.substring(nt),Ne=Ie.substring(Se,nt),$e;if(Ne===Ke&&ut.test(Ve)){var mt=Ve.match(ut);$e=mt[1],Ve=Ve.substring(mt[0].length)}var ct=Et(Ve);switch(Ne){case we:return ct;case Ke:return V([ct],{type:$e});case je:return new Int8Array(ct);case St:return new Uint8Array(ct);case xt:return new Uint8ClampedArray(ct);case Ht:return new Int16Array(ct);case ci:return new Uint16Array(ct);case $t:return new Int32Array(ct);case He:return new Uint32Array(ct);case Ee:return new Float32Array(ct);case it:return new Float64Array(ct);default:throw new Error("Unkown type: "+Ne)}}var ri={serialize:Vt,deserialize:It,stringToBuffer:Et,bufferToString:Nt};function gi(Ie,Ve,Ne,$e){Ie.executeSql("CREATE TABLE IF NOT EXISTS "+Ve.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Ne,$e)}function Si(Ie){var Ve=this,Ne={db:null};if(Ie)for(var $e in Ie)Ne[$e]=typeof Ie[$e]!="string"?Ie[$e].toString():Ie[$e];var mt=new C(function(ct,qt){try{Ne.db=openDatabase(Ne.name,String(Ne.version),Ne.description,Ne.size)}catch(Bt){return qt(Bt)}Ne.db.transaction(function(Bt){gi(Bt,Ne,function(){Ve._dbInfo=Ne,ct()},function(jt,Xt){qt(Xt)})},qt)});return Ne.serializer=ri,mt}function Hi(Ie,Ve,Ne,$e,mt,ct){Ie.executeSql(Ne,$e,mt,function(qt,Bt){Bt.code===Bt.SYNTAX_ERR?qt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ve.storeName],function(jt,Xt){Xt.rows.length?ct(jt,Bt):gi(jt,Ve,function(){jt.executeSql(Ne,$e,mt,ct)},ct)},ct):ct(qt,Bt)},ct)}function Gi(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=new C(function(mt,ct){Ne.ready().then(function(){var qt=Ne._dbInfo;qt.db.transaction(function(Bt){Hi(Bt,qt,"SELECT * FROM "+qt.storeName+" WHERE key = ? LIMIT 1",[Ie],function(jt,Xt){var si=Xt.rows.length?Xt.rows.item(0).value:null;si&&(si=qt.serializer.deserialize(si)),mt(si)},function(jt,Xt){ct(Xt)})})}).catch(ct)});return q($e,Ve),$e}function Qi(Ie,Ve){var Ne=this,$e=new C(function(mt,ct){Ne.ready().then(function(){var qt=Ne._dbInfo;qt.db.transaction(function(Bt){Hi(Bt,qt,"SELECT * FROM "+qt.storeName,[],function(jt,Xt){for(var si=Xt.rows,Ei=si.length,Ui=0;Ui<Ei;Ui++){var ji=si.item(Ui),ki=ji.value;if(ki&&(ki=qt.serializer.deserialize(ki)),ki=Ie(ki,ji.key,Ui+1),ki!==void 0){mt(ki);return}}mt()},function(jt,Xt){ct(Xt)})})}).catch(ct)});return q($e,Ve),$e}function br(Ie,Ve,Ne,$e){var mt=this;Ie=se(Ie);var ct=new C(function(qt,Bt){mt.ready().then(function(){Ve===void 0&&(Ve=null);var jt=Ve,Xt=mt._dbInfo;Xt.serializer.serialize(Ve,function(si,Ei){Ei?Bt(Ei):Xt.db.transaction(function(Ui){Hi(Ui,Xt,"INSERT OR REPLACE INTO "+Xt.storeName+" (key, value) VALUES (?, ?)",[Ie,si],function(){qt(jt)},function(ji,ki){Bt(ki)})},function(Ui){if(Ui.code===Ui.QUOTA_ERR){if($e>0){qt(br.apply(mt,[Ie,jt,Ne,$e-1]));return}Bt(Ui)}})})}).catch(Bt)});return q(ct,Ne),ct}function pr(Ie,Ve,Ne){return br.apply(this,[Ie,Ve,Ne,1])}function Vr(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=new C(function(mt,ct){Ne.ready().then(function(){var qt=Ne._dbInfo;qt.db.transaction(function(Bt){Hi(Bt,qt,"DELETE FROM "+qt.storeName+" WHERE key = ?",[Ie],function(){mt()},function(jt,Xt){ct(Xt)})})}).catch(ct)});return q($e,Ve),$e}function bt(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){var ct=Ve._dbInfo;ct.db.transaction(function(qt){Hi(qt,ct,"DELETE FROM "+ct.storeName,[],function(){$e()},function(Bt,jt){mt(jt)})})}).catch(mt)});return q(Ne,Ie),Ne}function zt(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){var ct=Ve._dbInfo;ct.db.transaction(function(qt){Hi(qt,ct,"SELECT COUNT(key) as c FROM "+ct.storeName,[],function(Bt,jt){var Xt=jt.rows.item(0).c;$e(Xt)},function(Bt,jt){mt(jt)})})}).catch(mt)});return q(Ne,Ie),Ne}function R(Ie,Ve){var Ne=this,$e=new C(function(mt,ct){Ne.ready().then(function(){var qt=Ne._dbInfo;qt.db.transaction(function(Bt){Hi(Bt,qt,"SELECT key FROM "+qt.storeName+" WHERE id = ? LIMIT 1",[Ie+1],function(jt,Xt){var si=Xt.rows.length?Xt.rows.item(0).key:null;mt(si)},function(jt,Xt){ct(Xt)})})}).catch(ct)});return q($e,Ve),$e}function at(Ie){var Ve=this,Ne=new C(function($e,mt){Ve.ready().then(function(){var ct=Ve._dbInfo;ct.db.transaction(function(qt){Hi(qt,ct,"SELECT key FROM "+ct.storeName,[],function(Bt,jt){for(var Xt=[],si=0;si<jt.rows.length;si++)Xt.push(jt.rows.item(si).key);$e(Xt)},function(Bt,jt){mt(jt)})})}).catch(mt)});return q(Ne,Ie),Ne}function ke(Ie){return new C(function(Ve,Ne){Ie.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(mt,ct){for(var qt=[],Bt=0;Bt<ct.rows.length;Bt++)qt.push(ct.rows.item(Bt).name);Ve({db:Ie,storeNames:qt})},function(mt,ct){Ne(ct)})},function($e){Ne($e)})})}function ft(Ie,Ve){Ve=Y.apply(this,arguments);var Ne=this.config();Ie=typeof Ie!="function"&&Ie||{},Ie.name||(Ie.name=Ie.name||Ne.name,Ie.storeName=Ie.storeName||Ne.storeName);var $e=this,mt;return Ie.name?mt=new C(function(ct){var qt;Ie.name===Ne.name?qt=$e._dbInfo.db:qt=openDatabase(Ie.name,"","",0),Ie.storeName?ct({db:qt,storeNames:[Ie.storeName]}):ct(ke(qt))}).then(function(ct){return new C(function(qt,Bt){ct.db.transaction(function(jt){function Xt(ji){return new C(function(ki,Zi){jt.executeSql("DROP TABLE IF EXISTS "+ji,[],function(){ki()},function(Bi,Ti){Zi(Ti)})})}for(var si=[],Ei=0,Ui=ct.storeNames.length;Ei<Ui;Ei++)si.push(Xt(ct.storeNames[Ei]));C.all(si).then(function(){qt()}).catch(function(ji){Bt(ji)})},function(jt){Bt(jt)})})}):mt=C.reject("Invalid arguments"),q(mt,Ve),mt}var Ge={_driver:"webSQLStorage",_initStorage:Si,_support:De(),iterate:Qi,getItem:Gi,setItem:pr,removeItem:Vr,clear:bt,length:zt,key:R,keys:at,dropInstance:ft};function Tt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Qt(Ie,Ve){var Ne=Ie.name+"/";return Ie.storeName!==Ve.storeName&&(Ne+=Ie.storeName+"/"),Ne}function wt(){var Ie="_localforage_support_test";try{return localStorage.setItem(Ie,!0),localStorage.removeItem(Ie),!1}catch{return!0}}function Ut(){return!wt()||localStorage.length>0}function di(Ie){var Ve=this,Ne={};if(Ie)for(var $e in Ie)Ne[$e]=Ie[$e];return Ne.keyPrefix=Qt(Ie,Ve._defaultConfig),Ut()?(Ve._dbInfo=Ne,Ne.serializer=ri,C.resolve()):C.reject()}function Ri(Ie){var Ve=this,Ne=Ve.ready().then(function(){for(var $e=Ve._dbInfo.keyPrefix,mt=localStorage.length-1;mt>=0;mt--){var ct=localStorage.key(mt);ct.indexOf($e)===0&&localStorage.removeItem(ct)}});return q(Ne,Ie),Ne}function oi(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=Ne.ready().then(function(){var mt=Ne._dbInfo,ct=localStorage.getItem(mt.keyPrefix+Ie);return ct&&(ct=mt.serializer.deserialize(ct)),ct});return q($e,Ve),$e}function Ii(Ie,Ve){var Ne=this,$e=Ne.ready().then(function(){for(var mt=Ne._dbInfo,ct=mt.keyPrefix,qt=ct.length,Bt=localStorage.length,jt=1,Xt=0;Xt<Bt;Xt++){var si=localStorage.key(Xt);if(si.indexOf(ct)===0){var Ei=localStorage.getItem(si);if(Ei&&(Ei=mt.serializer.deserialize(Ei)),Ei=Ie(Ei,si.substring(qt),jt++),Ei!==void 0)return Ei}}});return q($e,Ve),$e}function yi(Ie,Ve){var Ne=this,$e=Ne.ready().then(function(){var mt=Ne._dbInfo,ct;try{ct=localStorage.key(Ie)}catch{ct=null}return ct&&(ct=ct.substring(mt.keyPrefix.length)),ct});return q($e,Ve),$e}function hi(Ie){var Ve=this,Ne=Ve.ready().then(function(){for(var $e=Ve._dbInfo,mt=localStorage.length,ct=[],qt=0;qt<mt;qt++){var Bt=localStorage.key(qt);Bt.indexOf($e.keyPrefix)===0&&ct.push(Bt.substring($e.keyPrefix.length))}return ct});return q(Ne,Ie),Ne}function fe(Ie){var Ve=this,Ne=Ve.keys().then(function($e){return $e.length});return q(Ne,Ie),Ne}function Ce(Ie,Ve){var Ne=this;Ie=se(Ie);var $e=Ne.ready().then(function(){var mt=Ne._dbInfo;localStorage.removeItem(mt.keyPrefix+Ie)});return q($e,Ve),$e}function et(Ie,Ve,Ne){var $e=this;Ie=se(Ie);var mt=$e.ready().then(function(){Ve===void 0&&(Ve=null);var ct=Ve;return new C(function(qt,Bt){var jt=$e._dbInfo;jt.serializer.serialize(Ve,function(Xt,si){if(si)Bt(si);else try{localStorage.setItem(jt.keyPrefix+Ie,Xt),qt(ct)}catch(Ei){(Ei.name==="QuotaExceededError"||Ei.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Bt(Ei),Bt(Ei)}})})});return q(mt,Ne),mt}function lt(Ie,Ve){if(Ve=Y.apply(this,arguments),Ie=typeof Ie!="function"&&Ie||{},!Ie.name){var Ne=this.config();Ie.name=Ie.name||Ne.name,Ie.storeName=Ie.storeName||Ne.storeName}var $e=this,mt;return Ie.name?mt=new C(function(ct){Ie.storeName?ct(Qt(Ie,$e._defaultConfig)):ct(Ie.name+"/")}).then(function(ct){for(var qt=localStorage.length-1;qt>=0;qt--){var Bt=localStorage.key(qt);Bt.indexOf(ct)===0&&localStorage.removeItem(Bt)}}):mt=C.reject("Invalid arguments"),q(mt,Ve),mt}var pt={_driver:"localStorageWrapper",_initStorage:di,_support:Tt(),iterate:Ii,getItem:oi,setItem:et,removeItem:Ce,clear:Ri,length:fe,key:yi,keys:hi,dropInstance:lt},H=function(Ve,Ne){return Ve===Ne||typeof Ve=="number"&&typeof Ne=="number"&&isNaN(Ve)&&isNaN(Ne)},y=function(Ve,Ne){for(var $e=Ve.length,mt=0;mt<$e;){if(H(Ve[mt],Ne))return!0;mt++}return!1},x=Array.isArray||function(Ie){return Object.prototype.toString.call(Ie)==="[object Array]"},I={},B={},me={INDEXEDDB:ye,WEBSQL:Ge,LOCALSTORAGE:pt},Oe=[me.INDEXEDDB._driver,me.WEBSQL._driver,me.LOCALSTORAGE._driver],Qe=["dropInstance"],qe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qe),yt={description:"",driver:Oe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Re(Ie,Ve){Ie[Ve]=function(){var Ne=arguments;return Ie.ready().then(function(){return Ie[Ve].apply(Ie,Ne)})}}function _t(){for(var Ie=1;Ie<arguments.length;Ie++){var Ve=arguments[Ie];if(Ve)for(var Ne in Ve)Ve.hasOwnProperty(Ne)&&(x(Ve[Ne])?arguments[0][Ne]=Ve[Ne].slice():arguments[0][Ne]=Ve[Ne])}return arguments[0]}var ii=function(){function Ie(Ve){E(this,Ie);for(var Ne in me)if(me.hasOwnProperty(Ne)){var $e=me[Ne],mt=$e._driver;this[Ne]=mt,I[mt]||this.defineDriver($e)}this._defaultConfig=_t({},yt),this._config=_t({},this._defaultConfig,Ve),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Ie.prototype.config=function(Ne){if((typeof Ne>"u"?"undefined":_(Ne))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in Ne){if($e==="storeName"&&(Ne[$e]=Ne[$e].replace(/\W/g,"_")),$e==="version"&&typeof Ne[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=Ne[$e]}return"driver"in Ne&&Ne.driver?this.setDriver(this._config.driver):!0}else return typeof Ne=="string"?this._config[Ne]:this._config},Ie.prototype.defineDriver=function(Ne,$e,mt){var ct=new C(function(qt,Bt){try{var jt=Ne._driver,Xt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Ne._driver){Bt(Xt);return}for(var si=qe.concat("_initStorage"),Ei=0,Ui=si.length;Ei<Ui;Ei++){var ji=si[Ei],ki=!y(Qe,ji);if((ki||Ne[ji])&&typeof Ne[ji]!="function"){Bt(Xt);return}}var Zi=function(){for(var Mi=function(Mo){return function(){var Lr=new Error("Method "+Mo+" is not implemented by the current driver"),Ln=C.reject(Lr);return q(Ln,arguments[arguments.length-1]),Ln}},Gr=0,en=Qe.length;Gr<en;Gr++){var Sr=Qe[Gr];Ne[Sr]||(Ne[Sr]=Mi(Sr))}};Zi();var Bi=function(Mi){I[jt]&&console.info("Redefining LocalForage driver: "+jt),I[jt]=Ne,B[jt]=Mi,qt()};"_support"in Ne?Ne._support&&typeof Ne._support=="function"?Ne._support().then(Bi,Bt):Bi(!!Ne._support):Bi(!0)}catch(Ti){Bt(Ti)}});return ue(ct,$e,mt),ct},Ie.prototype.driver=function(){return this._driver||null},Ie.prototype.getDriver=function(Ne,$e,mt){var ct=I[Ne]?C.resolve(I[Ne]):C.reject(new Error("Driver not found."));return ue(ct,$e,mt),ct},Ie.prototype.getSerializer=function(Ne){var $e=C.resolve(ri);return ue($e,Ne),$e},Ie.prototype.ready=function(Ne){var $e=this,mt=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return ue(mt,Ne,Ne),mt},Ie.prototype.setDriver=function(Ne,$e,mt){var ct=this;x(Ne)||(Ne=[Ne]);var qt=this._getSupportedDrivers(Ne);function Bt(){ct._config.driver=ct.driver()}function jt(Ei){return ct._extend(Ei),Bt(),ct._ready=ct._initStorage(ct._config),ct._ready}function Xt(Ei){return function(){var Ui=0;function ji(){for(;Ui<Ei.length;){var ki=Ei[Ui];return Ui++,ct._dbInfo=null,ct._ready=null,ct.getDriver(ki).then(jt).catch(ji)}Bt();var Zi=new Error("No available storage method found.");return ct._driverSet=C.reject(Zi),ct._driverSet}return ji()}}var si=this._driverSet!==null?this._driverSet.catch(function(){return C.resolve()}):C.resolve();return this._driverSet=si.then(function(){var Ei=qt[0];return ct._dbInfo=null,ct._ready=null,ct.getDriver(Ei).then(function(Ui){ct._driver=Ui._driver,Bt(),ct._wrapLibraryMethodsWithReady(),ct._initDriver=Xt(qt)})}).catch(function(){Bt();var Ei=new Error("No available storage method found.");return ct._driverSet=C.reject(Ei),ct._driverSet}),ue(this._driverSet,$e,mt),this._driverSet},Ie.prototype.supports=function(Ne){return!!B[Ne]},Ie.prototype._extend=function(Ne){_t(this,Ne)},Ie.prototype._getSupportedDrivers=function(Ne){for(var $e=[],mt=0,ct=Ne.length;mt<ct;mt++){var qt=Ne[mt];this.supports(qt)&&$e.push(qt)}return $e},Ie.prototype._wrapLibraryMethodsWithReady=function(){for(var Ne=0,$e=qe.length;Ne<$e;Ne++)Re(this,qe[Ne])},Ie.prototype.createInstance=function(Ne){return new Ie(Ne)},Ie}(),Wt=new ii;v.exports=Wt},{3:3}]},{},[4])(4)})}(localforage)),localforage.exports}var hasRequiredZegoExpressWebRTM;function requireZegoExpressWebRTM(){return hasRequiredZegoExpressWebRTM||(hasRequiredZegoExpressWebRTM=1,function(c,l){(function(g,v){c.exports=v(requireUmd(),requireMinimal(),requireZegoExpressLogger(),requireLocalforage(),requireDeflate())})(typeof self<"u"?self:commonjsGlobal,function(g,v,b,_,E){return O=[function(V,C,q){function ue(z){return typeof z=="number"}function se(z){return typeof z=="string"}function Y(z){return typeof z=="boolean"}function pe(z){return z===void 0}function ce(z){return z!==null&&z instanceof Object}function X(z){return typeof z=="function"}function P(z){return z instanceof Array}q.d(C,"d",function(){return ue}),q.d(C,"f",function(){return se}),q.d(C,"b",function(){return Y}),q.d(C,"g",function(){return pe}),q.d(C,"e",function(){return ce}),q.d(C,"c",function(){return X}),q.d(C,"a",function(){return P})},function(V,C){V.exports=g},function(V,C,q){(function(ue){var se;V.exports=(se=function(Y){var pe;if(typeof window<"u"&&window.crypto&&(pe=window.crypto),typeof self<"u"&&self.crypto&&(pe=self.crypto),!(pe=!(pe=!(pe=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:pe)&&typeof window<"u"&&window.msCrypto?window.msCrypto:pe)&&ue!==void 0&&ue.crypto?ue.crypto:pe))try{pe=q(15)}catch{}var ce=Object.create||function(J){return X.prototype=J,J=new X,X.prototype=null,J};function X(){}var P={},z=P.lib={},oe=z.Base={extend:function(J){var D=ce(this);return J&&D.mixIn(J),D.hasOwnProperty("init")&&this.init!==D.init||(D.init=function(){D.$super.init.apply(this,arguments)}),(D.init.prototype=D).$super=this,D},create:function(){var J=this.extend();return J.init.apply(J,arguments),J},init:function(){},mixIn:function(J){for(var D in J)J.hasOwnProperty(D)&&(this[D]=J[D]);J.hasOwnProperty("toString")&&(this.toString=J.toString)},clone:function(){return this.init.prototype.extend(this)}},A=z.WordArray=oe.extend({init:function(J,D){J=this.words=J||[],this.sigBytes=D??4*J.length},toString:function(J){return(J||$).stringify(this)},concat:function(J){var D=this.words,G=J.words,M=this.sigBytes,L=J.sigBytes;if(this.clamp(),M%4)for(var W=0;W<L;W++){var ve=G[W>>>2]>>>24-W%4*8&255;D[M+W>>>2]|=ve<<24-(M+W)%4*8}else for(var de=0;de<L;de+=4)D[M+de>>>2]=G[de>>>2];return this.sigBytes+=L,this},clamp:function(){var J=this.words,D=this.sigBytes;J[D>>>2]&=4294967295<<32-D%4*8,J.length=Y.ceil(D/4)},clone:function(){var J=oe.clone.call(this);return J.words=this.words.slice(0),J},random:function(J){for(var D=[],G=0;G<J;G+=4)D.push(function(){if(pe){if(typeof pe.getRandomValues=="function")try{return pe.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof pe.randomBytes=="function")try{return pe.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new A.init(D,J)}}),le=P.enc={},$=le.Hex={stringify:function(J){for(var D=J.words,G=J.sigBytes,M=[],L=0;L<G;L++){var W=D[L>>>2]>>>24-L%4*8&255;M.push((W>>>4).toString(16)),M.push((15&W).toString(16))}return M.join("")},parse:function(J){for(var D=J.length,G=[],M=0;M<D;M+=2)G[M>>>3]|=parseInt(J.substr(M,2),16)<<24-M%8*4;return new A.init(G,D/2)}},k=le.Latin1={stringify:function(J){for(var D=J.words,G=J.sigBytes,M=[],L=0;L<G;L++){var W=D[L>>>2]>>>24-L%4*8&255;M.push(String.fromCharCode(W))}return M.join("")},parse:function(J){for(var D=J.length,G=[],M=0;M<D;M++)G[M>>>2]|=(255&J.charCodeAt(M))<<24-M%4*8;return new A.init(G,D)}},j=le.Utf8={stringify:function(J){try{return decodeURIComponent(escape(k.stringify(J)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(J){return k.parse(unescape(encodeURIComponent(J)))}},K=z.BufferedBlockAlgorithm=oe.extend({reset:function(){this._data=new A.init,this._nDataBytes=0},_append:function(J){typeof J=="string"&&(J=j.parse(J)),this._data.concat(J),this._nDataBytes+=J.sigBytes},_process:function(J){var D,G=this._data,M=G.words,L=G.sigBytes,W=this.blockSize,ve=L/(4*W),de=(ve=J?Y.ceil(ve):Y.max((0|ve)-this._minBufferSize,0))*W;if(J=Y.min(4*de,L),de){for(var ne=0;ne<de;ne+=W)this._doProcessBlock(M,ne);D=M.splice(0,de),G.sigBytes-=J}return new A.init(D,J)},clone:function(){var J=oe.clone.call(this);return J._data=this._data.clone(),J},_minBufferSize:0}),Z=(z.Hasher=K.extend({cfg:oe.extend(),init:function(J){this.cfg=this.cfg.extend(J),this.reset()},reset:function(){K.reset.call(this),this._doReset()},update:function(J){return this._append(J),this._process(),this},finalize:function(J){return J&&this._append(J),this._doFinalize()},blockSize:16,_createHelper:function(J){return function(D,G){return new J.init(G).finalize(D)}},_createHmacHelper:function(J){return function(D,G){return new Z.HMAC.init(J,G).finalize(D)}}}),P.algo={});return P}(Math),se)}).call(this,q(14))},function(V,C){V.exports=v},function(V,C){V.exports=b},function(V,C,q){V.exports=function(ue){for(var se=Math,Y=ue,pe=Y.lib,ce=pe.WordArray,X=pe.Hasher,P=Y.algo,z=[],oe=0;oe<64;oe++)z[oe]=4294967296*se.abs(se.sin(oe+1))|0;var A=P.MD5=X.extend({_doReset:function(){this._hash=new ce.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(K,Z){for(var J=0;J<16;J++){var D=Z+J,G=K[D];K[D]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}var M=this._hash.words,L=K[Z+0],W=K[Z+1],ve=K[Z+2],de=K[Z+3],ne=K[Z+4],he=K[Z+5],_e=K[Z+6],Ue=K[Z+7],Fe=K[Z+8],ze=K[Z+9],Me=K[Z+10],We=K[Z+11],rt=K[Z+12],dt=K[Z+13],ht=K[Z+14],Pt=K[Z+15],ye=M[0],De=M[1],xe=M[2],Je=M[3];ye=le(ye,De,xe,Je,L,7,z[0]),Je=le(Je,ye,De,xe,W,12,z[1]),xe=le(xe,Je,ye,De,ve,17,z[2]),De=le(De,xe,Je,ye,de,22,z[3]),ye=le(ye,De,xe,Je,ne,7,z[4]),Je=le(Je,ye,De,xe,he,12,z[5]),xe=le(xe,Je,ye,De,_e,17,z[6]),De=le(De,xe,Je,ye,Ue,22,z[7]),ye=le(ye,De,xe,Je,Fe,7,z[8]),Je=le(Je,ye,De,xe,ze,12,z[9]),xe=le(xe,Je,ye,De,Me,17,z[10]),De=le(De,xe,Je,ye,We,22,z[11]),ye=le(ye,De,xe,Je,rt,7,z[12]),Je=le(Je,ye,De,xe,dt,12,z[13]),xe=le(xe,Je,ye,De,ht,17,z[14]),ye=$(ye,De=le(De,xe,Je,ye,Pt,22,z[15]),xe,Je,W,5,z[16]),Je=$(Je,ye,De,xe,_e,9,z[17]),xe=$(xe,Je,ye,De,We,14,z[18]),De=$(De,xe,Je,ye,L,20,z[19]),ye=$(ye,De,xe,Je,he,5,z[20]),Je=$(Je,ye,De,xe,Me,9,z[21]),xe=$(xe,Je,ye,De,Pt,14,z[22]),De=$(De,xe,Je,ye,ne,20,z[23]),ye=$(ye,De,xe,Je,ze,5,z[24]),Je=$(Je,ye,De,xe,ht,9,z[25]),xe=$(xe,Je,ye,De,de,14,z[26]),De=$(De,xe,Je,ye,Fe,20,z[27]),ye=$(ye,De,xe,Je,dt,5,z[28]),Je=$(Je,ye,De,xe,ve,9,z[29]),xe=$(xe,Je,ye,De,Ue,14,z[30]),ye=k(ye,De=$(De,xe,Je,ye,rt,20,z[31]),xe,Je,he,4,z[32]),Je=k(Je,ye,De,xe,Fe,11,z[33]),xe=k(xe,Je,ye,De,We,16,z[34]),De=k(De,xe,Je,ye,ht,23,z[35]),ye=k(ye,De,xe,Je,W,4,z[36]),Je=k(Je,ye,De,xe,ne,11,z[37]),xe=k(xe,Je,ye,De,Ue,16,z[38]),De=k(De,xe,Je,ye,Me,23,z[39]),ye=k(ye,De,xe,Je,dt,4,z[40]),Je=k(Je,ye,De,xe,L,11,z[41]),xe=k(xe,Je,ye,De,de,16,z[42]),De=k(De,xe,Je,ye,_e,23,z[43]),ye=k(ye,De,xe,Je,ze,4,z[44]),Je=k(Je,ye,De,xe,rt,11,z[45]),xe=k(xe,Je,ye,De,Pt,16,z[46]),ye=j(ye,De=k(De,xe,Je,ye,ve,23,z[47]),xe,Je,L,6,z[48]),Je=j(Je,ye,De,xe,Ue,10,z[49]),xe=j(xe,Je,ye,De,ht,15,z[50]),De=j(De,xe,Je,ye,he,21,z[51]),ye=j(ye,De,xe,Je,rt,6,z[52]),Je=j(Je,ye,De,xe,de,10,z[53]),xe=j(xe,Je,ye,De,Me,15,z[54]),De=j(De,xe,Je,ye,W,21,z[55]),ye=j(ye,De,xe,Je,Fe,6,z[56]),Je=j(Je,ye,De,xe,Pt,10,z[57]),xe=j(xe,Je,ye,De,_e,15,z[58]),De=j(De,xe,Je,ye,dt,21,z[59]),ye=j(ye,De,xe,Je,ne,6,z[60]),Je=j(Je,ye,De,xe,We,10,z[61]),xe=j(xe,Je,ye,De,ve,15,z[62]),De=j(De,xe,Je,ye,ze,21,z[63]),M[0]=M[0]+ye|0,M[1]=M[1]+De|0,M[2]=M[2]+xe|0,M[3]=M[3]+Je|0},_doFinalize:function(){var K=this._data,Z=K.words,J=8*this._nDataBytes,D=8*K.sigBytes;Z[D>>>5]|=128<<24-D%32;var G=se.floor(J/4294967296),M=J;Z[15+(D+64>>>9<<4)]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),Z[14+(D+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),K.sigBytes=4*(Z.length+1),this._process();for(var L=this._hash,W=L.words,ve=0;ve<4;ve++){var de=W[ve];W[ve]=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8)}return L},clone:function(){var K=X.clone.call(this);return K._hash=this._hash.clone(),K}});function le(K,Z,J,D,G,M,L){var W=K+(Z&J|~Z&D)+G+L;return(W<<M|W>>>32-M)+Z}function $(K,Z,J,D,G,M,L){var W=K+(Z&D|J&~D)+G+L;return(W<<M|W>>>32-M)+Z}function k(K,Z,J,D,G,M,L){var W=K+(Z^J^D)+G+L;return(W<<M|W>>>32-M)+Z}function j(K,Z,J,D,G,M,L){var W=K+(J^(Z|~D))+G+L;return(W<<M|W>>>32-M)+Z}return Y.MD5=X._createHelper(A),Y.HmacMD5=X._createHmacHelper(A),ue.MD5}(q(2))},function(V,C,q){V.exports=function(ue){for(var se=ue,Y=se.lib.BlockCipher,pe=se.algo,ce=[],X=[],P=[],z=[],oe=[],A=[],le=[],$=[],k=[],j=[],K=[],Z=0;Z<256;Z++)K[Z]=Z<128?Z<<1:Z<<1^283;var J=0,D=0;for(Z=0;Z<256;Z++){var G=D^D<<1^D<<2^D<<3^D<<4;G=G>>>8^255&G^99,ce[J]=G,X[G]=J;var M=K[J],L=K[M],W=K[L],ve=257*K[G]^16843008*G;P[J]=ve<<24|ve>>>8,z[J]=ve<<16|ve>>>16,oe[J]=ve<<8|ve>>>24,A[J]=ve,ve=16843009*W^65537*L^257*M^16843008*J,le[G]=ve<<24|ve>>>8,$[G]=ve<<16|ve>>>16,k[G]=ve<<8|ve>>>24,j[G]=ve,J?(J=M^K[K[K[W^M]]],D^=K[K[D]]):J=D=1}var de=[0,1,2,4,8,16,32,64,128,27,54],ne=pe.AES=Y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var he=this._keyPriorReset=this._key,_e=he.words,Ue=he.sigBytes/4,Fe=4*((this._nRounds=Ue+6)+1),ze=this._keySchedule=[],Me=0;Me<Fe;Me++)Me<Ue?ze[Me]=_e[Me]:(dt=ze[Me-1],Me%Ue?Ue>6&&Me%Ue==4&&(dt=ce[dt>>>24]<<24|ce[dt>>>16&255]<<16|ce[dt>>>8&255]<<8|ce[255&dt]):(dt=ce[(dt=dt<<8|dt>>>24)>>>24]<<24|ce[dt>>>16&255]<<16|ce[dt>>>8&255]<<8|ce[255&dt],dt^=de[Me/Ue|0]<<24),ze[Me]=ze[Me-Ue]^dt);for(var We=this._invKeySchedule=[],rt=0;rt<Fe;rt++){if(Me=Fe-rt,rt%4)var dt=ze[Me];else dt=ze[Me-4];We[rt]=rt<4||Me<=4?dt:le[ce[dt>>>24]]^$[ce[dt>>>16&255]]^k[ce[dt>>>8&255]]^j[ce[255&dt]]}}},encryptBlock:function(he,_e){this._doCryptBlock(he,_e,this._keySchedule,P,z,oe,A,ce)},decryptBlock:function(he,_e){var Ue=he[_e+1];he[_e+1]=he[_e+3],he[_e+3]=Ue,this._doCryptBlock(he,_e,this._invKeySchedule,le,$,k,j,X),Ue=he[_e+1],he[_e+1]=he[_e+3],he[_e+3]=Ue},_doCryptBlock:function(he,_e,Ue,Fe,ze,Me,We,rt){for(var dt=this._nRounds,ht=he[_e]^Ue[0],Pt=he[_e+1]^Ue[1],ye=he[_e+2]^Ue[2],De=he[_e+3]^Ue[3],xe=4,Je=1;Je<dt;Je++){var ut=Fe[ht>>>24]^ze[Pt>>>16&255]^Me[ye>>>8&255]^We[255&De]^Ue[xe++],re=Fe[Pt>>>24]^ze[ye>>>16&255]^Me[De>>>8&255]^We[255&ht]^Ue[xe++],Se=Fe[ye>>>24]^ze[De>>>16&255]^Me[ht>>>8&255]^We[255&Pt]^Ue[xe++],we=Fe[De>>>24]^ze[ht>>>16&255]^Me[Pt>>>8&255]^We[255&ye]^Ue[xe++];ht=ut,Pt=re,ye=Se,De=we}ut=(rt[ht>>>24]<<24|rt[Pt>>>16&255]<<16|rt[ye>>>8&255]<<8|rt[255&De])^Ue[xe++],re=(rt[Pt>>>24]<<24|rt[ye>>>16&255]<<16|rt[De>>>8&255]<<8|rt[255&ht])^Ue[xe++],Se=(rt[ye>>>24]<<24|rt[De>>>16&255]<<16|rt[ht>>>8&255]<<8|rt[255&Pt])^Ue[xe++],we=(rt[De>>>24]<<24|rt[ht>>>16&255]<<16|rt[Pt>>>8&255]<<8|rt[255&ye])^Ue[xe++],he[_e]=ut,he[_e+1]=re,he[_e+2]=Se,he[_e+3]=we},keySize:8});return se.AES=Y._createHelper(ne),ue.AES}(q(2),(q(16),q(5),q(9),q(19)))},function(V,C,q){V.exports=q(2).enc.Utf8},function(V,C,q){function ue(oe){var A;return(z[oe]||(A=z[oe]={i:oe,l:!1,exports:{}},P[oe].call(A.exports,A,A.exports,ue),A.l=!0,A)).exports}var se,Y,pe,ce,X,P,z;V.exports=(se=q(10),Y=q(20),pe=q(5),ce=q(6),X=q(7),P=[function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.LinkedList=A.ListNode=A.ENUM_CONNECT_STATE=A.ENUM_NETWORK_STATE=A.SOCKET_DISCONNECT=A.errorList=A.Queue=A.getSeq=A.E_CLIENT_TYPE=A.ENUM_LOG_LEVEL=A.ENUM_REMOTE_TYPE=A.ZEGO_BROWSER_TYPE=A.ZEGO_ENV=A.PROTO_VERSION=void 0,A.PROTO_VERSION="1.0.4",(k=A.ZEGO_ENV||(A.ZEGO_ENV={}))[k.BROWSER=0]="BROWSER",k[k.WEIXINMINI=1]="WEIXINMINI",(k=A.ZEGO_BROWSER_TYPE||(A.ZEGO_BROWSER_TYPE={}))[k.IE=0]="IE",k[k.FIREFOX=1]="FIREFOX",k[k.CHROME=2]="CHROME",k[k.SAFARI=3]="SAFARI",k[k.OPERA=4]="OPERA",k[k.WEIXIN=5]="WEIXIN",k[k.WEIXINMINI=6]="WEIXINMINI",k[k.UNKOWN=7]="UNKOWN",(k=A.ENUM_REMOTE_TYPE||(A.ENUM_REMOTE_TYPE={}))[k.DISABLE=0]="DISABLE",k[k.WEBSOCKET=1]="WEBSOCKET",k[k.HTTPS=2]="HTTPS",A.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(k=A.E_CLIENT_TYPE||(A.E_CLIENT_TYPE={}))[k.ClientType_None=0]="ClientType_None",k[k.ClientType_H5=1]="ClientType_H5",k[k.ClientType_SmallPragram=2]="ClientType_SmallPragram",k[k.ClientType_Webrtc=3]="ClientType_Webrtc",A.getSeq=($=1,function(){return $++}),j.prototype.isEmpty=function(){return this.items.length==0},j.prototype.enqueue=function(D){this.items.push(D)},j.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},j.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},j.prototype.size=function(){return this.items.length},j.prototype.clear=function(){this.items=[]},j.prototype.all=function(){return this.items};var $,k=j;function j(){this.items=[],this.items=[]}A.Queue=k,A.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},A.SOCKET_DISCONNECT=-1,(k=A.ENUM_NETWORK_STATE||(A.ENUM_NETWORK_STATE={}))[k.offline=0]="offline",k[k.online=1]="online",(k=A.ENUM_CONNECT_STATE||(A.ENUM_CONNECT_STATE={}))[k.disconnected=0]="disconnected",k[k.connecting=1]="connecting",k[k.connected=2]="connected",Object.defineProperty(Z.prototype,"id",{get:function(){return this.h||null},set:function(D){this.h=D},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"data",{get:function(){return this.v},set:function(D){this.v=D},enumerable:!1,configurable:!0}),Z.prototype.hasNext=function(){return this.next&&this.next.id},Z.prototype.hasPrev=function(){return this.prev&&this.prev.id};var K=Z;function Z(D,G){D===void 0&&(D=null),G===void 0&&(G=null),this.next=null,this.prev=null,this.h=D,this.v=G}function J(){this.start=new K,this.end=new K,this.g=0,this._=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}A.ListNode=K,J.prototype.insertBefore=function(D,G){return(G=new K(this.g,G)).next=D,G.prev=D.prev,D.prev&&(D.prev.next=G),D.prev=G,++this.g,++this._,G},J.prototype.addLast=function(D){return this.insertBefore(this.end,D)},J.prototype.add=function(D){return this.addLast(D)},J.prototype.getFirst=function(){return this._===0?null:this.start.next},J.prototype.getLast=function(){return this._===0?null:this.end.prev},J.prototype.size=function(){return this._},J.prototype.getFromFirst=function(D){var G=0,M=this.start.next;if(0<=D)for(;G<D&&M!==null;)M=M.next,++G;else M=null;if(M===null)throw"Index out of bounds.";return M},J.prototype.get=function(D){return D===0?this.getFirst():D===this._-1?this.getLast():this.getFromFirst(D)},J.prototype.remove=function(D){return D.prev&&(D.prev.next=D.next),D.next&&(D.next.prev=D.prev),--this._,D},J.prototype.removeFirst=function(){return 0<this._&&this.start.next?this.remove(this.start.next):null},J.prototype.removeLast=function(){return 0<this._&&this.end.prev?this.remove(this.end.prev):null},J.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._=0,this.g=0},J.prototype.each=function(D){for(var G=this.start;G.hasNext();)D(G=G.next)},J.prototype.find=function(D){for(var G=this.start,M=!1,L=null;G.hasNext()&&!M;)D(G=G.next)&&(L=G,M=!0);return L},J.prototype.map=function(D){for(var G=this.start,M=[];G.hasNext();)D(G=G.next)&&M.push(G);return M},J.prototype.push=function(D){return this.addLast(D)},J.prototype.unshift=function(D){0<this._?this.insertBefore(this.start.next,D):this.insertBefore(this.end,D)},J.prototype.pop=function(){return this.removeLast()},J.prototype.shift=function(){return this.removeFirst()},A.LinkedList=J},function(oe,A,le){var $=this&&this.__read||function(M,L){var W=typeof Symbol=="function"&&M[Symbol.iterator];if(!W)return M;var ve,de,ne=W.call(M),he=[];try{for(;(L===void 0||0<L--)&&!(ve=ne.next()).done;)he.push(ve.value)}catch(_e){de={error:_e}}finally{try{ve&&!ve.done&&(W=ne.return)&&W.call(ne)}finally{if(de)throw de.error}}return he},k=this&&this.__spread||function(){for(var M=[],L=0;L<arguments.length;L++)M=M.concat($(arguments[L]));return M},j=(Object.defineProperty(A,"u",{value:!0}),A.ContextAPI=A.suppressInstrumentation=A.ROOT_CONTEXT=A.BaseContext=A.setSpan=A.getSpanContext=A.getSpan=A.createContextKey=void 0,le(16));function K(M){return Symbol.for(M)}var Z=(A.createContextKey=K)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),J=K("OpenTelemetry Context Key SPAN");function D(M){return M.getValue(J)||void 0}function G(M){this.O=M,this.S=new j.StackContextManager}A.getSpan=D,A.getSpanContext=function(M){return(M=D(M))==null?void 0:M.context()},A.setSpan=function(M,L){return M.setValue(J,L)},A.BaseContext=le=function M(L){var W=this;W.M=L?new Map(L):new Map,W.getValue=function(ve){return W.M.get(ve)},W.setValue=function(ve,de){var ne=new M(W.M);return ne.M.set(ve,de),ne},W.deleteValue=function(ve){var de=new M(W.M);return de.M.delete(ve),de}},A.ROOT_CONTEXT=new le,A.suppressInstrumentation=function(M){return M.setValue(Z,!0)},G.getInstance=function(M){return M===void 0&&(M="context"),this.j||(this.j=new G(M)),this.j},G.prototype.active=function(){return this.S.active()},G.prototype.with=function(M,L,W){for(var ve,de=[],ne=3;ne<arguments.length;ne++)de[ne-3]=arguments[ne];return(ve=this.T()).with.apply(ve,k([M,L,W],de))},G.prototype.T=function(){return this.S},A.ContextAPI=G},function(oe,A,le){var $,k;Object.defineProperty(A,"u",{value:!0}),A.INVALID_SPAN_CONTEXT=A.INVALID_TRACEID=A.INVALID_SPANID=A.TraceFlags=A.SpanKind=A.SpanStatusCode=void 0,($=A.SpanStatusCode||(A.SpanStatusCode={}))[$.UNSET=0]="UNSET",$[$.OK=1]="OK",$[$.ERROR=2]="ERROR",($=A.SpanKind||(A.SpanKind={}))[$.INTERNAL=0]="INTERNAL",$[$.SERVER=1]="SERVER",$[$.CLIENT=2]="CLIENT",$[$.PRODUCER=3]="PRODUCER",$[$.CONSUMER=4]="CONSUMER",(k=$=A.TraceFlags||(A.TraceFlags={}))[k.NONE=0]="NONE",k[k.SAMPLED=1]="SAMPLED",A.INVALID_SPANID="0000000000000000",A.INVALID_TRACEID="00000000000000000000000000000000",A.INVALID_SPAN_CONTEXT={traceId:A.INVALID_TRACEID,spanId:A.INVALID_SPANID,traceFlags:$.NONE}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.log=A.ZegoLog=void 0,k.prototype.log=function(){for(var j=[],K=0;K<arguments.length;K++)j[K]=arguments[K];var Z=j.join("");console.log(Z)},k.prototype.debug=function(){for(var j=[],K=0;K<arguments.length;K++)j[K]=arguments[K];var Z=j.join("");console.debug(Z)},k.prototype.info=function(){for(var j=[],K=0;K<arguments.length;K++)j[K]=arguments[K];var Z=j.join("");console.info(Z)},k.prototype.warn=function(){for(var j=[],K=0;K<arguments.length;K++)j[K]=arguments[K];var Z=j.join("");console.warn(Z)},k.prototype.error=function(){for(var j=[],K=0;K<arguments.length;K++)j[K]=arguments[K];var Z=j.join("");console.error(Z)};var $=k;function k(){}$=new(A.ZegoLog=$),A.log=$},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.FAIL_TIME=A.FAIL_MAX_COUNT=A.FAIL_COUNT=A.STORE_SIZE=A.CACHE_SIZE=A.BUCKET_CONFIG=A.DEFAULT_CONFIG=void 0,A.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:10},A.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},A.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},A.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},A.FAIL_COUNT=5,A.FAIL_MAX_COUNT=10,A.FAIL_TIME=30},function(oe,A,le){var $=this&&this.__importDefault||function(Z){return Z&&Z.u?Z:{default:Z}},k=(Object.defineProperty(A,"u",{value:!0}),A.uuid=A.calculateMemSize=A.analyzeKey=A.getCurrentTime=A.getCurrentEnv=A.getBrowser=void 0,le(0)),j=$(le(31)),K=(A.getBrowser=function(){var Z=window.navigator.userAgent,J=window.ActiveXObject!=null&&Z.indexOf("MSIE")!=-1,D=Z.indexOf("Firefox")!=-1,G=window.opr!=null,M=Z.indexOf("Chrome")&&window.chrome,L=Z.indexOf("Safari")!=-1&&Z.indexOf("Version")!=-1;return Z=Z.toLowerCase().match(/MicroMessenger/i)&&Z.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",J?k.ZEGO_BROWSER_TYPE.IE:D?k.ZEGO_BROWSER_TYPE.FIREFOX:G?k.ZEGO_BROWSER_TYPE.OPERA:M?k.ZEGO_BROWSER_TYPE.CHROME:L?k.ZEGO_BROWSER_TYPE.SAFARI:Z?k.ZEGO_BROWSER_TYPE.WEIXIN:k.ZEGO_BROWSER_TYPE.UNKOWN},A.getCurrentEnv=function(){var Z=window.navigator.userAgent;return new Promise(function(J){Z.indexOf("MicroMessage")==-1?J(k.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv(function(D){D.miniprogram})})},["00","01","02","03","04","05","06","07","08","09"]);A.getCurrentTime=function(){var Z=new Date;return[Z.getFullYear()+"/",(K[Z.getMonth()+1]||Z.getMonth()+1)+"/",(K[Z.getDate()]||Z.getDate())+" ",(K[Z.getHours()]||Z.getHours())+":",(K[Z.getMinutes()]||Z.getMinutes())+":",K[Z.getSeconds()]||Z.getSeconds(),"."+Z.getTime()%1e3].join("")},A.analyzeKey=function(Z){return Z=Z.split("_"),{level:Number(Z[0]),timestamp:Z[1],seq:Z[2]}},A.calculateMemSize=function(Z){return j.default(Z)},A.uuid=function(Z,J){var D,G,M="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),L=[];if(J=J||M.length,Z)for(D=0;D<Z;D++)L[D]=M[0|Math.random()*J];else for(L[8]=L[13]=L[18]=L[23]="-",L[14]="4",D=0;D<36;D++)L[D]||(G=0|16*Math.random(),L[D]=M[D==19?3&G|8:G]);return L.join("")}},function(oe,A,le){var $=this&&this.__values||function(K){var Z=typeof Symbol=="function"&&Symbol.iterator,J=Z&&K[Z],D=0;if(J)return J.call(K);if(K&&typeof K.length=="number")return{next:function(){return{value:(K=K&&D>=K.length?void 0:K)&&K[D++],done:!K}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")},k=this&&this.__read||function(K,Z){var J=typeof Symbol=="function"&&K[Symbol.iterator];if(!J)return K;var D,G,M=J.call(K),L=[];try{for(;(Z===void 0||0<Z--)&&!(D=M.next()).done;)L.push(D.value)}catch(W){G={error:W}}finally{try{D&&!D.done&&(J=M.return)&&J.call(M)}finally{if(G)throw G.error}}return L};function j(K){var Z,J,D;if(K!=null&&Array.isArray(K))try{for(var G=$(K),M=G.next();!M.done;M=G.next()){var L=M.value;if(L!=null)if(D){if(typeof L!==D)return!1}else D=typeof L}}catch(W){Z={error:W}}finally{try{M&&!M.done&&(J=G.return)&&J.call(G)}finally{if(Z)throw Z.error}}return!0}Object.defineProperty(A,"u",{value:!0}),A.sanitizeAttributes=A.isAttributeValue=void 0,A.isAttributeValue=j,A.sanitizeAttributes=function(K){var Z,J,D={};if(K!=null&&typeof K=="object")try{for(var G=$(Object.entries(K)),M=G.next();!M.done;M=G.next()){var L=k(M.value,2),W=L[0],ve=L[1];j(ve)&&(Array.isArray(ve)?D[W]=ve.slice():D[W]=ve)}}catch(de){Z={error:de}}finally{try{M&&!M.done&&(J=G.return)&&J.call(G)}finally{if(Z)throw Z.error}}return D}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.IdGenerator=void 0;var $=Array(32);function k(j){return function(){for(var K=0;K<2*j;K++)$[K]=Math.floor(16*Math.random())+48,58<=$[K]&&($[K]+=39);return String.fromCharCode.apply(null,$.slice(0,2*j))}}A.IdGenerator=function(){this.generateTraceId=k(16),this.generateSpanId=k(8),this.generateEventId=k(4)}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.Resource=A.SDK_INFO=A.SemanticResourceAttributes=void 0,A.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},A.SDK_INFO=(($={})[A.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",$[A.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",$[A.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",$[A.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=A.VERSION,$),k.empty=function(){return k.EMPTY},k.createTelemetrySDKResource=function(){var j;return new k(((j={})[A.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=A.SDK_INFO[A.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],j[A.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=A.SDK_INFO[A.SemanticResourceAttributes.TELEMETRY_SDK_NAME],j[A.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=A.SDK_INFO[A.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],j))},k.prototype.merge=function(j){return j&&Object.keys(j.attributes).length?new k(Object.assign({},this.attributes,j.attributes)):this},k.EMPTY=new k({});var $=k;function k(j){this.attributes=j}A.Resource=$},function(oe,A,le){var $=this&&this.__values||function(M){var L=typeof Symbol=="function"&&Symbol.iterator,W=L&&M[L],ve=0;if(W)return W.call(M);if(M&&typeof M.length=="number")return{next:function(){return{value:(M=M&&ve>=M.length?void 0:M)&&M[ve++],done:!M}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")},k=this&&this.__read||function(M,L){var W=typeof Symbol=="function"&&M[Symbol.iterator];if(!W)return M;var ve,de,ne=W.call(M),he=[];try{for(;(L===void 0||0<L--)&&!(ve=ne.next()).done;)he.push(ve.value)}catch(_e){de={error:_e}}finally{try{ve&&!ve.done&&(W=ne.return)&&W.call(ne)}finally{if(de)throw de.error}}return he},j=(Object.defineProperty(A,"u",{value:!0}),A.Span=void 0,le(6)),K=le(1),Z=le(2),J=le(7),D=le(17);function G(M,L,W,ve,de,ne,he,_e){_e===void 0&&(_e=[]),this.attributes={},this.links=[],this.events=[],this.status={code:Z.SpanStatusCode.UNSET},this.endTime=0,this.N=!1,this.A=0,this.exported=!0,this.R=M.context,this.reporter=M.reporter,this.spanProcessor=M.spanProcessor,this.parentTracer=M,this.name=W,this.level=ve,this.spanContext=de,this.parentSpanId=he,this.kind=ne,this.links=_e,this.startTime=Date.now(),this.resource=M.resource,this.instrumentationLibrary=M.instrumentationLibrary,this.I=M.getActiveTraceParams(),this.k=new J.IdGenerator}G.prototype.context=function(){return this.spanContext},G.prototype.setAttribute=function(M,L){return L==null||M.length===0||!j.isAttributeValue(L)||Object.keys(this.attributes).length>=this.I.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,M)||(this.attributes[M]=L),this},G.prototype.appendAttribute=function(M,L){return L==null||M.length===0||!j.isAttributeValue(L)||Object.keys(this.attributes).length>=this.I.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,M)||(this.attributes[M]&&Array.isArray(this.attributes[M])?this.attributes[M].push(L):this.attributes[M]=[L]),this},G.prototype.setAttributes=function(M){var L,W;try{for(var ve=$(Object.entries(M)),de=ve.next();!de.done;de=ve.next()){var ne=k(de.value,2),he=ne[0],_e=ne[1];this.setAttribute(he,_e)}}catch(Ue){L={error:Ue}}finally{try{de&&!de.done&&(W=ve.return)&&W.call(ve)}finally{if(L)throw L.error}}return this},G.prototype.addEvent=function(M,L,W){this.events.length>=this.I.numberOfEventsPerSpan&&this.events.shift();var ve=this.k.generateEventId();return D.isTimeInput(L)&&(W===void 0&&(W=L),L=void 0),W===void 0&&(W=D.hrTime()),this.events.push({name:M,attributes:L,time:D.timeInputToHrTime(W),event_id:ve}),this},G.prototype.setStatus=function(M){return this.status=M,this},G.prototype.updateName=function(M){return this.name=M,this},G.prototype.end=function(M){var L,W=this;this.D()||(this.N=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),L=D.getCurrentTime(),this.setAttribute("e_time_s",L),this.endTime=Date.now(),this.A=this.endTime-this.startTime,this.R.with(K.suppressInstrumentation(this.R.active()),function(){var ve=W.P(W);W.spanProcessor.spanEnd&&W.spanProcessor.spanEnd(ve,W.level),ve.droped||M===!1||(delete ve.droped,W.reporter.report(JSON.stringify(ve),W.level))}))},G.prototype.spanReport=function(){var M=this.P(this);this.reporter.report(JSON.stringify(M),this.level)},G.prototype.isRecording=function(){return this.N===!1},Object.defineProperty(G.prototype,"duration",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"ended",{get:function(){return this.N},enumerable:!1,configurable:!0}),G.prototype.D=function(){return this.N,this.N},G.prototype.P=function(M){var L=[],W=(M.events.forEach(function(ve){var de={};Object.keys(ve).forEach(function(ne){ne==="name"&&(de[ne]=ve[ne]),ne==="time"&&(de.timestamp=D.hrTimeToMilliseconds(ve[ne])),ne==="attributes"&&(de.tags=ve[ne])}),L.push(de)}),[]);return M.links.forEach(function(ve){W.push({span_id:ve.context.spanId,trace_id:ve.context.traceId})}),{trace_id:M.spanContext.traceId,parent_span_id:M.parentSpanId,name:M.name,span_id:M.spanContext.spanId,kind:M.kind,start_time:M.startTime,end_time:M.endTime,duration:M.duration,logs:L,tags:M.attributes,links:W}},A.Span=G},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.ZegoSpan=void 0;var $=le(3),k=le(9);function j(K,Z){this.spanId=K,this.span=Z}j.prototype.setAttribute=function(K,Z){var J=this;return this.span?this.span.setAttribute(K,Z):this.B().then(function(){J.span&&J.span.setAttribute(K,Z)}),this},j.prototype.setAttributes=function(K){var Z=this;return this.span?this.span.setAttributes(K):this.B().then(function(){Z.span&&Z.span.setAttributes(K)}),this},j.prototype.appendAttribute=function(K,Z){var J=this;return this.span?this.span.appendAttribute(K,Z):this.B().then(function(){J.span&&J.span.appendAttribute(K,Z)}),this},j.prototype.addEvent=function(K,Z,J){var D=this;return this.span?this.span.addEvent(K,Z,J):this.B().then(function(){D.span&&D.span.addEvent(K,Z,J)}),this},j.prototype.setStatus=function(K){var Z=this;return this.span?this.span.setStatus(K):this.B().then(function(){Z.span&&Z.span.setStatus(K)}),this},j.prototype.updateName=function(K){var Z=this;return this.span?this.span.updateName(K):this.B().then(function(){Z.span&&Z.span.updateName(K)}),this},j.prototype.end=function(K){var Z=this;K===void 0&&(K=!0),this.span?this.span.end(K):this.B(!0).then(function(){Z.span&&Z.span.end(K),Z.U()})},j.prototype.setSpanActive=function(K){this.activeCallback=K},j.prototype.setSpanEnd=function(K){this.endCallback=K},j.prototype.spanReport=function(){var K;(K=this.span)!=null&&K.spanReport()},j.prototype.U=function(){this.L()||(this.J(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},j.prototype.L=function(){return this.spanId==="noop"},j.prototype.B=function(K){var Z=this;return K===void 0&&(K=!1),new Promise(function(J,D){Z.store.getItem(Z.spanId).then(function(G){var M=new k.Span(j.tracer,j.tracer.context.active(),G.name,G.level,G.spanContext,G.kind,G.parentSpanId,G.links);M.setStatus(G.status),M.setAttributes(G.attributes),Z.span=M,Z.activeCallback&&Z.activeCallback(Z.spanId,K),J()}).catch(function(G){D(G)})})},j.prototype.J=function(K){var Z=this;this.store.getItem(K).then(function(J){J&&Z.store.removeItem(K).then(function(){$.log.log("remove suc")}).catch(function(D){$.log.warn("remove fail")})})},A.ZegoSpan=j},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.createZegoStore=A.ZegoWechatMiniStore=A.ZEGO_ENV=void 0;var $,k,j=le(12),K=((k=$=A.ZEGO_ENV||(A.ZEGO_ENV={}))[k.BROWSER=0]="BROWSER",k[k.WEIXINMINI=1]="WEIXINMINI",le(3)),Z=(J.prototype.getItem=function(D){var G=this;return new Promise(function(M,L){try{M(wx.getStorageSync(G.keyPrefix+D))}catch(W){L(W)}})},J.prototype.setItem=function(D,G){var M=this;return new Promise(function(L,W){try{wx.setStorageSync(M.keyPrefix+D,G),L()}catch(ve){W(ve)}})},J.prototype.removeItem=function(D){var G=this;return new Promise(function(M,L){try{M(wx.removeStorageSync(G.keyPrefix+D))}catch(W){L(W)}})},J.prototype.clear=function(){return new Promise(function(D,G){try{wx.clearStorageSync(),D()}catch(M){G(M)}})},J.prototype.keys=function(){var D=this;return new Promise(function(G,M){try{var L=wx.getStorageInfoSync().keys,W=(K.log.warn("keys",L),[]);L.forEach(function(ve){ve.indexOf(D.keyPrefix)==0&&W.push(ve.replace(D.keyPrefix,""))}),K.log.warn("keyArr",JSON.stringify(W)),W.sort(),G(W)}catch(ve){M(ve)}})},J);function J(D){this.storeName=D,this.keyPrefix=D+"/",this.storeName}A.ZegoWechatMiniStore=Z,A.createZegoStore=function(D,G,M){return G===$.BROWSER?j.createInstance({name:D+":"+(M||"store")}):new Z(D)}},function(oe,A){oe.exports=se},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.DynamicCode=A.ZegoTracer=A.ZegoSpan=void 0;var $=le(14),k=(Object.defineProperty(A,"ZegoTracer",{enumerable:!0,get:function(){return $.ZegoTracer}}),le(46)),j=(Object.defineProperty(A,"DynamicCode",{enumerable:!0,get:function(){return k.DynamicCode}}),le(10));Object.defineProperty(A,"ZegoSpan",{enumerable:!0,get:function(){return j.ZegoSpan}})},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.ZegoTracer=void 0;var $=le(15),k=le(21),j=le(10),K=le(22),Z=le(3),J=le(1),D=le(8),G=le(23),M=le(39),L=le(11),W=le(44),ve=le(45);function de(ne){this.q=K.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new W.ZegoLog,this.stateCenter=new ve.StateCenter(this.log),this.stateCenter.proxyCtrl=ne}de.prototype.init=function(ne){this.options=ne,this.name=ne.product,this.reporter=new G.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:ne.appID,env:ne.env||0,importantLevel:ne.importantLevel,levels:ne.levels,deviceID:ne.deviceID,bps:ne.bps,serverUrl:ne.serverUrl}),this.tracer=new $.Tracer({name:this.name,version:ne.version},{resource:new D.Resource(ne.resources)},this.reporter,{spanStart:ne.spanStart,spanBeforeEnd:ne.spanBeforeEnd,spanEnd:ne.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.C(this.options),this.dyStore=L.createZegoStore(ne.product+"_"+ne.appID+"_dy",ne.env||0)},de.prototype.C=function(ne){this.rootSpan=this.tracer.startSpan("root",0);var he=J.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context.T().M=he,this.rootSpan.end()},de.prototype.createSpan=function(ne,he,_e){var Ue,Fe;return ne<=this.level?(Ue=_e&&_e.parent?J.setSpan(this.tracer.context.active(),_e.parent.span):J.setSpan(this.tracer.context.active(),this.rootSpan),Fe=[],_e&&_e.linkSpans&&(_e.linkSpans.forEach(function(ze){Fe.push({context:ze.span.context()})}),delete _e.linkSpans),he=this.tracer.startSpan(he,ne,Object.assign({},_e,{links:Fe}),Ue),ne=new j.ZegoSpan(he.spanContext.spanId,he),j.ZegoSpan.tracer=this.tracer,ne):(Z.log.warn("createSpan level not fix"),new j.ZegoSpan(K.NOOP_SPAN_ID,new k.NoopSpan))},de.prototype.setLogger=function(ne){this.stateCenter.logger=ne},de.prototype.setTimeOffset=function(ne){this.reporter.setTimeOffset(ne)},de.prototype.setWaitNtpTimeout=function(ne){this.reporter.setWaitNtpTimeout(ne)},de.prototype.setLogLevel=function(ne){return this.stateCenter.F.setLogLevel(ne)},de.prototype.startReport=function(ne){return this.reporter.startReport(ne)},de.prototype.setConfig=function(ne){this.reporter.setConfig(ne)},de.prototype.loadJs=function(ne,he,_e,Ue,Fe,ze){return M.loadJS(ne,this.dyStore,he,_e,Ue,Fe,ze)},de.prototype.flush=function(ne){this.reporter.flush(ne)},de.prototype.setUnloadState=function(ne){this.reporter.setUnloadState(ne)},de.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},de.prototype.destroy=function(){this.reporter.uninit()},de.prototype.setSampleConfig=function(ne){this.level=ne.level||this.level},de.prototype.setResource=function(ne){this.tracer.setResource(ne),this.reporter.setProcessData(this.tracer.resource.attributes)},de.prototype.setNetStateCheck=function(){this.reporter.setNetStateCheck()},A.ZegoTracer=de},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.Tracer=void 0;var $=le(6),k=le(1),j=le(2),K=le(7),Z=le(8),J=le(9),D=le(18),G=le(19);function M(L,W,ve,de){var ne=G.mergeConfig(W);this.I=ne.traceParams,this.k=new K.IdGenerator,this.resource=(ne=W.resource)!=null?ne:Z.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=L,W=Math.random().toString(36).slice(-6),this.context=new k.ContextAPI(W),this.reporter=ve,this.spanProcessor=de||{}}M.prototype.startSpan=function(L,W,ve,de){var ne,he,_e,Ue=function(We,rt){if(!We.root)return k.getSpanContext(rt)}(ve=ve===void 0?{}:ve,de=de===void 0?this.context.active():de),Fe=this.k.generateSpanId(),ze=(Ue=(Ue&&D.isSpanContextValid(Ue)?(ne=Ue.traceId,he=Ue.traceState,_e=Ue.spanId):ne=this.k.generateTraceId(),(Ue=ve.kind)!=null?Ue:j.SpanKind.INTERNAL),(ze=ve.links)!=null?ze:[]),Me=(ve=$.sanitizeAttributes(ve.attributes),j.TraceFlags.NONE);return(de=new J.Span(this,de,L,W,{traceId:ne,spanId:Fe,traceFlags:Me,traceState:he},Ue,_e,ze)).setAttributes(ve),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(de),de},M.prototype.setResource=function(L){this.resource=this.resource.merge(new Z.Resource(L))},M.prototype.getActiveTraceParams=function(){return this.I},A.Tracer=M},function(oe,A,le){var $=this&&this.__read||function(Z,J){var D=typeof Symbol=="function"&&Z[Symbol.iterator];if(!D)return Z;var G,M,L=D.call(Z),W=[];try{for(;(J===void 0||0<J--)&&!(G=L.next()).done;)W.push(G.value)}catch(ve){M={error:ve}}finally{try{G&&!G.done&&(D=L.return)&&D.call(L)}finally{if(M)throw M.error}}return W},k=this&&this.__spread||function(){for(var Z=[],J=0;J<arguments.length;J++)Z=Z.concat($(arguments[J]));return Z},j=(Object.defineProperty(A,"u",{value:!0}),A.StackContextManager=void 0,le(1));function K(){this.W=!1,this.M=j.ROOT_CONTEXT}K.prototype.K=function(Z,J){function D(){for(var M=this,L=[],W=0;W<arguments.length;W++)L[W]=arguments[W];return G.with(J,function(){return Z.apply(M,L)})}J===void 0&&(J=j.ROOT_CONTEXT);var G=this;return Object.defineProperty(D,"length",{enumerable:!1,configurable:!0,writable:!1,value:Z.length}),D},K.prototype.active=function(){return this.M},K.prototype.bind=function(Z,J){return(J=J===void 0?j.ROOT_CONTEXT:J)===void 0&&(J=this.active()),typeof Z=="function"?this.K(Z,J):Z},K.prototype.disable=function(){return this.M=j.ROOT_CONTEXT,this.W=!1,this},K.prototype.enable=function(){return this.W||(this.W=!0,this.M=j.ROOT_CONTEXT),this},K.prototype.with=function(Z,J,D){for(var G=[],M=3;M<arguments.length;M++)G[M-3]=arguments[M];var L=this.M;this.M=Z||j.ROOT_CONTEXT;try{return J.call.apply(J,k([D],G))}finally{this.M=L}},A.StackContextManager=K},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.getCurrentTime=A.isTimeInput=A.hrTimeToMilliseconds=A.hrTimeDuration=A.timeInputToHrTime=A.isTimeInputHrTime=A.hrTime=void 0;var $=9,k=Math.pow(10,$),j=["00","01","02","03","04","05","06","07","08","09"];function K(G){G/=1e3;var M=Math.trunc(G);return[M,Number((G-M).toFixed($))*k]}function Z(){var G,M=performance.timeOrigin;return typeof M!="number"?(G=performance).timing&&G.timing.fetchStart:M}function J(G){var M=K(Z()),L=(G=K(typeof G=="number"?G:performance.now()),M[0]+G[0]);return M=M[1]+G[1],k<M&&(M-=k,L+=1),[L,M]}function D(G){return Array.isArray(G)&&G.length===2&&typeof G[0]=="number"&&typeof G[1]=="number"}A.hrTime=J,A.isTimeInputHrTime=D,A.timeInputToHrTime=function(G){if(D(G))return G;if(typeof G=="number")return(G<Z()?J:K)(G);if(G instanceof Date)return K(G.getTime());throw TypeError("Invalid input type")},A.hrTimeDuration=function(G,M){var L=M[0]-G[0];return(M=M[1]-G[1])<0&&(--L,M+=k),[L,M]},A.hrTimeToMilliseconds=function(G){return Math.round(1e3*G[0]+G[1]/1e6)},A.isTimeInput=function(G){return D(G)||typeof G=="number"||G instanceof Date},A.getCurrentTime=function(){var G=new Date;return[G.getFullYear()+"/",(j[G.getMonth()+1]||G.getMonth()+1)+"/",(j[G.getDate()]||G.getDate())+" ",(j[G.getHours()]||G.getHours())+":",(j[G.getMinutes()]||G.getMinutes())+":",j[G.getSeconds()]||G.getSeconds(),"."+G.getTime()%1e3].join("")}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.isSpanContextValid=A.isValidSpanId=A.isValidTraceId=A.INVALID_SPAN_CONTEXT=A.INVALID_TRACEID=A.INVALID_SPANID=void 0,le=le(2);var $=/^([0-9a-f]{32})$/i,k=/^[0-9a-f]{16}$/i;function j(Z){return $.test(Z)&&Z!==A.INVALID_TRACEID}function K(Z){return k.test(Z)&&Z!==A.INVALID_SPANID}A.INVALID_SPANID="0000000000000000",A.INVALID_TRACEID="00000000000000000000000000000000",A.INVALID_SPAN_CONTEXT={traceId:A.INVALID_TRACEID,spanId:A.INVALID_SPANID,traceFlags:le.TraceFlags.NONE},A.isValidTraceId=j,A.isValidSpanId=K,A.isSpanContextValid=function(Z){return j(Z.traceId)&&K(Z.spanId)}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.mergeConfig=void 0;var $=le(20);A.mergeConfig=function(k){var j=Object.assign({},$.DEFAULT_CONFIG,k);return j.traceParams=Object.assign({},$.DEFAULT_CONFIG.traceParams,k.traceParams||{}),j}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.DEFAULT_CONFIG=void 0,A.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.NoopSpan=void 0;var $=le(2);function k(j){j===void 0&&(j=$.INVALID_SPAN_CONTEXT),this.X=j}k.prototype.context=function(){return this.X},k.prototype.setAttribute=function(j,K){return this},k.prototype.appendAttribute=function(j,K){return this},k.prototype.setAttributes=function(j){return this},k.prototype.addEvent=function(j,K,Z){return this},k.prototype.setStatus=function(j){return this},k.prototype.updateName=function(j){return this},k.prototype.end=function(j){},k.prototype.isRecording=function(){return!1},k.prototype.spanReport=function(){},k.prototype.recordException=function(j,K){},A.NoopSpan=k},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.NOOP_SPAN_ID=A.SCHEDULED_DELAY_MILLIS=A.DEFAULT_MAX_SPAN_SIZE=A.readSpanKeys=void 0,A.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],A.DEFAULT_MAX_SPAN_SIZE=1e3,A.SCHEDULED_DELAY_MILLIS=3e3,A.NOOP_SPAN_ID="noop"},function(oe,A,le){var $=this&&this.__assign||function(){return($=Object.assign||function(ne){for(var he,_e=1,Ue=arguments.length;_e<Ue;_e++)for(var Fe in he=arguments[_e])Object.prototype.hasOwnProperty.call(he,Fe)&&(ne[Fe]=he[Fe]);return ne}).apply(this,arguments)},k=this&&this.__awaiter||function(ne,he,_e,Ue){return new(_e=_e||Promise)(function(Fe,ze){function Me(dt){try{rt(Ue.next(dt))}catch(ht){ze(ht)}}function We(dt){try{rt(Ue.throw(dt))}catch(ht){ze(ht)}}function rt(dt){var ht;dt.done?Fe(dt.value):((ht=dt.value)instanceof _e?ht:new _e(function(Pt){Pt(ht)})).then(Me,We)}rt((Ue=Ue.apply(ne,he||[])).next())})},j=this&&this.__generator||function(ne,he){var _e,Ue,Fe,ze={label:0,sent:function(){if(1&Fe[0])throw Fe[1];return Fe[1]},trys:[],ops:[]},Me={next:We(0),throw:We(1),return:We(2)};return typeof Symbol=="function"&&(Me[Symbol.iterator]=function(){return this}),Me;function We(rt){return function(dt){var ht=[rt,dt];if(_e)throw new TypeError("Generator is already executing.");for(;ze;)try{if(_e=1,Ue&&(Fe=2&ht[0]?Ue.return:ht[0]?Ue.throw||((Fe=Ue.return)&&Fe.call(Ue),0):Ue.next)&&!(Fe=Fe.call(Ue,ht[1])).done)return Fe;switch(Ue=0,(ht=Fe?[2&ht[0],Fe.value]:ht)[0]){case 0:case 1:Fe=ht;break;case 4:return ze.label++,{value:ht[1],done:!1};case 5:ze.label++,Ue=ht[1],ht=[0];continue;case 7:ht=ze.ops.pop(),ze.trys.pop();continue;default:if(!(Fe=0<(Fe=ze.trys).length&&Fe[Fe.length-1])&&(ht[0]===6||ht[0]===2)){ze=0;continue}if(ht[0]===3&&(!Fe||ht[1]>Fe[0]&&ht[1]<Fe[3]))ze.label=ht[1];else if(ht[0]===6&&ze.label<Fe[1])ze.label=Fe[1],Fe=ht;else{if(!(Fe&&ze.label<Fe[2])){Fe[2]&&ze.ops.pop(),ze.trys.pop();continue}ze.label=Fe[2],ze.ops.push(ht)}}ht=he.call(ne,ze)}catch(Pt){ht=[6,Pt],Ue=0}finally{_e=Fe=0}if(5&ht[0])throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}},K=this&&this.__read||function(ne,he){var _e=typeof Symbol=="function"&&ne[Symbol.iterator];if(!_e)return ne;var Ue,Fe,ze=_e.call(ne),Me=[];try{for(;(he===void 0||0<he--)&&!(Ue=ze.next()).done;)Me.push(Ue.value)}catch(We){Fe={error:We}}finally{try{Ue&&!Ue.done&&(_e=ze.return)&&_e.call(ze)}finally{if(Fe)throw Fe.error}}return Me},Z=this&&this.__spread||function(){for(var ne=[],he=0;he<arguments.length;he++)ne=ne.concat(K(arguments[he]));return ne},J=this&&this.__values||function(ne){var he=typeof Symbol=="function"&&Symbol.iterator,_e=he&&ne[he],Ue=0;if(_e)return _e.call(ne);if(ne&&typeof ne.length=="number")return{next:function(){return{value:(ne=ne&&Ue>=ne.length?void 0:ne)&&ne[Ue++],done:!ne}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")},D=(Object.defineProperty(A,"u",{value:!0}),A.ZegoDataReport=void 0,le(0)),G=le(24),M=le(30),L=le(38),W=le(5),ve=le(4);function de(ne,he){this.G=he,this.QUEUE_MAX=100,this.cacheMaxSize=ve.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=ve.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:ve.CACHE_SIZE.totalAvailCache,totalDBSize:ve.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.postDataState="",this.product=ne,this.reportMap=new Map}de.prototype.init=function(ne){return k(this,void 0,void 0,function(){var he=this;return j(this,function(_e){switch(_e.label){case 0:return this.config=$($({},ve.DEFAULT_CONFIG),ne),this.config.env%2!=1&&this.H(),this.zegoService=new G.ZegoService(this.config.env||D.ZEGO_ENV.BROWSER,this.config.bps||ve.DEFAULT_CONFIG.bps,this.product,this.pro,this.G),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.Y.bind(this)),this.zegoService.setPostFailCallback(this.product,function(Ue){return k(he,void 0,void 0,function(){return j(this,function(Fe){switch(Fe.label){case 0:return this.G.logger.warn("zt.zd.i fail"),this.postDataState="fail",this.dropCount++,this.V(Ue),[4,this.Z(1)];case 1:return Fe.sent(),this.$("postFail"),[2]}})})}),this.tt(),this.storeHandler=new M.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",W.uuid(6),this.config,this.traceType,this.staticConfig,this.G),this.storeHandler.setDropCallBack(function(Ue){he.traceType.DB_O_DROP+=W.calculateMemSize(Ue),he.$("dataDroped",Ue)}),[4,this.storeHandler.loadPendingData()];case 1:return _e.sent(),this.storeHandler.init().then(function(){he.it()}).catch(function(Ue){console.warn(Ue)}),this.nt(),this.rt(),this.et(),[2]}})})},de.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null),this.zegoService.destroy()},de.prototype.setConfig=function(ne){typeof ne=="object"&&typeof ne.bps=="number"&&(this.config.bps=ne.bps,this.zegoService.setBps(this.config.bps)),typeof ne=="object"&&typeof ne.totalDBSize=="number"&&(this.staticConfig.totalDBSize=ne.totalDBSize),typeof ne=="object"&&typeof ne.serverUrl=="string"&&ne.serverUrl!==""&&(this.config.serverUrl=ne.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},de.prototype.pause=function(){this.isPaused=!0},de.prototype.resume=function(){this.isPaused=!1;var ne=(he=this.pendingQueue.getPendingDataInfo()).pendingDataSize,he=he.size;this.st(ne,he)},de.prototype.startReport=function(ne){var he=ne.get("userID"),_e=ne.get("token");return!(!he||typeof he!="string"||!_e||typeof _e!="string"||(this.startCommonField=ne,this.config.userID=he,this.config.token=_e,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.ut()&&this.ot(),(he=ne.get("serverUrl"))&&(this.config.serverUrl=he,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(ne=(_e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,he=_e.size,this.st(ne,he)),0))},de.prototype.setTimeOffset=function(ne){var he=this;this.clientTimeOffset=ne,this.tempBuffer.forEach(function(_e){(_e=_e.data).tags.time_offset||(_e.tags.time_offset=he.clientTimeOffset)}),this.config.userID&&this.ot()},de.prototype.setProcessData=function(ne){this.G.processData=ne},de.prototype.on=function(ne,he){return this.ht(ne,he)},de.prototype.off=function(ne,he){return this.ct(ne,he)},de.prototype.report=function(ne,he){var _e;if(15e3<ne.length)return!1;try{_e=JSON.parse(ne)}catch{return!1}return this.G.F.debug(ne+" "+he),(_e!=null&&_e.id_name||(ne=_e==null?void 0:_e.tags)!=null&&ne.id_name||this.config.userID)&&this.ut()?(_e!=null&&_e.id_name||(ne=_e==null?void 0:_e.tags)!=null&&ne.id_name?this.clientTimeOffset&&(_e.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(_e.tags.time_offset=this.clientTimeOffset),_e.tags.id_name=this.config.userID),this.ft(JSON.stringify(_e),he)):this.tempBuffer.push({data:_e,level:he}),!0},de.prototype.setUnloadState=function(ne){this.unloadLevel=ne,this.state="unload"},de.prototype.ft=function(ne,he){var _e=this,Ue=W.calculateMemSize(ne),Fe=(this.traceType.MEM_I_API+=Ue,D.getSeq()),ze=new Date().getTime(),Me={seq:Fe,content:ne,level:he,timestamp:ze};this.state==="unload"?this.unloadLevel!==void 0&&he<=this.unloadLevel?(this.storeHandler.saveDataToStorage(Me),this.pendingQueue.enqueue(Me,he)):this.G.F.debug("level is low"):he<=this.config.importantLevel?(Me.key=he+"_"+ze+"_"+Fe,this.dataInDb.push(Me.key),this.storeHandler.storeData(Me).then(function(We){_e.pendingQueue.enqueue(Me,he),_e.traceType.DB_I_BACKUP+=Ue}).catch(function(We){var rt=_e.dataInDb.findIndex(function(dt){return dt===Me.key});-1<rt&&_e.dataInDb.splice(rt,1),_e.pendingQueue.enqueue(Me,he)})):this.pendingQueue.enqueue(Me,he),this.state==="force"&&(ze=W.calculateMemSize(ne),this.forceDataTotalLen+=ze)},de.prototype.ut=function(){return this.isWaitNtpTimeout||this.clientTimeOffset!==void 0},de.prototype.ot=function(){var ne,he=this.tempBuffer.shift();he&&(ne=he.data,he=he.level,ne.tags.id_name=this.config.userID,this.ft(JSON.stringify(ne),he),this.ot())},de.prototype.isConfigOK=function(ne){return ne.userID!==""&&ne.token!==""&&ne.server!==""},de.prototype.testSize=function(ne){},de.prototype.flush=function(ne){var he;this.state!=="force"&&(this.state="force",he=16e6,typeof ne=="object"&&typeof ne.bps=="number"&&(he=ne.bps),this.zegoService.setBps(he),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,he=(ne=this.pendingQueue.getPendingDataInfo()).pendingDataSize,ne=ne.size,0<he?this.st(he,ne):this.it())},de.prototype.setWaitNtpTimeout=function(ne){this.waitNtpTimeout=ne},de.prototype.rt=function(){var ne=this;this.ntpTimer=setTimeout(function(){ne.isWaitNtpTimeout=!0,ne.config.userID&&ne.ot()},this.waitNtpTimeout)},de.prototype.nt=function(){var ne=this,he=(this.G.F.debug("startReportTimer "+new Date),this.timeInterval=!0,(_e=this.pendingQueue.getPendingDataInfo()).pendingDataSize),_e=_e.size;this.st(he,_e),this.reportTimer=window.setTimeout(function(){ne.nt()},3e4)},de.prototype.et=function(){return k(this,void 0,void 0,function(){var ne,he,_e=this;return j(this,function(Ue){switch(Ue.label){case 0:return he=this.pendingQueue.getPendingDataInfo(),ne=he.pendingDataSize,he=he.size,ne>this.config.reportSize||he>this.config.reportNum?[4,this.st(ne,he)]:[3,2];case 1:return Ue.sent(),[3,3];case 2:this.it(),Ue.label=3;case 3:return this.checkDataTimer=window.setTimeout(function(){_e.et()},15e3),[2]}})})},de.prototype.H=function(){var ne=this,he=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(he?"pagehide":"beforeunload",function(){window.event&&(window.event.cancelBubble=!0),ne.saveDataBeforeUnload()})},de.prototype.saveDataBeforeUnload=function(){(ne=this.pendingQueue.readStoreData(1)).totalLen;var ne=ne.storeArr,he=(this.storeHandler.resetCommonStore(),[]);he.push.apply(he,Z(ne)),ne=this.zegoService.readReportQueueData(),he.push.apply(he,Z(ne)),0<he.length&&this.storeHandler.storePendingData(he)},de.prototype.setNetStateCheck=function(){this.postDataState==="fail"&&this.zegoService.handleNetConnect()},de.prototype.Y=function(ne,he,_e){return k(this,void 0,void 0,function(){var Ue,Fe,ze,Me,We,rt=this;return j(this,function(dt){switch(dt.label){case 0:for(this.G.F.debug("post suc"),this.postDataState="suc",ne.forEach(function(ht){rt.traceType.MEM_O_DONE+=W.calculateMemSize(ht.content)}),Ue=function(ht){var Pt=ne[ht];Fe.storeHandler.removeDataItem(Pt).then(function(ye){Pt.key&&rt.reportMap.delete(Pt.key)}).catch(function(ye){})},Fe=this,ze=0;ze<ne.length;ze++)Ue(ze);return this.reportPackagesSize-=he,We=this.pendingQueue.getPendingDataInfo(),Me=We.pendingDataSize,We=We.size,Me>this.config.reportSize||We>this.config.reportNum?[4,this.st(Me,We)]:[3,2];case 1:return dt.sent(),[3,3];case 2:this.it(),dt.label=3;case 3:return this.state==="force"&&this.reportPackagesSize==0&&(Me=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,We=1-Number((Me/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this.$("progressUpdate",We),0<this.storeHandler.storeSize)&&this.it(function(ht){ht===0&&(rt.state="normal",rt.zegoService.setBps(rt.config.bps||ve.DEFAULT_CONFIG.bps),rt.listenerList.forceSuccessCallback)&&rt.$("forceResult","SUCCESS")}),[2]}})})},de.prototype.st=function(ne,he){return k(this,void 0,void 0,function(){var _e,Ue,Fe,ze,Me;return j(this,function(We){switch(We.label){case 0:return ne>this.config.reportSize||he>this.config.reportNum||["force","unload"].includes(this.state)||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:(this.G.F.debug("isPaused "+this.isPaused+" "+this.userID+" "+this.config.token+" "+this.config.serverUrl),ne>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.Z(this.cacheDelPer)]:[3,2])):[3,7];case 1:We.sent(),We.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),ne>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.Z(this.cacheDelPer)]:[3,5]);case 4:We.sent(),We.label=5;case 5:return[2];case 6:if(Fe=this.pendingQueue.readReportData(this.config.reportSize),_e=Fe.totalLen,Fe=Fe.reportDataArr,_e<=0)return[2];for(Fe=this.at(Fe),Ue=Fe.packageArr,Fe=Fe.packageLen,this.zegoService.report(Ue,Fe,this.product,this.state==="unload"),ze=0;ze<Ue.length;ze++)Me=Ue[ze],this.reportMap.set(Me.key,Me);this.reportPackagesSize+=Fe,this.pendingQueue.refresh(_e),We.label=7;case 7:return[2]}})})},de.prototype.tt=function(){var ne=this;this.pendingQueue=new L.PendingQueue(this.config.levels,this.product,this.staticConfig,this.G),this.pendingQueue.setListener({enCallback:function(he,_e,Ue){return k(ne,void 0,void 0,function(){return j(this,function(Fe){switch(Fe.label){case 0:return[4,this.st(Ue,_e)];case 1:return Fe.sent(),[2]}})})}})},de.prototype.lt=function(){var ne=this;this.storeHandler.readStoreDataItem().then(function(he){var _e=W.calculateMemSize(he.content);ne.traceType.MEM_I_LOAD+=_e,ne.pendingQueue.enqueue(he,he.level)}).catch(function(he){})},de.prototype.Z=function(ne){return k(this,void 0,void 0,function(){var he,_e,Ue,Fe,ze,Me,We,rt,dt;return j(this,function(ht){switch(ht.label){case 0:_e=this.pendingQueue.readStoreData(ne),he=_e.totalLen,_e=_e.storeArr,Ue=function(Pt){var ye,De;return j(this,function(xe){switch(xe.label){case 0:return xe.trys.push([0,2,,3]),[4,Fe.vt(Pt,he)];case 1:return xe.sent(),ye=Pt.level+"_"+Pt.timestamp+"_"+Pt.seq,-1<(De=Fe.dataInDb.findIndex(function(Je){return Je===ye}))&&Fe.dataInDb.splice(De,1),[3,3];case 2:return xe.sent(),[3,3];case 3:return[2]}})},Fe=this,ht.label=1;case 1:ht.trys.push([1,6,7,8]),ze=J(_e),Me=ze.next(),ht.label=2;case 2:return Me.done?[3,5]:(We=Me.value,[5,Ue(We)]);case 3:ht.sent(),ht.label=4;case 4:return Me=ze.next(),[3,2];case 5:return[3,8];case 6:return We=ht.sent(),rt={error:We},[3,8];case 7:try{Me&&!Me.done&&(dt=ze.return)&&dt.call(ze)}finally{if(rt)throw rt.error}return[7];case 8:return[2]}})})},de.prototype.V=function(ne){var he=this;ne.length&&ne.forEach(function(_e){he.storeHandler.storeData(_e).then(function(Ue){var Fe=W.calculateMemSize(_e.content);he.traceType.MEM_O_DUMP+=Fe}).catch(function(Ue){})})},de.prototype.vt=function(ne,he){var _e=this;return new Promise(function(Ue,Fe){return k(_e,void 0,void 0,function(){var ze;return j(this,function(Me){switch(Me.label){case 0:return Me.trys.push([0,2,,3]),[4,this.storeHandler.storeData(ne)];case 1:return Me.sent(),ze=W.calculateMemSize(ne.content),this.traceType.MEM_O_DUMP+=ze,Ue(),[3,3];case 2:return ze=Me.sent(),Fe(ze),[3,3];case 3:return[2]}})})})},de.prototype.it=function(ne){var he=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),function(_e){return-1<he.dataInDb.indexOf(_e)}).then(function(_e){he.isLoadReportData=!1,_e.datas.forEach(function(Ue){var Fe;he.reportMap.has(Ue.key)||he.pendingQueue.findInQueue(Ue)||(Fe=W.calculateMemSize(Ue.content),he.traceType.MEM_I_LOAD+=Fe,he.pendingQueue.enqueue(Ue,Ue.level),he.dataInDb.push(Ue.key))}),ne&&ne(_e.len)}).catch(function(_e){he.isLoadReportData=!1}))},de.prototype.at=function(ne){var he=this,_e=0;return ne.forEach(function(Ue){var Fe,ze,Me=JSON.parse(Ue.content);if(he.startCommonField)try{for(var We=J(he.startCommonField),rt=We.next();!rt.done;rt=We.next()){var dt=K(rt.value,2),ht=dt[0],Pt=dt[1];ht!=="userID"&&ht!=="token"&&ht!=="serverUrl"&&(Me[ht]=Pt)}}catch(ye){Fe={error:ye}}finally{try{rt&&!rt.done&&(ze=We.return)&&ze.call(We)}finally{if(Fe)throw Fe.error}}_e+=W.calculateMemSize(Me),Ue.content=JSON.stringify(Me)}),{packageArr:ne,packageLen:_e}},de.prototype.ht=function(ne,he){return!!this.listenerList[ne]&&typeof he=="function"&&(this.listenerList[ne].indexOf(he)==-1&&this.listenerList[ne].push(he),!0)},de.prototype.ct=function(ne,he){var _e;return!!this.listenerList[ne]&&(_e=this.listenerList[ne],he?_e.splice(_e.indexOf(he),1):this.listenerList[ne]=[],!0)},de.prototype.$=function(ne){for(var he=[],_e=1;_e<arguments.length;_e++)he[_e-1]=arguments[_e];this.listenerList[ne]&&this.listenerList[ne].forEach(function(Ue){try{Ue.apply(void 0,Z(he))}catch{}})},A.ZegoDataReport=de},function(oe,A,le){var $=this&&this.__read||function(G,M){var L=typeof Symbol=="function"&&G[Symbol.iterator];if(!L)return G;var W,ve,de=L.call(G),ne=[];try{for(;(M===void 0||0<M--)&&!(W=de.next()).done;)ne.push(W.value)}catch(he){ve={error:he}}finally{try{W&&!W.done&&(L=de.return)&&L.call(de)}finally{if(ve)throw ve.error}}return ne},k=this&&this.__spread||function(){for(var G=[],M=0;M<arguments.length;M++)G=G.concat($(arguments[M]));return G},j=(Object.defineProperty(A,"u",{value:!0}),A.ZegoService=void 0,le(0)),K=le(25),Z=le(29),J=le(4);function D(G,M,L,W,ve){var de,ne,he,_e=this;this.dt=G,this.yt=L,this.wt=W,this.G=ve,this.isDestroy=!1,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.bt=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=j.ENUM_NETWORK_STATE.online,this.state=j.ENUM_CONNECT_STATE.disconnected,this.gt=(ne=de=0,he=function(){ne=de=0},{onOpen:function(){de=performance.now()},onClose:function(){0<de&&(performance.now()-de<100?(ne++,_e.G.logger.info("zt.rzs.wfsc frequently shutdown.")):he())},isOutOfMaxTimes:function(){return 10<=ne}}),this.bindWindowListener(),this.networkState=j.ENUM_NETWORK_STATE.online,this.service=new K.LogService(G,L,W,ve),this.setBps(M),this.reportQueue=new j.Queue}D.prototype.destroy=function(){var G;(G=this.websocket)!=null&&G.close(),this.service.closeSocket(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),this.reportQueue.clear(),this.isDestroy=!0},D.prototype.bindWindowListener=function(){var G=this;window.addEventListener("offline",function(){G.networkState=j.ENUM_NETWORK_STATE.offline}),window.addEventListener("online",function(M){G.handleNetConnect()})},D.prototype.handleNetConnect=function(){this.networkState=j.ENUM_NETWORK_STATE.online;var G=this.url;this.url="",this.setLogServer(G),this.netWorkFail=!1},D.prototype.setLogServer=function(G){try{return G.startsWith("wss:")||G.startsWith("ws:")?(this.logType=j.ENUM_REMOTE_TYPE.WEBSOCKET,this._t(G)):G.startsWith("https:")||G.startsWith("http:")?(this.logType=j.ENUM_REMOTE_TYPE.HTTPS,this.Ot(G)):this.logType=j.ENUM_REMOTE_TYPE.DISABLE,!0}catch{return!1}},D.prototype.setLogUrlParams=function(G){this.logParams=G},D.prototype._t=function(G){var M=this;this.url!=G&&(this.url=G)&&(this.St(),this.logParams.id_name)&&(this.gt.isOutOfMaxTimes()?(this.G.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."),this.state=j.ENUM_CONNECT_STATE.disconnected):(this.state=j.ENUM_CONNECT_STATE.connecting,G+="?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(G),this.service.openHandler(function(){M.service.onPush(),M.service.startCheck(),M.G.logger.info("zt.rzs.owsls socket open"),M.openHandler(),M.gt.onOpen()}),this.service.closeHandler(function(L){M.G.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(L.code||L)),M.state=j.ENUM_CONNECT_STATE.disconnected,M.service.closeSocket(),M.gt.onClose()}),this.service.errorHandler(function(L){M.G.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(L.code||L)),M.state=j.ENUM_CONNECT_STATE.disconnected,M.service.closeSocket()})))},D.prototype.St=function(){this.service.closeSocket()},D.prototype.Ot=function(G){(this.url=G)&&this.Mt()},D.prototype.Mt=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},D.prototype.Et=function(G,M,L,W){this.dt===j.ZEGO_ENV.BROWSER?this.jt(G,M,L,W):this.SendHttpsLogWeChatMini(G,M,L,W)},D.prototype.jt=function(G,M,L,W){var ve=this,de=(G=JSON.stringify({body:{data:G}}),new XMLHttpRequest);de.onreadystatechange=function(){if(de.readyState==4)if(de.status==200){if(de.responseText.length!=0)try{var ne=JSON.parse(de.responseText).interval;typeof ne=="number"&&ve.logUploadInterval!==ne&&ve.Ot(ve.url),L&&L()}catch{W&&W()}}else W&&W()},de.open("POST",this.url,!0),de.send(G)},D.prototype.SendHttpsLogWeChatMini=function(G,M,L,W){var ve=this;G={appid:this.logParams.appid+"",timestamp:new Date().getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:G})},wx.request({url:this.url,data:JSON.stringify(G),method:"POST",success:function(de){de.data.length!=0&&(typeof(de=de&&de.data&&de.data.interval)=="number"&&ve.logUploadInterval!==de&&ve.Ot(ve.url),L)&&L()},fail:function(de){W&&W()}})},D.prototype.openHandler=function(){this.state=j.ENUM_CONNECT_STATE.connected,this.startReport()},D.prototype.setPostSucCallback=function(G,M){this.postSucCallbackList[G]=M},D.prototype.setPostFailCallback=function(G,M){this.postFailCallbackList[G]=M},D.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},D.prototype.report=function(G,M,L,W){this.packageLen++,this.packagesDataSize+=M,this.reportQueue.enqueue({reportDatas:G,dataLen:M,product:L}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport(W)},D.prototype.setBps=function(G){this.tokenBucket=new Z.TokenBucket(J.BUCKET_CONFIG.bucketSize,G/8,"sec")},D.prototype.startReport=function(G){var M,L,W,ve,de=this;this.isDestroy||(this.logType===j.ENUM_REMOTE_TYPE.WEBSOCKET&&this.state===j.ENUM_CONNECT_STATE.disconnected?(M=this.url,this.url="",this.setLogServer(M)):0<this.reportQueue.size()&&(M=this.reportQueue.dequeue(),L=M.reportDatas,W=M.dataLen,ve=M.product,G?this.sendReport(L,W,ve):this.tokenBucket.removeTokens(W,function(){de.sendReport(L,W,ve)})))},D.prototype.Tt=function(){if(this.failCount<=0)return!1;this.failCount==1&&(this.failStartTime=Date.now());var G=(Date.now()-this.failStartTime)/1e3;return this.failCount>=J.FAIL_COUNT&&G>J.FAIL_TIME||this.failCount>=J.FAIL_MAX_COUNT},D.prototype.sendReport=function(G,M,L){var W=this;this.reportData(G,M,L,function(){W.failCount=0,W.failStartTime=0,W.packageLen--,W.packagesDataSize-=M,W.postSucCallbackList[L]&&W.postSucCallbackList[L](G,M,L)},function(ve){var de;W.reportQueue.enqueue({reportDatas:G,dataLen:M,product:L}),W.failCount++,W.Tt()?(W.netWorkFail=!0,de=W.decodeReportQueue(),Object.keys(W.postFailCallbackList).forEach(function(ne){W.postFailCallbackList[L](de[ne])})):W.startReport()})},D.prototype.resumeReport=function(){this.netWorkFail===!0&&this.networkState===j.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},D.prototype.reportData=function(G,M,L,W,ve){var de=this,ne=[];G.forEach(function(he){ne.push(JSON.parse(he.content))}),this.logType==j.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState===j.ENUM_NETWORK_STATE.offline?ve&&ve(j.errorList.BROKEN):this.service.sendMessage("report",ne,W,function(he){var _e;de.state===j.ENUM_CONNECT_STATE.disconnected&&he===j.SOCKET_DISCONNECT&&(_e=de.url,de.url="",de.setLogServer(_e)),ve&&ve(he)}):this.logType==j.ENUM_REMOTE_TYPE.HTTPS&&this.Et(ne,M,W,function(){ve&&ve()})},D.prototype.unsigned2signed=function(G){var M=parseInt(G,10);if(256<M)return M%256;for(var L=[];0<M;)M%2!=0?L.push(1):L.push(0),M=Number(M/2);for(L.reverse();L.length<8;)L.unshift(0);var W="";if((L=L.join("")).substr(0,1)==1){for(var ve=1;ve<L.length;ve++)L.substr(ve,1)==1?W+=0:W+=1;return"-"+(parseInt(W,2)+1)}for(ve=0;ve<L.length;ve++)W+=L.substr(ve,1);return parseInt(W,2)},D.prototype.decodeReportQueue=function(){for(var G={},M=this.reportQueue.size(),L=0;L<M;L++){var W=this.reportQueue.dequeue(),ve=W.reportDatas,de=W.dataLen;G[W=W.product]||(G[W]=[]),G[W]=k(G[W],ve),this.reportQueue.enqueue({reportDatas:ve,dataLen:de,product:W})}return G},D.prototype.readReportQueueData=function(){for(var G=[],M=this.reportQueue.size(),L=0;L<M;L++){var W=this.reportQueue.dequeue(),ve=W.reportDatas;W.dataLen,W.product,G.push.apply(G,k(ve))}return G},A.ZegoService=D},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.LogService=void 0;var $=le(26),k=le(4),j=le(0);function K(Z,J,D,G){this.dt=Z,this.yt=J,this.wt=D,this.G=G,this.Nt=new $.ZegoSocketService(this.dt,this.yt,this.wt,this.G),this.At=0,this.Rt={}}K.prototype.It=function(Z){var J,D,G=this,M=this.Nt.sendCommandMap[Z.messageId||((M=Z==null?void 0:Z.data)==null?void 0:M.message_id)];M!=null&&(D=M.v,delete this.Nt.sendCommandMap[Z.messageId||((J=Z==null?void 0:Z.data)==null?void 0:J.message_id)],this.Nt.sendCommandList.remove(M),Z.code===0?setTimeout(function(){D&&D.success!=null&&D.success(Z,G.At)},0):setTimeout(function(){D&&D.error!=null&&D.error(Z,G.At)},0))},K.prototype.onPush=function(){var Z=this;this.Nt.onMessage=function(J){Z.It(J)}},K.prototype.closeHandler=function(Z){this.Nt.closeHandler(Z)},K.prototype.openHandler=function(Z){this.Nt.openHandler(Z)},K.prototype.errorHandler=function(Z){this.Nt.errorHandler(Z)},K.prototype.kt=function(Z){return{Protocol:"req",cmd:Z,appid:123,seq:++this.At,session_id:""}},K.prototype.startCheck=function(){this.Nt.startCheck()},K.prototype.stopCheck=function(){this.Nt.stopCheck()},K.prototype.isDisConnect=function(){return!this.Nt||this.Nt.isDisConnect()},K.prototype.createSocket=function(Z){this.Nt.createSocket(Z),this.Rt={}},K.prototype.closeSocket=function(){this.Nt.closeSocket()},K.prototype.sendMessage=function(Z,J,D,G,M,L){return this.Nt.isDisConnect()?(G&&G(j.SOCKET_DISCONNECT),0):(M=M||this.kt(Z),this.Nt.sendMessage(M,J,D,G,{timeOut:1e3*k.DEFAULT_CONFIG.netTimeout}))},K.prototype.on=function(Z,J){this.Rt[Z]=J},A.LogService=K},function(oe,A,le){var $=this&&this.__assign||function(){return($=Object.assign||function(J){for(var D,G=1,M=arguments.length;G<M;G++)for(var L in D=arguments[G])Object.prototype.hasOwnProperty.call(D,L)&&(J[L]=D[L]);return J}).apply(this,arguments)},k=(Object.defineProperty(A,"u",{value:!0}),A.ZegoSocketService=void 0,le(27)),j=le(0),K=le(28);function Z(J,D,G,M){this.yt=D,this.wt=G,this.G=M,this.Dt=null,this.sendCommandList=new j.LinkedList,this.sendCommandMap={},this.xt=100,this.Pt=3e4,this.Bt=2e3,this.ENV=J}Z.prototype.createSocket=function(J){this.Dt=k.createZegoWebSocket(J,this.ENV,this.G.proxyCtrl),this.Dt.binaryType="arraybuffer"},Z.prototype.closeSocket=function(){this.Dt&&(this.Dt.onclose=null,this.Dt.onerror=null,this.Dt.close(),this.Dt=null)},Z.prototype.isDisConnect=function(){return!this.Dt||this.Dt.readyState!==1},Z.prototype.sendMessage=function(J,D,G,M,L){G===void 0&&(G=null),M===void 0&&(M=null),L===void 0&&(L={timeOut:6e3});var W=$($({},this.G.processData),{time_upload:Date.now()});return W={data:D={message_id:J.seq,product:this.yt,s:JSON.stringify({speed_detail:D,process:W})},seq:J.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:L.timeOut,success:G,error:M},L=this.sendCommandList.push(W),this.sendCommandMap[W.seq]=L,this.Dt&&this.wt!=="pb"&&(this.G.F.debug("upload data",JSON.stringify(D)),G=K.deflate(JSON.stringify(D)),this.Dt.send(G)),J.seq},Z.prototype.Ut=function(J){for(var D=J.getFirst();D!=null;)J.remove(D),D.v&&D.v.error&&setTimeout(function(){D&&D.v&&D.v.error&&D.v.error(j.errorList.TIMEOUT,D.v.data.message_id,D.v.data.s)},0),D=J.getFirst()},Z.prototype.zt=function(J,D){for(var G=J.getFirst(),M=Date.parse(new Date+""),L=0;!(G==null||G.v&&G.v.sendTime+G.v.timeOut>M||(G.v&&delete D[G.v.data.message_id],J.remove(G),!(G.v&&G.v.error==null||G.v&&G.v.sendTime+this.Pt<M)&&G&&G.v&&G.v.error&&G.v.error(j.errorList.TIMEOUT,G.v.data.message_id,G.v.data.s),++L>=this.xt));)G=J.getFirst()},Z.prototype.startCheck=function(){var J=this;this.zt(this.sendCommandList,this.sendCommandMap),this.Lt=setTimeout(function(){J.startCheck()},this.Bt)},Z.prototype.stopCheck=function(){this.Ut(this.sendCommandList),clearTimeout(this.Lt)},Z.prototype.openHandler=function(J){var D=this;this.Dt&&(this.Dt.onopen=function(G){D.responseHandler(),J(G)})},Z.prototype.responseHandler=function(){var J=this;this.Dt&&(this.Dt.onmessage=function(D){D=typeof D.data=="string"?JSON.parse(D.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(D.data))),J.onMessage(D)})},Z.prototype.closeHandler=function(J){this.Dt&&(this.Dt.onclose=function(D){J(D)})},Z.prototype.errorHandler=function(J){this.Dt&&(this.Dt.onerror=J)},Z.prototype.onMessage=function(J){},A.ZegoSocketService=Z},function(oe,A,le){Object.defineProperty(A,"u",{value:!0}),A.createZegoWebSocket=A.ZegoWeiXinMiniWebSocket=void 0;var $=le(0),k=(j.prototype.init=function(){var K=this;this.Jt&&(this.readyState=0,this.Jt.onOpen(function(Z){K.readyState=K.Jt.readyState,typeof K.onopen=="function"&&(K.onopen(Z),K.Jt.onClose(function(J){K.readyState=K.Jt.readyState,typeof K.onclose=="function"&&K.onclose(J)}),K.Jt.onMessage(function(J){typeof K.onmessage=="function"&&K.onmessage(J)}))}),this.Jt.onError(function(Z){K.readyState=K.Jt.readyState,typeof K.onerror=="function"&&K.onerror(Z)}))},j.prototype.onopen=function(K){},j.prototype.onerror=function(K){},j.prototype.onclose=function(K){},j.prototype.onmessage=function(K){},j.prototype.send=function(K){this.Jt&&this.Jt.send({data:K})},j.prototype.close=function(){this.Jt&&this.Jt.close()},j);function j(K,Z){this.url=K,this.readyState=3,this.Jt=wx.connectSocket({url:K}),this.init()}A.ZegoWeiXinMiniWebSocket=k,A.createZegoWebSocket=function(K,Z,J){return Z%2===$.ZEGO_ENV.BROWSER?(Z=K,J?J.createSocket(Z,1):new WebSocket(Z)):new k(K)}},function(oe,A){oe.exports=Y},function(oe,A,le){function $(k,j,K,Z){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=k,this.tokensPerInterval=j,typeof K=="string")switch(K){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+K)}else this.interval=K;this.parentBucket=Z,this.content=0,this.lastDrip=+new Date}Object.defineProperty(A,"u",{value:!0}),A.TokenBucket=void 0,$.prototype.removeTokens=function(k,j){var K=this;return this.bucketSize?k>this.bucketSize?(setTimeout(j.bind(null,"Requested tokens "+k+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),k>this.content?Z():this.parentBucket?this.parentBucket.removeTokens(k,function(J,D){return J?j(J,null):k>K.content?Z():(K.content-=k,void j(null,Math.min(D,K.content)))}):(this.content-=k,setTimeout(j.bind(null,null,this.content),0),!0)):(setTimeout(j.bind(null,null,k,Number.POSITIVE_INFINITY),0),!0);function Z(){var J=Math.ceil((k-K.content)*(K.interval/K.tokensPerInterval));return setTimeout(function(){K.removeTokens(k,j)},J),!1}},$.prototype.tryRemoveTokens=function(k){if(this.bucketSize){if(k>this.bucketSize||(this.drip(),k>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(k))return!1;this.content-=k}return!0},$.prototype.drip=function(){var k,j;this.tokensPerInterval?(j=+new Date,k=Math.max(j-this.lastDrip,0),this.lastDrip=j,j=k*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+j,this.bucketSize)):this.content=this.bucketSize},A.TokenBucket=$},function(oe,A,le){var $=this&&this.__awaiter||function(M,L,W,ve){return new(W=W||Promise)(function(de,ne){function he(Fe){try{Ue(ve.next(Fe))}catch(ze){ne(ze)}}function _e(Fe){try{Ue(ve.throw(Fe))}catch(ze){ne(ze)}}function Ue(Fe){var ze;Fe.done?de(Fe.value):((ze=Fe.value)instanceof W?ze:new W(function(Me){Me(ze)})).then(he,_e)}Ue((ve=ve.apply(M,L||[])).next())})},k=this&&this.__generator||function(M,L){var W,ve,de,ne={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]},he={next:_e(0),throw:_e(1),return:_e(2)};return typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function _e(Ue){return function(Fe){var ze=[Ue,Fe];if(W)throw new TypeError("Generator is already executing.");for(;ne;)try{if(W=1,ve&&(de=2&ze[0]?ve.return:ze[0]?ve.throw||((de=ve.return)&&de.call(ve),0):ve.next)&&!(de=de.call(ve,ze[1])).done)return de;switch(ve=0,(ze=de?[2&ze[0],de.value]:ze)[0]){case 0:case 1:de=ze;break;case 4:return ne.label++,{value:ze[1],done:!1};case 5:ne.label++,ve=ze[1],ze=[0];continue;case 7:ze=ne.ops.pop(),ne.trys.pop();continue;default:if(!(de=0<(de=ne.trys).length&&de[de.length-1])&&(ze[0]===6||ze[0]===2)){ne=0;continue}if(ze[0]===3&&(!de||ze[1]>de[0]&&ze[1]<de[3]))ne.label=ze[1];else if(ze[0]===6&&ne.label<de[1])ne.label=de[1],de=ze;else{if(!(de&&ne.label<de[2])){de[2]&&ne.ops.pop(),ne.trys.pop();continue}ne.label=de[2],ne.ops.push(ze)}}ze=L.call(M,ne)}catch(Me){ze=[6,Me],ve=0}finally{W=de=0}if(5&ze[0])throw ze[1];return{value:ze[0]?ze[1]:void 0,done:!0}}}},j=this&&this.__importDefault||function(M){return M&&M.u?M:{default:M}},K=(Object.defineProperty(A,"u",{value:!0}),A.ZegoStoreHandler=void 0,le(11)),Z=le(5),J=le(4),D=j(le(12));function G(M,L,W,ve,de,ne){this.O=M,this.qt=L,this.Ct=W,this.Ft=ve,this.Wt=de,this.G=ne,this.storeSize=0,this.storeTime=0,this.storeDelPer=J.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.storesKeys="",this.transStores=[],this.store=K.createZegoStore(M,W.env,L),this.commonStore=K.createZegoStore("data_common",W.env,"reporter")}Object.defineProperty(G.prototype,"Kt",{get:function(){return"z_t_"+this.Ct.appID},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"Xt",{get:function(){return"z_store_keys"},enumerable:!1,configurable:!0}),G.prototype.init=function(){return $(this,void 0,void 0,function(){var M,L;return k(this,function(W){switch(W.label){case 0:return W.trys.push([0,6,,7]),this.setCommonStoreState(),[4,this.transferStoreData()];case 1:return W.sent(),[4,this.commonStore.getItem(this.O+this.interSymbol+this.qt)];case 2:return(M=W.sent())?[3,4]:(L={storeSize:this.storeSize,lock:0,pros:1},[4,this.commonStore.setItem(this.O+this.interSymbol+this.qt,L)]);case 3:return W.sent(),[3,5];case 4:L=typeof M=="string"?JSON.parse(M):M,this.storeSize=L.storeSize,W.label=5;case 5:return[3,7];case 6:return W.sent(),[3,7];case 7:return[2]}})})},G.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},G.prototype.setCommonStoreState=function(){var M=this,L=(this.getStorage(this.Xt)||"").split(";");this.transStores=L.filter(function(W){return W.includes(M.Ct.appID+"")}),L=L.filter(function(W){return!W.includes(M.Ct.appID+"")}),this.storesKeys=L.join(";")},G.prototype.resetCommonStore=function(){return $(this,void 0,void 0,function(){var M;return k(this,function(L){switch(L.label){case 0:return M=0<this.storesKeys.length?";":"",this.saveStorage(this.Xt,this.storesKeys+M+this.O+this.interSymbol+this.qt),[4,this.commonStore.setItem(this.O+this.interSymbol+this.qt,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return L.sent(),[2]}})})},G.prototype.transferStoreData=function(){return $(this,void 0,void 0,function(){var M,L,W,ve,de=this;return k(this,function(ne){switch(ne.label){case 0:return[4,this.commonStore.keys()];case 1:M=ne.sent(),L=function(he){var _e,Ue,Fe,ze,Me,We,rt,dt;return k(this,function(ht){switch(ht.label){case 0:return(_e=M[he])===W.O+W.interSymbol+W.qt?[3,9]:[4,W.commonStore.getItem(_e)];case 1:return(Ue=typeof(Ue=ht.sent())=="string"?JSON.parse(Ue):Ue).lock||Ue.pros&&!W.transStores.includes(_e)?[3,9]:(ze=_e.split(W.interSymbol),Fe=ze[0],ze=ze[1],[4,(Me=K.createZegoStore(Fe,W.Ct.env,ze)).keys()]);case 2:return(We=ht.sent()).length!=0?[3,3]:[3,8];case 3:return Ue.lock=1,[4,W.commonStore.setItem(_e,Ue)];case 4:ht.sent(),rt=function(Pt){var ye,De,xe,Je,ut;return k(this,function(re){switch(re.label){case 0:return ye=We[Pt],[4,Me.getItem(ye)];case 1:return De=re.sent(),ye.indexOf("pending")!==-1?De&&JSON.parse(De).forEach(function(Se){return $(de,void 0,void 0,function(){return k(this,function(we){switch(we.label){case 0:return[4,this.storeData(Se)];case 1:return we.sent(),[2]}})})}):(ut=Z.analyzeKey(ye),xe=ut.level,Je=ut.timestamp,ut=ut.seq,W.storeData({level:xe,timestamp:Je,seq:ut,content:De})),setTimeout(function(){return $(de,void 0,void 0,function(){return k(this,function(Se){switch(Se.label){case 0:return[4,Me.removeItem(ye)];case 1:return Se.sent(),[2]}})})},300),[2]}})},dt=0,ht.label=5;case 5:return dt<We.length?[5,rt(dt)]:[3,8];case 6:ht.sent(),ht.label=7;case 7:return dt++,[3,5];case 8:W.drops.push({name:Fe,storeName:ze}),ht.label=9;case 9:return[2]}})},W=this,ve=0,ne.label=2;case 2:return ve<M.length?[5,L(ve)]:[3,5];case 3:ne.sent(),ne.label=4;case 4:return ve++,[3,2];case 5:return this.transportStorageData(),setTimeout(function(){return $(de,void 0,void 0,function(){var he,_e,Ue;return k(this,function(Fe){switch(Fe.label){case 0:he=0,Fe.label=1;case 1:if(!(he<this.drops.length))return[3,7];Ue=this.drops[he],_e=Ue.name,Ue=Ue.storeName,Fe.label=2;case 2:return Fe.trys.push([2,5,,6]),[4,this.dropInstance(_e,Ue)];case 3:return Fe.sent(),[4,this.commonStore.removeItem(_e+this.interSymbol+Ue)];case 4:case 5:return Fe.sent(),[3,6];case 6:return he++,[3,1];case 7:return[2]}})})},1e3),[2]}})})},G.prototype.dropInstance=function(M,L){return new Promise(function(W,ve){D.default.dropInstance({name:M+":"+L}).then(function(){W()}).catch(function(de){ve(de)})})},G.prototype.setDropCallBack=function(M){this.dropCallBack=M},G.prototype.storeData=function(M){var L=this;return new Promise(function(W,ve){return $(L,void 0,void 0,function(){var de,ne,he,_e,Ue,Fe=this;return k(this,function(ze){switch(ze.label){case 0:de=M.level,_e=M.timestamp,ne=M.seq,he=M.content,_e=de+"_"+_e+"_"+ne,ze.label=1;case 1:return ze.trys.push([1,3,,4]),[4,this.store.getItem(_e)];case 2:return ze.sent()?(W(),[2]):[3,4];case 3:return ze.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(M),[2];if(Ue=Z.calculateMemSize(_e)+Z.calculateMemSize(he),this.Wt.totalDBSize-Ue<=0)return this.dropDBData(de,_e,he).then(function(){Fe.droping=!1,Fe.bufferDump()}).catch(function(Me){}),W(),[2];ze.label=5;case 5:return ze.trys.push([5,8,,9]),[4,this.store.setItem(_e,he)];case 6:return ze.sent(),this.storeSize+=Ue,this.Wt.totalDBSize-=Ue,[4,this.Gt()];case 7:return ze.sent(),W(),[3,9];case 8:return ze.sent().name==="QuotaExceededError"&&this.dropDBData(de,_e,he).then(function(){Fe.droping=!1,Fe.bufferDump()}).catch(function(Me){}),[3,9];case 9:return[2]}})})})},G.prototype.loadPendingData=function(){return $(this,void 0,void 0,function(){var M=this;return k(this,function(L){switch(L.label){case 0:return[4,this.store.keys()];case 1:return L.sent().forEach(function(W){return $(M,void 0,void 0,function(){var ve,de=this;return k(this,function(ne){switch(ne.label){case 0:return W.indexOf("pending")===-1?[3,3]:[4,this.store.getItem(W)];case 1:return(ve=ne.sent())?(JSON.parse(ve).forEach(function(he){return $(de,void 0,void 0,function(){return k(this,function(_e){switch(_e.label){case 0:return[4,this.storeData(he)];case 1:return _e.sent(),[2]}})})}),[4,this.store.removeItem(W)]):[3,3];case 2:ne.sent(),ne.label=3;case 3:return[2]}})})}),[2]}})})},G.prototype.storePendingData=function(M){return $(this,void 0,void 0,function(){return k(this,function(L){switch(L.label){case 0:return[4,this.store.setItem("pending"+new Date().getTime(),JSON.stringify(M))];case 1:return L.sent(),[2]}})})},G.prototype.bufferDump=function(){return $(this,void 0,void 0,function(){var M;return k(this,function(L){switch(L.label){case 0:return(M=this.bufferData.pop())?[4,this.storeData(M)]:[3,2];case 1:L.sent(),this.bufferDump(),L.label=2;case 2:return[2]}})})},G.prototype.dropDBData=function(M,L,W){return $(this,void 0,void 0,function(){var ve=this;return k(this,function(de){return this.droping=!0,[2,new Promise(function(ne,he){return $(ve,void 0,void 0,function(){var _e,Ue,Fe,ze,Me;return k(this,function(We){switch(We.label){case 0:return We.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(_e=We.sent()).reverse(),Ue=Math.ceil(_e.length*this.storeDelPer),Fe=0,We.label=2;case 2:return Fe<Ue?[4,this.store.getItem(_e[Fe])]:[3,7];case 3:return(ze=We.sent())==null?[3,6]:[4,this.store.removeItem(_e[Fe])];case 4:return We.sent(),Me=Z.calculateMemSize(_e[Fe])+Z.calculateMemSize(ze),this.Wt.totalDBSize+=Me,this.storeSize-=Me,[4,this.Gt()];case 5:We.sent(),this.dropCallBack(ze),We.label=6;case 6:return Fe++,[3,2];case 7:return[4,this.store.setItem(L,W)];case 8:return We.sent(),this.storeSize+=Z.calculateMemSize(L)+Z.calculateMemSize(W),[4,this.Gt()];case 9:return We.sent(),ne(),[3,11];case 10:return Me=We.sent(),he(Me),[3,11];case 11:return[2]}})})})]})})},G.prototype.removeDataItem=function(M){var L=this;return new Promise(function(W,ve){return $(L,void 0,void 0,function(){var de,ne,he,_e,Ue;return k(this,function(Fe){switch(Fe.label){case 0:de=M.level,he=M.timestamp,_e=M.seq,M.content,de=de+"_"+he+"_"+_e,Fe.label=1;case 1:return Fe.trys.push([1,6,,7]),[4,this.store.getItem(de)];case 2:return(ne=Fe.sent())?[4,this.store.removeItem(de)]:[3,5];case 3:return Fe.sent(),he=this.Ct.env==1?Z.calculateMemSize(JSON.parse(ne)):Z.calculateMemSize(ne),_e=Z.calculateMemSize(de)+he,this.storeSize-=_e,this.Wt.totalDBSize+=_e,this.Ft.DB_O_DONE+=_e,[4,this.Gt()];case 4:Fe.sent(),W(),Fe.label=5;case 5:return[3,7];case 6:return Ue=Fe.sent(),ve(Ue),[3,7];case 7:return[2]}})})})},G.prototype.Gt=function(){return $(this,void 0,void 0,function(){return k(this,function(M){switch(M.label){case 0:return M.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.O+this.interSymbol+this.qt)];case 1:return M.sent()?[4,this.commonStore.setItem(this.O+this.interSymbol+this.qt,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:M.sent(),M.label=3;case 3:return[3,5];case 4:return M.sent(),[3,5];case 5:return[2]}})})},G.prototype.readStoreDataItem=function(){var M=this;return new Promise(function(L,W){return $(M,void 0,void 0,function(){var ve,de,ne,he,_e;return k(this,function(Ue){switch(Ue.label){case 0:return Ue.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return ve=Ue.sent(),[4,this.store.getItem(ve[0])];case 2:return de=Ue.sent(),he=Z.analyzeKey(ve[0]),_e=he.level,ne=he.timestamp,he=he.seq,L({level:_e,timestamp:ne,seq:he,content:de}),[3,4];case 3:return _e=Ue.sent(),W(_e),[3,4];case 4:return[2]}})})})},G.prototype.loadDBData=function(M,L,W,ve){var de=this;return new Promise(function(ne,he){return $(de,void 0,void 0,function(){var _e,Ue,Fe,ze,Me,We,rt,dt,ht,Pt;return k(this,function(ye){switch(ye.label){case 0:return ye.trys.push([0,6,,7]),[4,this.store.keys()];case 1:_e=ye.sent(),Ue=[],We=Me=ze=Fe=0,ye.label=2;case 2:return We<_e.length?ve(_e[We])?[3,4]:[4,this.store.getItem(_e[We])]:[3,5];case 3:if((rt=ye.sent())==null)return[3,4];if(dt=Z.analyzeKey(_e[We]),ht=dt.level,Pt=dt.timestamp,dt=dt.seq,Ue.push({level:ht,timestamp:Pt,seq:dt,content:rt,key:_e[We]}),ht=Z.calculateMemSize(rt),ze+=ht,M<=(Fe+=ht)&&(Fe=0,Me++),L<=Me&&W<=ze)return[3,5];ye.label=4;case 4:return We++,[3,2];case 5:return ne({datas:Ue,len:ze}),[3,7];case 6:return Pt=ye.sent(),he(Pt),[3,7];case 7:return[2]}})})})},G.prototype.sortKeys=function(M,L){L===void 0&&(L=!1),M.sort(function(W,ve){return W=W.split("_"),+(ve=ve.split("_"))[0]-+W[0]||+ve[1]-+W[1]||+ve[2]-+W[2]}),L&&M.reverse()},G.prototype.saveStorage=function(M,L){try{localStorage.setItem(M,L)}catch{this.G.F.debug("storage set err")}},G.prototype.getStorage=function(M){try{return localStorage.getItem(M)}catch{this.G.F.debug("storage get err")}},G.prototype.saveDataToStorage=function(M){try{var L=M.level,W=M.timestamp,ve=M.seq,de=M.content,ne=L+"_"+W+"_"+ve;this.saveStorage(this.Kt+"_"+ne,de)}catch(he){this.G.F.debug("saveDataToStorage "+JSON.stringify(he))}},G.prototype.transportStorageData=function(){for(var M=[],L=0;L<localStorage.length;L++){var W,ve,de,ne,he=localStorage.key(L);this.G.F.debug("transportStorageData "+he),he!=null&&he.startsWith(this.Kt)&&(de=he.replace(this.Kt+"_",""),W=(de=Z.analyzeKey(de)).level,ve=de.timestamp,de=de.seq,typeof(ne=this.getStorage(he))=="string"&&this.storeData({level:W,timestamp:ve,seq:de,content:ne}),M.push(he))}setTimeout(function(){for(var _e=0;_e<M.length;_e++)localStorage.removeItem(M[_e])},100)},A.ZegoStoreHandler=G},function(oe,A,le){var $=le(32),k=le(33).Buffer;oe.exports=function(j){return function K(Z){return function(J){if(k.isBuffer(J))return J.length;switch(typeof J){case"string":return J.length*$.STRING;case"boolean":return $.BOOLEAN;case"number":return $.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(J)?Symbol.keyFor(J).length*$.STRING:(J.toString().length-8)*$.STRING;case"object":if(Array.isArray(J))return J.map(K(Z)).reduce(function(de,ne){return de+ne},0);var D=Z,G=J;if(G==null)return 0;for(var M=0,L=function(de){var ne,he=[];for(ne in de)he.push(ne);return Object.getOwnPropertySymbols&&(de=Object.getOwnPropertySymbols(de),Array.prototype.push.apply(he,de)),he}(G),W=0;W<L.length;W++){var ve=L[W];if(typeof G[ve]=="object"&&G[ve]!==null){if(D.has(G[ve]))continue;D.add(G[ve])}M+=K(D)(ve);try{M+=K(D)(G[ve])}catch(de){de instanceof RangeError&&(M=0)}}return M;default:return 0}}}(new WeakSet)(j)}},function(oe,A){oe.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(oe,A,le){(function($){var k=le(35),j=le(36),K=le(37);function Z(){return D.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function J(re,Se){if(Z()<Se)throw new RangeError("Invalid typed array length");return D.TYPED_ARRAY_SUPPORT?(re=new Uint8Array(Se)).__proto__=D.prototype:(re=re===null?new D(Se):re).length=Se,re}function D(re,Se,we){if(!(D.TYPED_ARRAY_SUPPORT||this instanceof D))return new D(re,Se,we);if(typeof re!="number")return G(this,re,Se,we);if(typeof Se=="string")throw new Error("If encoding is specified then the first argument must be a string");return L(this,re)}function G(re,Se,we,Ke){if(typeof Se=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&Se instanceof ArrayBuffer){var je=re,St=Se,xt=we;if(St.byteLength,xt<0||St.byteLength<xt)throw new RangeError("'offset' is out of bounds");if(St.byteLength<xt+(Ke||0))throw new RangeError("'length' is out of bounds");return St=xt===void 0&&Ke===void 0?new Uint8Array(St):Ke===void 0?new Uint8Array(St,xt):new Uint8Array(St,xt,Ke),D.TYPED_ARRAY_SUPPORT?(je=St).__proto__=D.prototype:je=W(je,St),je}if(typeof Se!="string"){if(xt=re,Ke=Se,D.isBuffer(Ke))return(xt=J(xt,St=0|ve(Ke.length))).length!==0&&Ke.copy(xt,0,0,St),xt;if(Ke){if(typeof ArrayBuffer<"u"&&Ke.buffer instanceof ArrayBuffer||"length"in Ke)return typeof Ke.length!="number"||(St=Ke.length)!=St?J(xt,0):W(xt,Ke);if(Ke.type==="Buffer"&&K(Ke.data))return W(xt,Ke.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(je=re,Ke=Se,D.isEncoding(re=typeof(re=we)=="string"&&re!==""?re:"utf8"))return(Ke=(je=J(je,Se=0|de(Ke,re))).write(Ke,re))!==Se?je.slice(0,Ke):je;throw new TypeError('"encoding" must be a valid string encoding')}function M(re){if(typeof re!="number")throw new TypeError('"size" argument must be a number');if(re<0)throw new RangeError('"size" argument must not be negative')}function L(re,Se){if(M(Se),re=J(re,Se<0?0:0|ve(Se)),!D.TYPED_ARRAY_SUPPORT)for(var we=0;we<Se;++we)re[we]=0;return re}function W(re,Se){var we=Se.length<0?0:0|ve(Se.length);re=J(re,we);for(var Ke=0;Ke<we;Ke+=1)re[Ke]=255&Se[Ke];return re}function ve(re){if(re>=Z())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z().toString(16)+" bytes");return 0|re}function de(re,Se){if(D.isBuffer(re))return re.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(re)||re instanceof ArrayBuffer))return re.byteLength;var we=(re=typeof re!="string"?""+re:re).length;if(we===0)return 0;for(var Ke=!1;;)switch(Se){case"ascii":case"latin1":case"binary":return we;case"utf8":case"utf-8":case void 0:return xe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*we;case"hex":return we>>>1;case"base64":return Je(re).length;default:if(Ke)return xe(re).length;Se=(""+Se).toLowerCase(),Ke=!0}}function ne(re,Se,we){var Ke=re[Se];re[Se]=re[we],re[we]=Ke}function he(re,Se,we,Ke,je){if(re.length===0)return-1;if(typeof we=="string"?(Ke=we,we=0):2147483647<we?we=2147483647:we<-2147483648&&(we=-2147483648),we=+we,(we=(we=isNaN(we)?je?0:re.length-1:we)<0?re.length+we:we)>=re.length){if(je)return-1;we=re.length-1}else if(we<0){if(!je)return-1;we=0}if(typeof Se=="string"&&(Se=D.from(Se,Ke)),D.isBuffer(Se))return Se.length===0?-1:_e(re,Se,we,Ke,je);if(typeof Se=="number")return Se&=255,D.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?(je?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(re,Se,we):_e(re,[Se],we,Ke,je);throw new TypeError("val must be string, number or Buffer")}function _e(re,Se,we,Ke,je){var St=1,xt=re.length,Ht=Se.length;if(Ke!==void 0&&((Ke=String(Ke).toLowerCase())==="ucs2"||Ke==="ucs-2"||Ke==="utf16le"||Ke==="utf-16le")){if(re.length<2||Se.length<2)return-1;xt/=St=2,Ht/=2,we/=2}function $t(nt,tt){return St===1?nt[tt]:nt.readUInt16BE(tt*St)}if(je)for(var ci=-1,He=we;He<xt;He++)if($t(re,He)===$t(Se,ci===-1?0:He-ci)){if(He-(ci=ci===-1?He:ci)+1===Ht)return ci*St}else ci!==-1&&(He-=He-ci),ci=-1;else for(He=we=xt<we+Ht?xt-Ht:we;0<=He;He--){for(var Ee=!0,it=0;it<Ht;it++)if($t(re,He+it)!==$t(Se,it)){Ee=!1;break}if(Ee)return He}return-1}function Ue(re,Se,we,Ke){return ut(function(je){for(var St=[],xt=0;xt<je.length;++xt)St.push(255&je.charCodeAt(xt));return St}(Se),re,we,Ke)}function Fe(re,Se,we){we=Math.min(re.length,we);for(var Ke=[],je=Se;je<we;){var St,xt,Ht,$t,ci=re[je],He=null,Ee=239<ci?4:223<ci?3:191<ci?2:1;if(je+Ee<=we)switch(Ee){case 1:ci<128&&(He=ci);break;case 2:(192&(St=re[je+1]))==128&&127<($t=(31&ci)<<6|63&St)&&(He=$t);break;case 3:St=re[je+1],xt=re[je+2],(192&St)==128&&(192&xt)==128&&2047<($t=(15&ci)<<12|(63&St)<<6|63&xt)&&($t<55296||57343<$t)&&(He=$t);break;case 4:St=re[je+1],xt=re[je+2],Ht=re[je+3],(192&St)==128&&(192&xt)==128&&(192&Ht)==128&&65535<($t=(15&ci)<<18|(63&St)<<12|(63&xt)<<6|63&Ht)&&$t<1114112&&(He=$t)}He===null?(He=65533,Ee=1):65535<He&&(Ke.push((He-=65536)>>>10&1023|55296),He=56320|1023&He),Ke.push(He),je+=Ee}var it=Ke,nt=it.length;if(nt<=ze)return String.fromCharCode.apply(String,it);for(var tt="",Et=0;Et<nt;)tt+=String.fromCharCode.apply(String,it.slice(Et,Et+=ze));return tt}A.Buffer=D,A.SlowBuffer=function(re){return D.alloc(+(re=+re!=re?0:re))},A.INSPECT_MAX_BYTES=50,D.TYPED_ARRAY_SUPPORT=$.TYPED_ARRAY_SUPPORT!==void 0?$.TYPED_ARRAY_SUPPORT:function(){try{var re=new Uint8Array(1);return re.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},re.foo()===42&&typeof re.subarray=="function"&&re.subarray(1,1).byteLength===0}catch{return!1}}(),A.kMaxLength=Z(),D.poolSize=8192,D.Ht=function(re){return re.__proto__=D.prototype,re},D.from=function(re,Se,we){return G(null,re,Se,we)},D.TYPED_ARRAY_SUPPORT&&(D.prototype.__proto__=Uint8Array.prototype,D.__proto__=Uint8Array,typeof Symbol<"u")&&Symbol.species&&D[Symbol.species]===D&&Object.defineProperty(D,Symbol.species,{value:null,configurable:!0}),D.alloc=function(re,Se,we){return M(re),re<=0||Se===void 0?J(null,re):typeof we=="string"?J(null,re).fill(Se,we):J(null,re).fill(Se)},D.allocUnsafe=function(re){return L(null,re)},D.allocUnsafeSlow=function(re){return L(null,re)},D.isBuffer=function(re){return!(re==null||!re.Yt)},D.compare=function(re,Se){if(!D.isBuffer(re)||!D.isBuffer(Se))throw new TypeError("Arguments must be Buffers");if(re===Se)return 0;for(var we=re.length,Ke=Se.length,je=0,St=Math.min(we,Ke);je<St;++je)if(re[je]!==Se[je]){we=re[je],Ke=Se[je];break}return we<Ke?-1:Ke<we?1:0},D.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},D.concat=function(re,Se){if(!K(re))throw new TypeError('"list" argument must be an Array of Buffers');if(re.length===0)return D.alloc(0);if(Se===void 0)for(je=Se=0;je<re.length;++je)Se+=re[je].length;for(var we=D.allocUnsafe(Se),Ke=0,je=0;je<re.length;++je){var St=re[je];if(!D.isBuffer(St))throw new TypeError('"list" argument must be an Array of Buffers');St.copy(we,Ke),Ke+=St.length}return we},D.byteLength=de,D.prototype.Yt=!0,D.prototype.swap16=function(){var re=this.length;if(re%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Se=0;Se<re;Se+=2)ne(this,Se,Se+1);return this},D.prototype.swap32=function(){var re=this.length;if(re%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Se=0;Se<re;Se+=4)ne(this,Se,Se+3),ne(this,Se+1,Se+2);return this},D.prototype.swap64=function(){var re=this.length;if(re%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Se=0;Se<re;Se+=8)ne(this,Se,Se+7),ne(this,Se+1,Se+6),ne(this,Se+2,Se+5),ne(this,Se+3,Se+4);return this},D.prototype.toString=function(){var re=0|this.length;return re==0?"":arguments.length===0?Fe(this,0,re):(function(Se,we,Ke){var je,St,xt=!1;if((we=we===void 0||we<0?0:we)>this.length||(Ke=Ke===void 0||Ke>this.length?this.length:Ke)<=0||(Ke>>>=0)<=(we>>>=0))return"";for(Se=Se||"utf8";;)switch(Se){case"hex":var Ht=we,$t=Ke,ci=this.length;(!$t||$t<0||ci<$t)&&($t=ci);for(var He="",Ee=Ht=!Ht||Ht<0?0:Ht;Ee<$t;++Ee)He+=(St=this[Ee])<16?"0"+St.toString(16):St.toString(16);return He;case"utf8":case"utf-8":return Fe(this,we,Ke);case"ascii":ci=we;for(var it=Ke,nt="",tt=(it=Math.min(this.length,it),ci);tt<it;++tt)nt+=String.fromCharCode(127&this[tt]);return nt;case"latin1":case"binary":Ht=we;for(var Et=Ke,Nt="",Vt=(Et=Math.min(this.length,Et),Ht);Vt<Et;++Vt)Nt+=String.fromCharCode(this[Vt]);return Nt;case"base64":return It=this,je=Ke,(ri=we)===0&&je===It.length?k.fromByteArray(It):k.fromByteArray(It.slice(ri,je));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var It=we,ri=Ke,gi=this.slice(It,ri),Si="",Hi=0;Hi<gi.length;Hi+=2)Si+=String.fromCharCode(gi[Hi]+256*gi[Hi+1]);return Si;default:if(xt)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),xt=!0}}).apply(this,arguments)},D.prototype.equals=function(re){if(D.isBuffer(re))return this===re||D.compare(this,re)===0;throw new TypeError("Argument must be a Buffer")},D.prototype.inspect=function(){var re="",Se=A.INSPECT_MAX_BYTES;return 0<this.length&&(re=this.toString("hex",0,Se).match(/.{2}/g).join(" "),this.length>Se)&&(re+=" ... "),"<Buffer "+re+">"},D.prototype.compare=function(re,Se,we,Ke,je){if(!D.isBuffer(re))throw new TypeError("Argument must be a Buffer");if(we===void 0&&(we=re?re.length:0),Ke===void 0&&(Ke=0),je===void 0&&(je=this.length),(Se=Se===void 0?0:Se)<0||we>re.length||Ke<0||je>this.length)throw new RangeError("out of range index");if(je<=Ke&&we<=Se)return 0;if(je<=Ke)return-1;if(we<=Se)return 1;if(this===re)return 0;for(var St=(je>>>=0)-(Ke>>>=0),xt=(we>>>=0)-(Se>>>=0),Ht=Math.min(St,xt),$t=this.slice(Ke,je),ci=re.slice(Se,we),He=0;He<Ht;++He)if($t[He]!==ci[He]){St=$t[He],xt=ci[He];break}return St<xt?-1:xt<St?1:0},D.prototype.includes=function(re,Se,we){return this.indexOf(re,Se,we)!==-1},D.prototype.indexOf=function(re,Se,we){return he(this,re,Se,we,!0)},D.prototype.lastIndexOf=function(re,Se,we){return he(this,re,Se,we,!1)},D.prototype.write=function(re,Se,we,Ke){if(Se===void 0)Ke="utf8",we=this.length,Se=0;else if(we===void 0&&typeof Se=="string")Ke=Se,we=this.length,Se=0;else{if(!isFinite(Se))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Se|=0,isFinite(we)?(we|=0,Ke===void 0&&(Ke="utf8")):(Ke=we,we=void 0)}var je=this.length-Se;if((we===void 0||je<we)&&(we=je),0<re.length&&(we<0||Se<0)||Se>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ke=Ke||"utf8";for(var St,xt,Ht,$t,ci=!1;;)switch(Ke){case"hex":var He,Ee=re,it=we,nt=(He=Number(Se)||0,this.length-He);if((!it||nt<(it=Number(it)))&&(it=nt),(nt=Ee.length)%2!=0)throw new TypeError("Invalid hex string");nt/2<it&&(it=nt/2);for(var tt=0;tt<it;++tt){var Et=parseInt(Ee.substr(2*tt,2),16);if(isNaN(Et))return tt;this[He+tt]=Et}return tt;case"utf8":case"utf-8":return nt=Se,xt=we,ut(xe(re,(St=this).length-nt),St,nt,xt);case"ascii":case"latin1":case"binary":return Ue(this,re,Se,we);case"base64":return St=this,xt=Se,Ht=we,ut(Je(re),St,xt,Ht);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht=Se,$t=we,ut(function(Nt,Vt){for(var It,ri,gi=[],Si=0;Si<Nt.length&&!((Vt-=2)<0);++Si)ri=(It=Nt.charCodeAt(Si))>>8,gi.push(It%256),gi.push(ri);return gi}(re,this.length-Ht),this,Ht,$t);default:if(ci)throw new TypeError("Unknown encoding: "+Ke);Ke=(""+Ke).toLowerCase(),ci=!0}},D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ze=4096;function Me(re,Se,we){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(we<re+Se)throw new RangeError("Trying to access beyond buffer length")}function We(re,Se,we,Ke,je,St){if(!D.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(je<Se||Se<St)throw new RangeError('"value" argument is out of bounds');if(we+Ke>re.length)throw new RangeError("Index out of range")}function rt(re,Se,we,Ke){Se<0&&(Se=65535+Se+1);for(var je=0,St=Math.min(re.length-we,2);je<St;++je)re[we+je]=(Se&255<<8*(Ke?je:1-je))>>>8*(Ke?je:1-je)}function dt(re,Se,we,Ke){Se<0&&(Se=4294967295+Se+1);for(var je=0,St=Math.min(re.length-we,4);je<St;++je)re[we+je]=Se>>>8*(Ke?je:3-je)&255}function ht(re,Se,we,Ke){if(we+Ke>re.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("Index out of range")}function Pt(re,Se,we,Ke,je){return je||ht(re,0,we,4),j.write(re,Se,we,Ke,23,4),we+4}function ye(re,Se,we,Ke,je){return je||ht(re,0,we,8),j.write(re,Se,we,Ke,52,8),we+8}D.prototype.slice=function(re,Se){var we=this.length;if((re=~~re)<0?(re+=we)<0&&(re=0):we<re&&(re=we),(Se=Se===void 0?we:~~Se)<0?(Se+=we)<0&&(Se=0):we<Se&&(Se=we),Se<re&&(Se=re),D.TYPED_ARRAY_SUPPORT)(je=this.subarray(re,Se)).__proto__=D.prototype;else for(var Ke=Se-re,je=new D(Ke,void 0),St=0;St<Ke;++St)je[St]=this[St+re];return je},D.prototype.readUIntLE=function(re,Se,we){re|=0,Se|=0,we||Me(re,Se,this.length);for(var Ke=this[re],je=1,St=0;++St<Se&&(je*=256);)Ke+=this[re+St]*je;return Ke},D.prototype.readUIntBE=function(re,Se,we){re|=0,Se|=0,we||Me(re,Se,this.length);for(var Ke=this[re+--Se],je=1;0<Se&&(je*=256);)Ke+=this[re+--Se]*je;return Ke},D.prototype.readUInt8=function(re,Se){return Se||Me(re,1,this.length),this[re]},D.prototype.readUInt16LE=function(re,Se){return Se||Me(re,2,this.length),this[re]|this[re+1]<<8},D.prototype.readUInt16BE=function(re,Se){return Se||Me(re,2,this.length),this[re]<<8|this[re+1]},D.prototype.readUInt32LE=function(re,Se){return Se||Me(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+16777216*this[re+3]},D.prototype.readUInt32BE=function(re,Se){return Se||Me(re,4,this.length),16777216*this[re]+(this[re+1]<<16|this[re+2]<<8|this[re+3])},D.prototype.readIntLE=function(re,Se,we){re|=0,Se|=0,we||Me(re,Se,this.length);for(var Ke=this[re],je=1,St=0;++St<Se&&(je*=256);)Ke+=this[re+St]*je;return(je*=128)<=Ke&&(Ke-=Math.pow(2,8*Se)),Ke},D.prototype.readIntBE=function(re,Se,we){re|=0,Se|=0,we||Me(re,Se,this.length);for(var Ke=Se,je=1,St=this[re+--Ke];0<Ke&&(je*=256);)St+=this[re+--Ke]*je;return(je*=128)<=St&&(St-=Math.pow(2,8*Se)),St},D.prototype.readInt8=function(re,Se){return Se||Me(re,1,this.length),128&this[re]?-1*(255-this[re]+1):this[re]},D.prototype.readInt16LE=function(re,Se){return Se||Me(re,2,this.length),32768&(Se=this[re]|this[re+1]<<8)?4294901760|Se:Se},D.prototype.readInt16BE=function(re,Se){return Se||Me(re,2,this.length),32768&(Se=this[re+1]|this[re]<<8)?4294901760|Se:Se},D.prototype.readInt32LE=function(re,Se){return Se||Me(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},D.prototype.readInt32BE=function(re,Se){return Se||Me(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},D.prototype.readFloatLE=function(re,Se){return Se||Me(re,4,this.length),j.read(this,re,!0,23,4)},D.prototype.readFloatBE=function(re,Se){return Se||Me(re,4,this.length),j.read(this,re,!1,23,4)},D.prototype.readDoubleLE=function(re,Se){return Se||Me(re,8,this.length),j.read(this,re,!0,52,8)},D.prototype.readDoubleBE=function(re,Se){return Se||Me(re,8,this.length),j.read(this,re,!1,52,8)},D.prototype.writeUIntLE=function(re,Se,we,Ke){re=+re,Se|=0,we|=0,Ke||We(this,re,Se,we,Math.pow(2,8*we)-1,0);var je=1,St=0;for(this[Se]=255&re;++St<we&&(je*=256);)this[Se+St]=re/je&255;return Se+we},D.prototype.writeUIntBE=function(re,Se,we,Ke){re=+re,Se|=0,we|=0,Ke||We(this,re,Se,we,Math.pow(2,8*we)-1,0);var je=we-1,St=1;for(this[Se+je]=255&re;0<=--je&&(St*=256);)this[Se+je]=re/St&255;return Se+we},D.prototype.writeUInt8=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,1,255,0),D.TYPED_ARRAY_SUPPORT||(re=Math.floor(re)),this[Se]=255&re,Se+1},D.prototype.writeUInt16LE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,2,65535,0),D.TYPED_ARRAY_SUPPORT?(this[Se]=255&re,this[Se+1]=re>>>8):rt(this,re,Se,!0),Se+2},D.prototype.writeUInt16BE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,2,65535,0),D.TYPED_ARRAY_SUPPORT?(this[Se]=re>>>8,this[Se+1]=255&re):rt(this,re,Se,!1),Se+2},D.prototype.writeUInt32LE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,4,4294967295,0),D.TYPED_ARRAY_SUPPORT?(this[Se+3]=re>>>24,this[Se+2]=re>>>16,this[Se+1]=re>>>8,this[Se]=255&re):dt(this,re,Se,!0),Se+4},D.prototype.writeUInt32BE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,4,4294967295,0),D.TYPED_ARRAY_SUPPORT?(this[Se]=re>>>24,this[Se+1]=re>>>16,this[Se+2]=re>>>8,this[Se+3]=255&re):dt(this,re,Se,!1),Se+4},D.prototype.writeIntLE=function(re,Se,we,Ke){re=+re,Se|=0,Ke||We(this,re,Se,we,(Ke=Math.pow(2,8*we-1))-1,-Ke);var je=0,St=1,xt=0;for(this[Se]=255&re;++je<we&&(St*=256);)re<0&&xt===0&&this[Se+je-1]!==0&&(xt=1),this[Se+je]=(re/St>>0)-xt&255;return Se+we},D.prototype.writeIntBE=function(re,Se,we,Ke){re=+re,Se|=0,Ke||We(this,re,Se,we,(Ke=Math.pow(2,8*we-1))-1,-Ke);var je=we-1,St=1,xt=0;for(this[Se+je]=255&re;0<=--je&&(St*=256);)re<0&&xt===0&&this[Se+je+1]!==0&&(xt=1),this[Se+je]=(re/St>>0)-xt&255;return Se+we},D.prototype.writeInt8=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,1,127,-128),D.TYPED_ARRAY_SUPPORT||(re=Math.floor(re)),this[Se]=255&(re=re<0?255+re+1:re),Se+1},D.prototype.writeInt16LE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,2,32767,-32768),D.TYPED_ARRAY_SUPPORT?(this[Se]=255&re,this[Se+1]=re>>>8):rt(this,re,Se,!0),Se+2},D.prototype.writeInt16BE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,2,32767,-32768),D.TYPED_ARRAY_SUPPORT?(this[Se]=re>>>8,this[Se+1]=255&re):rt(this,re,Se,!1),Se+2},D.prototype.writeInt32LE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,4,2147483647,-2147483648),D.TYPED_ARRAY_SUPPORT?(this[Se]=255&re,this[Se+1]=re>>>8,this[Se+2]=re>>>16,this[Se+3]=re>>>24):dt(this,re,Se,!0),Se+4},D.prototype.writeInt32BE=function(re,Se,we){return re=+re,Se|=0,we||We(this,re,Se,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),D.TYPED_ARRAY_SUPPORT?(this[Se]=re>>>24,this[Se+1]=re>>>16,this[Se+2]=re>>>8,this[Se+3]=255&re):dt(this,re,Se,!1),Se+4},D.prototype.writeFloatLE=function(re,Se,we){return Pt(this,re,Se,!0,we)},D.prototype.writeFloatBE=function(re,Se,we){return Pt(this,re,Se,!1,we)},D.prototype.writeDoubleLE=function(re,Se,we){return ye(this,re,Se,!0,we)},D.prototype.writeDoubleBE=function(re,Se,we){return ye(this,re,Se,!1,we)},D.prototype.copy=function(re,Se,we,Ke){if(we=we||0,Ke||Ke===0||(Ke=this.length),Se>=re.length&&(Se=re.length),(Ke=0<Ke&&Ke<we?we:Ke)===we||re.length===0||this.length===0)return 0;if((Se=Se||0)<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("sourceStart out of bounds");if(Ke<0)throw new RangeError("sourceEnd out of bounds");Ke>this.length&&(Ke=this.length);var je,St=(Ke=re.length-Se<Ke-we?re.length-Se+we:Ke)-we;if(this===re&&we<Se&&Se<Ke)for(je=St-1;0<=je;--je)re[je+Se]=this[je+we];else if(St<1e3||!D.TYPED_ARRAY_SUPPORT)for(je=0;je<St;++je)re[je+Se]=this[je+we];else Uint8Array.prototype.set.call(re,this.subarray(we,we+St),Se);return St},D.prototype.fill=function(re,Se,we,Ke){if(typeof re=="string"){var je;if(typeof Se=="string"?(Ke=Se,Se=0,we=this.length):typeof we=="string"&&(Ke=we,we=this.length),re.length===1&&(je=re.charCodeAt(0))<256&&(re=je),Ke!==void 0&&typeof Ke!="string")throw new TypeError("encoding must be a string");if(typeof Ke=="string"&&!D.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke)}else typeof re=="number"&&(re&=255);if(Se<0||this.length<Se||this.length<we)throw new RangeError("Out of range index");if(!(we<=Se))if(Se>>>=0,we=we===void 0?this.length:we>>>0,typeof(re=re||0)=="number")for(Ht=Se;Ht<we;++Ht)this[Ht]=re;else for(var St=D.isBuffer(re)?re:xe(new D(re,Ke).toString()),xt=St.length,Ht=0;Ht<we-Se;++Ht)this[Ht+Se]=St[Ht%xt];return this};var De=/[^+\/0-9A-Za-z-_]/g;function xe(re,Se){Se=Se||1/0;for(var we,Ke=re.length,je=null,St=[],xt=0;xt<Ke;++xt){if(55295<(we=re.charCodeAt(xt))&&we<57344){if(!je){if(56319<we){-1<(Se-=3)&&St.push(239,191,189);continue}if(xt+1===Ke){-1<(Se-=3)&&St.push(239,191,189);continue}je=we;continue}if(we<56320){-1<(Se-=3)&&St.push(239,191,189),je=we;continue}we=65536+(je-55296<<10|we-56320)}else je&&-1<(Se-=3)&&St.push(239,191,189);if(je=null,we<128){if(--Se<0)break;St.push(we)}else if(we<2048){if((Se-=2)<0)break;St.push(we>>6|192,63&we|128)}else if(we<65536){if((Se-=3)<0)break;St.push(we>>12|224,we>>6&63|128,63&we|128)}else{if(!(we<1114112))throw new Error("Invalid code point");if((Se-=4)<0)break;St.push(we>>18|240,we>>12&63|128,we>>6&63|128,63&we|128)}}return St}function Je(re){return k.toByteArray(function(Se){var we;if((Se=((we=Se).trim?we.trim():we.replace(/^\s+|\s+$/g,"")).replace(De,"")).length<2)return"";for(;Se.length%4!=0;)Se+="=";return Se}(re))}function ut(re,Se,we,Ke){for(var je=0;je<Ke&&!(je+we>=Se.length||je>=re.length);++je)Se[je+we]=re[je];return je}}).call(this,le(34))},function(oe,A){var le=function(){return this}();try{le=le||new Function("return this")()}catch{typeof window=="object"&&(le=window)}oe.exports=le},function(oe,A,le){A.byteLength=function(D){return 3*((D=J(D))[0]+(D=D[1]))/4-D},A.toByteArray=function(D){for(var G,M=(L=J(D))[0],L=L[1],W=new j(3*(M+L)/4-L),ve=0,de=0<L?M-4:M,ne=0;ne<de;ne+=4)G=k[D.charCodeAt(ne)]<<18|k[D.charCodeAt(ne+1)]<<12|k[D.charCodeAt(ne+2)]<<6|k[D.charCodeAt(ne+3)],W[ve++]=G>>16&255,W[ve++]=G>>8&255,W[ve++]=255&G;return L===2&&(G=k[D.charCodeAt(ne)]<<2|k[D.charCodeAt(ne+1)]>>4,W[ve++]=255&G),L===1&&(G=k[D.charCodeAt(ne)]<<10|k[D.charCodeAt(ne+1)]<<4|k[D.charCodeAt(ne+2)]>>2,W[ve++]=G>>8&255,W[ve++]=255&G),W},A.fromByteArray=function(D){for(var G,M=D.length,L=M%3,W=[],ve=0,de=M-L;ve<de;ve+=16383)W.push(function(ne,he){for(var _e,Ue=[],Fe=ve;Fe<he;Fe+=3)_e=(ne[Fe]<<16&16711680)+(ne[Fe+1]<<8&65280)+(255&ne[Fe+2]),Ue.push($[_e>>18&63]+$[_e>>12&63]+$[_e>>6&63]+$[63&_e]);return Ue.join("")}(D,de<ve+16383?de:ve+16383));return L==1?(G=D[M-1],W.push($[G>>2]+$[G<<4&63]+"==")):L==2&&(G=(D[M-2]<<8)+D[M-1],W.push($[G>>10]+$[G>>4&63]+$[G<<2&63]+"=")),W.join("")};for(var $=[],k=[],j=typeof Uint8Array<"u"?Uint8Array:Array,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=0;Z<64;++Z)$[Z]=K[Z],k[K.charCodeAt(Z)]=Z;function J(D){var G=D.length;if(0<G%4)throw new Error("Invalid string. Length must be a multiple of 4");return G=(D=(D=D.indexOf("="))===-1?G:D)===G?0:4-D%4,[D,G]}k[45]=62,k[95]=63},function(oe,A){A.read=function(le,$,k,j,K){var Z,J,D=8*K-j-1,G=(1<<D)-1,M=G>>1,L=-7,W=k?K-1:0,ve=k?-1:1;for(K=le[$+W],W+=ve,Z=K&(1<<-L)-1,K>>=-L,L+=D;0<L;Z=256*Z+le[$+W],W+=ve,L-=8);for(J=Z&(1<<-L)-1,Z>>=-L,L+=j;0<L;J=256*J+le[$+W],W+=ve,L-=8);if(Z===0)Z=1-M;else{if(Z===G)return J?NaN:1/0*(K?-1:1);J+=Math.pow(2,j),Z-=M}return(K?-1:1)*J*Math.pow(2,Z-j)},A.write=function(le,$,k,j,K,Z){var J,D,G=8*Z-K-1,M=(1<<G)-1,L=M>>1,W=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,ve=j?0:Z-1,de=j?1:-1;for(Z=$<0||$===0&&1/$<0?1:0,$=Math.abs($),isNaN($)||$===1/0?(D=isNaN($)?1:0,J=M):(J=Math.floor(Math.log($)/Math.LN2),$*(j=Math.pow(2,-J))<1&&(J--,j*=2),2<=($+=1<=J+L?W/j:W*Math.pow(2,1-L))*j&&(J++,j/=2),M<=J+L?(D=0,J=M):1<=J+L?(D=($*j-1)*Math.pow(2,K),J+=L):(D=$*Math.pow(2,L-1)*Math.pow(2,K),J=0));8<=K;le[k+ve]=255&D,ve+=de,D/=256,K-=8);for(J=J<<K|D,G+=K;0<G;le[k+ve]=255&J,ve+=de,J/=256,G-=8);le[k+ve-de]|=128*Z}},function(oe,A){var le={}.toString;oe.exports=Array.isArray||function($){return le.call($)=="[object Array]"}},function(oe,A,le){var $=this&&this.__read||function(J,D){var G=typeof Symbol=="function"&&J[Symbol.iterator];if(!G)return J;var M,L,W=G.call(J),ve=[];try{for(;(D===void 0||0<D--)&&!(M=W.next()).done;)ve.push(M.value)}catch(de){L={error:de}}finally{try{M&&!M.done&&(G=W.return)&&G.call(W)}finally{if(L)throw L.error}}return ve},k=this&&this.__spread||function(){for(var J=[],D=0;D<arguments.length;D++)J=J.concat($(arguments[D]));return J},j=(Object.defineProperty(A,"u",{value:!0}),A.PendingQueue=void 0,le(0)),K=le(5);function Z(J,D,G,M){var L=this;this.Vt=J,this.yt=D,this.Wt=G,this.G=M,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,J.forEach(function(W){L.cacheMap.set(W,new j.Queue)})}Z.prototype.enqueue=function(J,D){(D=this.cacheMap.get(D))&&!D.all().find(function(G){return G.content==J.content})&&(D.enqueue(J),D=K.calculateMemSize(J.content),this.pendingDataSize+=D,this.size++,this.Wt.totalAvailCache-=D,this.enCallback)&&this.enCallback(this.byteLength,this.size,this.pendingDataSize)},Z.prototype.dequeue=function(J){return J=(J=this.cacheMap.get(J))==null?void 0:J.dequeue(),this.size--,this.deCallback&&this.deCallback(),J},Z.prototype.findInQueue=function(J){var D=(D=this.cacheMap.get(J.level))==null?void 0:D.all();return D==null?void 0:D.find(function(G){return G.key===J.key})},Z.prototype.readReportData=function(J){var D=k(this.cacheMap.entries());return D=this.readData(D,J,!0),this.reset(),{totalLen:D.totalLen,reportDataArr:D.resArr}},Z.prototype.readStoreData=function(J){J=Math.ceil(this.pendingDataSize*J);var D=k(this.cacheMap.entries()).reverse();return D=this.readData(D,J,!1),this.refresh(D.totalLen),{totalLen:D.totalLen,storeArr:D.resArr}},Z.prototype.readData=function(J,D,G){var M=[],L=0;e:for(var W=0;W<J.length;W++)for(var ve=$(J[W],2),de=ve[0],ne=ve[1];ne.size();){var he=this.dequeue(de);if(M.push(he),D<(L+=K.calculateMemSize(he.content)))break e}return{totalLen:L,resArr:M}},Z.prototype.decodeReportData=function(J){var D=this;J.forEach(function(G){D.enqueue(G,G.level)})},Z.prototype.setListener=function(J){this.enCallback=J.enCallback,this.deCallback=J.deCallback},Z.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},Z.prototype.refresh=function(J){this.pendingDataSize-=J,this.Wt.totalAvailCache+=J},Z.prototype.reset=function(){this.byteLength=0},A.PendingQueue=Z},function(oe,A,le){var $=this&&this.__awaiter||function(Z,J,D,G){return new(D=D||Promise)(function(M,L){function W(ne){try{de(G.next(ne))}catch(he){L(he)}}function ve(ne){try{de(G.throw(ne))}catch(he){L(he)}}function de(ne){var he;ne.done?M(ne.value):((he=ne.value)instanceof D?he:new D(function(_e){_e(he)})).then(W,ve)}de((G=G.apply(Z,J||[])).next())})},k=this&&this.__generator||function(Z,J){var D,G,M,L={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]},W={next:ve(0),throw:ve(1),return:ve(2)};return typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function ve(de){return function(ne){var he=[de,ne];if(D)throw new TypeError("Generator is already executing.");for(;L;)try{if(D=1,G&&(M=2&he[0]?G.return:he[0]?G.throw||((M=G.return)&&M.call(G),0):G.next)&&!(M=M.call(G,he[1])).done)return M;switch(G=0,(he=M?[2&he[0],M.value]:he)[0]){case 0:case 1:M=he;break;case 4:return L.label++,{value:he[1],done:!1};case 5:L.label++,G=he[1],he=[0];continue;case 7:he=L.ops.pop(),L.trys.pop();continue;default:if(!(M=0<(M=L.trys).length&&M[M.length-1])&&(he[0]===6||he[0]===2)){L=0;continue}if(he[0]===3&&(!M||he[1]>M[0]&&he[1]<M[3]))L.label=he[1];else if(he[0]===6&&L.label<M[1])L.label=M[1],M=he;else{if(!(M&&L.label<M[2])){M[2]&&L.ops.pop(),L.trys.pop();continue}L.label=M[2],L.ops.push(he)}}he=J.call(Z,L)}catch(_e){he=[6,_e],G=0}finally{D=M=0}if(5&he[0])throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}}},j=(Object.defineProperty(A,"u",{value:!0}),A.loadJS=void 0,le(40));function K(Z,J,D){return(Z=j.decrypt(Z,J))&&j.hashMd5(Z)===D?Z:""}A.loadJS=function(Z,J,D,G,M,L,W){var ve=this;return new Promise(function(de,ne){return $(ve,void 0,void 0,function(){var he,_e,Ue,Fe,ze;return k(this,function(Me){switch(Me.label){case 0:if(he="dy",Z)return[3,7];Me.label=1;case 1:return Me.trys.push([1,5,,6]),[4,J.getItem("code")];case 2:return _e=Me.sent(),[4,J.getItem("key")];case 3:return Ue=Me.sent(),[4,J.getItem("hash")];case 4:Fe=Me.sent();var We=K(_e,Ue,Fe)||L,rt=he,dt=W,ht=document.getElementsByTagName("HEAD").item(0),Pt=document.createElement("script");Pt.language="javascript",Pt.type="text/javascript",Pt.id=rt,Pt.param=dt;try{Pt.appendChild(document.createTextNode(We))}catch{Pt.text=We}return ht.appendChild(Pt),de(),[3,6];case 5:return Me.sent(),ne(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{ze=new ActiveXObject("Msxml2.XMLHTTP")}catch{ze=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(ze=new XMLHttpRequest);return ze.open("GET",D,!0),ze.send(null),ze.onreadystatechange=function(){return $(this,void 0,void 0,function(){return k(this,function(ye){switch(ye.label){case 0:if(ze.readyState!=4)return[3,10];if(!(200<=ze.status&&ze.status<300||ze.status==0||ze.status==304))return[3,8];ye.label=1;case 1:return ye.trys.push([1,6,,7]),K(ze.responseText,G,M)?[4,J.setItem("code",ze.responseText)]:[3,5];case 2:return ye.sent(),[4,J.setItem("key",G)];case 3:return ye.sent(),[4,J.setItem("hash",M)];case 4:ye.sent(),ye.label=5;case 5:return de(),[3,7];case 6:return ye.sent(),ne(),[3,7];case 7:return[2];case 8:return ne(),[2];case 9:return[3,11];case 10:case 11:return[2]}})})},[2]}})})})}},function(oe,A,le){var $=this&&this.__importDefault||function(Z){return Z&&Z.u?Z:{default:Z}},k=(Object.defineProperty(A,"u",{value:!0}),A.hashMd5=A.decrypt=void 0,$(le(41))),j=$(le(42)),K=$(le(43));A.decrypt=function(Z,J){var D="";try{D=j.default.decrypt(Z,J).toString(K.default)}catch{}return D},A.hashMd5=function(Z){return k.default(Z).toString()}},function(oe,A){oe.exports=pe},function(oe,A){oe.exports=ce},function(oe,A){oe.exports=X},function(oe,A,le){function $(){this.logLevel=A.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(A,"u",{value:!0}),A.ZegoLog=A.ENUM_LOG_LEVEL=void 0,A.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},$.prototype.setLogLevel=function(k){return(k=A.ENUM_LOG_LEVEL[k])!==void 0&&(this.logLevel=k,!0)},$.prototype.debug=function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];var K=k.join(" ");this.logLevel!==A.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=A.ENUM_LOG_LEVEL.DEBUG&&console.debug(K)},$.prototype.log=function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];var K=k.join(" ");this.logLevel!==A.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=A.ENUM_LOG_LEVEL.INFO&&console.log(K)},$.prototype.info=function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];var K=k.join(" ");this.logLevel!==A.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=A.ENUM_LOG_LEVEL.INFO&&console.info(K)},$.prototype.warn=function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];var K=k.join(" ");this.logLevel!==A.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=A.ENUM_LOG_LEVEL.WARN&&console.warn(K)},$.prototype.error=function(){for(var k=[],j=0;j<arguments.length;j++)k[j]=arguments[j];var K=k.join(" ");this.logLevel!==A.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=A.ENUM_LOG_LEVEL.ERROR&&console.error(K)},A.ZegoLog=$},function(oe,A,le){function $(k){this.logger=k,this.F=k}Object.defineProperty(A,"u",{value:!0}),A.StateCenter=void 0,$.prototype.isLogin=function(){return!0},A.StateCenter=$},function(oe,A,le){var $=this&&this.__read||function(Z,J){var D=typeof Symbol=="function"&&Z[Symbol.iterator];if(!D)return Z;var G,M,L=D.call(Z),W=[];try{for(;(J===void 0||0<J--)&&!(G=L.next()).done;)W.push(G.value)}catch(ve){M={error:ve}}finally{try{G&&!G.done&&(D=L.return)&&D.call(L)}finally{if(M)throw M.error}}return W},k=this&&this.__spread||function(){for(var Z=[],J=0;J<arguments.length;J++)Z=Z.concat($(arguments[J]));return Z},j=(Object.defineProperty(A,"u",{value:!0}),A.DynamicCode=void 0,le(3));function K(){this.init()}K.prototype.init=function(){window.dyObj={}},K.prototype.runExecution=function(Z,J,D){Z=new(Function.bind.apply(Function,k([void 0],Z,[D])));try{Z.apply(void 0,k(J))}catch(G){j.log.error(G)}},A.DynamicCode=K}],z={},ue.m=P,ue.c=z,ue.d=function(oe,A,le){ue.o(oe,A)||Object.defineProperty(oe,A,{enumerable:!0,get:le})},ue.r=function(oe){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(oe,"u",{value:!0})},ue.t=function(oe,A){if(1&A&&(oe=ue(oe)),8&A||4&A&&typeof oe=="object"&&oe&&oe.u)return oe;var le=Object.create(null);if(ue.r(le),Object.defineProperty(le,"default",{enumerable:!0,value:oe}),2&A&&typeof oe!="string")for(var $ in oe)ue.d(le,$,(function(k){return oe[k]}).bind(null,$));return le},ue.n=function(oe){var A=oe&&oe.u?function(){return oe.default}:function(){return oe};return ue.d(A,"a",A),A},ue.o=function(oe,A){return Object.prototype.hasOwnProperty.call(oe,A)},ue.p="",ue(ue.s=13))},function(V,C,q){var ue,se,Y,pe,ce;V.exports=(V=q(2),q(17),q(18),ue=(Y=(q=V).lib).Base,se=Y.WordArray,pe=(Y=q.algo).MD5,ce=Y.EvpKDF=ue.extend({cfg:ue.extend({keySize:4,hasher:pe,iterations:1}),init:function(X){this.cfg=this.cfg.extend(X)},compute:function(X,P){for(var z,oe=this.cfg,A=oe.hasher.create(),le=se.create(),$=le.words,k=oe.keySize,j=oe.iterations;$.length<k;){z&&A.update(z),z=A.update(X).finalize(P),A.reset();for(var K=1;K<j;K++)z=A.finalize(z),A.reset();le.concat(z)}return le.sigBytes=4*k,le}}),q.EvpKDF=function(X,P,z){return ce.create(z).compute(X,P)},V.EvpKDF)},function(V,C){V.exports=_},function(V,C,q){function ue(X){var P;return(ce[X]||(P=ce[X]={i:X,l:!1,exports:{}},pe[X].call(P.exports,P,P.exports,ue),P.l=!0,P)).exports}var se,Y,pe,ce;V.exports=(se=q(1),Y=q(3),pe=[function(X,P){X.exports=se},function(X,P){X.exports=Y},function(X,P,z){var oe,A,le,$,k,j,K,Z;z.r(P),z.d(P,"ZegoConnectionAgent",function(){return at}),z.d(P,"NetAgentPCRequest",function(){return Si}),z.d(P,"NetAgentHttpRequest",function(){return Vr}),z.d(P,"BusinessService",function(){return le}),z.d(P,"BrokenType",function(){return L}),z.d(P,"NET_ACCESS_CONFIG",function(){return tt}),z.d(P,"ConnectedType",function(){return M}),z.d(P,"DisconnectedType",function(){return G}),z.d(P,"Mode",function(){return k}),z.d(P,"Method",function(){return D}),(P=oe=oe||{})[P.offline=0]="offline",P[P.online=1]="online",(P=A=A||{})[P.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",P[P.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",P[P.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",P[P.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",P[P.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",P[P.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",P[P.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",P[P.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",P[P.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",P[P.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",P[P.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",P[P.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",P[P.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",P[P.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",P[P.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",P[P.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",P[P.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",P[P.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",P[P.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",P[P.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",P[P.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",P[P.MSG_TYPE_HTTP_REQUEST2=33]="MSG_TYPE_HTTP_REQUEST2",P[P.MSG_TYPE_REDIRECT2=34]="MSG_TYPE_REDIRECT2",P[P.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2=35]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2",P[P.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2=36]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2",P[P.MSG_TYPE_GET_SVRADDR_REQUEST=39]="MSG_TYPE_GET_SVRADDR_REQUEST",P[P.MSG_TYPE_GET_SVRADDR_RESPONSE=40]="MSG_TYPE_GET_SVRADDR_RESPONSE",(P=de=de||{})[P.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",P[P.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",P[P.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",P[P.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",P[P.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",P[P.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",P[P.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",P[P.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",P[P.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",P[P.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",P[P.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",P[P.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",P[P.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",P[P.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",P[P.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(P=le=le||{})[P.SERVICE_UNSET=0]="SERVICE_UNSET",P[P.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",P[P.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",P[P.SERVICE_MIX=3]="SERVICE_MIX",P[P.SERVICE_ZEUS=4]="SERVICE_ZEUS",P[P.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",P[P.SERVICE_L3=6]="SERVICE_L3",P[P.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",P[P.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",P[P.SERVICE_ZIM=9]="SERVICE_ZIM",P[P.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",P[P.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",P[P.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",P[P.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",P[P.SERVICE_QUALITY=14]="SERVICE_QUALITY",P[P.SERVICE_SECURITY=15]="SERVICE_SECURITY",P[P.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",P[P.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",P[P.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",P[P.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",P[P.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",P[P.SERVICE_CDN=21]="SERVICE_CDN",P[P.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",P[P.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",P[P.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",P[P.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",P[P.SERVICE_ECHO=26]="SERVICE_ECHO",P[P.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",P[P.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(P=$=$||{})[P.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",P[P.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",P[P.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(P=k=k||{})[P.Mode_UNSET=0]="Mode_UNSET",P[P.MODE_ONLINE=1]="MODE_ONLINE",P[P.MODE_TEST=2]="MODE_TEST",P[P.MODE_ALPHA=3]="MODE_ALPHA",(P=j=j||{})[P.HTTP=0]="HTTP",P[P.PC=1]="PC",P[P.OTHER=2]="OTHER",(P=K=K||{})[P.NONE=0]="NONE",P[P.BROKEN=1]="BROKEN",P[P.DISCONNECT=2]="DISCONNECT",(P=Z=Z||{})[P.CONNECTED=0]="CONNECTED",P[P.DISCONNECT=1]="DISCONNECT",P[P.BROKEN=2]="BROKEN";var J,D,G,M,L,W=[de.ACCESSHUB_INVALID_APPID,de.ACCESSHUB_INVALID_SIGNATURE],ve=((P=J=J||{})[P.ACTION_RESERVED=0]="ACTION_RESERVED",P[P.ACTION_DISPATCH=1]="ACTION_DISPATCH",P[P.ACTION_RETRY=2]="ACTION_RETRY",P[P.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",P[P.ACTION_ABORT=4]="ACTION_ABORT",P[P.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(de=D=D||{})[de.METHOD_UNSET=0]="METHOD_UNSET",de[de.METHOD_GET=1]="METHOD_GET",de[de.METHOD_POST=2]="METHOD_POST",de[de.METHOD_PUT=3]="METHOD_PUT",de[de.METHOD_PATCH=4]="METHOD_PATCH",de[de.METHOD_DELETE=5]="METHOD_DELETE",de[de.METHOD_HEAD=6]="METHOD_HEAD",de[de.METHOD_OPTIONS=7]="METHOD_OPTIONS",(P=G=G||{})[P.CLOSE=0]="CLOSE",P[P.TEMP=1]="TEMP",P[P.TIMEOUT=2]="TIMEOUT",(de=M=M||{})[de.AUTO=0]="AUTO",de[de.MANUAL=1]="MANUAL",(P=L=L||{})[P.EMPTY=0]="EMPTY",P[P.CLOSE=1]="CLOSE",{2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception",33:"http_request2",34:"redirect2",35:"accesshub_dispatch_request2",36:"accesshub_dispatch_response2",39:"get_svraddr_request",40:"get_svraddr_response"}),de=z(0),ne=z.n(de),he=(P=z(1),z(1));de=z(0),he.util.Long=de,he.util.Long.fromBits=he.util.Long?he.util.Long.fromBits:function(){return 0};for(var _e=he.roots,Ue=he.types?he.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},Fe=he.types?he.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},ze=Object.keys(Ue),Me={$:function(fe){return Me[fe]?Me[fe].call(this):_e[fe].decode?_e[fe].decode(this,this.uint32()):Me.$.call(this,"int32")}},We={$:function(fe,Ce,et){var lt=Ue[fe];return lt===void 0?_e[fe].encode?(this.uint32((et<<3|2)>>0).fork(),_e[fe].encode(Ce,this).ldelim()):We.$.call(this,"int32",Ce,et):We[fe].call(this.uint32(et<<3|lt),Ce)}},rt=0;rt<ze.length;rt++)Me[ze[rt]]=he.Reader.prototype[ze[rt]],We[ze[rt]]=he.Writer.prototype[ze[rt]];(function fe(Ce,et,lt,pt){for(var H=0,y=Object.keys(Ce);H<y.length;H++){var x=y[H];if(Ce[x].$m&&Object.keys(Ce[x].$m).every(function(I){return Number(I)})){if(lt[x])throw Error(`nested type ${lt}.${x} has already exist`);lt[x]=function(I,B){function me(Re){for(var _t in I)(_t=I[_t])[1].charAt(0)==="{"?this[_t[0]]={}:_t[1].charAt(0)!=="["&&_t[1].charAt(0)!=="<"||(this[_t[0]]=[]);if(Re)for(var ii=Object.keys(Re),Wt=0;Wt<ii.length;++Wt)Re[ii[Wt]]!=null&&(this[ii[Wt]]=Re[ii[Wt]])}var Oe,Qe={};for(Oe in I){var qe=I[Oe],yt=qe[1];yt.charAt(0)==="{"?(me.prototype[qe[0]]=he.util.emptyObject,Qe[yt]={$m:yt.substring(1).split(",").map(function(Re,_t){return["$"+(_t+1),Re,null]}).reduce(function(Re,_t,ii){return Re[ii+1]=_t,Re},{})}):yt.charAt(0)==="["||yt.charAt(0)==="<"?me.prototype[qe[0]]=he.util.emptyArray:yt==="bytes"?me.prototype[qe[0]]=he.util.newBuffer([]):qe[2]&&qe[2].hasOwnProperty("low")&&qe[2].hasOwnProperty("high")?me.prototype[qe[0]]=he.util.Long.fromBits(qe[2].low,qe[2].high,qe[2].unsigned):me.prototype[qe[0]]=qe[2]}return me.create=function(Re){return new me(Re)},me.decode=function(Re,_t){Re instanceof he.Reader||(Re=he.Reader.create(Re));for(var ii=_t===void 0?Re.len:Re.pos+_t,Wt=new me;Re.pos<ii;){var Ie=Re.uint32(),Ve=Ie>>>3;if(0<Ve&&I[Ve]){var Ne=I[Ve][0],$e=I[Ve][1];if($e.charAt(0)==="{")Wt[Ne]===he.util.emptyObject&&(Wt[Ne]={}),Ve=me.$namespace[$e].decode(Re,Re.uint32()),Wt[Ne][Ve.$1]=Ve.$2;else if($e.charAt(0)==="["||$e.charAt(0)==="<"){$e=$e.substring(1),Wt[Ne]&&Wt[Ne].length||(Wt[Ne]=[]);const ct=!Me[$e]&&!_e[$e].decode;if(Fe[$e=ct?"int32":$e]!==void 0&&(7&Ie)==2)for(var mt=Re.uint32()+Re.pos;Re.pos<mt;)Wt[Ne].push(Me.$.call(Re,$e));else Wt[Ne].push(Me.$.call(Re,$e))}else Wt[Ne]=Me.$.call(Re,$e)}else Re.skipType(7&Ie)}return Wt},me.encode=function(Re,_t){for(var ii in _t=_t||he.Writer.create(),I){var Wt=I[ii][0];if(($e=I[ii][1]).charAt(0)==="{"){if(Re[Wt]!=null&&Re.hasOwnProperty(Wt))for(var Ie=0,Ve=Object.keys(Re[Wt]);Ie<Ve.length;++Ie)_t.uint32((ii<<3|2)>>0).fork(),me.$namespace[$e].encode({$1:Ve[Ie],$2:Re[Wt][Ve[Ie]]},_t).ldelim()}else if($e.charAt(0)==="["||$e.charAt(0)==="<"){var Ne=$e.charAt(0)==="<",$e=$e.substring(1),mt=Re[Wt];if(mt!=null&&mt.length)if($e=Ue[$e]!==void 0||_e[$e].encode?$e:"int32",Ne&&Fe[$e]!==void 0){for(_t.uint32((ii<<3|2)>>0).fork(),Ie=0;Ie<mt.length;Ie++)We[$e].call(_t,mt[Ie]);_t.ldelim()}else for(Ie=0;Ie<mt.length;Ie++)We.$.call(_t,$e,mt[Ie],ii)}else Re[Wt]!=null&&Re.hasOwnProperty(Wt)&&We.$.call(_t,$e,Re[Wt],ii)}return _t},Object.keys(Qe).length&&(me.$namespace=fe(Qe,et+"."+B,me.$namespace||{},!0)),me}(Ce[x].$m,x)}else Ce[x].$s?lt[x]=function(I,B){function me(Oe,Qe,qe){he.rpc.Service.call(this,Oe,Qe,qe)}return((me.prototype=Object.create(he.rpc.Service.prototype)).constructor=me).create=function(Oe,Qe,qe){return new me(Oe,Qe,qe)},Object.keys(I).forEach(function(Oe){var Qe=I[Oe];function qe(yt,Re){return this.rpcCall(qe,_e[Qe[0]],_e[Qe[1]],yt,Re)}Object.defineProperty(qe,"name",{value:Oe}),Object.defineProperty(qe,"path",{value:et+"."+B}),me.prototype[Oe]=qe}),me}(Ce[x].$s,x):Ce[x].$e&&Object.values(Ce[x].$e).every(function(I){return Number(I)===I})&&(lt[x]=function(I){for(var B=Object.keys(I),me={},Oe=0;Oe<B.length;Oe++)me[me[B[Oe]]=I[B[Oe]]]=B[Oe];return me}(Ce[x].$e));lt[x]&&!pt&&(_e[et+"."+x]=lt[x]),delete Ce[x].$m,delete Ce[x].$s,delete Ce[x].$e,lt[x]=fe(Ce[x],et?et+"."+x:x,lt[x]||{})}return lt})({protocol:{proto_accesshub:{AccesshubAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","protocol.proto_accesshub.IPV6Addr",null],3:["quic_port","uint32",0],4:["wss_port","uint32",0]}},AccesshubDispatchGroup:{$m:{1:["group","string",""],2:["quic_nodes","<string",null],3:["mtcp_nodes","<string",null],4:["wss_nodes","<string",null]}},AccesshubDispatchGroup2:{$m:{1:["group","string",""],2:["nodes","<protocol.proto_accesshub.AccesshubAddr",null],3:["nodes_dual","<protocol.proto_accesshub.AccesshubAddr",null]}},AccesshubDispatchRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","protocol.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","protocol.proto_accesshub.SdkType",0],7:["zegoconn_version","uint32",0],8:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],9:["device_id","string",""],10:["client_ip","string",""],11:["geofencing_type","uint32",0],12:["geofencings","[uint32",null],13:["addr_type","uint32",0]}},AccesshubDispatchResponse2:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","protocol.proto_accesshub.AccesshubDispatchResponseData2",null]}},AccesshubDispatchResponseData2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["rand","string",""],3:["secret","string",""],4:["groups","<protocol.proto_accesshub.AccesshubDispatchGroup2",null],5:["wss_groups","<protocol.proto_accesshub.WssAccesshubDispatchGroup",null],6:["ttl","uint32",0]}},BackendConnType:{$e:{BACKEND_CONN_TYPE_UNSET:0,BACKEND_CONN_TYPE_TCP:1,BACKEND_CONN_TYPE_WSS:2}},CloseConnection:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["action","int32",0]},Action:{$e:{ACTION_RESERVED:0,ACTION_DISPATCH:1,ACTION_RETRY:2,ACTION_NEXT_NODE:3,ACTION_ABORT:4,ACTION_NEXT_GROUP:5}}},ConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},ErrorCode:{$e:{OK:0,DISPATCH_NO_AVAILABLE_NODE:1e4,DISPATCH_INTERNAL_ERROR:10001,DISPATCH_INVALID_FRAME:10002,DISPATCH_UNMARSHAL:10003,DISPATCH_MSGTYPE:10004,DISPATCH_MARSHAL:10005,DISPATCH_TOO_FREQUENTLY:10006,DISPATCH_EMPTY_GEOFENCING:10007,ACCESSHUB_INVALID_FRAME:2e4,ACCESSHUB_NEED_ENCRYPT:20001,ACCESSHUB_DECRYPT:20002,ACCESSHUB_MSGTYPE:20003,ACCESSHUB_UNMARSHAL:20004,ACCESSHUB_TIMEOUT:20005,ACCESSHUB_CONNECT:20006,ACCESSHUB_BROKEN:20007,ACCESSHUB_INTERNAL_ERROR:20008,ACCESSHUB_MARSHAL:20009,ACCESSHUB_UNSUPPORTED_SERVICE:20010,ACCESSHUB_TOO_FREQUENTLY:20011,ACCESSHUB_INVALID_APPID:20012,ACCESSHUB_HB_TIMEOUT:20013,ACCESSHUB_INVALID_SIGNATURE:20014,ACCESSHUB_AUTH_FAILED:20015,ACCESSHUB_UNSUPPORTED_INTERFACE:20016,ACCESSHUB_EMPTY_GEOFENCING:20017,ACCESSHUB_ACCESS_DENIED:20018,ACCESSHUB_SPECIAL_CUSTOMER:20019,ACCESSHUB_GET_STREAM_FAILED:3e4,ACCESSHUB_GET_CONN_FAILED:30001,ACCESSHUB_DO_HTTP_REQUEST_FAILED:30002,ACCESSHUB_UNMARSHAL_HB_FAILED:30003,ACCESSHUB_DO_BACKEND_DISPATCH_FAILED:30004}},GeoFencing:{$e:{CN:2,NA:3,EU:4,AS:5,IN:6,NCN:7}},GeoFencingType:{$e:{NONE:0,UNION:1,EXCLUDE:2}},GetAppConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","protocol.proto_accesshub.Mode",0],5:["id_name","string",""],6:["config_key","string",""],7:["ts","uint64",{low:0,high:0,unsigned:!0}],8:["signature","bytes",[]],9:["lite_sign","string",""],10:["token","string",""],11:["sdk_type","protocol.proto_accesshub.SdkType",0],12:["zegoconn_version","uint32",0],13:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],14:["device_id","string",""],15:["etag","uint32",0],16:["is_special_customer","uint32",0]}},GetAppConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","protocol.proto_accesshub.GetAppConfigResponseData",null]}},GetAppConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["data","bytes",[]],3:["ts","uint64",{low:0,high:0,unsigned:!0}],4:["etag","uint32",0]}},GetConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["zegoconn_version","uint32",0],8:["sdk_type","protocol.proto_accesshub.SdkType",0],9:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],10:["device_id","string",""],11:["mode_no","protocol.proto_accesshub.Mode",0],12:["geofencing_type","uint32",0],13:["geofencings","[uint32",null]}},GetConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","protocol.proto_accesshub.GetConfigResponseData",null]}},GetConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["quic_hb_interval","uint32",0],3:["quic_hb_timeout","uint32",0],4:["logic_hb_interval","uint32",0],5:["logic_hb_timeout","uint32",0],6:["pc_establish_timeout","uint32",0],7:["sdk_link_detect_interval","uint32",0],8:["sdk_link_detect_duration","uint32",0],9:["client_outer_ip","string",""],10:["ntp_time","uint64",{low:0,high:0,unsigned:!0}],11:["root_rsa_certs_ver","uint32",0],12:["geofencing_id","uint32",0],13:["svraddr_ver","uint32",0],14:["root_ecc_certs_ver","uint32",0]}},GetSvraddrRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","protocol.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","protocol.proto_accesshub.SdkType",0],7:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["device_id","string",""],10:["geofencing_type","uint32",0],11:["geofencings","[uint32",null]}},GetSvraddrResponse:{$m:{1:["code","int32",0],2:["msg","string",""],3:["data","protocol.proto_accesshub.GetSvraddrResponseData",null]}},GetSvraddrResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["geofencing_id","uint32",0],3:["svraddr_ver","uint32",0],4:["anycast_ips","<protocol.proto_accesshub.IPAddr",null],5:["zegons_domain","string",""],6:["zegons_ips","<protocol.proto_accesshub.IPAddr",null],7:["accesshub_domain","string",""],8:["accesshub_ips","<protocol.proto_accesshub.IPAddr",null],9:["logreport_domain","string",""],10:["logreport_ips","<protocol.proto_accesshub.IPAddr",null],11:["detaillog_domain","string",""],12:["detaillog_ips","<protocol.proto_accesshub.IPAddr",null],13:["stunsvr_domain","string",""],14:["stunsvr_ips","<protocol.proto_accesshub.IPAddr",null],15:["zimfile_domain","string",""],16:["zimfile_ips","<protocol.proto_accesshub.IPAddr",null],17:["accesshub_sni","string",""],18:["accesshub_web_domain","string",""],19:["logreport_web_domain","string",""]}},HBRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}]}},HBResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}],3:["ntp_time","uint64",{low:0,high:0,unsigned:!0}]}},HTTPRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["stick","string",""],8:["service","string",""],9:["location","string",""],10:["method","string",""],11:["headers","<protocol.proto_accesshub.HTTPRequest.HTTPHeader",null],12:["body","bytes",[]],13:["ack","bool",!1],14:["mode_no","protocol.proto_accesshub.Mode",0],15:["service_no","protocol.proto_accesshub.Service",0],16:["method_no","protocol.proto_accesshub.Method",0],17:["sdk_type","protocol.proto_accesshub.SdkType",0],18:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],19:["zegoconn_version","uint32",0],20:["device_id","string",""],21:["reduce_resp_header","uint32",0]},HTTPHeader:{$m:{1:["name","string",""],2:["val","string",""]}}},HTTPRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","protocol.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","protocol.proto_accesshub.SdkType",0],7:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["headers","<protocol.proto_accesshub.HTTPRequest.HTTPHeader",null],10:["method","protocol.proto_accesshub.Method",0],11:["interface_id","uint32",0],12:["res_id","string",""],13:["params","string",""],14:["body","bytes",[]],15:["ack","bool",!1],16:["device_id","string",""],17:["ts","uint64",{low:0,high:0,unsigned:!0}],18:["signature","bytes",[]],19:["token","string",""],20:["lite_sign","string",""],21:["reduce_resp_header","uint32",0]}},HTTPRequestAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},HTTPRequestDroped:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["reason","int32",0],3:["msg","string",""]}},HTTPResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["headers","<protocol.proto_accesshub.HTTPRequest.HTTPHeader",null],3:["status_code","int32",0],4:["body","bytes",[]]}},IPAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","protocol.proto_accesshub.IPV6Addr",null]}},IPV6Addr:{$m:{1:["high","fixed64",{low:0,high:0,unsigned:!1}],2:["low","fixed64",{low:0,high:0,unsigned:!1}]}},MessageType:{$e:{MSG_TYPE_EMPTY:0,MSG_TYPE_CONNECTION_CLOSED:1,MSG_TYPE_STREAM_CLOSED:2,MSG_TYPE_CLOSE_CONNECTION:3,MSG_TYPE_HTTP_REQUEST:4,MSG_TYPE_HTTP_RESPONSE:5,MSG_TYPE_HTTP_REQUEST_DROPED:6,MSG_TYPE_PROXY_CONNECT:7,MSG_TYPE_PROXY_CONNECTED:8,MSG_TYPE_PROXY_CONNECTION_CLOSED:9,MSG_TYPE_PROXY_SEND_DATA:10,MSG_TYPE_PROXY_RECV_DATA:11,MSG_TYPE_HB_REQUEST:12,MSG_TYPE_HB_RESPONSE:13,MSG_TYPE_GET_CONFIG_REQUEST:14,MSG_TYPE_GET_CONFIG_RESPONSE:15,MSG_TYPE_HTTP_REQUEST_ACK:16,MSG_TYPE_PC_UPWARD_MESSAGE:17,MSG_TYPE_PC_UPWARD_MESSAGE_ACK:18,MSG_TYPE_PC_ESTABLISHED:19,MSG_TYPE_PC_BROKEN:20,MSG_TYPE_PC_DOWNWARD_MESSAGE:21,MSG_TYPE_REDIRECT:22,MSG_TYPE_GET_APPCONFIG_REQUEST:23,MSG_TYPE_GET_APPCONFIG_RESPONSE:24,MSG_TYPE_PUSH_APPCONFIG:25,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST:26,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE:27,MSG_TYPE_GET_IM_CONFIG_REQUEST:28,MSG_TYPE_GET_IM_CONFIG_RESPONSE:29,MSG_TYPE_PUSH_EXCEPTION:30,MSG_TYPE_RESOLVE_DOMAIN_REQUEST:31,MSG_TYPE_RESOLVE_DOMAIN_RESPONSE:32,MSG_TYPE_HTTP_REQUEST2:33,MSG_TYPE_REDIRECT2:34,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2:35,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2:36,MSG_TYPE_GET_ROOTCERTS_REQUEST:37,MSG_TYPE_GET_ROOTCERTS_RESPONSE:38,MSG_TYPE_GET_SVRADDR_REQUEST:39,MSG_TYPE_GET_SVRADDR_RESPONSE:40,MSG_TYPE_UA_DISPATCH_REQUEST:50,MSG_TYPE_UA_DISPATCH_RESPONSE:51,MSG_TYPE_UA_ECHO_REQUEST:52,MSG_TYPE_UA_ECHO_RESPONSE:53,MSG_TYPE_NODE_REGISTER_REQUEST:100,MSG_TYPE_NODE_REGISTER_RESPONSE:101,MSG_TYPE_NODE_HB_REQUEST:102,MSG_TYPE_NODE_HB_RESPONSE:103}},Method:{$e:{METHOD_UNSET:0,METHOD_GET:1,METHOD_POST:2,METHOD_PUT:3,METHOD_PATCH:4,METHOD_DELETE:5,METHOD_HEAD:6,METHOD_OPTIONS:7}},Mode:{$e:{Mode_UNSET:0,MODE_ONLINE:1,MODE_TEST:2,MODE_ALPHA:3}},PCBroken:{$m:{}},PCDownwardMessage:{$m:{1:["payload","bytes",[]],2:["wss_message_type","uint32",0],3:["ts","uint64",{low:0,high:0,unsigned:!0}]}},PCEstablished:{$m:{1:["elapse","uint32",0],2:["from","uint32",0]}},PCUpwardMessage:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","protocol.proto_accesshub.Mode",0],5:["id_name","string",""],6:["service_no","protocol.proto_accesshub.Service",0],7:["ack","bool",!1],8:["payload","bytes",[]],9:["sdk_type","protocol.proto_accesshub.SdkType",0],10:["wss_message_type","uint32",0],11:["wss_path","string",""],12:["wss_raw_query","string",""],13:["zegoconn_version","uint32",0],14:["zegoconn_run_env","protocol.proto_accesshub.ZegoconnRunEnv",0],15:["backend_conn_type","protocol.proto_accesshub.BackendConnType",0],16:["device_id","string",""],17:["geofencing_type","uint32",0],18:["geofencings","[uint32",null],19:["addr_type","uint32",0]}},PCUpwardMessageAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},ProxyConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""],3:["connected","int32",0]}},PushAppConfig:{$m:{1:["config_key","string",""],2:["data","bytes",[]]}},PushException:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["txid","uint64",{low:0,high:0,unsigned:!0}]}},Redirect2:{$m:{1:["rand","string",""],2:["secret","string",""],3:["groups","<protocol.proto_accesshub.AccesshubDispatchGroup2",null],4:["wss_groups","<protocol.proto_accesshub.WssAccesshubDispatchGroup",null],5:["ttl","uint32",0]}},SdkType:{$e:{SDK_TYPE_UNSET:0,SDK_TYPE_NATIVE:1,SDK_TYPE_WSS_WEB:3}},Service:{$e:{SERVICE_UNSET:0,SERVICE_MEDIAGW:1,SERVICE_LIVEROOM:2,SERVICE_MIX:3,SERVICE_ZEUS:4,SERVICE_ZPUSH:5,SERVICE_L3:6,SERVICE_TALKLINE:7,SERVICE_EDUSUITE:8,SERVICE_ZIM:9,SERVICE_ClOUD_SETTING:10,SERVICE_ZEUSHB:11,SERVICE_USER_LOGIC:12,SERVICE_UNIFYDISPATCH:13,SERVICE_QUALITY:14,SERVICE_SECURITY:15,SERVICE_KTVCPR:16,SERVICE_SWITCH4LIVEROOM:17,SERVICE_WEBRTC_SIGNAL:18,SERVICE_L3_WEBRTC_SIGNAL:19,SERVICE_VIDEOCPR:20,SERVICE_CDN:21,SERVICE_CLOUDRECORD:22,SERVICE_INNER_ECHO:23,SERVICE_OUTER_ECHO:24,SERVICE_LOCALHOST_ECHO:25,SERVICE_ECHO:26,SERVICE_DOCSERVICE:27,SERVICE_AUTHSVR:28,SERVICE_WEBLIVEROOM:29,SERVICE_WHITEBOARD:30,SERVICE_METAWORLD:31,SERVICE_ZEGOLAND:32}},StreamClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},WssAccesshubDispatchGroup:{$m:{1:["group","string",""],2:["host","string",""],3:["main_domain","string",""]}},ZegoconnRunEnv:{$e:{ZEGOCONN_RUN_ENV_UNSET:0,ZEGOCONN_RUN_ENV_BROWSER:1,ZEGOCONN_RUN_ENV_APPLET:2}}},proto_initconfig:{AppConfig:{$m:{1:["test_id","int32",0],2:["domain","string",""],3:["flexible_domain","string",""],4:["replace_flexible_domain","string",""]}},InitConfig:{$m:{1:["app_config","protocol.proto_initconfig.AppConfig",null],4:["speedlog_config","protocol.proto_initconfig.SpeedlogConfig",null],5:["media_config","protocol.proto_initconfig.MediaConfig",null]}},MediaConfig:{$m:{1:["play_config","protocol.proto_initconfig.MediaPlayConfig",null],2:["publish_config","protocol.proto_initconfig.MediaPublishConfig",null]}},MediaPlayConfig:{$m:{5:["resource_info","<protocol.proto_initconfig.MediaResourceInfo",null]}},MediaPublishConfig:{$m:{2:["resource_info","<protocol.proto_initconfig.MediaResourceInfo",null],5:["enable_subject_segmentation","int32",0],6:["object_segmentation_platform","int32",0]}},MediaResourceInfo:{$m:{1:["resource_type","protocol.proto_initconfig.ResourceType",0],2:["service_info","<protocol.proto_initconfig.MediaServiceProtocolInfo",null]}},MediaServiceProtocolInfo:{$m:{1:["config_id","string",""],2:["protocol","protocol.proto_initconfig.ProtocolType",0],3:["url_template","string",""],4:["resolve_type","protocol.proto_initconfig.ResolveType",0],5:["push_cdn_authentication","int32",0],6:["cdn_quic_version","<int32",null]}},ProtocolType:{$e:{UDP:0,RTMP:1,FLV:2,HLS:3,WEBRTC:4}},ResolveType:{$e:{LOCAL_DNS:0,DISPATCH:1}},ResourceType:{$e:{CDN:0,RTC:1,L3:2,CDN_PLUS:3,CDN_PLUS_BACKUP:4}},SpeedlogConfig:{$m:{1:["report_count","int32",0],2:["report_retry_interval","int32",0],3:["push_quality_sample_count","int32",0],4:["pull_quality_sample_count","int32",0],5:["hardware_report_cycle","int32",0],6:["room_user_max_count","int32",0],7:["room_stream_max_count","int32",0],8:["charge_info_report_cycle","int32",0],9:["charge_info_report_mode","int32",0],10:["disable_report_pull","<protocol.proto_initconfig.ResourceType",null],11:["report_max_bytes","int32",0],12:["push_quality_report_freq","int32",0],13:["pull_quality_report_freq","int32",0],14:["charge_info_report_no_playing","int32",0]}}}}},"",_e,!1);var dt=_e.protocol,ht=function(){return(ht=Object.assign||function(fe){for(var Ce,et=1,lt=arguments.length;et<lt;et++)for(var pt in Ce=arguments[et])Object.prototype.hasOwnProperty.call(Ce,pt)&&(fe[pt]=Ce[pt]);return fe}).apply(this,arguments)};P.util.Long=ne.a,P.configure(),Se.prototype.encodeRequest=function(fe,Ce,et){var lt,pt=(H=this._[fe])[0],H=H[1];return H=(pt=this.S(this.h[pt][H],Ce)).length,this.stateCenter.appInfo.model===0?((lt=new Uint8Array(13+H))[0]=175,lt[1]=0,lt[2]=fe>>8,lt[3]=fe-(lt[2]<<8),lt.set(new Uint8Array(Int32Array.from([H]).buffer).reverse(),4),lt.set(new Uint8Array(Int32Array.from([et]).buffer).reverse(),8),lt[12]=0):((lt=new Uint8Array(13+H))[0]=172,lt[1]=0,lt[2]=0,lt.set(new Uint8Array(Int32Array.from([et]).buffer).reverse(),3),lt[7]=fe>>8,lt[8]=fe-(lt[2]<<8),lt.set(new Uint8Array(Int32Array.from([H]).buffer).reverse(),9)),lt.set(pt,13),lt},Se.prototype.decodeResponse=function(fe){var Ce,et=this.stateCenter.appInfo.model===0?(Ce=(fe[2]<<8)+fe[3],new DataView(fe.buffer).getUint32(8)):(Ce=(fe[7]<<8)+fe[8],new DataView(fe.buffer).getUint32(3)),lt=fe.slice(13);try{var pt=this._[Ce],H=pt[0],y=pt[1];return[et,Ce,this.T(this.h[H][y],lt)]}catch{return[et,Ce,{code:1}]}},Se.prototype.decodeConfigMessage=function(fe){return this.T(this.h.proto_initconfig.InitConfig,fe)},Se.prototype.S=function(fe,Ce){return fe.encode(new fe(Ce)).finish()},Se.prototype.T=function(fe,Ce){return ht({},fe.decode(Ce))};var Pt,ye=Se,De=(Object.defineProperty(re.prototype,"id",{get:function(){return this.v||null},set:function(fe){this.v=fe},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"data",{get:function(){return this.C},set:function(fe){this.C=fe},enumerable:!1,configurable:!0}),re.prototype.hasNext=function(){return this.next&&this.next.id},re.prototype.hasPrev=function(){return this.prev&&this.prev.id},re),xe=(ut.prototype.insertBefore=function(fe,Ce){return(Ce=new De(this.g,Ce)).next=fe,Ce.prev=fe.prev,fe.prev&&(fe.prev.next=Ce),fe.prev=Ce,++this.g,++this.R,Ce},ut.prototype.addLast=function(fe){return this.insertBefore(this.end,fe)},ut.prototype.add=function(fe){return this.addLast(fe)},ut.prototype.getFirst=function(){return this.R===0?null:this.start.next},ut.prototype.getLast=function(){return this.R===0?null:this.end.prev},ut.prototype.size=function(){return this.R},ut.prototype.getFromFirst=function(fe){var Ce=0,et=this.start.next;if(0<=fe)for(;Ce<fe&&et!==null;)et=et.next,++Ce;else et=null;if(et===null)throw"Index out of bounds.";return et},ut.prototype.get=function(fe){return fe===0?this.getFirst():fe===this.R-1?this.getLast():this.getFromFirst(fe)},ut.prototype.remove=function(fe){return fe.prev&&(fe.prev.next=fe.next),fe.next&&(fe.next.prev=fe.prev),--this.R,fe},ut.prototype.removeFirst=function(){var fe=null;return 0<this.R&&this.start.next?this.remove(this.start.next):fe},ut.prototype.removeLast=function(){var fe=null;return 0<this.R&&this.end.prev?this.remove(this.end.prev):fe},ut.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this.R=0,this.g=0},ut.prototype.each=function(fe){for(var Ce=this.start;Ce.hasNext();)fe(Ce=Ce.next)},ut.prototype.find=function(fe){for(var Ce=this.start,et=!1,lt=null;Ce.hasNext()&&!et;)fe(Ce=Ce.next)&&(lt=Ce,et=!0);return lt},ut.prototype.map=function(fe){for(var Ce=this.start,et=[];Ce.hasNext();)fe(Ce=Ce.next)&&et.push(Ce);return et},ut.prototype.push=function(fe){return this.addLast(fe)},ut.prototype.unshift=function(fe){0<this.R?this.insertBefore(this.start.next,fe):this.insertBefore(this.end,fe)},ut.prototype.pop=function(){return this.removeLast()},ut.prototype.shift=function(){return this.removeFirst()},ut);Je.prototype.createSocket=function(fe){},Je.prototype.setState=function(fe){},Je.prototype.initEvent=function(fe,Ce,et,lt){},Je.prototype.sendMessage=function(fe,Ce,et,lt,pt,H,y,x){},z=Je;function Je(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}function ut(){this.start=new De,this.end=new De,this.g=0,this.R=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}function re(fe,Ce){fe===void 0&&(fe=null),Ce===void 0&&(Ce=null),this.next=null,this.prev=null,this.v=fe,this.C=Ce}function Se(fe){this.stateCenter=fe,this.h=dt,this._=((fe={})[A.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],fe[A.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],fe[A.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],fe[A.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],fe[A.MSG_TYPE_HTTP_REQUEST2]=["proto_accesshub","HTTPRequest2"],fe[A.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],fe[A.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],fe[A.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],fe[A.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],fe[A.MSG_TYPE_GET_SVRADDR_REQUEST]=["proto_accesshub","GetSvraddrRequest"],fe[A.MSG_TYPE_GET_SVRADDR_RESPONSE]=["proto_accesshub","GetSvraddrResponse"],fe[A.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HTTPRequestAck"],fe[A.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],fe[A.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],fe[A.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],fe[A.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],fe[A.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],fe[A.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],fe[A.MSG_TYPE_REDIRECT2]=["proto_accesshub","Redirect2"],fe[A.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],fe[A.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],fe[A.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],fe[A.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],fe[A.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],fe[A.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2]=["proto_accesshub","AccesshubDispatchRequest2"],fe[A.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2]=["proto_accesshub","AccesshubDispatchResponse2"],fe[A.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],fe)}(de=Pt=Pt||{})[de.BROWSER=0]="BROWSER",de[de.WEIXINMINI=1]="WEIXINMINI",Ke.prototype.init=function(){var fe=this;this.O&&(this.readyState=0,this.O.onOpen(function(Ce){fe.readyState=fe.O.readyState,typeof fe.onopen=="function"&&(fe.onopen(Ce),fe.O.onClose(function(et){fe.readyState=fe.O.readyState,typeof fe.onclose=="function"&&fe.onclose(et)}),fe.O.onMessage(function(et){typeof fe.onmessage=="function"&&fe.onmessage(et)}))}),this.O.onError(function(Ce){fe.readyState=fe.O.readyState,typeof fe.onerror=="function"&&fe.onerror(Ce)}))},Ke.prototype.onopen=function(fe){},Ke.prototype.onerror=function(fe){},Ke.prototype.onclose=function(fe){},Ke.prototype.onmessage=function(fe){},Ke.prototype.send=function(fe){fe instanceof Uint8Array&&(fe=new Uint8Array(fe).buffer),this.O&&this.O.send({data:fe})},Ke.prototype.close=function(){this.O&&this.O.close()};var we=Ke;function Ke(fe,Ce){this.url=fe,this.readyState=3,this.O=wx.connectSocket({url:fe}),this.init()}function je(fe,Ce,et){if(et||arguments.length===2)for(var lt,pt=0,H=Ce.length;pt<H;pt++)!lt&&pt in Ce||((lt=lt||Array.prototype.slice.call(Ce,0,pt))[pt]=Ce[pt]);return fe.concat(lt||Array.prototype.slice.call(Ce))}function St(fe){var Ce=unescape||window.unescape;return Uint8Array.from(Array.from(Ce(encodeURIComponent(fe))).map(function(et){return et.charCodeAt(0)}))}function xt(fe){var Ce=escape||window.escape;return decodeURIComponent(Ce(String.fromCharCode.apply(String,Array.from(fe))))}function Ht(fe,Ce,et){if(et||arguments.length===2)for(var lt,pt=0,H=Ce.length;pt<H;pt++)!lt&&pt in Ce||((lt=lt||Array.prototype.slice.call(Ce,0,pt))[pt]=Ce[pt]);return fe.concat(lt||Array.prototype.slice.call(Ce))}hi.prototype.createSocket=function(fe){var Ce,et;this.P=(Ce=this.ENV%2,et=this.proxyCtrl,Ce%2===Pt.BROWSER?(Ce=fe,et?et.createSocket(Ce,0):new WebSocket(Ce)):new we(fe))},hi.prototype.openHandler=function(fe){var Ce=this;this.P&&(this.P.onopen=function(et){Ce.P.binaryType="arraybuffer",Ce.responseHandler(),fe(et)})},hi.prototype.responseHandler=function(){var fe=this;this.P&&(this.P.onmessage=function(Ce){Ce=typeof Ce.data=="string"?JSON.parse(Ce.data):Ce.data,fe.onMessage(Ce)})},hi.prototype.onMessage=function(fe){},hi.prototype.closeHandler=function(fe){this.P&&(this.P.onclose=function(Ce){fe(Ce)})},hi.prototype.errorHandler=function(fe){this.P&&(this.P.onerror=fe)},hi.prototype.closeSocket=function(){this.P&&(this.P.onclose=null,this.P.onerror=null,this.P.close(),this.P=null)},hi.prototype.isDisConnect=function(){return!this.P||this.P.readyState!==1},hi.prototype.sendMessage=function(fe){this.isDisConnect()||this.P&&this.P.send(fe)};var $t,ci=hi,He={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}},Ee={code:1100007,msg:"the user breaks the network connection"},it="zn.nab.gsa",nt="zn.napr.ope",tt={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:k.MODE_ONLINE,sdkType:3,connectVer:31,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1,model:0},Et=($t=function(fe,Ce){return($t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(et,lt){et.__proto__=lt}:function(et,lt){for(var pt in lt)Object.prototype.hasOwnProperty.call(lt,pt)&&(et[pt]=lt[pt])}))(fe,Ce)},function(){return(Et=Object.assign||function(fe){for(var Ce,et=1,lt=arguments.length;et<lt;et++)for(var pt in Ce=arguments[et])Object.prototype.hasOwnProperty.call(Ce,pt)&&(fe[pt]=Ce[pt]);return fe}).apply(this,arguments)}),Nt=function(fe){function Ce(H,y,x,I,B,me){var Oe=fe.call(this)||this;return Oe.A=H,Oe.I=y,Oe.N=x,Oe.D=I,Oe.M=B,Oe.proxyCtrl=me,Oe.socketService=new ci(Oe.I,Oe.proxyCtrl),Oe.urlIndex=0,Oe.updatedMsgTime=0,Oe.unUpdateMsgTimeTypes=[A.MSG_TYPE_HB_REQUEST,A.MSG_TYPE_HB_RESPONSE,A.MSG_TYPE_GET_CONFIG_REQUEST,A.MSG_TYPE_GET_CONFIG_RESPONSE,A.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,A.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2,A.MSG_TYPE_GET_SVRADDR_REQUEST,A.MSG_TYPE_GET_APPCONFIG_RESPONSE],Oe.netLinkState=0,Oe.sendCommandList=new xe,Oe.unSendCommandList=new xe,Oe.sendCommandMap={},Oe.unSendCommandMap={},Oe.U=100,Oe.H=15e3,Oe.G=1e3,Oe.Y=5e3,Oe.connectInterval=1e4,Oe.connectTimer=null,Oe.connectRsp={},Oe.unlogTypes=[12,13],Oe.tryServers=[],Oe.tryConnectEvents=[],Oe.connectStartTime=0,Oe.updatedMsgTime=Date.now(),Oe}var et=Ce,lt=fe;if(typeof lt!="function"&&lt!==null)throw new TypeError("Class extends value "+String(lt)+" is not a constructor or null");function pt(){this.constructor=et}return $t(et,lt),et.prototype=lt===null?Object.create(lt):(pt.prototype=lt.prototype,new pt),Ce.prototype.initEvent=function(H,y,x,I){this.V=H,this.B=y,this.k=x,this.L=I},Ce.prototype.createSocket=function(H){this.servers=H,this.urlIndex=0},Ce.prototype.destroySocket=function(H,y){this.D.info("zn.wl.ds.0 call "+H),this.socketService.closeSocket(),this.netLinkState=0,H!==K.NONE&&(y&&(this.q(this.servers?this.servers[this.urlIndex]:"",y.code,!0),this.V)&&this.V(this.tryServers,this.tryConnectEvents),this.B)&&this.B(H===K.BROKEN),this.resetConnect()},Ce.prototype.refreshServers=function(H){this.servers=je(je([],H,!0),this.servers,!0)},Ce.prototype.connectSocket=function(H,y,x){var I=this,B=(H===void 0&&(H=!0),this.D.info("zn.wl.cs.0 call"),this.connectRsp.suc=y,!1),me=(this.connectRsp.fail=function(){x&&(B?I.D.info("zn.wl.cs.0 fail cb has exec"):(x(),B=!0))},H&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=me,this.D.info("zn.wl.cs.0 server "+me),this.tryServers.push(me),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=1,this.socketService.createSocket(me),this.k&&this.k(!0),this.bindSocketEvent(),this.connectTimer=setTimeout(function(){I.D.info("zn.wl.cs.0 timeout"),I.q(me,He.NET_CONNECT_TIMEOUT.code),I.connectRsp.fail&&I.connectRsp.fail()},this.connectInterval),!0},Ce.prototype.bindSocketEvent=function(){var H=this;this.openHandler(function(){H.D.info("zn.wl.bse open"),H.resetConnect(),H.connectRsp.suc&&H.connectRsp.suc(),H.netLinkState=2,H.q(H.connectServer,0),H.V&&H.V(H.tryServers,H.tryConnectEvents),H.tryConnectEvents=[],H.checkUnSendMsgs(H.unSendCommandList,H.unSendCommandMap)}),this.closeHandler(function(y){H.D.warn("zn.wl.bse close "+JSON.stringify(y.code||y)),H.resetConnect(),H.connectRsp.fail&&H.connectRsp.fail(),H.q(H.connectServer,(y==null?void 0:y.code)||He.NET_CONNECT_TIMEOUT.code),H.B&&H.B(!0),H.netLinkState=0}),this.errorHandler(function(y){H.D.warn("zn.wl.bse error "+JSON.stringify(y.code||y)),H.resetConnect(),H.connectRsp.fail&&H.connectRsp.fail(),H.q(H.connectServer,(y==null?void 0:y.code)||He.NET_CONNECT_TIMEOUT.code),H.B&&H.B(!0),H.netLinkState=0}),this.onMessage()},Ce.prototype.closeSocket=function(){this.D.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=0},Ce.prototype.q=function(H,y,x){(this.connectStartTime||x)&&(x=this.connectStartTime?Date.now()-this.connectStartTime:0,this.tryConnectEvents.push({url:H,time_consumed:x,connect_type:3,error:y}))},Ce.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null)},Ce.prototype.release=function(){this.stopCheck()},Ce.prototype.isConnect=function(){return this.netLinkState===2},Ce.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},Ce.prototype.isConnecting=function(){return this.netLinkState===1},Ce.prototype.setState=function(H){this.netLinkState=H},Ce.prototype.closeHandler=function(H){this.socketService.closeHandler(H)},Ce.prototype.openHandler=function(H){this.socketService.openHandler(H)},Ce.prototype.errorHandler=function(H){this.socketService.errorHandler(H)},Ce.prototype.sendMessage=function(H,y,x,I,B,me,Oe,Qe){I===void 0&&(I=!0),B===void 0&&(B=null),me===void 0&&(me=null),Oe===void 0&&(Oe=null),(Qe=Qe===void 0?{}:Qe).timeout===void 0&&(Qe.timeout=5e3),Qe.isInSendMap===void 0&&(Qe.isInSendMap=!0),Qe.isMsgCache===void 0&&(Qe.isMsgCache=!0),this.txid++;var qe={appid:this.A,biz_type:0,mode_no:((qe=this.M.appInfo)==null?void 0:qe.mode)||tt.modeNo,id_name:this.M.userId,sdk_type:tt.sdkType,zegoconn_run_env:this.I===0?$.ZEGOCONN_RUN_ENV_BROWSER:$.ZEGOCONN_RUN_ENV_APPLET,zegoconn_version:((qe=this.M.appInfo)==null?void 0:qe.connVer)||tt.connectVer};(yt=this.M.appInfo)!=null&&yt.deviceID&&(qe.device_id=(yt=this.M.appInfo)==null?void 0:yt.deviceID);var yt=Et(Et({txid:this.txid},I?qe:{}),x);I={data:yt,txid:this.txid,sendTime:Date.now(),streamID:y,type:H,timeOut:Qe.timeout||this.Y,ack:x.ack,success:B,error:me,ackFunc:Oe,isSend:!0,isCheck:H!==A.MSG_TYPE_PC_UPWARD_MESSAGE,extras:Qe.extras},Qe.isInSendMap&&(qe=this.sendCommandList.push(I),this.sendCommandMap[this.txid]=qe,this.j||this.startCheck()),yt.service!==10&&yt.interface_id!==14&&this.unUpdateMsgTimeTypes.includes(H)||(this.updatedMsgTime=Date.now()),this.unlogTypes.indexOf(H)===-1&&this.D.info("zn.wl.sm type: "+H+"-"+ve[H]+" streamID: "+y+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(H,yt,y,Qe.extras):Qe.isMsgCache&&(I.isSend=!1,x=this.unSendCommandList.push(I),this.unSendCommandMap[this.txid]=x)},Ce.prototype.checkUnSendMsgs=function(H,y){for(var x,I=H.getFirst();I!=null;)I.C&&delete y[(x=I.C)==null?void 0:x.txid],H.remove(I),I.C&&((x=I.C)==null?void 0:x.isSend)===!1&&I.C.type&&I.C.streamID&&I.C.data&&(this.sendUint8Data(I.C.type,I.C.data,I.C.streamID),I.C.isSend=!0),I=H.getFirst()},Ce.prototype.F=function(H){return H.buffer.slice(H.byteOffset,H.byteLength+H.byteOffset)},Ce.prototype.sendUint8Data=function(H,y,x,I){H=this.N.encodeRequest(H,y,x),this.socketService.sendMessage(this.F(H))},Ce.prototype.onMessage=function(){var H=this;this.socketService.onMessage=function(y){y=new Uint8Array(y);var x,I,B=(I=H.N.decodeResponse(y))[0],me=I[1],Oe=((I=I[2]).txid&&ne.a.isLong(I.txid)&&I.txid.toNumber&&(I.txid=I.txid.toNumber()),H.unUpdateMsgTimeTypes.includes(me)||(H.updatedMsgTime=Date.now()),(I==null?void 0:I.txid)||((Oe=I==null?void 0:I.data)==null?void 0:Oe.txid));H.unlogTypes.indexOf(me)===-1&&(x=Oe?", txid: ".concat(Oe):"",H.D.info("zn.wl.om"+" streamID: ".concat(B,", msgType: ").concat(me,"-").concat(ve[me])+x)),Oe&&H.isRspMsg(Oe)?H.handleSendCommandMsgRsp(B,me,Oe,I,{size:y.length}):H.L(B,me,I,{size:y.length})}},Ce.prototype.isRspMsg=function(H){return this.sendCommandMap[H]!==void 0},Ce.prototype.startCheck=function(){var H=this;this.W(this.sendCommandList,this.sendCommandMap,this.unSendCommandList,this.unSendCommandMap),this.j=setTimeout(function(){H.startCheck()},this.G)},Ce.prototype.stopCheck=function(){this.K(this.sendCommandList),this.j&&(clearTimeout(this.j),this.j=null)},Ce.prototype.W=function(H,y,x,I){for(var B,me,Oe,Qe=H.getFirst(),qe=H.size(),yt=Date.now(),Re=0,_t=0;Qe!=null;){if(Qe.C&&Qe.C.sendTime+Qe.C.timeOut>yt){if(++_t<qe){(Qe=H.removeFirst())&&Qe!=null&&Qe.data&&H.push(Qe==null?void 0:Qe.data);continue}break}if(H.remove(Qe),Qe.C&&(delete y[Qe.C.txid],me=I[Qe.C.txid])&&(x.remove(me),delete I[Qe.C.txid]),++_t,Qe.C&&Qe.C.error==null||Qe.C&&Qe.C.sendTime+this.H<yt||(me=Qe&&Qe.C&&Qe.C.error,Oe=Qe&&Qe.C&&Qe.C.txid,Qe&&Qe.C&&(B=Qe.C)!=null&&B.isCheck&&me&&me({},Oe,He.TIMEOUT)),++Re>=this.U)break;Qe=H.getFirst()}},Ce.prototype.K=function(H){for(var y,x=H.getFirst();x!=null&&x.C;)(function(){var I,B,me;H.remove(x),x.C.isSend&&x.C.error&&(I=x&&x.C&&x.C.error,B=x&&x.C&&x.C.txid,me=x&&x.C&&((y=x.C)==null?void 0:y.isCheck),setTimeout(function(){me&&I&&I({},B,He.TIMEOUT)},0)),x=H.getFirst()})()},Ce.prototype.handleSendCommandMsgRsp=function(H,y,x,I,B){var me,Oe=this.sendCommandMap[x];Oe!=null&&((me=Oe.C)!=null&&me.ack||(delete this.sendCommandMap[x],this.sendCommandList.remove(Oe)),I.code&&I.code!==0?me&&me.error!=null&&me.error(I,x):y===A.MSG_TYPE_PUSH_EXCEPTION?(I.code=I.reason,I.message=I.msg,delete I.reason,delete I.msg,me&&me.error!=null&&me.error(I,x)):y===A.MSG_TYPE_HTTP_REQUEST_ACK?me&&me.ackFunc!=null&&me.ackFunc(I,x):me&&me.success!=null&&me.success(I,x,B))},Ce}(z),Vt=(yi.prototype.getConfig=function(fe,Ce){var et;this.D.info("zn.nab.gc call"),this.Z.createStream(j.OTHER).sendMessage(A.MSG_TYPE_GET_CONFIG_REQUEST,{geofencing_type:(et=this.stateCenter.appInfo.geoFencing)==null?void 0:et.type,geofencings:(et=this.stateCenter.appInfo.geoFencing)==null?void 0:et.list},fe,Ce)},yi.prototype.dispatchURL=function(fe,Ce){var et,lt=this;this.D.info("zn.nab.du call"),this.Z.createStream(j.OTHER).sendMessage(A.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,{geofencing_type:(et=this.stateCenter.appInfo.geoFencing)==null?void 0:et.type,geofencings:(et=this.stateCenter.appInfo.geoFencing)==null?void 0:et.list},function(pt){lt.D.info("zn.nab.du suc "),fe&&fe(pt)},function(pt,H,y){lt.D.info("zn.nab.du fail"),Ce&&Ce(y||pt)})},yi.prototype.getAppConfig=function(fe,Ce,et,lt,pt,H){var y=this;return new Promise(function(x,I){function B(Oe,Qe,qe){qe?(y.D.error("zn.nab.gac fail "+JSON.stringify(qe)),I(qe)):Oe.code===0?(y.D.info("zn.nab.gac suc"),qe=y.decodeConfigMessage(Oe.data.data),x({code:0,data:qe,etag:Oe.data.etag})):(y.D.error("zn.nab.gac fail "+Oe.code),I({code:Oe.code}))}y.D.info("zn.nab.gac call");var me={id_name:Ce,config_key:fe,token:et,mode_no:((me=y.stateCenter.appInfo)==null?void 0:me.mode)||tt.modeNo,etag:pt,is_special_customer:H!=null&&H.isSpecial?1:0};y.Z.createStream(j.OTHER).sendMessage(A.MSG_TYPE_GET_APPCONFIG_REQUEST,me,B,B,null,{timeout:lt})})},yi.prototype.decodeConfigMessage=function(fe){return this.N.decodeConfigMessage(fe)},yi.prototype.getSvrAddr=function(){var fe=this;return new Promise(function(Ce,et){var lt;fe.D.info("".concat(it," call")),fe.Z.createStream(j.OTHER).sendMessage(A.MSG_TYPE_GET_SVRADDR_REQUEST,{geofencing_type:(lt=fe.stateCenter.appInfo.geoFencing)==null?void 0:lt.type,geofencings:(lt=fe.stateCenter.appInfo.geoFencing)==null?void 0:lt.list},function(pt){fe.D.info("".concat(it," suc")),Ce(pt)},function(pt,H,y){fe.D.info("".concat(it," fail")),et(y||pt)})})},yi),It=(Ii.prototype.init=function(fe){var Ce=this;this.D.info("zn.nhb.ii call"),this.et||(this.et=this.Z.createStream(j.OTHER)),1<=fe.data.logic_hb_interval&&fe.data.logic_hb_interval<=10&&(this.X=fe.data.logic_hb_interval),3<=fe.data.logic_hb_timeout&&fe.data.logic_hb_timeout<=30&&(this.tt=fe.data.logic_hb_timeout),this.it=0,this.nt=this.tt/this.X,this.J&&clearTimeout(this.J),this.J=setTimeout(function(){Ce.start()},1e3*this.X)},Ii.prototype.start=function(){var fe,Ce,et,lt=this;this.D.debug("zn.nhb.s call "),this.it++>this.nt?(this.D.error("zn.nhb.s come to try limit"),this.reset(),this.netHbLogout(He.NET_HB_TIMEOUT)):(fe=new Date().getTime(),Ce=function(pt,H,y){var x=new Date().getTime()-fe;lt.D.debug("zn.nhb.s hb callback "+x),y&&(y==null?void 0:y.code)!==0?lt.D.info("zn.nhb.s fail "+JSON.stringify(y)):(pt!=null&&pt.ntp_time&&(y=typeof(x=pt.ntp_time)=="number"?x:x.toNumber(),pt=new Date().getTime(),lt.M.appInfo.env===0)&&lt.M.updateNTP(fe,y,pt),lt.it=0)},et={ts:Date.now()},this.et.sendMessage(A.MSG_TYPE_HB_REQUEST,et,Ce,Ce,null),this.et.isFirst=!1,this.J&&clearTimeout(this.J),this.J=setTimeout(function(){lt.start()},1e3*this.X))},Ii.prototype.netHbLogout=function(fe){},Ii.prototype.reset=function(){this.J&&(clearTimeout(this.J),this.J=null),this.it=0},Ii),ri=(oi.prototype.addEventHandler=function(fe,Ce){if(this.st[fe]||(this.st[fe]=[]),typeof Ce!="function")throw new Error("Params callBack is not a Function");return this.st[fe]&&this.st[fe].indexOf(Ce)==-1&&this.st[fe].push(Ce),!0},oi.prototype.removeEventHandler=function(fe,Ce){return!!this.st[fe]&&(this.st[fe]=Ce?this.st[fe].filter(function(et){return et!==Ce}):[],!0)},oi.prototype.emit=function(fe){for(var Ce=[],et=1;et<arguments.length;et++)Ce[et-1]=arguments[et];this.st[fe]&&this.st[fe].forEach(function(lt){try{lt.apply(void 0,Ce)}catch(pt){console.error('Fail to execute callback of event "'.concat(fe,'" : ').concat(pt))}})},oi),gi=function(){return(gi=Object.assign||function(fe){for(var Ce,et=1,lt=arguments.length;et<lt;et++)for(var pt in Ce=arguments[et])Object.prototype.hasOwnProperty.call(Ce,pt)&&(fe[pt]=Ce[pt]);return fe}).apply(this,arguments)},Si=(Ri.prototype.sendRequest=function(fe,Ce,et,lt){var pt=this,H=fe.payload,y=((y=this.ct)!=null&&y.encode&&(H=St(fe.payload)),{service_no:this.ot,ack:fe.ack,payload:H,wss_message_type:(H=(y=this.ct)==null?void 0:y.messageType)!=null?H:tt.wssMessageType,wss_path:(y=this.ct)==null?void 0:y.path,wss_raw_query:(H=this.ct)==null?void 0:H.query,zegoconn_version:tt.connectVer});this.netPcStream.isConnect()||(this.D.info("zn.napr.sr pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(A.MSG_TYPE_PC_UPWARD_MESSAGE,y,function(){pt.D.info("zn.napr.sr suc"),et&&et()},function(x){pt.D.error("zn.napr.sr fail"),Ce&&Ce(x)},null,{isInSendMap:typeof fe.isInSendMap=="boolean"&&fe.isInSendMap,extras:lt,isMsgCache:(H=this.ct)==null?void 0:H.isMsgCache})},Ri.prototype.onPushEvent=function(fe,Ce,et){var lt;switch(this.D.info(nt+" msgType: ".concat(fe)),fe){case A.MSG_TYPE_PC_ESTABLISHED:this.netPcStream.isFirst=!1,this.pcEstablished(Ce,this.netPcStream.StreamID);break;case A.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case A.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.D.info(nt+" ".concat(this.ot," down ").concat((Ce==null?void 0:Ce.ts)&&Ce.ts.toNumber&&Ce.ts.toNumber()||Ce.ts));var pt=Ce.payload;(lt=this.ct)!=null&&lt.encode&&(pt=xt(Ce.payload)),this.eventManager.emit("downLoadMessage",pt,et);break;case A.MSG_TYPE_PUSH_EXCEPTION:this.D.info(nt+" ".concat(this.ot," exception ").concat(JSON.stringify(Ce))),this.eventManager.emit("exception",Ce,et)}},Ri.prototype.on=function(fe,Ce){return this.eventManager.addEventHandler(fe,Ce)},Ri.prototype.off=function(fe,Ce){this.eventManager.removeEventHandler(fe,Ce)},Ri.prototype.pcEstablished=function(fe,Ce){this.D.info("zn.napr.pe call "+JSON.stringify(fe)),this.setConnectState(Z.CONNECTED);var et=M.MANUAL;this.lastConnectState===Z.BROKEN&&this.connectState===Z.CONNECTED&&(et=M.AUTO),this.eventManager.emit("connected",et),this.reportEvent("pcConnectedEvent",{proxy_link_sources:fe==null?void 0:fe.from,connect_stream:Ce}),this.brokenTimer&&clearTimeout(this.brokenTimer)},Ri.prototype.pcBroken=function(){var fe=this;this.D.info("zn.napr.pb call"),this.setConnectState(Z.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout(function(){fe.eventManager.emit("disconnected",G.TEMP),fe.reportEvent("pcDisconnectedEvent")},1e3*this.rt)},Ri.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},Ri.prototype.ut=function(fe,Ce){var et;this.D.info("zn.napr.cr call "+this.ot+" "+this.connectState),this.connectState!==Z.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),et=this.Z.getStreamID(),this.netPcStream.refresh(et),this.eventManager.emit(fe,Ce),et="",fe==="broken"?et="pcBrokenEvent":fe==="disconnected"&&(et="pcDisconnectedEvent"),et)&&this.reportEvent(et),this.setConnectState(Z.DISCONNECT)},Ri.prototype.closePc=function(){this.ut("broken")},Ri.prototype.closeRequest=function(){this.ut("disconnected",G.CLOSE)},Ri.prototype.setConnectState=function(fe){this.connectState!==fe&&(this.lastConnectState=this.connectState,this.connectState=fe)},Ri.prototype.reportEvent=function(fe,Ce){this.eventManager.emit(fe,gi({service_no:this.ot},Ce))},Ri),Hi=(di.prototype.getRequest=function(fe,Ce){return fe=new Si(this.D,fe,this.Z,this.pcEstablishTimeout,Ce),this.pcStreamRequests.push(fe),fe},di.prototype.updateConnectState=function(fe,Ce,et){this.D.info("zn.naprm.ucs call "+fe+" "+Ce),this.pcStreamRequests.forEach(function(lt){fe===Z.BROKEN?(lt.eventManager.emit("broken"),lt.reportEvent("pcBrokenEvent")):fe===Z.DISCONNECT&&(lt.eventManager.emit("disconnected",Ce,et),lt.reportEvent("pcDisconnectedEvent"))})},di.prototype.closePCs=function(){this.pcStreamRequests.forEach(function(fe){fe.closePc()})},di.prototype.setEstablishTimeout=function(fe){this.pcEstablishTimeout=fe},di),Gi=(Ut.prototype.initLink=function(fe){this.link=fe},Ut.prototype.startMaxTime=function(){var fe=this;this.D.info("zn.rlh.sm call"),this.maxTimer||(this.D.info("zn.rlh.sm start max timer"),this.maxTimer=setTimeout(function(){fe.D.warn("zn.rlh.sm"+" over max time ".concat(fe.RETRY_MAX_TIME,"s, stop retry")),fe.isOverTime=!0,fe.link.destroySocket(K.NONE),fe.stopMaxTime(),fe.invalid(),fe.onactive(!1,He.NET_SOCKET_TIMEOUT)},1e3*this.RETRY_MAX_TIME))},Ut.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},Ut.prototype.active=function(fe,Ce,et){var lt=this;if(et===void 0&&(et=!1),this.D.info("zn.rlh.at call "+fe+" "+(Ce=Ce!==void 0&&Ce)),this.retryTimer)return this.D.info("zn.rlh.at has actived, ignore"),!1;var pt=this.M.networkState==oe.offline;if(pt){if(this.D.info("zn.rlh.at  check if really offline. "+this._t),this._t>=this.at)return this.D.warn("zn.rlh.at network is broken, stop retry"),!1}else this._t=0;return this.link.isConnecting()&&!et?(this.D.info("zn.rlh.at link is connecting, ignore"),!1):this.isOverTime?(this.D.info("zn.rlh.at retry over time, stop retry"),!1):(this.ht==1?this.lt=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(et=Math.pow(2,Math.round(this.ht/this.RETRY_CONTINUE_COUNT+1)),this.lt=et>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:et),this.D.info("zn.rlh.at interval "+this.lt),this.retryTimer=setTimeout(function(){lt.link.destroySocket(K.BROKEN),lt.link.connectSocket(fe,function(){lt.D.info("zn.rlh.at suc"),lt.M.networkState=oe.online,lt.stopMaxTime(),lt.invalid(),lt.onactive(!0)},function(){lt.D.info("zn.rlh.at fail"),lt.maxTimer||lt.startMaxTime(),lt.active(!0,!1,!0)}),lt.retryTimer&&clearTimeout(lt.retryTimer),lt.retryTimer=null,pt?lt._t++:lt.ht++},Ce?0:1e3*this.lt),!0)},Ut.prototype.onactive=function(){},Ut.prototype.init=function(fe,Ce,et,lt){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,typeof fe=="number"&&fe<3600&&(this.RETRY_MAX_TIME=fe),typeof Ce=="number"&&(this.RETRY_START_TIME_INTERVAL=Ce),typeof et=="number"&&(this.RETRY_CONTINUE_COUNT=et),typeof lt=="number"&&(this.RETRY_MAX_TIME_INTERVAL=lt)},Ut.prototype.invalid=function(){this.D.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.ht=1,this._t=0},Ut),Qi=(wt.prototype.updateNTP=function(fe,Ce,et){var lt;et<fe||(lt=et-fe,this.timeOffset=Math.round((Ce-fe+(Ce-et))/2),fe=Math.round(Ce+lt/2),(!this.networkRTT||lt<this.networkRTT)&&(this.networkRTT=lt,this.ntpTimeInfo={performanceTime:Math.round(performance.now()),ntp:fe}))},wt),br=(Qt.prototype.log=function(){for(var fe=[],Ce=0;Ce<arguments.length;Ce++)fe[Ce]=arguments[Ce];var et=fe.join(" ");console.log(et)},Qt.prototype.debug=function(){for(var fe=[],Ce=0;Ce<arguments.length;Ce++)fe[Ce]=arguments[Ce];var et=fe.join(" ");console.debug(et)},Qt.prototype.info=function(){for(var fe=[],Ce=0;Ce<arguments.length;Ce++)fe[Ce]=arguments[Ce];var et=fe.join(" ");console.info(et)},Qt.prototype.warn=function(){for(var fe=[],Ce=0;Ce<arguments.length;Ce++)fe[Ce]=arguments[Ce];var et=fe.join(" ");console.warn(et)},Qt.prototype.error=function(){for(var fe=[],Ce=0;Ce<arguments.length;Ce++)fe[Ce]=arguments[Ce];var et=fe.join(" ");console.error(et)},Qt),pr=function(){return(pr=Object.assign||function(fe){for(var Ce,et=1,lt=arguments.length;et<lt;et++)for(var pt in Ce=arguments[et])Object.prototype.hasOwnProperty.call(Ce,pt)&&(fe[pt]=Ce[pt]);return fe}).apply(this,arguments)},Vr=(Tt.prototype.sendRequest=function(fe,Ce,et,lt,pt){var H=this,y=fe.disableLog;fe={service_no:this.ot,ack:fe.ack,headers:fe.headers,body:St(JSON.stringify(fe.body)),id_name:fe.idName,method_no:fe.method_no,stick:fe.stick,location:fe.location,reduce_resp_header:fe.reduceRspHeaders?1:0},this.netHttpStream.sendMessage(A.MSG_TYPE_HTTP_REQUEST,fe,function(x){H.closeStream();var I=(((I=(x==null?void 0:x.headers).find(function(B){return(B==null?void 0:B.name)==="Content-Encoding"}))==null?void 0:I.val)==="gzip"?y||H.D.info("zn.nahr.sr gzip"):x.body&&(I=xt(x.body),x.body=I),pr(pr({},x),{body:void 0}));y||H.D.info("zn.nahr.sr suc "+JSON.stringify(I)),Ce&&Ce(x)},function(x,I,B){H.closeStream(),y||H.D.error("zn.nahr.sr fail"),et&&et(B||x)},function(x){y||H.D.error("zn.nahr.sr ack"),lt&&lt(x)},pt),this.netHttpStream.isFirst=!1},Tt.prototype.sendRequest2=function(fe,Ce,et,lt,pt){var H=this,y=fe.format===1?St(JSON.stringify(fe.body)):fe.body;y={ack:fe.ack,body:y,id_name:fe.idName,method:fe.method,interface_id:fe.interfaceID,token:fe.token,reduce_resp_header:fe.reduceRspHeaders?1:0},fe.headers&&(y.headers=fe.headers),fe.resID&&(y.res_id=fe.resID),fe.urlParams&&(y.params=fe.urlParams),fe.mode&&(y.mode=fe.mode),this.netHttpStream.sendMessage(A.MSG_TYPE_HTTP_REQUEST2,y,function(x,I){H.closeStream();var B=(x==null?void 0:x.headers).find(function(Oe){return(Oe==null?void 0:Oe.name)==="Content-Encoding"});if(x.status_code===200){if((B==null?void 0:B.val)==="gzip")H.D.info("zn.nahr.sr2 gzip");else if(x.body&&fe.format===1)try{me=xt(x.body),x.body=me}catch(Oe){H.D.info("zn.nahr.sr2 decode "+JSON.stringify(Oe))}B=pr(pr({},x),{body:void 0}),H.D.info("zn.nahr.sr2 suc "+JSON.stringify(B)),Ce&&Ce(x,I)}else{try{var me=xt(x.body);x.body=me}catch(Oe){H.D.info("zn.nahr.sr2 status "+x.status_code+" "+JSON.stringify(Oe))}et&&et(x)}},function(x,I,B){H.closeStream(),H.D.error("zn.nahr.sr2 fail"),et&&et(B||x)},function(x){H.D.error("zn.nahr.sr2 ack"),lt&&lt(x)},pt),this.netHttpStream.isFirst=!1},Tt.prototype.closeStream=function(){this.D.info("zn.nahr.cs call"),this.netHttpStream.closeStream(0,"")},Tt),bt=(Object.defineProperty(Ge.prototype,"StreamID",{get:function(){return this.ft},enumerable:!1,configurable:!0}),Ge.prototype.refresh=function(fe){this.ft=fe,this.isFirst=!0},Ge.prototype.sendMessage=function(fe,Ce,et,lt,pt,H){var y=this;et===void 0&&(et=null),lt===void 0&&(lt=null),this.dt.sendMessage(fe,this.ft,Ce,this.isFirst,function(x,I,B){y.Et!==j.PC&&(y.isFree=!0),et&&et(x,B)},function(x,I,B){y.Et!==j.PC&&(y.isFree=!0),lt&&lt(x,I,B)},pt=pt===void 0?null:pt,H=H===void 0?{timeout:5e3,isInSendMap:!0}:H)},Ge.prototype.onPushEvent=function(fe,Ce,et){},Ge.prototype.closeStream=function(fe,Ce){this.dt.sendMessage(A.MSG_TYPE_STREAM_CLOSED,this.ft,{code:fe,msg:Ce})},Ge.prototype.isConnect=function(){return this.dt.isConnect()},Ge),zt=(ft.prototype.createStream=function(fe){var Ce=new bt(fe,this.streamID++,this.dt);return fe===j.PC&&this.pcStreams.push(Ce),Ce},ft.prototype.onPushEvent=function(fe,Ce,et,lt){var pt=this.pcStreams.find(function(H){return H.StreamID===fe});pt&&pt.onPushEvent(Ce,et,lt)},ft.prototype.getStreamID=function(){return this.streamID++},ft),R=function(){return(R=Object.assign||function(fe){for(var Ce,et=1,lt=arguments.length;et<lt;et++)for(var pt in Ce=arguments[et])Object.prototype.hasOwnProperty.call(Ce,pt)&&(fe[pt]=Ce[pt]);return fe}).apply(this,arguments)},at=(Object.defineProperty(ke.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(ke.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty(ke.prototype,"linkConnectState",{get:function(){return this.Tt},set:function(fe){this.lastLinkConnectState=this.Tt,this.Tt=fe},enumerable:!1,configurable:!0}),ke.prototype.init=function(){this.logger=new br,this.stateCenter=new Qi,this.protobuf=new ye(this.stateCenter),this.eventManager=new ri,this.At(),this.inited=!0},ke.prototype.unInit=function(){this.inited=!1,this.zegoLink.release()},ke.prototype.setAppInfo=function(fe){this.logger.info("zn.sai.0 "+JSON.stringify(fe)),this.stateCenter.appInfo=R({model:tt.model},fe),this.stateCenter.networkState=!navigator||navigator.onLine?oe.online:oe.offline,fe.env===0?this.It():fe.env===1&&this.Nt(),this.zegoLink=new Nt(fe.appID,fe.env,this.protobuf,this.logger,this.stateCenter,this.proxyCtrl),this.zegoLink.initEvent(this.V,this.B,this.k,this.L),this.streamManager=new zt(this.zegoLink),this.businessRequestMgr=new Vt(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new It(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new Hi(this.streamManager,this.logger),this.Dt()},ke.prototype.setUserInfo=function(fe){this.stateCenter.userId=fe},ke.prototype.setNetAgentDefaultServers=function(fe){this.connectServers=Ht([],fe,!0)},ke.prototype.setNetAgentSpecifiedServers=function(fe){throw this.logger.info("zn.sss.0 "+JSON.stringify(fe)),Error("not support")},ke.prototype.setBackupDomains=function(fe){throw Error("not support")},ke.prototype.setDispatchConnectServers=function(fe){this.Mt(fe)},ke.prototype.startHttpRequest=function(fe,Ce,et,lt,pt){var H=this;if(pt&&typeof(pt==null?void 0:pt.timeout)=="number"&&((pt==null?void 0:pt.timeout)<1e3||1e4<(pt==null?void 0:pt.timeout)))throw Error("timeout must between 1 and 10 second");var y=this.reportSeq++;this.eventManager.emit("requestEvent",y,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new Vr(this.logger,this.streamManager,fe.service).sendRequest(fe,function(x){H.eventManager.emit("requestEvent",y,"end",{na_req_location:fe.location,status_code:x.status_code,err_code:0}),Ce&&Ce(x)},function(x){H.eventManager.emit("requestEvent",y,"end",{na_req_location:fe.location,err_code:x.code||0}),et&&et(x)},lt,pt)},ke.prototype.startHttpRequest2=function(fe,Ce,et,lt,pt){var H=this,y=this.reportSeq++;this.eventManager.emit("requestEvent",y,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new Vr(this.logger,this.streamManager).sendRequest2(fe,function(x,I){H.eventManager.emit("requestEvent",y,"end",{na_req_interface:fe.interfaceID,status_code:x.status_code,err_code:0}),Ce&&Ce(x,I)},function(x){H.eventManager.emit("requestEvent",y,"end",{na_req_interface:fe.interfaceID,err_code:x.code||0}),et&&et(x)},lt,pt)},ke.prototype.getAppConfigByAgent=function(fe,Ce,et,lt,pt){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.Ut(fe,this.stateCenter.userId,Ce,et,lt,pt)},ke.prototype.getPCRequest=function(fe,Ce){var et=this;return(Ce=this.netAgentPCRequestMgr.getRequest(fe,Ce)).on("disconnected",function(lt){et.logger.warn("zn.zca.gpr "+fe+" disconnect "+lt),lt===G.TEMP&&(et.Rt(),et.Ht())}),Ce.on("connectStart",function(){et.connectUa()}),Ce},ke.prototype.connectUa=function(){this.isDestroy||(this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.Ht(!1,!0)))},ke.prototype.destroyConnect=function(fe){this.logger.info("zn.zca.dc.0 call"),this.yt(fe)},ke.prototype.destroy=function(){this.logger.info("zn.zca.dy.0 call"),this.destroyConnect(this.linkConnectState!==2?Ee:void 0),this.St&&clearTimeout(this.St),this.retryLinkHandler&&this.retryLinkHandler.invalid(),this.retryLinkHandler&&this.retryLinkHandler.stopMaxTime(),this.isDestroy=!0},ke.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},ke.prototype.on=function(fe,Ce){return this.logger.info("zn.zca.o.0 "+fe),this.eventManager.addEventHandler(fe,Ce)},ke.prototype.off=function(fe,Ce){this.logger.info("zn.zca.o.1 "+fe),this.eventManager.removeEventHandler(fe,Ce)},ke.prototype.setLogger=function(fe){this.logger=fe},ke.prototype.setAccess=function(fe){this.stateCenter.useNetAgent=fe},ke.prototype.getVersion=function(){return"1.1.7"},ke.prototype.Dt=function(){var fe=this;this.netHeartBeatHandler.netHbLogout=function(Ce){fe.retryLinkHandler&&([He.NET_HB_TIMEOUT.code].includes(Ce.code)?(fe.retryLinkHandler.startMaxTime(),fe.Rt(),fe.Ht()):(fe.retryLinkHandler.stopMaxTime(),fe.retryLinkHandler.invalid(),fe.eventManager.emit("disconnected"),fe.Ot()))}},ke.prototype.It=function(){var fe=this;window.addEventListener("offline",function(){fe.Gt()}),window.addEventListener("online",function(){fe.wt()})},ke.prototype.Nt=function(){var fe=this;wx.onNetworkStatusChange(function(Ce){Ce.isConnected?fe.wt():fe.Gt()})},ke.prototype.wt=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=oe.online,this.stateCenter.useNetAgent&&this.zt()},ke.prototype.Gt=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=oe.offline,this.stateCenter.useNetAgent&&this.Yt()},ke.prototype.At=function(){var fe=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var Ce=Date.now()-this.zegoLink.updatedMsgTime;if(Ce>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+Ce),void this.yt()}this.St&&clearTimeout(this.St),this.St=setTimeout(function(){fe.At()},1e3*this.linkMsgCheckInterval)}},ke.prototype.Mt=function(fe){var Ce=this;0<fe.length&&(this.connectServers=Ht([],fe,!0)),0<this.defaultConnectServers.length&&this.defaultConnectServers.forEach(function(et){Ce.connectServers.includes(et)||Ce.connectServers.push(et)}),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new Gi(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(et,lt){lt===He.NET_SOCKET_TIMEOUT&&(Ce.eventManager.emit("disconnected",lt),Ce.Ot(),Ce.netAgentPCRequestMgr.updateConnectState(Z.DISCONNECT,G.TIMEOUT,lt))},this.Ht(!1,!0)},ke.prototype.yt=function(fe){this.netHeartBeatHandler&&this.netHeartBeatHandler.reset(),this.zegoLink&&this.zegoLink.destroySocket(K.DISCONNECT,fe)},ke.prototype.vt=function(){function fe(lt,pt,H){H?Ce.logger.info("zn.zca.gc fail "+JSON.stringify(H)):lt.code===0?(Ce.logger.info("zn.zca.gc suc "+JSON.stringify(lt)),Ce.Vt(lt,et)):Ce.logger.info("zn.zca.gc fail "+JSON.stringify(lt))}var Ce=this,et=new Date().getTime();this.businessRequestMgr.getConfig(fe,fe)},ke.prototype.Vt=function(fe,Ce){this.netHeartBeatHandler.init(fe),this.netAgentPCRequestMgr.setEstablishTimeout(fe.data.pc_establish_timeout),(et=fe==null?void 0:fe.data)!=null&&et.client_outer_ip&&(this.stateCenter.clientIP=fe.data.client_outer_ip),(et=fe==null?void 0:fe.data)!=null&&et.ntp_time&&(et=typeof(et=fe.data.ntp_time)=="number"?et:et.toNumber(),lt=new Date().getTime(),this.stateCenter.appInfo.env===0)&&this.stateCenter.updateNTP(Ce,et,lt);var et,lt;Ce=fe.data.geofencing_id,this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset,geofencingID:Ce})},ke.prototype.Ct=function(){var fe=this;return new Promise(function(Ce,et){fe.businessRequestMgr.dispatchURL(function(lt){lt=lt.data.wss_groups;var pt=(fe.logger.info("zn.nab.du wss_groups: "+JSON.stringify(lt)),lt.some(function(y){return y.host.includes("geo")})),H=(H=fe.stateCenter.appInfo)!=null&&H.geoFencing||pt?lt:fe.Bt(lt);pt=fe.kt(H),Ce({servers:pt,domains:H})},function(lt){et(lt)})})},ke.prototype.gt=function(){var fe=this;return new Promise(function(Ce,et){fe.businessRequestMgr.getSvrAddr().then(function(lt){var pt,H,y,x=lt.code,I=lt.msg;lt=lt.data,x===0?(pt=lt.accesshub_domain,H=lt.logreport_domain,y=lt.detaillog_domain,lt=lt.geofencing_id,fe.logger.info("".concat(it," domains: ").concat(pt," ").concat(H," ").concat(y)),Ce({accesshub_domain:pt,logreport_domain:H,detaillog_domain:y,geofencing_id:lt})):et({code:x,msg:I})}).catch(function(lt){et(lt)})})},ke.prototype.kt=function(fe){return Array.isArray(fe)&&0<fe.length?fe.map(function(Ce){return tt.scheme+"://"+Ce.host+"/"+tt.location}):[]},ke.prototype.Bt=function(fe){return(fe=Ht([],fe,!0)).filter(function(Ce){return!!Ce.host})},ke.prototype.Ut=function(fe,Ce,et,lt,pt,H){var y=this;return new Promise(function(x,I){typeof Ce=="string"&&typeof et=="string"?y.businessRequestMgr.getAppConfig(fe,Ce,et,lt,pt,H).then(function(B){x(R(R({},B),{retryCount:y.getAppConfigFailCount}))}).catch(function(B){var me;y.logger.error("zn.zca.gac "+JSON.stringify(B)),!(-1<W.indexOf(B.code))&&(y.getAppConfigFailCount++,B.code===20008||B.code===1100002)&&y.getAppConfigFailCount<3?y.Ut(fe,Ce,et,pt).then(function(Oe){return x(Oe)}).catch(function(Oe){return I(Oe)}):(me=y.getAppConfigFailCount,y.getAppConfigFailCount=0,I(R(R({},B),{retryCount:me})))}):y.logger.error("zn.zca.gac userID or token must be string")})},ke.prototype.Ot=function(){var fe=new Date().getTime()-this.connectedTime;this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:fe,server:this.zegoLink.connectServer,connectid:this.connectid})},ke.prototype.Pt=function(fe){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(fe.wss_groups))),(fe=this.kt(fe.wss_groups))&&Array.isArray(fe)&&0<fe.length?(this.Rt(),this.stateCenter.specified&&(this.logger.info("zn.zca.rd specified"),fe=this.specifiedServers),this.zegoLink.createSocket(fe),this.Ht(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},ke.prototype.bt=function(fe){var Ce=this;switch(this.logger.info("zn.zca.cc"+" ".concat(fe.reason," ").concat(fe.msg," ").concat(fe.action)),fe.action){case J.ACTION_DISPATCH:var et=this.reportSeq++;this.eventManager.emit("dispatchEvent",et,"start"),this.Ct().then(function(lt){var pt=lt.servers;lt=lt.domains,Ce.eventManager.emit("dispatchEvent",et,"end",{domains:lt,reason:"ConnectClosed"}),Array.isArray(pt)&&0<pt.length&&(Ce.eventManager.emit("dispatchResultUpdate",{servers:pt,domains:lt}),lt=Ce.stateCenter.specified?Ce.specifiedServers:pt,Ce.Rt(),Ce.zegoLink.createSocket(lt),Ce.Ht(!1,!0))}).catch(function(lt){Ce.logger.info("zn.zca.cc dispatch fail")});break;case J.ACTION_RETRY:this.Rt(),this.Ht(!1);break;case J.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",L.CLOSE),this.Ht();case J.ACTION_ABORT:case J.ACTION_RESERVED:}},ke.prototype.zt=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.Ht())},ke.prototype.Yt=function(){this.Rt(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(0))},ke.prototype.Ht=function(fe,Ce){this.retryLinkHandler.active(fe,Ce)&&this.Lt()},ke.prototype.Lt=function(){var fe=this.reportSeq++;this.connectSeq=fe,this.eventManager.emit("connectedEvent",fe,"start")},ke.prototype.Rt=function(){this.logger.info("zn.zca.dc.1 call"),this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.lastLinkConnectState===2&&this.linkConnectState===0&&this.Ot()},ke.prototype.getNetworkTimeInfo=function(){var fe,Ce=Date.now()+this.stateCenter.timeOffset,et=Math.round(this.stateCenter.networkRTT/2),lt=this.stateCenter.ntpTimeInfo;return lt&&(fe=performance.now()-lt.performanceTime,Ce=Math.round(lt.ntp+fe)),{timestamp:Ce,maxDeviation:et}},ke);function ke(fe){var Ce=this;this.proxyCtrl=fe,this.St=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.isDestroy=!1,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.defaultConnectServers=[],this.Tt=0,this.lastLinkConnectState=0,this.V=function(et,lt){var pt;Ce.linkConnectState=2,Ce.vt(),Ce.stateCenter.appInfo.env===0&&(pt=Ce.reportSeq++,Ce.eventManager.emit("dispatchEvent",pt,"start"),Ce.Ct().then(function(H){var y=H.servers;H=H.domains.map(function(x){return x.host}),Ce.eventManager.emit("dispatchEvent",pt,"end",{domains:H}),0<y.length&&Ce.eventManager.emit("dispatchResultUpdate",{servers:y,domains:H})}).catch(function(H){}),Ce.gt().then(function(H){var y=H.accesshub_domain,x=H.logreport_domain,I=H.detaillog_domain;H=H.geofencing_id,Ce.eventManager.emit("svrAddrResultUpdate",{accesshub_domain:y,logreport_domain:x,detaillog_domain:I,geofencing_id:H})}).catch(function(H){})),Ce.eventManager.emit("connected"),Ce.connectedTime=new Date().getTime(),Ce.connectid=function(H){var y,x="0123456789".split(""),I=[];for(H=x.length,y=0;y<16;y++)I[y]=x[0|Math.random()*H];return I.join("")}(),Ce.eventManager.emit("connectedEvent",Ce.connectSeq,"end",{servers:et,count:et.length,connectid:Ce.connectid,connectEvents:lt})},this.k=function(){Ce.logger.info("zn.zca.oce call"),Ce.linkConnectState=1},this.B=function(et){Ce.logger.info("zn.zca.ode"+" ".concat(et)),Ce.linkConnectState=0,et?(Ce.Rt(),Ce.netAgentPCRequestMgr.updateConnectState(Z.BROKEN)):(Ce.eventManager.emit("disconnected"),Ce.netAgentPCRequestMgr.updateConnectState(Z.DISCONNECT),Ce.Ot())},this.L=function(et,lt,pt,H){switch(lt){case A.MSG_TYPE_REDIRECT:case A.MSG_TYPE_REDIRECT2:Ce.Pt(pt);break;case A.MSG_TYPE_CLOSE_CONNECTION:Ce.bt(pt);break;case A.MSG_TYPE_PC_BROKEN:case A.MSG_TYPE_PC_ESTABLISHED:case A.MSG_TYPE_PC_DOWNWARD_MESSAGE:case A.MSG_TYPE_PUSH_EXCEPTION:Ce.streamManager.onPushEvent(et,lt,pt,H);break;case A.MSG_TYPE_PUSH_APPCONFIG:Ce.businessRequestMgr.decodeConfigMessage(pt.data)}}}function ft(fe){this.dt=fe,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}function Ge(fe,Ce,et){this.Et=fe,this.ft=Ce,this.dt=et,this.isFree=!1,this.isFirst=!0}function Tt(fe,Ce,et){this.D=fe,this.Z=Ce,this.ot=et,this.netHttpStream=this.Z.createStream(j.HTTP)}function Qt(){}function wt(){this.networkState=oe.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0,this.networkRTT=0}function Ut(fe,Ce){this.D=fe,this.M=Ce,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.ht=1,this._t=0,this.at=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}function di(fe,Ce){this.Z=fe,this.D=Ce,this.pcStreamRequests=[],this.pcEstablishTimeout=tt.pcEstablishTimeout}function Ri(fe,Ce,et,lt,pt){this.D=fe,this.ot=Ce,this.Z=et,this.rt=lt,this.ct=pt,this.connectState=Z.DISCONNECT,this.lastConnectState=Z.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.Z.createStream(j.PC),this.eventManager=new ri,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}function oi(){this.st={}}function Ii(fe,Ce,et){this.Z=fe,this.D=Ce,this.M=et,this.J=null,this.X=5,this.tt=10,this.nt=0,this.it=0}function yi(fe,Ce,et,lt){this.Z=fe,this.N=Ce,this.D=et,this.stateCenter=lt}function hi(fe,Ce){this.proxyCtrl=Ce,this.P=null,this.ENV=fe}}],ce={},ue.m=pe,ue.c=ce,ue.d=function(X,P,z){ue.o(X,P)||Object.defineProperty(X,P,{enumerable:!0,get:z})},ue.r=function(X){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"u",{value:!0})},ue.t=function(X,P){if(1&P&&(X=ue(X)),8&P||4&P&&typeof X=="object"&&X&&X.u)return X;var z=Object.create(null);if(ue.r(z),Object.defineProperty(z,"default",{enumerable:!0,value:X}),2&P&&typeof X!="string")for(var oe in X)ue.d(z,oe,(function(A){return X[A]}).bind(null,oe));return z},ue.n=function(X){var P=X&&X.u?function(){return X.default}:function(){return X};return ue.d(P,"a",P),P},ue.o=function(X,P){return Object.prototype.hasOwnProperty.call(X,P)},ue.p="",ue(ue.s=2))},function(V,C,q){function ue(P){var z;return(X[P]||(z=X[P]={i:P,l:!1,exports:{}},ce[P].call(z.exports,z,z.exports,ue),z.l=!0,z)).exports}var se,Y,pe,ce,X;V.exports=(se=q(10),Y=q(1),pe=q(3),ce=[function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.AUTH_FAIL=z.MULTI_FILE_NOT_EXIST=z.INFLATE_DATA_FAIL=z.FILE_REQUEST_FAIL=z.NOT_INIT=void 0,z.NOT_INIT={code:1001,msg:"not init"},z.FILE_REQUEST_FAIL={code:1002,msg:"fetch request fail"},z.INFLATE_DATA_FAIL={code:1003,msg:"inflate fail"},z.MULTI_FILE_NOT_EXIST={code:1004,msg:"get multi file fail"},z.AUTH_FAIL={code:1005,msg:"auth failed"}},function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.SETTINGFETCHHANDLER_FETCHSETTING=z.SETTINGCACHEHANDLER_STORE_SETTING=z.SETTINGCACHEHANDLER_GET_CACHE_SETTING=z.SETTING_POLLING_SETTING=z.SETTING_GET_CLOUD_SETTING=z.SETTING__FETCH_SETTING=z.SETTING_FETCH_SETTING=z.SETTING_INIT=z.constRUCTOR=void 0,z.constRUCTOR="zs.0",z.SETTING_INIT="zs.ii.0",z.SETTING_FETCH_SETTING="zs.fs.0",z.SETTING__FETCH_SETTING="zs.fs.1",z.SETTING_GET_CLOUD_SETTING="zs.gcs.0",z.SETTING_POLLING_SETTING="zs.ps.0",z.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",z.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",z.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(P,z,oe){var A;Object.defineProperty(z,"u",{value:!0}),z.ProductMap=z.Product=z.SOCKET_DISCONNECT=z.ENUM_REMOTE_TYPE=z.ZEGO_BROWSER_TYPE=z.ZEGO_ENV=z.PROTO_VERSION=void 0,z.PROTO_VERSION="1.1.2",(A=z.ZEGO_ENV||(z.ZEGO_ENV={}))[A.BROWSER=0]="BROWSER",A[A.WEIXINMINI=1]="WEIXINMINI",(A=z.ZEGO_BROWSER_TYPE||(z.ZEGO_BROWSER_TYPE={}))[A.IE=0]="IE",A[A.FIREFOX=1]="FIREFOX",A[A.CHROME=2]="CHROME",A[A.SAFARI=3]="SAFARI",A[A.OPERA=4]="OPERA",A[A.WEIXIN=5]="WEIXIN",A[A.WEIXINMINI=6]="WEIXINMINI",A[A.UNKOWN=7]="UNKOWN",(A=z.ENUM_REMOTE_TYPE||(z.ENUM_REMOTE_TYPE={}))[A.DISABLE=0]="DISABLE",A[A.WEBSOCKET=1]="WEBSOCKET",A[A.HTTPS=2]="HTTPS",z.SOCKET_DISCONNECT=-1,(A=z.Product||(z.Product={}))[A.RTC=0]="RTC",A[A.WEB_RTC=1]="WEB_RTC",A[A.ZIM=2]="ZIM",A[A.ROOM_KIT=3]="ROOM_KIT",A[A.DOC_SHARE=4]="DOC_SHARE",A[A.WHITE_BOARD=5]="WHITE_BOARD",A[A.SELF_CHECK=999]="SELF_CHECK",A[A.TEST_ANOOUS=1e3]="TEST_ANOOUS",z.ProductMap={0:"rtc_sdk_native",1:"Web_SDK",2:"ZIM",3:"roomkitWeb",4:"docsshare",5:"WhiteBoard"}},function(P,z){P.exports=se},function(P,z,oe){var A=this&&this.__read||function(j,K){var Z=typeof Symbol=="function"&&j[Symbol.iterator];if(!Z)return j;var J,D,G=Z.call(j),M=[];try{for(;(K===void 0||0<K--)&&!(J=G.next()).done;)M.push(J.value)}catch(L){D={error:L}}finally{try{J&&!J.done&&(Z=G.return)&&Z.call(G)}finally{if(D)throw D.error}}return M},le=this&&this.__spread||function(){for(var j=[],K=0;K<arguments.length;K++)j=j.concat(A(arguments[K]));return j},$=(Object.defineProperty(z,"u",{value:!0}),z.decodeString=z.decodeCompressData=z.generateUUID=z.checkValidNumber=z.analyzeKey=z.getCurrentTime=z.getBrowser=void 0,oe(16)),k=(z.getBrowser=function(){var j=window.navigator.userAgent,K=window.ActiveXObject!=null&&j.indexOf("MSIE")!=-1,Z=j.indexOf("Firefox")!=-1,J=window.opr!=null,D=j.indexOf("Chrome")&&window.chrome,G=j.indexOf("Safari")!=-1&&j.indexOf("Version")!=-1;return j=j.toLowerCase().match(/MicroMessenger/i)&&j.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",K?"IE":Z?"FIREFOX":J?"OPERA":D?"CHROME":G?"SAFARI":j?"WEIXIN":"UNKOWN"},["00","01","02","03","04","05","06","07","08","09"]);z.getCurrentTime=function(){var j=new Date;return[j.getFullYear()+"/",(k[j.getMonth()+1]||j.getMonth()+1)+"/",(k[j.getDate()]||j.getDate())+" ",(k[j.getHours()]||j.getHours())+":",(k[j.getMinutes()]||j.getMinutes())+":",k[j.getSeconds()]||j.getSeconds(),"."+j.getTime()%1e3].join("")},z.analyzeKey=function(j){return j=j.split("_"),{level:Number(j[0]),timestamp:j[1],seq:j[2]}},z.checkValidNumber=function(j,K,Z){return K=K||1,Z=Z||1e4,typeof j=="number"&&j%1==0&&K<=j&&j<=Z},z.generateUUID=function(j){if((j=j===void 0?0:j)===0)try{Z=localStorage.getItem("z_deviceID")}catch{}else wx.getStorageSync("z_deviceID");if(!Z){var K=new Date().getTime(),Z="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(J){var D=(K+16*Math.random())%16|0;return K=Math.floor(K/16),(J=="x"?D:3&D|8).toString(36)});if(j===0)try{localStorage.setItem("z_deviceID",Z)}catch{}else wx.setStorageSync("z_deviceID",Z)}return Z},z.decodeCompressData=function(j){try{return $.inflate(j,{to:"string"})}catch(K){console.error(K)}},z.decodeString=function(j){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,le(Array.from(j)))))}},function(P,z){P.exports=Y},function(P,z){P.exports=pe},function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.INIT_CONFIG=void 0,z.INIT_CONFIG={env:0,compress:!0,p_version:1}},function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.ZegoSetting=void 0;var A=oe(9);Object.defineProperty(z,"ZegoSetting",{enumerable:!0,get:function(){return A.ZegoSetting}})},function(P,z,oe){var A=this&&this.__assign||function(){return(A=Object.assign||function(W){for(var ve,de=1,ne=arguments.length;de<ne;de++)for(var he in ve=arguments[de])Object.prototype.hasOwnProperty.call(ve,he)&&(W[he]=ve[he]);return W}).apply(this,arguments)},le=this&&this.__awaiter||function(W,ve,de,ne){return new(de=de||Promise)(function(he,_e){function Ue(Me){try{ze(ne.next(Me))}catch(We){_e(We)}}function Fe(Me){try{ze(ne.throw(Me))}catch(We){_e(We)}}function ze(Me){var We;Me.done?he(Me.value):((We=Me.value)instanceof de?We:new de(function(rt){rt(We)})).then(Ue,Fe)}ze((ne=ne.apply(W,ve||[])).next())})},$=this&&this.__generator||function(W,ve){var de,ne,he,_e={label:0,sent:function(){if(1&he[0])throw he[1];return he[1]},trys:[],ops:[]},Ue={next:Fe(0),throw:Fe(1),return:Fe(2)};return typeof Symbol=="function"&&(Ue[Symbol.iterator]=function(){return this}),Ue;function Fe(ze){return function(Me){var We=[ze,Me];if(de)throw new TypeError("Generator is already executing.");for(;_e;)try{if(de=1,ne&&(he=2&We[0]?ne.return:We[0]?ne.throw||((he=ne.return)&&he.call(ne),0):ne.next)&&!(he=he.call(ne,We[1])).done)return he;switch(ne=0,(We=he?[2&We[0],he.value]:We)[0]){case 0:case 1:he=We;break;case 4:return _e.label++,{value:We[1],done:!1};case 5:_e.label++,ne=We[1],We=[0];continue;case 7:We=_e.ops.pop(),_e.trys.pop();continue;default:if(!(he=0<(he=_e.trys).length&&he[he.length-1])&&(We[0]===6||We[0]===2)){_e=0;continue}if(We[0]===3&&(!he||We[1]>he[0]&&We[1]<he[3]))_e.label=We[1];else if(We[0]===6&&_e.label<he[1])_e.label=he[1],he=We;else{if(!(he&&_e.label<he[2])){he[2]&&_e.ops.pop(),_e.trys.pop();continue}_e.label=he[2],_e.ops.push(We)}}We=ve.call(W,_e)}catch(rt){We=[6,rt],ne=0}finally{de=he=0}if(5&We[0])throw We[1];return{value:We[0]?We[1]:void 0,done:!0}}}},k=(Object.defineProperty(z,"u",{value:!0}),z.ZegoSetting=void 0,oe(0)),j=oe(2),K=oe(10),Z=oe(11),J=oe(13),D=oe(7),G=oe(4),M=oe(1);function L(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new K.ZegoLog}Object.defineProperty(L.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),L.prototype.init=function(W){var ve,de=this;return W.pollingFreq&&!G.checkValidNumber(W.pollingFreq)?(this.log.error(M.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},D.INIT_CONFIG,W),this.h(),this.settingFetchHandler=new J.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),W=Math.round(60*Math.random()),this.log.info(M.SETTING_INIT+" delay "+W),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout(function(){de.v(1e3*de.pollingInterval,!1)},1e3*W),W=this.options.product||this.options.productNum,this.settingCacheHandler=new Z.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+W+"_"+this.options.appID,this.log,this.options.env),[0,1,2,3,4,5].includes(W)&&(ve=j.ProductMap[W])&&(W===1&&this.settingCacheHandler.dropOldStore("setting_"+(this.options.online?"online_":"test_")+"undefined_"+this.options.appID),this.settingCacheHandler.dropOldStore("setting_"+(this.options.online?"online_":"test_")+ve+"_"+this.options.appID)),(W=this.options)!=null&&W.unify&&this.options.connection&&(W=(ve=this.options)==null?void 0:ve.connection)!=null&&W.on("connected",function(){de.settingFetchHandler.checkUnSendMsgs(de.settingFetchHandler.unSendCommandList)}),this.g(),this.inited=!0)},L.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},L.prototype.setEnvVariable=function(W,ve){this.proEnvVariable[W]=String(ve)},L.prototype.getEnvVariable=function(W){return this.envVariable[W]},L.prototype.setEnvVariables=function(W){var ve=this;Object.keys(W).forEach(function(de){typeof W[de]!="string"&&typeof W[de]!="number"&&ve.log.error("zs.sev env "+de+" type error"),ve.proEnvVariable[de]=String(W[de])})},L.prototype.getEnvVariables=function(){return this.envVariable},L.prototype.enablePolling=function(W,ve){var de=this;ve?ve.forEach(function(ne){var he=de.fileList.find(function(_e){return _e.fileName===ne});he&&(he.needPolling=W)}):this.fileList.forEach(function(ne){return ne.needPolling=W})},L.prototype.setToken=function(W){this.token!==W&&this.g(),this.token=W},L.prototype.setUserID=function(W){this.userID!==W&&this.g(),this.userID=W},L.prototype.getSettingCache=function(W){return le(this,void 0,void 0,function(){var ve,de;return $(this,function(ne){switch(ne.label){case 0:return this.inited?(ve=this.fileList.find(function(he){return he.fileName===W}))?[2,Promise.resolve({setting:ve.setting,versions:ve.versions})]:[3,1]:[2,Promise.reject(k.NOT_INIT)];case 1:return[4,this.settingCacheHandler.getCacheSetting(W)];case 2:return(ve=ne.sent())&&(this.fileList.find(function(he){return he.fileName===W})||this.fileList.push({fileName:W,fetchedTime:0,needPolling:!1,setting:ve.setting,versions:ve.versions}),de={setting:ve.setting,versions:ve.versions}),[2,Promise.resolve(de)]}})})},L.prototype.fetchSetting=function(W,ve,de){return ve===void 0&&(ve={}),de===void 0&&(de=!0),this.log.info(M.SETTING_FETCH_SETTING+" call "+W),this.inited?(this.activePolling(),0<Object.keys(ve).length?(this.log.info(M.SETTING_FETCH_SETTING+" get file with params"),this._(W,A(A({},this.envVariable),ve))):(ve=this.fileList.find(function(ne){return ne.fileName===W}))?(this.log.info(M.SETTING_FETCH_SETTING+" file exist"),new Date().getTime()-ve.fetchedTime<1e3*this.pollingInterval?(this.log.info(M.SETTING_FETCH_SETTING+" fetch time interval in freq"),ve.needPolling=de,Promise.resolve({setting:ve.setting,versions:ve.versions})):this.O(W,ve,de)):(this.log.info(M.SETTING_FETCH_SETTING+" file not found"),this.O(W,ve,de))):Promise.reject(k.NOT_INIT)},L.prototype.fetchMultiSetting=function(W,ve,de){var ne=this;return ve===void 0&&(ve={}),de===void 0&&(de=!0),this.log.info(M.SETTING_FETCH_SETTING+" call "+JSON.stringify(W)),this.inited?(this.activePolling(),0<Object.keys(ve).length?(this.log.info(M.SETTING_FETCH_SETTING+" get file with params"),this._(W,A(A({},this.envVariable),ve))):new Promise(function(he,_e){var Ue={},Fe=[];if(W.forEach(function(ze){return le(ne,void 0,void 0,function(){var Me;return $(this,function(We){return(Me=this.fileList.find(function(rt){return rt.fileName===ze}))&&new Date().getTime()-Me.fetchedTime<1e3*this.pollingInterval?(this.log.info(M.SETTING_FETCH_SETTING+" fetch time interval in freq"),Ue[ze]={setting:Me.setting,versions:Me.versions}):Fe.push(ze),[2]})})}),!(0<Fe.length))return he(Ue);ne._(Fe,ne.envVariable).then(function(ze){return ne.k(ze,de),Object.assign(Ue,ze),he(Ue)}).catch(function(ze){Fe.forEach(function(Me){return le(ne,void 0,void 0,function(){var We;return $(this,function(rt){switch(rt.label){case 0:return(We=this.fileList.find(function(dt){return dt.fileName==Me}))?We.fetchedTime=new Date().getTime():this.fileList.find(function(dt){return dt.fileName===Me})||this.fileList.push({fileName:Me,fetchedTime:new Date().getTime(),needPolling:de,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(Me)];case 1:return We=rt.sent(),Ue[Me]={setting:We.setting,versions:We.versions},[2]}})})}),0<Object.keys(Ue).length?he(Ue):_e(ze)})})):(this.log.info(M.SETTING_FETCH_SETTING+" not init"),Promise.reject(k.NOT_INIT))},L.prototype.setOptions=function(W){W&&typeof W.unify=="boolean"&&(this.options.unify=W.unify,this.settingFetchHandler.setOptions(this.options))},L.prototype.setLog=function(W){this.log=W},L.prototype._=function(W,ve){var de=this;return new Promise(function(ne,he){return le(de,void 0,void 0,function(){var _e,Ue,Fe,ze,Me,We,rt,dt,ht,Pt=this;return $(this,function(ye){switch(ye.label){case 0:if(ye.trys.push([0,6,,7]),this.checkFailed)return this.log.warn(M.SETTING_GET_CLOUD_SETTING+" check fail"),he(k.AUTH_FAIL),[2];Ue=(_e=W instanceof Array)?W:[W],Fe=[],ze={},Me=function(De){return De=De.map(function(xe){return Pt.settingCacheHandler.getCacheSetting(xe)}),Promise.all(De)},ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,Me(Ue)];case 2:return We=ye.sent(),Ue.forEach(function(De,xe){var Je;Fe.push({file_name:De,hash:(Je=We[xe].versions)==null?void 0:Je.hash,g_version:(Je=We[xe].versions)==null?void 0:Je.g_version}),ze[De]=We[xe]}),[3,4];case 3:return ye.sent(),Ue.forEach(function(De){Fe.push({file_name:De})}),[3,4];case 4:return[4,this.settingFetchHandler.fetchSetting(Fe,ve,this.token,this.userID,!1)];case 5:return ht=ye.sent(),rt=ht.data,ht=ht.polling_interval,this.checkFailCount=0,this.log.info(M.SETTING_GET_CLOUD_SETTING+" suc"),typeof ht=="number"&&5<=ht&&this.pollingInterval!==60*ht&&(this.log.warn(M.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*ht,this.uninit(),this.activePolling()),_e?(dt={},W.forEach(function(De){var xe;((xe=rt[De])==null?void 0:xe.code)==0&&(rt[De].hashChange?(Pt.log.info(M.SETTING_GET_CLOUD_SETTING+" file "+De+" changed"),dt[De]={setting:(xe=rt[De])==null?void 0:xe.data,versions:(xe=rt[De])==null?void 0:xe.versions}):ze[De]&&(dt[De]={setting:(xe=ze[De])==null?void 0:xe.setting,versions:(xe=ze[De])==null?void 0:xe.versions}))}),0<Object.keys(dt).length?ne(dt):he(k.MULTI_FILE_NOT_EXIST)):((ht=rt[W])==null?void 0:ht.code)===0&&(ht=rt[W])!=null&&ht.data?ne({setting:(ht=rt[W])==null?void 0:ht.data,versions:(ht=rt[W])==null?void 0:ht.versions}):he({code:(ht=rt[W])==null?void 0:ht.code,msg:(ht=rt[W])==null?void 0:ht.message}),[3,7];case 6:return ht=ye.sent(),this.log.error(M.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(ht)),(ht==null?void 0:ht.code)!==21002&&(ht==null?void 0:ht.status_code)!==401||(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),he(ht),[3,7];case 7:return[2]}})})})},L.prototype.k=function(W,ve){var de=this;Object.keys(W).forEach(function(ne){(he=de.fileList.find(function(_e){return _e.fileName==ne}))?(he.fetchedTime=new Date().getTime(),he.setting=W[ne].setting,he.versions=W[ne].versions,he.needPolling=ve):de.fileList.find(function(_e){return _e.fileName===ne})||de.fileList.push({fileName:ne,fetchedTime:new Date().getTime(),needPolling:ve,setting:W[ne].setting,versions:W[ne].versions});var he=ne;de.settingCacheHandler.storeSetting(he,W[ne])})},L.prototype.O=function(W,ve,de){var ne=this;return new Promise(function(he,_e){ne.log.info(M.SETTING__FETCH_SETTING+" call"),ne._(W,ne.envVariable).then(function(Ue){ve?(ve.fetchedTime=new Date().getTime(),ve.setting=Ue.setting,ve.versions=Ue.versions,ve.needPolling=de):ne.fileList.find(function(Fe){return Fe.fileName===W})||ne.fileList.push({fileName:W,fetchedTime:new Date().getTime(),needPolling:de,setting:Ue.setting,versions:Ue.versions}),ne.settingCacheHandler.storeSetting(W,Ue),he(Ue),ne.log.info(M.SETTING__FETCH_SETTING+" call suc")}).catch(function(Ue){return le(ne,void 0,void 0,function(){var Fe,ze;return $(this,function(Me){switch(Me.label){case 0:ve?ve.fetchedTime=new Date().getTime():this.fileList.find(function(We){return We.fileName===W})||this.fileList.push({fileName:W,fetchedTime:new Date().getTime(),needPolling:de,setting:{},versions:{}}),Fe=W,Me.label=1;case 1:return Me.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(Fe)];case 2:return ze=Me.sent(),he(ze),[3,4];case 3:return Me.sent(),_e(Ue),[3,4];case 4:return this.log.info(M.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}})})})})},L.prototype.h=function(){var W;this.options.env==0?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=G.getBrowser(),this.publicEnvVariable.deviceid=G.generateUUID()):this.options.env==1&&(W=wx.getSystemInfoSync(),this.publicEnvVariable.brand=W.brand,this.publicEnvVariable.model=W.model,this.publicEnvVariable.system=W.system,this.publicEnvVariable.platform=W.platform,this.publicEnvVariable.wechatVersion=W.version,this.publicEnvVariable.wechatSDKVersion=W.SDKVersion,this.publicEnvVariable.deviceid=G.generateUUID(this.options.env))},L.prototype.v=function(W,ve){return ve===void 0&&(ve=!0),le(this,void 0,void 0,function(){var de,ne,he,_e,Ue=this;return $(this,function(Fe){switch(Fe.label){case 0:if(this.log.info(M.SETTING_POLLING_SETTING+" call "+W+" "+ve),de=W,ve){if(ne=[],this.fileList.forEach(function(ze){ze.fileName,ze.needPolling&&ne.push({file_name:ze.fileName,hash:ze.versions.hash,g_version:ze.versions.g_version})}),!this.checkFailed)return[3,1];this.log.warn(M.SETTING_GET_CLOUD_SETTING+" has checked fail")}return[3,7];case 1:if(!(0<ne.length))return[3,6];Fe.label=2;case 2:return Fe.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(ne,this.envVariable,this.token,this.userID)];case 3:return _e=Fe.sent(),he=_e.data,_e=_e.polling_interval,this.log.info(M.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,typeof _e=="number"&&5<=_e&&this.pollingInterval!==60*_e&&(this.log.warn(M.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*_e,de=1e3*this.pollingInterval),this.fileList.forEach(function(ze){return le(Ue,void 0,void 0,function(){var Me,We,rt,dt,ht,Pt,ye,De,xe;return $(this,function(Je){switch(Je.label){case 0:return ze.fetchedTime=new Date().getTime(),Me=ze.fileName,dt=he[ze.fileName],xe=dt.code,ye=dt.data,De=dt.versions,We=dt.message,rt=dt.hashChange,dt&&xe===0&&ye?(dt=JSON.stringify(ye),ht=JSON.stringify(ze.setting),Pt={setting:ye,versions:De,code:xe,message:We},rt&&ht!==dt&&(this.log.info(M.SETTING_POLLING_SETTING+" "+ze.fileName+" setting changed"),ze.setting=Pt.setting,ze.versions=Pt.versions,this.options.pollingNotify(ze.fileName,Pt)),[4,this.settingCacheHandler.getCacheSetting(Me)]):[3,2];case 1:ye=Je.sent(),De=JSON.stringify(ye),xe=JSON.stringify(Pt),rt&&De!==xe&&this.settingCacheHandler.storeSetting(Me,Pt),Je.label=2;case 2:return[2]}})})}),[3,5];case 4:return _e=Fe.sent(),this.log.error(M.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(_e)),(_e==null?void 0:_e.code)!==21002&&(_e==null?void 0:_e.status_code)!==401||(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(M.SETTING_POLLING_SETTING+" polling no file"),Fe.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout(function(){Ue.v(de)},de),[2]}})})},L.prototype.activePolling=function(){this.pollingTimer||this.v(1e3*this.pollingInterval)},L.prototype.g=function(){this.checkFailCount=0,this.checkFailed=!1},z.ZegoSetting=L},function(P,z,oe){function A(){}Object.defineProperty(z,"u",{value:!0}),z.ZegoLog=void 0,A.prototype.log=function(){for(var le=[],$=0;$<arguments.length;$++)le[$]=arguments[$];var k=le.join(" ");console.log(k)},A.prototype.debug=function(){for(var le=[],$=0;$<arguments.length;$++)le[$]=arguments[$];var k=le.join(" ");console.debug(k)},A.prototype.info=function(){for(var le=[],$=0;$<arguments.length;$++)le[$]=arguments[$];var k=le.join(" ");console.info(k)},A.prototype.warn=function(){for(var le=[],$=0;$<arguments.length;$++)le[$]=arguments[$];var k=le.join(" ");console.warn(k)},A.prototype.error=function(){for(var le=[],$=0;$<arguments.length;$++)le[$]=arguments[$];var k=le.join(" ");console.error(k)},z.ZegoLog=A},function(P,z,oe){var A=this&&this.__awaiter||function(J,D,G,M){return new(G=G||Promise)(function(L,W){function ve(he){try{ne(M.next(he))}catch(_e){W(_e)}}function de(he){try{ne(M.throw(he))}catch(_e){W(_e)}}function ne(he){var _e;he.done?L(he.value):((_e=he.value)instanceof G?_e:new G(function(Ue){Ue(_e)})).then(ve,de)}ne((M=M.apply(J,D||[])).next())})},le=this&&this.__generator||function(J,D){var G,M,L,W={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]},ve={next:de(0),throw:de(1),return:de(2)};return typeof Symbol=="function"&&(ve[Symbol.iterator]=function(){return this}),ve;function de(ne){return function(he){var _e=[ne,he];if(G)throw new TypeError("Generator is already executing.");for(;W;)try{if(G=1,M&&(L=2&_e[0]?M.return:_e[0]?M.throw||((L=M.return)&&L.call(M),0):M.next)&&!(L=L.call(M,_e[1])).done)return L;switch(M=0,(_e=L?[2&_e[0],L.value]:_e)[0]){case 0:case 1:L=_e;break;case 4:return W.label++,{value:_e[1],done:!1};case 5:W.label++,M=_e[1],_e=[0];continue;case 7:_e=W.ops.pop(),W.trys.pop();continue;default:if(!(L=0<(L=W.trys).length&&L[L.length-1])&&(_e[0]===6||_e[0]===2)){W=0;continue}if(_e[0]===3&&(!L||_e[1]>L[0]&&_e[1]<L[3]))W.label=_e[1];else if(_e[0]===6&&W.label<L[1])W.label=L[1],L=_e;else{if(!(L&&W.label<L[2])){L[2]&&W.ops.pop(),W.trys.pop();continue}W.label=L[2],W.ops.push(_e)}}_e=D.call(J,W)}catch(Ue){_e=[6,Ue],M=0}finally{G=L=0}if(5&_e[0])throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}}},$=this&&this.__importDefault||function(J){return J&&J.u?J:{default:J}},k=(Object.defineProperty(z,"u",{value:!0}),z.SettingCacheHandler=void 0,$(oe(3))),j=oe(1),K=oe(12);function Z(J,D,G){G===void 0&&(G=0),this.S=J,this.D=D,this.store=K.createZegoStore(J,G)}Z.prototype.getCacheSetting=function(J){return A(this,void 0,void 0,function(){return le(this,function(D){switch(D.label){case 0:return this.D.info(j.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(J)];case 1:return[2,D.sent()||""]}})})},Z.prototype.storeSetting=function(J,D){return A(this,void 0,void 0,function(){return le(this,function(G){switch(G.label){case 0:return this.D.info(j.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(J,D)];case 1:return G.sent(),[2]}})})},Z.prototype.dropOldStore=function(J){k.default.dropInstance({name:J}).then(function(){console.debug("Dropped ",J)}).catch(function(D){console.warn(D)})},z.SettingCacheHandler=Z},function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.createZegoStore=z.ZegoWechatMiniStore=void 0;var A=oe(3),le=oe(2),$=(k.prototype.getItem=function(j){var K=this;return new Promise(function(Z,J){try{Z(wx.getStorageSync(K.keyPrefix+j))}catch(D){J(D)}})},k.prototype.setItem=function(j,K){var Z=this;return new Promise(function(J,D){try{wx.setStorageSync(Z.keyPrefix+j,K),J()}catch(G){D(G)}})},k.prototype.removeItem=function(j){var K=this;return new Promise(function(Z,J){try{Z(wx.removeStorageSync(K.keyPrefix+j))}catch(D){J(D)}})},k.prototype.clear=function(){return new Promise(function(j,K){try{wx.clearStorageSync(),j()}catch(Z){K(Z)}})},k.prototype.keys=function(){var j=this;return new Promise(function(K,Z){try{var J=wx.getStorageInfoSync().keys,D=(console.warn("keys",J),[]);J.forEach(function(G){G.indexOf(j.keyPrefix)==0&&D.push(G.replace(j.keyPrefix,""))}),console.warn("keyArr",D),D.sort(),K(D)}catch(G){Z(G)}})},k);function k(j){this.storeName=j,this.keyPrefix=j+"/",this.storeName}z.ZegoWechatMiniStore=$,z.createZegoStore=function(j,K){return K===le.ZEGO_ENV.BROWSER?A.createInstance({name:j}):new $(j)}},function(P,z,oe){var A,le,$=this&&this.__assign||function(){return($=Object.assign||function(ve){for(var de,ne=1,he=arguments.length;ne<he;ne++)for(var _e in de=arguments[ne])Object.prototype.hasOwnProperty.call(de,_e)&&(ve[_e]=de[_e]);return ve}).apply(this,arguments)},k=this&&this.__importDefault||function(ve){return ve&&ve.u?ve:{default:ve}},j=(Object.defineProperty(z,"u",{value:!0}),z.SettingFetchHandler=void 0,oe(14)),K=oe(15),Z=oe(4),J=oe(17),D=oe(7),G=k(oe(5)),M=oe(1),L=oe(0);function W(ve,de){this.j=ve,this.D=de,this.seq=0,this.userID="",this.unSendCommandList=new K.LinkedList,this.testNetPackageSize=!1,this.protobuf=new J.CloudSettingProtoBuf}A={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},k=le={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},W.prototype.setOptions=function(ve){this.j=ve},W.prototype.setDataReport=function(ve){this.reportFunc=ve},W.prototype.setUserID=function(ve){this.userID=ve},W.prototype.fetchSetting=function(ve,de,ne,he,_e){var Ue=this;return _e===void 0&&(_e=!0),new Promise(function(Fe,ze){function Me(ut){var re,Se=ut.code,we=(ut.msg,ut.data),Ke=ut.polling_interval;ut=ut.reportData,Ue.D.info(M.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+Se),we&&(re=[],Object.keys(we).forEach(function(je){var St;re.push({name:je,code:we[je].code,message:(St=we[je])==null?void 0:St.message,versions:JSON.stringify((St=we[je])==null?void 0:St.versions),content:JSON.stringify((St=we[je])==null?void 0:St.data)})})),Ue.reportFunc&&Ue.reportFunc(Pt,"request_end",{code:Se,reportData:ut,params:ht,requestKV:dt,files:re,polling:_e}),Fe({data:we,polling_interval:Ke})}function We(ut){var re=ut.code,Se=ut.msg,we=(ut.data,ut.status_code);ut=ut.reportData,Ue.D.warn(M.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+re),Ue.reportFunc&&Ue.reportFunc(Pt,"request_end",{code:re,params:ht,requestKV:dt,reportData:ut,polling:_e}),ze({code:re,msg:Se,status_code:we})}var rt={product:Ue.j.product,files:ve.map(function(ut){return ut.file_name}),param:$($({},de),{deviceid:void 0}),appid:Ue.j.appID,token:ne,id_name:he,timestamp:new Date().getTime(),biztype:0,deviceid:de.deviceid||Z.generateUUID(Ue.j.env),compress:!1,mode:Ue.j.online?"online":"test"},dt=rt.param,ht={appid:rt.appid,token:rt.token,id_name:rt.id_name,deviceid:rt.deviceid},Pt=Ue.seq++;if(Ue.reportFunc&&Ue.reportFunc(Pt,"request_start",{polling:_e}),(xe=Ue.j)!=null&&xe.unify&&Ue.j.connection)if(Ue.j.productNum!==void 0){var ye,De=[];for(ye in rt.param)rt.param[ye]!==void 0&&De.push({key:ye,value:rt.param[ye]});var xe={product:Ue.j.productNum,response_compress:D.INIT_CONFIG.compress?0:1,files:ve,param_list:De,p_version:D.INIT_CONFIG.p_version},Je=(Ue.D.info(M.SETTINGFETCHHANDLER_FETCHSETTING+" files "+JSON.stringify(xe.files)),Ue.j.online?1:2);Ue.sendCloudPBRequest(he,xe,ne,Je,Me,We)}else Ue.sendCloudRequest(he,rt,"/cloud-setting/get",function(ut){Me(ut)},function(ut){We(ut)});else Ue.j.urls&&j.fetch(Ue.j.urls,rt,Ue.j.env||0).then(function(ut){var re,Se=ut.code,we=(ut.msg,ut.data),Ke=ut.polling_interval;ut=ut.reportData,Ue.D.info(M.SETTINGFETCHHANDLER_FETCHSETTING+" "+Se),we&&(re=[],Object.keys(we).forEach(function(je){var St;re.push({name:je,code:we[je].code,message:(St=we[je])==null?void 0:St.message,versions:JSON.stringify((St=we[je])==null?void 0:St.versions),content:JSON.stringify((St=we[je])==null?void 0:St.data)})})),Ue.reportFunc&&Ue.reportFunc(Pt,"request_end",{code:Se,reportData:ut,params:ht,requestKV:dt,files:re,polling:_e}),Fe({data:we,polling_interval:Ke})}).catch(function(ut){var re=ut.code,Se=ut.msg;ut.data,ut=ut.reportData,Ue.D.warn(M.SETTINGFETCHHANDLER_FETCHSETTING+" "+re),Ue.reportFunc&&Ue.reportFunc(Pt,"request_end",{code:re,params:ht,requestKV:dt,reportData:ut,polling:_e}),ze({code:re,msg:Se})})})},W.prototype.sendCloudRequest=function(ve,de,ne,he,_e,Ue,Fe){var ze=this,Me=(Ue===void 0&&(Ue=3),Fe===void 0&&(Fe=[]),new Date().getTime());this.sendNetAgentHttpRequest({service:A.SERVICE_ClOUD_SETTING,body:de,ack:!1,idName:ve,method_no:le.METHOD_POST,location:ne},function(We){var rt,dt,ht,Pt,ye;(We==null?void 0:We.status_code)===200?(rt=(Pt=JSON.parse(We.body)).code,dt=Pt.message,ht=Pt.data,Pt=Pt.polling_interval,ye=new Date().getTime()-Me,Fe.push({timestamp:Me,url:ne,error:rt,duration:ye}),rt===0?he({code:rt,msg:dt,data:ht,polling_interval:Pt,reportData:Fe}):_e({code:rt,msg:dt,reportData:Fe})):(ye=new Date().getTime()-Me,Fe.push({timestamp:Me,url:ne,error:We==null?void 0:We.status_code,duration:ye}),0<Ue?(Ue--,ze.sendCloudRequest(ve,de,ne,he,_e,Ue,Fe)):_e($($({},L.FILE_REQUEST_FAIL),{reportData:Fe})))},function(We){var rt=new Date().getTime()-Me;Fe.push({timestamp:Me,url:ne,error:We.code,duration:rt}),0<Ue?(Ue--,ze.sendCloudRequest(ve,de,ne,he,_e,Ue,Fe)):_e($($({},L.FILE_REQUEST_FAIL),{reportData:Fe}))},null,{timeout:4e3})},W.prototype.sendNetAgentHttpRequest=function(ve,de,ne,he,_e){ve={param:ve,suc:de,err:ne,ack:he,option:_e},(de=this.j.connection)!=null&&de.isConnect()?this.sendNetUintData(ve):this.unSendCommandList.push(ve)},W.prototype.sendNetUintData=function(ve){var de,ne=ve.param,he=ve.suc,_e=ve.err,Ue=ve.ack;ve=ve.option,(de=this.j.connection)!=null&&de.startHttpRequest(ne,he,_e,Ue,ve)},W.prototype.checkUnSendMsgs=function(ve){for(var de=ve.getFirst();de!=null;)ve.remove(de),de.T&&de.T.param&&this.sendNetUintData(de.T),de=ve.getFirst()},W.prototype.sendCloudPBRequest=function(ve,de,ne,he,_e,Ue,Fe,ze){var Me,We=this,rt=(Fe===void 0&&(Fe=3),ze===void 0&&(ze=[]),new Date().getTime()),dt=this.protobuf.encodeCloudSettingReq(de);(Me=this.j.connection)!=null&&Me.startHttpRequest2({interfaceID:14,body:dt,ack:!1,idName:ve,method:le.METHOD_POST,token:ne,mode:he,reduceRspHeaders:!0},function(ht,Pt){if((ht==null?void 0:ht.status_code)===200){var ye=We.protobuf.decodeCloudSettingRsp(ht.body),De=ye.message,xe=(ye.data,ye.polling_interval),Je=ye.code||0,ut=(G.default.isLong(Je)&&(Je=Je.toNumber()),new Date().getTime()-rt);if(ze.push({timestamp:rt,error:Je,duration:ut}),Je===0){for(var re={},Se=0;Se<ye.file_response.length;Se++){var we=(Ht=ye.file_response[Se]).message,Ke=Ht.file_name,je=Ht.hash,St=Ht.g_version,xt=Ht.json_data,Ht=(We.D.info(M.SETTINGFETCHHANDLER_FETCHSETTING+" file rsp "+Ke+" "+St+" "+je.toString()),Ht.code||0),$t=(G.default.isLong(Ht)&&(Ht=Ht.toNumber()),{});if(0<(je==null?void 0:je.byteLength)&&0<(xt==null?void 0:xt.byteLength))try{var ci=de.response_compress===0?Z.decodeCompressData(xt):Z.decodeString(xt);$t=JSON.parse(ci)}catch(He){We.D.info(M.SETTINGFETCHHANDLER_FETCHSETTING+" decode fail "+(He==null?void 0:He.message)?He.message:JSON.stringify(He))}re[Ke]={code:Ht,message:we,versions:{hash:je,g_version:St},data:$t,hashChange:je.byteLength===0?0:1}}_e({code:Je,msg:De,data:re,polling_interval:xe,reportData:ze})}else Ue({code:Je,msg:De,reportData:ze})}else ut=new Date().getTime()-rt,ze.push({timestamp:rt,error:ht==null?void 0:ht.status_code,duration:ut}),0<Fe?(Fe--,We.sendCloudPBRequest(ve,de,ne,he,_e,Ue,Fe,ze)):Ue($($({},L.FILE_REQUEST_FAIL),{reportData:ze,status_code:ht==null?void 0:ht.status_code}))},function(ht){var Pt=new Date().getTime()-rt;ze.push({timestamp:rt,error:ht.code,duration:Pt}),0<Fe?(Fe--,We.sendCloudPBRequest(ve,de,ne,he,_e,Ue,Fe,ze)):Ue($($({},L.FILE_REQUEST_FAIL),{reportData:ze,status_code:ht==null?void 0:ht.status_code}))},null,{timeout:4e3,extras:{protoCmd:"GetCloudSettingConfigRequest"}})},z.SettingFetchHandler=oe=W},function(P,z,oe){var A=this&&this.__assign||function(){return(A=Object.assign||function($){for(var k,j=1,K=arguments.length;j<K;j++)for(var Z in k=arguments[j])Object.prototype.hasOwnProperty.call(k,Z)&&($[Z]=k[Z]);return $}).apply(this,arguments)},le=(Object.defineProperty(z,"u",{value:!0}),z.fetch=void 0,oe(0));z.fetch=function $(k,j,K,Z,J,D){return Z===void 0&&(Z=5),J===void 0&&(J=0),D===void 0&&(D=[]),new Promise(function(G,M){J=J||new Date().getTime();var L,W,ve,de=new Date().getTime();K===0?(L=new XMLHttpRequest,W=k[(Z+1)%2]||k[0],L.open("post",W),j.compress==1&&(L.responseType="arraybuffer"),L.ontimeout=function(){console.warn("The request for "+W+" timed out.")},L.onreadystatechange=function(){var ne,he,_e,Ue,Fe;L.readyState==4&&(200<=L.status&&L.status<300||L.status==304?(_e=void 0,j.compress!=1&&(_e=L.responseText),Fe=new Date().getTime()-de,ne=(_e=JSON.parse(_e)).code,he=_e.message,Ue=_e.data,_e=_e.polling_interval,D.push({timestamp:de,url:W,error:ne,duration:Fe}),ne===0?G({code:ne,msg:he,data:Ue,polling_interval:_e,reportData:D}):M({code:ne,msg:he,reportData:D})):(Ue=new Date().getTime()-de,D.push({timestamp:de,url:W,error:L.status,duration:Ue}),Fe=new Date().getTime()-J,0<Z&&Fe<8e3?$(k,j,K,--Z,J,D).then(function(ze){G(ze)}).catch(function(ze){M(ze)}):M(A(A({},le.FILE_REQUEST_FAIL),{reportData:D}))))},L.timeout=8e3,L.send(JSON.stringify(j))):(ve=k[(Z+1)%2]||k[0],wx.request({url:ve,data:j,method:"POST",success:function(ne){console.log(ne.data);var he=(Fe=ne.data).code,_e=Fe.message,Ue=Fe.data,Fe=Fe.polling_interval;he!==void 0?he===0?(console.log("post suc"),G({code:he,msg:_e,data:Ue,polling_interval:Fe,reportData:D})):(console.error("post fail ",he,_e),M({code:he,msg:_e,reportData:D})):(Ue=new Date().getTime()-de,D.push({timestamp:de,url:ve,error:le.FILE_REQUEST_FAIL.code,msg:ne.data,duration:Ue}),0<Z?$(k,j,K,--Z,J,D).then(function(ze){G(ze)}).catch(function(ze){M(ze)}):M(A(A({},le.FILE_REQUEST_FAIL),{reportData:D})))},fail:function(ne){console.log("send failed "+JSON.stringify(ne)+ne.statusCode);var he=new Date().getTime()-de;D.push({timestamp:de,url:ve,error:le.FILE_REQUEST_FAIL.code,msg:ne.errMsg,duration:he}),0<Z?$(k,j,K,--Z,J,D).then(function(_e){G(_e)}).catch(function(_e){M(_e)}):M(A(A({},le.FILE_REQUEST_FAIL),{reportData:D}))}}))})}},function(P,z,oe){Object.defineProperty(z,"u",{value:!0}),z.LinkedList=z.ListNode=void 0,Object.defineProperty(le.prototype,"id",{get:function(){return this.N||null},set:function(k){this.N=k},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"data",{get:function(){return this.T},set:function(k){this.T=k},enumerable:!1,configurable:!0}),le.prototype.hasNext=function(){return this.next&&this.next.id},le.prototype.hasPrev=function(){return this.prev&&this.prev.id};var A=le;function le(k,j){k===void 0&&(k=null),j===void 0&&(j=null),this.next=null,this.prev=null,this.N=k,this.T=j}function $(){this.start=new A,this.end=new A,this.R=0,this.A=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}z.ListNode=A,$.prototype.insertBefore=function(k,j){return(j=new A(this.R,j)).next=k,j.prev=k.prev,k.prev&&(k.prev.next=j),k.prev=j,++this.R,++this.A,j},$.prototype.addLast=function(k){return this.insertBefore(this.end,k)},$.prototype.add=function(k){return this.addLast(k)},$.prototype.getFirst=function(){return this.A===0?null:this.start.next},$.prototype.getLast=function(){return this.A===0?null:this.end.prev},$.prototype.size=function(){return this.A},$.prototype.getFromFirst=function(k){var j=0,K=this.start.next;if(0<=k)for(;j<k&&K!==null;)K=K.next,++j;else K=null;if(K===null)throw"Index out of bounds.";return K},$.prototype.get=function(k){return k===0?this.getFirst():k===this.A-1?this.getLast():this.getFromFirst(k)},$.prototype.remove=function(k){return k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),--this.A,k},$.prototype.removeFirst=function(){return 0<this.A&&this.start.next?this.remove(this.start.next):null},$.prototype.removeLast=function(){return 0<this.A&&this.end.prev?this.remove(this.end.prev):null},$.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this.A=0,this.R=0},$.prototype.each=function(k){for(var j=this.start;j.hasNext();)k(j=j.next)},$.prototype.find=function(k){for(var j=this.start,K=!1,Z=null;j.hasNext()&&!K;)k(j=j.next)&&(Z=j,K=!0);return Z},$.prototype.map=function(k){for(var j=this.start,K=[];j.hasNext();)k(j=j.next)&&K.push(j);return K},$.prototype.push=function(k){return this.addLast(k)},$.prototype.unshift=function(k){0<this.A?this.insertBefore(this.start.next,k):this.insertBefore(this.end,k)},$.prototype.pop=function(){return this.removeLast()},$.prototype.shift=function(){return this.removeFirst()},z.LinkedList=$},function(P,z,oe){(function(A){function le(bt,zt,R,at){var ke=j,ft=at+R;bt^=-1;for(var Ge=at;Ge<ft;Ge++)bt=bt>>>8^ke[255&(bt^zt[Ge])];return-1^bt}function $(bt){return(bt>>>24&255)+(bt>>>8&65280)+((65280&bt)<<8)+((255&bt)<<24)}var k=function(bt,zt,R,at){for(var ke=65535&bt|0,ft=bt>>>16&65535|0,Ge=0;R!==0;){for(R-=Ge=2e3<R?2e3:R;ft=ft+(ke=ke+zt[at++]|0)|0,--Ge;);ke%=65521,ft%=65521}return ke|ft<<16|0},j=new Uint32Array(function(){for(var bt=[],zt=0;zt<256;zt++){for(var R=zt,at=0;at<8;at++)R=1&R?3988292384^R>>>1:R>>>1;bt[zt]=R}return bt}()),K=16209,Z=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),J=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),D=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),G=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),M=function(bt,zt,R,at,ke,ft,Ge,Tt){var Qt,wt,Ut,di,Ri,oi,Ii,yi,hi,fe=Tt.bits,Ce=0,et=0,lt=0,pt=0,H=0,y=0,x=0,I=0,B=0,me=0,Oe=null,Qe=new Uint16Array(16),qe=new Uint16Array(16),yt=null;for(Ce=0;Ce<=15;Ce++)Qe[Ce]=0;for(et=0;et<at;et++)Qe[zt[R+et]]++;for(H=fe,pt=15;1<=pt&&Qe[pt]===0;pt--);if(pt<H&&(H=pt),pt===0)ke[ft++]=20971520,ke[ft++]=20971520,Tt.bits=1;else{for(lt=1;lt<pt&&Qe[lt]===0;lt++);for(H<lt&&(H=lt),Ce=I=1;Ce<=15;Ce++)if((I=(I<<1)-Qe[Ce])<0)return-1;if(0<I&&(bt===0||pt!==1))return-1;for(qe[1]=0,Ce=1;Ce<15;Ce++)qe[Ce+1]=qe[Ce]+Qe[Ce];for(et=0;et<at;et++)zt[R+et]!==0&&(Ge[qe[zt[R+et]]++]=et);if(oi=bt===0?(Oe=yt=Ge,20):bt===1?(Oe=Z,yt=J,257):(Oe=D,yt=G,0),Ce=lt,Ri=ft,x=et=me=0,Ut=-1,di=(B=1<<(y=H))-1,bt===1&&852<B||bt===2&&592<B)return 1;for(;;){for(hi=Ge[et]+1<oi?(yi=0,Ge[et]):Ge[et]>=oi?(yi=yt[Ge[et]-oi],Oe[Ge[et]-oi]):(yi=96,0),Qt=1<<(Ii=Ce-x),lt=wt=1<<y;ke[Ri+(me>>x)+(wt-=Qt)]=Ii<<24|yi<<16|hi|0,wt!==0;);for(Qt=1<<Ce-1;me&Qt;)Qt>>=1;if(me=Qt!==0?(me&Qt-1)+Qt:0,et++,--Qe[Ce]==0){if(Ce===pt)break;Ce=zt[R+Ge[et]]}if(H<Ce&&(me&di)!==Ut){for(Ri+=lt,I=1<<(y=Ce-(x=x===0?H:x));y+x<pt&&!((I-=Qe[y+x])<=0);)y++,I<<=1;if(B+=1<<y,bt===1&&852<B||bt===2&&592<B)return 1;ke[Ut=me&di]=H<<24|y<<16|Ri-ft|0}}me!==0&&(ke[Ri+me]=Ce-x<<24|64<<16|0),Tt.bits=H}return 0},L={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},W=L.Z_FINISH,ve=L.Z_BLOCK,de=L.Z_TREES,ne=L.Z_OK,he=L.Z_STREAM_END,_e=L.Z_NEED_DICT,Ue=L.Z_STREAM_ERROR,Fe=L.Z_DATA_ERROR,ze=L.Z_MEM_ERROR,Me=L.Z_BUF_ERROR,We=L.Z_DEFLATED,rt=16180,dt=16190,ht=16191,Pt=16209;function ye(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function De(bt,zt){var R,at,ke,ft,Ge,Tt,Qt,wt,Ut,di,Ri,oi,Ii,yi,hi,fe,Ce,et,lt,pt,H,y,x,I,B=0,me=new Uint8Array(4),Oe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(re(bt)||!bt.output||!bt.input&&bt.avail_in!==0)return Ue;(R=bt.state).mode===ht&&(R.mode=16192),Ge=bt.next_out,ke=bt.output,Qt=bt.avail_out,ft=bt.next_in,at=bt.input,Tt=bt.avail_in,wt=R.hold,Ut=R.bits,di=Tt,Ri=Qt,y=ne;e:for(;;)switch(R.mode){case rt:if(R.wrap===0)R.mode=16192;else{for(;Ut<16;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}2&R.wrap&&wt===35615?(R.wbits===0&&(R.wbits=15),me[R.check=0]=255&wt,me[1]=wt>>>8&255,R.check=le(R.check,me,2,0),Ut=wt=0,R.mode=16181):(R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&wt)<<8)+(wt>>8))%31?(bt.msg="incorrect header check",R.mode=Pt):(15&wt)!==We?(bt.msg="unknown compression method",R.mode=Pt):(Ut-=4,H=8+(15&(wt>>>=4)),R.wbits===0&&(R.wbits=H),15<H||H>R.wbits?(bt.msg="invalid window size",R.mode=Pt):(R.dmax=1<<R.wbits,R.flags=0,bt.adler=R.check=1,R.mode=512&wt?16189:ht,Ut=wt=0)))}break;case 16181:for(;Ut<16;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(R.flags=wt,(255&R.flags)!==We){bt.msg="unknown compression method",R.mode=Pt;break}if(57344&R.flags){bt.msg="unknown header flags set",R.mode=Pt;break}R.head&&(R.head.text=wt>>8&1),512&R.flags&&4&R.wrap&&(me[0]=255&wt,me[1]=wt>>>8&255,R.check=le(R.check,me,2,0)),Ut=wt=0,R.mode=16182;case 16182:for(;Ut<32;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.head&&(R.head.time=wt),512&R.flags&&4&R.wrap&&(me[0]=255&wt,me[1]=wt>>>8&255,me[2]=wt>>>16&255,me[3]=wt>>>24&255,R.check=le(R.check,me,4,0)),Ut=wt=0,R.mode=16183;case 16183:for(;Ut<16;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.head&&(R.head.xflags=255&wt,R.head.os=wt>>8),512&R.flags&&4&R.wrap&&(me[0]=255&wt,me[1]=wt>>>8&255,R.check=le(R.check,me,2,0)),Ut=wt=0,R.mode=16184;case 16184:if(1024&R.flags){for(;Ut<16;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.length=wt,R.head&&(R.head.extra_len=wt),512&R.flags&&4&R.wrap&&(me[0]=255&wt,me[1]=wt>>>8&255,R.check=le(R.check,me,2,0)),Ut=wt=0}else R.head&&(R.head.extra=null);R.mode=16185;case 16185:if(1024&R.flags&&((oi=(oi=R.length)>Tt?Tt:oi)&&(R.head&&(H=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Uint8Array(R.head.extra_len)),R.head.extra.set(at.subarray(ft,ft+oi),H)),512&R.flags&&4&R.wrap&&(R.check=le(R.check,at,oi,ft)),Tt-=oi,ft+=oi,R.length-=oi),R.length))break e;R.length=0,R.mode=16186;case 16186:if(2048&R.flags){if(Tt===0)break e;for(oi=0;H=at[ft+oi++],R.head&&H&&R.length<65536&&(R.head.name+=String.fromCharCode(H)),H&&oi<Tt;);if(512&R.flags&&4&R.wrap&&(R.check=le(R.check,at,oi,ft)),Tt-=oi,ft+=oi,H)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=16187;case 16187:if(4096&R.flags){if(Tt===0)break e;for(oi=0;H=at[ft+oi++],R.head&&H&&R.length<65536&&(R.head.comment+=String.fromCharCode(H)),H&&oi<Tt;);if(512&R.flags&&4&R.wrap&&(R.check=le(R.check,at,oi,ft)),Tt-=oi,ft+=oi,H)break e}else R.head&&(R.head.comment=null);R.mode=16188;case 16188:if(512&R.flags){for(;Ut<16;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(4&R.wrap&&wt!==(65535&R.check)){bt.msg="header crc mismatch",R.mode=Pt;break}Ut=wt=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),bt.adler=R.check=0,R.mode=ht;break;case 16189:for(;Ut<32;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}bt.adler=R.check=$(wt),Ut=wt=0,R.mode=dt;case dt:if(R.havedict===0)return bt.next_out=Ge,bt.avail_out=Qt,bt.next_in=ft,bt.avail_in=Tt,R.hold=wt,R.bits=Ut,_e;bt.adler=R.check=1,R.mode=ht;case ht:if(zt===ve||zt===de)break e;case 16192:if(R.last)wt>>>=7&Ut,Ut-=7&Ut,R.mode=16206;else{for(;Ut<3;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}switch(R.last=1&wt,--Ut,3&(wt>>>=1)){case 0:R.mode=16193;break;case 1:qe=void 0;var Qe=R;if(we){Je=new Int32Array(512),ut=new Int32Array(32);for(var qe=0;qe<144;)Qe.lens[qe++]=8;for(;qe<256;)Qe.lens[qe++]=9;for(;qe<280;)Qe.lens[qe++]=7;for(;qe<288;)Qe.lens[qe++]=8;for(M(1,Qe.lens,0,288,Je,0,Qe.work,{bits:9}),qe=0;qe<32;)Qe.lens[qe++]=5;M(2,Qe.lens,0,32,ut,0,Qe.work,{bits:5}),we=!1}if(Qe.lencode=Je,Qe.lenbits=9,Qe.distcode=ut,Qe.distbits=5,R.mode=16199,zt!==de)break;wt>>>=2,Ut-=2;break e;case 2:R.mode=16196;break;case 3:bt.msg="invalid block type",R.mode=Pt}wt>>>=2,Ut-=2}break;case 16193:for(wt>>>=7&Ut,Ut-=7&Ut;Ut<32;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if((65535&wt)!=(wt>>>16^65535)){bt.msg="invalid stored block lengths",R.mode=Pt;break}if(R.length=65535&wt,Ut=wt=0,R.mode=16194,zt===de)break e;case 16194:R.mode=16195;case 16195:if(oi=R.length){if((oi=Qt<(oi=Tt<oi?Tt:oi)?Qt:oi)===0)break e;ke.set(at.subarray(ft,ft+oi),Ge),Tt-=oi,ft+=oi,Qt-=oi,Ge+=oi,R.length-=oi}else R.mode=ht;break;case 16196:for(;Ut<14;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(R.nlen=257+(31&wt),wt>>>=5,Ut-=5,R.ndist=1+(31&wt),wt>>>=5,Ut-=5,R.ncode=4+(15&wt),wt>>>=4,Ut-=4,286<R.nlen||30<R.ndist){bt.msg="too many length or distance symbols",R.mode=Pt;break}R.have=0,R.mode=16197;case 16197:for(;R.have<R.ncode;){for(;Ut<3;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.lens[Oe[R.have++]]=7&wt,wt>>>=3,Ut-=3}for(;R.have<19;)R.lens[Oe[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,x={bits:R.lenbits},y=M(0,R.lens,0,19,R.lencode,0,R.work,x),R.lenbits=x.bits,y){bt.msg="invalid code lengths set",R.mode=Pt;break}R.have=0,R.mode=16198;case 16198:for(;R.have<R.nlen+R.ndist;){for(;fe=(B=R.lencode[wt&(1<<R.lenbits)-1])>>>16&255,Ce=65535&B,!((hi=B>>>24)<=Ut);){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(Ce<16)wt>>>=hi,Ut-=hi,R.lens[R.have++]=Ce;else{if(Ce===16){for(I=hi+2;Ut<I;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(wt>>>=hi,Ut-=hi,R.have===0){bt.msg="invalid bit length repeat",R.mode=Pt;break}H=R.lens[R.have-1],oi=3+(3&wt),wt>>>=2,Ut-=2}else if(Ce===17){for(I=hi+3;Ut<I;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}H=0,oi=3+(7&(wt>>>=hi)),wt>>>=3,Ut=Ut-hi-3}else{for(I=hi+7;Ut<I;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}H=0,oi=11+(127&(wt>>>=hi)),wt>>>=7,Ut=Ut-hi-7}if(R.have+oi>R.nlen+R.ndist){bt.msg="invalid bit length repeat",R.mode=Pt;break}for(;oi--;)R.lens[R.have++]=H}}if(R.mode===Pt)break;if(R.lens[256]===0){bt.msg="invalid code -- missing end-of-block",R.mode=Pt;break}if(R.lenbits=9,x={bits:R.lenbits},y=M(1,R.lens,0,R.nlen,R.lencode,0,R.work,x),R.lenbits=x.bits,y){bt.msg="invalid literal/lengths set",R.mode=Pt;break}if(R.distbits=6,R.distcode=R.distdyn,x={bits:R.distbits},y=M(2,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,x),R.distbits=x.bits,y){bt.msg="invalid distances set",R.mode=Pt;break}if(R.mode=16199,zt===de)break e;case 16199:R.mode=16200;case 16200:if(6<=Tt&&258<=Qt){bt.next_out=Ge,bt.avail_out=Qt,bt.next_in=ft,bt.avail_in=Tt,R.hold=wt,R.bits=Ut,$e=jt=Ie=Wt=ii=_t=Re=yt=Ti=Bi=Bt=mt=void 0;var yt,Re,_t,ii,Wt,Ie,Ve=bt,Ne=Ri,$e=Ve.state,mt=Ve.next_in,ct=Ve.input,qt=mt+(Ve.avail_in-5),Bt=Ve.next_out,jt=Ve.output,Xt=Bt-(Ne-Ve.avail_out),si=Bt+(Ve.avail_out-257),Ei=$e.dmax,Ui=$e.wsize,ji=$e.whave,ki=$e.wnext,Zi=$e.window,Bi=$e.hold,Ti=$e.bits,Mi=$e.lencode,Gr=$e.distcode,en=(1<<$e.lenbits)-1,Sr=(1<<$e.distbits)-1;t:do for(Ti<15&&(Bi+=ct[mt++]<<Ti,Ti+=8,Bi+=ct[mt++]<<Ti,Ti+=8),yt=Mi[Bi&en];;){if(Bi>>>=Re=yt>>>24,Ti-=Re,(Re=yt>>>16&255)==0)jt[Bt++]=65535&yt;else{if(!(16&Re)){if(!(64&Re)){yt=Mi[(65535&yt)+(Bi&(1<<Re)-1)];continue}if(32&Re){$e.mode=16191;break t}Ve.msg="invalid literal/length code",$e.mode=K;break t}for(_t=65535&yt,(Re&=15)&&(Ti<Re&&(Bi+=ct[mt++]<<Ti,Ti+=8),_t+=Bi&(1<<Re)-1,Bi>>>=Re,Ti-=Re),Ti<15&&(Bi+=ct[mt++]<<Ti,Ti+=8,Bi+=ct[mt++]<<Ti,Ti+=8),yt=Gr[Bi&Sr];;){if(Bi>>>=Re=yt>>>24,Ti-=Re,!(16&(Re=yt>>>16&255))){if(!(64&Re)){yt=Gr[(65535&yt)+(Bi&(1<<Re)-1)];continue}Ve.msg="invalid distance code",$e.mode=K;break t}if(ii=65535&yt,Ti<(Re&=15)&&(Bi+=ct[mt++]<<Ti,(Ti+=8)<Re)&&(Bi+=ct[mt++]<<Ti,Ti+=8),(ii+=Bi&(1<<Re)-1)>Ei){Ve.msg="invalid distance too far back",$e.mode=K;break t}if(Bi>>>=Re,Ti-=Re,ii>(Re=Bt-Xt)){if((Re=ii-Re)>ji&&$e.sane){Ve.msg="invalid distance too far back",$e.mode=K;break t}if(Ie=Zi,(Wt=0)===ki){if(Wt+=Ui-Re,Re<_t){for(_t-=Re;jt[Bt++]=Zi[Wt++],--Re;);Wt=Bt-ii,Ie=jt}}else if(ki<Re){if(Wt+=Ui+ki-Re,(Re-=ki)<_t){for(_t-=Re;jt[Bt++]=Zi[Wt++],--Re;);if(Wt=0,ki<_t){for(_t-=Re=ki;jt[Bt++]=Zi[Wt++],--Re;);Wt=Bt-ii,Ie=jt}}}else if(Wt+=ki-Re,Re<_t){for(_t-=Re;jt[Bt++]=Zi[Wt++],--Re;);Wt=Bt-ii,Ie=jt}for(;2<_t;)jt[Bt++]=Ie[Wt++],jt[Bt++]=Ie[Wt++],jt[Bt++]=Ie[Wt++],_t-=3;_t&&(jt[Bt++]=Ie[Wt++],1<_t)&&(jt[Bt++]=Ie[Wt++])}else{for(Wt=Bt-ii;jt[Bt++]=jt[Wt++],jt[Bt++]=jt[Wt++],jt[Bt++]=jt[Wt++],2<(_t-=3););_t&&(jt[Bt++]=jt[Wt++],1<_t)&&(jt[Bt++]=jt[Wt++])}break}}break}while(mt<qt&&Bt<si);mt-=_t=Ti>>3,Bi&=(1<<(Ti-=_t<<3))-1,Ve.next_in=mt,Ve.next_out=Bt,Ve.avail_in=mt<qt?qt-mt+5:5-(mt-qt),Ve.avail_out=Bt<si?si-Bt+257:257-(Bt-si),$e.hold=Bi,$e.bits=Ti,Ge=bt.next_out,ke=bt.output,Qt=bt.avail_out,ft=bt.next_in,at=bt.input,Tt=bt.avail_in,wt=R.hold,Ut=R.bits,R.mode===ht&&(R.back=-1);break}for(R.back=0;fe=(B=R.lencode[wt&(1<<R.lenbits)-1])>>>16&255,Ce=65535&B,!((hi=B>>>24)<=Ut);){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(fe&&!(240&fe)){for(et=hi,lt=fe,pt=Ce;fe=(B=R.lencode[pt+((wt&(1<<et+lt)-1)>>et)])>>>16&255,Ce=65535&B,!(et+(hi=B>>>24)<=Ut);){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}wt>>>=et,Ut-=et,R.back+=et}if(wt>>>=hi,Ut-=hi,R.back+=hi,R.length=Ce,fe===0){R.mode=16205;break}if(32&fe){R.back=-1,R.mode=ht;break}if(64&fe){bt.msg="invalid literal/length code",R.mode=Pt;break}R.extra=15&fe,R.mode=16201;case 16201:if(R.extra){for(I=R.extra;Ut<I;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.length+=wt&(1<<R.extra)-1,wt>>>=R.extra,Ut-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=16202;case 16202:for(;fe=(B=R.distcode[wt&(1<<R.distbits)-1])>>>16&255,Ce=65535&B,!((hi=B>>>24)<=Ut);){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(!(240&fe)){for(et=hi,lt=fe,pt=Ce;fe=(B=R.distcode[pt+((wt&(1<<et+lt)-1)>>et)])>>>16&255,Ce=65535&B,!(et+(hi=B>>>24)<=Ut);){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}wt>>>=et,Ut-=et,R.back+=et}if(wt>>>=hi,Ut-=hi,R.back+=hi,64&fe){bt.msg="invalid distance code",R.mode=Pt;break}R.offset=Ce,R.extra=15&fe,R.mode=16203;case 16203:if(R.extra){for(I=R.extra;Ut<I;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}R.offset+=wt&(1<<R.extra)-1,wt>>>=R.extra,Ut-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){bt.msg="invalid distance too far back",R.mode=Pt;break}R.mode=16204;case 16204:if(Qt===0)break e;if(R.offset>(oi=Ri-Qt)){if((oi=R.offset-oi)>R.whave&&R.sane){bt.msg="invalid distance too far back",R.mode=Pt;break}Ii=oi>R.wnext?(oi-=R.wnext,R.wsize-oi):R.wnext-oi,oi>R.length&&(oi=R.length),yi=R.window}else yi=ke,Ii=Ge-R.offset,oi=R.length;for(Qt-=oi=Qt<oi?Qt:oi,R.length-=oi;ke[Ge++]=yi[Ii++],--oi;);R.length===0&&(R.mode=16200);break;case 16205:if(Qt===0)break e;ke[Ge++]=R.length,Qt--,R.mode=16200;break;case 16206:if(R.wrap){for(;Ut<32;){if(Tt===0)break e;Tt--,wt|=at[ft++]<<Ut,Ut+=8}if(Ri-=Qt,bt.total_out+=Ri,R.total+=Ri,4&R.wrap&&Ri&&(bt.adler=R.check=(R.flags?le:k)(R.check,ke,Ri,Ge-Ri)),Ri=Qt,4&R.wrap&&(R.flags?wt:$(wt))!==R.check){bt.msg="incorrect data check",R.mode=Pt;break}Ut=wt=0}R.mode=16207;case 16207:if(R.wrap&&R.flags){for(;Ut<32;){if(Tt===0)break e;Tt--,wt+=at[ft++]<<Ut,Ut+=8}if(4&R.wrap&&wt!==(4294967295&R.total)){bt.msg="incorrect length check",R.mode=Pt;break}Ut=wt=0}R.mode=16208;case 16208:y=he;break e;case Pt:y=Fe;break e;case 16210:return ze;default:return Ue}return bt.next_out=Ge,bt.avail_out=Qt,bt.next_in=ft,bt.avail_in=Tt,R.hold=wt,R.bits=Ut,(R.wsize||Ri!==bt.avail_out&&R.mode<Pt&&(R.mode<16206||zt!==W))&&Ke(bt,bt.output,bt.next_out,Ri-bt.avail_out),di-=bt.avail_in,Ri-=bt.avail_out,bt.total_in+=di,bt.total_out+=Ri,R.total+=Ri,4&R.wrap&&Ri&&(bt.adler=R.check=(R.flags?le:k)(R.check,ke,Ri,bt.next_out-Ri)),bt.data_type=R.bits+(R.last?64:0)+(R.mode===ht?128:0)+(R.mode===16199||R.mode===16194?256:0),(di==0&&Ri===0||zt===W)&&y===ne?Me:y}function xe(bt,zt){var R,at=zt.length;return re(bt)||(R=bt.state).wrap!==0&&R.mode!==dt?Ue:R.mode===dt&&k(1,zt,at,0)!==R.check?Fe:Ke(bt,zt,at,at)?(R.mode=16210,ze):(R.havedict=1,ne)}var Je,ut,re=function(bt){var zt;return!bt||!(zt=bt.state)||zt.strm!==bt||zt.mode<rt||16211<zt.mode?1:0},Se=function(bt){var zt;return re(bt)||((zt=bt.state).wsize=0,zt.whave=0,zt.wnext=0,re(zt=bt))?Ue:(bt=zt.state,zt.total_in=zt.total_out=bt.total=0,zt.msg="",bt.wrap&&(zt.adler=1&bt.wrap),bt.mode=rt,bt.last=0,bt.havedict=0,bt.flags=-1,bt.dmax=32768,bt.head=null,bt.hold=0,bt.bits=0,bt.lencode=bt.lendyn=new Int32Array(852),bt.distcode=bt.distdyn=new Int32Array(592),bt.sane=1,bt.back=-1,ne)},we=!0,Ke=function(bt,zt,R,at){var ke;return(bt=bt.state).window===null&&(bt.wsize=1<<bt.wbits,bt.wnext=0,bt.whave=0,bt.window=new Uint8Array(bt.wsize)),at>=bt.wsize?(bt.window.set(zt.subarray(R-bt.wsize,R),0),bt.wnext=0,bt.whave=bt.wsize):((ke=bt.wsize-bt.wnext)>at&&(ke=at),bt.window.set(zt.subarray(R-at,R-at+ke),bt.wnext),(at-=ke)?(bt.window.set(zt.subarray(R-at,R),0),bt.wnext=at,bt.whave=bt.wsize):(bt.wnext+=ke,bt.wnext===bt.wsize&&(bt.wnext=0),bt.whave<bt.wsize&&(bt.whave+=ke))),0},je=Se,St=function(bt,zt){var R,at,ke;return bt?(R=new ye,(bt.state=R).strm=bt,R.window=null,R.mode=rt,R=zt,(ke=re(zt=bt)||(ke=zt.state,R<0?(at=0,R=-R):(at=5+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R))?Ue:(ke.window!==null&&ke.wbits!==R&&(ke.window=null),ke.wrap=at,ke.wbits=R,Se(zt)))!==ne&&(bt.state=null),ke):Ue};function xt(bt){return(xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(zt){return typeof zt}:function(zt){return zt&&typeof Symbol=="function"&&zt.constructor===Symbol&&zt!==Symbol.prototype?"symbol":typeof zt})(bt)}var Ht=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ht=!1}for(var $t=new Uint8Array(256),ci=0;ci<256;ci++)$t[ci]=252<=ci?6:248<=ci?5:240<=ci?4:224<=ci?3:192<=ci?2:1;function He(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ee(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}$t[254]=$t[254]=1;var it={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},nt=Object.prototype.toString,tt=L.Z_NO_FLUSH,Et=L.Z_FINISH,Nt=L.Z_OK,Vt=L.Z_STREAM_END,It=L.Z_NEED_DICT,ri=L.Z_STREAM_ERROR,gi=L.Z_DATA_ERROR,Si=L.Z_MEM_ERROR;function Hi(bt){this.options=function(ke){for(var ft,Ge,Tt=Array.prototype.slice.call(arguments,1);Tt.length;){var Qt=Tt.shift();if(Qt){if(xt(Qt)!=="object")throw new TypeError(Qt+"must be non-object");for(var wt in Qt)ft=Qt,Ge=wt,Object.prototype.hasOwnProperty.call(ft,Ge)&&(ke[wt]=Qt[wt])}}return ke}({chunkSize:65536,windowBits:15,to:""},bt||{});var zt,R,at=this.options;if((bt=(at.raw&&0<=at.windowBits&&at.windowBits<16&&(at.windowBits=-at.windowBits,at.windowBits===0)&&(at.windowBits=-15),!(0<=at.windowBits&&at.windowBits<16)||bt&&bt.windowBits||(at.windowBits+=32),15<at.windowBits&&at.windowBits<48&&!(15&at.windowBits)&&(at.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new He,this.strm.avail_out=0,St(this.strm,at.windowBits)))!==Nt)throw new Error(it[bt]);if(this.header=new Ee,zt=this.strm,R=this.header,re(zt)||!(2&(zt=zt.state).wrap)||((zt.head=R).done=!1),at.dictionary&&(typeof at.dictionary=="string"?at.dictionary=function(ke){if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(ke);for(var ft,Ge,Tt,Qt,wt=ke.length,Ut=0,di=0;di<wt;di++)(64512&(Ge=ke.charCodeAt(di)))==55296&&di+1<wt&&(64512&(Tt=ke.charCodeAt(di+1)))==56320&&(Ge=65536+(Ge-55296<<10)+(Tt-56320),di++),Ut+=Ge<128?1:Ge<2048?2:Ge<65536?3:4;for(ft=new Uint8Array(Ut),di=Qt=0;Qt<Ut;di++)(64512&(Ge=ke.charCodeAt(di)))==55296&&di+1<wt&&(64512&(Tt=ke.charCodeAt(di+1)))==56320&&(Ge=65536+(Ge-55296<<10)+(Tt-56320),di++),Ge<128?ft[Qt++]=Ge:(Ge<2048?ft[Qt++]=192|Ge>>>6:(Ge<65536?ft[Qt++]=224|Ge>>>12:(ft[Qt++]=240|Ge>>>18,ft[Qt++]=128|Ge>>>12&63),ft[Qt++]=128|Ge>>>6&63),ft[Qt++]=128|63&Ge);return ft}(at.dictionary):nt.call(at.dictionary)==="[object ArrayBuffer]"&&(at.dictionary=new Uint8Array(at.dictionary)),at.raw)&&(bt=xe(this.strm,at.dictionary))!==Nt)throw new Error(it[bt])}function Gi(bt,zt){if((zt=new Hi(zt)).push(bt),zt.err)throw zt.msg||it[zt.err];return zt.result}function Qi(bt,zt){return(zt=zt||{}).raw=!0,Gi(bt,zt)}Hi.prototype.push=function(bt,zt){var R,at,ke=this.strm,ft=this.options.chunkSize,Ge=this.options.dictionary;if(this.ended)return!1;for(at=zt===~~zt?zt:zt===!0?Et:tt,nt.call(bt)==="[object ArrayBuffer]"?ke.input=new Uint8Array(bt):ke.input=bt,ke.next_in=0,ke.avail_in=ke.input.length;;){for(ke.avail_out===0&&(ke.output=new Uint8Array(ft),ke.next_out=0,ke.avail_out=ft),(R=De(ke,at))===It&&Ge&&((R=xe(ke,Ge))===Nt?R=De(ke,at):R===gi&&(R=It));0<ke.avail_in&&R===Vt&&0<ke.state.wrap&&bt[ke.next_in]!==0;)je(ke),R=De(ke,at);switch(R){case ri:case gi:case It:case Si:return this.onEnd(R),!(this.ended=!0)}var Tt,Qt,wt,Ut=ke.avail_out;if(!ke.next_out||ke.avail_out!==0&&R!==Vt||(this.options.to==="string"?(Tt=function(di,Ri){for(var oi=(Ri=(Ri=Ri||di.length)>di.length?di.length:Ri)-1;0<=oi&&(192&di[oi])==128;)oi--;return!(oi<0||oi===0)&&oi+$t[di[oi]]>Ri?oi:Ri}(ke.output,ke.next_out),Qt=ke.next_out-Tt,wt=function(di,Ri){var oi=Ri||di.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(di.subarray(0,Ri));for(var Ii=new Array(2*oi),yi=0,hi=0;hi<oi;){var fe=di[hi++];if(fe<128)Ii[yi++]=fe;else{var Ce=$t[fe];if(4<Ce)Ii[yi++]=65533,hi+=Ce-1;else{for(fe&=Ce===2?31:Ce===3?15:7;1<Ce&&hi<oi;)fe=fe<<6|63&di[hi++],Ce--;1<Ce?Ii[yi++]=65533:fe<65536?Ii[yi++]=fe:(fe-=65536,Ii[yi++]=55296|fe>>10&1023,Ii[yi++]=56320|1023&fe)}}}var et=Ii,lt=yi;if(lt<65534&&et.subarray&&Ht)return String.fromCharCode.apply(null,et.length===lt?et:et.subarray(0,lt));for(var pt="",H=0;H<lt;H++)pt+=String.fromCharCode(et[H]);return pt}(ke.output,Tt),ke.next_out=Qt,ke.avail_out=ft-Qt,Qt&&ke.output.set(ke.output.subarray(Tt,Tt+Qt),0),this.onData(wt)):this.onData(ke.output.length===ke.next_out?ke.output:ke.output.subarray(0,ke.next_out))),R!==Nt||Ut!==0){if(R===Vt)return Tt=this.strm,Qt=void 0,R=re(Tt)?Ue:((Qt=Tt.state).window&&(Qt.window=null),Tt.state=null,ne),this.onEnd(R),this.ended=!0;if(ke.avail_in===0)break}}return!0},Hi.prototype.onData=function(bt){this.chunks.push(bt)},Hi.prototype.onEnd=function(bt){bt===Nt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=function(zt){for(var R=0,at=0,ke=zt.length;at<ke;at++)R+=zt[at].length;for(var ft=new Uint8Array(R),Ge=0,Tt=0,Qt=zt.length;Ge<Qt;Ge++){var wt=zt[Ge];ft.set(wt,Tt),Tt+=wt.length}return ft}(this.chunks)),this.chunks=[],this.err=bt,this.msg=this.strm.msg};var br=Gi,pr=Gi,Vr={Inflate:Hi,inflate:br,inflateRaw:Qi,ungzip:pr,constants:L};A.Inflate=Hi,A.constants=L,A.default=Vr,A.inflate=br,A.inflateRaw=Qi,A.ungzip=pr,Object.defineProperty(A,"u",{value:!0})})(z)},function(P,z,oe){var A=this&&this.__createBinding||(Object.create?function(J,D,G,M){M===void 0&&(M=G),Object.defineProperty(J,M,{enumerable:!0,get:function(){return D[G]}})}:function(J,D,G,M){J[M=M===void 0?G:M]=D[G]}),le=this&&this.__setModuleDefault||(Object.create?function(J,D){Object.defineProperty(J,"default",{enumerable:!0,value:D})}:function(J,D){J.default=D}),$=this&&this.__importStar||function(J){if(J&&J.u)return J;var D={};if(J!=null)for(var G in J)G!=="default"&&Object.hasOwnProperty.call(J,G)&&A(D,J,G);return le(D,J),D},k=this&&this.__importDefault||function(J){return J&&J.u?J:{default:J}},j=(Object.defineProperty(z,"u",{value:!0}),z.CloudSettingProtoBuf=void 0,k(oe(5))),K=($=$(oe(6)),k(oe(18)).default.cloudsetting);function Z(){}$.util.Long=j.default,$.configure(),Z.prototype.encodeCloudSettingReq=function(J){var D=K.GetCloudSettingConfigRequest;return J=D.create(J),D.encode(J).finish()},Z.prototype.decodeCloudSettingRsp=function(J){return K.GetCloudSettingConfigResponse.decode(J)},z.CloudSettingProtoBuf=Z},function(P,z,oe){oe.r(z);for(var A=oe(6),le=A.util.Long?A.util.Long.fromBits:function(){return 0},$=A.roots,k=A.types?A.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},j=A.types?A.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},K=Object.keys(k),Z={$:function(G){return Z[G]?Z[G].call(this):$[G].decode?$[G].decode(this,this.uint32()):Z.$.call(this,"int32")}},J={$:function(G,M,L){var W=k[G];return W===void 0?$[G].encode?(this.uint32((L<<3|2)>>0).fork(),$[G].encode(M,this).ldelim()):J.$.call(this,"int32",M,L):J[G].call(this.uint32(L<<3|W),M)}},D=0;D<K.length;D++)Z[K[D]]=A.Reader.prototype[K[D]],J[K[D]]=A.Writer.prototype[K[D]];(function G(M,L,W,ve){for(var de=0,ne=Object.keys(M);de<ne.length;de++){var he=ne[de];if(M[he].$m&&Object.keys(M[he].$m).every(function(_e){return Number(_e)})){if(W[he])throw Error(`nested type ${W}.${he} has already exist`);W[he]=function(_e,Ue){function Fe(dt){for(var ht in _e)(ht=_e[ht])[1].charAt(0)==="{"?this[ht[0]]={}:ht[1].charAt(0)!=="["&&ht[1].charAt(0)!=="<"||(this[ht[0]]=[]);if(dt)for(var Pt=Object.keys(dt),ye=0;ye<Pt.length;++ye)dt[Pt[ye]]!=null&&(this[Pt[ye]]=dt[Pt[ye]])}var ze,Me={};for(ze in _e){var We=_e[ze],rt=We[1];rt.charAt(0)==="{"?(Fe.prototype[We[0]]=A.util.emptyObject,Me[rt]={$m:rt.substring(1).split(",").map(function(dt,ht){return["$"+(ht+1),dt,null]}).reduce(function(dt,ht,Pt){return dt[Pt+1]=ht,dt},{})}):rt.charAt(0)==="["||rt.charAt(0)==="<"?Fe.prototype[We[0]]=A.util.emptyArray:rt==="bytes"?Fe.prototype[We[0]]=A.util.newBuffer([]):We[2]&&We[2].hasOwnProperty("low")&&We[2].hasOwnProperty("high")?Fe.prototype[We[0]]=le(We[2].low,We[2].high,We[2].unsigned):Fe.prototype[We[0]]=We[2]}return Fe.create=function(dt){return new Fe(dt)},Fe.decode=function(dt,ht){dt instanceof A.Reader||(dt=A.Reader.create(dt));for(var Pt=ht===void 0?dt.len:dt.pos+ht,ye=new Fe;dt.pos<Pt;){var De=dt.uint32();if(0<(ut=De>>>3)&&_e[ut]){var xe=_e[ut][0];if((Je=_e[ut][1]).charAt(0)==="{")ye[xe]===A.util.emptyObject&&(ye[xe]={}),ut=Fe.$namespace[Je].decode(dt,dt.uint32()),ye[xe][ut.$1]=ut.$2;else if(Je.charAt(0)==="["||Je.charAt(0)==="<"){Je=Je.substring(1),ye[xe]&&ye[xe].length||(ye[xe]=[]);var Je,ut=!Z[Je]&&!$[Je].decode;if(j[Je=ut?"int32":Je]!==void 0&&(7&De)==2)for(var re=dt.uint32()+dt.pos;dt.pos<re;)ye[xe].push(Z.$.call(dt,Je));else ye[xe].push(Z.$.call(dt,Je))}else ye[xe]=Z.$.call(dt,Je)}else dt.skipType(7&De)}return ye},Fe.encode=function(dt,ht){for(var Pt in ht=ht||A.Writer.create(),_e){var ye=_e[Pt][0];if((re=_e[Pt][1]).charAt(0)==="{"){if(dt[ye]!=null&&dt.hasOwnProperty(ye))for(var De=0,xe=Object.keys(dt[ye]);De<xe.length;++De)ht.uint32((Pt<<3|2)>>0).fork(),Fe.$namespace[re].encode({$1:xe[De],$2:dt[ye][xe[De]]},ht).ldelim()}else if(re.charAt(0)==="["||re.charAt(0)==="<"){var Je=re.charAt(0)==="<",ut=(re=re.substring(1),dt[ye]);if(ut!=null&&ut.length){var re=k[re]!==void 0||$[re].encode?re:"int32";if(Je&&j[re]!==void 0){for(ht.uint32((Pt<<3|2)>>0).fork(),De=0;De<ut.length;De++)J[re].call(ht,ut[De]);ht.ldelim()}else for(De=0;De<ut.length;De++)J.$.call(ht,re,ut[De],Pt)}}else dt[ye]!=null&&dt.hasOwnProperty(ye)&&J.$.call(ht,re,dt[ye],Pt)}return ht},Object.keys(Me).length&&(Fe.$namespace=G(Me,L+"."+Ue,Fe.$namespace||{},!0)),Fe}(M[he].$m,he)}else M[he].$s?W[he]=function(_e,Ue){function Fe(ze,Me,We){A.rpc.Service.call(this,ze,Me,We)}return((Fe.prototype=Object.create(A.rpc.Service.prototype)).constructor=Fe).create=function(ze,Me,We){return new Fe(ze,Me,We)},Object.keys(_e).forEach(function(ze){var Me=_e[ze];function We(rt,dt){return this.rpcCall(We,$[Me[0]],$[Me[1]],rt,dt)}Object.defineProperty(We,"name",{value:ze}),Object.defineProperty(We,"path",{value:L+"."+Ue}),Fe.prototype[ze]=We}),Fe}(M[he].$s,he):M[he].$e&&Object.values(M[he].$e).every(function(_e){return Number(_e)===_e})&&(W[he]=function(_e){for(var Ue=Object.keys(_e),Fe={},ze=0;ze<Ue.length;ze++)Fe[Fe[Ue[ze]]=_e[Ue[ze]]]=Ue[ze];return Fe}(M[he].$e));W[he]&&!ve&&($[L+"."+he]=W[he]),delete M[he].$m,delete M[he].$s,delete M[he].$e,W[he]=G(M[he],L?L+"."+he:he,W[he]||{})}return W})({cloudsetting:{cloudsetting:{CloudSettingFileResponse:{$m:{1:["code","int64",{low:0,high:0,unsigned:!1}],2:["message","string",""],3:["file_name","string",""],4:["global_version","string",""],5:["version","string",""],6:["app_version","string",""],7:["json_data","bytes",[]],8:["hash","bytes",[]],9:["g_version","uint32",0]}},File:{$m:{1:["file_name","string",""],2:["hash","bytes",[]],3:["g_version","uint32",0]}},GetCloudSettingConfigRequest:{$m:{1:["product","cloudsetting.cloudsetting.Product",0],2:["response_compress","int32",0],3:["file_list","<string",null],4:["param_list","<cloudsetting.cloudsetting.Param",null],5:["files","<cloudsetting.cloudsetting.File",null],6:["p_version","uint32",0]}},GetCloudSettingConfigResponse:{$m:{1:["code","int64",{low:0,high:0,unsigned:!1}],2:["message","string",""],3:["polling_interval","int32",0],4:["file_response","<cloudsetting.cloudsetting.CloudSettingFileResponse",null]}},Param:{$m:{1:["key","string",""],2:["value","string",""]}},Product:{$e:{RTC:0,WEB_RTC:1,ZIM:2,ROOM_KIT:3,DOC_SHARE:4,WHITE_BOARD:5,SELF_CHECK:999,TEST_ANOOUS:1e3}}}}},"",$,!1),A.util.global.cloudsetting=$.cloudsetting,z.default=$.cloudsetting}],X={},ue.m=ce,ue.c=X,ue.d=function(P,z,oe){ue.o(P,z)||Object.defineProperty(P,z,{enumerable:!0,get:oe})},ue.r=function(P){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"u",{value:!0})},ue.t=function(P,z){if(1&z&&(P=ue(P)),8&z||4&z&&typeof P=="object"&&P&&P.u)return P;var oe=Object.create(null);if(ue.r(oe),Object.defineProperty(oe,"default",{enumerable:!0,value:P}),2&z&&typeof P!="string")for(var A in P)ue.d(oe,A,(function(le){return P[le]}).bind(null,A));return oe},ue.n=function(P){var z=P&&P.u?function(){return P.default}:function(){return P};return ue.d(z,"a",z),z},ue.o=function(P,z){return Object.prototype.hasOwnProperty.call(P,z)},ue.p="",ue(ue.s=8))},function(V,C,q){var ue;V.exports=(ue=q(2),function(){var se,Y;typeof ArrayBuffer=="function"&&(se=ue.lib.WordArray,Y=se.init,(se.init=function(pe){if((pe=(pe=pe instanceof ArrayBuffer?new Uint8Array(pe):pe)instanceof Int8Array||typeof Uint8ClampedArray<"u"&&pe instanceof Uint8ClampedArray||pe instanceof Int16Array||pe instanceof Uint16Array||pe instanceof Int32Array||pe instanceof Uint32Array||pe instanceof Float32Array||pe instanceof Float64Array?new Uint8Array(pe.buffer,pe.byteOffset,pe.byteLength):pe)instanceof Uint8Array){for(var ce=pe.byteLength,X=[],P=0;P<ce;P++)X[P>>>2]|=pe[P]<<24-P%4*8;Y.call(this,X,ce)}else Y.apply(this,arguments)}).prototype=se)}(),ue.lib.WordArray)},function(V,C){var q=function(){return this}();try{q=q||new Function("return this")()}catch{typeof window=="object"&&(q=window)}V.exports=q},function(V,C){},function(V,C,q){var ue;V.exports=(V=q(2),ue=V.lib.WordArray,V.enc.Base64={stringify:function(se){for(var Y=se.words,pe=se.sigBytes,ce=this._map,X=(se.clamp(),[]),P=0;P<pe;P+=3)for(var z=(Y[P>>>2]>>>24-P%4*8&255)<<16|(Y[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|Y[P+2>>>2]>>>24-(P+2)%4*8&255,oe=0;oe<4&&P+.75*oe<pe;oe++)X.push(ce.charAt(z>>>6*(3-oe)&63));var A=ce.charAt(64);if(A)for(;X.length%4;)X.push(A);return X.join("")},parse:function(se){var Y=se.length,pe=this._map;if(!(ce=this._reverseMap))for(var ce=this._reverseMap=[],X=0;X<pe.length;X++)ce[pe.charCodeAt(X)]=X;var P=pe.charAt(64);return P&&(P=se.indexOf(P))!==-1&&(Y=P),function(z,oe,A){for(var le,$,k=[],j=0,K=0;K<oe;K++)K%4&&(le=A[z.charCodeAt(K-1)]<<K%4*2,$=A[z.charCodeAt(K)]>>>6-K%4*2,k[j>>>2]|=(le|$)<<24-j%4*8,j++);return ue.create(k,j)}(se,Y,ce)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},V.enc.Base64)},function(V,C,q){var ue,se,Y,pe;V.exports=(V=q(2),pe=(q=V).lib,ue=pe.WordArray,se=pe.Hasher,pe=q.algo,Y=[],pe=pe.SHA1=se.extend({_doReset:function(){this._hash=new ue.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ce,X){for(var P=this._hash.words,z=P[0],oe=P[1],A=P[2],le=P[3],$=P[4],k=0;k<80;k++){k<16?Y[k]=0|ce[X+k]:(j=Y[k-3]^Y[k-8]^Y[k-14]^Y[k-16],Y[k]=j<<1|j>>>31);var j=(z<<5|z>>>27)+$+Y[k];j+=k<20?1518500249+(oe&A|~oe&le):k<40?1859775393+(oe^A^le):k<60?(oe&A|oe&le|A&le)-1894007588:(oe^A^le)-899497514,$=le,le=A,A=oe<<30|oe>>>2,oe=z,z=j}P[0]=P[0]+z|0,P[1]=P[1]+oe|0,P[2]=P[2]+A|0,P[3]=P[3]+le|0,P[4]=P[4]+$|0},_doFinalize:function(){var ce=this._data,X=ce.words,P=8*this._nDataBytes,z=8*ce.sigBytes;return X[z>>>5]|=128<<24-z%32,X[14+(64+z>>>9<<4)]=Math.floor(P/4294967296),X[15+(64+z>>>9<<4)]=P,ce.sigBytes=4*X.length,this._process(),this._hash},clone:function(){var ce=se.clone.call(this);return ce._hash=this._hash.clone(),ce}}),q.SHA1=se._createHelper(pe),q.HmacSHA1=se._createHmacHelper(pe),V.SHA1)},function(V,C,q){var ue;V.exports=(V=q(2),q=V.lib.Base,ue=V.enc.Utf8,void(V.algo.HMAC=q.extend({init:function(se,Y){se=this._hasher=new se.init,typeof Y=="string"&&(Y=ue.parse(Y));for(var pe=se.blockSize,ce=4*pe,X=(se=((Y=Y.sigBytes>ce?se.finalize(Y):Y).clamp(),this._oKey=Y.clone()),Y=this._iKey=Y.clone(),se.words),P=Y.words,z=0;z<pe;z++)X[z]^=1549556828,P[z]^=909522486;se.sigBytes=Y.sigBytes=ce,this.reset()},reset:function(){var se=this._hasher;se.reset(),se.update(this._iKey)},update:function(se){return this._hasher.update(se),this},finalize:function(se){var Y=this._hasher;return se=Y.finalize(se),Y.reset(),Y.finalize(this._oKey.clone().concat(se))}})))},function(V,C,q){var ue,se,Y,pe,ce,X,P,z,oe,A,le,$;V.exports=(V=q(2),q(9),void(V.lib.Cipher||(q=V.lib,ue=q.Base,se=q.WordArray,Y=q.BufferedBlockAlgorithm,(oe=V.enc).Utf8,pe=oe.Base64,ce=V.algo.EvpKDF,X=q.Cipher=Y.extend({cfg:ue.extend(),createEncryptor:function(k,j){return this.create(this._ENC_XFORM_MODE,k,j)},createDecryptor:function(k,j){return this.create(this._DEC_XFORM_MODE,k,j)},init:function(k,j,K){this.cfg=this.cfg.extend(K),this._xformMode=k,this._key=j,this.reset()},reset:function(){Y.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){return k&&this._append(k),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(j){return typeof j=="string"?$:A}return function(j){return{encrypt:function(K,Z,J){return k(Z).encrypt(j,K,Z,J)},decrypt:function(K,Z,J){return k(Z).decrypt(j,K,Z,J)}}}}()}),q.StreamCipher=X.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),oe=V.mode={},P=q.BlockCipherMode=ue.extend({createEncryptor:function(k,j){return this.Encryptor.create(k,j)},createDecryptor:function(k,j){return this.Decryptor.create(k,j)},init:function(k,j){this._cipher=k,this._iv=j}}),oe=oe.CBC=function(){var k=P.extend();function j(K,Z,J){var D,G=this._iv;G?(D=G,this._iv=void 0):D=this._prevBlock;for(var M=0;M<J;M++)K[Z+M]^=D[M]}return k.Encryptor=k.extend({processBlock:function(K,Z){var J=this._cipher,D=J.blockSize;j.call(this,K,Z,D),J.encryptBlock(K,Z),this._prevBlock=K.slice(Z,Z+D)}}),k.Decryptor=k.extend({processBlock:function(K,Z){var J=this._cipher,D=J.blockSize,G=K.slice(Z,Z+D);J.decryptBlock(K,Z),j.call(this,K,Z,D),this._prevBlock=G}}),k}(),le=(V.pad={}).Pkcs7={pad:function(k,j){for(var K=(j=4*j)-k.sigBytes%j,Z=K<<24|K<<16|K<<8|K,J=[],D=0;D<K;D+=4)J.push(Z);j=se.create(J,K),k.concat(j)},unpad:function(k){var j=255&k.words[k.sigBytes-1>>>2];k.sigBytes-=j}},q.BlockCipher=X.extend({cfg:X.cfg.extend({mode:oe,padding:le}),reset:function(){X.reset.call(this);var k,j=(K=this.cfg).iv,K=K.mode;this._xformMode==this._ENC_XFORM_MODE?k=K.createEncryptor:(k=K.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,j&&j.words):(this._mode=k.call(K,this,j&&j.words),this._mode.__creator=k)},_doProcessBlock:function(k,j){this._mode.processBlock(k,j)},_doFinalize:function(){var k,j=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(j.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),j.unpad(k)),k},blockSize:4}),z=q.CipherParams=ue.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),oe=(V.format={}).OpenSSL={stringify:function(k){var j=k.ciphertext;return(k=(k=k.salt)?se.create([1398893684,1701076831]).concat(k).concat(j):j).toString(pe)},parse:function(k){var j,K=(k=pe.parse(k)).words;return K[0]==1398893684&&K[1]==1701076831&&(j=se.create(K.slice(2,4)),K.splice(0,4),k.sigBytes-=16),z.create({ciphertext:k,salt:j})}},A=q.SerializableCipher=ue.extend({cfg:ue.extend({format:oe}),encrypt:function(k,j,K,Z){Z=this.cfg.extend(Z),j=(J=k.createEncryptor(K,Z)).finalize(j);var J=J.cfg;return z.create({ciphertext:j,key:K,iv:J.iv,algorithm:k,mode:J.mode,padding:J.padding,blockSize:k.blockSize,formatter:Z.format})},decrypt:function(k,j,K,Z){return Z=this.cfg.extend(Z),j=this._parse(j,Z.format),k.createDecryptor(K,Z).finalize(j.ciphertext)},_parse:function(k,j){return typeof k=="string"?j.parse(k,this):k}}),le=(V.kdf={}).OpenSSL={execute:function(k,j,K,Z,J){return Z=Z||se.random(8),J=(J?ce.create({keySize:j+K,hasher:J}):ce.create({keySize:j+K})).compute(k,Z),k=se.create(J.words.slice(j),4*K),J.sigBytes=4*j,z.create({key:J,iv:k,salt:Z})}},$=q.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:le}),encrypt:function(k,j,K,Z){return K=(Z=this.cfg.extend(Z)).kdf.execute(K,k.keySize,k.ivSize,Z.salt,Z.hasher),Z.iv=K.iv,(k=A.encrypt.call(this,k,j,K.key,Z)).mixIn(K),k},decrypt:function(k,j,K,Z){return Z=this.cfg.extend(Z),j=this._parse(j,Z.format),K=Z.kdf.execute(K,k.keySize,k.ivSize,j.salt,Z.hasher),Z.iv=K.iv,A.decrypt.call(this,k,j,K.key,Z)}}))))},function(V,C){V.exports=E},function(V,C,q){q.r(C),q.d(C,"ZegoExpressWebRTMEngine",function(){return kc}),q.d(C,"getReportSeq",function(){return $}),q.d(C,"getSeq",function(){return le}),q.d(C,"ZegoLogger",function(){return se.ZegoLogger}),q.d(C,"ZegoDataReport",function(){return se.ZegoDataReport}),q.d(C,"ZegoExpressWebRTM",function(){return Xr}),q.d(C,"BusinessService",function(){return L}),q.d(C,"NetConnection",function(){return ne}),q.d(C,"ZReporter",function(){return Ms}),q.d(C,"getUserAgent",function(){return Jn}),q.d(C,"isIos",function(){return Ls}),q.d(C,"isMacOs",function(){return bc}),q.d(C,"isAndroid",function(){return Sc}),q.d(C,"isWindows",function(){return ju}),q.d(C,"isWin32",function(){return Ec}),q.d(C,"isLinux",function(){return Vu}),q.d(C,"getOsType",function(){return Tc}),q.d(C,"getNetTypeNum",function(){return Rc});var ue,se=q(4);(C=ue=ue||{})[C.SWITCH_ONE=1]="SWITCH_ONE",C[C.SWITCH_TWO=2]="SWITCH_TWO";var Y,pe,ce,X,P,z,oe,A,le=((C=Y=Y||{})[C.TT_NONE=0]="TT_NONE",C[C.TT_PC=1]="TT_PC",C[C.TT_IOS=2]="TT_IOS",C[C.TT_ANDROID=3]="TT_ANDROID",C[C.TT_MAC=4]="TT_MAC",C[C.TT_LINUX=5]="TT_LINUX",C[C.TT_WEB=6]="TT_WEB",C[C.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",C[C.TT_UNKNOWN=32]="TT_UNKNOWN",(C=pe=pe||{})[C.logout=0]="logout",C[C.trylogin=1]="trylogin",C[C.login=2]="login",(C=ce=ce||{})[C.I=0]="I",C[C.H=10]="H",C[C.M=100]="M",C[C.L=1e3]="L",(C=X=X||{})[C.offline=0]="offline",C[C.online=1]="online",(C=P=P||{})[C.NT_NONE=0]="NT_NONE",C[C.NT_LINE=1]="NT_LINE",C[C.NT_WIFI=2]="NT_WIFI",C[C.NT_2G=3]="NT_2G",C[C.NT_3G=4]="NT_3G",C[C.NT_4G=5]="NT_4G",C[C.NT_UNKNOWN=32]="NT_UNKNOWN",(C=z=z||{}).WIN32="WIN32",C.MAC="Mac",C.ANDROID="Android",C.LINUX="Linux",C.IOS="iOS",C.UNKNOWN="WTF",function(){return oe++}),$=(A=oe=1,function(){return A++}),k=(Object.defineProperty(j.prototype,"id",{get:function(){return this._id||null},set:function(d){this._id=d},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"data",{get:function(){return this._data},set:function(d){this._data=d},enumerable:!1,configurable:!0}),j.prototype.hasNext=function(){return this.next&&this.next.id},j.prototype.hasPrev=function(){return this.prev&&this.prev.id},j);function j(d,T){d===void 0&&(d=null),T===void 0&&(T=null),this.next=null,this.prev=null,this._id=d,this._data=T}Z.prototype.insertBefore=function(d,T){return(T=new k(this._idCounter,T)).next=d,T.prev=d.prev,d.prev&&(d.prev.next=T),d.prev=T,++this._idCounter,++this._numNodes,T},Z.prototype.addLast=function(d){return this.insertBefore(this.end,d)},Z.prototype.add=function(d){return this.addLast(d)},Z.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},Z.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},Z.prototype.size=function(){return this._numNodes},Z.prototype.getFromFirst=function(d){var T=0,N=this.start.next;if(0<=d)for(;T<d&&N!==null;)N=N.next,++T;else N=null;if(N===null)throw"Index out of bounds.";return N},Z.prototype.get=function(d){return d===0?this.getFirst():d===this._numNodes-1?this.getLast():this.getFromFirst(d)},Z.prototype.remove=function(d){return d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),--this._numNodes,d},Z.prototype.removeFirst=function(){var d=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):d},Z.prototype.removeLast=function(){var d=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):d},Z.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},Z.prototype.each=function(d){for(var T=this.start;T.hasNext();)d(T=T.next)},Z.prototype.find=function(d){for(var T=this.start,N=!1,Q=null;T.hasNext()&&!N;)d(T=T.next)&&(Q=T,N=!0);return Q},Z.prototype.map=function(d){for(var T=this.start,N=[];T.hasNext();)d(T=T.next)&&N.push(T);return N},Z.prototype.push=function(d){return this.addLast(d)},Z.prototype.unshift=function(d){0<this._numNodes?this.insertBefore(this.start.next,d):this.insertBefore(this.end,d)},Z.prototype.pop=function(){return this.removeLast()},Z.prototype.shift=function(){return this.removeFirst()};var K=Z;function Z(){this.start=new k,this.end=new k,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var J,D,G,M,L,W,ve="未引入消息模块",de=q(11).ZegoConnectionAgent,ne=(Object.defineProperty(he.prototype,"clientIP",{get:function(){var d;return((d=this.connection)==null?void 0:d.clientIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"timeOffset",{get:function(){var d;return(d=this.connection)==null?void 0:d.timeOffset},enumerable:!1,configurable:!0}),he.prototype.init=function(){var d;(d=this.connection)!=null&&d.init()},he.prototype.unInit=function(){var d;(d=this.connection)!=null&&d.unInit()},he.prototype.setAppInfo=function(d){var T;(T=this.connection)!=null&&T.setAppInfo(d)},he.prototype.setUserInfo=function(d){var T;(T=this.connection)!=null&&T.setUserInfo(d)},he.prototype.setNetAgentDefaultServers=function(d){var T;(T=this.connection)!=null&&T.setNetAgentDefaultServers(d)},he.prototype.setBackupDomains=function(d){var T;(T=this.connection)!=null&&T.setBackupDomains(d)},he.prototype.setDispatchConnectServers=function(d){var T;(T=this.connection)!=null&&T.setDispatchConnectServers(d)},he.prototype.setNetAgentSpecifiedServers=function(d){var T;(T=this.connection)!=null&&T.setNetAgentSpecifiedServers(d)},he.prototype.startHttpRequest=function(d,T,N,Q,te){var ge;(ge=this.connection)!=null&&ge.startHttpRequest(d,T,N,Q,te)},he.prototype.startHttpRequest2=function(d,T,N,Q,te){var ge;(ge=this.connection)!=null&&ge.startHttpRequest2(d,T,N,Q,te)},he.prototype.getAppConfigByAgent=function(d,T,N,Q,te){var ge;return(ge=this.connection)==null?void 0:ge.getAppConfigByAgent(d,T,N,Q,te)},he.prototype.getPCRequest=function(d,T){var N;return((N=this.connection)==null?void 0:N.getPCRequest(d,T))||null},he.prototype.connectUa=function(){var d;(d=this.connection)!=null&&d.connectUa()},he.prototype.destroyConnect=function(){var d;(d=this.connection)!=null&&d.destroyConnect()},he.prototype.destroy=function(){var d;(d=this.connection)!=null&&d.destroy()},he.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},he.prototype.on=function(d,T){var N;return((N=this.connection)==null?void 0:N.on(d,T))||!0},he.prototype.off=function(d,T){var N;return(N=this.connection)==null?void 0:N.off(d,T)},he.prototype.setLogger=function(d){var T;return(T=this.connection)==null?void 0:T.setLogger(d)},he.prototype.setAccess=function(d){var T;return(T=this.connection)==null?void 0:T.setAccess(d)},he.prototype.getNTP=function(){var d;return((d=this.connection)==null?void 0:d.getNetworkTimeInfo())||{timestamp:0,maxDeviation:0}},he);function he(){this.connection=null,this.isLoad=!1,this.callBackList=[],this.connection=new de(Xr.proxyCtrl)}(C=J=J||{})[C.AUTO=0]="AUTO",C[C.MANUAL=1]="MANUAL",(C=D=D||{})[C.EMPTY=0]="EMPTY",C[C.CLOSE=1]="CLOSE",(C=G=G||{})[C.Mode_UNSET=0]="Mode_UNSET",C[C.MODE_ONLINE=1]="MODE_ONLINE",C[C.MODE_TEST=2]="MODE_TEST",C[C.MODE_ALPHA=3]="MODE_ALPHA",(C=M=M||{})[C.CLOSE=0]="CLOSE",C[C.TEMP=1]="TEMP",C[C.TIMEOUT=2]="TIMEOUT",(C=L=L||{})[C.SERVICE_UNSET=0]="SERVICE_UNSET",C[C.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",C[C.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",C[C.SERVICE_MIX=3]="SERVICE_MIX",C[C.SERVICE_ZEUS=4]="SERVICE_ZEUS",C[C.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",C[C.SERVICE_L3=6]="SERVICE_L3",C[C.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",C[C.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",C[C.SERVICE_ZIM=9]="SERVICE_ZIM",C[C.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",C[C.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",C[C.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",C[C.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",C[C.SERVICE_QUALITY=14]="SERVICE_QUALITY",C[C.SERVICE_SECURITY=15]="SERVICE_SECURITY",C[C.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",C[C.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",C[C.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",C[C.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",C[C.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",C[C.SERVICE_CDN=21]="SERVICE_CDN",C[C.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",C[C.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",C[C.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",C[C.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",C[C.SERVICE_ECHO=26]="SERVICE_ECHO",C[C.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",C[C.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(C=W=W||{}).Logining="LOGINING",C.Logined="LOGINED",C.LoginFailed="LOGIN_FAILED",C.Reconnecting="RECONNECTING",C.Reconnected="RECONNECTED",C.ReconnectFailed="RECONNECT_FAILED",C.Kickout="KICKOUT",C.Logout="LOGOUT",C.LogoutFailed="LOGOUT_FAILED";var _e={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},SDK_NOT_SPECIAL:{code:1001005,msg:"sdk require special"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},GEO_SET_ERROR:{code:1000018,msg:"geo set error"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_EXTRA_INFO_KEY_LIMIT:{code:1002017,msg:"room extra info key exceed the limit"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},WHITE_BOARD_VERSION_ERROR:{code:1002098,msg:"Mismatch with RTC SDK version, please upgrade ZegoSuperBoard or ZegoWhiteboardView SDK to the latest version"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."},UPLOAD_LOG_ERROR:{code:1102025,msg:"upload zip logs failed"}},Ue=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],Fe=(C=q(6),q.n(C)),ze=(C=q(7),q.n(C));function Me(){var d=window.navigator.userAgent,T=window.ActiveXObject!=null&&d.indexOf("MSIE")!=-1,N=d.indexOf("Firefox")!=-1,Q=window.opr!=null,te=d.indexOf("Chrome")&&window.chrome;return d=d.indexOf("Safari")!=-1&&d.indexOf("Version")!=-1,T?"IE":N?"Firefox":Q?"Opera":te?"Chrome":d?"Safari":"Unkown"}function We(){var d=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((d==null?void 0:d.effectiveType)||(d==null?void 0:d.type)||"unknown").toUpperCase()}function rt(d,T){return Fe.a.encrypt(d,T).toString()}function dt(d,T){try{return Fe.a.decrypt(d,T).toString(ze.a)}catch{return""}}function ht(d,T){try{localStorage.setItem(d,T)}catch{}}function Pt(d){try{return localStorage.getItem(d)}catch{}}var ye=q(0),De=function(){return(De=Object.assign||function(d){for(var T,N=1,Q=arguments.length;N<Q;N++)for(var te in T=arguments[N])Object.prototype.hasOwnProperty.call(T,te)&&(d[te]=T[te]);return d}).apply(this,arguments)},xe="TOKEN_ERROR",Je="MULTIPLE_LOGIN_KICKOUT",ut="TOKEN_EXPIRED",re="ZPUSH_REQUEST_FAIL",Se="BIZ_CHANNEL_ERROR",we="ROOM_INNER_ERROR";function Ke(d,T){return T==0?Object(ye.d)(d)&&d%1==0&&0<=d:Object(ye.d)(d)&&d%1==0&&0<d}function je(d,T,N){var Q;T.success&&(Q=T.success,N[d+"SuccessCallback"]=Q),T.error&&(Q=T.error,N[d+"ErrorCallback"]=Q)}function St(d,T){return T[d+"ErrorCallback"]}function xt(d,T){return T[d+"SuccessCallback"]}function Ht(d,T,N,Q){je(d,{success:function(te,ge){for(var Le=[],ot=2;ot<arguments.length;ot++)Le[ot-2]=arguments[ot];var Ye=T,gt=N,Xe=ge,Ot=Le;switch(te){case"eventStart":Ye.eventStart(gt,Xe);break;case"eventEndWithMsgInfo":Ye.eventEndWithMsgInfo(gt,Xe,Ot[0]);break;case"addEventMsg":Ye.addEventMsg(gt,Xe,Ot[0],Ot[1]);break;case"addEvent":Ye.addEvent(gt,Xe);break;case"eventEnd":Ye.eventEnd(gt,Xe);break;case"addMsgInfo":Ye.addMsgInfo(gt,Ot[0])}}},Q)}function $t(d,T){var N={code:-1,message:"server error"};return N.code=1e9<d?d-1e9+52e6:d+2002e6,T&&(N.message=T),N}function ci(d,T,N,Q){return{interResolve:function(te){d.uploadReport(T),N(te)},interReject:function(te,ge){var Le;ge===void 0&&(ge=""),(Le=te.code<2e9&&1e9<te.code?$t(te.code,te.msg):{code:te.code,message:te.msg})&&d.addMsgInfo(T,{error:Le.code,message:Le.message+ge}),d.uploadReport(T),Q({errorCode:te.code||te.errorCode})}}}function He(d){var T,N,Q={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};return d===0?_e.SUCCESS:((T=De({},_e.ROOM_INNER_ERROR)).code=d,T.msg=1e9<d?(N=Q[d])?"liveroom cmd error, code: "+d+", message: "+N:Q[1e9]+d:Q[d]?Q[d]+" code:"+d:"unknown error code:"+d,T)}function Ee(d,T){delete T[d+"SuccessCallback"],delete T[d+"ErrorCallback"]}function it(d,T){var N={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:xe,2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:xe,5022:"ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return T?2e5<d&&d<3e5?N[d-2e5]:d<2e5?{50013:Je,50116:xe,50117:ut,50118:xe,50119:xe,50120:xe,50121:xe,50122:xe,50123:ut,50124:xe,50125:xe,50126:xe,50127:xe,50128:xe}[d]||N[d]||we:N[d]||we:1e9<d?N[d-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:re,1004:re,1005:re,1006:"LOGIN_STATE_WRONG",1007:re,1008:xe,1009:"DIAPATCH_ERROR",1010:ut,1011:xe,1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:Se,2002:Se}[d]||we}function nt(d){return parseInt(Math.random()*(d+1)+"",10)}function tt(d){return!(!d.startsWith("wss")||d.indexOf("test")===-1||!d.endsWith("ws"))}function Et(d){try{var T,N=Uint8Array.from(function(Ye){for(var gt,Xe,Ot,mi,_i=Ye.length,Yt=0,ni="";Yt<_i;){for(;gt=Ue[255&Ye.charCodeAt(Yt++)],Yt<_i&&gt==-1;);if(gt==-1)break;for(;Xe=Ue[255&Ye.charCodeAt(Yt++)],Yt<_i&&Xe==-1;);if(Xe==-1)break;ni+=String.fromCharCode(gt<<2|(48&Xe)>>4);do if((Ot=255&Ye.charCodeAt(Yt++))==61)return ni;while(Ot=Ue[Ot],Yt<_i&&Ot==-1);if(Ot==-1)break;ni+=String.fromCharCode((15&Xe)<<4|(60&Ot)>>2);do if((mi=255&Ye.charCodeAt(Yt++))==61)return ni;while(mi=Ue[mi],Yt<_i&&mi==-1);if(mi==-1)break;ni+=String.fromCharCode((3&Ot)<<6|mi)}return ni}(d),function(Ye){return Ye.charCodeAt(0)}),Q=new DataView(N.buffer);return 0<(T=Object(ye.c)(Q.getBigInt64)?Q.getBigUint64(0):(te=0,ge=!1,ot=(Le=Q).getUint32(te,ge),Le=Le.getUint32(te+4,ge),te=Math.pow(2,32)*ot+Le,Number.isSafeInteger(te)||console.warn(te,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),te))?Number(T):Number(Q.getBigUint64(0,!0))}catch{console.error("token error")}var te,ge,Le,ot;return-1}function Nt(d){var T=new Date().getTime(),N="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Q){var te=(T+16*Math.random())%16|0;return T=Math.floor(T/16),(Q=="x"?te:3&te|8).toString(36)});return d===0?function(Q){for(var te,ge=document.createElement("canvas"),Le=((Le=ge.getContext("2d")).textBaseline="top",Le.font="14px 'Arial'",Le.fillStyle="#f60",Le.fillRect(125,1,62,20),Le.fillStyle="#069",Le.fillText(Q,2,15),Le.fillStyle="rgba(102, 204, 0, 0.7)",Le.fillText(Q,4,17),ge.toDataURL().replace("data:image/png;base64,","")),ot=atob(Le).slice(-16,-12),Ye="",gt=0,Xe=(ot+="").length;gt<Xe;gt++)Ye+=(te=ot.charCodeAt(gt).toString(16)).length<2?"0"+te:te;return Ye}("hello, zego")+N.slice(8):N}var Vt={product:"rtc_web",importLevel:ce.H,levels:[0,10,100,1e3],bps:32e3},It="init",ri="0c9e6e0f8c0a8f4e",gi="z_net_access_servers",Si="z_appconfig",Hi="z_appconfig_etag",Gi="z_rtc_domains",Qi={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],prefixDomain:"accesshub-wss",normalPriDomains:["coolbcloud.com","coolgcloud.com"],specialDomain:"cooldcloud.com",mode:"online",modeNo:G.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},br=[{id:2,relative_geofencings:[],accesshub:"accesshub-wss-geo-2",logreport:"weblogger-wss-geo-2",detaillog:"detaillog-geo-2"},{id:3,relative_geofencings:[7],accesshub:"accesshub-wss-geo-3",logreport:"weblogger-wss-geo-3",detaillog:"detaillog-geo-3"},{id:4,relative_geofencings:[7],accesshub:"accesshub-wss-geo-4",logreport:"weblogger-wss-geo-4",detaillog:"detaillog-geo-4"},{id:5,relative_geofencings:[7],accesshub:"accesshub-wss-geo-5",logreport:"weblogger-wss-geo-5",detaillog:"detaillog-geo-5"},{id:6,relative_geofencings:[7],accesshub:"accesshub-wss-geo-6",logreport:"weblogger-wss-geo-6",detaillog:"detaillog-geo-6"},{id:7,relative_geofencings:[3,4,5,6,1],accesshub:"accesshub-wss-geo-7",logreport:"weblogger-wss-geo-7",detaillog:"detaillog-geo-7"}],pr=[2,3,4,5,6];function Vr(d,T){this.$t=d,this.Zt=T,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this._retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function bt(d){return d}function zt(d){return d}function R(d){return d}function at(d){return d}Vr.prototype.init=function(d,T,N,Q){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,Object(ye.d)(d)&&d<3600&&(this.RETRY_MAX_TIME=d),Object(ye.d)(T)&&(this.RETRY_START_TIME_INTERVAL=T),Object(ye.d)(N)&&(this.RETRY_CONTINUE_COUNT=N),Object(ye.d)(Q)&&(this.RETRY_MAX_TIME_INTERVAL=Q)},Vr.prototype.invalid=function(){this.$t.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this._retryStartTime=0,this.retryActiveCount=1};var ke="zm.0",ft="zm.slf",Ge="zm.lg",Tt="zm.lo",Qt="zm.fac",wt="zm.fac.tk",Ut="zm.hlu",di="zm.cna",Ri="zm.gsac",oi="zm.zpl.url",Ii="zm.on",yi="zm.rntk",hi="zm.rm.lg",fe="zm.rm.tl",Ce="zm.rm.lgr",et="zm.rm.clh",lt="zm.rm.lo",pt="zm.rm.dcn",H="zm.rm.kco",y="zm.hhl",x="zm.hb.st",I="zm.hb.rsp",B="zm.us.urp",me="zm.us.uph",Oe="ON_LISTENER",Qe="zm.st.ofls",qe="zm.lrh.sm",yt="zm.lrh.hsp",Re="zm.lrh.lgi",_t="zm.lrh.ful",ii="zm.lrh.lgo",Wt="zm.lrh.sru",Ie="zm.lrh.hd",Ve={event:"/sdk/init",error:{kInvalidParamError:_e.INPUT_PARAM},system_info:zt,servers:function(d){return d},is_from_cache:at,project:zt,liveroom_version:zt,biz_type:R,lua_md5:zt,sev_env:zt,use_na:R},Ne="listener",$e="/sdk/set_debug",mt=zt,ct={event:"/sdk/set_log_config",error:{kInvalidParamError:_e.INPUT_PARAM},log_level:function(d){return d},remote_log_level:zt,log_url:zt},qt={event:"/sdk/on_listener",listener:zt,error:{INPUT_PARAM:_e.INPUT_PARAM}},Bt=zt,jt={event:"/sdk/login",room_id:zt,room_sid_string:zt,user_state_update:R,max_member_cnt:R,message:zt,token:zt,svr_env:zt,server:zt,try_cnt:R,room_mode:R,role:R,audience_create_room:R,liveroom_sid_string:zt,error:{ROOM_ID_NULL:_e.ROOM_ID_NULL,INPUT_PARAM:_e.INPUT_PARAM,ROOM_ID_TOO_LONG:_e.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:_e.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:_e.USER_ID_NULL,USER_ID_TOO_LONG:_e.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:_e.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:_e.USER_NAME_NULL,USER_NAME_TOO_LONG:_e.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:_e.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:_e.LOGIN_TIMEOUT,INNER_ERROR:_e.ROOM_INNER_ERROR,NETWORK_BROKEN:_e.NETWORK_BROKEN}},Xt="/sdk/sublogin",si=zt,Ei={event:"/zpush/login",sdk_zpush_sessionid_string:zt},Ui={event:"/liveroom/enter"},ji={event:"/sdk/renew_token",error:{INPUT_PARAM:_e.INPUT_PARAM,NOT_LOGIN:_e.NOT_LOGIN},token:zt},ki={event:"/sdk/logout",error:{INPUT_PARAM:_e.INPUT_PARAM,ROOM_NOT_EXIST:_e.ROOM_NOT_EXIST},room_id:zt,room_sid_string:zt,is_multi:at,is_send_cmd_net:at,liveroom_sid_string:zt},Zi="/liveroom/quit",Bi=zt,Ti=zt,Mi="/sdk/relogin",Gr={event:"/liveroom/tempbroken"},en={event:"/sdk/reconnect",room_broken_time:R},Sr={event:"/sdk/disconnect",valid_d:R,total_d:R,tempbroken_cnt:R},Yr=R,Mo=R,Lr={event:"/liveroom/hb",room_id:zt,room_sid_string:zt,interval:R,stream_seq:R,server_user_seq:R,error:{NOT_LOGIN:_e.NOT_LOGIN,HB_TIMEOUT:_e.TIMEOUT}},Ln="/sdk/listener",tn={event:"/sdk/enable_multi_room",is_multi:at,error:{kInvalidParamError:_e.INPUT_PARAM,kAlreadyLoginError:_e.ALREADY_LOGIN}},gn=bt,Wn=bt,Qn=bt,rr="/cloud_setting/request",kr=bt,Mn=bt,Zn={event:"/liveroom/get_current_user_list",user_index:R,is_time_ascend:at,use_na:R},Rn="/zegoconn/connect",fa=zt,hc=R,fc=bt,Du=zt,Nu=zt,Lu=R,pc="/zegoconn/request",Mu=bt,xu=bt,Uu=R,Bu={event:"/zegoconn/proxy_connect",service_no:R,proxy_link_sources:R,recv_time:R,connect_stream:R},zu={event:"/zegoconn/proxy_broken",service_no:R},Fu={event:"/zegoconn/proxy_disconnect",service_no:R};pa=function(d,T){return(pa=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(N,Q){N.__proto__=Q}:function(N,Q){for(var te in Q)Object.prototype.hasOwnProperty.call(Q,te)&&(N[te]=Q[te])}))(d,T)},function(d,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function N(){this.constructor=d}pa(d,T),d.prototype=T===null?Object.create(T):(N.prototype=T.prototype,new N)}(Fr,mc=Vr),Object.defineProperty(Fr.prototype,"Qt",{get:function(){return this.Zt.reporter},enumerable:!1,configurable:!0}),Fr.prototype.renewLocalToken=function(d,T){this.token=d,this._room.token=this.token;var N=new Date().getTime(),Q=void 0;T&&Object(ye.d)(T)?Q=1e3*T:Object(ye.f)(d)&&["03","04"].includes(d.substring(0,2))&&(T=1e3*Et(d.substring(2)),this.$t.info("zm.rm.rlt time "+T+" "+N+" "+this.Zt.local_time_deviation),Q=T-(N-this.Zt.local_time_deviation)),Q&&this.roomHandler.resetTokenTimer(Q),this.$t.setTokenInfo(d),this.Zt.actionListener("_tokenRenewed",d,this._room.roomID)},Fr.prototype.initRoom=function(d,T,N,Q,te,ge,Le){this.roomHandler=d,this.roomID=T,this.renewLocalToken(N),this.user=Q,this.server=te,this.serverBak=ge||te,this.config=Le},Fr.prototype.active=function(d){var T=this,N=(this.$t.info(hi+" retry call "+((N=this._room)==null?void 0:N.roomID)+" "+(d=d!==void 0&&d)),(N=this.loginRoomCallback)!=null&&N.success?Xt:Mi);if(this.subLoginSpan||(this.subLoginSpan=this.Qt.createSpan(ce.H,{key:jt.event,par:this.roomID},{key:N,par:this.roomID},N,!0),this.spanKey=N),this.roomHandler.setRunState(pe.trylogin),this._room.isMulti&&((N=this.Zt.roomModulesList.find(function(te){return!te.isMulti}))==null?void 0:N.runState)!==pe.login)this.$t.info(hi+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.$t.info(hi+" has actived, ignore");else{var Q=this.Zt.networkState==X.offline;if(Q){if(this.$t.info(hi+" check if really offline. "+this._retryNetCount),this._retryNetCount>=this._retryNetMaxTimes)return void this.$t.warn(hi+" network is broken, stop retry")}else this._retryNetCount=0;this.isOverTime?this.$t.info(hi+" retry over time, stop retry"):(this.retryActiveCount==1?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(N=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=N>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:N),this.$t.info(hi+" interval "+this.retryActiveInterval),this.retryTimer=setTimeout(function(){T.roomHandler.login(T.retryActiveCount%2==1?T.server:T.serverBak,T.roomID,T.token,T.user,T.config,function(te){T.Zt.networkState=X.online,T.handleLoginFinish(te)},function(te,ge){T.handleLoginFinish(!1,te,ge)}),T.retryTimer&&clearTimeout(T.retryTimer),T.retryTimer=null,Q?T._retryNetCount++:T.retryActiveCount++},d?0:1e3*this.retryActiveInterval))}},Fr.prototype.startMaxTime=function(){var d=this;this.maxTimer||(this.$t.info(hi+" start max timer"),this.activeStartTime===0&&(this.activeStartTime=new Date().getTime()),this.maxTimer=setTimeout(function(){var T;d.$t.info(hi+" over max time ".concat(d.RETRY_MAX_TIME,"s, stop retry")),d.isOverTime=!0,d.roomHandler.resetRoom(),d.activeStartTime!==0&&(T=0<(T=new Date().getTime()-d.activeStartTime)?T:void 0),d.stopMaxTime(),d.invalid(),d.onactive(!1,_e.LOGIN_TIMEOUT),d.subLoginSpan&&(d.Qt.spanEnd({key:d.spanKey,par:d.roomID},{error:_e.LOGIN_TIMEOUT.code,message:_e.LOGIN_TIMEOUT.msg,try_time:T}),d.subLoginSpan=null),d.loginRoomCallback.fail&&(d.loginRoomCallback.fail(_e.LOGIN_TIMEOUT),d.roomHandler.disconnectedHandle(_e.LOGIN_TIMEOUT),d.resetCallBack())},1e3*this.RETRY_MAX_TIME))},Fr.prototype.stopMaxTime=function(){this.$t.info(hi+" stop max timer"),this.activeStartTime!==0&&(this.activeStartTime=0),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},Fr.prototype.onactive=function(d,T){},Fr.prototype.handleError=function(d,T){if(this.RETRY_MAX_TIME<3)return!1;if(T){T=void 0;var N=void 0,Q=void 0,te=(this.Zt.useNetAgent&&(T=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128","50013"],N=["40001","40100"],Q=["201002","30019"]),d.code+"");if(this.Zt.useNetAgent){if(d.code===10015)return this._room.retryConnect(),!0;if(40001<=d.code&&d.code<=40100||50200<=d.code&&d.code<=50299||Q!=null&&Q.includes(te))return this._room.resetSessionInfo(),!0}return!(T!=null&&T.includes(te)||(N==null||!N.includes(te))&&(this._room.lastRunState!=pe.login||(this.$t.warn("zm.rrh.he reset"),this._room.resetUserSession(),this.invalid(),0)))}return!0},Fr.prototype.setLoginRoomCallback=function(d,T){this.loginRoomCallback.success=d,this.loginRoomCallback.fail=T},Fr.prototype.loginFail=function(d){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,d),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(d),this.roomHandler.disconnectedHandle(d),this.resetCallBack())},Fr.prototype.handleLoginFinish=function(d,T,N){var Q;this.$t.info("zm.rrh.hlf "+d+" "+JSON.stringify(T)),T?(this.subLoginSpan&&(Q=void 0,this.activeStartTime!==0&&(Q=0<(Q=new Date().getTime()-this.activeStartTime)?Q:void 0),this.Qt.spanEnd({key:this.spanKey,par:this.roomID},{error:T.code,message:T.msg,try_time:Q}),this.subLoginSpan=null),this.handleError(T,N)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(d,T),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(T),this.roomHandler.disconnectedHandle(T),this.resetCallBack()))):(Q=void 0,this.activeStartTime!==0&&(Q=0<(Q=new Date().getTime()-this.activeStartTime)?Q:void 0),this.stopMaxTime(),this.invalid(),this.onactive(d,{code:0,msg:""}),this.subLoginSpan&&(this.Qt.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:(N=this._room)==null?void 0:N.roomSidString,try_time:Q}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(d),this.resetCallBack()))},Fr.prototype.invalid=function(){this.$t.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this._retryNetCount=0},Fr.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var pa,mc,Wr,rs=Fr;function Fr(d,T,N){var Q=mc.call(this,d,T)||this;return Q.$t=d,Q.Zt=T,Q._room=N,Q.activeStartTime=0,Q._retryNetCount=0,Q._retryNetMaxTimes=3,Q.spanKey="",Q.loginRoomCallback={},Q}(C=Wr=Wr||{}).NOT_EMPTY="NOT_EMPTY",C.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",C.TYPE_STRING="TYPE_STRING",C.TYPE_INTEGER="TYPE_INTEGER",C.TYPE_OBJECT="TYPE_OBJECT",C.MAX_LENGTH_10="MAX_LENGTH_10",C.MAX_LENGTH_64="MAX_LENGTH_64",C.MAX_LENGTH_100="MAX_LENGTH_100",C.MAX_LENGTH_128="MAX_LENGTH_128",C.MAX_LENGTH_256="MAX_LENGTH_256",C.MAX_LENGTH_1024="MAX_LENGTH_1024";var Qr={error:{code:0,msg:"suc"}},ma={NOT_EMPTY:function(d,T,N,Q,te){return T===void 0||T===""||T===null?(Q.error("".concat(N," ").concat(d," is empty")),te):Qr},ILLEGAL_CHARACTERS:function(d,T,N,Q,te){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(T)&&/^[^:/]*$/g.test(T)?Qr:(Q.error("".concat(N," ").concat(d," contains illegal characters")),te)},TYPE_STRING:function(d,T,N,Q,te){return Object(ye.f)(T)?Qr:(Q.error("".concat(N," ").concat(d," must be string")),te)},TYPE_INTEGER:function(d,T,N,Q,te){return Ke(T,!1)?Qr:(Q.error("".concat(N," ").concat(d,"  must be integer number")),te)},TYPE_OBJECT:function(d,T,N,Q,te){return T&&Object(ye.e)(T)?Qr:(Q.error("".concat(N," ").concat(d,"  must be object")),te)},MAX_LENGTH_10:function(d,T,N,Q,te){return 10<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr},MAX_LENGTH_64:function(d,T,N,Q,te){return 64<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr},MAX_LENGTH_100:function(d,T,N,Q,te){return 100<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr},MAX_LENGTH_128:function(d,T,N,Q,te){return 128<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr},MAX_LENGTH_256:function(d,T,N,Q,te){return 256<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr},MAX_LENGTH_1024:function(d,T,N,Q,te){return 1024<T.length?(Q.error("".concat(N," ").concat(d," is too long")),te):Qr}};Object.defineProperty(rn.prototype,"debug",{get:function(){return this._debug},set:function(d){this._debug=d,se.LoggerStateCenter.getInstance().debug=d},enumerable:!1,configurable:!0}),Object.defineProperty(rn.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(d){this._testEnvironment=d,se.LoggerStateCenter.getInstance().testEnvironment=d},enumerable:!1,configurable:!0}),Object.defineProperty(rn.prototype,"ENV",{get:function(){return this._env},set:function(d){this._env=d,se.LoggerStateCenter.getInstance().ENV=d},enumerable:!1,configurable:!0}),Object.defineProperty(rn.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(rn.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),rn.prototype.getRequestId=function(){return this.idName+"-"+le()},rn.prototype.actionListener=function(d){for(var T,N=this,Q=[],te=1;te<arguments.length;te++)Q[te-1]=arguments[te];["getAnchorInfo","HBResponse","roomOnlineUserCountUpdate","roomLoginResponse"].includes(d)||d.startsWith("_")||!this.listenerList[d]||((T=this.reporter.createSpan(ce.H,{key:Ne},{key:""},Ln)).setAttributes({listener:d,listener_params:JSON.stringify(Q)}),T.end()),["roomStateChanged","tokenWillExpire"].includes(d)&&this.$t.info("zm.al ".concat(d," ").concat(JSON.stringify(Q),". pageID: ").concat(Xr.pageID," , instID: ").concat(this.id)),this.listenerList[d]&&this.listenerList[d].forEach(function(ge){try{ge.apply(void 0,Q)}catch(Le){N.$t.error("zm.st.at ",d," ",JSON.stringify(Le))}})},rn.prototype.onListener=function(d,T){return this.listenerList[d]?Object(ye.c)(T)?(this.listenerList[d].indexOf(T)==-1&&this.listenerList[d].push(T),!0):(this.$t.error(Oe+" listener callBack must be funciton"),!1):(this.$t.error(Oe+" event "+d+" no found"),!1)},rn.prototype.offListener=function(d,T){return this.listenerList[d]?Object(ye.c)(T)?(this.listenerList[d].indexOf(T)!==-1&&(this.listenerList[d]=this.listenerList[d].filter(function(N){return N!==T})),!0):(this.$t.error(Qe+" listener callBack must be funciton"),!1):(this.$t.error(Qe+" event "+d+" no found"),!1)},Object.defineProperty(rn.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(d){this._sdkVersion=d},enumerable:!1,configurable:!0}),rn.prototype.proxyRes=function(d,T,N){return{interResolve:function(Q){T(Q),d.end()},interReject:function(Q,te){var ge;te===void 0&&(te=""),(ge=Q.code<2e9&&1e9<Q.code?$t(Q.code,Q.msg):{code:Q.code,message:Q.msg})&&d.setAttributes({error:ge.code,message:ge.message+te}),d.end(),N({errorCode:Q.code})}}};var gc=rn;function rn(d,T){this.$t=d,this._dataReport=T,this.id="",this._debug=!1,this.appConfigEtag=-1,this.appConfigFetched=!1,this.requestList={},this.mode=G.MODE_ONLINE,this.connectState="connected",this.testNetPackageSize=!1,this.netGeoFencing={},this.svrDomains={},this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_netAppConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=X.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=Qi.modeNo}Object.defineProperty(Kn.prototype,"Qt",{get:function(){return this.Zt.reporter},enumerable:!1,configurable:!0}),Kn.prototype.init=function(d){var T=this,N=d.body.hearbeat_interval<3e3?3e3:d.body.hearbeat_interval;this._tryHeartbeatCount=0,this._heartbeatTimer&&clearTimeout(this._heartbeatTimer),this._loginHeartbeatTimer=setTimeout(function(){T.start(N)},N),this.initCount++},Kn.prototype.start=function(d){var T,N=this,Q=(this.$t.info(x+" call"),this.Qt.createSpan(ce.H,{key:jt.event,par:this._room.roomID},{key:""},Lr.event));this._room.isLogin()?3<++this._tryHeartbeatCount?(this.$t.error(x+" come to try limit"),this.Qt.setError(Q,Lr.error.HB_TIMEOUT),this.hbLogout(_e.HEARTBEAT_TIMEOUT),this.Qt.createSpan(ce.H,{key:jt.event,par:this._room.roomID},{key:""},"/zpush/hb_timeout").end()):(this._liveRoomHandler.heartBeat(T=function(te,ge){var Le=te.body&&te.body.err_code;te.header&&te.body?Le!==0&&(Le=$t(te.body.err_code||te.body.code,te.body.err_message||te.body.message),Q.setAttributes({error:Le.code,message:Le.message+te.body.err_code})):Q.setAttributes({error:(0<te.code?te:_e.ROOM_INNER_ERROR).code,message:te.msg||_e.ROOM_INNER_ERROR}),N._handleHeartbeatRsp(te,ge),((Le=te==null?void 0:te.body)==null?void 0:Le.err_code)===0&&Q.setAttributes({interval:Lr.interval((ge=te==null?void 0:te.body)==null?void 0:ge.hearbeat_interval),stream_seq:Lr.stream_seq((Le=te==null?void 0:te.body)==null?void 0:Le.stream_seq),server_user_seq:Lr.server_user_seq((ge=te==null?void 0:te.body)==null?void 0:ge.server_user_seq)}),Q.end()},T,this._room),this._heartbeatInterval=d,T=this._heartbeatInterval,2<=this.initCount?(T=Math.round(Math.random()*(this._heartbeatInterval+1)),this.initCount=1):T=this._heartbeatInterval,this._heartbeatTimer=setTimeout(function(){N.start(N._heartbeatInterval)},T),this.$t.info(x+" call success")):(this.$t.error(x+" state error"),this.Qt.setError(Q,Lr.error.NOT_LOGIN))},Kn.prototype._handleHeartbeatRsp=function(d,T){if(d.body&&d.body.err_code&&d.body.err_code!==0)return this.$t.error(I+" disconnect, server error=",d.body.err_code),d.body.err_code==1000000152?void this.hbLogout(_e.HEARTBEAT_TIMEOUT):void this.hbLogout(He(d.body.err_code));d.header&&d.body?((this._tryHeartbeatCount=0)!==d.body.hearbeat_interval&&(this._heartbeatInterval=d.body.hearbeat_interval,this._heartbeatInterval<3e3)&&(this._heartbeatInterval=3e3),this.heartbeatRspNotiFy(d,this._room.roomID),this.$t.info(I+" call success")):(this.$t.error(I+" disconnect, error=",JSON.stringify(d)+", seq = "+T),this.hbLogout(d))},Kn.prototype.heartbeatRspNotiFy=function(d,T){},Kn.prototype.hbLogout=function(d){},Kn.prototype.resetHeartbeat=function(){clearTimeout(this._heartbeatTimer),this._heartbeatTimer=null,clearTimeout(this._loginHeartbeatTimer),this._loginHeartbeatTimer=null,this._tryHeartbeatCount=0,this.initCount=0,this.$t.info("zm.hb.rst call success")};var ga=Kn;function Kn(d,T,N,Q,te,ge){this.$t=d,this.Zt=T,this._dataReport=N,this._liveRoomHandler=Q,this._room=te,this._service=ge,this._tryHeartbeatCount=0,this._heartbeatTimer=null,this._loginHeartbeatTimer=null,this.initCount=0}var va={code:1102026,msg:"cancel login"},ns="DISCONNECTED",os="CONNECTED",ya=(Object.defineProperty(ar.prototype,"_isUseNetAgent",{get:function(){return this.Zt.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(ar.prototype,"Qt",{get:function(){return this.Zt.reporter},enumerable:!1,configurable:!0}),ar.prototype.resetTokenTimer=function(d){var T=this;this.$t.info("zm.rm.rst  call: "+(d=2147483647<(d=(d-=3e4)<0?0:d)?2147483647:d)),this._tokenTimer&&clearTimeout(this._tokenTimer),this._tokenTimer=setTimeout(function(){T.Zt.actionListener("tokenWillExpire",T._room.roomID),T.Zt.actionListener("roomTokenWillExpire",T._room.roomID)},d)},ar.prototype._stopTokenTimer=function(){this._tokenTimer&&clearTimeout(this._tokenTimer),this._tokenTimer=null},ar.prototype.setRunState=function(d){this._room.runState!==d&&(this._room.lastRunState=this._room.runState,this._room.runState=d)},ar.prototype._resetTryLogin=function(){this._tryLoginTimer&&clearTimeout(this._tryLoginTimer),this._tryLoginTimer=null},ar.prototype._reportLogoutSpan=function(d){var T,N=this.Zt.isMultiRoom?Zi:"/switch/logout_user";N=this.Qt.createSpan(ce.H,{key:ki.event,par:this._room.roomID},{key:""},N),d&&this._isUseNetAgent&&this._liveRoomHandler.roomServicer.zPushSid==="0"&&(this._liveRoomHandler.roomServicer.zPushSid=(T=(T=(T=this._liveRoomHandler)==null?void 0:T.roomServicer)==null?void 0:T.switchSessionID)==null?void 0:T.toString()),this.updateTimes(),d=this._isUseNetAgent?d?(d=(T=this._liveRoomHandler)==null?void 0:T.roomServicer)==null?void 0:d.zPushSid:(T=(d=(T=this._liveRoomHandler)==null?void 0:T.roomServicer)==null?void 0:d.switchSessionID)==null?void 0:T.toString():void 0,N.setAttributes({room_id:ki.room_id((T=this._room)==null?void 0:T.roomID),room_sid_string:ki.room_sid_string((T=this._room)==null?void 0:T.roomSidString),liveroom_sid_string:Bi((T=this._room)==null?void 0:T.userSidString),sdk_zpush_sessionid_string:Ti(d),valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),N.end()},ar.prototype.resetRoom=function(d){var T,N=this;(d=(this.$t.info("zm.rm.rr call"),1<this.Zt.roomModulesList.length&&!d&&(this._room.isMulti=!0),this._resetTryLogin(),this._room.sessionExist&&this._room.runState!==pe.logout&&!this._room.isDisConnect()&&this._liveRoomHandler.logout(this._room,T=function(Q){N.handleLogoutRsp(Q,!N._room.isMulti)},T),this._reportLogoutSpan(d),this.setRunState(pe.logout),this._room.resetRoomSession(),this._room.resetUserSession(),this._room.isMulti||(this.Zt.userid="",this.$t.setSessionInfo(this.Zt.appid,this._room.roomID,this._room.userSidString,this.Zt.idName,this.Zt.nickName,this.Zt.sdKVersion),(T=this._liveRoomHandler)!=null&&T.reset()),this.resetRoomCallBack(),this.Zt.roomModulesList=this.Zt.roomModulesList.filter(function(Q){return Q!==N._room}),this.Zt.roomModulesList[0]))&&(d.isMulti=!1,d.runState!==pe.login)&&d.roomTryHandler&&(d.roomTryHandler.startMaxTime(),d.roomTryHandler.active()),this.Zt.isMultiRoom&&this.Zt.roomModulesList.length===0&&(this.Qt.createSpan(ce.H,{key:ki.event,par:this._room.roomID},{key:""},"/zpush/multi_logout_user").end(),this._liveRoomHandler.roomServicer.zPushSid="0"),this.$t.info("zm.rm.rr call success")},ar.prototype.resetRoomCallBack=function(){},ar.prototype.loginSuccessCallBack=function(d,T){},ar.prototype.handlePushKickout=function(d,T,N){var Q=this,te=(this.$t.info(H+"  call "+JSON.stringify(d)),function(ot,Ye){var gt={code:ot,message:"kickout reason = "+ot},Xe={code:63000005,message:"zpush token expired",name:ut};switch(ot){case 1:return{code:63000001,message:"zpush multiple login kickout",name:Je};case 2:return{code:63000002,message:"zpush manual kickout",name:"MANUAL_KICKOUT"};case 4:return Ye?Xe:{code:63000004,message:"zpush multiple login kickout",name:Je};case 5:if(!Ye)return Xe;default:gt.code=ot,gt.message="kickout reason = "+ot}return gt}(d.body.reason||((te=d.body)==null?void 0:te.kickout_reason),this._isUseNetAgent)),ge=this.Qt.createSpan(ce.H,{key:jt.event,par:this._room.roomID},{key:""},"/sdk/kickout"),Le=(this.updateTimes(),ge.setAttributes({error:(Le=_e[te.name||"ROOM_INNER_ERROR"])==null?void 0:Le.code,message:te.message,kickout_reason:Yr(((Le=d.body)==null?void 0:Le.reason)||((Le=d.body)==null?void 0:Le.kickout_reason)),need_relogin:Mo((Le=d==null?void 0:d.body)==null?void 0:Le.need_relogin),valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),ge.end(),this._room.roomTryHandler);Le?(Le.onactive=function(ot,Ye){Q.$t.info(H+" onactive"),Q.disconnectedHandle(Ye),Q.Zt.actionListener("_kickout",Ye)},d.body.need_relogin&&d.body.need_relogin==1?(this._room.resetUserSession(),Le.startMaxTime(),Le.active()):(this.setRunState(pe.logout),this.resetRoom(T),ge={},d&&d.body.custom_reason?ge.custom_kickout_message=d.body.custom_reason:te.name&&_e[te.name]&&(Le=d.body.reason||d.body.kickout_reason,ge.custom_kickout_message=_e[te.name].msg+"; kickout reason: "+Le),te.name&&_e[te.name]?this.disconnectedHandle(_e[te.name],{extendedData:JSON.stringify(ge),isKickout:!0}):this.disconnectedHandle(_e.ROOM_INNER_ERROR,{extendedData:JSON.stringify(ge),isKickout:!0}),this.Zt.actionListener("_kickout",{code:_e.MANUAL_KICKOUT.code,msg:_e.MANUAL_KICKOUT.msg+d.body.reason||d.body.kickout_reason}))):this.$t.info(H+" try handler no found")},ar.prototype.handleHbLogout=function(d){var T=this,N=this._room.roomTryHandler;N&&(N.onactive=function(Q,te){T.$t.warn(y+" onactive"),T.transError(te),T.disconnectedHandle(te)},[_e.HEARTBEAT_TIMEOUT,_e.SOCKET_CLOSE].includes(d)||[105,152,2001].includes(d==null?void 0:d.code)||d.msg.endsWith("1000002001")||d.msg.endsWith("1000000152")||d.msg.endsWith("1000000105")?(N.startMaxTime(),N.active()):[_e.TIMEOUT].includes(d)?this.$t.warn(y+" timeout"):(this.$t.warn(y+" unexpected error: ".concat(JSON.stringify(d))),N.stopMaxTime(),N.invalid(),this.resetRoom(),this.disconnectedHandle(d)))},ar.prototype.onDisconnect=function(d){var T=this,N=(this.$t.error(pt+" "+d.msg),d.code);(N=(Object(ye.f)(N)&&N==="Error.Network"||Object(ye.d)(N)&&(N<2e9&&1e9<N||N<1e6?$t(N,d.msg):d.msg),Ee(Mi,this.Zt.reportList),this._room.roomTryHandler))?(N.onactive=function(Q,te){T.$t.error(pt+" onactive"),te&&te.code!==0?(T.transError(te),T._roomStateHandle(ns,W.ReconnectFailed,te)):T._roomStateHandle(os,W.Reconnected,te)},N.startMaxTime(),N.active()):this.$t.error(pt+" try handler no found")},ar.prototype.onConnecting=function(d){this._roomStateHandle("CONNECTING",W.Logining,d)},ar.prototype.disconnectedHandle=function(d,T){var N;d&&d.code!==0?(this._stopTokenTimer(),N=T!=null&&T.isKickout?W.Kickout:W.ReconnectFailed,this.transError(d),this._roomStateHandle(ns,N,d,(T==null?void 0:T.extendedData)||d.msg)):this._roomStateHandle(os,W.Reconnected,d,T==null?void 0:T.extendedData)},ar.prototype.updateTimes=function(){this.updateValidTime(),this.updateTotalTime()},ar.prototype.updateValidTime=function(){this.ti&&(this.validTime=this.validTime+Date.now()-this.ti,this.ti=0)},ar.prototype.updateTotalTime=function(){this.ii&&(this.totalTime=Date.now()-this.ii)},ar.prototype._roomStateHandle=function(d,T,N,Q,te){var ge=this._room.roomID,Le=Date.now();if(!T||T!=W.Reconnecting||(this._reconectTimes++,this._reconectTimes!=1)){this.$t.info("zm.rm.scb "+d+" "+JSON.stringify(N)),[os,ns].includes(d)&&(this._reconectTimes=0,this.ni)&&this.brokenCounts++,d!==os&&this.updateTimes(),(T=T&&[W.LoginFailed,W.ReconnectFailed].includes(T)?(Ye=this._room.roomTryHandler)!=null&&Ye.loginRoomCallback.fail?W.LoginFailed:W.ReconnectFailed:T)&&[W.Logined,W.Reconnected].includes(T)&&((Ye=this._room.roomTryHandler)!=null&&Ye.loginRoomCallback.success?(T=W.Logined,this.ii=this.ii||Le):T=W.Reconnected,this.ni=!1,this.ti=Le),T&&[W.Logining,W.Reconnecting].includes(T)&&(T=(Ye=this._room.roomTryHandler)!=null&&Ye.loginRoomCallback.success?W.Logining:W.Reconnecting,this.ii)&&(this.ni=!0);var ot,Ye,gt=0;switch(T){case W.Reconnecting:ot=Gr,this.tempBrokenTime=new Date().getTime();break;case W.ReconnectFailed:ot=Sr;break;case W.Reconnected:ot=en,gt=new Date().getTime()-this.tempBrokenTime}this._room.lastRoomState=this._room.roomState,this._room.roomState=d,this._room.roomReasonState=T,this._room.roomState!==this._room.lastRoomState&&(this.Zt.actionListener("_roomStateUpdate",ge,d,N?N.code:0,Q,te),te||(Le=(N==null?void 0:N.code)||0,this.Zt.actionListener("roomStateUpdate",ge,d,Le=Le==va.code?0:Le,Q),this.Zt.actionListener("roomStateChanged",ge,T,Le,Q)),ot)&&(Ye=this.Qt.createSpan(ce.H,{key:jt.event,par:ge},{key:""},ot.event),T===W.Reconnected?Ye.setAttributes({room_broken_time:en.room_broken_time(gt)}):Ye.setAttributes({error:(N==null?void 0:N.code)||0,message:Q||""}),ot==Sr&&Ye.setAttributes({valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),Ye.end()),d===ns&&(this.ii=0,this.totalTime=0,this.validTime=0,this.brokenCounts=0)}},ar.prototype.transError=function(d){var T;this.$t.info("zm.rm.te "+JSON.stringify(d)),d.code!==0&&(d.code<2e9&&1e9<d.code||d.code<1e6)&&(T=it(d.code,this.Zt.useNetAgent))&&_e[T]&&(d.code=_e[T].code,d.msg=_e[T].msg)},ar.prototype.login=function(d,T,N,Q,te,ge,Le){var ot;this.$t.info(hi+" call:"+T),this.$t.remoteReport(hi+" call:"+N),this._room.isMulti||this.$t.setSessionInfo(this.Zt.appid,T,"",Q.userID,"",this.Zt.sdKVersion),te&&(ot=te.userUpdate,te=te.maxMemberCount,ot&&Object(ye.b)(ot)&&(this._room.userStateUpdate=ot),te)&&Object(ye.d)(te)&&(this._room.maxMemberCount=te),this.Zt.configOK?(this._room.runState!==pe.trylogin&&this.setRunState(pe.trylogin),this._room.isCancelLogin=!1,this._room.roomID=T,this._room.token=N,this._room.thirdToken=N,this.Zt.idName=Q.userID,this.Zt.nickName=Q.userName||Q.userID,this.loginCallback.success=ge,this.loginCallback.fail=Le,this.server=d,this.Qt.spanSetAttributes({key:Xt,bak_key:Mi,par:T},{server:this._isUseNetAgent?void 0:si(this.server)}),this.liveRoomLoginKey=this._room.isMulti?Ui:Ei,this.Qt.createSpan(ce.H,{key:Xt,bak_key:Mi,par:this._room.roomID},{key:this.liveRoomLoginKey.event,par:this._room.roomID},this.liveRoomLoginKey.event,!0),this._resetTryLogin(),this.onConnecting({code:0,msg:""}),this._tryLogin(d),this.$t.info(hi+" call success")):(this.$t.error(hi+" init sdk wrong"),Le(_e.INIT))},ar.prototype._tryLogin=function(d){var T,N=this;if(this._room.runState!==pe.trylogin)this.$t.error("zb.rh.tl state error");else{var Q;if(this.Zt.reportSeqList.login,this._isUseNetAgent)return this._room.isMulti&&this._room.isDisConnect()?void this.$t.warn(fe+" liveroom is not connected"):(Q=function(te,ge){N.handleLoginRsp(te,ge)},void((T=this._liveRoomHandler)!=null&&T.isUaConnect()?(this.Qt.spanSetAttributes({key:this.liveRoomLoginKey.event,par:(T=this._room)==null?void 0:T.roomID},{sdk_zpush_sessionid_string:(T=(T=(T=this._liveRoomHandler)==null?void 0:T.roomServicer)==null?void 0:T.switchSessionID)==null?void 0:T.toString()}),this._liveRoomHandler.login(this._room,Q,Q)):(this._tryLoginTimer=setTimeout(function(){N.$t.info(fe+" over time no response, login timeout"),N.loginCallback.fail&&N.loginCallback.fail(jt.error.LOGIN_TIMEOUT)},this._tryLoginInterval),this.$t.warn(fe+" ua is not connected"))));this._tryLoginTimer=setTimeout(function(){N.$t.info(fe+" over time no response, login timeout"),N.loginCallback.fail&&N.loginCallback.fail(jt.error.LOGIN_TIMEOUT)},this._tryLoginInterval),this.$t.info(fe+" call success")}},ar.prototype.handleLoginRsp=function(d,T){this.$t.info(Ce+" seq: "+T+" "+JSON.stringify(d)),this.Zt.reportSeqList.login,this._room.runState!==pe.trylogin?this._room.isCancelLogin?(this.handleLoginFail(va),this._room.isCancelLogin=!1):this.$t.error(Ce+" state error"):d.header&&d.body?d.header.seq!==T&&this._room.isMulti==0?this.$t.error(Ce+" in wrong seq, local=",T+"",",recv=",d.header.seq):d.body.err_code!==0?(this.$t.error(Ce+" server error=",d.body.err_code),this.handleLoginFail(d)):(this.$t.info(Ce+" call success."),this.handleLoginSuccess(d)):(this.$t.error(Ce+" "+JSON.stringify(d)),this.handleLoginFail(d))},ar.prototype.handleLoginFail=function(d){this._resetTryLogin();var T=jt.error.INNER_ERROR;d.header&&d.body?T=He(d.body.err_code):d.code&&d.msg&&(T=d),this.Qt.spanEnd({key:this.liveRoomLoginKey.event,par:this._room.roomID},{error:T.code,message:T.msg}),this.loginCallback.fail&&this.loginCallback.fail(T,!0)},ar.prototype.handleLoginSuccess=function(d){var T,N,Q=this,te=(this._room.checkRoomSession(d.body.room_session_id)&&(this._room.loginTime=Date.now()),this._room.lastRunState),ge=(this.setRunState(pe.login),this.Zt.userid=d.body.user_id,this._isUseNetAgent?(this._room.longRoomSid=d.body.room_session_id,this._room.longSid=d.body.session_id):(this._room.sessionID=d.body.session_id,this._room.roomSessionID=d.body.room_session_id),(ge={})[this._room.roomID]={room_sid_string:this._room.roomSidString},this.Qt.setPublicPros(ge),(ge=d==null?void 0:d.body)==null?void 0:ge.token_remain_time);this.Zt.configRoomAuth=0<ge,d.body.ret_timestamp&&["03","04"].includes(this._room.token.substring(0,2))&&(N=(T=new Date().getTime())-d.body.ret_timestamp,this.Zt.local_time_deviation=N<5e3?0:N,N=0<ge?1e3*ge:1e3*Et(this._room.token.substring(2))-(T-this.Zt.local_time_deviation),this.resetTokenTimer(N)),this._room.isMulti||this.$t.setSessionInfo(this.Zt.appid,this._room.roomID,this._room.userSidString,this.Zt.idName,this.Zt.nickName,this.Zt.sdKVersion),this.Qt.spanEnd({key:this.liveRoomLoginKey.event,par:this._room.roomID},{server:this._isUseNetAgent?void 0:si(this.server),room_id:(ge=this._room)==null?void 0:ge.roomID,room_sid_string:(T=this._room)==null?void 0:T.roomSidString,zpush_sessionid_string:this._isUseNetAgent&&(ge=(N=d==null?void 0:d.header)==null?void 0:N.session_id)!=null?ge.toString():void 0,liveroom_sid_string:(T=this._room)==null?void 0:T.userSidString}),this._resetTryLogin(),this.loginSuccessCallBack(te,d),this._roomStateHandle(os,W.Logined,{code:0,msg:""}),this.$t.makeZipLogSpaceUpload().catch(function(Le){Q.$t.error("zm.rm.lgsuc zip log upload error: "+JSON.stringify(Le))}),this.loginCallback.success&&this.loginCallback.success(!0)},ar.prototype.closeHandler=function(d){this.$t.error(et+" room websocket close "+JSON.stringify(d.code||d)),this._room.runState!==pe.logout?this._room.runState===pe.trylogin?(this._resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(d.code==1006?jt.error.LOGIN_TIMEOUT:d)):this._room.runState===pe.login&&(this.$t.info(et+" is called because of network broken"),this._resetTryLogin(),this.onDisconnect(jt.error.NETWORK_BROKEN)):this.$t.info(et+" onclose logout flow call websocket.close")},ar.prototype.logout=function(d,T){this.$t.info(lt+" call");var N={code:0,msg:""};this._room.runState===pe.logout?this.$t.warn("zb.rh.lo at logout"):(this._room.runState===pe.trylogin&&(this._room.isCancelLogin=!0,N=va),this.resetRoom(d),this._roomStateHandle(ns,W.Logout,N,void 0,T),this._stopTokenTimer(),this.$t.info(lt+" call success"))},ar.prototype.handleLogoutRsp=function(d,T){this.$t.info(lt+" result=",d.body&&d.body.err_code?d.body.err_code:"-1"),this._isUseNetAgent&&T&&(d=this._liveRoomHandler)!=null&&d.closeRequest()},ar);function ar(d,T,N,Q,te,ge){this.$t=d,this.Zt=T,this._dataReport=N,this._room=Q,this._liveRoomHandler=te,this._service=ge,this._tryLoginTimer=null,this._tryLoginCount=0,this._tryLoginInterval=1e4,this._tokenTimer=null,this._beforeExpire=30,this.server="",this.tempBrokenTime=0,this._reconectTimes=0,this.validTime=0,this.totalTime=0,this.brokenCounts=0,this.ti=0,this.ii=0,this.ni=!1,this.loginCallback={}}var _a=function(d,T,N){if(N||arguments.length===2)for(var Q,te=0,ge=T.length;te<ge;te++)!Q&&te in T||((Q=Q||Array.prototype.slice.call(T,0,te))[te]=T[te]);return d.concat(Q||Array.prototype.slice.call(T))},Hu=(vn.prototype.loginRsp=function(d,T){this._anchor_info=d.body.anchor_info||this._anchor_info,this._userListInterval=d.body.userlist_interval||this._userListInterval,this._userListMergeInterval=d.body.userlist_merge_timeout||this._userListMergeInterval,d.body.anchor_info&&(this.Zt.actionListener("getAnchorInfo",d.body.anchor_info.anchor_id_name,d.body.anchor_info.anchor_nick_name),this.Zt.actionListener("_getAnchorInfo",d.body.anchor_info.anchor_id_name,d.body.anchor_info.anchor_nick_name)),d.body.online_count&&this.Zt.actionListener("roomOnlineUserCountUpdate",this._room.roomID,d.body.online_count),this.$t.info("zm.us.lgr  userStateUpdate "+this._room.userStateUpdate),this._room.userStateUpdate&&this.fetchUserList(T)},vn.prototype.patchUserList=function(d){var T=this;d.body.server_user_seq!==this._userSeq&&this._room.userStateUpdate&&!this._userSeqMergeMap&&(this.$t.info("zm.us.pt call update user "+this._userSeq+" server "+d.body.server_user_seq),this._userSeqMergeMap||(this._userSeqMergeMap={}),this._userSeqMergeTimer&&clearTimeout(this._userSeqMergeTimer),this._userSeqMergeTimer=setTimeout(function(){T.handleMergeTimeout()},this._userListMergeInterval)),this._minUserSeq=d.body.server_user_seq,d.body.online_count!=null&&d.body.online_count!=0&&this.Zt.actionListener("roomOnlineUserCountUpdate",this._room.roomID,d.body.online_count)},vn.prototype.resetUserHandler=function(){this._userQuerying=!1,this._lastUserQueryTime=0,this._userTempList=[],this._userSeq=0,this._minUserSeq=0,this._userList=void 0,this._userSeqMergeMap={},this._userSeqMergeTimer=void 0,this._userQueryTimer=void 0,this._userListInterval=3e4,this._userListMergeInterval=5e3,this._anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},vn.prototype.fetchUserList=function(d){this._userQuerying?this.$t.warn("zm.us.ftu is already querying"):(this._userQuerying=!0,this._userTempList=[],this.fetchUserListWithPage(0,d||0),this.$t.info("zm.us.ftu the first time call"))},vn.prototype.fetchUserListWithPage=function(d,T){function N(Le){Q.handleFetchUserListRsp(Le,T)}var Q=this,te={user_index:d,sort_type:0},ge=Zn;(ge=(this.Zt.reporter.createSpan(ce.H,{key:jt.event,par:this._room.roomID},{key:ge.event,par:this._room.roomID},ge.event,!0).setAttribute("user_index",ge.user_index(d)),this.Zt.useNetAgent?this._liveRoomHandler:this._service))!=null&&ge.fetchUserList(te,N,N,this._room)},vn.prototype.handleFetchUserListRsp=function(d,T){var N=this;if(this.Zt.reporter.spanEnd({key:Zn.event,par:this._room.roomID},{error:((Q=d==null?void 0:d.body)==null?void 0:Q.err_code)||(d==null?void 0:d.code),message:((Q=d==null?void 0:d.body)==null?void 0:Q.err_message)||(d==null?void 0:d.msg)}),d.body&&d.body.err_code!=0)this._userQuerying=!1,this._lastUserQueryTime=Date.now()+this._userListInterval,this.$t.info(B+" fetch error "+d.body.err_code);else if(d.header&&d.body)if(this._room.userStateUpdate){this._userTempList=_a(_a([],this._userTempList,!0),d.body.user_baseinfos,!0);var Q=d.body.ret_user_index;if(Q!=d.body.server_user_index)this.$t.info(B+" fetch another page"),this.fetchUserListWithPage(Q+1,T);else{this._userSeq=d.body.server_user_seq;for(var te=[],ge=[],Le=0;Le<this._userTempList.length;Le++){var ot={userID:this._userTempList[Le].id_name,userName:this._userTempList[Le].nick_name,role:this._userTempList[Le].role};ot.role!==4&&(te.push(ot),ge.push({idName:this._userTempList[Le].id_name,nickName:this._userTempList[Le].nick_name,role:this._userTempList[Le].role}))}if(this.Zt.actionListener("_getTotalUserList",this._room.roomID,ge),T==pe.login){if(this._userList){Q=this.$t;var Ye=this._userList,gt=te;T=function(fi,Ci){fi.length!==0&&N.onUserStateUpdate(N._room.roomID,"ADD",fi),Ci.length!==0&&N.onUserStateUpdate(N._room.roomID,"DELETE",Ci)},Q.debug("msl.0 call");var Xe=[],Ot=[];gt=gt||[];for(var mi=0;mi<gt.length;mi++){for(var _i=!1,Yt=0;Yt<Ye.length;Yt++)if(gt[mi].userID===Ye[Yt].userID){_i=!0;break}_i||Xe.push(gt[mi])}for(var ni=0;ni<Ye.length;ni++){_i=!1;for(var pi=0;pi<gt.length;pi++)if(Ye[ni].userID===gt[pi].userID){_i=!0;break}_i||Ot.push(Ye[ni])}for(Ye.splice(0),mi=0;mi<gt.length;mi++)Ye.push(Ye[mi]);T(Xe,Ot),Q.debug("msl.0 call success")}this._userList=te}else(this._userList=te).length!==0&&this.onUserStateUpdate(this._room.roomID,"ADD",te);this._userQuerying=!1,this._lastUserQueryTime=Date.now()+this._userListInterval,this._userTempList=[],this.$t.info(B+" call success user_list "+te+", count: "+te.length+", seq: "+this._userSeq)}}else this.$t.info(B+" not update");else this._userQuerying=!1,this._lastUserQueryTime=Date.now()+this._userListInterval,this.$t.info(B+" fetch error "+d)},vn.prototype.handlePushUserStateUpdateMsg=function(d){if(this.$t.info(me+" call"),this._room.userStateUpdate)if(this._userSeq===d.body.user_list_seq)this.$t.warn(me+" user_list_seq is the same with local seq");else if(this._userSeq+d.body.user_actions.length!==d.body.user_list_seq)this.mergeUserByUserSeq(d.body.user_list_seq,d.body.user_actions);else{this._userSeq=d.body.user_list_seq;for(var T=[],N=0;N<d.body.user_actions.length;N++){var Q={action:d.body.user_actions[N].Action,idName:d.body.user_actions[N].IdName,nickName:d.body.user_actions[N].NickName,role:d.body.user_actions[N].Role,loginTime:d.body.user_actions[N].LoginTime};Q.role!==4&&T.push(Q)}this.Zt.actionListener("_userStateUpdate",d.body.room_id,T);var te=[],ge=[];T.forEach(function(Le){Le.action==1?te.push({userID:Le.idName,userName:Le.nickName,role:Le.role}):Le.action==2&&ge.push({userID:Le.idName,userName:Le.nickName,role:Le.role})}),this._userList&&(this._userList=this._userList.concat(te).filter(function(Le){return!ge.some(function(ot){return ot.userID==Le.userID})})),te.length!==0&&this.onUserStateUpdate(d.body.room_id,"ADD",te),ge.length!==0&&this.onUserStateUpdate(d.body.room_id,"DELETE",ge),this.$t.info(me+" call success")}else this.$t.info(me+" userStateUpdate is false")},vn.prototype.onUserStateUpdate=function(d,T,N){var Q=this;N=N.filter(function(te){return te.userID!==Q.Zt.idName}),N.length!=0&&(N=N.map(function(te){return{userID:te.userID,userName:te.userName}}),this.Zt.actionListener("roomUserUpdate",d,T,N))},vn.prototype.mergeUserByUserSeq=function(d,T){var N=this;this._userSeqMergeMap||(this.$t.warn("zm.us.mg new merge userlist "+this._userSeq+" server "+d),this._userSeqMergeMap={},this._userSeqMergeTimer&&clearTimeout(this._userSeqMergeTimer),this._userSeqMergeTimer=setTimeout(function(){N.handleMergeTimeout()},this._userListMergeInterval)),this._userSeqMergeMap[d]=T,this.$t.warn("zm.us.mg  merge userlist "+this._userSeq+" server "+d+" userlist "+T.length)},vn.prototype.mergeUser=function(d){var T=this,N=(this.$t.info("zm.us.mg merge userlist "+this._userSeq+" userSeqList "+d.join(",")),this._userSeq=d[d.length-1],this._lastUserQueryTime=Date.now()+this._userListInterval,{}),Q=((d=(d.forEach(function(ge){T._userSeqMergeMap&&T._userSeqMergeMap[ge].forEach(function(Le){N[Le.IdName]=Le})}),this._userSeqMergeMap=null,Object.values(N).map(function(ge){return{action:ge.Action,idName:ge.IdName,nickName:ge.NickName,role:ge.Role,loginTime:ge.LoginTime?String(ge.LoginTime):""}}).filter(function(ge){return ge.role!==4}))).sort(function(ge,Le){return ge.loginTime.localeCompare(Le.loginTime)}),[]),te=[];d.forEach(function(ge){ge.action==1?Q.push({userID:ge.idName,userName:ge.nickName,role:ge.role}):ge.action==2&&te.push({userID:ge.idName,userName:ge.nickName,role:ge.role})}),this._userList=this._userList&&this._userList.concat(Q).filter(function(ge){return!te.some(function(Le){return Le.userID==ge.userID})}),Q.length!==0&&this.onUserStateUpdate(this._room.roomID,"ADD",Q),te.length!==0&&this.onUserStateUpdate(this._room.roomID,"DELETE",te),this.Zt.actionListener("_userStateUpdate",this._room.roomID,d)},vn.prototype.handleMergeTimeout=function(){var d,T=this,N=Object.keys(this._userSeqMergeMap).map(function(Q){return+Q}).sort(function(Q,te){return Q-te});N[N.length-1]-N[0]+1===N.length||N[N.length-1]>=this._minUserSeq?this.mergeUser(N):(this._userSeqMergeMap=null,d=this._lastUserQueryTime-Date.now(),this.$t.info("zm.us.mto  fetch merge userlist "+this._userSeq+" userSeqList "+N.join(",")+" wait "+d),0<d?(this._userQueryTimer&&clearTimeout(this._userQueryTimer),this._userQueryTimer=setTimeout(function(){T.fetchUserList()},d)):this.fetchUserList())},vn);function vn(d,T,N,Q,te,ge){this.$t=d,this.Zt=T,this._dataReport=N,this._liveRoomHandler=Q,this._room=te,this._service=ge,this._userQuerying=!1,this._userTempList=[],this._userSeq=0,this._minUserSeq=0,this._userList=[],this._userSeqMergeMap=null,this._userListInterval=3e4,this._userListMergeInterval=5e3,this._anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}Object.defineProperty(hr.prototype,"logger",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"stateCenter",{get:function(){return this.Zt},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"liveRoomHandler",{get:function(){return this._liveRoomHandler},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"_isUseNetAgent",{get:function(){return this.Zt.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"sessionExist",{get:function(){return this.longSid!==null||this.sessionID!=="0"},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"roomSidString",{get:function(){return this.longRoomSid?this.longRoomSid.toString():"0"},enumerable:!1,configurable:!0}),Object.defineProperty(hr.prototype,"userSidString",{get:function(){return this.longSid?this.longSid.toString():"0"},enumerable:!1,configurable:!0}),hr.prototype.initMessageHandler=function(){},hr.prototype.initLiveHandler=function(){},hr.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},hr.prototype.bindHeatBeatHandler=function(){var d=this;this.heartBeatHandler.hbLogout=function(T){d.roomHandler.handleHbLogout(T)},this.heartBeatHandler.heartbeatRspNotiFy=function(T,N){d.messageHandler&&d.messageHandler.loginRsp(T),d.userHandler.patchUserList(T),d._HBResponse(T,N)}},hr.prototype.bindRoomHandler=function(){var d=this;this.roomHandler.loginSuccessCallBack=function(T,N){d.$t.info("zm.lrm.brh login suc "+T),d.heartBeatHandler.init(N),d._isUseNetAgent?d._liveRoomHandler.startCheck():d.service&&(d.service.stopCheck(),d.service.startCheck()),d.userHandler.loginRsp(N,T),d.messageHandler&&d.messageHandler.loginRsp(N),d.isMulti||d._handleMultiRoom(),d._roomLoginResponse(N)},this.roomHandler.resetRoomCallBack=function(){d.heartBeatHandler.resetHeartbeat(),d.liveHandler&&d.liveHandler.resetLiveHandler(),d.messageHandler&&d.messageHandler.resetMessageInfo(),d._isUseNetAgent&&d._liveRoomHandler&&d._liveRoomHandler.stopCheck(),d.userHandler.resetUserHandler(),d.roomTryHandler&&(d.roomTryHandler.invalid(),d.roomTryHandler.stopMaxTime())}},hr.prototype.bindUserHandler=function(){},hr.prototype.bindMessageHandler=function(){},hr.prototype.bindLiveHandler=function(){},hr.prototype._HBResponse=function(d,T){this.Zt.actionListener("HBResponse",d,T)},hr.prototype._roomLoginResponse=function(d){this.Zt.actionListener("roomLoginResponse",d)},hr.prototype.checkRoomSession=function(d){return this._isUseNetAgent?this.longRoomSid!==null&&this.longRoomSid.eq(d):this.roomSessionID===d},hr.prototype._handleMultiRoom=function(){var d=this;this.Zt.roomModulesList.forEach(function(T){T.runState!==pe.login&&T.roomTryHandler&&T.isMulti==1&&(T.roomTryHandler.onactive=function(N,Q){var te;Q&&Q.code!==0?(Q.code!==0&&(te=it(Q.code,d._isUseNetAgent))&&_e[te]&&(Q=_e[te]),T.roomHandler._roomStateHandle("DISCONNECTED",W.ReconnectFailed,Q,Q.msg)):T.roomHandler._roomStateHandle("CONNECTED",W.Reconnected,Q)},T.roomTryHandler.startMaxTime(),T.roomTryHandler.active())})},hr.prototype.isLogin=function(){return this.runState===pe.login},hr.prototype.isLogout=function(){return this.runState===pe.logout},hr.prototype.isTryLogin=function(){return this.runState===pe.trylogin},hr.prototype.isDisConnect=function(){return(this._isUseNetAgent?this._liveRoomHandler:this.service).isDisConnect()},hr.prototype.retryConnect=function(){this.$t.info("zm.lrm.rc call"),this._isUseNetAgent&&(this.resetSessionInfo(),this._liveRoomHandler.closeRequest())},hr.prototype.retryRoom=function(){this.$t.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.resetRoomSession(),this.resetUserSession(),this.roomTryHandler.active(!0))},hr.prototype.resetSessionInfo=function(){var d;this.$t.info("zm.lrm.rsi call"),this.resetRoomSession(),this.resetUserSession(),(d=this._liveRoomHandler)!=null&&d.reset()},hr.prototype.resetRoomSession=function(){this.roomSessionID="0",this.longRoomSid=null},hr.prototype.resetUserSession=function(){this.sessionID="0",this.longSid=null};var vc=hr;function hr(d,T,N,Q,te,ge,Le){this.roomID=d,this.Zt=T,this.$t=N,this.dataReport=Q,this.rtm=te,this._liveRoomHandler=ge,this.service=Le,this.runState=pe.logout,this.lastRunState=pe.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomReasonState=W.Logout,this.roomSessionID="0",this.sessionID="0",this.longSid=null,this.longRoomSid=null,this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.userStateUpdate=!1,this.maxMemberCount=0,this.roomName="",this.isCancelLogin=!1,this.roomHandler=new ya(this.$t,this.Zt,this.dataReport,this,ge,this.service),this.heartBeatHandler=new ga(this.$t,this.Zt,this.dataReport,this._liveRoomHandler,this,this.service),this.userHandler=new Hu(this.$t,this.Zt,this.dataReport,this._liveRoomHandler,this,this.service),this.initMessageHandler(),this.initLiveHandler(),this.init()}var yc=function(){},ba=(Object.defineProperty(Ki.prototype,"Qt",{get:function(){return this.Zt.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(Ki.prototype,"logger",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(Ki.prototype,"stateCenter",{get:function(){return this.Zt},enumerable:!1,configurable:!0}),Ki.prototype.checkResponse=function(d){return!1},Ki.prototype.handleSendCommandMsgRsp=function(d){},Ki.prototype.onPush=function(){},Ki.prototype.handlePushKickout=function(d){},Ki.prototype.handlePushCustomMsg=function(d){},Ki.prototype.handlePushRoomMsg=function(d){},Ki.prototype.handlePushUserStateUpdateMsg=function(d){},Ki.prototype.handlePushMergeMsg=function(d){},Ki.prototype.handlePushTransMsg=function(d){},Ki.prototype.handleBigImMsgRsp=function(d){},Ki.prototype.handlePushSignalMsg=function(d){},Ki.prototype.handlePushTokenExpire=function(d){},Ki.prototype.closeHandler=function(d){},Ki.prototype.openHandler=function(d){},Ki.prototype.errorHandler=function(d){},Ki.prototype.getHeader=function(d,T,N,Q){return{Protocol:"req",cmd:d,appid:this.Zt.appid,seq:++this.cmdSeq,user_id:this.Zt.userid,session_id:T||"",room_id:N||"",room_session_id:Q||"",biz_version:this.Zt.bizVersion||""}},Ki.prototype.startCheck=function(){},Ki.prototype.stopCheck=function(){},Ki.prototype.isDisConnect=function(){return!1},Ki.prototype.createSocket=function(d){},Ki.prototype.closeSocket=function(){},Ki.prototype.sendMessage=function(d,T,N,Q,te,ge){return 0},Ki.prototype.on=function(d,T){},Ki.prototype.login=function(d,T,N){return-1},Ki.prototype.logout=function(d,T,N){return-1},Ki.prototype.heartBeat=function(d,T,N){return-1},Ki.prototype.fetchUserList=function(d,T,N,Q){return this.sendMessage("user_list",d,T,N,void 0,Q)},Ki.prototype.fetchUserListV2=function(d,T,N,Q){return this.sendMessage("user_list_v2",d,T,N,void 0,Q)},Ki.prototype.fetchReliableMessage=function(d,T,N,Q){return this.sendMessage("trans_fetch",d,T,N,void 0,Q)},Ki.prototype.sendReliableMessage=function(d,T,N,Q){return this.sendMessage("trans",d,T,N,void 0,Q)},Ki.prototype.sendRoomMsg=function(d,T,N,Q){return this.sendMessage("im_chat",d,T,N,void 0,Q)},Ki.prototype.sendCustomCommand=function(d,T,N,Q){return this.sendMessage("custommsg",d,T,N,void 0,Q)},Ki.prototype.sendBigRoomMessage=function(d,T,N,Q){return this.sendMessage("bigim_chat",d,T,N,void 0,Q)},Ki.prototype.sendRelayMessage=function(d,T,N,Q){return this.sendMessage("relay",d,T,N,void 0,Q)},Ki.prototype.sendSignalCmd=function(d,T,N,Q){return this.sendMessage("signal",d,T,N,void 0,Q)},Ki.prototype.sendPB=function(d){return!1},Ki);function Ki(d,T,N){this.Zt=d,this.$t=T,this.rtm=N,this.cmdSeq=0,this.responseRouters={},this.service=new yc(this.Zt.ENV)}Sa.prototype.setSetting=function(d,T){var N,Q=Array.isArray(T)&&0<T.length;for(N in d){var te,ge=d[N];if(Object(ye.d)(ge.ctrlmode)&&[1,2].includes(ge.ctrlmode))this.setting[N]=ge,this.setting[N+"_ctrlmode"]=ge.ctrlmode;else for(var Le in ge)Le.endsWith("_ctrlmode")||Q&&T.indexOf(Le)==-1||((te=ge[Le+"_ctrlmode"])===1||te===2?this.setting[Le]=ge[Le]:this.defaultSetting[Le]&&(this.setting[Le]=this.defaultSetting[Le]),Object(ye.d)(te)&&(this.setting[Le+"_ctrlmode"]=ge[Le+"_ctrlmode"]))}},Sa.prototype.getSetting=function(d,T){return(T=T!==void 0&&T)&&this.setting[d+"_ctrlmode"]!=2?void 0:this.setting[d]};var qu=Sa;function Sa(){this.defaultSetting={remote_log_level:"info",zip_log:0,detaillog_domain:""},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}const Pr=q(3);C=q(1),Pr.util.Long=C,Pr.util.Long.fromBits=Pr.util.Long?Pr.util.Long.fromBits:function(){return 0};const yn=Pr.roots,Ns=Pr.types?Pr.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},nr=Pr.types?Pr.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0};var Kt=Object.keys(Ns),Kr={$:function(d){return Kr[d]?Kr[d].call(this):yn[d].decode?yn[d].decode(this,this.uint32()):Kr.$.call(this,"int32")}},Dt={$:function(d,T,N){var Q=Ns[d];return Q===void 0?yn[d].encode?(this.uint32((N<<3|2)>>0).fork(),yn[d].encode(T,this).ldelim()):Dt.$.call(this,"int32",T,N):Dt[d].call(this.uint32(N<<3|Q),T)}};for(let d=0;d<Kt.length;d++)Kr[Kt[d]]=Pr.Reader.prototype[Kt[d]],Dt[Kt[d]]=Pr.Writer.prototype[Kt[d]];(function d(T,N,Q,te){for(let Le=0,ot=Object.keys(T);Le<ot.length;Le++){var ge=ot[Le];if(T[ge].$m&&Object.keys(T[ge].$m).every(function(Ye){return Number(Ye)})){if(Q[ge])throw Error(`nested type ${Q}.${ge} has already exist`);Q[ge]=function(Ye,gt){function Xe(Yt){for(const pi in Ye){var ni=Ye[pi];ni[1].charAt(0)==="{"?this[ni[0]]={}:ni[1].charAt(0)!=="["&&ni[1].charAt(0)!=="<"||(this[ni[0]]=[])}if(Yt)for(let pi=Object.keys(Yt),fi=0;fi<pi.length;++fi)Yt[pi[fi]]!=null&&(this[pi[fi]]=Yt[pi[fi]])}var Ot={};for(const Yt in Ye){var mi=Ye[Yt],_i=mi[1];_i.charAt(0)==="{"?(Xe.prototype[mi[0]]=Pr.util.emptyObject,Ot[_i]={$m:_i.substring(1).split(",").map(function(ni,pi){return["$"+(pi+1),ni,null]}).reduce(function(ni,pi,fi){return ni[fi+1]=pi,ni},{})}):_i.charAt(0)==="["||_i.charAt(0)==="<"?Xe.prototype[mi[0]]=Pr.util.emptyArray:_i==="bytes"?Xe.prototype[mi[0]]=Pr.util.newBuffer([]):mi[2]&&mi[2].hasOwnProperty("low")&&mi[2].hasOwnProperty("high")?Xe.prototype[mi[0]]=Pr.util.Long.fromBits(mi[2].low,mi[2].high,mi[2].unsigned):Xe.prototype[mi[0]]=mi[2]}return Xe.create=function(Yt){return new Xe(Yt)},Xe.decode=function(Yt,ni){Yt instanceof Pr.Reader||(Yt=Pr.Reader.create(Yt));for(var pi=ni===void 0?Yt.len:Yt.pos+ni,fi=new Xe;Yt.pos<pi;){var Ci=Yt.uint32(),Wi=Ci>>>3;if(0<Wi&&Ye[Wi]){var Ji=Ye[Wi][0];let $i=Ye[Wi][1];if($i.charAt(0)==="{")fi[Ji]===Pr.util.emptyObject&&(fi[Ji]={}),Wi=Xe.$namespace[$i].decode(Yt,Yt.uint32()),fi[Ji][Wi.$1]=Wi.$2;else if($i.charAt(0)==="["||$i.charAt(0)==="<")if($i=$i.substring(1),fi[Ji]&&fi[Ji].length||(fi[Ji]=[]),$i=(Wi=!Kr[$i]&&!yn[$i].decode)?"int32":$i,nr[$i]!==void 0&&(7&Ci)==2)for(var vr=Yt.uint32()+Yt.pos;Yt.pos<vr;)fi[Ji].push(Kr.$.call(Yt,$i));else fi[Ji].push(Kr.$.call(Yt,$i));else fi[Ji]=Kr.$.call(Yt,$i)}else Yt.skipType(7&Ci)}return fi},Xe.encode=function(Yt,ni){ni=ni||Pr.Writer.create();for(const vr in Ye){var pi=Ye[vr][0];let $i=Ye[vr][1];if($i.charAt(0)==="{"){if(Yt[pi]!=null&&Yt.hasOwnProperty(pi))for(var fi=0,Ci=Object.keys(Yt[pi]);fi<Ci.length;++fi)ni.uint32((vr<<3|2)>>0).fork(),Xe.$namespace[$i].encode({$1:Ci[fi],$2:Yt[pi][Ci[fi]]},ni).ldelim()}else if($i.charAt(0)==="["||$i.charAt(0)==="<"){var Wi=$i.charAt(0)==="<",Ji=($i=$i.substring(1),Yt[pi]);if(Ji!=null&&Ji.length)if($i=Ns[$i]===void 0&&!yn[$i].encode?"int32":$i,Wi&&nr[$i]!==void 0){for(ni.uint32((vr<<3|2)>>0).fork(),fi=0;fi<Ji.length;fi++)Dt[$i].call(ni,Ji[fi]);ni.ldelim()}else for(fi=0;fi<Ji.length;fi++)Dt.$.call(ni,$i,Ji[fi],vr)}else Yt[pi]!=null&&Yt.hasOwnProperty(pi)&&Dt.$.call(ni,$i,Yt[pi],vr)}return ni},Object.keys(Ot).length&&(Xe.$namespace=d(Ot,N+"."+gt,Xe.$namespace||{},!0)),Xe}(T[ge].$m,ge)}else T[ge].$s?Q[ge]=function(Ye,gt){function Xe(Ot,mi,_i){Pr.rpc.Service.call(this,Ot,mi,_i)}return((Xe.prototype=Object.create(Pr.rpc.Service.prototype)).constructor=Xe).create=function(Ot,mi,_i){return new Xe(Ot,mi,_i)},Object.keys(Ye).forEach(function(Ot){const mi=Ye[Ot];function _i(Yt,ni){return this.rpcCall(_i,yn[mi[0]],yn[mi[1]],Yt,ni)}Object.defineProperty(_i,"name",{value:Ot}),Object.defineProperty(_i,"path",{value:N+"."+gt}),Xe.prototype[Ot]=_i}),Xe}(T[ge].$s,ge):T[ge].$e&&Object.values(T[ge].$e).every(function(Ye){return Number(Ye)===Ye})&&(Q[ge]=function(Ye){var gt=Object.keys(Ye),Xe={};for(let Ot=0;Ot<gt.length;Ot++)Xe[Xe[gt[Ot]]=Ye[gt[Ot]]]=gt[Ot];return Xe}(T[ge].$e));Q[ge]&&!te&&(yn[N+"."+ge]=Q[ge]),delete T[ge].$m,delete T[ge].$s,delete T[ge].$e,Q[ge]=d(T[ge],N?N+"."+ge:ge,Q[ge]||{})}return Q})({liveroom:{liveroom_cs_v3:{AddStreamReq:{$m:{1:["stream_id","bytes",[]],2:["stream_title","bytes",[]],3:["stream_type","uint32",0],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["third_token","bytes",[]],8:["censor_mode","uint32",0],9:["need_gather","uint32",0]}},AddStreamRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_sid","string",""],4:["stream_ver","uint32",0],5:["stream_nid","uint32",0],6:["token_remain_time","uint32",0]}},AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},BigImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","bytes",[]],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}]}},CommonRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},DeleteStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["client_req_seq","uint32",0]}},DeleteStreamRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},EnterRoomReq:{$m:{1:["net_type","uint32",0],2:["conn_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["third_token","bytes",[]],7:["room_create_flag","uint32",0],8:["user_state_flag","uint32",0],9:["user_count_limit","uint32",0],10:["relate_service","string",""],11:["need_gather_stream","uint32",0],12:["callback_data","bytes",[]],13:["service_flags","uint32",0],14:["license_token","bytes",[]]}},EnterRoomRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["user_id","uint64",{low:0,high:0,unsigned:!0}],5:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],6:["big_im_time_window","uint32",0],7:["liveroom_hb_interval","uint32",0],8:["liveroom_hb_timeout","uint32",0],9:["online_count","uint32",0],10:["anchor_info","liveroom.liveroom_cs_v3.AnchorInfo",null],11:["userlist_merge_timeout","uint32",0],12:["userlist_interval","uint32",0],13:["token_remain_time","uint32",0],14:["trans_list_seq","uint32",0],15:["trans_channel_list","<liveroom.liveroom_cs_v3.TransChannel",null],16:["stream_count","uint32",0],17:["stream_list_seq","uint32",0],18:["stream_info_list","<liveroom.liveroom_cs_v3.StreamInfo",null],19:["stream_fetch_flag","uint32",0],20:["stream_list_push_merge_timeout","uint32",0],21:["stream_list_hb_merge_timeout","uint32",0],22:["relate_result_list","<liveroom.liveroom_cs_v3.RelateResult",null],23:["gather_list_seq","uint32",0],24:["gather_info_list","<liveroom.liveroom_cs_v3.GatherInfo",null]}},EnumSignalTransmitResult:{$e:{ok:0,version_err:1}},GatherInfo:{$m:{1:["gather_id","string",""]}},GetGatherListReq:{$m:{}},GetGatherListRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["gather_list_seq","uint32",0],3:["gather_info_list","<liveroom.liveroom_cs_v3.GatherInfo",null]}},GetImReq:{$m:{1:["msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["sort_type","uint32",0],3:["msg_count","uint32",0]}},GetImRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],3:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<liveroom.liveroom_cs_v3.GetImRspImData",null]}},GetImRspImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},GetStreamListReq:{$m:{}},GetStreamListRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["stream_list_seq","uint32",0],3:["stream_info_list","<liveroom.liveroom_cs_v3.StreamInfo",null],4:["stream_refresh","uint32",0]}},GetTransReq:{$m:{1:["trans_channel","bytes",[]],2:["trans_list","<liveroom.liveroom_cs_v3.GetTransReqTransData",null]}},GetTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetTransRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["trans_list_seq","uint32",0],4:["trans_list","<liveroom.liveroom_cs_v3.GetTransRspTransData",null]}},GetTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},GetUserlistReq:{$m:{1:["sort_type","uint32",0],2:["user_index","uint32",0]}},GetUserlistRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["server_user_seq","uint64",{low:0,high:0,unsigned:!0}],3:["server_user_index","int64",{low:0,high:0,unsigned:!1}],4:["ret_user_index","int64",{low:0,high:0,unsigned:!1}],5:["user_base_info_list","<liveroom.liveroom_cs_v3.UserBaseInfo",null]}},GetUserTransReq:{$m:{1:["trans_channel","bytes",[]],2:["user_trans_list","<liveroom.liveroom_cs_v3.GetUserTransReqTransData",null]}},GetUserTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetUserTransRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["user_trans_list","<liveroom.liveroom_cs_v3.GetUserTransRspTransData",null]}},GetUserTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},HbReq:{$m:{}},HbRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],3:["hb_interval","uint32",0],4:["hb_timeout","uint32",0],5:["stream_seq","uint32",0],6:["user_seq","int64",{low:0,high:0,unsigned:!1}],7:["online_count","uint32",0],8:["big_im_time_window","uint32",0],9:["trans_channel_list","<liveroom.liveroom_cs_v3.TransChannel",null],10:["user_trans_channel_list","<liveroom.liveroom_cs_v3.TransChannel",null],11:["stream_refresh","uint32",0],12:["trans_list_seq","uint32",0],13:["gather_list_seq","uint32",0]}},ImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},LiveroomSessionInfo:{$m:{1:["RoomId","bytes",[]],2:["UserSessionId","uint64",{low:0,high:0,unsigned:!0}],3:["RoomSessionId","uint64",{low:0,high:0,unsigned:!0}],4:["Role","uint32",0]}},PushBigIm:{$m:{1:["msg_list","<liveroom.liveroom_cs_v3.BigImData",null]}},PushIm:{$m:{1:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<liveroom.liveroom_cs_v3.ImData",null]}},PushStartGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStopGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStream:{$m:{1:["stream_seq","uint32",0],2:["stream_info_list","<liveroom.liveroom_cs_v3.PushStreamInfo",null]}},PushStreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["stream_src","uint32",0],9:["stream_state","uint32",0],10:["stream_type","uint32",0],11:["stream_nid","uint32",0],12:["extra_info","bytes",[]],13:["create_time","int64",{low:0,high:0,unsigned:!1}],14:["close_type","uint32",0],15:["need_gather","uint32",0]}},PushTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_type","bytes",[]],5:["trans_data","bytes",[]],6:["trans_seq","uint32",0],7:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],8:["trans_channel","bytes",[]],9:["trans_list_seq","uint32",0]}},PushUserInfoUpdated:{$m:{1:["server_user_seq","int64",{low:0,high:0,unsigned:!1}],2:["user_action_list","<liveroom.liveroom_cs_v3.UserAction",null]}},PushUserKickout:{$m:{1:["id_name","bytes",[]],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["kickout_reason","int32",0],4:["custom_reason","bytes",[]]}},PushUserLogReport:{$m:{}},PushUserTokenExpire:{$m:{1:["token","string",""],2:["stop_stream_info","liveroom.liveroom_cs_v3.StopStream",null]}},PushUserTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_channel","bytes",[]],6:["trans_seq_list","<liveroom.liveroom_cs_v3.PushUserTransInfo",null]}},PushUserTransInfo:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_seq","uint32",0]}},QuitRoomReq:{$m:{}},QuitRoomRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},RenewTokenReq:{$m:{1:["token","string",""]}},RenewTokenRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["token_remain_time","uint32",0],3:["stop_stream_id_list","<bytes",null]}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SendBigImReq:{$m:{1:["msg_list","<liveroom.liveroom_cs_v3.SendBigImReqMsgData",null]}},SendBigImReqMsgData:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}],5:["msg_client_id","bytes",[]]}},SendBigImRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["big_im_time_window","uint32",0],3:["msg_list","<liveroom.liveroom_cs_v3.SendBigImRspMsgData",null]}},SendBigImRspMsgData:{$m:{1:["msg_id","bytes",[]],2:["msg_client_id","bytes",[]]}},SendImReq:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SendImRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["msg_id","uint64",{low:0,high:0,unsigned:!0}]}},SetTransReq:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_local_seq","uint32",0],4:["trans_channel","bytes",[]]}},SetTransRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["trans_type","bytes",[]],3:["trans_seq","uint32",0],4:["trans_list_seq","uint32",0],5:["trans_channel","bytes",[]]}},SetUserAttrReq:{$m:{1:["use_data_channel","uint32",0],2:["is_modify_use_data_channel","bool",!1],3:["user_type","uint32",0],4:["is_modify_user_type","bool",!1]}},SetUserAttrRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalLiveCustomReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SignalLiveCustomRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalLiveInviteReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SignalLiveInviteRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalLiveRequestReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SignalLiveRequestRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalLiveResultReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SignalLiveResultRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalLiveStopReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<liveroom.liveroom_cs_v3.ToUser",null]}},SignalLiveStopRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null]}},SignalTransmitReq:{$m:{1:["to_user_list","<bytes",null],2:["transmit_data","bytes",[]]}},SignalTransmitResult:{$m:{1:["to_user","bytes",[]],2:["result","liveroom.liveroom_cs_v3.EnumSignalTransmitResult",0]}},SignalTransmitRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["result","<liveroom.liveroom_cs_v3.SignalTransmitResult",null]}},StopStream:{$m:{1:["stream_id_list","<bytes",null]}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["create_time","int64",{low:0,high:0,unsigned:!1}],9:["stream_src","uint32",0],10:["stream_state","uint32",0],11:["stream_type","uint32",0],12:["stream_nid","uint32",0],13:["extra_info","bytes",[]],14:["need_gather","uint32",0]}},ToUser:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}]}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<liveroom.liveroom_cs_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}},UpdateStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["stream_title","bytes",[]],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["nick_name","bytes",[]]}},UpdateStreamRsp:{$m:{1:["rsp_head","liveroom.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},UserAction:{$m:{1:["action","uint32",0],2:["id_name","bytes",[]],3:["nick_name","bytes",[]],4:["role","uint32",0],5:["login_time","int64",{low:0,high:0,unsigned:!1}]}},UserBaseInfo:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0]}}},proto_switch_v3:{AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},CommonRsp:{$m:{1:["rsp_head","liveroom.proto_switch_v3.RspHead",null]}},GatherInfo:{$m:{1:["gather_id","string",""]}},Header:{$m:{1:["cmd","uint32",0],2:["seq","uint32",0],3:["timestamp","int64",{low:0,high:0,unsigned:!1}],4:["controls","bytes",[]],5:["flags","bytes",[]],6:["context_key","uint32",0],101:["dev_traffic_label","bytes",[]]}},LiveroomProtoVersion:{$e:{PROTO_VERSION_NONE:0,RPOTO_V020000:131072}},LoginRoomReq:{$m:{1:["app_id","uint32",0],2:["biz_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["device_id","string",""],9:["term_type","liveroom.proto_switch_v3.TermType",0],10:["net_type","liveroom.proto_switch_v3.NetType",0],11:["sdk_conn_type","liveroom.proto_switch_v3.SdkConnType",0],12:["sdk_version","uint32",0],13:["biz_version","string",""],14:["client_stamp","bytes",[]],15:["login_logic","uint32",0],16:["third_token","bytes",[]],17:["login_token","bytes",[]],18:["relogin_token","bytes",[]],19:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],20:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],21:["room_create_flag","uint32",0],22:["user_state_flag","uint32",0],23:["user_count_limit","uint32",0],24:["relate_service","string",""],25:["need_gather_stream","uint32",0],26:["callback_data","bytes",[]],27:["service_flags","uint32",0],28:["license_token","bytes",[]],29:["relogin_type","liveroom.proto_switch_v3.ReloginType",0]}},LoginRoomRsp:{$m:{1:["rsp_head","liveroom.proto_switch_v3.RspHead",null],2:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],5:["user_id","uint64",{low:0,high:0,unsigned:!0}],6:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],7:["big_im_time_window","uint32",0],8:["liveroom_hb_interval","uint32",0],9:["liveroom_hb_timeout","uint32",0],10:["online_count","uint32",0],11:["anchor_info","liveroom.proto_switch_v3.AnchorInfo",null],12:["relogin_token","bytes",[]],13:["userlist_merge_timeout","uint32",0],14:["userlist_interval","uint32",0],15:["token_remain_time","uint32",0],16:["trans_list_seq","uint32",0],17:["trans_channel_list","<liveroom.proto_switch_v3.TransChannel",null],18:["stream_count","uint32",0],19:["stream_list_seq","uint32",0],20:["stream_info_list","<liveroom.proto_switch_v3.StreamInfo",null],21:["stream_fetch_flag","uint32",0],22:["stream_list_push_merge_timeout","uint32",0],23:["stream_list_hb_merge_timeout","uint32",0],24:["relate_result_list","<liveroom.proto_switch_v3.RelateResult",null],25:["gather_list_seq","uint32",0],26:["gather_info_list","<liveroom.proto_switch_v3.GatherInfo",null]}},LogoutRoomReq:{$m:{2:["logout_check","bytes",[]]}},LogoutRoomRsp:{$m:{1:["rsp_head","liveroom.proto_switch_v3.RspHead",null]}},MergePushHead:{$m:{1:["qos_flag","uint32",0],2:["send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0],3:["msg_body","bytes",[]]}},MergePushReq:{$m:{1:["head","liveroom.proto_switch_v3.MergePushHead",null],2:["message_list","<liveroom.proto_switch_v3.MergePushInfo",null]}},MergePushRsp:{$m:{1:["message_list","<liveroom.proto_switch_v3.MergePushRspInfo",null],2:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushRspInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0]}},NetType:{$e:{NT_NONE:0,NT_LINE:1,NT_WIFI:2,NT_2G:3,NT_3G:4,NT_4G:5,NT_UNKNOWN:32}},PushKickout:{$m:{1:["reason","uint32",0],2:["message","string",""],3:["is_need_relogin","uint32",0]}},PushReq:{$m:{1:["head","liveroom.proto_switch_v3.PushReqHead",null],2:["msg_body","bytes",[]]}},PushReqHead:{$m:{1:["sub_cmd","uint32",0],2:["qos_flag","uint32",0],3:["send_time","int64",{low:0,high:0,unsigned:!1}]}},PushRsp:{$m:{1:["code","uint32",0],2:["message","string",""],3:["sub_cmd","uint32",0],4:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},ReloginType:{$e:{ReloginType_None:0,ReloginType_SdkAuto:1}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SdkConnType:{$e:{SdkConnType_None:0,SdkConnType_Tcp:1,SdkConnType_Websocket:2}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["create_time","int64",{low:0,high:0,unsigned:!1}],6:["extra_info","bytes",[]],7:["title","bytes",[]],8:["stream_ver","uint32",0],9:["stream_attr","bytes",[]],10:["stream_src","uint32",0],11:["stream_state","uint32",0],12:["stream_type","uint32",0],13:["stream_nid","uint32",0],14:["need_gather","uint32",0]}},TermType:{$e:{TT_NONE:0,TT_PC:1,TT_IOS:2,TT_ANDROID:3,TT_MAC:4,TT_LINUX:5,TT_WEB:6,TT_MINI_PROGRAM:7,TT_UNKNOWN:32}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<liveroom.proto_switch_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}}},webproxy:{HTTPHeader:{$m:{1:["name","string",""],2:["val","string",""]}},HTTPRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","liveroom.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["url","string",""],7:["method","liveroom.webproxy.Method",0],8:["headers","<liveroom.webproxy.HTTPHeader",null],9:["body","bytes",[]]}},HTTPResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","liveroom.webproxy.HTTPResponseData",null]}},HTTPResponseData:{$m:{1:["status_code","int32",0],2:["headers","<liveroom.webproxy.HTTPHeader",null],3:["body","bytes",[]]}},IntranetCheckRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","liveroom.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["vrs_ipv4","fixed32",0],7:["vrs_ipv6","liveroom.webproxy.IPv6Addr",null]}},IntranetCheckResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","liveroom.webproxy.IntranetCheckResponseData",null]}},IntranetCheckResponseData:{$m:{1:["intranet","bool",!1]}},IPv6Addr:{$m:{1:["high","fixed64",{low:0,high:0,unsigned:!1}],2:["low","fixed64",{low:0,high:0,unsigned:!1}]}},Method:{$e:{METHOD_UNSET:0,METHOD_GET:1,METHOD_POST:2,METHOD_PUT:3,METHOD_PATCH:4,METHOD_DELETE:5,METHOD_HEAD:6,METHOD_OPTIONS:7}},Mode:{$e:{MODE_UNSET:0,MODE_ONLINE:1,MODE_TEST:2}},TurnInfoRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","liveroom.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""]}},TurnInfoResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","liveroom.webproxy.TurnInfoResponseData",null]}},TurnInfoResponseData:{$m:{1:["username","string",""],2:["password","string",""],3:["turn_ipv4","fixed32",0],4:["turn_ipv6","liveroom.webproxy.IPv6Addr",null],5:["turn_port","uint32",0],6:["expiration_in_seconds","uint32",0],7:["turn_internal_ipv4","fixed32",0]}},WssBindRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","liveroom.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["url","string",""],7:["ack","bool",!1]}},WssBindRequestAck:{$m:{}},WssBindResponse:{$m:{1:["code","int32",0],2:["message","string",""]}}}}},"",yn,!1);var zi,lo=yn.liveroom,xr={1002:"LoginRoomRsp",1004:"LogoutRoomRsp",1101:"PushReq",1103:"MergePushReq",1105:"PushKickout",10001:"PushUserInfoUpdated",10002:"PushUserKickout",10003:"PushUserLogReport",10004:"PushUserTokenExpire",12001:"PushStream",12002:"PushStream",12003:"PushStream",13001:"PushIm",14001:"PushBigIm",15001:"PushTrans",15002:"PushUserTrans",301002:"EnterRoomRsp",301004:"QuitRoomRsp",301006:"HbRsp",301008:"RenewTokenRsp",301012:"SetTransRsp",301014:"GetTransRsp",302002:"AddStreamRsp",302004:"DeleteStreamRsp",302006:"UpdateStreamRsp",302008:"GetStreamListRsp",303002:"SendImRsp",303006:"SendBigImRsp",303010:"SignalLiveRequestRsp",303012:"SignalLiveResultRsp",303014:"SignalLiveInviteRsp",303016:"SignalLiveStopRsp",303018:"SignalLiveCustomRsp",304002:"GetUserlistRsp"},dn=(C=((C=zi=zi||{})[C.LoginRoomReq=1001]="LoginRoomReq",C[C.LoginRoomRsp=1002]="LoginRoomRsp",C[C.LogoutRoomReq=1003]="LogoutRoomReq",C[C.LogoutRoomRsp=1004]="LogoutRoomRsp",C[C.PushReq=1101]="PushReq",C[C.PushRsp=1102]="PushRsp",C[C.MergePushReq=1103]="MergePushReq",C[C.MergePushRsp=1104]="MergePushRsp",C[C.PushKickout=1105]="PushKickout",C[C.PushUserInfoUpdated=10001]="PushUserInfoUpdated",C[C.PushUserKickout=10002]="PushUserKickout",C[C.PushUserLogReport=10003]="PushUserLogReport",C[C.PushUserTokenExpire=10004]="PushUserTokenExpire",C[C.PushIm=13001]="PushIm",C[C.PushBigIm=14001]="PushBigIm",C[C.PushTrans=15001]="PushTrans",C[C.PushUserTrans=15002]="PushUserTrans",C[C.EnterRoomReq=301001]="EnterRoomReq",C[C.EnterRoomRsp=301002]="EnterRoomRsp",C[C.QuitRoomReq=301003]="QuitRoomReq",C[C.QuitRoomRsp=301004]="QuitRoomRsp",C[C.HbReq=301005]="HbReq",C[C.HbRsp=301006]="HbRsp",C[C.RenewTokenReq=301007]="RenewTokenReq",C[C.RenewTokenRsp=301008]="RenewTokenRsp",C[C.SetUserAttrReq=301009]="SetUserAttrReq",C[C.SetUserAttrRsp=301010]="SetUserAttrRsp",C[C.SetTransReq=301011]="SetTransReq",C[C.SetTransRsp=301012]="SetTransRsp",C[C.GetTransReq=301013]="GetTransReq",C[C.GetTransRsp=301014]="GetTransRsp",C[C.GetUserTransReq=301015]="GetUserTransReq",C[C.GetUserTransRsp=301016]="GetUserTransRsp",C[C.AddStreamReq=302001]="AddStreamReq",C[C.AddStreamRsp=302002]="AddStreamRsp",C[C.DeleteStreamReq=302003]="DeleteStreamReq",C[C.DeleteStreamRsp=302004]="DeleteStreamRsp",C[C.UpdateStreamReq=302005]="UpdateStreamReq",C[C.UpdateStreamRsp=302006]="UpdateStreamRsp",C[C.GetStreamListReq=302007]="GetStreamListReq",C[C.GetStreamListRsp=302008]="GetStreamListRsp",C[C.SendImReq=303001]="SendImReq",C[C.SendImRsp=303002]="SendImRsp",C[C.GetImReq=303003]="GetImReq",C[C.GetImRsp=303004]="GetImRsp",C[C.SendBigImReq=303005]="SendBigImReq",C[C.SendBigImRsp=303006]="SendBigImRsp",C[C.SignalLiveRequestReq=303009]="SignalLiveRequestReq",C[C.SignalLiveRequestRsp=303010]="SignalLiveRequestRsp",C[C.SignalLiveResultReq=303011]="SignalLiveResultReq",C[C.SignalLiveResultRsp=303012]="SignalLiveResultRsp",C[C.SignalLiveInviteReq=303013]="SignalLiveInviteReq",C[C.SignalLiveInviteRsp=303014]="SignalLiveInviteRsp",C[C.SignalLiveStopReq=303015]="SignalLiveStopReq",C[C.SignalLiveStopRsp=303016]="SignalLiveStopRsp",C[C.SignalLiveCustomReq=303017]="SignalLiveCustomReq",C[C.SignalLiveCustomRsp=303018]="SignalLiveCustomRsp",C[C.SignalTransmitReq=303019]="SignalTransmitReq",C[C.SignalTransmitRsp=303020]="SignalTransmitRsp",C[C.GetUserlistReq=304001]="GetUserlistReq",C[C.GetUserlistRsp=304002]="GetUserlistRsp",q(3)),q(13)),Ea=q.n(dn),Ta=(dn=q(5),q.n(dn)),_c=(Cn.prototype.md5Bytes=function(d){return this.wordArray2Uint8Array(Ta()(this.uint8Array2WordArray(d)))},Cn.prototype.wordArray2Uint8Array=function(d){for(var T=d.words,N=d.sigBytes,Q=new Uint8Array(N),te=0;te<N;te++){var ge=T[te>>>2]>>>24-te%4*8&255;Q[te]=ge}return Q},Cn.prototype.uint8Array2WordArray=function(d){for(var T=d.length,N=[],Q=0;Q<T;Q++)N[Q>>>2]|=(255&d[Q])<<24-Q%4*8;return Ea.a.create(N,T)},Cn);function Cn(){}function Ai(d){return T=escape||window.escape,decodeURIComponent(T(String.fromCharCode.apply(String,Array.from(d))));var T}var xi=function(d){return T=unescape||window.unescape,Uint8Array.from(Array.from(T(encodeURIComponent(d))).map(function(N){return N.charCodeAt(0)}));var T},Ur=(dn=q(1),q.n(dn));function Jn(){return navigator.userAgent||""}function Ls(){return navigator.platform.match("iPhone")!==null}function bc(){return navigator.platform.match("Mac")!==null}function Sc(){return Jn().match("Android")!==null}function ju(){return navigator.platform.match("Windows")!==null}function Ec(){return navigator.platform.match("Win32")!==null&&Jn().match("WOW64")===null}function Vu(){return navigator.platform.match("Linux")!==null}function Tc(){return Ls()?z.IOS:Sc()?z.ANDROID:bc()?z.MAC:Ec()?z.WIN32:z.UNKNOWN}function Rc(){var d=P.NT_UNKNOWN,T="",N=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return-1<(T=((N==null?void 0:N.effectiveType)||(N==null?void 0:N.type)||"unknown").toUpperCase()).indexOf("4G")?d=P.NT_4G:-1<T.indexOf("2G")?d=P.NT_2G:-1<T.indexOf("3G")?d=P.NT_3G:-1<T.indexOf("WIFI")?d=P.NT_WIFI:-1<T.indexOf("LINE")?d=P.NT_LINE:-1<T.indexOf("NONE")&&(d=P.NT_NONE),d}var xn,Xi=function(){return(Xi=Object.assign||function(d){for(var T,N=1,Q=arguments.length;N<Q;N++)for(var te in T=arguments[N])Object.prototype.hasOwnProperty.call(T,te)&&(d[te]=T[te]);return d}).apply(this,arguments)},ss=(C.util.Long=Ur.a,C.configure(),lo),mr=lo.liveroom_cs_v3,sr=lo.proto_switch_v3,Un=((dn=xn=xn||{})[dn.disconnected=0]="disconnected",dn[dn.broken=1]="broken",dn[dn.connected=2]="connected",Object.defineProperty(Pi.prototype,"nickName",{get:function(){return xi(this.Zt.nickName)},enumerable:!1,configurable:!0}),Object.defineProperty(Pi.prototype,"TermType",{get:function(){return this.Zt.ENV%2==0?Y.TT_WEB:Y.TT_MINIPROGRAM},enumerable:!1,configurable:!0}),Object.defineProperty(Pi.prototype,"Qt",{get:function(){return this.Zt.reporter},enumerable:!1,configurable:!0}),Pi.prototype.isDisConnect=function(){return this._state!==xn.connected},Pi.prototype.getHeader=function(d,T){return d={cmd:d,seq:++this.seq,timestamp:new Date().getTime()},this.controls&&(d.controls=this.controls),T!=null&&T.contextKey&&(d.context_key=T==null?void 0:T.contextKey),T=sr.Header.create(d),T=sr.Header.encode(T).finish(),[d.seq,T]},Pi.prototype.isUaConnect=function(){return this._ua.isConnect()},Pi.prototype.sendMessage=function(d,T,N,Q,te,ge,Le){var ot=this;if(ge===void 0&&(ge={timeout:6e3}),Le===void 0&&(Le=!0),this.$t.info(qe+" call"),d!=="LoginRoomReq"&&this._state!==xn.connected)return this.$t.warn(qe+" state "+this._state),Q&&Q(_e.SOCKET_CLOSE),-1;if(Object(ye.d)(d))Xe=d;else if(Xe=zi[d],Object(ye.g)(Xe))return this.$t.warn(qe+" cmd not found "+d),-1;var Ye=0,gt=Object(ye.g)(te==null?void 0:te.roomID)?(gt=this.Zt.roomModulesList[0])==null?void 0:gt.roomID:te==null?void 0:te.roomID,Xe=(gt=(d!=="LoginRoomReq"&&gt&&(Ye=this._roomIDKeys[gt]),this.getHeader(Xe,{contextKey:Ye})))[1];return Ye=T,T=this.getHead(Xe.length,Ye.length),T=new Uint8Array(Array.from(T).concat(Array.from(Xe)).concat(Array.from(Ye))),Le&&(Xe={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:ge.timeout,success:N,error:function(Ot,mi,_i){var Yt;if(ot.$t.info(qe+" seq: "+mi+" "+JSON.stringify(Ot)+" "+JSON.stringify(_i)),((Yt=Ot==null?void 0:Ot.header)==null?void 0:Yt.cmd)!==zi.LoginRoomRsp&&-1<[1002,105].indexOf((Yt=Ot==null?void 0:Ot.body)==null?void 0:Yt.err_code))return((Yt=Ot==null?void 0:Ot.header)==null?void 0:Yt.cmd)===zi.EnterRoomRsp&&_i!=null&&_i.roomID?(Yt=ot.Zt.roomModulesList.find(function(ni){return ni.roomID==_i.roomID}))?void Yt.retryRoom():void ot.$t.error(qe+" room no found ignore "):void ot.rtm.retryRoom();[207,208].indexOf((Yt=Ot==null?void 0:Ot.body)==null?void 0:Yt.err_code),Q&&Q(Ot,mi)},params:te},Ye=this.sendCommandList.push(Xe),this.sendCommandMap[Xe.seq]=Ye),this.$t.info(qe+" seq: "+gt[0]+" cmd: "+d),(Le=this.liveroomRequest)!=null&&Le.sendRequest({payload:T,ack:d==="LoginRoomReq"},function(Ot){ot.$t.info(qe+" fail")},function(){ot.$t.info(qe+" ack")},{}),gt[0]},Pi.prototype.getHead=function(d,T){var N=new Uint8Array(7);return N[0]=49,N[1]=d>>8,N[2]=d-(N[1]<<8),N.set(new Uint8Array(Int32Array.from([T]).buffer).reverse(),3),N},Pi.prototype.handlePush=function(d,T){var N,Q,te;d[0]===49&&(te=(d[1]<<8)+d[2],N=sr.Header.decode(d.slice(7,7+te)),d=d.slice(7+te),xr[N.cmd]?(te=this.decodeResponseBody(N,d),this.swPushCmdList.includes(N.cmd)?this.handleSwitchPush(N,te):(Q=xr[N.cmd]||N.cmd,this.$t.info("zm.lrh.hp down "+Q+" "+JSON.stringify(this.transBuf(te))),Q={header:this.transHeader(N),body:this.transRsp(te)},te=this._roomKeyIDs[N.context_key],Object(ye.g)(te)||(Q.header.room_id=te),this.handleSendCommandMsgRsp(Q))):(this.$t.info("zm.lrh.hp cmd is not rtc"),this.onSwitchMessage(N,d)))},Pi.prototype.handleSwitchPush=function(d,T){var N,Q,te=this._roomKeyIDs[d.context_key];if(te||this.noContextKeyCmdList.includes(d.cmd))if(d.cmd===zi.PushReq)if((Q=this.transRsp(T.head)).room_id=te,this.Zt.roomModulesList.find(function(Xe){return Xe.roomID==te})){var ge,Le,ot,Ye=void 0,gt={header:Q,body:Ye=this.unStructCmdList.includes(T.head.sub_cmd)?{signal_msg:Ai(T.msg_body),sub_cmd:T.head.sub_cmd}:T.head.sub_cmd===11005?{custommsg:Ai(T.msg_body)}:xr[T.head.sub_cmd]?this.transRsp(this._decode(mr[xr[T.head.sub_cmd]],T.msg_body)):{}};if(this.$t.info(yt+" push "+JSON.stringify(this.transBuf(gt))),this.rtcPushCmdList.includes(T.head.sub_cmd))switch(T.head.sub_cmd){case zi.PushUserInfoUpdated:this.handlePushUserStateUpdateMsg(gt);break;case zi.PushUserKickout:this.transKeysName(gt.body,this.loginKeyTransMap),this.handlePushKickout(gt,!1);break;case zi.PushTrans:this.handlePushTransMsg(gt);break;case zi.PushIm:this.handlePushRoomMsg(gt);break;case 11005:this.handlePushCustomMsg(gt);break;case 12001:case 12002:case 12003:this.handlePushStreamMsg(gt);break;case 11001:case 11002:case 11003:case 11004:this.handlePushSignalMsg(gt);break;case zi.PushUserTokenExpire:this.handlePushTokenExpire(gt)}else this.$t.info(yt+" white "),this.onSwitchMessage(d,T);T.head.qos_flag==1&&(ge={code:0,message:"",sub_cmd:T.head.sub_cmd,server_send_time:T.head.send_time},Le=sr.PushRsp.create(ge),ot=sr.PushRsp.encode(Le).finish(),this.sendMessage("PushRsp",ot,void 0,void 0))}else this.$t.warn(yt+" room no found ignore ");else d.cmd===zi.MergePushReq?((Q=this.transRsp(T.head)).room_id=te,this.Zt.roomModulesList.find(function(Xe){return Xe.roomID==te})?(N=[],T.message_list.forEach(function(Xe){var Ot;N.push({sub_cmd:Xe.sub_cmd,sub_seq:Xe.sub_seq}),Xe.sub_cmd===zi.PushBigIm&&(Ot=mr.PushBigIm.decode(Xe.msg_body),Xe.msg_body=Ot)}),delete(Q={header:Q,body:Ye=this.transRsp(T)}).body.head,this.handlePushMergeMsg(Q),T.head.qos_flag==1&&(ge={messages:N,server_send_time:T.head.send_time},Le=sr.MergePushRsp.create(ge),ot=sr.MergePushRsp.encode(Le).finish(),this.sendMessage("MergePushRsp",ot,void 0,void 0))):this.$t.warn(yt+" room no found ignore ")):d.cmd===zi.PushKickout&&(Ye={reason:900<T.reason?T.reason-900:T.reason,msg:T.message,need_relogin:T.is_need_relogin!==void 0?T.is_need_relogin:0},this.handlePushKickout({header:d,body:Ye},!0));else this.$t.warn(yt+" ctx key not found")},Pi.prototype.handlePushTokenExpire=function(d){},Pi.prototype.handlePushKickout=function(d,T){},Pi.prototype.handlePushStreamMsg=function(d){},Pi.prototype.handlePushSignalMsg=function(d){},Pi.prototype.handlePushMergeMsg=function(d){},Pi.prototype.handlePushCustomMsg=function(d){},Pi.prototype.handlePushRoomMsg=function(d){},Pi.prototype.handlePushTransMsg=function(d){},Pi.prototype.onSwitchMessage=function(d,T){},Pi.prototype.decodeResponseBody=function(d,T){var N=this.onSwitchCmdList.includes(d.cmd)?"proto_switch_v3":"liveroom_cs_v3";return this._decode(this._protoInstance[N][xr[d.cmd]],T)},Pi.prototype.handlePushUserStateUpdateMsg=function(d){},Pi.prototype.login=function(d,T,N){var Q,te,ge,Le=this,ot=(this._state==xn.disconnected&&(this.$t.info(Re+" state disconnect"),this.closeRequest()),new Date().getTime()+""),Ye={net_type:Rc(),room_id:xi(d.roomID),room_name:xi(d.roomName),nick_name:this.nickName,role:this.Zt.role,third_token:xi(d.token),room_create_flag:this.Zt.roomCreateFlag,user_state_flag:d.userStateUpdate?1:0,user_count_limit:d.maxMemberCount,relate_service:this.Zt.relateService.join()||""};d.isMulti?(te=Xi(Xi({},Ye),{conn_type:2}),Q=Xi(Xi({},te),{room_id:d.roomID,room_name:d.roomName,third_token:d.token}),this.$t.info(Re+" enter "+JSON.stringify(Q)),te=mr.EnterRoomReq.create(te),ge=mr.EnterRoomReq.encode(te).finish(),this.sendMessage("EnterRoomReq",ge,function(gt,Xe){Le._transLoginRspKeys(gt,d),T&&T(gt,Xe)},function(gt,Xe){N&&N(gt,Xe)},{roomID:d.roomID})):(Ye=Xi(Xi({},Ye),{app_id:this.Zt.appid,id_name:xi(this.Zt.idName),device_id:this.Zt.deviceID,term_type:this.TermType,sdk_version:this._getNumSDKVersion(),client_stamp:xi(ot),relogin_token:this.switchSessionID.notEquals(Ur.a.fromInt(0))?xi(this.reloginToken):"",switch_session_id:this.switchSessionID,user_session_id:(Ye=d.longSid)!=null?Ye:Ur.a.fromInt(0),biz_type:0,biz_version:this.Zt.bizVersion||"",login_logic:this.Zt.isMultiRoom?3:1,sdk_conn_type:2}),d.roomReasonState===W.Reconnecting&&(Ye.relogin_type=1),Q=Xi(Xi({},Ye),{id_name:this.Zt.idName,nick_name:this.Zt.nickName,client_stamp:ot,k1_sign:void 0,relogin_token:this.reloginToken,room_id:d.roomID,room_name:d.roomName,user_session_id:d.longSid}),this.logoutCheckToken=d.token,this.$t.info(Re+" login "+JSON.stringify(Q)),this.$t.remoteReport(Re+" token "+d.token),te=sr.LoginRoomReq.create(Ye),ge=sr.LoginRoomReq.encode(te).finish(),this.sendMessage("LoginRoomReq",ge,function(gt,Xe){var Ot;Le.$t.info(Re+" login rsp"),Le.switchSessionID=gt.body.switch_session_id,Le.reloginToken=gt.body.relogin_token,(Ot=gt==null?void 0:gt.header)!=null&&Ot.controls&&(Le.controls=(Ot=gt==null?void 0:gt.header)==null?void 0:Ot.controls),Le._transLoginRspKeys(gt,d),T&&T(gt,Xe)},function(gt,Xe){N&&N(gt,Xe)}))},Pi.prototype._transLoginRspKeys=function(d,T){(N=d.header)!=null&&N.context_key&&(this._roomIDKeys[T.roomID]=(N=d.header)==null?void 0:N.context_key,this._roomKeyIDs[(N=d.header)==null?void 0:N.context_key]=T.roomID,d.header.room_id=T.roomID),this.longToStringNumber(d.body,["ret_timestamp"],"toString"),this.transKeysName(d.body,this.loginKeyTransMap),this.keysExist(d.body,["token_remain_time","stream_seq"]);var N={anchor_id_name:d.body.anchor_info.id_name,anchor_id:d.body.anchor_info.user_id,anchor_nick_name:d.body.anchor_info.nick_name};d.body.anchor_info=N},Pi.prototype.transKeysName=function(d,T){T.forEach(function(N){Object(ye.g)(d[N[0]])||(d[N[1]]=d[N[0]],delete d[N[0]])})},Pi.prototype.keysExist=function(d,T){T.forEach(function(N){d[N]===void 0&&(d[N]=0)})},Pi.prototype.longToStringNumber=function(d,T,N){T.forEach(function(Q){Ur.a.isLong(d[Q])&&(d[Q]=d[Q][N]())})},Pi.prototype.logout=function(d,T,N){var Q,te,ge,Le;return d.isMulti?(Q={},this.$t.info(ii+" quit "+d.roomID),ge=mr.QuitRoomReq.create(Q),Le=mr.QuitRoomReq.encode(ge).finish(),this.sendMessage("QuitRoomReq",Le,T,N,{roomID:d==null?void 0:d.roomID})):(Q={logout_code:0,logout_check:this.crypto.md5Bytes(xi(this.logoutCheckToken)),user_session_id:d.longSid,logout_logic:this.Zt.isMultiRoom?3:1},te=this.transBuf(Q),this.$t.info(ii+" logout "+JSON.stringify(te)),ge=sr.LogoutRoomReq.create(Q),Le=sr.LogoutRoomReq.encode(ge).finish(),this.sendMessage("LogoutRoomReq",Le,T,N,{roomID:d==null?void 0:d.roomID}))},Pi.prototype._checkSendMessageList=function(d){for(var T=d.getFirst();T!=null;)d.remove(T),T._data&&T._data.error&&setTimeout(function(){T&&T._data&&T._data.error&&T._data.error(_e.TIMEOUT,T._data.seq)},0),T=d.getFirst()},Pi.prototype._checkMessageListTimeout=function(d,T){for(var N=d.getFirst(),Q=Date.parse(new Date+""),te=0,ge=this;N!=null&&function(){var Le,ot;return N._data&&N._data.sendTime+N._data.timeout>Q||(N._data&&delete T[N._data.seq],d.remove(N),N._data&&N._data.error==null||N._data&&N._data.sendTime+ge._sendDataDropTimeout<Q||(Le=N&&N._data&&N._data.error,ot=N&&N._data&&N._data.seq,setTimeout(function(){Le&&Le(_e.TIMEOUT,ot)},0)),++te>=ge._sendDataCheckOnceCount)?"break":void(N=d.getFirst())}()!=="break";);},Pi.prototype.startCheck=function(){var d=this;this._checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this._sendDataCheckTimer=setTimeout(function(){d.startCheck()},this._sendDataCheckInterval)},Pi.prototype.stopCheck=function(){this._checkSendMessageList(this.sendCommandList),clearTimeout(this._sendDataCheckTimer)},Pi.prototype.handleSendCommandMsgRsp=function(d){var T,N,Q=this.sendCommandMap[d.header.seq];Q!=null&&(T=Q._data,N=T==null?void 0:T.params,delete this.sendCommandMap[d.header.seq],this.sendCommandList.remove(Q),d.body.err_code===0?setTimeout(function(){T&&T.success!=null&&T.success(d,d.header.seq)},0):setTimeout(function(){T&&T.error!=null&&T.error(d,d.header.seq,N)},0))},Pi.prototype.getReqHead=function(d){return{}},Pi.prototype.heartBeat=function(d,T,N){var Q=this,te=mr.HbReq.create({});te=mr.HbReq.encode(te).finish(),this.sendMessage("HbReq",te,function(ge,Le){Q.transKeysName(ge.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"]]),ge.body.server_user_seq=ge.body.user_seq.toNumber(),Q.longToStringNumber(ge.body,["ret_timestamp"],"toNumber"),d&&d(ge,Le)},T,{roomID:N==null?void 0:N.roomID})},Pi.prototype.fetchUserList=function(d,T,N,Q){var te=this,ge=(d=Xi({},d),this.transBuf(d));return this.$t.info(_t+" "+JSON.stringify(ge)),ge=mr.GetUserlistReq.create(d),d=mr.GetUserlistReq.encode(ge).finish(),this.sendMessage("GetUserlistReq",d,function(Le,ot){te.$t.info(_t+" suc "+ot),te.transKeysName(Le.body,[["user_base_info_list","user_baseinfos"]]),te.longToStringNumber(Le.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),T&&T(Le,ot)},N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendRoomMsg=function(d,T,N,Q){var te=this,ge=(d={msg_category:d.msg_category,msg_type:d.msg_type,msg_content:xi(d.msg_content)},this.transBuf(d));return this.$t.info("zm.lrh.srm.1 "+JSON.stringify(ge)),ge=mr.SendImReq.create(d),d=mr.SendImReq.encode(ge).finish(),this.sendMessage("SendImReq",d,function(Le,ot){te.longToStringNumber(Le.body,["msg_id"],"toNumber"),T&&T(Le,ot)},N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendReliableMessage=function(d,T,N,Q){d={trans_type:xi(d.trans_type),trans_data:xi(d.trans_data),trans_local_seq:d.trans_local_seq,trans_channel:xi(d.trans_channel)};var te=this.transBuf(d);return this.$t.info("zm.lrh.srm.0 "+JSON.stringify(te)),te=mr.SetTransReq.create(d),d=mr.SetTransReq.encode(te).finish(),this.sendMessage("SetTransReq",d,T,N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.fetchReliableMessage=function(d,T,N,Q){var te=d.fetch_array.map(function(ge){return{trans_type:xi(ge.trans_type),trans_local_seq:ge.trans_seq}});return d={trans_channel:xi(d.trans_channel),trans_list:te},te=this.transBuf(d),this.$t.info("zm.lrh.frm "+JSON.stringify(te)),te=mr.GetTransReq.create(d),d=mr.GetTransReq.encode(te).finish(),this.sendMessage("GetTransReq",d,T,N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendCustomCommand=function(d,T,N,Q){var te=this,ge=d.dest_id_name.map(function(Le){return{id_name:xi(Le)}});return ge=Xi({to_user_list:ge,push_message:xi(d.custom_msg)},d),d=this.transBuf(ge),this.$t.info("zm.lrh.scc "+JSON.stringify(d)),d=mr.SignalLiveCustomReq.create(ge),ge=mr.SignalLiveCustomReq.encode(d).finish(),this.sendMessage("SignalLiveCustomReq",ge,function(Le,ot){T&&T(te.transRsp(Le),ot)},function(Le,ot){N&&N(Le,ot)},{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendBigRoomMessage=function(d,T,N,Q){d={msg_list:d.msgs.map(function(ge){return{msg_category:ge.msg_category,msg_type:ge.msg_type,msg_timestamp:Ur.a.fromNumber(Date.now()),msg_content:xi(ge.msg_content),msg_client_id:xi(ge.bigmsg_client_id)}})};var te=this.transBuf(d);return this.$t.info("zm.lrh.sbrm "+JSON.stringify(te)),te=mr.SendBigImReq.create(d),d=mr.SendBigImReq.encode(te).finish(),this.sendMessage("SendBigImReq",d,T,N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendSignalCmd=function(d,T,N,Q){var te="";switch(d.sub_cmd){case 1003:te="SignalLiveInviteReq";break;case 1001:te="SignalLiveRequestReq";break;case 1002:te="SignalLiveResultReq";break;case 1004:te="SignalLiveStopReq"}var ge=d.dest_id_name.map(function(Le){return{id_name:xi(Le)}});return d={push_message:xi(d.signal_msg),to_user_list:ge},ge=this.transBuf(d),this.$t.info("zm.lrh.ssc "+JSON.stringify(ge)),ge=mr[te].create(d),d=mr[te].encode(ge).finish(),this.sendMessage(te,d,T,N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.sendStreamUpdate=function(d,T,N,Q){var te,ge=this;try{te=JSON.parse(d.stream_msg)}catch{}var Le,ot="",Ye=(this.$t.info(Wt+" "+JSON.stringify(Xi(Xi({},d),{third_token:void 0}))),this.$t.remoteReport(Wt+" token "+d.third_token),this.Zt.roomModulesList.find(function(Xe){return Xe.roomID==Q.roomID}));if(!Ye)return this.$t.error(Wt+" room no found ignore "),-1;switch(d.sub_cmd){case 2001:ot="AddStreamReq",Le={stream_id:xi(te.stream_id),extra_info:xi(te.extra_info),client_req_seq:this.seq+1,third_token:xi(d.third_token||"")};break;case 2002:ot="DeleteStreamReq",Le={stream_id:xi(te.stream_id),stream_sid:te.stream_sid,client_req_seq:this.seq+1};break;case 2003:ot="UpdateStreamReq",Le={stream_id:xi(te.stream_id),stream_sid:te.stream_sid,client_req_seq:this.seq+1,extra_info:xi(te.extra_info)}}var gt=this.transBuf(Le);return this.$t.info(Wt+" "+JSON.stringify(gt)),gt=mr[ot].create(Le),gt=mr[ot].encode(gt).finish(),this.sendMessage(ot,gt,function(Xe,Ot){ge.$t.info(Wt+" suc "+ot+" "+JSON.stringify(Xe)),Xe.header.room_id=Ye.roomID,T&&T(Xe,Ot)},function(Xe,Ot){ge.$t.info(Wt+" fail "+ot+" "+JSON.stringify(Xe)),N&&N(Xe,Ot)},{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.getStreamList=function(d,T,N,Q){var te,ge,Le=this;this.Zt.roomModulesList.find(function(ot){return ot.roomID==Q.roomID})?(te=this.transBuf(ge={}),this.$t.info("zm.lrh.gs "+JSON.stringify(te)),te=mr.GetStreamListReq.create(ge),ge=mr.GetStreamListReq.encode(te).finish(),this.sendMessage("GetStreamListReq",ge,function(ot,Ye){var gt;(gt=ot.body)!=null&&gt.stream_info_list.forEach(function(Xe){Xe.create_time=Xe.create_time.toNumber()}),Le.transKeysName(ot.body,[["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]]),T&&T(ot,Ye)},function(ot,Ye){N&&N(ot,Ye)},{roomID:Q==null?void 0:Q.roomID})):this.$t.error("zm.lrh.gs room no found ignore "+Q.roomID)},Pi.prototype.transBuf=function(d){var T=this,N={};return Object.keys(d).forEach(function(Q){["logout_check","k2_sign","k1_sign"].includes(Q)?N[Q]=d[Q]:T.transReqBytes(N,d,Q)}),N},Pi.prototype.transReqBytes=function(d,T,N){var Q=this;if(Ur.a.isLong(T[N]))d[N]=T[N].toString();else if(Object.prototype.toString.call(T[N])==="[object Object]")d[N]={},Object.keys(T[N]).forEach(function(ge){return Q.transReqBytes(d[N],T[N],ge)});else if(Object.prototype.toString.call(T[N])==="[object Array]"&&Object.prototype.toString.call(T[N][0])==="[object Object]"){d[N]=[];for(var te=0;te<T[N].length;te++)(function(ge){var Le={};Object.keys(T[N][ge]).forEach(function(ot){Q.transReqBytes(Le,T[N][ge],ot)}),d[N].push(Le)})(te)}else Object.prototype.toString.call(T[N])==="[object Uint8Array]"?d[N]=Ai(T[N]):d[N]=T[N]},Pi.prototype.transHeader=function(d){return d.timestamp=Ur.a.isLong(d.timestamp)?d.timestamp.toString():d.timestamp,d},Pi.prototype.transRsp=function(d){var T=this,N=d&&d.rsp_head?this.transRspHead(d.rsp_head):{},Q=Xi(Xi({},d),N),te=(delete Q.rsp_head,{});return Object.keys(Q).forEach(function(ge){ge==="k2_sign"?te[ge]=Q[ge]:T.transBytes(te,Q,ge)}),te},Pi.prototype.transBytes=function(d,T,N){var Q=this;if(Ur.a.isLong(T[N]))d[N]=T[N];else if(Object.prototype.toString.call(T[N])==="[object Object]")d[N]={},Object.keys(T[N]).forEach(function(ge){return Q.transBytes(d[N],T[N],ge)});else if(Object.prototype.toString.call(T[N])==="[object Array]"&&Object.prototype.toString.call(T[N][0])==="[object Object]"){d[N]=[];for(var te=0;te<T[N].length;te++)(function(ge){var Le={};Object.keys(T[N][ge]).forEach(function(ot){Q.transBytes(Le,T[N][ge],ot)}),d[N].push(Le)})(te)}else Object.prototype.toString.call(T[N])==="[object Uint8Array]"?d[N]=Ai(T[N]):d[N]=T[N]},Pi.prototype.transRspHead=function(d){return d?{err_code:d.code||0,err_message:d.message}:{}},Pi.prototype._decode=function(d,T){return Xi({},d.decode(T))},Pi.prototype._handleDisconnected=function(d,T){var N=this;this.$t.info(Ie+" call"),this._state=xn.disconnected,this.Zt.useNetAgent&&d===M.TIMEOUT&&this.Zt.roomModulesList.forEach(function(Q){Q.roomTryHandler&&(N._ua.isConnect()?(N.$t.info(Ie+" ua is connect"),Q.roomTryHandler.active()):(N.$t.info(Ie+" ua is disconnect"),N._ua.connectUa()))})},Pi.prototype._handleBroken=function(){this.$t.info("zm.lrh.hb call"),this._state=xn.broken,this.Zt.useNetAgent&&this.handleReconnecting("zm.lrh.hb")},Pi.prototype.handleReconnecting=function(d){var T=this;this.Zt.roomModulesList.forEach(function(N){var Q=N.roomTryHandler,te=N.roomHandler;Q&&(Q.invalid(),Q.onactive=function(ge,Le){T.$t.info(d+" onactive"),te.transError(Le),te.disconnectedHandle(Le)},Q.startMaxTime(),te._roomStateHandle("CONNECTING",W.Reconnecting,_e.NETWORK_BROKEN))})},Pi.prototype._handleConnected=function(d){var T=this;this.$t.info("zm.lrh.hc call "+d),this._state=xn.connected,this.Zt.useNetAgent&&d===J.AUTO&&this.Zt.roomModulesList.forEach(function(N){N.roomTryHandler&&T._ua.isConnect()&&N.roomTryHandler.active()})},Pi.prototype.renewToken=function(d,T,N,Q){var te=this,ge=(d={token:d.token},mr.RenewTokenReq.create(d));ge=mr.RenewTokenReq.encode(ge).finish(),d=this.transBuf(d),this.$t.info("zm.lrh.rt "+JSON.stringify(d)),this.sendMessage("RenewTokenReq",ge,function(Le,ot){te.keysExist(Le.body,["token_remain_time"]),T&&T(Le,ot)},N,{roomID:Q==null?void 0:Q.roomID})},Pi.prototype.reset=function(){this.$t.info("zm.lrh.r.0 call "),this._state=xn.disconnected,this.switchSessionID=Ur.a.fromInt(0),this._sendDataCheckTimer&&clearTimeout(this._sendDataCheckTimer)},Pi.prototype.closeRequest=function(){var d;(d=this.liveroomRequest)!=null&&d.closeRequest()},Pi.prototype.resetSessionInfo=function(){this.switchSessionID=Ur.a.fromInt(0)},Pi.prototype._getNumSDKVersion=function(){var d=this.Zt.ENV===0?6:7,T=this.rtm.version.split(".").map(function(N){return parseInt(N)});return d<<28|T[0]<<20|T[1]<<8|T[2]},Pi);function Pi(d,T,N,Q,te){var ge=this;this.$t=d,this.Zt=T,this._ua=N,this._dataReport=Q,this.rtm=te,this.seq=0,this.sendCommandList=new K,this.sendCommandMap={},this.logoutCheckToken="",this.zPushSid="0",this.loginKeyTransMap=[["user_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"],["liveroom_hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"],["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]],this._sendDataCheckOnceCount=100,this._sendDataDropTimeout=1e4,this._sendDataCheckInterval=2e3,this._protoInstance=ss,this._roomKeyIDs={},this._roomIDKeys={},this.swPushCmdList=[zi.PushReq,zi.MergePushReq,zi.PushKickout],this.onSwitchCmdList=[zi.LoginRoomRsp,zi.LogoutRoomRsp,zi.PushKickout,zi.PushReq,zi.MergePushReq],this.noContextKeyCmdList=[1105],this.rtcPushCmdList=[10001,10002,10004,11001,11002,11003,11004,11005,12001,12002,12003,13001,15001],this._state=xn.disconnected,this.unStructCmdList=[11001,11002,11003,11004],this.reloginToken="",this.crypto=new _c,this.liveroomRequest=this._ua.getPCRequest(L.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Ur.a.fromInt(0),(d=this.liveroomRequest)!=null&&d.on("connected",function(Le){ge._handleConnected(Le)}),(T=this.liveroomRequest)!=null&&T.on("broken",function(Le){ge._handleBroken()}),(N=this.liveroomRequest)!=null&&N.on("disconnected",function(Le,ot){ge._handleDisconnected(Le,ot)}),(Q=this.liveroomRequest)!=null&&Q.on("downLoadMessage",function(Le,ot){ge.handlePush(Le,ot)}),(te=this.liveroomRequest)!=null&&te.on("exception",function(Le,ot){ge.$t.info("zm.lrh.o.0 except "+JSON.stringify(Le))}),(d=this.liveroomRequest)!=null&&d.on("pcBrokenEvent",function(Le){var ot=zu,Ye=ge.Qt.createSpan(ce.H,{key:Rn},{key:""},ot.event);Ye.setAttributes({service_no:ot.service_no(Le==null?void 0:Le.service_no)}),Ye.end()}),(T=this.liveroomRequest)!=null&&T.on("pcDisconnectedEvent",function(Le){var ot=Fu,Ye=ge.Qt.createSpan(ce.H,{key:Rn},{key:""},ot.event);Ye.setAttributes({service_no:ot.service_no(Le==null?void 0:Le.service_no)}),Ye.end()}),(N=this.liveroomRequest)!=null&&N.on("pcConnectedEvent",function(Le){var ot=Bu,Ye=ge.Qt.createSpan(ce.H,{key:Rn},{key:""},ot.event);Ye.setAttributes({service_no:ot.service_no(Le.service_no),recv_time:ot.recv_time(new Date().getTime()),proxy_link_sources:ot.proxy_link_sources(Le.proxy_link_sources),connect_stream:ot.connect_stream(Le.connect_stream)}),Ye.end()})}var ho=(Object.defineProperty(Di.prototype,"logger",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(Di.prototype,"stateCenter",{get:function(){return this.Zt},enumerable:!1,configurable:!0}),Di.prototype.listenCallBack=function(){var d=this;this.roomServicer.handlePushCustomMsg=function(T){d.handlePushCustomMsg(T)},this.roomServicer.handlePushTokenExpire=function(T){var N,Q=(Q=(Q=T==null?void 0:T.body)==null?void 0:Q.stop_stream)==null?void 0:Q.stream_id_list.map(Ai);(N=(N=T==null?void 0:T.body)==null?void 0:N.stop_stream)!=null&&(N.stream_id_list=Q),d.Zt.actionListener("_tokenExpired",T)},this.roomServicer.handlePushKickout=function(T,N){var Q;N?function(te,ge,Le){if(Le||arguments.length===2)for(var ot,Ye=0,gt=ge.length;Ye<gt;Ye++)!ot&&Ye in ge||((ot=ot||Array.prototype.slice.call(ge,0,Ye))[Ye]=ge[Ye]);return te.concat(ot||Array.prototype.slice.call(ge))}([],d.Zt.roomModulesList,!0).forEach(function(te){te.roomHandler.handlePushKickout(T,!0,!0)}):(Q=(N=T==null?void 0:T.header)==null?void 0:N.room_id,N=d.Zt.roomModulesList.find(function(te){return te.roomID==Q}),d.roomServicer.longToStringNumber(T.body,["session_id"],"toString"),N?N.roomHandler.handlePushKickout(T):d.$t.error("zm.lrh.pk room no found ignore "+JSON.stringify((N=T.header)==null?void 0:N.room_id)))},this.roomServicer.handlePushStreamMsg=function(T){d.handlePushStreamMsg(T)},this.roomServicer.handlePushSignalMsg=function(T){d.handlePushSignalMsg(T)},this.roomServicer.handlePushMergeMsg=function(T){d.handlePushMergeMsg(T)},this.roomServicer.handlePushRoomMsg=function(T){d.handlePushRoomMsg(T)},this.roomServicer.handlePushTransMsg=function(T){d.handlePushTransMsg(T)},this.roomServicer.onSwitchMessage=function(T,N){d.onSwitchMessage(T,N)},this.roomServicer.handlePushUserStateUpdateMsg=function(T){var N,Q,te,ge=(Le=T==null?void 0:T.header)==null?void 0:Le.room_id,Le=d.Zt.roomModulesList.find(function(ot){return ot.roomID==ge});Le?(te=T.body.user_action_list.map(function(ot){return{Action:ot.action,IdName:ot.id_name,NickName:ot.nick_name,Role:ot.role,LoginTime:ot.login_time.toString()}}),Q=d.Zt.reporter.createSpan(ce.H,{key:jt.event,par:ge},{key:""},"/liveroom/recv_user_update_info"),te={body:{user_actions:te,user_list_seq:T.body.server_user_seq.toNumber(),room_id:ge}},Q.setAttributes({user_list_seq:(N=te===null?void 0:te.body)==null?void 0:N.user_list_seq,update_user:(N=te===null?void 0:te.body)==null?void 0:N.user_actions}),Q.end(),Le.userHandler.handlePushUserStateUpdateMsg(te)):d.$t.error("zm.lrh.puu room no found ignore "+JSON.stringify(T))}},Di.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},Di.prototype.isUaConnect=function(){var d;return(d=this.roomServicer)==null?void 0:d.isUaConnect()},Di.prototype.sendMessage=function(d,T,N,Q,te,ge,Le){var ot;return(ot=this.roomServicer)==null?void 0:ot.sendMessage(d,T,N,Q,te,ge)},Di.prototype.handlePushTokenExpire=function(d){},Di.prototype.handlePushKickout=function(d,T){},Di.prototype.handlePushStreamMsg=function(d){},Di.prototype.handlePushSignalMsg=function(d){},Di.prototype.handlePushMergeMsg=function(d){},Di.prototype.handlePushCustomMsg=function(d){},Di.prototype.handlePushRoomMsg=function(d){},Di.prototype.handlePushTransMsg=function(d){},Di.prototype.onSwitchMessage=function(d,T){},Di.prototype.handlePushUserStateUpdateMsg=function(d){},Di.prototype.login=function(d,T,N){var Q;(Q=this.roomServicer)!=null&&Q.login(d,T,N)},Di.prototype.logout=function(d,T,N){var Q;return(Q=this.roomServicer)==null?void 0:Q.logout(d,T,N)},Di.prototype.startCheck=function(){var d;(d=this.roomServicer)!=null&&d.startCheck()},Di.prototype.stopCheck=function(){var d;(d=this.roomServicer)!=null&&d.stopCheck()},Di.prototype.getReqHead=function(d){var T;return(T=this.roomServicer)==null?void 0:T.getReqHead(d)},Di.prototype.heartBeat=function(d,T,N){var Q;(Q=this.roomServicer)!=null&&Q.heartBeat(d,T,N)},Di.prototype.fetchUserList=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.fetchUserList(d,T,N,Q)},Di.prototype.sendRoomMsg=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendRoomMsg(d,T,N,Q)},Di.prototype.sendReliableMessage=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendReliableMessage(d,T,N,Q)},Di.prototype.fetchReliableMessage=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.fetchReliableMessage(d,T,N,Q)},Di.prototype.sendCustomCommand=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendCustomCommand(d,T,N,Q)},Di.prototype.sendBigRoomMessage=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendBigRoomMessage(d,T,N,Q)},Di.prototype.sendSignalCmd=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendSignalCmd(d,T,N,Q)},Di.prototype.sendStreamUpdate=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.sendStreamUpdate(d,T,N,Q)},Di.prototype.getStreamList=function(d,T,N,Q){var te;return(te=this.roomServicer)==null?void 0:te.getStreamList(d,T,N,Q)},Di.prototype.renewToken=function(d,T,N,Q){var te;(te=this.roomServicer)!=null&&te.renewToken(d,T,N,Q)},Di.prototype.reset=function(){var d;(d=this.roomServicer)!=null&&d.reset()},Di.prototype.closeRequest=function(){var d;(d=this.roomServicer)!=null&&d.closeRequest()},Di);function Di(d,T,N,Q,te){this.$t=d,this.Zt=T,this.ua=N,this._dataReport=Q,this.rtm=te,this.roomServicer=new Un(d,T,N,Q,te),this.listenCallBack()}var xo=q(12),Gu=(nn.prototype.setLog=function(d){this.zegoSetting.setLog(d)},nn.prototype.init=function(d){this.zegoSetting.init(d)},nn.prototype.setEnvVariable=function(d,T){this.zegoSetting.setEnvVariable(d,T)},nn.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},nn.prototype.fetchSetting=function(d,T,N){return this.zegoSetting.fetchSetting(d,T,N)},nn.prototype.fetchMultiSetting=function(d,T,N){return this.zegoSetting.fetchMultiSetting(d,T,N)},nn.prototype.setOptions=function(d){return this.zegoSetting.setOptions(d)},nn.prototype.getSettingCache=function(d){return this.zegoSetting.getSettingCache(d)},nn.prototype.setToken=function(d){this.zegoSetting.setToken(d)},nn.prototype.setUserID=function(d){this.zegoSetting.setUserID(d)},nn.prototype.activePolling=function(){this.zegoSetting.activePolling()},nn.prototype.uninit=function(){var d;(d=this.zegoSetting)!=null&&d.uninit()},nn.prototype.getEnvVariable=function(d){this.zegoSetting.getEnvVariable(d)},nn);function nn(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new xo.ZegoSetting}var fo,Ra=function(){return(Ra=Object.assign||function(d){for(var T,N=1,Q=arguments.length;N<Q;N++)for(var te in T=arguments[N])Object.prototype.hasOwnProperty.call(T,te)&&(d[te]=T[te]);return d}).apply(this,arguments)},Cc=function(d,T){var N,Q,te,ge={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]},Le={next:ot(0),throw:ot(1),return:ot(2)};return typeof Symbol=="function"&&(Le[Symbol.iterator]=function(){return this}),Le;function ot(Ye){return function(gt){var Xe=[Ye,gt];if(N)throw new TypeError("Generator is already executing.");for(;ge=Le&&Xe[Le=0]?0:ge;)try{if(N=1,Q&&(te=2&Xe[0]?Q.return:Xe[0]?Q.throw||((te=Q.return)&&te.call(Q),0):Q.next)&&!(te=te.call(Q,Xe[1])).done)return te;switch(Q=0,(Xe=te?[2&Xe[0],te.value]:Xe)[0]){case 0:case 1:te=Xe;break;case 4:return ge.label++,{value:Xe[1],done:!1};case 5:ge.label++,Q=Xe[1],Xe=[0];continue;case 7:Xe=ge.ops.pop(),ge.trys.pop();continue;default:if(!(te=0<(te=ge.trys).length&&te[te.length-1])&&(Xe[0]===6||Xe[0]===2)){ge=0;continue}if(Xe[0]===3&&(!te||Xe[1]>te[0]&&Xe[1]<te[3]))ge.label=Xe[1];else if(Xe[0]===6&&ge.label<te[1])ge.label=te[1],te=Xe;else{if(!(te&&ge.label<te[2])){te[2]&&ge.ops.pop(),ge.trys.pop();continue}ge.label=te[2],ge.ops.push(Xe)}}Xe=T.call(d,ge)}catch(Ot){Xe=[6,Ot],Q=0}finally{N=te=0}if(5&Xe[0])throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}}},Wu=((C=fo=fo||{})[C.CONNECTING=0]="CONNECTING",C[C.OPEN=1]="OPEN",C[C.CLOSING=2]="CLOSING",C[C.CLOSED=3]="CLOSED",0),Qu=(Object.defineProperty(Hr.prototype,"binaryType",{get:function(){return this._binaryType},set:function(d){this._binaryType=d},enumerable:!1,configurable:!0}),Hr.prototype.addEventListener=function(d,T,N){var Q;this.eventMap[d]?(Q=this.eventMap[d])!=null&&Q.push(T):this.eventMap[d]=[T],d!=="open"&&(Q=this.socket)!=null&&Q.addEventListener(d,T,N)},Hr.prototype.removeEventListener=function(d,T,N){var Q;this.eventMap[d]=(this.eventMap[d]||[]).filter(function(te){return te!==T}),d!=="open"&&(Q=this.socket)!=null&&Q.removeEventListener(d,T,N)},Hr.prototype.dispatchEvent=function(d){throw new Error("Method not implemented.")},Object.defineProperty(Hr.prototype,"readyState",{get:function(){var d;return this.isConnecting?fo.CONNECTING:((d=this==null?void 0:this.socket)==null?void 0:d.readyState)||fo.CLOSED},enumerable:!1,configurable:!0}),Hr.prototype.createSocket=function(){return function(d,T,N,Q){return new(N=N||Promise)(function(te,ge){function Le(gt){try{Ye(Q.next(gt))}catch(Xe){ge(Xe)}}function ot(gt){try{Ye(Q.throw(gt))}catch(Xe){ge(Xe)}}function Ye(gt){var Xe;gt.done?te(gt.value):((Xe=gt.value)instanceof N?Xe:new N(function(Ot){Ot(Xe)})).then(Le,ot)}Ye((Q=Q.apply(d,T||[])).next())})}(this,void 0,void 0,function(){var d,T,N,Q,te,ge=this;return Cc(this,function(Le){switch(Le.label){case 0:if(this.socket&&this.socket.readyState!==fo.CLOSED)return[2];d=null,T=this.activeServer?function(ot,Ye,gt){if(gt||arguments.length===2)for(var Xe,Ot=0,mi=Ye.length;Ot<mi;Ot++)!Xe&&Ot in Ye||((Xe=Xe||Array.prototype.slice.call(Ye,0,Ot))[Ot]=Ye[Ot]);return ot.concat(Xe||Array.prototype.slice.call(Ye))}([this.activeServer],this.servers,!0):this.servers,N=function(ot){var Ye,gt,Xe;return Cc(this,function(Ot){switch(Ot.label){case 0:Ye=T[ot],gt="wss://".concat(Ye,"/proxy/ws"),Ot.label=1;case 1:return Ot.trys.push([1,3,,4]),[4,new Promise(function(mi,_i){var Yt=new WebSocket(gt),ni=(Object.keys(ge.eventMap).forEach(function(pi){pi!=="open"&&(ge.eventMap[pi]||[]).forEach(function(fi){Yt.addEventListener(pi,fi)})}),Yt.binaryType="arraybuffer",Yt.onclose=function(pi){ge.onclose&&ge.onclose(pi)},Yt.onerror=function(pi){ge.onerror&&ge.onerror(pi),_i(pi)},0);Yt.onmessage=function(pi){ni++;var fi=pi.data;if(ni===1)fi.byteLength;else if(ni===2){if((fi=lo.webproxy.WssBindResponse.decode(new Uint8Array(fi))).code!==0)throw"zm.prx.1"+" cloud proxy token auth failed. result: ".concat(JSON.stringify(fi));ge.isConnecting=!1,(ge.eventMap.open||[]).forEach(function(Ci){Ci(ge,pi)}),ge.onopen&&ge.onopen()}else ge.onmessage&&ge.onmessage(pi)},Yt.onopen=function(pi){ge.socket=Yt,mi(pi),ge.authProxy(Yt)}})];case 2:return Ot.sent(),[3,4];case 3:return Xe=Ot.sent(),d=Xe,[2,"continue"];case 4:return Q.onActiveServer&&(Q.onActiveServer(Ye),Q.onActiveServer=void 0),Q.url=gt,[2,"break"]}})},Q=this,te=0,Le.label=1;case 1:return te<T.length?[5,N(te)]:[3,4];case 2:if(Le.sent()==="break")return[3,4];Le.label=3;case 3:return te++,[3,1];case 4:return this.socket||setTimeout(function(){throw d},0),[2]}})})},Hr.prototype.authProxy=function(d){var T,N,Q,te,ge=this.socket;ge&&(T=(Q=this.params).token,N=Q.target,te=Q.appid,Q=Q.userID,te=lo.webproxy.WssBindRequest.encode({appid:te,biz_type:0,mode:1,id_name:Q,token:T,url:N,ack:!0}).finish(),ge.send(te))},Hr.prototype.setParams=function(d){this.params=Ra(Ra({},this.params),d)},Hr.prototype.open=function(){this.isConnecting=!0,this.readyState!==fo.CLOSED&&this.createSocket()},Hr.prototype.close=function(){var d;(d=this.socket)!=null&&d.close()},Hr.prototype.send=function(d){var T;(T=this.socket)!=null&&T.send(d)},Hr.prototype.onopen=function(){},Hr.prototype.onclose=function(d){},Hr.prototype.onerror=function(d){},Hr.prototype.onmessage=function(d){},Object.defineProperty(Hr.prototype,"bufferedAmount",{get:function(){var d;return((d=this.socket)==null?void 0:d.bufferedAmount)||0},enumerable:!1,configurable:!0}),Object.defineProperty(Hr.prototype,"extensions",{get:function(){var d;return((d=this.socket)==null?void 0:d.extensions)||""},enumerable:!1,configurable:!0}),Object.defineProperty(Hr.prototype,"protocol",{get:function(){var d;return((d=this.socket)==null?void 0:d.protocol)||""},enumerable:!1,configurable:!0}),Hr);function Hr(d,T,N){this.servers=d,this.params=T,this.activeServer=N,this.isConnecting=!1,this._binaryType="blob",this.eventMap={},this.url="",this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.id=Wu++,this.open()}var Uo=function(d,T,N,Q){return new(N=N||Promise)(function(te,ge){function Le(gt){try{Ye(Q.next(gt))}catch(Xe){ge(Xe)}}function ot(gt){try{Ye(Q.throw(gt))}catch(Xe){ge(Xe)}}function Ye(gt){var Xe;gt.done?te(gt.value):((Xe=gt.value)instanceof N?Xe:new N(function(Ot){Ot(Xe)})).then(Le,ot)}Ye((Q=Q.apply(d,T||[])).next())})},po=function(d,T){var N,Q,te,ge={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]},Le={next:ot(0),throw:ot(1),return:ot(2)};return typeof Symbol=="function"&&(Le[Symbol.iterator]=function(){return this}),Le;function ot(Ye){return function(gt){var Xe=[Ye,gt];if(N)throw new TypeError("Generator is already executing.");for(;ge=Le&&Xe[Le=0]?0:ge;)try{if(N=1,Q&&(te=2&Xe[0]?Q.return:Xe[0]?Q.throw||((te=Q.return)&&te.call(Q),0):Q.next)&&!(te=te.call(Q,Xe[1])).done)return te;switch(Q=0,(Xe=te?[2&Xe[0],te.value]:Xe)[0]){case 0:case 1:te=Xe;break;case 4:return ge.label++,{value:Xe[1],done:!1};case 5:ge.label++,Q=Xe[1],Xe=[0];continue;case 7:Xe=ge.ops.pop(),ge.trys.pop();continue;default:if(!(te=0<(te=ge.trys).length&&te[te.length-1])&&(Xe[0]===6||Xe[0]===2)){ge=0;continue}if(Xe[0]===3&&(!te||Xe[1]>te[0]&&Xe[1]<te[3]))ge.label=Xe[1];else if(Xe[0]===6&&ge.label<te[1])ge.label=te[1],te=Xe;else{if(!(te&&ge.label<te[2])){te[2]&&ge.ops.pop(),ge.trys.pop();continue}ge.label=te[2],ge.ops.push(Xe)}}Xe=T.call(d,ge)}catch(Ot){Xe=[6,Ot],Q=0}finally{N=te=0}if(5&Xe[0])throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}}},wc=function(d,T,N){if(N||arguments.length===2)for(var Q,te=0,ge=T.length;te<ge;te++)!Q&&te in T||((Q=Q||Array.prototype.slice.call(T,0,te))[te]=T[te]);return d.concat(Q||Array.prototype.slice.call(T))},Bo=lo.webproxy;function Ic(d){for(var T=0,N=0;N<d.length;N++)T+=d[N].length;var Q=new Uint8Array(T),te=0;for(N=0;N<d.length;N++)Q.set(d[N],te),te+=d[N].length;return Q}function Zu(d){return Uo(this,void 0,void 0,function(){var T,N,Q;return po(this,function(te){switch(te.label){case 0:for(T="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",N="----WebKitFormBoundary",Q=0;Q<16;Q++)N+=T.charAt(Math.floor(62*Math.random()));return[4,function(ge,Le){return Uo(this,void 0,void 0,function(){var ot,Ye,gt,Xe,Ot,mi;return po(this,function(_i){switch(_i.label){case 0:ot=new Uint8Array,Ye=[],gt=Array.from(ge),Xe=function(Yt){var ni,pi;return po(this,function(fi){switch(fi.label){case 0:return ni=gt[Yt][0],pi=gt[Yt][1],Ye.push("--"+Le),pi instanceof Blob?[4,new Promise(function(Ci){var Wi=new FileReader;Wi.onloadend=function(){var Ji,vr=Wi.result;vr&&(Ye.push('Content-Disposition: form-data; name="'+ni+'"; filename="'+((pi==null?void 0:pi.name)||"blob")+'"',"Content-Type: "+pi.type,`\r
`),Ji=xi(Ye.join(`\r
`)),Ye=[],vr=new Uint8Array(vr),ot=Ic([ot,Ji,vr])),Ci(0)},Wi.readAsArrayBuffer(pi)})]:[3,2];case 1:return fi.sent(),[3,3];case 2:Ye.push('Content-Disposition: form-data; name="'+ni+'"',"",pi),fi.label=3;case 3:return[2]}})},Ot=0,_i.label=1;case 1:return Ot<gt.length?[5,Xe(Ot)]:[3,4];case 2:_i.sent(),_i.label=3;case 3:return Ot++,[3,1];case 4:return Ye.push("--"+Le+"--"),mi=xi(Ye.join(`\r
`)),Ye=[],[2,ot=Ic([ot,mi])]}})})}(d,N)];case 1:return[2,{body:te.sent(),contentType:"multipart/form-data; boundary="+N}]}})})}Object.defineProperty(Bn.prototype,"urls",{get:function(){return this.proxyList.map(function(d){var T=d.hostName;return d=d.port,"".concat(T).concat(d?":"+d:"")})},enumerable:!1,configurable:!0}),Bn.prototype.ei=function(d){this.activeServer&&this.activeServer===d||(this.activeServer=d,this.turnInfo=void 0,this.turnExpireTime=void 0)},Bn.prototype.destroy=function(){this.proxyList=[]},Bn.prototype.init=function(d){this.appID=d.appID},Bn.prototype.createSocket=function(d,T){var N=this;if(this.appID)return(d=new Qu(this.urls,{target:d,appid:this.appID,token:this.token,userID:this.userID},this.activeServer)).onActiveServer=function(Q){N.ei(Q)},d;throw"zego cloud proxy config error. can not init proxy."},Bn.prototype.getTurnInfo=function(){var d;return Uo(this,void 0,void 0,function(){var T,N;return po(this,function(Q){switch(Q.label){case 0:return this.turnExpireTime&&this.turnInfo&&Date.now()<this.turnExpireTime?[2,this.turnInfo]:(this.turnExpireTime=void 0,this.turnInfo=void 0,T=Bo.TurnInfoRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,token:this.token}).finish(),[4,this.handleFetch("/turn/info",T)]);case 1:return T=Q.sent(),(N=Bo.TurnInfoResponse.decode(new Uint8Array(T))).code||(this.turnInfo=N,this.turnExpireTime=Date.now()+.8*(((d=N==null?void 0:N.data)==null?void 0:d.expiration_in_seconds)||0)*1e3),[2,N]}})})},Bn.prototype.handleFetch=function(d,T){return d===void 0&&(d="/"),Uo(this,void 0,void 0,function(){var N,Q,te,ge,Le,ot,Ye;return po(this,function(gt){switch(gt.label){case 0:Q=N=null,te=this.activeServer?wc([this.activeServer],this.urls,!0):this.urls,ge=0,gt.label=1;case 1:if(!(ge<te.length))return[3,7];Le=te[ge],ot="https://".concat(Le).concat(d),gt.label=2;case 2:return gt.trys.push([2,4,,5]),[4,fetch(ot,{method:"post",body:T})];case 3:return N=gt.sent(),this.ei(Le),[3,5];case 4:return Ye=gt.sent(),Q=Ye,[3,6];case 5:return[3,7];case 6:return ge++,[3,1];case 7:if(Q)throw Q;return[4,N==null?void 0:N.arrayBuffer()];case 8:return[2,gt.sent()||[]]}})})},Bn.prototype.intranetCheck=function(d,T){return Uo(this,void 0,void 0,function(){var N;return po(this,function(Q){switch(Q.label){case 0:return N=Bo.IntranetCheckRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,token:this.token,vrs_ipv4:d,vrs_ipv6:T}).finish(),[4,this.handleFetch("/intranet/check",N)];case 1:return N=Q.sent(),[2,Bo.IntranetCheckResponse.decode(new Uint8Array(N))]}})})},Bn.prototype.startHttpRequest=function(d,T,N,Q){var te=this,ge=!1;0<((Q==null?void 0:Q.timeout)||0)&&setTimeout(function(){ge||(ge=!0,N&&N({status_code:-1,headers:[],body:xi("request time out.")}))},Q==null?void 0:Q.timeout),new Promise(function(Le,ot){return Uo(te,void 0,void 0,function(){var Ye,gt,Xe,Ot,mi,_i,Yt,ni,pi,fi,Ci,Wi;return po(this,function(Ji){switch(Ji.label){case 0:return(Wi=(Wi=d.headers)==null?void 0:Wi.find(function(vr){return vr.name.toLowerCase()==="content-type"&&vr.val.toLowerCase().includes("multipart/form-data")}))&&d.body instanceof FormData?[4,Zu(d.body)]:[3,2];case 1:Ye=Ji.sent(),Yt=Ye.contentType,Ye=Ye.body,d.body=Ye,Wi.val=Yt,Ji.label=2;case 2:Ye=d.body,typeof d.body=="string"&&(Ye=xi(d.body)),gt=Bo.HTTPRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,url:d.location,token:this.token,method:d.method_no,headers:d.headers,body:Ye}).finish(),Ot=Xe=null,mi=this.activeServer?wc([this.activeServer],this.urls,!0):this.urls,_i=0,Ji.label=3;case 3:if(!(_i<mi.length))return[3,9];Yt=mi[_i],ni="https://".concat(Yt,"/proxy/http"),Ji.label=4;case 4:return Ji.trys.push([4,6,,7]),[4,fetch(ni,{method:"post",body:gt})];case 5:return Xe=Ji.sent(),Ot=null,[3,7];case 6:return pi=Ji.sent(),Ot=pi,[3,8];case 7:return[3,9];case 8:return _i++,[3,3];case 9:return Ot?(ot({status_code:-1,headers:[],body:xi(JSON.stringify(Ot))}),[2]):[4,Xe==null?void 0:Xe.arrayBuffer()];case 10:if(pi=Ji.sent()||[],fi=Bo.HTTPResponse.decode(new Uint8Array(pi)),Ci=fi==null?void 0:fi.data,(fi==null?void 0:fi.code)===0&&Ci){if(!d.origin)try{Ci.body=JSON.parse(Ai(Ci.body))}catch{Ci.body=Ai(Ci.body)}Le(Ci)}else ot({status_code:-1,headers:[],body:JSON.parse(Ai(Ci.body))});return[2]}})})}).then(function(Le){!ge&&T&&(ge=!0,T(Le))}).catch(function(Le){!ge&&N&&(ge=!0,N)&&N({status_code:-1,headers:[],body:xi(JSON.stringify(Le))})})};var Ku=Bn;function Bn(d,T){this.proxyList=d,this.token=T,this.enable=!1,this.appID=0,this.userID="web_proxy_"+Date.now()}var Ju=(zn.prototype.init=function(d){},zn.prototype.createSocket=function(d,T){try{return new WebSocket(this.si(d,T))}catch(N){throw console.error(N),N}},zn.prototype.si=function(d,T){var N=this;return d.replace(/^(https?:\/\/|wss?:\/\/)([\w.-]+)(?::(\d+))?/,function(Q,te,ge,Le){var ot="";if(N.ri){var Ye=N.ri,gt=Ye.accesshubProxy,Xe=Ye.loggerProxy,Ot=Ye.detaillogProxy;switch(T){case 0:ot=te+gt;break;case 1:ot=te+Xe;break;case 2:ot=te+Ot}}return ot?ot.endsWith("/")?ot.substring(0,ot.length-1):ot:Q})},zn.prototype.startHttpRequest=function(d,T,N,Q){var te=this,ge=!1;0<((Q==null?void 0:Q.timeout)||0)&&setTimeout(function(){ge||(ge=!0,N&&N({status_code:-1,headers:[],body:xi("request time out.")}))},Q==null?void 0:Q.timeout),new Promise(function(Le,ot){return function(Ye,gt,Xe,Ot){return new(Xe=Xe||Promise)(function(mi,_i){function Yt(fi){try{pi(Ot.next(fi))}catch(Ci){_i(Ci)}}function ni(fi){try{pi(Ot.throw(fi))}catch(Ci){_i(Ci)}}function pi(fi){var Ci;fi.done?mi(fi.value):((Ci=fi.value)instanceof Xe?Ci:new Xe(function(Wi){Wi(Ci)})).then(Yt,ni)}pi((Ot=Ot.apply(Ye,gt||[])).next())})}(te,void 0,void 0,function(){var Ye,gt,Xe,Ot,mi,_i;return function(Yt,ni){var pi,fi,Ci,Wi={label:0,sent:function(){if(1&Ci[0])throw Ci[1];return Ci[1]},trys:[],ops:[]},Ji={next:vr(0),throw:vr(1),return:vr(2)};return typeof Symbol=="function"&&(Ji[Symbol.iterator]=function(){return this}),Ji;function vr($i){return function(cs){var or=[$i,cs];if(pi)throw new TypeError("Generator is already executing.");for(;Wi=Ji&&or[Ji=0]?0:Wi;)try{if(pi=1,fi&&(Ci=2&or[0]?fi.return:or[0]?fi.throw||((Ci=fi.return)&&Ci.call(fi),0):fi.next)&&!(Ci=Ci.call(fi,or[1])).done)return Ci;switch(fi=0,(or=Ci?[2&or[0],Ci.value]:or)[0]){case 0:case 1:Ci=or;break;case 4:return Wi.label++,{value:or[1],done:!1};case 5:Wi.label++,fi=or[1],or=[0];continue;case 7:or=Wi.ops.pop(),Wi.trys.pop();continue;default:if(!(Ci=0<(Ci=Wi.trys).length&&Ci[Ci.length-1])&&(or[0]===6||or[0]===2)){Wi=0;continue}if(or[0]===3&&(!Ci||or[1]>Ci[0]&&or[1]<Ci[3]))Wi.label=or[1];else if(or[0]===6&&Wi.label<Ci[1])Wi.label=Ci[1],Ci=or;else{if(!(Ci&&Wi.label<Ci[2])){Ci[2]&&Wi.ops.pop(),Wi.trys.pop();continue}Wi.label=Ci[2],Wi.ops.push(or)}}or=ni.call(Yt,Wi)}catch(Ia){or=[6,Ia],fi=0}finally{pi=Ci=0}if(5&or[0])throw or[1];return{value:or[0]?or[1]:void 0,done:!0}}}}(this,function(Yt){switch(Yt.label){case 0:Ye=d.body,Xe=gt=null,Ot=this.si(d.location,d.serviceType),Yt.label=1;case 1:return Yt.trys.push([1,3,,4]),mi=d.method_no===1?"get":"post",[4,fetch(Ot,{method:mi,body:Ye})];case 2:return gt=Yt.sent(),Xe=null,[3,4];case 3:return mi=Yt.sent(),Xe=mi,[3,4];case 4:return Xe?(ot({status_code:-1,headers:[],body:xi(JSON.stringify(Xe))}),[2]):[4,gt==null?void 0:gt.json()];case 5:return _i=Yt.sent(),gt?Le({status_code:(gt==null?void 0:gt.status)||-1,body:_i,headers:[]}):ot({status_code:-1,headers:[],body:xi("request failed.")}),[2]}})})}).then(function(Le){!ge&&T&&(ge=!0,T(Le))}).catch(function(Le){!ge&&N&&(ge=!0,N)&&N({status_code:-1,headers:[],body:xi(JSON.stringify(Le))})})},zn.prototype.destroy=function(){},zn);function zn(d){this.ri=d}var as=function(d,T,N,Q){return new(N=N||Promise)(function(te,ge){function Le(gt){try{Ye(Q.next(gt))}catch(Xe){ge(Xe)}}function ot(gt){try{Ye(Q.throw(gt))}catch(Xe){ge(Xe)}}function Ye(gt){var Xe;gt.done?te(gt.value):((Xe=gt.value)instanceof N?Xe:new N(function(Ot){Ot(Xe)})).then(Le,ot)}Ye((Q=Q.apply(d,T||[])).next())})},mo=function(d,T){var N,Q,te,ge={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]},Le={next:ot(0),throw:ot(1),return:ot(2)};return typeof Symbol=="function"&&(Le[Symbol.iterator]=function(){return this}),Le;function ot(Ye){return function(gt){var Xe=[Ye,gt];if(N)throw new TypeError("Generator is already executing.");for(;ge=Le&&Xe[Le=0]?0:ge;)try{if(N=1,Q&&(te=2&Xe[0]?Q.return:Xe[0]?Q.throw||((te=Q.return)&&te.call(Q),0):Q.next)&&!(te=te.call(Q,Xe[1])).done)return te;switch(Q=0,(Xe=te?[2&Xe[0],te.value]:Xe)[0]){case 0:case 1:te=Xe;break;case 4:return ge.label++,{value:Xe[1],done:!1};case 5:ge.label++,Q=Xe[1],Xe=[0];continue;case 7:Xe=ge.ops.pop(),ge.trys.pop();continue;default:if(!(te=0<(te=ge.trys).length&&te[te.length-1])&&(Xe[0]===6||Xe[0]===2)){ge=0;continue}if(Xe[0]===3&&(!te||Xe[1]>te[0]&&Xe[1]<te[3]))ge.label=Xe[1];else if(Xe[0]===6&&ge.label<te[1])ge.label=te[1],te=Xe;else{if(!(te&&ge.label<te[2])){te[2]&&ge.ops.pop(),ge.trys.pop();continue}ge.label=te[2],ge.ops.push(Xe)}}Xe=T.call(d,ge)}catch(Ot){Xe=[6,Ot],Q=0}finally{N=te=0}if(5&Xe[0])throw Xe[1];return{value:Xe[0]?Xe[1]:void 0,done:!0}}}},zo=function(d,T,N){if(N||arguments.length===2)for(var Q,te=0,ge=T.length;te<ge;te++)!Q&&te in T||((Q=Q||Array.prototype.slice.call(T,0,te))[te]=T[te]);return d.concat(Q||Array.prototype.slice.call(T))},Xr=(Object.defineProperty(Zt.prototype,"logger",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(Zt.prototype,"stateCenter",{get:function(){return this.Zt},enumerable:!1,configurable:!0}),Object.defineProperty(Zt.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Object.defineProperty(Zt.prototype,"isUseNetAgent",{get:function(){return this.Zt.useNetAgent},enumerable:!1,configurable:!0}),Zt.prototype.destroyRTM=function(){this.Zt.roomModulesList.some(function(d){return!(d!=null&&d.isLogout()||d.roomState==="DISCONNECTED")})&&this.logoutRoom(),this.Qt.setUnloadState(ce.I),this.Qt.destroy(),this.oi()},Zt.prototype.getSettingUnify=function(d){var T=this.Zt.settingConfig.getSetting("unify",d=d!==void 0&&d);return this.$t.info("zm.gsu "+d+" "+JSON.stringify(T)),T?(d=T.enable,T=T.sdk_conn_ver,!!(d&&Qi.connectVer>=T)):this.isUseNetAgent},Zt.prototype._initCallback=function(){this.proxyRes=ci,this.actionSuccessCallback=xt,this.actionErrorCallback=St,this.getServerError=He,this.generateRandumNumber=nt,this.unregisterCallback=Ee,this.logReportCallback=Ht,this.registerCallback=je},Zt.prototype._initSpans=function(){this.Qt.createSpan(ce.H,{key:Ve.event},{key:Ne},Ne,!0).end()},Zt.prototype._handleZipLogUrl=function(){var d,T="";(d=this.Zt.geoFencing)!=null&&d.detaillog&&((d=this.Zt.geoFencing)==null?void 0:d.detaillog)!==""?(T="https://".concat((d=this.Zt.geoFencing)==null?void 0:d.detaillog,"/log/userupload"),this.$t.info(oi+" set detaillog url by geoFencing "+T),this.$t.setZipLogUploadUrl(T)):(d=void 0,this.Zt.settingConfig.getSetting("detaillog_domain")?(d=this.Zt.settingConfig.getSetting("detaillog_domain"),this.$t.info("".concat(oi," set detaillog domain by cloudsetting ").concat(d))):this.Zt.svrDomains.detaillog&&(d=this.Zt.svrDomains.detaillog,this.$t.info("".concat(oi," set detaillog domain by svr ").concat(d))),d&&d!==""&&(T="https://".concat(d,"/log/userupload"),this.$t.info(oi+" set detaillog url "+T),this.$t.setZipLogUploadUrl(T)))},Zt.prototype.getStoreAppConfig=function(){if(this.$t.info(Ri+" call"),localStorage){var d=Pt(Si+"_"+this.getAppID()+"_"+(this.Zt.mode||Qi.modeNo));if(d){var T=Pt(Hi+"_"+this.getAppID()+"_"+(this.Zt.mode||Qi.modeNo));T||this.$t.info(Ri+" no store config etag");try{var N,Q=dt(d,ri);Q?(this.Zt.appConfig=JSON.parse(Q),this.Qt.spanSetAttributes({key:Ve.event},{is_from_cache:Ve.is_from_cache(!0)}),this.Zt.actionListener("_appConfigRsp")):localStorage.removeItem(Si+"_"+this.getAppID()+"_"+(this.Zt.mode||Qi.modeNo)),T&&(N=dt(T,ri),this.Zt.appConfigEtag=parseInt(N))}catch(te){this.$t.warn(Ri+" "+JSON.stringify(te))}}else this.$t.info(Ri+" no store config")}else this.$t.warn(Ri+" no localstorage")},Zt.prototype._createNetAgent=function(){var d=this,T=(this.$t.info(di+" call"),this.netAgent.on("disconnected",function(ge){d.$t.info("".concat(di," netAgent disconnect"))}),this.netAgent.on("connected",function(){d.$t.info("".concat(di," netAgent connect")),d.Qt.setNetStateCheck(),d.isUseNetAgent&&(d.fetchAppConfig(),d.Zt.roomModulesList.forEach(function(ge){ge.roomTryHandler&&d.netAgent.isConnect()&&ge.roomTryHandler.active(!0)}))}),this.netAgent.on("broken",function(ge){d.$t.info("".concat(di," netAgent broken")),ge===D.CLOSE&&d.Zt.roomModulesList.forEach(function(Le){Le.resetSessionInfo()})}),this.netAgent.on("dispatchEvent",function(ge,Le,ot){var Ye;d.$t.info("".concat(di," dispatch")),Le==="start"?(Ye=d.Qt.createSpan(ce.H,{key:Rn},{key:""},"/zegoconn/auto_dispatch"),d.Zt.requestList[ge]=Ye):Le==="end"&&(Ye=d.Zt.requestList[ge])&&(Ye.setAttributes({domain_list:ot.domains}),Ye.end())}),this.netAgent.on("dispatchResultUpdate",function(ge){var Le=ge.servers;ge=ge.domains,d.$t.info("".concat(di," dispatchResult ").concat(JSON.stringify(Le),", ").concat(JSON.stringify(ge))),d.Zt.netGeoFencing.id!==1?(ge&&ge[0]&&(d.Zt.netGeoFencing.accesshub=ge[0]),d.setLocalGeoFencing()):(ge=rt(JSON.stringify(Le),ri),ht(gi+"_"+d.Zt.appid+"_"+(d.Zt.mode||Qi.modeNo),ge))}),this.netAgent.on("svrAddrResultUpdate",function(ge){var Le=ge.accesshub_domain,ot=ge.logreport_domain,Ye=ge.detaillog_domain;(ge=ge.geofencing_id)!==1?(ot&&(d.Zt.netGeoFencing.logreport=ot),Ye&&(d.Zt.netGeoFencing.detaillog=Ye),d.Zt.netGeoFencing.id=ge,d.setLocalGeoFencing()):(ge=rt(JSON.stringify({accesshub_domain:Le,logreport_domain:ot,detaillog_domain:Ye}),ri),ht(Gi+"_"+d.Zt.appid+"_"+(d.Zt.mode||Qi.modeNo),ge)),ot&&(d.stateCenter.svrDomains.logreport=ot,d.handleLogUpload()),Ye&&(d.stateCenter.svrDomains.detaillog=Ye,d._handleZipLogUrl())}),this.netAgent.on("connectedEvent",function(ge,Le,ot){var Ye;d.$t.info("".concat(di," connect")),Le==="start"?(Ye=d.Qt.createSpan(ce.H,{key:Ve.event},{key:Rn},Rn,!0),d.Zt.requestList[ge]=Ye):Le==="end"&&(Ye=d.Zt.requestList[ge])&&(Le=ot.connectEvents||[],Ye.setAttributes({request_count:hc(ot.count),connect_id:fa(ot.connectid),events:fc(Le),error:((ge=Le[0])==null?void 0:ge.error)||0}),Ye.end())}),this.netAgent.on("requestEvent",function(ge,Le,ot){var Ye;d.$t.info("".concat(di," request")),Le==="start"?(Ye=d.Qt.createSpan(ce.H,{key:Ve.event},{key:pc},pc,!0),d.Zt.requestList[ge]=Ye):Le==="end"&&(Ye=d.Zt.requestList[ge])&&(Ye.setAttributes({req_location:Mu(ot.na_req_location),http_code:ot.status_code,error:ot.err_code}),Ye.end())}),this.netAgent.on("disConnectedEvent",function(ge){var Le=ge.duration,ot=ge.server,Ye=(ge=ge.connectid,d.$t.info("".concat(di," disconnect")),d.Qt.createSpan(ce.H,{key:Ve.event},{key:""},"/zegoconn/disconnect"));Ye.setAttributes({url:Nu(ot),connect_duration:Lu(Le),connect_id:Du(ge)}),Ye.end()}),(T=this.netAgent)!=null&&T.on("clientInfo",function(ge){var Le=ge.timeOffset;ge=ge.geofencingID,Object(ye.d)(Le)&&d.Qt.setTimeOffset(Le),d._updateTimeOffsetInterval(),Object(ye.d)(ge)&&(d.Zt.netGeoFencing.id=ge)}),[]),N=(te=this.ui()).accesshub,Q=te.logreport,te=te.detaillog;T=N,this.stateCenter.svrDomains.logreport=Q[0],this.stateCenter.svrDomains.detaillog=te[0],this.$t.info("".concat(di," hard domains ").concat(JSON.stringify(T))),N=this.getServerDomains(),this.$t.info("".concat(di," svr domains ").concat(JSON.stringify(T))),N&&(Q=N.accesshub_domain,te=N.logreport_domain,N=N.detaillog_domain,Q&&(T=[Q],this.stateCenter.svrDomains.accesshub=Q),te&&(this.stateCenter.svrDomains.logreport=te),N)&&(this.stateCenter.svrDomains.detaillog=N),T=this.getGeoDomains()||T,this.$t.info("".concat(di," domains ").concat(JSON.stringify(T))),Q=T.map(function(ge){return"wss://".concat(ge,"/accesshub")}),this.netAgent.setNetAgentDefaultServers(Q),this.dispatchServers=[],this.Zt.geoFencing?this.dispatchServers=Q:this.dispatchServers=this._getDispatchUrl(),this.handleLogUpload(),this._handleZipLogUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Zt.prototype._getMainDomain=function(d){return(d=d.split("."))[d.length-2]+"."+d[d.length-1]},Zt.prototype._replaceMainDomain=function(d){var T,N;this.Zt.geoFencing&&(N=this._getMainDomain((N=this.Zt.geoFencing)==null?void 0:N.accesshub),this.Zt.geoFencing.accesshub=(T=this.Zt.geoFencing)==null?void 0:T.accesshub.replace(N,d),this.Zt.geoFencing.logreport=(T=this.Zt.geoFencing)==null?void 0:T.logreport.replace(N,d),this.Zt.geoFencing.detaillog=(T=this.Zt.geoFencing)==null?void 0:T.detaillog.replace(N,d))},Zt.prototype.hashMainDomain=function(){var d=Qi.normalPriDomains.length,T=function(N,Q){for(var te=0;0<N;)te+=N%10,N=Math.floor(N/10);return Math.floor(te/Q)}(this.getAppID(),d);return Qi.normalPriDomains[T%d]},Zt.prototype.ui=function(){var d={accesshub:[],logreport:[],detaillog:[]},T=((N=this._options)==null?void 0:N.prefixDomain)||Qi.prefixDomain,N="weblogger-wss",Q=this.hashMainDomain(),te=Qi.normalPriDomains.filter(function(ge){return ge!==Q});return d.accesshub=zo([Q],te,!0).map(function(ge){return T+"."+ge}),d.logreport=[N+"."+Q],d.detaillog=["detaillog-global."+Q],d},Zt.prototype._getDispatchUrl=function(){var d=Pt(gi+"_"+this.Zt.appid+"_"+(this.Zt.mode||Qi.modeNo));if(d&&(d=dt(d,ri)))try{return JSON.parse(d)}catch{}return[]},Zt.prototype.getServerDomains=function(){var d=Pt(Gi+"_"+this.Zt.appid+"_"+(this.Zt.mode||Qi.modeNo));if(d&&(d=dt(d,ri)))try{return JSON.parse(d)}catch{}return null},Zt.prototype.hi=function(d){return Qi.scheme+"://"+d+"/"+Qi.location},Zt.prototype._bindWindowListener=function(){var d=this,T=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),N=Me(),Q=(te=navigator.userAgent).toLowerCase().match(/MicroMessenger/i)=="micromessenger",te=-1<te.indexOf("Android")||-1<te.indexOf("Adr"),ge=T||Q&&te?"pagehide":N==="Firefox"?"beforeunload":"unload";window.addEventListener(ge,function(){return as(d,void 0,void 0,function(){return mo(this,function(Le){switch(Le.label){case 0:return this.$t.info("zm.wl "+ge),this.Qt.setUnloadState(ce.I),this._onBeforePageUnload?[4,this._onBeforePageUnload()]:[3,2];case 1:Le.sent(),Le.label=2;case 2:return this.logoutRoom(),[2]}})})}),window.addEventListener("offline",function(){d._netOffLineHandle()}),window.addEventListener("online",function(){d._netOnLineHandle()})},Zt.prototype.retryRoom=function(){var d=this;this.Zt.roomModulesList.forEach(function(T){T.roomTryHandler&&d.netAgent.isConnect()&&(T.resetSessionInfo(),T.roomTryHandler.active(!0))})},Zt.prototype._netOnLineHandle=function(){this.$t.info("zm.wl network is online"),this.Zt.networkState!==X.online&&(this.Zt.networkState=X.online,this.oi())},Zt.prototype.oi=function(){this.ci&&(clearInterval(this.ci),this.ci=null)},Zt.prototype.ai=function(){var d=this;this.oi(),this.$t.info("zm.nt.od start network online detection.."),this.ci=setInterval(function(){d.Zt.networkState!==X.offline&&d.oi(),d.Zt.useNetAgent&&d.netAgent.isConnect()&&(d.$t.info("zm.nt.od detected network online"),d._netOnLineHandle(),d.oi())},this.fi)},Zt.prototype._netOffLineHandle=function(){this.$t.info("zm.wl network is broken"),this.Zt.networkState!==X.offline&&(this.Zt.networkState=X.offline,this.ai())},Zt.prototype.setLogConfig=function(d){this.$t.info(ft+" call");var T,N=this.Qt.createSpan(ce.H,{key:Ve.event},{key:ct.event},ct.event);if(d.logLevel&&["debug","info","warn","error","report","disable"].includes(d.logLevel)&&(this.$t.setLogLevel(d.logLevel),N.setAttributes({log_level:ct.log_level(d.logLevel)})),d.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(d.remoteLogLevel)&&N.setAttributes({remote_log_level:ct.remote_log_level(d.remoteLogLevel)}),Object(ye.f)(d.logURL)&&(d.logURL.startsWith("wss://")||d.logURL.startsWith("https://")))(T=this.Zt.geoFencing)!=null&&T.logreport?this.$t.info(ft+" geo exist"):(this.$t.setLogServer(d.logURL),this.Zt.ENV===0&&(this.Zt.logDomain=(T=this.$t.url)==null?void 0:T.split("/")[2],this.Qt.setConfig({serverUrl:"wss://"+this.Zt.logDomain+"/zglog/tlog"}))),N.setAttributes({log_url:ct.log_url(d.logURL)}),N.end();else if(d.logURL)return this.$t.error(ft+"log url must be a wss or https url"),this.Qt.setError(N,ct.error.kInvalidParamError),!1;return this.$t.info(ft+" call success"),N.end(),!0},Zt.prototype.setDebugVerbose=function(d){var T=this.Qt.createSpan(ce.H,{key:Ve.event},{key:$e},$e);Object(ye.b)(d)&&(this.Zt.debug=d,this.Zt.debugCustom=!0,T.setAttributes({debug:mt(d?"true":"false")})),T.end(),this.$t.info("zm.sdv call success")},Zt.prototype._setDebug=function(d){Object(ye.f)(d)&&-1<d.indexOf("wss")?this.Zt.debug=tt(d):Array.isArray(d)&&0<d.length&&d.every(function(T){return Object(ye.f)(T)&&-1<T.indexOf("wss")})?this.Zt.debug=tt(d[0]):this.$t.info("zm.0 server wrong"),this.Zt.testEnvironment=this.Zt.debug},Zt.prototype.renewToken=function(d,T){var N,Q,te,ge,Le=this,ot=this.Qt.createSpan(ce.H,{key:jt.event,par:T},{key:""},ji.event);return Object(ye.g)(T)||Object(ye.f)(T)&&T!=""?(Q=this.getRoomModules(T)||this.Zt.roomModulesList[0])?Object(ye.f)(d)&&Q.roomTryHandler?(d===Q.roomTryHandler.token?(this.$t.info(yi+" token has not changed"),ot.setAttributes({error:ji.error.INPUT_PARAM.code,message:"token has not changed"}),ot.end()):(ot.setAttributes({token:ji.token(d)}),this.Zt.configRoomAuth?(te=function(Ye){var gt;(gt=Q.roomTryHandler)!=null&&gt.renewLocalToken(d,(gt=Ye==null?void 0:Ye.body)==null?void 0:gt.token_remain_time),Le.cloudSetting.setToken(d),Le.Qt.setReporterInfo(Le.Zt.idName||"",d),Le.Zt.configCheckToken=!0,ot.end(),Le.$t.info(yi+" "+JSON.stringify(Ye))},ge=function(Ye){var gt=(gt=Ye==null?void 0:Ye.body)==null?void 0:gt.err_code;Le.Qt.setError(ot,Ye),!gt||gt!==1000002014&&gt!==2014?Le.$t.error(yi+" "+JSON.stringify(Ye)):(Le.Zt.configCheckToken=!1,(gt=Q.roomTryHandler)!=null&&gt.renewLocalToken(d),Le.cloudSetting.setToken(d),Le.$t.warn(yi+" "+JSON.stringify(Ye)))},this.isUseNetAgent?(N=this.liveRoomHandler)!=null&&N.renewToken({token:d},te,ge,Q):this.service.sendMessage("renew_token",{token:d},te,ge,void 0,{sessionID:Q.sessionID,roomID:T,roomSessionID:Q.roomSessionID})):((N=Q.roomTryHandler)!=null&&N.renewLocalToken(d),this.cloudSetting.setToken(d),this.Qt.setReporterInfo(this.Zt.idName||"",d),ot.end())),!0):(Object(ye.f)(d)&&!Q.roomTryHandler?(this.$t.error(yi+" calling must after loginRoom"),this.Qt.setError(ot,ji.error.NOT_LOGIN)):(this.$t.error(yi+" token must be string and not empty"),this.Qt.setError(ot,ji.error.INPUT_PARAM)),!1):(this.$t.error(yi+" calling must after loginRoom"),this.Qt.setError(ot,ji.error.NOT_LOGIN),!1):(this.$t.error(yi+" roomID must be string and no empty"),!1)},Zt.prototype.setCloudSettingURLs=function(d){var T=this;this.$t.info("zm.scsu call "),Array.isArray(d)&&0<d.length&&d.every(function(N){return Object(ye.f)(N)&&-1<N.indexOf("http")})&&this.cloudSetting.init({productNum:1,appID:this.Zt.appid,env:this.Zt.ENV,pollingNotify:function(N,Q){T.$t.info("zm.scsu"," setting file changed "+N+" "+JSON.stringify(Q)),T.Zt.actionListener("_cloudSettingNotify",N,Q)},reportNotify:this._cloudReportNotify.bind(this),online:!this.Zt.testEnvironment,unify:this.isUseNetAgent,connection:this.netAgent})},Zt.prototype.loginRoom=function(d,T,N,Q){var te=this;return this.$t.info(Ge+" call by user "+(N==null?void 0:N.userID)+" "+d+" "+this.version),new Promise(function(ge,Le){return as(te,void 0,void 0,function(){var ot,Ye,gt,Xe,Ot;return mo(this,function(mi){switch(mi.label){case 0:return this.Zt.ENV!==1?[3,2]:[4,new Promise(function(_i){})];case 1:mi.sent(),mi.label=2;case 2:return Ye=this._loginReport(ge,Le,d,T,Q),Xe=Ye.interResolve,ot=Ye.interReject,Ye=Ye.loginSpan,(Q=Q||{}).maxMemberCount||(Q.maxMemberCount=0),gt=this.getRoomModules(d),Ot=jt.error,gt?(this.$t.setSessionInfo(this.Zt.appid,d,"",N.userID,"",this.Zt.sdKVersion),ot(Ot.REPEATEDLY_LOGIN)):((gt=new vc(d,this.Zt,this.$t,this._dataReport,this,this.liveRoomHandler,this.service)).roomTryHandler||(gt.roomTryHandler=new rs(this.$t,this.Zt,gt)),gt.roomTryHandler.init(this.Zt.roomRetryTime),gt.roomTryHandler.initRoom(gt.roomHandler,d,T,N,this.Zt.server,this.Zt.serverBak,Q),gt.roomTryHandler.setLoginRoomCallback(Xe,ot),gt.roomHandler._roomStateHandle("CONNECTING",W.Logining,{code:0,msg:""}),(Xe=function(_i,Yt){var ni,pi,fi=[],Ci={};for(ni in _i)Ci[_i[ni].order]=_i[ni],_i[ni].key=ni;for(pi in Ci)fi.push(Ci[pi]);for(var Wi=0;Wi<fi.length;Wi++)for(var Ji=fi[Wi].rules,vr=0;vr<Ji.length;vr++){var $i={key:fi[Wi].key,value:fi[Wi].value,action:Yt.action,logger:Yt.logger},cs=$i.value,or=Ji[vr].name?""+Ji[vr].name:"";if((cs===void 0&&or===Wr.NOT_EMPTY||cs!==void 0)&&ma[or]&&(or=ma[or]($i.key,cs,$i.action,$i.logger,Ji[vr]))!=Qr)return or}return Qr}({roomID:{order:0,value:d,rules:[{name:Wr.NOT_EMPTY,error:Ot.ROOM_ID_NULL},{name:Wr.TYPE_STRING,error:Ot.INPUT_PARAM,extMsg:"roomID must be string"},{name:Wr.MAX_LENGTH_128,error:Ot.ROOM_ID_TOO_LONG},{name:Wr.ILLEGAL_CHARACTERS,error:Ot.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:T,rules:[{name:Wr.NOT_EMPTY,error:Ot.INPUT_PARAM},{name:Wr.TYPE_STRING,error:Ot.INPUT_PARAM}]},user:{order:2,value:N,rules:[{name:Wr.NOT_EMPTY,error:Ot.INPUT_PARAM,extMsg:" param user error."},{name:Wr.TYPE_OBJECT,error:Ot.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:N.userID,rules:[{name:Wr.NOT_EMPTY,error:Ot.USER_ID_NULL,extMsg:" param user error."},{name:Wr.TYPE_STRING,error:Ot.INPUT_PARAM,extMsg:" param userID error."},{name:Wr.MAX_LENGTH_64,error:Ot.USER_ID_TOO_LONG},{name:Wr.ILLEGAL_CHARACTERS,error:Ot.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:N.userName,rules:[{name:Wr.TYPE_STRING,error:Ot.INPUT_PARAM,extMsg:" userName must be string."},{name:Wr.MAX_LENGTH_256,error:Ot.USER_NAME_TOO_LONG}]},config:{order:5,value:Q,rules:[]},"config.maxMemberCount":{order:6,value:Q.maxMemberCount,rules:[{name:Wr.TYPE_INTEGER,error:Ot.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:Ge,logger:this.$t}))!==Qr?(gt.roomHandler._roomStateHandle("DISCONNECTED",W.LoginFailed,Xe.error,Xe.extMsg),ot(Xe.error,Xe.extMsg)):(this.$t.setSessionInfo(this.Zt.appid,"","",N.userID,"",this.version),0<this.Zt.roomModulesList.length&&this.Zt.isMultiRoom==1?gt.isMulti=!0:zo([],this.Zt.roomModulesList,!0).forEach(function(_i){return _i.roomHandler.logout()}),Q&&(gt.config=Q),this.Zt.roomModulesList.push(gt),this.netAgent&&(this.Zt.idName=N.userID,this.netAgent.setUserInfo(N.userID),this.Zt.actionListener("_roomLogin",d,T),this.netAgent.isConnect())&&this.fetchAppConfig(T),this.cloudSetting.setUserID(N.userID),this.cloudSetting.setToken(T),this.cloudSetting.activePolling(),Ye.setAttributes({id_name:N.userID}),this.Qt.setCommonAttributes({id_name:N.userID}),this.Qt.setReporterInfo(N.userID,T),this.$t.setTokenInfo(T,N.userID),this.Qt.setSpanInMap(Ye,{key:jt.event,par:d}),Ot=this.Zt.settingConfig.getSetting("room_server",!0),Array.isArray(Ot)&&0<Ot.length&&(this.$t.info(Ge," setting room_server "+Ot),this.Zt.server=Ot[0],this.Zt.serverBak=Ot[1]||Ot[0]),this.Zt.setMultiRoom=!0,gt.roomTryHandler.startMaxTime(),this.isUseNetAgent&&!this.netAgent.isConnect()?(this.$t.info(Ge," us is not connected"),gt.roomHandler.setRunState(pe.trylogin),this.netAgent.connectUa()):(this.isUseNetAgent&&(this.Zt.networkState=X.online),gt.roomTryHandler.active(!0)))),[2]}})})})},Zt.prototype.handleLogUpload=function(d){var T="";d&&d.app_config?T=d.app_config.domain:this.Zt.appConfig&&this.Zt.appConfig.app_config&&(T=this.Zt.appConfig.app_config.domain),this.$t.info(Ut+" call"),this.$t.url?this.$t.info(Ut+" log is connected"):((d=this.Zt.geoFencing)!=null&&d.logreport?(this.Zt.logDomain=(d=this.Zt.geoFencing)==null?void 0:d.logreport,T=this._getMainDomain((d=this.Zt.geoFencing)==null?void 0:d.logreport)):this.Zt.testEnvironment?(this.Zt.logDomain="weblogger-hk-test.zegocloud.com",T="zegocloud.com"):this.stateCenter.ENV===0&&this.Zt.svrDomains.logreport?(this.Zt.logDomain=this.Zt.svrDomains.logreport,T=this._getMainDomain(this.Zt.svrDomains.logreport)):T&&(this.Zt.logDomain="weblogger".concat(this.Zt.appid,"-api.").concat(T)),T?(d="",this.Zt.ENV===0?(d="wss://".concat(this.Zt.logDomain,"/log"),this.Qt.setConfig({serverUrl:"wss://".concat(this.Zt.logDomain,"/zglog/tlog")})):d="https://".concat(this.Zt.logDomain,"/httplog"),this.$t.setLogServer(d)):this.$t.warn(Ut+" appconfig no domain"))},Zt.prototype.fetchAppConfigByTargetToken=function(d,T){return as(this,void 0,void 0,function(){var N,Q,te,ge,Le,ot;return mo(this,function(Ye){switch(Ye.label){case 0:if(this.$t.info(wt+" call"),!T)return this.$t.warn(wt+" user not exist"),[2];if(N=this.getUserID(),Q="",te=null,d)Q=d;else{if(!(0<this.Zt.roomModulesList.length))return this.$t.warn(wt+" token not exist"),[2];Q=this.getToken()}this.$t.roomid||this.$t.setSessionInfo(this.Zt.appid,"player-no-room","",T,"",this.Zt.sdKVersion),Ye.label=1;case 1:return Ye.trys.push([1,3,4,5]),this.netAgent.setUserInfo(T),[4,this.netAgent.getAppConfigByAgent("init",Q,5e3,this.Zt.appConfigEtag,{isSpecial:!1})];case 2:return ge=Ye.sent(),Le=ge.code,ot=ge.data,ge.retryCount,Le===0&&(this.handleLogUpload(ot),te=ot),[3,5];case 3:return Ye.sent(),this.$t.error(wt+" token not validated"),[3,5];case 4:return N&&this.netAgent.setUserInfo(N),this.$t.info(wt+" call success"),[2,te];case 5:return[2]}})})},Zt.prototype.fetchAppConfig=function(d){return as(this,void 0,void 0,function(){var T,N,Q,te,ge,Le,ot,Ye,gt;return mo(this,function(Xe){switch(Xe.label){case 0:if(this.Zt.appConfigFetched)return this.$t.warn(Qt+" config fetched"),[2];if(!this.getUserID())return this.$t.warn(Qt+" user not exist"),[2];if(T="",d)T=d;else{if(!(0<this.Zt.roomModulesList.length))return this.$t.warn(Qt+" token not exist"),[2];T=this.getToken()}N=this.Qt.createSpan(ce.H,{key:Ve.event},{key:""},"/sdk_config/init"),this.$t.info(Ge+" initConfig etag: "+this.Zt.appConfigEtag),Q=!!this.Zt.appConfig,Xe.label=1;case 1:return Xe.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",T,5e3,this.Zt.appConfigEtag,{isSpecial:!1})];case 2:if(ge=Xe.sent(),ot=ge.code,Ye=ge.data,te=ge.etag,ge=ge.retryCount,N.setAttributes({trigger_reason:xu(this.Zt.appConfig?"refresh":"normal"),try_count:Uu(ge||0)}),N.end(),this.Zt.appConfigFetched=!0,this.$t.info(Ge+" initConfig code:"+ot+" data: "+JSON.stringify(Ye)+" etag: "+te),this.Zt.appConfigEtag!==te){if(Object.keys(Ye).length==0)return this.$t.info(Ge+" initConfig data null"),[2];ge=Ye.app_config,ot=Ye.media_config,Le=ot.publish_config,ot=ot.play_config,Ye=Ye.speedlog_config.charge_info_report_no_playing,this.Zt.appConfig={app_config:ge,media_config:{publish_config:Le,play_config:ot},speedlog_config:{charge_info_report_no_playing:Ye||0}},this.Zt.appConfigEtag=te,ge=JSON.stringify(this.Zt.appConfig),Le=rt(ge,ri),ht(Si+"_"+this.getAppID()+"_"+(this.Zt.mode||Qi.modeNo),Le),ot=rt(this.Zt.appConfigEtag+"",ri),ht(Hi+"_"+this.getAppID()+"_"+(this.Zt.mode||Qi.modeNo),ot)}return!Q&&this.Zt.appConfig&&this.Zt.actionListener("_appConfigRsp"),!this.Zt.netAppConfig&&this.Zt.appConfig&&(this.Zt.netAppConfig=Object.assign(this.Zt.appConfig),this.Zt.actionListener("_netAppConfigRsp",this.Zt.netAppConfig),this._onAppConfigUpdate)&&this._onAppConfigUpdate(this.Zt.netAppConfig),[3,4];case 3:return Ye=Xe.sent(),this.$t.error(Ge+" fail "+JSON.stringify(Ye)),N.setAttributes({error:Ye==null?void 0:Ye.code}),N.end(),[20012,20008,20019].includes(Ye==null?void 0:Ye.code)&&(gt=(Ye==null?void 0:Ye.code)===20019?JSON.parse(JSON.stringify(_e.SDK_NOT_SPECIAL)):JSON.parse(JSON.stringify(_e.APPID_INVALID)),this.Zt.roomModulesList.forEach(function(Ot){Ot.roomTryHandler&&Ot.roomTryHandler.loginFail(gt)})),[3,4];case 4:return[2]}})})},Zt.prototype._getCloudSetting=function(){var d,T=this;(d=this.cloudSetting)!=null&&d.fetchMultiSetting([It,"room","rtc"]).then(function(N){var Q,te;T.$t.info(Ge," settingConfig "+JSON.stringify(N)),N&&(T.Zt.settingConfig.setSetting((te=N==null?void 0:N.init)==null?void 0:te.setting,["remote_log_level","zip_log","detaillog_domain"]),T.Zt.actionListener("_settingCanFetch",N==null?void 0:N.rtc),(te=T.Zt.settingConfig.getSetting("remote_log_level",!0))&&(T.$t.info("".concat(Ge,"  setting remote_log_level ").concat(te)),T.$t.setRemoteLogLevel(te)),N=T.Zt.settingConfig.getSetting("zip_log"),Object(ye.g)(N)||(T.$t.info("".concat(ke," force setting zip_log ").concat(N)),T.$t.setZipLogConfig(N,!0)),T._handleZipLogUrl(),(te=T.Zt.settingConfig.getSetting("unify",T.Zt.netHasSet))&&(T.$t.info("".concat(Ge," unify ").concat(JSON.stringify(te))),N=te.enable,te=te.sdk_conn_ver,Q=!0,Q=!!(N&&Qi.connectVer>=te),T.isUseNetAgent===!0)&&Q===!1&&(T.cloudSetting.setOptions({unify:!1}),T.Zt.connectState!=="connecting"&&(T.Zt.connectState="connecting",T.Zt.actionListener("_connectChanged","connecting")),N=zo([],T.Zt.roomModulesList,!0),zo([],T.Zt.roomModulesList,!0).forEach(function(ge){ge.roomHandler.logout(!0,!0)}),T.Zt.useNetAgent=Q,N.forEach(function(ge){var Le;T.Zt.roomModulesList.push(ge),ge.roomTryHandler||(ge.roomTryHandler=new rs(T.$t,T.Zt,ge)),ge.roomTryHandler.init(T.Zt.roomRetryTime),ge.roomTryHandler.initRoom(ge.roomHandler,ge.roomID,ge.token,{userID:T.Zt.idName,userName:T.Zt.nickName},T.Zt.server,T.Zt.serverBak,ge.config),(Le=ge.roomTryHandler)!=null&&Le.startMaxTime(),ge.roomTryHandler.onactive=function(ot,Ye){ot?T.Zt.connectState!=="connected"&&(T.Zt.connectState="connected",T.Zt.actionListener("_connectChanged","connected",{roomID:ge.roomID})):(T.$t.info(Ge," onactive"),ge.roomHandler.transError(Ye),ge.roomHandler.disconnectedHandle(Ye))},(Le=ge.roomTryHandler)!=null&&Le.active()})),te=T.Zt.settingConfig.getSetting("report_script"))&&(Q=te.url,N=te.key,te=te.hash,T.$t.info("".concat(Ge," report script ").concat(Q," ").concat(N," ").concat(te)),T.Qt.loadScript(!0,Q,N,te))}).catch(function(N){T.$t.warn(Ge," settingConfig "+JSON.stringify(N))}),this.Zt.onListener("_cloudSettingNotify",function(N,Q){var te=T.cloudSetting.getEnvVariables()||{},ge=T.Qt.createSpan(ce.H,{key:Ve.event},{key:""},"/cloud_setting/refresh");ge.setAttributes({request_kv:Wn(te),files:Qn([{name:N,content:Q.setting,versions:Q.versions,code:Q==null?void 0:Q.code,message:Q==null?void 0:Q.message}])}),ge.end(),N===It&&(T.Zt.settingConfig.setSetting(Q==null?void 0:Q.setting,["remote_log_level"]),te=T.Zt.settingConfig.getSetting("remote_log_level"))&&(T.$t.info(Ge," setting remote_log_level "+te),T.$t.setRemoteLogLevel(te))})},Zt.prototype._cloudReportNotify=function(d,T,N){(N==null?void 0:N.code)!==0||(N==null?void 0:N.polling)===!1?T==="request_start"?this.Qt.createSpan(ce.H,{key:Ve.event},{key:rr,par:d+""},rr,!0):T==="request_end"&&this.Qt.spanEnd({key:rr,par:d+""},{request_detail:kr(N==null?void 0:N.reportData),files:Mn(N==null?void 0:N.files),code:N==null?void 0:N.code,request_params:N==null?void 0:N.params,request_kv:N==null?void 0:N.requestKV}):this.$t.info("zm.crn not report")},Zt.prototype._loginReport=function(d,T,N,Q,te){var ge=this,Le=jt,ot=this.Qt.createSpan(ce.I,{key:Ve.event},{key:""},Le.event);return ot.setAttributes({svr_env:Le.svr_env(this.Zt.testEnvironment?"test":"online"),token:Le.token(Q)}),te&&(Object(ye.b)(te.userUpdate)&&ot.setAttribute("user_state_update",Le.user_state_update(te.userUpdate?1:0)),Object(ye.d)(te.maxMemberCount))&&ot.setAttributes({max_member_cnt:Le.max_member_cnt(te.maxMemberCount)}),{interResolve:function(Ye){var gt=ge.getRoomSessionID(N),Xe=ge.getRoomModules(N),Ot=ge.getSessionId(N);ot.setAttributes({room_id:Le.room_id(N),room_sid_string:Le.room_sid_string(gt),liveroom_sid_string:Le.liveroom_sid_string(Ot),try_cnt:Le.try_cnt((gt=Xe==null?void 0:Xe.roomTryHandler)==null?void 0:gt.retryActiveCount),server:Le.server((Ot=Xe==null?void 0:Xe.roomHandler)==null?void 0:Ot.server),room_mode:Le.room_mode(ge.Zt.isMultiRoom?1:0),role:Le.role(ge.Zt.role),audience_create_room:Le.audience_create_room(ge.Zt.roomCreateFlag?1:0),max_member_cnt:Le.max_member_cnt((Xe==null?void 0:Xe.maxMemberCount)||0)}),ot.end(),d(Ye)},interReject:function(Ye,gt){var Xe,Ot;gt===void 0&&(gt=""),ot.setAttributes({room_id:Le.room_id(N)}),Ye.code<2e9&&1e9<Ye.code||Ye.code<1e6?(Xe=$t(Ye.code,Ye.msg),Ot=it(Ye.code,ge.isUseNetAgent)):Xe={code:Ye.code,message:Ye.msg},Xe&&ge.Qt.setError(ot,{code:Xe.code,msg:Xe.message+gt}),Ot&&_e[Ot]&&(Ye.code=_e[Ot].code,Ye.msg.includes("unknown"))&&(Ye.msg=_e[Ot].msg),Ye.code&&Ye.msg&&gt!==""?T({code:Ye.code,msg:Ye.msg+gt}):T(Ye)},loginSpan:ot}},Zt.prototype.logoutRoom=function(d){var T=this,N=(this.$t.info(Tt+" call by user "+d),[]);if(this.Zt.roomModulesList.length){if(d===void 0)zo([],this.Zt.roomModulesList,!0).forEach(function(te){T._logoutSpan(te),N.push(te.roomID),te.roomHandler.logout(!0)}),this.cloudSetting.uninit();else{if(!Object(ye.f)(d)||d=="")return this.$t.error(Tt+" roomID must be string and not empty"),void this._logoutSpan(void 0,ki.error.INPUT_PARAM);var Q=this.getRoomModules(d);Q?(this._logoutSpan(Q),N.push(d),Q.roomHandler.logout(),this.Zt.roomModulesList.length===0&&this.cloudSetting.uninit()):(this.$t.error(Tt+" room not exist"),this._logoutSpan(void 0,ki.error.ROOM_NOT_EXIST,d))}this.Qt.deleteCommonAttributes(["id_name"]),this.Qt.clearRoomSpans(N)}else this.$t.warn(Tt+" no room")},Zt.prototype.uploadLog=function(){var d=this;return new Promise(function(T,N){d.$t.info("zm.zip.udlg call"),d.$t.uploadStorageLog().then(function(){d.$t.info("zm.zip.udlg call success"),T({errorCode:0,extendedData:"upload logs success!"})}).catch(function(Q){d.$t.error("zm.zip.udlg upload zip log failed, result: "+((Q==null?void 0:Q.message)||"unknown")),N({errorCode:_e.UPLOAD_LOG_ERROR.code,extendedData:_e.UPLOAD_LOG_ERROR.msg+", result: "+((Q==null?void 0:Q.message)||"unknown")})})})},Zt.prototype.sendCustomCommand=function(d,T,N){return new Promise(function(Q,te){console.error(ve),te()})},Zt.prototype._sendCustomCommand=function(d,T,N){return new Promise(function(Q,te){console.error(ve),te()})},Zt.prototype.sendBroadcastMessage=function(d,T){return new Promise(function(N,Q){console.error(ve),Q()})},Zt.prototype._sendBroadcastMessage=function(d,T,N,Q){return new Promise(function(te,ge){console.error(ve),ge()})},Zt.prototype.setRoomExtraInfo=function(d,T,N){return new Promise(function(Q,te){console.error(ve),te()})},Zt.prototype._setRoomExtraInfo=function(d,T,N){return new Promise(function(Q,te){console.error(ve),te()})},Zt.prototype.sendBarrageMessage=function(d,T){return new Promise(function(N,Q){console.error(ve),Q()})},Zt.prototype._sendBarrageMessage=function(d,T,N,Q){return new Promise(function(te,ge){console.error(ve),ge()})},Zt.prototype.sendRelayMessage=function(d,T,N,Q,te){console.error(ve)},Zt.prototype.requestJoinLive=function(d,T,N,Q,te){return console.error(ve),!1},Zt.prototype.inviteJoinLive=function(d,T,N,Q,te){return console.error(ve),!1},Zt.prototype.endJoinLive=function(d,T,N,Q){return console.error(ve),!1},Zt.prototype.respondJoinLive=function(d,T,N,Q,te){return console.error(ve),!1},Zt.prototype.getVersion=function(){return this.version},Zt.prototype.setSdkBizVersion=function(d){Object(ye.f)(d)&&d!==""&&(this.Zt.bizVersion=d)},Zt.prototype.on=function(d,T){var N=this.Qt.createSpan(ce.H,{key:Ne},{key:""},qt.event);return N.setAttributes({listener:qt.listener(d)}),this.Zt.listenerList[d]?Object(ye.c)(T)?(this.Zt.listenerList[d].indexOf(T)==-1&&this.Zt.listenerList[d].push(T),N.end(),!0):(this.$t.error(Ii+" listener callBack must be funciton"),this.Qt.setError(N,qt.error.INPUT_PARAM," listener callBack must be function"),!1):(this.$t.error(Ii+" event "+d+" no found"),this.Qt.setError(N,qt.error.INPUT_PARAM," event "+d+" no found"),!1)},Zt.prototype.off=function(d,T){var N,Q=this.Qt.createSpan(ce.H,{key:Ne},{key:""},"/sdk/off_listener");return Q.setAttributes({listener:Bt(d)}),this.Zt.listenerList[d]?(N=this.Zt.listenerList[d],T?0<=(T=N.indexOf(T))&&N.splice(T,1):this.Zt.listenerList[d]=[],Q.end(),!0):(this.$t.error("zm.off listener no found"),this.Qt.setError(Q,qt.error.INPUT_PARAM," event "+d+" no found"),!1)},Zt.prototype._on=function(d,T){return this.Zt.listenerList[d]?Object(ye.c)(T)?(this.Zt.listenerList[d].indexOf(T)==-1&&this.Zt.listenerList[d].push(T),!0):(this.$t.error(Ii+" listener callBack must be funciton"),!1):(this.$t.error(Ii+" event "+d+" no found"),!1)},Zt.prototype._off=function(d,T){var N;return this.Zt.listenerList[d]?(N=this.Zt.listenerList[d],T?N.splice(N.indexOf(T),1):this.Zt.listenerList[d]=[],!0):(this.$t.error("zm.off listener no found"),!1)},Zt.prototype.isTestEnvironment=function(){return this.Zt.testEnvironment},Zt.prototype.isLogin=function(d){return!!(d=this.getRoomModules(d)||this.Zt.roomModulesList[0])&&d.isLogin()},Zt.prototype.getMultiRoom=function(){return this.Zt.isMultiRoom},Zt.prototype.getAppID=function(){return this.Zt.appid},Zt.prototype.getUserID=function(){return this.Zt.idName},Zt.prototype.getUserName=function(){return this.Zt.nickName},Zt.prototype.getToken=function(d){return(this.getRoomModules(d)||this.Zt.roomModulesList[0]).token},Zt.prototype.setRoomCreateFlag=function(d){this.Zt.roomCreateFlag=d},Zt.prototype.setRole=function(d){this.Zt.role=d},Zt.prototype.getSessionId=function(d){return(d=this.getRoomModules(d)||this.Zt.roomModulesList[0])?d.userSidString:"0"},Zt.prototype.getRoomSessionID=function(d){return(d=this.getRoomModules(d)||this.Zt.roomModulesList[0])?d.roomSidString:"0"},Zt.prototype.getAppConfig=function(){return this.Zt.appConfig},Zt.prototype.setTestPackageSize=function(d){this.cloudSetting.zegoSetting.settingFetchHandler.testNetPackageSize=d,this.Zt.testNetPackageSize=d},Zt.prototype.setCloudEnv=function(d){this.cloudSetting&&(this.cloudSetting.zegoSetting.options.online=d==="online")},Zt.prototype.setAccess=function(d){this.Zt.configOK&&(this.Zt.netHasSet=!0,this.Zt.useNetAgent=d,this.Zt.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.isUseNetAgent),this.cloudSetting.setOptions({unify:this.isUseNetAgent}))},Zt.prototype.enableMultiRoom=function(d){var T=this.Qt.createSpan(ce.H,{key:Ve.event},{key:""},tn.event);return Object(ye.b)(d)?(T.setAttribute("is_multi",tn.is_multi(d)),0<this.Zt.roomModulesList.length||this.Zt.setMultiRoom?(this.$t.error("zm.emr multi room can only be set once before first login"),this.Qt.setError(T,tn.error.kInvalidParamError),!1):(T.end(),this.Zt.isMultiRoom=d,this.Zt.setMultiRoom=!0)):(this.$t.error("zm.emr param must be boolean"),this.Qt.setError(T,tn.error.kAlreadyLoginError),!1)},Zt.prototype.getRoomModules=function(d){return this.Zt.roomModulesList.find(function(T){return T.roomID==d})},Zt.prototype._onAppConfigUpdate=function(d){},Zt.prototype._onBeforePageUnload=function(){},Zt.use=function(d){switch(d.type){case"message":case"live":d.install(Zt,vc,ba,ho)}},Zt.setGeoFence=function(d,T){if(![0,1,2].includes(d))throw new Error("GeoFencing set Error");if(!T.every(function(N){return pr.find(function(Q){return Q===N})}))throw new Error("GeoFencing set Error");Zt.geoFenceType=d,Zt.geoFenceAreaList=T},Zt.setEngineOptions=function(d){if(d.geoFenceType){if(![0,1,2].includes(d.geoFenceType))throw new Error("GeoFencing set Error");Zt.geoFenceType=d.geoFenceType}if(d.geoFenceAreaList){if(!d.geoFenceAreaList.every(function(T){return br.find(function(N){return N.id===T})}))throw new Error("GeoFencing set Error");Zt.geoFenceAreaList=d.geoFenceAreaList}Zt.engineOptions=d},Zt.prototype.resetRoomTokenTimer=function(d,T){(d=this.getRoomModules(d)||this.Zt.roomModulesList[0])&&T&&0<T&&d.roomHandler.resetTokenTimer(1e3*T)},Zt.prototype.isDisConnect=function(){return(this.isUseNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Zt.prototype.sendMessage=function(d,T,N,Q){this.liveRoomHandler.sendMessage(d,T,N,Q)},Zt.prototype.getNetworkInfo=function(){return this.netAgent.getNTP()},Zt.prototype.setProtoFormat=function(d){if(!["json","pb"].includes(d=d===void 0?"json":d))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.Zt.protoFormat=d},Zt.prototype.setSdkLoginRelateService=function(d){Array.isArray(d)&&d.every(function(T){return Object(ye.f)(T)})&&(this.Zt.relateService=d)},Zt.prototype.getRoomID=function(){return this.Zt.roomid},Zt.prototype.getServerTimeOffset=function(){return this.Zt.serverTimeOffset},Zt.prototype.getReqHead=function(d){return d=Object(ye.f)(d)&&d!==""&&this.getRoomModules(d)||this.Zt.roomModulesList[0],this.liveRoomHandler.getReqHead(d)},Zt.prototype.sendSwitchMessage=function(d,T){throw this.$t.error("".concat("zm.ssm"," ").concat(_e.WHITE_BOARD_VERSION_ERROR.msg)),_e.WHITE_BOARD_VERSION_ERROR},Zt.prototype.onSwitchMessage=function(d){d&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=d)},Zt.prototype.onAppConfigUpdate=function(d){d&&(this._onAppConfigUpdate=d)},Zt.prototype.onBeforePageUnload=function(d){d&&(this._onBeforePageUnload=d)},Zt.prototype.getProtoVer=function(){return ue.SWITCH_TWO},Zt.prototype.sendBusinessMessage=function(d,T,N){return Object(ye.d)(d)&&T?this.liveRoomHandler.sendMessage(d,T,void 0,void 0,N,void 0,!1):-1},Zt.prototype._logoutSpan=function(d,T,N){var Q,te=this,ge=this.Qt.createSpan(ce.I,{key:Ve.event},{key:ki.event,par:d==null?void 0:d.roomID},ki.event,!0);ge.setAttributes({is_multi:ki.is_multi(this.Zt.isMultiRoom),is_send_cmd_net:ki.is_send_cmd_net(!0)}),d?((Q=d.roomHandler).updateTimes(),ge.setAttributes({room_id:ki.room_id(d==null?void 0:d.roomID),room_sid_string:ki.room_sid_string(d==null?void 0:d.roomSidString),liveroom_sid_string:ki.liveroom_sid_string(d==null?void 0:d.userSidString),valid_d:Q.validTime,total_d:Q.totalTime,tempbroken_cnt:Q.brokenCounts})):Object(ye.f)(N)&&ge.setAttributes({room_id:ki.room_id(N),valid_d:0,total_d:0,tempbroken_cnt:0}),T?this.Qt.setError(ge,T):ge.end(),setTimeout(function(){te.Qt.flush()},200)},Zt.prototype.getMsgSpan=function(d,T,N){return this.Qt.createSpan(ce.H,{key:jt.event,par:T},{key:d,par:T},d,N=N!==void 0&&N)},Zt.prototype._updateTimeOffsetInterval=function(){var d=this;Object(ye.d)(this.netAgent.timeOffset)&&this.Qt.setTimeOffset(this.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout(function(){d._updateTimeOffsetInterval()},9e5)},Zt.prototype.setLocalGeoFencing=function(){var d;(d=this.Zt.netGeoFencing)!=null&&d.id&&(d=this.Zt.netGeoFencing)!=null&&d.accesshub&&(d=rt(JSON.stringify(this.Zt.netGeoFencing),ri),ht("z_geos_"+this.Zt.appid+"_"+(this.Zt.mode||Qi.modeNo),d),this.Zt.netGeoFencing={})},Zt.prototype.getLocalGeoFencing=function(){var d=Pt("z_geos_"+this.Zt.appid+"_"+(this.Zt.mode||Qi.modeNo));if(d){if(d=dt(d,ri))try{return JSON.parse(d)}catch{this.$t.warn("zm.glgf local geo descrypt fail")}}else this.$t.info("zm.glgf no local geo");return null},Zt.prototype.getGeoDomains=function(){if(Zt.geoFenceType&&Zt.geoFenceAreaList){this.$t.info("".concat(di," geo type ").concat(Zt.geoFenceType," area ").concat(Zt.geoFenceAreaList.join(",")));var d=void 0,T=[],N=this._getGeoFencingIDAndDomain(Zt.geoFenceType,Zt.geoFenceAreaList);if(!N)throw this.$t.warn("".concat(di," geofencing not exist")),_e.GEO_SET_ERROR;var Q,te=this.getLocalGeoFencing(),ge=!1;te!=null&&te.id&&(Q=N.find(function(Le){return Le.id===(te==null?void 0:te.id)}))&&(ge=!0,d={id:te==null?void 0:te.id,accesshub:(te==null?void 0:te.accesshub)||(Q==null?void 0:Q.accesshub),logreport:(te==null?void 0:te.logreport)||(Q==null?void 0:Q.logreport),detaillog:(te==null?void 0:te.detaillog)||(Q==null?void 0:Q.detaillog)},te!=null&&te.accesshub&&T.push(te==null?void 0:te.accesshub),T.push(Q==null?void 0:Q.accesshub)),ge||(d={id:(Q=N[0]).id,accesshub:ge=Q.accesshub,logreport:Q.logreport,detaillog:Q.detaillog},T.push(ge)),this.Zt.geoFencing=d,this.$t.info("".concat(di," use geo ").concat(JSON.stringify(this.Zt.geoFencing))),N=T}return N},Zt.prototype._getGeoFencingIDAndDomain=function(d,T){var N=this.hashMainDomain(),Q=JSON.parse(JSON.stringify(br)),te=(Q.forEach(function(ge){ge.accesshub+="."+N,ge.logreport+="."+N,ge.detaillog+="."+N}),[]);return d===1?T.forEach(function(ge){var Le=Q.find(function(ot){return ot.id===ge});Le&&te.push(Le)}):d===2&&(te=JSON.parse(JSON.stringify(Q)),T.forEach(function(ge){var Le=Q.find(function(ot){return ot.id===ge});Le&&(te=te.filter(function(ot){return ot.id!==(Le==null?void 0:Le.id)}),Le.relative_geofencings.forEach(function(ot){te=te.filter(function(Ye){return Ye.id!==ot})}))})),0<te.length?te:null},Zt.setCloudProxyConfig=function(d,T,N){N?this.proxyCtrl||(this.proxyCtrl=new Ku(d,T)):((N=this.proxyCtrl)!=null&&N.destroy(),this.proxyCtrl=null)},Zt.setLocalProxyConfig=function(d,T){T?this.proxyCtrl||(this.proxyCtrl=new Ju(d)):((T=this.proxyCtrl)!=null&&T.destroy(),this.proxyCtrl=null)},Zt.rtmVersion="2.2.0",Zt.pageID="",Zt.proxyCtrl=null,Zt);function Zt(d,T,N,Q,te,ge,Le,ot){var Ye,gt,Xe,Ot=this,mi=(te=(this.$t=N,this._dataReport=Q,this.Qt=te,this.version=ge,this._options=ot,this.service={},this.ci=null,this.fi=1e3,this.id="",this._roomLoginResponseListener=function(){clearTimeout(Ot.cloudSettingTimer),Ot.cloudSettingTimer=setTimeout(function(){Ot.$t.info(Ge+" fetch cloud setting"),Ot._getCloudSetting()},100)},this.Zt=new gc(this.$t,this._dataReport),this.Zt.ENV=Le,this.Zt.product=Vt.product,this.cloudSetting=new Gu,this.getReportSeq=$,this.getSeq=le,this._initCallback(),this.Zt.deviceID=((N=Le)===void 0&&(N=0),(Q=Pt("z_deviceID"))||(new Date().getTime(),ht("z_deviceID",Q=Nt(N)),Q)),Zt.pageID||(Zt.pageID=Nt(Le)),this.Zt.id=Nt(Le)),this.logger.info("".concat(ke," deviceID: ").concat(this.Zt.deviceID," , pageID: ").concat(Zt.pageID," , instID: ").concat(te)),this.Qt.init(d,Le,this.Zt.deviceID),this.Qt.setLogger(this.$t),this.Zt.reporter=this.Qt,Ve),_i=this.Qt.createSpan(ce.H,{key:""},{key:mi.event},mi.event,!0);Le!=0&&Le!=1||this._setDebug(T),ge="Express",(ot=this._options)!=null&&ot.reportData&&(Ye=(Q=(N=this._options)==null?void 0:N.reportData)==null?void 0:Q.version,ge=((ot=(te=this._options)==null?void 0:te.reportData)==null?void 0:ot.project)||ge),_i.setAttributes({biz_type:mi.biz_type(0),project:mi.project(ge),servers:mi.servers(Object(ye.f)(T)?[T]:T),liveroom_version:mi.liveroom_version(Ye),is_from_cache:mi.is_from_cache(!1),sev_env:mi.sev_env(this.Zt.testEnvironment?"test":"online")}),function(Yt,ni,pi){if(Yt&&Object(ye.d)(Yt)&&Ke(Yt)){if(ni&&(Object(ye.f)(ni)||Array.isArray(ni))&&ni!="")return 1;pi.error("ccp.0 server must be string or string array and not empty")}else pi.error("ccp.0 appid must be positive integer number and not empty")}(d,T,this.$t)?(this.Zt.appid=d,this.Zt.configOK=!0,this.Zt.sdKVersion=this.version,this.Zt.testEnvironment&&(this.Zt.mode=G.MODE_TEST),this.netAgent=new ne,this.$t.setSessionInfo(this.Zt.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.$t),N={appID:this.Zt.appid,env:this.Zt.ENV,mode:this.Zt.mode},Zt.geoFenceType&&Zt.geoFenceAreaList&&(N.geoFencing={type:Zt.geoFenceType,list:Zt.geoFenceAreaList}),this.netAgent.setAppInfo(N),this.liveRoomHandler=new ho(this.$t,this.Zt,this.netAgent,this._dataReport,this),this.service=new ba(this.Zt,this.$t,this),Q="",Le===0?Q="rtc":Le===1&&(Q="ali"),this.Zt.settingConfig=new qu,this.cloudSetting.setLog(this.$t),this.cloudSetting.init({productNum:1,appID:d,env:Le,pollingNotify:function(Yt,ni){Ot.$t.info(ke," setting file changed "+Yt+" "+JSON.stringify(ni)),Ot.Zt.actionListener("_cloudSettingNotify",Yt,ni)},reportNotify:this._cloudReportNotify.bind(this),online:!this.Zt.testEnvironment,unify:this.isUseNetAgent,connection:this.netAgent}),(te=this.Zt.settingConfig.getSetting("remote_log_level"))&&(this.$t.info("".concat(ke," setting remote_log_level default ").concat(te)),this.$t.setRemoteLogLevel(te)),ot=this.Zt.settingConfig.getSetting("zip_log"),Object(ye.g)(ot)||(this.$t.info("".concat(ke," setting zip_log default ").concat(ot)),this.$t.setZipLogConfig(ot)),this.cloudSetting.setEnvVariable("environment",Q),ge=this.cloudSetting.getSettingCache(It),Ye=this.cloudSetting.getSettingCache("room"),gt=!1,Xe=setTimeout(function(){Ot.$t.warn("".concat(ke," time out, get cache settings failed!")),Ot.isUseNetAgent&&(gt=!0,Ot._createNetAgent(),Ot.getStoreAppConfig()),_i.setAttributes({use_na:mi.use_na(Ot.isUseNetAgent?1:0)}),_i.end()},3e3),Promise.all([ge,Ye]).then(function(Yt){Xe&&clearTimeout(Xe);var ni=Yt==null?void 0:Yt[0],pi=((pi=(Ot.Zt.settingConfig.setSetting(ni==null?void 0:ni.setting),Ot.Zt.useNetAgent=Ot.getSettingUnify(Ot.Zt.netHasSet),Ot.cloudSetting.setOptions({unify:Ot.isUseNetAgent}),Ot.isUseNetAgent&&!gt&&(Ot._createNetAgent(),Ot.getStoreAppConfig()),Ot.Zt.settingConfig.getSetting("remote_log_level",!0)))&&(Ot.$t.info("".concat(ke,"  setting remote_log_level ").concat(pi)),Ot.$t.setRemoteLogLevel(pi)),Ot._handleZipLogUrl(),Ot.Zt.settingConfig.getSetting("zip_log")),fi=((pi=(Object(ye.g)(pi)||(Ot.$t.info("".concat(ke," setting zip_log ").concat(pi)),Ot.$t.setZipLogConfig(pi)),Ot.Zt.settingConfig.getSetting("report_script")))?(fi=pi.url,Ci=pi.key,pi=pi.hash,Ot.$t.info("".concat(ke," report script ").concat(fi," ").concat(Ci," ").concat(pi)),Ot.Qt.loadScript(!1,fi,Ci,pi),_i.setAttributes({lua_md5:mi.lua_md5(pi)})):Ot.Qt.loadScript(!1,"","",""),Yt==null?void 0:Yt[1]),Ci=(Ot.Zt.settingConfig.setSetting(fi==null?void 0:fi.setting),Ot.Qt.createSpan(ce.H,{key:mi.event},{key:""},"/cloud_setting/cache"));if(Ci.setAttributes({files:gn([{name:It,content:JSON.stringify(ni==null?void 0:ni.setting),versions:JSON.stringify(ni==null?void 0:ni.versions),code:0,message:""},{name:"room",content:JSON.stringify(fi==null?void 0:fi.setting),versions:JSON.stringify(fi==null?void 0:fi.versions),code:0,message:""}])}),Ci.end(),_i.setAttributes({use_na:mi.use_na(Ot.isUseNetAgent?1:0)}),_i.end(),pi=Array.isArray(T)?T[0]:T,!Ot.isUseNetAgent&&(Yt=d,(ni=(((ni=pi)==null?void 0:ni.replace("webliveroom","-"))||"").split("-")||[])[1])&&/\d*/i.test(ni[1])&&+ni[1]!=Yt)throw Ot.$t.error("".concat(ke," the server does not match the appID")),new Error("The server does not match the appID")}).catch(function(Yt){if(Xe&&clearTimeout(Xe),_i.setAttributes({use_na:mi.use_na(Ot.isUseNetAgent?1:0)}),_i.end(),Ot.$t.warn("".concat(ke,"  initConfig ").concat(JSON.stringify(Yt))),(Yt==null?void 0:Yt.code)===_e.GEO_SET_ERROR.code)throw Error("GeoFencing set Error")}),Object(ye.f)(T)?(this.Zt.server=T,this.Zt.serverBak=T):Array.isArray(T)&&0<T.length&&(this.Zt.server=T[0],this.Zt.serverBak=T[1]||T[0]),this.$t.info("".concat(ke,"  ").concat(navigator==null?void 0:navigator.appVersion," ").concat(this.version," rtmVersion: ").concat(Zt.rtmVersion," logVersion:").concat(se.ZegoLogger.logVersion)),this._bindWindowListener(),this.Zt.networkState=!navigator||navigator.onLine?X.online:X.offline,N=Me()==="Firefox"?navigator==null?void 0:navigator.userAgent:navigator==null?void 0:navigator.appVersion,_i.setAttribute("sys_info",N||""),this._initSpans(),this.$t.setSessionInfo(this.Zt.appid,"","","","",this.version)):(this.$t.error("".concat(ke," init sdk error")),this.Qt.setError(_i,mi.error.kInvalidParamError)),this.Zt.onListener("roomLoginResponse",this._roomLoginResponseListener)}var Oc=q(8),Ca=function(){return(Ca=Object.assign||function(d){for(var T,N=1,Q=arguments.length;N<Q;N++)for(var te in T=arguments[N])Object.prototype.hasOwnProperty.call(T,te)&&(d[te]=T[te]);return d}).apply(this,arguments)},Yu=(Br.prototype.init=function(d,T,N){var Q=this,te=T==0?"rtc":"ali";this._tracer.init({product:this._product,version:"1.0.0",env:T,appID:d,deviceID:N,importantLevel:Vt.importLevel,levels:Vt.levels,bps:Vt.bps,spanStart:function(ge){try{Object(ye.c)(window.scriptSpanStart)&&scriptSpanStart(Q.commonStates,Q._tracer,ge)}catch(Le){Q.$t.warn("zm.tc.ii dy span start "+Le)}},spanBeforeEnd:function(ge){ge.setAttribute("ntype_end",We())},spanEnd:function(ge,Le){try{Object(ye.c)(window.scriptSpanEnd)&&scriptSpanEnd(Q.commonStates,Q._tracer,ge)}catch(ot){Q.$t.warn("zm.tc.ii dy span end ",JSON.stringify(ot))}},resources:{product:this._product,appid:d,device_id:N,console:te}})},Br.prototype.setConfig=function(d){this._tracer.setConfig(d)},Br.prototype.loadScript=function(d,T,N,Q){return function(te,ge,Le,ot){return new(Le=Le||Promise)(function(Ye,gt){function Xe(_i){try{mi(ot.next(_i))}catch(Yt){gt(Yt)}}function Ot(_i){try{mi(ot.throw(_i))}catch(Yt){gt(Yt)}}function mi(_i){var Yt;_i.done?Ye(_i.value):((Yt=_i.value)instanceof Le?Yt:new Le(function(ni){ni(Yt)})).then(Xe,Ot)}mi((ot=ot.apply(te,ge||[])).next())})}(this,void 0,void 0,function(){var te;return function(ge,Le){var ot,Ye,gt,Xe={label:0,sent:function(){if(1&gt[0])throw gt[1];return gt[1]},trys:[],ops:[]},Ot={next:mi(0),throw:mi(1),return:mi(2)};return typeof Symbol=="function"&&(Ot[Symbol.iterator]=function(){return this}),Ot;function mi(_i){return function(Yt){var ni=[_i,Yt];if(ot)throw new TypeError("Generator is already executing.");for(;Xe=Ot&&ni[Ot=0]?0:Xe;)try{if(ot=1,Ye&&(gt=2&ni[0]?Ye.return:ni[0]?Ye.throw||((gt=Ye.return)&&gt.call(Ye),0):Ye.next)&&!(gt=gt.call(Ye,ni[1])).done)return gt;switch(Ye=0,(ni=gt?[2&ni[0],gt.value]:ni)[0]){case 0:case 1:gt=ni;break;case 4:return Xe.label++,{value:ni[1],done:!1};case 5:Xe.label++,Ye=ni[1],ni=[0];continue;case 7:ni=Xe.ops.pop(),Xe.trys.pop();continue;default:if(!(gt=0<(gt=Xe.trys).length&&gt[gt.length-1])&&(ni[0]===6||ni[0]===2)){Xe=0;continue}if(ni[0]===3&&(!gt||ni[1]>gt[0]&&ni[1]<gt[3]))Xe.label=ni[1];else if(ni[0]===6&&Xe.label<gt[1])Xe.label=gt[1],gt=ni;else{if(!(gt&&Xe.label<gt[2])){gt[2]&&Xe.ops.pop(),Xe.trys.pop();continue}Xe.label=gt[2],Xe.ops.push(ni)}}ni=Le.call(ge,Xe)}catch(pi){ni=[6,pi],Ye=0}finally{ot=gt=0}if(5&ni[0])throw ni[1];return{value:ni[0]?ni[1]:void 0,done:!0}}}}(this,function(ge){switch(ge.label){case 0:return ge.trys.push([0,2,,3]),[4,this._tracer.loadJs(d,T,N,Q,`
function scriptSpanStart(states, tracer, span) {
    
}
function scriptSpanEnd(states, tracer, span) {
    if (span['tags']['msg_content']) {
        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;
        delete span['tags']['msg_content'];
    }
    delete span['tags']['resp'];
    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];
    if (filterSpans.includes(span.name)) {
        console.log(span.name + ' do not report');
        span.droped = true;
    }
}
function scriptInit(states, tracer) {

}

`,{})];case 1:return ge.sent(),Object(ye.c)(window.scriptInit)&&scriptInit(this.commonStates,this._tracer),[3,3];case 2:return te=ge.sent(),this.$t.warn("zm.tc.ls"," load script fail "+JSON.stringify(te)),[3,3];case 3:return[2]}})})},Br.prototype.setReporterInfo=function(d,T){var N=new Map;N.set("userID",d),N.set("token",T),this._tracer.startReport(N)},Br.prototype.flush=function(d){this._tracer.flush(d)},Br.prototype.destroy=function(){this._tracer.destroy()},Br.prototype.setCommonStates=function(d){this.commonStates=d},Br.prototype.setResource=function(d){this._tracer.setResource(d)},Br.prototype.setCommonAttributes=function(d){this._commonAttrs=Object.assign({},this._commonAttrs,d)},Br.prototype.deleteCommonAttributes=function(d){var T=this;d.forEach(function(N){delete T._commonAttrs[N]})},Br.prototype.createSpan=function(d,T,N){return(d=this._tracer.createSpan(d,T,{parent:N})).setAttributes(Ca({ntype:We(),os_type:this.osType,error:0,message:""},this._commonAttrs)),d},Br.prototype.spanEnd=function(d,T){d&&T&&d.setAttributes(Ca({},T)),d&&d.end()},Br.prototype.spanSetAttributes=function(d,T){d&&d.setAttributes(T)},Br.prototype.spanAppendAttribute=function(d,T,N){d&&d.appendAttribute(T,N)},Br.prototype.setError=function(d,T,N){d.setAttributes({error:T.code||T.errorCode,message:(T.msg||T.message||T.extendedData)+" "+(N=N===void 0?"":N)}),d.end()},Br.prototype.setLogger=function(d){this._tracer.setLogger(d)},Br.prototype.setTimeOffset=function(d){this._tracer.setTimeOffset(d)},Br.prototype.setUnloadState=function(d){this.isUnload=!0,this._tracer.setUnloadState(d)},Br.prototype.setNetStateCheck=function(){this._tracer.setNetStateCheck()},Br);function Br(d){this.$t=d,this._product=Vt.product,this._commonAttrs={},this.commonStates={},this.isUnload=!1,new Oc.DynamicCode,this._tracer=new Oc.ZegoTracer(Xr.proxyCtrl),this._tracer.setSampleConfig({level:ce.L}),this.osType=Tc()}var go=["/sdk/start_publish","/publish/start","/publish/restart"],wa=["/sdk/start_play","/play/start","/play/restart"],Ms=(Er.prototype.init=function(d,T,N){this.tracerHandler.init(d,T,N)},Er.prototype.setConfig=function(d){this.tracerHandler.setConfig(d)},Er.prototype.loadScript=function(d,T,N,Q){return this.tracerHandler.loadScript(d,T,N,Q)},Er.prototype.setReporterInfo=function(d,T){this.tracerHandler.setReporterInfo(d,T)},Er.prototype.flush=function(d){this.tracerHandler.flush(d)},Er.prototype.destroy=function(){this.tracerHandler.destroy()},Er.prototype.setCommonStates=function(d){this.tracerHandler.setCommonStates(d)},Er.prototype.setResource=function(d){this.tracerHandler.setResource(d)},Er.prototype.setCommonAttributes=function(d){this.tracerHandler.setCommonAttributes(d)},Er.prototype.deleteCommonAttributes=function(d){this.tracerHandler.deleteCommonAttributes(d)},Er.prototype.clearRoomSpans=function(d){var T=this;d.forEach(function(N){for(var Q in T._reportList)T._reportList[Q].span==null&&delete T._reportList[Q][N]})},Er.prototype.setPublicPros=function(d){this._publicPros=Object.assign({},this._publicPros,d)},Er.prototype.createSpan=function(d,T,N,Q,te){var ge;T&&T.key&&T.par?(Le=T.par1?"_"+T.par1:"",!(ge=(ge=this._reportList[T.key])==null?void 0:ge[T.par+Le])&&T.bak_key&&(ge=(ot=this._reportList[T.bak_key])==null?void 0:ot[T.par+Le])):T&&!(ge=this._reportList[T.key])&&T.bak_key&&(ge=this._reportList[T.bak_key]),ge=ge||this._reportList[Ve.event];var Le,ot=this.tracerHandler.createSpan(d,Q,ge);return T.key==="/sdk/login"&&(ot.setAttribute("room_id",T.par),this._publicPros[T.par])&&ot.setAttributes(this._publicPros[T.par]),(go.includes(T.key)||wa.includes(T.key))&&ot.setAttribute("stream_id",T.par),go.includes(T.key)&&this._publicPros["_publish_"+T.par]&&ot.setAttributes(this._publicPros["_publish_"+T.par]),wa.includes(T.key)&&this._publicPros["_play_"+T.par]&&ot.setAttributes(this._publicPros["_play_"+T.par]),te&&(N.par?(this._reportList[N.key]||(this._reportList[N.key]={}),Le=N.par1?"_"+N.par1:"",this._reportList[N.key][N.par+Le]=ot):this._reportList[N.key]=ot),ot},Er.prototype.setSpanInMap=function(d,T){var N;T.par?(this._reportList[T.key]||(this._reportList[T.key]={}),N=T.par2?"_"+T.par2:"",this._reportList[T.key][T.par+N]=d):this._reportList[T.key]=d},Er.prototype.spanEnd=function(d,T,N){var Q;d.par?(Q=d.par1?"_"+d.par1:"",Q=this._reportList[d.key]&&this._reportList[d.key][d.par+Q],this._reportList[d.key]&&!N&&delete this._reportList[d.key][d.par]):(Q=this._reportList[d.key],N||delete this._reportList[d.key]),this.tracerHandler.spanEnd(Q,T)},Er.prototype.spanSetAttributes=function(d,T){var N,Q;d.par?(N=d.par1?"_"+d.par1:"",!(Q=this._reportList[d.key]&&this._reportList[d.key][d.par+N])&&d.bak_key&&(Q=this._reportList[d.bak_key]&&this._reportList[d.bak_key][d.par+N])):!(Q=this._reportList[d.key])&&d.bak_key&&(Q=this._reportList[d.key]),this.tracerHandler.spanSetAttributes(Q,T)},Er.prototype.spanAppendAttribute=function(d,T,N){var Q,te;d.par?(Q=d.par1?"_"+d.par1:"",!(te=this._reportList[d.key]&&this._reportList[d.key][d.par+Q])&&d.bak_key&&(te=this._reportList[d.bak_key]&&this._reportList[d.bak_key][d.par+Q])):!(te=this._reportList[d.key])&&d.bak_key&&(te=this._reportList[d.key]),this.tracerHandler.spanAppendAttribute(te,T,N)},Er.prototype.setError=function(d,T,N){this.tracerHandler.setError(d,T,N)},Er.prototype.setLogger=function(d){this.tracerHandler.setLogger(d)},Er.prototype.setTimeOffset=function(d){this.tracerHandler.setTimeOffset(d)},Er.prototype.setUnloadState=function(d){this.tracerHandler.setUnloadState(d)},Er.prototype.setNetStateCheck=function(){this.tracerHandler.setNetStateCheck()},Er);function Er(d){this.$t=d,this._reportList={},this._publicPros={},this.tracerHandler=new Yu(d)}Mr.prototype.enableMultiRoom=function(d){return this.zegoWebRTM.enableMultiRoom(d)},Mr.prototype.loginRoom=function(d,T,N,Q){return this.zegoWebRTM.loginRoom(d,T,N,Q)},Mr.prototype.logoutRoom=function(d){return this.zegoWebRTM.logoutRoom(d)},Mr.prototype.renewToken=function(d,T){return this.zegoWebRTM.renewToken(d,T)},Mr.prototype.sendBarrageMessage=function(d,T){return this.zegoWebRTM.sendBarrageMessage(d,T)},Mr.prototype.sendBroadcastMessage=function(d,T){return this.zegoWebRTM.sendBroadcastMessage(d,T)},Mr.prototype.sendCustomCommand=function(d,T,N){return this.zegoWebRTM.sendCustomCommand(d,T,N)},Mr.prototype.setRoomExtraInfo=function(d,T,N){return this.zegoWebRTM.setRoomExtraInfo(d,T,N)},Mr.prototype.setLogConfig=function(d){return this.zegoWebRTM.setLogConfig(d)},Mr.prototype.setDebugVerbose=function(d){return this.zegoWebRTM.setDebugVerbose(d)},Mr.prototype.on=function(d,T){return this.zegoWebRTM.on(d,T)},Mr.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},Mr.prototype.off=function(d,T){return this.zegoWebRTM.off(d,T)},Mr.use=function(d){Xr.use(d)},Mr.setGeoFence=function(d,T){Xr.setGeoFence(d,T)},Mr.setEngineOptions=function(d){Xr.setEngineOptions(d)},Mr.setCloudProxyConfig=function(d,T,N){Xr.setCloudProxyConfig(d,T,N)},Mr.setLocalProxyConfig=function(d,T){Xr.setLocalProxyConfig(d,T)},Mr.version="2.2.0";var kc=Mr;function Mr(d,T,N,Q){var te;N===void 0&&(N=0),(te=Xr.proxyCtrl)!=null&&te.init({appID:d}),this.logger=new se.ZegoLogger(N,Xr.proxyCtrl||void 0),this.dataReport=new se.ZegoDataReport(this.logger),this.reporter=new Ms(this.logger),this.zegoWebRTM=new Xr(d,T,this.logger,this.dataReport,this.reporter,Mr.version,N,Q)}}],U={},w.m=O,w.c=U,w.d=function(V,C,q){w.o(V,C)||Object.defineProperty(V,C,{enumerable:!0,get:q})},w.r=function(V){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(V,"__esModule",{value:!0})},w.t=function(V,C){if(1&C&&(V=w(V)),8&C||4&C&&typeof V=="object"&&V&&V.__esModule)return V;var q=Object.create(null);if(w.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:V}),2&C&&typeof V!="string")for(var ue in V)w.d(q,ue,(function(se){return V[se]}).bind(null,ue));return q},w.n=function(V){var C=V&&V.__esModule?function(){return V.default}:function(){return V};return w.d(C,"a",C),C},w.o=function(V,C){return Object.prototype.hasOwnProperty.call(V,C)},w.p="",w(w.s=21);function w(V){var C;return(U[V]||(C=U[V]={i:V,l:!1,exports:{}},O[V].call(C.exports,C,C.exports,w),C.l=!0,C)).exports}var O,U})}(ZegoExpressWebRTM)),ZegoExpressWebRTM.exports}(function(module,exports){(function(c,l){module.exports=l(requireZegoExpressWebRTM(),requireLocalforage())})(typeof self<"u"?self:commonjsGlobal,function(__WEBPACK_EXTERNAL_MODULE__4119__,__WEBPACK_EXTERNAL_MODULE__3349__){return function(){var __webpack_modules__={4537:function(c){c.exports=function(l,g){for(var v=new Array(arguments.length-1),b=0,_=2,E=!0;_<arguments.length;)v[b++]=arguments[_++];return new Promise(function(w,O){v[b]=function(U){if(E)if(E=!1,U)O(U);else{for(var V=new Array(arguments.length-1),C=0;C<V.length;)V[C++]=arguments[C];w.apply(null,V)}};try{l.apply(g||null,v)}catch(U){E&&(E=!1,O(U))}})}},7419:function(c,l){var g=l;g.length=function(w){var O=w.length;if(!O)return 0;for(var U=0;--O%4>1&&w.charAt(O)==="=";)++U;return Math.ceil(3*w.length)/4-U};for(var v=new Array(64),b=new Array(123),_=0;_<64;)b[v[_]=_<26?_+65:_<52?_+71:_<62?_-4:_-59|43]=_++;g.encode=function(w,O,U){for(var V,C=null,q=[],ue=0,se=0;O<U;){var Y=w[O++];switch(se){case 0:q[ue++]=v[Y>>2],V=(3&Y)<<4,se=1;break;case 1:q[ue++]=v[V|Y>>4],V=(15&Y)<<2,se=2;break;case 2:q[ue++]=v[V|Y>>6],q[ue++]=v[63&Y],se=0}ue>8191&&((C||(C=[])).push(String.fromCharCode.apply(String,q)),ue=0)}return se&&(q[ue++]=v[V],q[ue++]=61,se===1&&(q[ue++]=61)),C?(ue&&C.push(String.fromCharCode.apply(String,q.slice(0,ue))),C.join("")):String.fromCharCode.apply(String,q.slice(0,ue))};var E="invalid encoding";g.decode=function(w,O,U){for(var V,C=U,q=0,ue=0;ue<w.length;){var se=w.charCodeAt(ue++);if(se===61&&q>1)break;if((se=b[se])===void 0)throw Error(E);switch(q){case 0:V=se,q=1;break;case 1:O[U++]=V<<2|(48&se)>>4,V=se,q=2;break;case 2:O[U++]=(15&V)<<4|(60&se)>>2,V=se,q=3;break;case 3:O[U++]=(3&V)<<6|se,q=0}}if(q===1)throw Error(E);return U-C},g.test=function(w){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(w)}},9211:function(c){function l(){this._listeners={}}c.exports=l,l.prototype.on=function(g,v,b){return(this._listeners[g]||(this._listeners[g]=[])).push({fn:v,ctx:b||this}),this},l.prototype.off=function(g,v){if(g===void 0)this._listeners={};else if(v===void 0)this._listeners[g]=[];else for(var b=this._listeners[g],_=0;_<b.length;)b[_].fn===v?b.splice(_,1):++_;return this},l.prototype.emit=function(g){var v=this._listeners[g];if(v){for(var b=[],_=1;_<arguments.length;)b.push(arguments[_++]);for(_=0;_<v.length;)v[_].fn.apply(v[_++].ctx,b)}return this}},945:function(c){function l(E){return typeof Float32Array<"u"?function(){var w=new Float32Array([-0]),O=new Uint8Array(w.buffer),U=O[3]===128;function V(se,Y,pe){w[0]=se,Y[pe]=O[0],Y[pe+1]=O[1],Y[pe+2]=O[2],Y[pe+3]=O[3]}function C(se,Y,pe){w[0]=se,Y[pe]=O[3],Y[pe+1]=O[2],Y[pe+2]=O[1],Y[pe+3]=O[0]}function q(se,Y){return O[0]=se[Y],O[1]=se[Y+1],O[2]=se[Y+2],O[3]=se[Y+3],w[0]}function ue(se,Y){return O[3]=se[Y],O[2]=se[Y+1],O[1]=se[Y+2],O[0]=se[Y+3],w[0]}E.writeFloatLE=U?V:C,E.writeFloatBE=U?C:V,E.readFloatLE=U?q:ue,E.readFloatBE=U?ue:q}():function(){function w(U,V,C,q){var ue=V<0?1:0;if(ue&&(V=-V),V===0)U(1/V>0?0:2147483648,C,q);else if(isNaN(V))U(2143289344,C,q);else if(V>34028234663852886e22)U((ue<<31|2139095040)>>>0,C,q);else if(V<11754943508222875e-54)U((ue<<31|Math.round(V/1401298464324817e-60))>>>0,C,q);else{var se=Math.floor(Math.log(V)/Math.LN2);U((ue<<31|se+127<<23|8388607&Math.round(V*Math.pow(2,-se)*8388608))>>>0,C,q)}}function O(U,V,C){var q=U(V,C),ue=2*(q>>31)+1,se=q>>>23&255,Y=8388607&q;return se===255?Y?NaN:ue*(1/0):se===0?1401298464324817e-60*ue*Y:ue*Math.pow(2,se-150)*(Y+8388608)}E.writeFloatLE=w.bind(null,g),E.writeFloatBE=w.bind(null,v),E.readFloatLE=O.bind(null,b),E.readFloatBE=O.bind(null,_)}(),typeof Float64Array<"u"?function(){var w=new Float64Array([-0]),O=new Uint8Array(w.buffer),U=O[7]===128;function V(se,Y,pe){w[0]=se,Y[pe]=O[0],Y[pe+1]=O[1],Y[pe+2]=O[2],Y[pe+3]=O[3],Y[pe+4]=O[4],Y[pe+5]=O[5],Y[pe+6]=O[6],Y[pe+7]=O[7]}function C(se,Y,pe){w[0]=se,Y[pe]=O[7],Y[pe+1]=O[6],Y[pe+2]=O[5],Y[pe+3]=O[4],Y[pe+4]=O[3],Y[pe+5]=O[2],Y[pe+6]=O[1],Y[pe+7]=O[0]}function q(se,Y){return O[0]=se[Y],O[1]=se[Y+1],O[2]=se[Y+2],O[3]=se[Y+3],O[4]=se[Y+4],O[5]=se[Y+5],O[6]=se[Y+6],O[7]=se[Y+7],w[0]}function ue(se,Y){return O[7]=se[Y],O[6]=se[Y+1],O[5]=se[Y+2],O[4]=se[Y+3],O[3]=se[Y+4],O[2]=se[Y+5],O[1]=se[Y+6],O[0]=se[Y+7],w[0]}E.writeDoubleLE=U?V:C,E.writeDoubleBE=U?C:V,E.readDoubleLE=U?q:ue,E.readDoubleBE=U?ue:q}():function(){function w(U,V,C,q,ue,se){var Y=q<0?1:0;if(Y&&(q=-q),q===0)U(0,ue,se+V),U(1/q>0?0:2147483648,ue,se+C);else if(isNaN(q))U(0,ue,se+V),U(2146959360,ue,se+C);else if(q>17976931348623157e292)U(0,ue,se+V),U((Y<<31|2146435072)>>>0,ue,se+C);else{var pe;if(q<22250738585072014e-324)U((pe=q/5e-324)>>>0,ue,se+V),U((Y<<31|pe/4294967296)>>>0,ue,se+C);else{var ce=Math.floor(Math.log(q)/Math.LN2);ce===1024&&(ce=1023),U(4503599627370496*(pe=q*Math.pow(2,-ce))>>>0,ue,se+V),U((Y<<31|ce+1023<<20|1048576*pe&1048575)>>>0,ue,se+C)}}}function O(U,V,C,q,ue){var se=U(q,ue+V),Y=U(q,ue+C),pe=2*(Y>>31)+1,ce=Y>>>20&2047,X=4294967296*(1048575&Y)+se;return ce===2047?X?NaN:pe*(1/0):ce===0?5e-324*pe*X:pe*Math.pow(2,ce-1075)*(X+4503599627370496)}E.writeDoubleLE=w.bind(null,g,0,4),E.writeDoubleBE=w.bind(null,v,4,0),E.readDoubleLE=O.bind(null,b,0,4),E.readDoubleBE=O.bind(null,_,4,0)}(),E}function g(E,w,O){w[O]=255&E,w[O+1]=E>>>8&255,w[O+2]=E>>>16&255,w[O+3]=E>>>24}function v(E,w,O){w[O]=E>>>24,w[O+1]=E>>>16&255,w[O+2]=E>>>8&255,w[O+3]=255&E}function b(E,w){return(E[w]|E[w+1]<<8|E[w+2]<<16|E[w+3]<<24)>>>0}function _(E,w){return(E[w]<<24|E[w+1]<<16|E[w+2]<<8|E[w+3])>>>0}c.exports=l(l)},7199:function(module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(c){}return null}module.exports=inquire},6662:function(c){c.exports=function(l,g,v){var b=v||8192,_=b>>>1,E=null,w=b;return function(O){if(O<1||O>_)return l(O);w+O>b&&(E=l(b),w=0);var U=g.call(E,w,w+=O);return 7&w&&(w=1+(7|w)),U}}},4997:function(c,l){var g=l;g.length=function(v){for(var b=0,_=0,E=0;E<v.length;++E)(_=v.charCodeAt(E))<128?b+=1:_<2048?b+=2:(64512&_)==55296&&(64512&v.charCodeAt(E+1))==56320?(++E,b+=4):b+=3;return b},g.read=function(v,b,_){if(_-b<1)return"";for(var E,w=null,O=[],U=0;b<_;)(E=v[b++])<128?O[U++]=E:E>191&&E<224?O[U++]=(31&E)<<6|63&v[b++]:E>239&&E<365?(E=((7&E)<<18|(63&v[b++])<<12|(63&v[b++])<<6|63&v[b++])-65536,O[U++]=55296+(E>>10),O[U++]=56320+(1023&E)):O[U++]=(15&E)<<12|(63&v[b++])<<6|63&v[b++],U>8191&&((w||(w=[])).push(String.fromCharCode.apply(String,O)),U=0);return w?(U&&w.push(String.fromCharCode.apply(String,O.slice(0,U))),w.join("")):String.fromCharCode.apply(String,O.slice(0,U))},g.write=function(v,b,_){for(var E,w,O=_,U=0;U<v.length;++U)(E=v.charCodeAt(U))<128?b[_++]=E:E<2048?(b[_++]=E>>6|192,b[_++]=63&E|128):(64512&E)==55296&&(64512&(w=v.charCodeAt(U+1)))==56320?(++U,b[_++]=(E=65536+((1023&E)<<10)+(1023&w))>>18|240,b[_++]=E>>12&63|128,b[_++]=E>>6&63|128,b[_++]=63&E|128):(b[_++]=E>>12|224,b[_++]=E>>6&63|128,b[_++]=63&E|128);return _-O}},3720:function(c){c.exports=g;var l=null;try{l=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function g(k,j,K){this.low=0|k,this.high=0|j,this.unsigned=!!K}function v(k){return(k&&k.__isLong__)===!0}Object.defineProperty(g.prototype,"__isLong__",{value:!0}),g.isLong=v;var b={},_={};function E(k,j){var K,Z,J;return j?(J=0<=(k>>>=0)&&k<256)&&(Z=_[k])?Z:(K=O(k,(0|k)<0?-1:0,!0),J&&(_[k]=K),K):(J=-128<=(k|=0)&&k<128)&&(Z=b[k])?Z:(K=O(k,k<0?-1:0,!1),J&&(b[k]=K),K)}function w(k,j){if(isNaN(k))return j?ce:pe;if(j){if(k<0)return ce;if(k>=ue)return A}else{if(k<=-se)return le;if(k+1>=se)return oe}return k<0?w(-k,j).neg():O(k%q|0,k/q|0,j)}function O(k,j,K){return new g(k,j,K)}g.fromInt=E,g.fromNumber=w,g.fromBits=O;var U=Math.pow;function V(k,j,K){if(k.length===0)throw Error("empty string");if(k==="NaN"||k==="Infinity"||k==="+Infinity"||k==="-Infinity")return pe;if(typeof j=="number"?(K=j,j=!1):j=!!j,(K=K||10)<2||36<K)throw RangeError("radix");var Z;if((Z=k.indexOf("-"))>0)throw Error("interior hyphen");if(Z===0)return V(k.substring(1),j,K).neg();for(var J=w(U(K,8)),D=pe,G=0;G<k.length;G+=8){var M=Math.min(8,k.length-G),L=parseInt(k.substring(G,G+M),K);if(M<8){var W=w(U(K,M));D=D.mul(W).add(w(L))}else D=(D=D.mul(J)).add(w(L))}return D.unsigned=j,D}function C(k,j){return typeof k=="number"?w(k,j):typeof k=="string"?V(k,j):O(k.low,k.high,typeof j=="boolean"?j:k.unsigned)}g.fromString=V,g.fromValue=C;var q=4294967296,ue=q*q,se=ue/2,Y=E(1<<24),pe=E(0);g.ZERO=pe;var ce=E(0,!0);g.UZERO=ce;var X=E(1);g.ONE=X;var P=E(1,!0);g.UONE=P;var z=E(-1);g.NEG_ONE=z;var oe=O(-1,2147483647,!1);g.MAX_VALUE=oe;var A=O(-1,-1,!0);g.MAX_UNSIGNED_VALUE=A;var le=O(0,-2147483648,!1);g.MIN_VALUE=le;var $=g.prototype;$.toInt=function(){return this.unsigned?this.low>>>0:this.low},$.toNumber=function(){return this.unsigned?(this.high>>>0)*q+(this.low>>>0):this.high*q+(this.low>>>0)},$.toString=function(k){if((k=k||10)<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(le)){var j=w(k),K=this.div(j),Z=K.mul(j).sub(this);return K.toString(k)+Z.toInt().toString(k)}return"-"+this.neg().toString(k)}for(var J=w(U(k,6),this.unsigned),D=this,G="";;){var M=D.div(J),L=(D.sub(M.mul(J)).toInt()>>>0).toString(k);if((D=M).isZero())return L+G;for(;L.length<6;)L="0"+L;G=""+L+G}},$.getHighBits=function(){return this.high},$.getHighBitsUnsigned=function(){return this.high>>>0},$.getLowBits=function(){return this.low},$.getLowBitsUnsigned=function(){return this.low>>>0},$.getNumBitsAbs=function(){if(this.isNegative())return this.eq(le)?64:this.neg().getNumBitsAbs();for(var k=this.high!=0?this.high:this.low,j=31;j>0&&!(k&1<<j);j--);return this.high!=0?j+33:j+1},$.isZero=function(){return this.high===0&&this.low===0},$.eqz=$.isZero,$.isNegative=function(){return!this.unsigned&&this.high<0},$.isPositive=function(){return this.unsigned||this.high>=0},$.isOdd=function(){return(1&this.low)==1},$.isEven=function(){return(1&this.low)==0},$.equals=function(k){return v(k)||(k=C(k)),(this.unsigned===k.unsigned||this.high>>>31!=1||k.high>>>31!=1)&&this.high===k.high&&this.low===k.low},$.eq=$.equals,$.notEquals=function(k){return!this.eq(k)},$.neq=$.notEquals,$.ne=$.notEquals,$.lessThan=function(k){return this.comp(k)<0},$.lt=$.lessThan,$.lessThanOrEqual=function(k){return this.comp(k)<=0},$.lte=$.lessThanOrEqual,$.le=$.lessThanOrEqual,$.greaterThan=function(k){return this.comp(k)>0},$.gt=$.greaterThan,$.greaterThanOrEqual=function(k){return this.comp(k)>=0},$.gte=$.greaterThanOrEqual,$.ge=$.greaterThanOrEqual,$.compare=function(k){if(v(k)||(k=C(k)),this.eq(k))return 0;var j=this.isNegative(),K=k.isNegative();return j&&!K?-1:!j&&K?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},$.comp=$.compare,$.negate=function(){return!this.unsigned&&this.eq(le)?le:this.not().add(X)},$.neg=$.negate,$.add=function(k){v(k)||(k=C(k));var j=0,K=0,Z=0,J=0;return Z+=(J+=(65535&this.low)+(65535&k.low))>>>16,K+=(Z+=(this.low>>>16)+(k.low>>>16))>>>16,j+=(K+=(65535&this.high)+(65535&k.high))>>>16,j+=(this.high>>>16)+(k.high>>>16),O((Z&=65535)<<16|(J&=65535),(j&=65535)<<16|(K&=65535),this.unsigned)},$.subtract=function(k){return v(k)||(k=C(k)),this.add(k.neg())},$.sub=$.subtract,$.multiply=function(k){if(this.isZero())return pe;if(v(k)||(k=C(k)),l)return O(l.mul(this.low,this.high,k.low,k.high),l.get_high(),this.unsigned);if(k.isZero())return pe;if(this.eq(le))return k.isOdd()?le:pe;if(k.eq(le))return this.isOdd()?le:pe;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(Y)&&k.lt(Y))return w(this.toNumber()*k.toNumber(),this.unsigned);var j=65535&this.high,K=this.low>>>16,Z=65535&this.low,J=65535&k.high,D=k.low>>>16,G=65535&k.low,M=0,L=0,W=0,ve=0;return W+=(ve+=Z*G)>>>16,L+=(W+=K*G)>>>16,W&=65535,L+=(W+=Z*D)>>>16,M+=(L+=j*G)>>>16,L&=65535,M+=(L+=K*D)>>>16,L&=65535,M+=(L+=Z*J)>>>16,M+=(this.high>>>16)*G+j*D+K*J+Z*(k.high>>>16),O((W&=65535)<<16|(ve&=65535),(M&=65535)<<16|(L&=65535),this.unsigned)},$.mul=$.multiply,$.divide=function(k){if(v(k)||(k=C(k)),k.isZero())throw Error("division by zero");var j,K,Z;if(l)return this.unsigned||this.high!==-2147483648||k.low!==-1||k.high!==-1?O((this.unsigned?l.div_u:l.div_s)(this.low,this.high,k.low,k.high),l.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ce:pe;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return ce;if(k.gt(this.shru(1)))return P;Z=ce}else{if(this.eq(le))return k.eq(X)||k.eq(z)?le:k.eq(le)?X:(j=this.shr(1).div(k).shl(1)).eq(pe)?k.isNegative()?X:z:(K=this.sub(k.mul(j)),Z=j.add(K.div(k)));if(k.eq(le))return this.unsigned?ce:pe;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();Z=pe}for(K=this;K.gte(k);){j=Math.max(1,Math.floor(K.toNumber()/k.toNumber()));for(var J=Math.ceil(Math.log(j)/Math.LN2),D=J<=48?1:U(2,J-48),G=w(j),M=G.mul(k);M.isNegative()||M.gt(K);)M=(G=w(j-=D,this.unsigned)).mul(k);G.isZero()&&(G=X),Z=Z.add(G),K=K.sub(M)}return Z},$.div=$.divide,$.modulo=function(k){return v(k)||(k=C(k)),l?O((this.unsigned?l.rem_u:l.rem_s)(this.low,this.high,k.low,k.high),l.get_high(),this.unsigned):this.sub(this.div(k).mul(k))},$.mod=$.modulo,$.rem=$.modulo,$.not=function(){return O(~this.low,~this.high,this.unsigned)},$.and=function(k){return v(k)||(k=C(k)),O(this.low&k.low,this.high&k.high,this.unsigned)},$.or=function(k){return v(k)||(k=C(k)),O(this.low|k.low,this.high|k.high,this.unsigned)},$.xor=function(k){return v(k)||(k=C(k)),O(this.low^k.low,this.high^k.high,this.unsigned)},$.shiftLeft=function(k){return v(k)&&(k=k.toInt()),(k&=63)==0?this:k<32?O(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):O(0,this.low<<k-32,this.unsigned)},$.shl=$.shiftLeft,$.shiftRight=function(k){return v(k)&&(k=k.toInt()),(k&=63)==0?this:k<32?O(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):O(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},$.shr=$.shiftRight,$.shiftRightUnsigned=function(k){if(v(k)&&(k=k.toInt()),(k&=63)===0)return this;var j=this.high;return k<32?O(this.low>>>k|j<<32-k,j>>>k,this.unsigned):O(k===32?j:j>>>k-32,0,this.unsigned)},$.shru=$.shiftRightUnsigned,$.shr_u=$.shiftRightUnsigned,$.toSigned=function(){return this.unsigned?O(this.low,this.high,!1):this},$.toUnsigned=function(){return this.unsigned?this:O(this.low,this.high,!0)},$.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},$.toBytesLE=function(){var k=this.high,j=this.low;return[255&j,j>>>8&255,j>>>16&255,j>>>24,255&k,k>>>8&255,k>>>16&255,k>>>24]},$.toBytesBE=function(){var k=this.high,j=this.low;return[k>>>24,k>>>16&255,k>>>8&255,255&k,j>>>24,j>>>16&255,j>>>8&255,255&j]},g.fromBytes=function(k,j,K){return K?g.fromBytesLE(k,j):g.fromBytesBE(k,j)},g.fromBytesLE=function(k,j){return new g(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,j)},g.fromBytesBE=function(k,j){return new g(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],j)}},2100:function(c,l,g){c.exports=g(9482)},9482:function(c,l,g){var v=l;function b(){v.util._configure(),v.Writer._configure(v.BufferWriter),v.Reader._configure(v.BufferReader)}v.build="minimal",v.Writer=g(1173),v.BufferWriter=g(3155),v.Reader=g(1408),v.BufferReader=g(593),v.util=g(9693),v.rpc=g(5994),v.roots=g(5054),v.configure=b,b()},1408:function(c,l,g){c.exports=O;var v,b=g(9693),_=b.LongBits,E=b.utf8;function w(Y,pe){return RangeError("index out of range: "+Y.pos+" + "+(pe||1)+" > "+Y.len)}function O(Y){this.buf=Y,this.pos=0,this.len=Y.length}var U,V=typeof Uint8Array<"u"?function(Y){if(Y instanceof Uint8Array||Array.isArray(Y))return new O(Y);throw Error("illegal buffer")}:function(Y){if(Array.isArray(Y))return new O(Y);throw Error("illegal buffer")},C=function(){return b.Buffer?function(Y){return(O.create=function(pe){return b.Buffer.isBuffer(pe)?new v(pe):V(pe)})(Y)}:V};function q(){var Y=new _(0,0),pe=0;if(!(this.len-this.pos>4)){for(;pe<3;++pe){if(this.pos>=this.len)throw w(this);if(Y.lo=(Y.lo|(127&this.buf[this.pos])<<7*pe)>>>0,this.buf[this.pos++]<128)return Y}return Y.lo=(Y.lo|(127&this.buf[this.pos++])<<7*pe)>>>0,Y}for(;pe<4;++pe)if(Y.lo=(Y.lo|(127&this.buf[this.pos])<<7*pe)>>>0,this.buf[this.pos++]<128)return Y;if(Y.lo=(Y.lo|(127&this.buf[this.pos])<<28)>>>0,Y.hi=(Y.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return Y;if(pe=0,this.len-this.pos>4){for(;pe<5;++pe)if(Y.hi=(Y.hi|(127&this.buf[this.pos])<<7*pe+3)>>>0,this.buf[this.pos++]<128)return Y}else for(;pe<5;++pe){if(this.pos>=this.len)throw w(this);if(Y.hi=(Y.hi|(127&this.buf[this.pos])<<7*pe+3)>>>0,this.buf[this.pos++]<128)return Y}throw Error("invalid varint encoding")}function ue(Y,pe){return(Y[pe-4]|Y[pe-3]<<8|Y[pe-2]<<16|Y[pe-1]<<24)>>>0}function se(){if(this.pos+8>this.len)throw w(this,8);return new _(ue(this.buf,this.pos+=4),ue(this.buf,this.pos+=4))}O.create=C(),O.prototype._slice=b.Array.prototype.subarray||b.Array.prototype.slice,O.prototype.uint32=(U=4294967295,function(){if(U=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(U=(U|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(U=(U|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(U=(U|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(U=(U|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return U;if((this.pos+=5)>this.len)throw this.pos=this.len,w(this,10);return U}),O.prototype.int32=function(){return 0|this.uint32()},O.prototype.sint32=function(){var Y=this.uint32();return Y>>>1^-(1&Y)|0},O.prototype.bool=function(){return this.uint32()!==0},O.prototype.fixed32=function(){if(this.pos+4>this.len)throw w(this,4);return ue(this.buf,this.pos+=4)},O.prototype.sfixed32=function(){if(this.pos+4>this.len)throw w(this,4);return 0|ue(this.buf,this.pos+=4)},O.prototype.float=function(){if(this.pos+4>this.len)throw w(this,4);var Y=b.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Y},O.prototype.double=function(){if(this.pos+8>this.len)throw w(this,4);var Y=b.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Y},O.prototype.bytes=function(){var Y=this.uint32(),pe=this.pos,ce=this.pos+Y;if(ce>this.len)throw w(this,Y);return this.pos+=Y,Array.isArray(this.buf)?this.buf.slice(pe,ce):pe===ce?new this.buf.constructor(0):this._slice.call(this.buf,pe,ce)},O.prototype.string=function(){var Y=this.bytes();return E.read(Y,0,Y.length)},O.prototype.skip=function(Y){if(typeof Y=="number"){if(this.pos+Y>this.len)throw w(this,Y);this.pos+=Y}else do if(this.pos>=this.len)throw w(this);while(128&this.buf[this.pos++]);return this},O.prototype.skipType=function(Y){switch(Y){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Y=7&this.uint32())!=4;)this.skipType(Y);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Y+" at offset "+this.pos)}return this},O._configure=function(Y){v=Y,O.create=C(),v._configure();var pe=b.Long?"toLong":"toNumber";b.merge(O.prototype,{int64:function(){return q.call(this)[pe](!1)},uint64:function(){return q.call(this)[pe](!0)},sint64:function(){return q.call(this).zzDecode()[pe](!1)},fixed64:function(){return se.call(this)[pe](!0)},sfixed64:function(){return se.call(this)[pe](!1)}})}},593:function(c,l,g){c.exports=_;var v=g(1408);(_.prototype=Object.create(v.prototype)).constructor=_;var b=g(9693);function _(E){v.call(this,E)}_._configure=function(){b.Buffer&&(_.prototype._slice=b.Buffer.prototype.slice)},_.prototype.string=function(){var E=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+E,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+E,this.len))},_._configure()},5054:function(c){c.exports={}},5994:function(c,l,g){l.Service=g(7948)},7948:function(c,l,g){c.exports=b;var v=g(9693);function b(_,E,w){if(typeof _!="function")throw TypeError("rpcImpl must be a function");v.EventEmitter.call(this),this.rpcImpl=_,this.requestDelimited=!!E,this.responseDelimited=!!w}(b.prototype=Object.create(v.EventEmitter.prototype)).constructor=b,b.prototype.rpcCall=function _(E,w,O,U,V){if(!U)throw TypeError("request must be specified");var C=this;if(!V)return v.asPromise(_,C,E,w,O,U);if(C.rpcImpl)try{return C.rpcImpl(E,w[C.requestDelimited?"encodeDelimited":"encode"](U).finish(),function(q,ue){if(q)return C.emit("error",q,E),V(q);if(ue!==null){if(!(ue instanceof O))try{ue=O[C.responseDelimited?"decodeDelimited":"decode"](ue)}catch(se){return C.emit("error",se,E),V(se)}return C.emit("data",ue,E),V(null,ue)}C.end(!0)})}catch(q){return C.emit("error",q,E),void setTimeout(function(){V(q)},0)}else setTimeout(function(){V(Error("already ended"))},0)},b.prototype.end=function(_){return this.rpcImpl&&(_||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(c,l,g){c.exports=b;var v=g(9693);function b(O,U){this.lo=O>>>0,this.hi=U>>>0}var _=b.zero=new b(0,0);_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1};var E=b.zeroHash="\0\0\0\0\0\0\0\0";b.fromNumber=function(O){if(O===0)return _;var U=O<0;U&&(O=-O);var V=O>>>0,C=(O-V)/4294967296>>>0;return U&&(C=~C>>>0,V=~V>>>0,++V>4294967295&&(V=0,++C>4294967295&&(C=0))),new b(V,C)},b.from=function(O){if(typeof O=="number")return b.fromNumber(O);if(v.isString(O)){if(!v.Long)return b.fromNumber(parseInt(O,10));O=v.Long.fromString(O)}return O.low||O.high?new b(O.low>>>0,O.high>>>0):_},b.prototype.toNumber=function(O){if(!O&&this.hi>>>31){var U=1+~this.lo>>>0,V=~this.hi>>>0;return U||(V=V+1>>>0),-(U+4294967296*V)}return this.lo+4294967296*this.hi},b.prototype.toLong=function(O){return v.Long?new v.Long(0|this.lo,0|this.hi,!!O):{low:0|this.lo,high:0|this.hi,unsigned:!!O}};var w=String.prototype.charCodeAt;b.fromHash=function(O){return O===E?_:new b((w.call(O,0)|w.call(O,1)<<8|w.call(O,2)<<16|w.call(O,3)<<24)>>>0,(w.call(O,4)|w.call(O,5)<<8|w.call(O,6)<<16|w.call(O,7)<<24)>>>0)},b.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},b.prototype.zzEncode=function(){var O=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^O)>>>0,this.lo=(this.lo<<1^O)>>>0,this},b.prototype.zzDecode=function(){var O=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^O)>>>0,this.hi=(this.hi>>>1^O)>>>0,this},b.prototype.length=function(){var O=this.lo,U=(this.lo>>>28|this.hi<<4)>>>0,V=this.hi>>>24;return V===0?U===0?O<16384?O<128?1:2:O<2097152?3:4:U<16384?U<128?5:6:U<2097152?7:8:V<128?9:10}},9693:function(c,l,g){var v=l;function b(E,w,O){for(var U=Object.keys(w),V=0;V<U.length;++V)E[U[V]]!==void 0&&O||(E[U[V]]=w[U[V]]);return E}function _(E){function w(O,U){if(!(this instanceof w))return new w(O,U);Object.defineProperty(this,"message",{get:function(){return O}}),Error.captureStackTrace?Error.captureStackTrace(this,w):Object.defineProperty(this,"stack",{value:new Error().stack||""}),U&&b(this,U)}return(w.prototype=Object.create(Error.prototype)).constructor=w,Object.defineProperty(w.prototype,"name",{get:function(){return E}}),w.prototype.toString=function(){return this.name+": "+this.message},w}v.asPromise=g(4537),v.base64=g(7419),v.EventEmitter=g(9211),v.float=g(945),v.inquire=g(7199),v.utf8=g(4997),v.pool=g(6662),v.LongBits=g(1945),v.isNode=!!(g.g!==void 0&&g.g&&g.g.process&&g.g.process.versions&&g.g.process.versions.node),v.global=v.isNode&&g.g||typeof window<"u"&&window||typeof self<"u"&&self||this,v.emptyArray=Object.freeze?Object.freeze([]):[],v.emptyObject=Object.freeze?Object.freeze({}):{},v.isInteger=Number.isInteger||function(E){return typeof E=="number"&&isFinite(E)&&Math.floor(E)===E},v.isString=function(E){return typeof E=="string"||E instanceof String},v.isObject=function(E){return E&&typeof E=="object"},v.isset=v.isSet=function(E,w){var O=E[w];return!(O==null||!E.hasOwnProperty(w))&&(typeof O!="object"||(Array.isArray(O)?O.length:Object.keys(O).length)>0)},v.Buffer=function(){try{var E=v.inquire("buffer").Buffer;return E.prototype.utf8Write?E:null}catch{return null}}(),v._Buffer_from=null,v._Buffer_allocUnsafe=null,v.newBuffer=function(E){return typeof E=="number"?v.Buffer?v._Buffer_allocUnsafe(E):new v.Array(E):v.Buffer?v._Buffer_from(E):typeof Uint8Array>"u"?E:new Uint8Array(E)},v.Array=typeof Uint8Array<"u"?Uint8Array:Array,v.Long=v.global.dcodeIO&&v.global.dcodeIO.Long||v.global.Long||v.inquire("long"),v.key2Re=/^true|false|0|1$/,v.key32Re=/^-?(?:0|[1-9][0-9]*)$/,v.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,v.longToHash=function(E){return E?v.LongBits.from(E).toHash():v.LongBits.zeroHash},v.longFromHash=function(E,w){var O=v.LongBits.fromHash(E);return v.Long?v.Long.fromBits(O.lo,O.hi,w):O.toNumber(!!w)},v.merge=b,v.lcFirst=function(E){return E.charAt(0).toLowerCase()+E.substring(1)},v.newError=_,v.ProtocolError=_("ProtocolError"),v.oneOfGetter=function(E){for(var w={},O=0;O<E.length;++O)w[E[O]]=1;return function(){for(var U=Object.keys(this),V=U.length-1;V>-1;--V)if(w[U[V]]===1&&this[U[V]]!=null)return U[V]}},v.oneOfSetter=function(E){return function(w){for(var O=0;O<E.length;++O)E[O]!==w&&delete this[E[O]]}},v.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},v._configure=function(){var E=v.Buffer;E?(v._Buffer_from=E.from!==Uint8Array.from&&E.from||function(w,O){return new E(w,O)},v._Buffer_allocUnsafe=E.allocUnsafe||function(w){return new E(w)}):v._Buffer_from=v._Buffer_allocUnsafe=null}},1173:function(c,l,g){c.exports=C;var v,b=g(9693),_=b.LongBits,E=b.base64,w=b.utf8;function O(X,P,z){this.fn=X,this.len=P,this.next=void 0,this.val=z}function U(){}function V(X){this.head=X.head,this.tail=X.tail,this.len=X.len,this.next=X.states}function C(){this.len=0,this.head=new O(U,0,0),this.tail=this.head,this.states=null}var q=function(){return b.Buffer?function(){return(C.create=function(){return new v})()}:function(){return new C}};function ue(X,P,z){P[z]=255&X}function se(X,P){this.len=X,this.next=void 0,this.val=P}function Y(X,P,z){for(;X.hi;)P[z++]=127&X.lo|128,X.lo=(X.lo>>>7|X.hi<<25)>>>0,X.hi>>>=7;for(;X.lo>127;)P[z++]=127&X.lo|128,X.lo=X.lo>>>7;P[z++]=X.lo}function pe(X,P,z){P[z]=255&X,P[z+1]=X>>>8&255,P[z+2]=X>>>16&255,P[z+3]=X>>>24}C.create=q(),C.alloc=function(X){return new b.Array(X)},b.Array!==Array&&(C.alloc=b.pool(C.alloc,b.Array.prototype.subarray)),C.prototype._push=function(X,P,z){return this.tail=this.tail.next=new O(X,P,z),this.len+=P,this},(se.prototype=Object.create(O.prototype)).fn=function(X,P,z){for(;X>127;)P[z++]=127&X|128,X>>>=7;P[z]=X},C.prototype.uint32=function(X){return this.len+=(this.tail=this.tail.next=new se((X>>>=0)<128?1:X<16384?2:X<2097152?3:X<268435456?4:5,X)).len,this},C.prototype.int32=function(X){return X<0?this._push(Y,10,_.fromNumber(X)):this.uint32(X)},C.prototype.sint32=function(X){return this.uint32((X<<1^X>>31)>>>0)},C.prototype.int64=C.prototype.uint64=function(X){var P=_.from(X);return this._push(Y,P.length(),P)},C.prototype.sint64=function(X){var P=_.from(X).zzEncode();return this._push(Y,P.length(),P)},C.prototype.bool=function(X){return this._push(ue,1,X?1:0)},C.prototype.sfixed32=C.prototype.fixed32=function(X){return this._push(pe,4,X>>>0)},C.prototype.sfixed64=C.prototype.fixed64=function(X){var P=_.from(X);return this._push(pe,4,P.lo)._push(pe,4,P.hi)},C.prototype.float=function(X){return this._push(b.float.writeFloatLE,4,X)},C.prototype.double=function(X){return this._push(b.float.writeDoubleLE,8,X)};var ce=b.Array.prototype.set?function(X,P,z){P.set(X,z)}:function(X,P,z){for(var oe=0;oe<X.length;++oe)P[z+oe]=X[oe]};C.prototype.bytes=function(X){var P=X.length>>>0;if(!P)return this._push(ue,1,0);if(b.isString(X)){var z=C.alloc(P=E.length(X));E.decode(X,z,0),X=z}return this.uint32(P)._push(ce,P,X)},C.prototype.string=function(X){var P=w.length(X);return P?this.uint32(P)._push(w.write,P,X):this._push(ue,1,0)},C.prototype.fork=function(){return this.states=new V(this),this.head=this.tail=new O(U,0,0),this.len=0,this},C.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new O(U,0,0),this.len=0),this},C.prototype.ldelim=function(){var X=this.head,P=this.tail,z=this.len;return this.reset().uint32(z),z&&(this.tail.next=X.next,this.tail=P,this.len+=z),this},C.prototype.finish=function(){for(var X=this.head.next,P=this.constructor.alloc(this.len),z=0;X;)X.fn(X.val,P,z),z+=X.len,X=X.next;return P},C._configure=function(X){v=X,C.create=q(),v._configure()}},3155:function(c,l,g){c.exports=_;var v=g(1173);(_.prototype=Object.create(v.prototype)).constructor=_;var b=g(9693);function _(){v.call(this)}function E(w,O,U){w.length<40?b.utf8.write(w,O,U):O.utf8Write?O.utf8Write(w,U):O.write(w,U)}_._configure=function(){_.alloc=b._Buffer_allocUnsafe,_.writeBytesBuffer=b.Buffer&&b.Buffer.prototype instanceof Uint8Array&&b.Buffer.prototype.set.name==="set"?function(w,O,U){O.set(w,U)}:function(w,O,U){if(w.copy)w.copy(O,U,0,w.length);else for(var V=0;V<w.length;)O[U++]=w[V++]}},_.prototype.bytes=function(w){b.isString(w)&&(w=b._Buffer_from(w,"base64"));var O=w.length>>>0;return this.uint32(O),O&&this._push(_.writeBytesBuffer,O,w),this},_.prototype.string=function(w){var O=b.Buffer.byteLength(w);return this.uint32(O),O&&this._push(E,O,w),this},_._configure()},4295:function(c){c.exports=function(){return g={0:function(b,_,E){function w(se){return typeof se=="number"}function O(se){return typeof se=="string"}function U(se){return typeof se=="boolean"}function V(se){return se===void 0}function C(se){return se!==null&&se instanceof Object}function q(se){return typeof se=="function"}function ue(se){return se instanceof Array}E.d(_,"d",function(){return w}),E.d(_,"f",function(){return O}),E.d(_,"b",function(){return U}),E.d(_,"g",function(){return V}),E.d(_,"e",function(){return C}),E.d(_,"c",function(){return q}),E.d(_,"a",function(){return ue})},23:function(b,_,E){function w(D){return D}E.r(_);var O="zm.lv.ssg",U="zm.lv.pss",V="/liveroom/send_end_join_live",C=w,q=w,ue="/liveroom/send_invite_join_live",se=w,Y=w,pe="/liveroom/send_join_live_result",ce=w,X=w,P="/liveroom/send_request_join_live",z=w,oe=w,A={code:1002014,msg:"room not exist"},le={code:1002099,msg:"room inner error"},$=E(0),k=(Object.defineProperty(j.prototype,"u",{get:function(){return this.h.reporter},enumerable:!1,configurable:!0}),j.prototype.resetLiveHandler=function(){this.joinLiveCallbackMap={},this.joinLiveRequestMap={}},j.prototype.getSignalCmdContent=function(D,G,M){return D={request_id:D,room_id:this.room.roomID,from_userid:this.h.idName,from_username:this.h.nickName,to_userid:G},M!=null&&(D.result=M),JSON.stringify(D)},j.prototype.requestJoinLive=function(D,G,M,L){var W,ve=this.h.getRequestId(),de=this.getSignalCmdContent(ve,D);return L!=null&&(this.u.spanSetAttributes({key:P,par:(W=this.room)==null?void 0:W.roomID},{request_id:oe(ve)}),this.joinLiveCallbackMap[ve]=L,this.sendSignalCmd(1001,de,D,G,M),!0)},j.prototype.sendSignalCmd=function(D,G,M,L,W){var ve=this;this.room.isLogin()?((this.h.useNetAgent?this.liveRoomHandler:this.service).sendSignalCmd({sub_cmd:D,signal_msg:G,dest_id_name:[M]},function(de){L&&L(de.header.seq)},function(de){var ne=le;de.header&&de.body?W&&W(ve.rtm.getServerError(de.body.err_code),de.header.seq):(de.code&&de.msg&&(ne=de),W&&W(ne,0))},this.room),this.v.info(O+" call success"+D)):this.v.error(O+" state error")},j.prototype.inviteJoinLive=function(D,G,M,L){var W,ve=this.h.getRequestId(),de=this.getSignalCmdContent(ve,D);return L!=null&&(this.u.spanSetAttributes({key:ue,par:(W=this.room)==null?void 0:W.roomID},{request_id:Y(ve)}),this.joinLiveCallbackMap[ve]=L,this.sendSignalCmd(1003,de,D,G,M),!0)},j.prototype.endJoinLive=function(D,G,M){var L,W=this.h.getRequestId(),ve=this.getSignalCmdContent(W,D);return this.u.spanSetAttributes({key:V,par:(L=this.room)==null?void 0:L.roomID},{request_id:q(W)}),this.sendSignalCmd(1004,ve,D,G,M),!0},j.prototype.respondJoinLive=function(D,G,M,L){var W=this.joinLiveRequestMap[D];if(!W)return this.v.info("zm.lv.rjl no dest id name"),!1;this.u.spanSetAttributes({key:pe,par:(ve=this.room)==null?void 0:ve.roomID},{to_user_id:ce(W)});var ve=0;return G=this.getSignalCmdContent(D,W,ve=G===!0?1:ve),this.sendSignalCmd(1002,G,W,M,L),delete this.joinLiveRequestMap[D],!0},j.prototype.handlePushSignalMsg=function(D){var G=JSON.parse(D.body.signal_msg);switch(this.v.info(U+" hpsm= ",G),D.body.sub_cmd){case 11001:this.handlePushJoinLiveRequestMsg(G);break;case 11002:this.handlePushJoinLiveResultMsg(G);break;case 11003:this.handlePushJoinLiveInviteMsg(G);break;case 11004:this.handlePushJoinLiveStopMsg(G)}},j.prototype.handlePushJoinLiveRequestMsg=function(D){var G,M=D.request_id;Object($.f)(M)?(G=D.from_userid,Object($.f)(G)?(this.joinLiveRequestMap[M]=G,this.onRecvJoinLiveRequest(M,D.from_userid,D.from_username,D.room_id),this.v.info(U+" onRecvJoinLiveRequest "+G)):this.v.error(U+" no from user")):this.v.error(U+" no requestId")},j.prototype.onRecvJoinLiveRequest=function(D,G,M,L){this.h.actionListener("recvJoinLiveRequest",D,G,M,L)},j.prototype.handlePushJoinLiveInviteMsg=function(D){var G,M=D.request_id;Object($.f)(M)?(G=D.from_userid,Object($.f)(G)?(this.joinLiveRequestMap[M]=G,this.onRecvInviteJoinLiveRequest(M,D.from_userid,D.from_username,D.room_id),this.v.info(U+" onRecvInviteJoinLiveRequest "+G)):this.v.error(U+" no from user")):this.v.error(U+"no requestId")},j.prototype.onRecvInviteJoinLiveRequest=function(D,G,M,L){this.h.actionListener("recvInviteJoinLiveRequest",D,G,M,L)},j.prototype.handlePushJoinLiveResultMsg=function(D){var G,M,L=D.request_id;Object($.f)(L)?(G=D.result)==null?this.v.info(U+" no result"):(G=G==1,this.joinLiveCallbackMap[L]&&((M=this.joinLiveCallbackMap[L])?(this.v.info(U+" joinLiveRequest/invite result "+G),delete this.joinLiveCallbackMap[L],M(G,D.from_userid,D.from_username)):this.v.info(U+" no callback"))):this.v.error(U+" no requestId")},j.prototype.handlePushJoinLiveStopMsg=function(D){var G=D.request_id;Object($.f)(G)?(this.v.info(U+" onRecvEndJoinLiveCommand "+D.from_userid),this.onRecvEndJoinLiveCommand(G,D.from_userid,D.from_username,D.room_id)):this.v.error(U+" no requestId")},j.prototype.onRecvEndJoinLiveCommand=function(D,G,M,L){this.h.actionListener("recvEndJoinLiveCommand",D,G,M,L)},j);function j(D,G,M,L,W,ve){this.v=D,this.h=G,this.service=M,this.liveRoomHandler=L,this.rtm=W,this.room=ve,this.joinLiveCallbackMap={},this.joinLiveRequestMap={}}var K={requestJoinLive:function(D,G,M,L,W){var ve=this,de=this.getMsgSpan(P,W||((ne=this.stateCenter.roomModulesList[0])==null?void 0:ne.roomID),!0),ne=this.getRoomModules(W)||this.stateCenter.roomModulesList[0];return ne?(de.setAttributes({to_user_id:z(D)}),ne.liveHandler.requestJoinLive(D,function(he){de.end(),G(he)},function(he,_e){ve.stateCenter.reporter.setError(de,he),M(he,_e)},L)):(this.stateCenter.reporter.setError(de,A),M&&M(A,0),!1)},inviteJoinLive:function(D,G,M,L,W){var ve=this,de=this.getMsgSpan(ue,W||((ne=this.stateCenter.roomModulesList[0])==null?void 0:ne.roomID),!0),ne=this.getRoomModules(W)||this.stateCenter.roomModulesList[0];return ne?(de.setAttributes({to_user_id:se(D)}),ne.liveHandler.inviteJoinLive(D,function(he){de.end(),G(he)},function(he,_e){ve.stateCenter.reporter.setError(de,he),M(he,_e)},L)):(this.stateCenter.reporter.setError(de,A),M&&M(A,0),!1)},endJoinLive:function(D,G,M,L){var W=this,ve=this.getMsgSpan(V,L||((de=this.stateCenter.roomModulesList[0])==null?void 0:de.roomID),!0),de=this.getRoomModules(L)||this.stateCenter.roomModulesList[0];return de?(ve.setAttributes({to_user_id:C(D)}),de.liveHandler.endJoinLive(D,function(ne){ve.end(),G(ne)},function(ne,he){W.stateCenter.reporter.setError(ve,ne),M(ne,he)})):(this.stateCenter.reporter.setError(ve,A),M&&M(A,0),!1)},respondJoinLive:function(D,G,M,L,W){var ve=this,de=this.getMsgSpan(pe,W||((ne=this.stateCenter.roomModulesList[0])==null?void 0:ne.roomID),!0),ne=this.getRoomModules(W)||this.stateCenter.roomModulesList[0];return ne?(de.setAttributes({request_id:X(D),join_result:G}),ne.liveHandler.respondJoinLive(D,G,function(he){de.end(),M(he)},function(he,_e){ve.stateCenter.reporter.setError(de,he),L(he,_e)})):(this.stateCenter.reporter.setError(de,A),L&&L(A,0),!1)}},Z={handlePushSignalMsg:function(D){var G=(M=D==null?void 0:D.header)==null?void 0:M.room_id,M=this.stateCenter.roomModulesList.find(function(L){return L.roomID==G});M?M.liveHandler.handlePushSignalMsg(D):this.logger.error("zm.sv.ps room no found ignore "+JSON.stringify(D))}},J={initLiveHandler:function(){this.liveHandler=new k(this.logger,this.stateCenter,this.service,this.liveRoomHandler,this.rtm,this)}};_.default={type:"live",install:function(D,G,M,L){for(var W in K)Object.defineProperty(D.prototype,W,{value:K[W],writable:!1});for(var W in Z)Object.defineProperty(M.prototype,W,{value:Z[W],writable:!1}),Object.defineProperty(L.prototype,W,{value:Z[W],writable:!1});for(var W in J)Object.defineProperty(G.prototype,W,{value:J[W],writable:!1})}}}},v={},l.m=g,l.c=v,l.d=function(b,_,E){l.o(b,_)||Object.defineProperty(b,_,{enumerable:!0,get:E})},l.r=function(b){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})},l.t=function(b,_){if(1&_&&(b=l(b)),8&_||4&_&&typeof b=="object"&&b&&b.__esModule)return b;var E=Object.create(null);if(l.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:b}),2&_&&typeof b!="string")for(var w in b)l.d(E,w,(function(O){return b[O]}).bind(null,w));return E},l.n=function(b){var _=b&&b.__esModule?function(){return b.default}:function(){return b};return l.d(_,"a",_),_},l.o=function(b,_){return Object.prototype.hasOwnProperty.call(b,_)},l.p="",l(l.s=23);function l(b){var _;return(v[b]||(_=v[b]={i:b,l:!1,exports:{}},g[b].call(_.exports,_,_.exports,l),_.l=!0,_)).exports}var g,v}()},5533:function(c,l,g){c.exports=function(v){return _={0:function(w,O,U){function V(ce){return typeof ce=="number"}function C(ce){return typeof ce=="string"}function q(ce){return typeof ce=="boolean"}function ue(ce){return ce===void 0}function se(ce){return ce!==null&&ce instanceof Object}function Y(ce){return typeof ce=="function"}function pe(ce){return ce instanceof Array}U.d(O,"d",function(){return V}),U.d(O,"f",function(){return C}),U.d(O,"b",function(){return q}),U.d(O,"g",function(){return ue}),U.d(O,"e",function(){return se}),U.d(O,"c",function(){return Y}),U.d(O,"a",function(){return pe})},1:function(w,O){w.exports=v},22:function(w,O,U){function V(He){return He}function C(He){return He}function q(He){return He}U.r(O);var ue,se="zm.scc",Y="zm.sbcm",pe="zm.srlm",ce="zm.sbrm",X="zm.msg.sdr",P="zm.msg.rlr",z="zm.msg.rps",oe="zm.msg.srm",A="zm.msg.scm",le="zm.msg.sbm",$="zm.msg.bps",k="zm.msg.slm",j="zm.sv.ps",K={code:1100001,msg:"input parm error."},Z={code:1100002,msg:"network timeout."},J={code:1000002,msg:"not login"},D={code:1009001,msg:"message content is empty"},G={code:1009010,msg:"failed to send message"},M={code:1002014,msg:"room not exist"},L={code:1002099,msg:"room inner error"},W={code:1109001,msg:"frequency limited."},ve={INPUT_PARAM:K,IM_CONTENT_NULL:D,IM_CONTENT_TOO_LONG:Je={code:1009002,msg:"message content is too long"},ROOM_NOT_EXIST:M},de="/liveroom/send_custom_command",ne=C,he={INPUT_PARAM:K,IM_CONTENT_NULL:D,IM_CONTENT_TOO_LONG:Je,ROOM_NOT_EXIST:M},_e="/liveroom/send_room_message",Ue=q,Fe=q,ze={INPUT_PARAM:K,IM_CONTENT_NULL:D,IM_CONTENT_TOO_LONG:Je,ROOM_NOT_EXIST:M},Me=C,We=C,rt=K,dt={code:1102022,msg:"trans send frequently"},ht=M,Pt=V,ye=V,De=C,xe=q,Je=((D=ue=ue||{})[D.I=0]="I",D[D.H=10]="H",D[D.M=100]="M",D[D.L=1e3]="L",U(1)),ut=U.n(Je),re=U(0),Se=(Object.defineProperty(we.prototype,"_isUseNetAgent",{get:function(){return this.u.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(we.prototype,"h",{get:function(){return this.u.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(we.prototype,"_serviceHandler",{get:function(){return this._isUseNetAgent?this._liveRoomHandler:this._service},enumerable:!1,configurable:!0}),we.prototype.loginRsp=function(He){var Ee=this,it=(He=He.body).ret_timestamp,nt=He.bigim_time_window,tt=He.dati_time_window,Et=He.trans_seqs;if(it!=null&&Object(re.f)(it)&&(He=parseFloat(it),this._serverTimeOffset=He==0?0:+it-new Date().getTime()),nt&&Object(re.d)(nt)&&(this._bigimTimeWindow=nt),tt&&Object(re.d)(tt)&&(this._datiTimeWindow=tt),Et)for(var Nt=0;Nt<Et.length;Nt++){var Vt=Et[Nt].trans_channel,It=Et[Nt].trans_seq_list||Et[Nt].trans_seq_array;0<(It=(It=It.filter(function(ri){var gi=ri.trans_type;return ri=ri.trans_seq,!Ee.transSeqMap[gi]||Ee.transSeqMap[gi].seq<ri})).map(function(ri){return{trans_type:ri.trans_type,trans_local_seq:ri.trans_seq}})).length&&this.fetchReliableMessage(Vt,It)}},we.prototype.sendReliableMessage=function(He,Ee,it,nt){var tt,Et=this;this.v.info(X+" call"),this._room.isLogin()?this._isReliable?(this.v.error(X+" send too often"),nt(dt)):(this.transSeqMap[He]||(this.transSeqMap[He]={seq:0}),tt={trans_type:He,trans_data:Ee,trans_local_seq:this.transSeqMap[He].seq,trans_channel:"clt"},this._isReliable=!0,this._serviceHandler.sendReliableMessage(tt,function(Nt){Et.transSeqMap[He].seq=Nt.body.trans_seq,Et.v.info(X+" trans "+He+" seq "+Nt.body.trans_seq),Et._isReliable=!1,Et.roomExtraInfo[He]={key:He,value:Ee,updateUser:{userID:Et._room.userID,userName:Et._room.userName},updateTime:Date.now()},it({seq:Nt.header.seq,errorCode:0})},function(Nt){var Vt=L;Nt.body&&Nt.body.err_code?(Vt=Et._rtm.getServerError(Nt.body.err_code),Et.v.error(oe+"  "+Vt.msg)):Vt=Nt,Et._isReliable=!1,nt(Vt)},this._room)):(this.v.error(X+" state error"),nt&&nt(J))},we.prototype.fetchReliableMessage=function(He,Ee){function it(Et){nt.handleFetchTransRsp(Et,tt)}var nt=this,tt=(He={trans_channel:He,fetch_array:Ee},this.h.createSpan(ue.H,{key:"/sdk/login",par:this._room.roomID},{key:""},"/liveroom/get_room_extrainfo"));tt.setAttributes({fetch_array:Pt(Ee)}),this._serviceHandler.fetchReliableMessage(He,it,it,this._room),this.v.info("zm.msg.frm call success")},we.prototype.handleFetchTransRsp=function(He,Ee){if(He.body&&He.body.err_code!=0)this.v.error(P+" trans send error "+He.body.err_code),this.u.tracer.setError(Ee,{code:He.body.err_code});else if(He.header&&He.body){var it=He.body.trans_list||He.body.trans_fetch_results,nt=[],tt=[];if(Array.isArray(it)&&0<it.length){for(var Et=0;Et<it.length;Et++){var Nt,Vt,It=it[Et];It.err_code===1000001109?this.v.warn(P+" fetch trans unknown type "+It.err_code):(tt.push({trans_type:Nt=It.trans_type,trans_seq:Vt=It.trans_seq}),It.err_code===1000001110?(this.v.warn(P+" fetch trans seq is wrong "+It.err_code),this.transSeqMap[Nt]={seq:Vt}):!this.transSeqMap[Nt]||this.transSeqMap[Nt].seq<Vt?(this.transSeqMap[Nt]={seq:Vt},nt.push(It)):this.v.warn(P+" fetch trans seq wrong"))}this.roomExtraInfo={},0<nt.length&&this.onRecvReliableMessage(nt)}Ee.setAttributes({result_array:ye(tt)}),Ee.end()}else this.v.error(P+" trans send error "+He),this.u.tracer.setError(Ee,Z)},we.prototype.handlePushTransMsg=function(He){var Ee,it=He.body.trans_type,nt=He.body.trans_seq;!this.transSeqMap[it]||this.transSeqMap[it].seq<nt?(this.transSeqMap[it]={seq:nt},this.onRecvReliableMessage([He.body],((Ee=He==null?void 0:He.body)==null?void 0:Ee.trans_idname)===this.u.idName||((Ee=He==null?void 0:He.body)==null?void 0:Ee.id_name)===this.u.idName)):this.v.warn(z+" trans seq wrong"),this.v.info(z+" trans "+it+" seq "+nt)},we.prototype.sendRoomMsg=function(He,Ee,it,nt,tt,Et){var Nt=this;if(!this._room.isLogin())return this.v.error(oe+" state error"),Et(J),!1;var Vt=Date.parse(new Date+"");return 0<this._sendRoomMsgTime&&this._sendRoomMsgTime+this._sendRoomMsgInterval>Vt?(this.v.info(oe+" freq error"),Et&&Et(W,0,He,nt),!1):(this._sendRoomMsgTime=Vt,Vt=this._serviceHandler.sendRoomMsg({msg_category:He,msg_type:1,msg_priority:1,msg_content:nt},function(It){tt({seq:It.header.seq,errorCode:0,messageID:It.body.msg_id})},function(It){var ri,gi,Si=L;It.header&&It.body?(gi=(ri=[Nt._rtm.getServerError(It.body.err_code),It.body.msg_id])[1],Nt.v.error(oe+"  "+(Si=ri[0]).msg),Et({seq:It.header.seq,errorCode:(Si=Si==Z?G:Si).code,messageID:gi})):(It.code&&It.msg&&(Si=It),Et({seq:0,errorCode:Si.code,messageID:0}))},this._room),this.h.spanSetAttributes({key:_e,par:(He=this._room)==null?void 0:He.roomID},{send_seq:Ue(Vt)}),this.v.info(oe+"  call success"),!0)},we.prototype.handlePushRoomMsg=function(He){var Ee,it=[];this._isUseNetAgent&&(Ee=He.body.msg_list,He.body.msg_list.forEach(function(nt){nt={fromUser:{userID:nt.id_name,userName:nt.nick_name},message:nt.msg_content,sendTime:nt.send_time.toNumber(),messageID:nt.msg_id.toNumber()},it.push(nt)}),He.body.server_msg_id=He.body.server_msg_id.toNumber(),He.body.ret_msg_id=He.body.ret_msg_id.toNumber()),this.u.actionListener("IMRecvBroadcastMessage",this._room.roomID,it),this.u.actionListener("_recvRoomMsg",Ee,He.body.server_msg_id,He.body.ret_msg_id)},we.prototype.sendCustomCommand=function(He,Ee,it,nt){var tt,Et=this;return this._room.isLogin()?(Ee={from_userid:this.u.idName,from_username:this.u.nickName,request_id:this.u.getRequestId(),custom_content:Ee||"",room_id:this._room.roomID},this.h.spanSetAttributes({key:de,par:(tt=this._room)==null?void 0:tt.roomID},{request_id:ne(Ee.request_id)}),tt={dest_id_name:He,custom_msg:JSON.stringify(Ee)},this._serviceHandler.sendCustomCommand(tt,function(Nt){it({seq:Nt.header.seq,errorCode:0})},function(Nt){var Vt,It=Et._rtm.getServerError(Nt.body.err_code);Et.v.error(A+" "+It.msg),Vt=((Vt=Nt.body)==null?void 0:Vt.err_code)===2||((Vt=Nt.body)==null?void 0:Vt.err_code)===1000000002?K:It==Z?G:It,nt({seq:Nt.header.seq,errorCode:Vt.code,code:Vt.code})},this._room),this.v.info(A+" call success"),!0):(this.v.error(A+" state error"),nt(J),!1)},we.prototype.handlePushCustomMsg=function(He){He=[(He=JSON.parse(He.body.custommsg)).from_userid,He.from_username,He.room_id,He.custom_content],this.u.actionListener("IMRecvCustomCommand",He[2],{userID:He[0],userName:He[1]},He[3])},we.prototype.sendBigRoomMessage=function(He,Ee,it,nt,tt,Et){var Nt,Vt,It,ri,gi=this;this._room.isLogin()?(Nt=this._bigimTimeWindow,Vt=this._serverTimeOffset,It=new Date().getTime()+Vt,ri=this._rtm.getSeq().toString(),this._bigImCallbackMap[ri]={success:tt,error:Et},Nt==0?this.sendBigRoomMessageInternal([{msg_category:He,msg_type:1,msg_content:nt,bigmsg_client_id:ri}],function(Si){gi.handleBigImMsgRsp(Si)},function(Si){Et&&Et(Si)}):(tt=Math.floor(It/Nt),this._bigImLastTimeIndex<tt&&this._bigIMmessageList.length==0?(this._bigImLastTimeIndex=tt,this.sendBigRoomMessageInternal([{msg_category:He,msg_type:1,msg_content:nt,bigmsg_client_id:ri}],function(Si){gi.handleBigImMsgRsp(Si)},function(Si){Et&&Et(Si)})):(this._bigIMmessageList.push({msg_category:He,msg_type:1,msg_content:nt,bigmsg_client_id:ri}),this._bigIMmessageList.length==1&&this.setBigImTimer(Vt,Nt)))):(this.v.error(le+" state error"),Et&&Et(J))},we.prototype.sendBigRoomMessageInternal=function(He,Ee,it){this._serviceHandler.sendBigRoomMessage({msgs:He},function(nt){Ee(nt)},function(nt){var tt=L;nt.header&&nt.body||(nt.code&&nt.msg&&(tt=nt),it(tt)),it(tt)},this._room),this.v.info(le+" sendBigRoomMessage called")},we.prototype.handleBigImMsgRsp=function(He){this._bigimTimeWindow=He.body.bigim_time_window;for(var Ee=He.body.msg_list||He.body.msgs,it=0;it<Ee.length;it++){var nt,tt=Ee[it].msg_client_id||Ee[it].bigmsg_client_id;this._bigImCallbackMap[tt]&&((nt=this._bigImCallbackMap[tt].success)!=null&&nt({seq:He.header.seq,errorCode:0,messageID:Ee[it].msg_id||Ee[it].bigmsg_id}),delete this._bigImCallbackMap[tt])}},we.prototype.setBigImTimer=function(He,Ee){var it=this;He=Ee-(new Date().getTime()+He)%Ee,Ee=this._rtm.generateRandumNumber(Ee)+He,this._bigImTimer=setTimeout(function(){it.onBigImTimer()},Ee)},we.prototype.onBigImTimer=function(){for(var He=this,Ee=new Date().getTime()+this._serverTimeOffset,it=(this._bigImLastTimeIndex=Math.floor(Ee/this._bigimTimeWindow),[]),nt=[],tt=0;tt<this._bigIMmessageList.length&&!(20<=tt);tt++){var Et=this._bigIMmessageList[tt];it.push({msg_category:Et.msg_category,msg_type:Et.msg_type,msg_content:Et.msg_content,bigmsg_client_id:Et.bigmsg_client_id}),nt.push(Et.bigmsg_client_id)}20<this._bigIMmessageList.length?this._bigIMmessageList.splice(0,20):this._bigIMmessageList=[],this.sendBigRoomMessageInternal(it,function(Nt){He.handleBigImMsgRsp(Nt)},function(Nt,Vt){for(var It=0;It<nt.length;It++){var ri=nt[It],gi=He._bigImCallbackMap[ri];gi&&(gi.error!=null&&gi.error(Nt,Vt),delete He._bigImCallbackMap[ri])}}),this._bigImTimer&&clearTimeout(this._bigImTimer),this._bigImTimer=null,0<this._bigIMmessageList.length&&this.setBigImTimer(this._serverTimeOffset,this._bigimTimeWindow)},we.prototype.handlePushMergeMsg=function(He){for(var Ee=He.body.message_list||He.body.messages,it=0;it<Ee.length;it++)Ee[it].sub_cmd===14001&&this.handlePushBigRooMsg(Ee[it].msg_body)},we.prototype.handlePushBigRooMsg=function(He){var Ee;if(Object(re.f)(He))try{Ee=JSON.parse(He)}catch{return void this.v.warn($+"parse json error")}else Ee=He;if(Ee){He=Ee.room_id||this._room.roomID;for(var it=[],nt=Ee.msg_list||Ee.msg_data,tt=0;tt<nt.length;tt++){var Et=nt[tt];Et.id_name==this.u.idName?this.v.info($+" self message"):it.push({idName:Et.id_name,nickName:Et.nick_name,messageId:Et.msg_id||Et.bigmsg_id,category:Et.msg_category,type:Et.msg_type,content:Et.msg_content,time:Et.send_time||ut.a.isLong(Et.msg_timestamp)&&Et.msg_timestamp.toNumber()})}it.length==0?this.v.info($+" no other pushData except self"):this.onRecvBigRoomMessage(it,He),this.v.info($+"call success")}else this.v.warn($+" cann't find message body")},we.prototype.onRecvBigRoomMessage=function(He,Ee){var it=[];He.forEach(function(nt){it.push(nt={fromUser:{userID:nt.idName,userName:nt.nickName},message:nt.content,sendTime:nt.time,messageID:nt.messageId})}),this.u.actionListener("IMRecvBarrageMessage",Ee,it),this.u.actionListener("_recvBigRoomMessage",He,Ee)},we.prototype.resetMessageInfo=function(){this.transSeqMap={},this.realyMessageList=[],this._relayTimer&&(clearTimeout(this._relayTimer),this._relayTimer=null),this._bigImLastTimeIndex=0,this._bigIMmessageList=[],this._bigImCallbackMap={},this._bigImTimer&&(clearTimeout(this._bigImTimer),this._bigImTimer=null),this._serverTimeOffset=0,this._datiTimeWindow=0,this._bigimTimeWindow=0},we.prototype.sendRelayMessage=function(He,Ee,it,nt){var tt=this._datiTimeWindow,Et=this._serverTimeOffset;0<tt?(this.realyMessageList.push({type:He,data:Ee,success:it,error:nt}),this.realyMessageList.length==1&&this.setRelayTimer(Et,tt)):this.sendRelayMessageInternal(He,Ee,it,nt)},we.prototype.sendRelayMessageInternal=function(He,Ee,it,nt){var tt=this;this.v.info(k+" call"),this._serviceHandler.sendRelayMessage(He={relay_type:He,relay_data:Ee},function(Et){it&&it(Et.header.seq,Et.body.relay_result)},function(Et){var Nt=L;Et.header&&Et.body?nt&&nt(tt._rtm.getServerError(Et.body.err_code),Et.header.seq):(Et.code&&Et.msg&&(Nt=Et),nt&&nt(Nt,0))},Ee=this._room)},we.prototype.setRelayTimer=function(He,Ee){var it=this;He=new Date().getTime()+He,He=this._rtm.generateRandumNumber(2*Ee-He%Ee),this.v.info(k+" setTimer "+He),this._relayTimer=setTimeout(function(){it.onRelayTimer()},He)},we.prototype.onRelayTimer=function(){var He;this.realyMessageList.length==0?this.v.info(k+"  no relay data"):(this.sendRelayMessageInternal((He=this.realyMessageList[0]).type,He.data,He.success,He.error),this._relayTimer&&clearTimeout(this._relayTimer),this._relayTimer=null,this.realyMessageList.splice(0,1),0<this.realyMessageList.length&&this.setRelayTimer(this._serverTimeOffset,this._datiTimeWindow))},we);function we(He,Ee,it,nt,tt,Et,Nt){var Vt=this;this.v=He,this.u=Ee,this._dataReport=it,this._service=nt,this._liveRoomHandler=tt,this._rtm=Et,this._room=Nt,this._sendRoomMsgTime=0,this._sendRoomMsgInterval=500,this._bigImCallbackMap={},this._bigImLastTimeIndex=0,this._bigIMmessageList=[],this._bigImTimer=null,this._relayTimer=null,this._serverTimeOffset=0,this._datiTimeWindow=0,this._bigimTimeWindow=0,this._isReliable=!1,this.transSeqMap={},this.roomExtraInfo={},this.onRecvReliableMessage=function(It,ri){ri===void 0&&(ri=!1);var gi=It.map(function(Si){var Hi={key:Si.trans_type,value:Si.trans_data,updateUser:{userID:Si.id_name||Si.trans_idname,userName:Si.nick_name||Si.trans_nickname},updateTime:ut.a.isLong(Si.trans_send_time)?Si.trans_send_time.toNumber():Si.trans_send_time};return Vt.roomExtraInfo[Si.trans_type]=Hi});ri?Vt.v.warn(z+" id name same"):(0<gi.length&&Vt.u.actionListener("roomExtraInfoUpdate",Vt._room.roomID,Object.values(Vt.roomExtraInfo)),It.forEach(function(Si){Vt.u.actionListener("recvReliableMessage",Si.trans_type,Si.trans_seq,Si.trans_data)}))},this.realyMessageList=[]}function Ke(He,Ee,it,nt){var tt=this;return it===void 0&&(it=1),nt===void 0&&(nt=1),new Promise(function(Et,Nt){var Vt,It=tt.getMsgSpan(_e,He,!0),ri=(Nt=tt.stateCenter.proxyRes(It,function(gi){It.setAttributes({msg_id:Fe(gi.messageID)}),Et(gi)},Nt)).interResolve;Nt=Nt.interReject,Object(re.f)(He)&&He!=""?Ee===void 0||Ee==""?(tt.logger.error(Y+" message is empty"),Nt(ze.IM_CONTENT_NULL)):Object(re.f)(Ee)?1024<Ee.length?(tt.logger.error(Y+" message too long"),Nt(ze.IM_CONTENT_TOO_LONG)):(Vt=tt.getRoomModules(He),It.setAttributes({send_seq:Ue(),msg_content:Ee}),Vt?Vt.messageHandler.sendRoomMsg(it,nt,He,Ee,function(gi){gi.messageID&&It.setAttributes({msg_id:gi.messageID}),ri(gi)},Nt):Nt(ze.ROOM_NOT_EXIST)):(tt.logger.error(Y+" message must be string"),Nt(ze.INPUT_PARAM," param message error")):(tt.logger.error(Y+" roomid must be string and not empty"),Nt(ze.INPUT_PARAM," param roomID error"))})}function je(He,Ee,it){var nt=this;return new Promise(function(tt,Et){var Nt,Vt,It=nt.getMsgSpan(de,He,!0);Et=(tt=nt.stateCenter.proxyRes(It,tt,Et)).interResolve,tt=tt.interReject,Object(re.f)(He)&&He!=""?!Object(re.a)(it)||it.find(function(ri){return!Object(re.f)(ri)})?(nt.logger.error(se+" dstMembers must be string array"),tt(he.INPUT_PARAM," param toUserList error")):Object(re.f)(Ee)||Object(re.e)(Ee)?Object(re.f)(Ee)&&1024<Ee.length?(nt.logger.error(se+" command too long"),tt(he.IM_CONTENT_TOO_LONG)):(Nt=nt.getRoomModules(He),Vt=Object(re.f)(Ee)?Ee:JSON.stringify(Ee),It.setAttributes({msg_content:Vt}),Nt?Nt.messageHandler.sendCustomCommand(it,Ee,Et,tt):tt(he.ROOM_NOT_EXIST)):(nt.logger.error(se+" custom content must be a non empty string or object"),tt(he.INPUT_PARAM," param command error")):(nt.logger.error(se+" roomid must be string and not empty"),tt(K," param roomID error"))})}function St(He,Ee,it,nt){var tt=this;return it===void 0&&(it=1),nt===void 0&&(nt=1),new Promise(function(Et,Nt){var Vt=tt.getMsgSpan("/liveroom/send_big_room_message",He);Nt=(Et=tt.stateCenter.proxyRes(Vt,Et,Nt)).interResolve,Et=Et.interReject,Object(re.f)(He)&&He!=""?Ee===void 0||Ee==""?(tt.logger.error(ce+" message is empty"),Et(ve.IM_CONTENT_NULL)):Object(re.f)(Ee)?1024<Ee.length?(tt.logger.error(ce+" message too long"),Et(ve.IM_CONTENT_TOO_LONG)):(Vt.setAttributes({msg_content:Ee}),(Vt=tt.getRoomModules(He))?Vt.messageHandler.sendBigRoomMessage(it,nt,He,Ee,Nt,Et):Et(ve.ROOM_NOT_EXIST)):(tt.logger.error(ce+" message must be string"),Et(ve.INPUT_PARAM," param message error")):(tt.logger.error(ce+" roomid must be string and not empty"),Et(ve.INPUT_PARAM," param roomID error"))})}function xt(He,Ee,it){var nt=this;return new Promise(function(tt,Et){var Nt=nt.getMsgSpan("/liveroom/set_room_extrainfo",He),Vt=(tt=nt.stateCenter.proxyRes(Nt,tt,function(It){nt.stateCenter.useNetAgent&&It.errorCode===1015&&(It.errorCode=1002017),Et(It)})).interResolve;tt=tt.interReject,Object(re.f)(He)&&He!=""?Ee&&Object(re.f)(Ee)?128<Ee.length?(nt.logger.error(pe+" type is too long"),tt({errorCode:rt.code})):it&&Object(re.f)(it)?4096<it.length?(nt.logger.error(pe+" type is too long"),tt({errorCode:rt.code})):(Nt.setAttributes({key:Me(Ee),value:We(it)}),(Nt=nt.getRoomModules(He))?Nt.messageHandler.sendReliableMessage(Ee,it,Vt,tt):tt(ht)):(nt.logger.error(pe+" data must be string"),tt({errorCode:rt.code})):(nt.logger.error(pe+" type must be string"),tt({errorCode:rt.code})):(nt.logger.error(Y+" roomid must be string and not empty"),tt(ze.INPUT_PARAM," param roomID error"))})}var Ht={_sendBroadcastMessage:Ke,sendBroadcastMessage:function(He,Ee){var it=this;return new Promise(function(nt,tt){Ke.call(it,He,Ee).then(function(Et){nt({errorCode:Et.errorCode,messageID:Et.messageID,extendedData:Et.extendedData})}).catch(function(Et){tt(Et)})})},_sendCustomCommand:je,sendCustomCommand:function(He,Ee,it){var nt=this;return new Promise(function(tt,Et){je.call(nt,He,Ee,it).then(function(Nt){tt({errorCode:Nt.errorCode,extendedData:Nt.extendedData})}).catch(function(Nt){Et(Nt)})})},_sendBarrageMessage:St,sendBarrageMessage:function(He,Ee){var it=this;return new Promise(function(nt,tt){St.call(it,He,Ee).then(function(Et){nt({errorCode:Et.errorCode,messageID:Et.messageID,extendedData:Et.extendedData})}).catch(function(Et){tt(Et)})})},_setRoomExtraInfo:xt,setRoomExtraInfo:function(He,Ee,it){return xt.call(this,He,Ee,it)},sendRelayMessage:function(He,Ee,it,nt,tt){(tt=this.getRoomModules(tt)||this.stateCenter.roomModulesList[0])?tt.messageHandler.sendRelayMessage(He,Ee,it,nt):nt&&nt(M,0)}},$t={handlePushRoomMsg:function(He){(He=this.handlePushMsg(He))[0].messageHandler.handlePushRoomMsg(He=He[1])},handlePushCustomMsg:function(He){(He=this.handlePushMsg(He))[0].messageHandler.handlePushCustomMsg(He=He[1])},handlePushMergeMsg:function(He){var Ee=(Ee=He==null?void 0:He.header)==null?void 0:Ee.room_id;(Ee=this.rtm.getRoomModules(Ee))?Ee.messageHandler.handlePushMergeMsg(He):this.logger.error(j+" room no found ignore "+JSON.stringify(He))},handlePushTransMsg:function(He){var Ee,it=(nt=this.handlePushMsg(He))[0],nt=nt[1],tt=(tt=He==null?void 0:He.header)==null?void 0:tt.room_id;(tt=this.rtm.getMsgSpan("/liveroom/recv_room_extrainfo",tt)).setAttributes({trans_type:De((Ee=He==null?void 0:He.body)==null?void 0:Ee.trans_type),trans_seq:xe((Ee=He==null?void 0:He.body)==null?void 0:Ee.trans_seq)}),tt.end(),it.messageHandler.handlePushTransMsg(nt)},handleBigImMsgRsp:function(He){var Ee=(Ee=He==null?void 0:He.header)==null?void 0:Ee.room_id;(Ee=this.rtm.getRoomModules(Ee))?Ee.messageHandler.handleBigImMsgRsp(He):this.logger.error(j+" room no found ignore "+JSON.stringify(He))},handlePushMsg:function(He){var Ee=(Ee=He==null?void 0:He.header)==null?void 0:Ee.room_id;if(Ee=this.rtm.getRoomModules(Ee))return[Ee,He];this.logger.error(j+" room no found ignore "+JSON.stringify(He))}},ci={initMessageHandler:function(){this.messageHandler=new Se(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this.rtm,this)}};O.default={type:"message",install:function(He,Ee,it,nt){for(var tt in Ht)Object.defineProperty(He.prototype,tt,{value:Ht[tt],writable:!1});for(var tt in $t)Object.defineProperty(it.prototype,tt,{value:$t[tt],writable:!1}),Object.defineProperty(nt.prototype,tt,{value:$t[tt],writable:!1});for(var tt in ci)Object.defineProperty(Ee.prototype,tt,{value:ci[tt],writable:!1})}}}},E={},b.m=_,b.c=E,b.d=function(w,O,U){b.o(w,O)||Object.defineProperty(w,O,{enumerable:!0,get:U})},b.r=function(w){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},b.t=function(w,O){if(1&O&&(w=b(w)),8&O||4&O&&typeof w=="object"&&w&&w.__esModule)return w;var U=Object.create(null);if(b.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:w}),2&O&&typeof w!="string")for(var V in w)b.d(U,V,(function(C){return w[C]}).bind(null,V));return U},b.n=function(w){var O=w&&w.__esModule?function(){return w.default}:function(){return w};return b.d(O,"a",O),O},b.o=function(w,O){return Object.prototype.hasOwnProperty.call(w,O)},b.p="",b(b.s=22);function b(w){var O;return(E[w]||(O=E[w]={i:w,l:!1,exports:{}},_[w].call(O.exports,O,O.exports,b),O.l=!0,O)).exports}var _,E}(g(3720))},8413:function(c,l,g){var v=g(2100);const b=g(3720);v.util.Long=b,v.util.Long.fromBits=v.util.Long?v.util.Long.fromBits:function(){return 0};for(var _=v.roots,E=v.types?v.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},w=v.types?v.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},O=Object.keys(E),U={$:function(q){return U[q]?U[q].call(this):_[q].decode?_[q].decode(this,this.uint32()):U.$.call(this,"int32")}},V={$:function(q,ue,se){var Y=E[q];return Y===void 0?_[q].encode?(this.uint32((se<<3|2)>>0).fork(),_[q].encode(ue,this).ldelim()):V.$.call(this,"int32",ue,se):V[q].call(this.uint32(se<<3|Y),ue)}},C=0;C<O.length;C++)U[O[C]]=v.Reader.prototype[O[C]],V[O[C]]=v.Writer.prototype[O[C]];(function q(ue,se,Y,pe){for(var ce=0,X=Object.keys(ue);ce<X.length;ce++){var P=X[ce];if(ue[P].$m&&Object.keys(ue[P].$m).every(function(z){return Number(z)})){if(Y[P])throw Error(`nested type ${Y}.${P} has already exist`);Y[P]=function(z,oe){function A(K){for(var Z in z){var J=z[Z];J[1].charAt(0)==="{"?this[J[0]]={}:J[1].charAt(0)!=="["&&J[1].charAt(0)!=="<"||(this[J[0]]=[])}if(K)for(var D=Object.keys(K),G=0;G<D.length;++G)K[D[G]]!=null&&(this[D[G]]=K[D[G]])}var le={};for(var $ in z){var k=z[$],j=k[1];j.charAt(0)==="{"?(A.prototype[k[0]]=v.util.emptyObject,le[j]={$m:j.substring(1).split(",").map(function(K,Z){return[`$${Z+1}`,K,null]}).reduce(function(K,Z,J){return K[J+1]=Z,K},{})}):A.prototype[k[0]]=j.charAt(0)==="["||j.charAt(0)==="<"?v.util.emptyArray:j==="bytes"?v.util.newBuffer([]):k[2]&&k[2].hasOwnProperty("low")&&k[2].hasOwnProperty("high")?v.util.Long.fromBits(k[2].low,k[2].high,k[2].unsigned):k[2]}return A.create=function(K){return new A(K)},A.decode=function(K,Z){K instanceof v.Reader||(K=v.Reader.create(K));for(var J=Z===void 0?K.len:K.pos+Z,D=new A;K.pos<J;){var G=K.uint32(),M=G>>>3;if(M>0&&z[M]){var L=z[M][0],W=z[M][1];if(W.charAt(0)==="{"){D[L]===v.util.emptyObject&&(D[L]={});var ve=A.$namespace[W].decode(K,K.uint32());D[L][ve.$1]=ve.$2}else if(W.charAt(0)==="["||W.charAt(0)==="<")if(W=W.substring(1),D[L]&&D[L].length||(D[L]=[]),w[W=!U[W]&&!_[W].decode?"int32":W]!==void 0&&(7&G)==2)for(var de=K.uint32()+K.pos;K.pos<de;)D[L].push(U.$.call(K,W));else D[L].push(U.$.call(K,W));else D[L]=U.$.call(K,W)}else K.skipType(7&G)}return D},A.encode=function(K,Z){for(var J in Z||(Z=v.Writer.create()),z){var D=z[J][0],G=z[J][1];if(G.charAt(0)==="{"){if(K[D]!=null&&K.hasOwnProperty(D))for(var M=0,L=Object.keys(K[D]);M<L.length;++M)Z.uint32((J<<3|2)>>0).fork(),A.$namespace[G].encode({$1:L[M],$2:K[D][L[M]]},Z).ldelim()}else if(G.charAt(0)==="["||G.charAt(0)==="<"){var W=G.charAt(0)==="<";G=G.substring(1);var ve=K[D];if(ve!=null&&ve.length)if(G=E[G]===void 0&&!_[G].encode?"int32":G,W&&w[G]!==void 0){for(Z.uint32((J<<3|2)>>0).fork(),M=0;M<ve.length;M++)V[G].call(Z,ve[M]);Z.ldelim()}else for(M=0;M<ve.length;M++)V.$.call(Z,G,ve[M],J)}else K[D]!=null&&K.hasOwnProperty(D)&&V.$.call(Z,G,K[D],J)}return Z},Object.keys(le).length&&(A.$namespace=q(le,se+"."+oe,A.$namespace||{},!0)),A}(ue[P].$m,P)}else ue[P].$s?Y[P]=function(z,oe){function A(le,$,k){v.rpc.Service.call(this,le,$,k)}return(A.prototype=Object.create(v.rpc.Service.prototype)).constructor=A,A.create=function(le,$,k){return new A(le,$,k)},Object.keys(z).forEach(function(le){var $=z[le];function k(j,K){return this.rpcCall(k,_[$[0]],_[$[1]],j,K)}Object.defineProperty(k,"name",{value:le}),Object.defineProperty(k,"path",{value:`${se}.${oe}`}),A.prototype[le]=k}),A}(ue[P].$s,P):ue[P].$e&&Object.values(ue[P].$e).every(function(z){return Number(z)===z})&&(Y[P]=function(z,oe){for(var A=Object.keys(z),le={},$=0;$<A.length;$++)le[le[A[$]]=z[A[$]]]=A[$];return le}(ue[P].$e));Y[P]&&!pe&&(_[`${se}.${P}`]=Y[P]),delete ue[P].$m,delete ue[P].$s,delete ue[P].$e,Y[P]=q(ue[P],se?`${se}.${P}`:P,Y[P]||{})}return Y})({mixstream:{proto_mixstream:{MixAdvanceConfig:{$m:{1:["key","string",""],2:["value","string",""]}},MixImage:{$m:{1:["url","string",""],2:["display_mode","int32",0]}},MixInputStream:{$m:{1:["stream_input_common","mixstream.proto_mixstream.MixInputStreamCommon",null],2:["volume","int32",0],3:["audio_focus","int32",0],4:["audio_h_angle","int32",0],5:["render_mode","int32",0],6:["corner_radius","uint32",0],7:["label","mixstream.proto_mixstream.MixLabel",null],8:["image","mixstream.proto_mixstream.MixImage",null]}},MixInputStreamCommon:{$m:{1:["stream_id","string",""],2:["sound_level_id","uint32",0],3:["content_control","int32",0],4:["layer_rect","mixstream.proto_mixstream.MixRect",null],5:["stream_url","string",""]}},MixLabel:{$m:{1:["text","string",""],2:["text_left","int32",0],3:["text_top","int32",0],4:["font","mixstream.proto_mixstream.MixLableFont",null]}},MixLableFont:{$m:{1:["font_type","int32",0],2:["font_size","int32",0],3:["font_color","int32",0],4:["font_transparency","int32",0],5:["font_border_color","sint32",0]}},MixOutputStream:{$m:{1:["output_stream_common","mixstream.proto_mixstream.MixOutputStreamCommon",null],2:["video_enc_id","int32",0],3:["video_encode_latency","int32",0],4:["video_encode_profile","int32",0],5:["low_bitrate_hd","int32",0]}},MixOutputStreamCommon:{$m:{1:["is_url","int32",0],2:["target","string",""],3:["video_fps","int32",0],4:["rate_control_mode","int32",0],5:["video_bitrate","int32",0],6:["video_width","int32",0],7:["video_height","int32",0],8:["output_quality","int32",0],9:["audio_bitrate","int32",0],10:["audio_enc_id","int32",0]}},MixRect:{$m:{1:["top","int32",0],2:["left","int32",0],3:["bottom","int32",0],4:["right","int32",0],5:["layer","int32",0]}},MixStartReplyData:{$m:{1:["request_id","string",""],2:["play_infos","<mixstream.proto_mixstream.PlayInfo",null]}},MixStreamCommon:{$m:{1:["user_data","string",""],2:["output_bg_color","int32",0],3:["output_bg_image","string",""],4:["with_sound_level","int32",0],5:["single_stream_pass_through","int32",0],6:["alignment_type","int32",0]}},MixstreamServerCommonResponse:{$m:{1:["code","uint32",0],2:["message","string",""]}},MixStreamStartRequest:{$m:{1:["request_seq","uint32",0],2:["mix_protocol_version","int32",0],3:["task_id","string",""],4:["room_id","string",""],5:["mix_stream_common","mixstream.proto_mixstream.MixStreamCommon",null],6:["audio_channel_cnt","int32",0],7:["audio_mix_mode","int32",0],8:["recv_buffer_level","sint32",0],9:["input_stream","<mixstream.proto_mixstream.MixInputStream",null],10:["water_mark","mixstream.proto_mixstream.MixWaterMark",null],11:["advance_config","<mixstream.proto_mixstream.MixAdvanceConfig",null],12:["output_stream","<mixstream.proto_mixstream.MixOutputStream",null],13:["white_board","mixstream.proto_mixstream.MixWhiteBoard",null],14:["timestamp","int64",{low:0,high:0,unsigned:!1}]}},MixStreamStartResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null],3:["data","mixstream.proto_mixstream.MixStartReplyData",null],4:["error_streamid_list","<string",null]}},MixStreamStopRequest:{$m:{1:["request_seq","uint32",0],2:["task_id","string",""],3:["room_id","string",""],4:["is_url","int32",0],5:["target","string",""],6:["timestamp","int64",{low:0,high:0,unsigned:!1}]}},MixStreamStopResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null]}},MixWaterMark:{$m:{1:["image","string",""],2:["layout_rect","mixstream.proto_mixstream.MixRect",null]}},MixWhiteBoard:{$m:{1:["whiteboard_id","uint64",{low:0,high:0,unsigned:!0}],2:["horizontal_ratio","int32",0],3:["vertical_ratio","int32",0],4:["is_ppt_animation","int32",0],5:["layout_rect","mixstream.proto_mixstream.MixRect",null],6:["background_color","int32",0]}},PlayInfo:{$m:{1:["stream_alias","string",""],2:["rtmp_url","string",""],3:["hls_url","string",""],4:["hdl_url","string",""]}}}}},"",_,!1),l.Z=_.mixstream},1054:function(c,l,g){var v,b=g(2100),_=b.Reader,E=b.Writer,w=b.roots.default||(b.roots.default={});w.proto_media=((v={}).MediaServerCommonResponse=function(){function O(U){if(U)for(var V=Object.keys(U),C=0;C<V.length;++C)U[V[C]]!=null&&(this[V[C]]=U[V[C]])}return O.prototype.code=0,O.prototype.message="",O.create=function(U){return new O(U)},O.encode=function(U,V){return V||(V=E.create()),U.code!=null&&Object.hasOwnProperty.call(U,"code")&&V.uint32(8).uint32(U.code),U.message!=null&&Object.hasOwnProperty.call(U,"message")&&V.uint32(18).string(U.message),V},O.decode=function(U,V){U instanceof _||(U=_.create(U));for(var C=V===void 0?U.len:U.pos+V,q=new w.proto_media.MediaServerCommonResponse;U.pos<C;){var ue=U.uint32();switch(ue>>>3){case 1:q.code=U.uint32();break;case 2:q.message=U.string();break;default:U.skipType(7&ue)}}return q},O}(),v.RelayPublishCdnRequest=function(){function O(U){if(U)for(var V=Object.keys(U),C=0;C<V.length;++C)U[V[C]]!=null&&(this[V[C]]=U[V[C]])}return O.prototype.request_seq=0,O.prototype.request_cmd=0,O.prototype.streamid="",O.prototype.cdn_server="",O.create=function(U){return new O(U)},O.encode=function(U,V){return V||(V=E.create()),U.request_seq!=null&&Object.hasOwnProperty.call(U,"request_seq")&&V.uint32(8).uint32(U.request_seq),U.request_cmd!=null&&Object.hasOwnProperty.call(U,"request_cmd")&&V.uint32(16).int32(U.request_cmd),U.streamid!=null&&Object.hasOwnProperty.call(U,"streamid")&&V.uint32(26).string(U.streamid),U.cdn_server!=null&&Object.hasOwnProperty.call(U,"cdn_server")&&V.uint32(34).string(U.cdn_server),V},O.decode=function(U,V){U instanceof _||(U=_.create(U));for(var C=V===void 0?U.len:U.pos+V,q=new w.proto_media.RelayPublishCdnRequest;U.pos<C;){var ue=U.uint32();switch(ue>>>3){case 1:q.request_seq=U.uint32();break;case 2:q.request_cmd=U.int32();break;case 3:q.streamid=U.string();break;case 4:q.cdn_server=U.string();break;default:U.skipType(7&ue)}}return q},O}(),v.RelayPublishCdnResponse=function(){function O(U){if(U)for(var V=Object.keys(U),C=0;C<V.length;++C)U[V[C]]!=null&&(this[V[C]]=U[V[C]])}return O.prototype.request_seq=0,O.prototype.response=null,O.create=function(U){return new O(U)},O.encode=function(U,V){return V||(V=E.create()),U.request_seq!=null&&Object.hasOwnProperty.call(U,"request_seq")&&V.uint32(8).uint32(U.request_seq),U.response!=null&&Object.hasOwnProperty.call(U,"response")&&w.proto_media.MediaServerCommonResponse.encode(U.response,V.uint32(18).fork()).ldelim(),V},O.decode=function(U,V){U instanceof _||(U=_.create(U));for(var C=V===void 0?U.len:U.pos+V,q=new w.proto_media.RelayPublishCdnResponse;U.pos<C;){var ue=U.uint32();switch(ue>>>3){case 1:q.request_seq=U.uint32();break;case 2:q.response=w.proto_media.MediaServerCommonResponse.decode(U,U.uint32());break;default:U.skipType(7&ue)}}return q},O}(),v),c.exports=w},6531:function(){var c=function(){function l(y,x){postMessage({action:Ri,cbn:x,result:y})}function g(y){var x=[];return x[y-1]=void 0,x}function v(y,x){return E(y[0]+x[0],y[1]+x[1])}function b(y,x){return function(I,B){var me,Oe;return me=I*Ii,Oe=B,0>B&&(Oe+=Ii),[Oe,me]}(~~Math.max(Math.min(y[1]/Ii,2147483647),-2147483648)&~~Math.max(Math.min(x[1]/Ii,2147483647),-2147483648),U(y)&U(x))}function _(y,x){var I,B;return y[0]==x[0]&&y[1]==x[1]?0:(B=0>x[1],(I=0>y[1])&&!B?-1:!I&&B?1:ue(y,x)[1]<0?-1:1)}function E(y,x){var I,B;for(y%=18446744073709552e3,x=(x%=18446744073709552e3)-(I=x%Ii)+(B=Math.floor(y/Ii)*Ii),y=y-B+I;0>y;)y+=Ii,x-=Ii;for(;y>4294967295;)y-=Ii,x+=Ii;for(x%=18446744073709552e3;x>9223372032559809e3;)x-=18446744073709552e3;for(;-9223372036854776e3>x;)x+=18446744073709552e3;return[y,x]}function w(y,x){return y[0]==x[0]&&y[1]==x[1]}function O(y){return y>=0?[y,0]:[y+Ii,-Ii]}function U(y){return y[0]>=2147483648?~~Math.max(Math.min(y[0]-Ii,2147483647),-2147483648):~~Math.max(Math.min(y[0],2147483647),-2147483648)}function V(y){return 30>=y?1<<y:V(30)*V(y-30)}function C(y,x){var I,B,me,Oe;if(x&=63,w(y,hi))return x?fe:y;if(0>y[1])throw Error("Neg");return Oe=V(x),B=y[1]*Oe%18446744073709552e3,(B+=I=(me=y[0]*Oe)-me%Ii)>=9223372036854776e3&&(B-=18446744073709552e3),[me-=I,B]}function q(y,x){var I;return I=V(x&=63),E(Math.floor(y[0]/I),y[1]/I)}function ue(y,x){return E(y[0]-x[0],y[1]-x[1])}function se(y,x){return y.Mc=x,y.Lc=0,y.Yb=x.length,y}function Y(y){return y.Lc>=y.Yb?-1:255&y.Mc[y.Lc++]}function pe(y,x,I,B){return y.Lc>=y.Yb?-1:(B=Math.min(B,y.Yb-y.Lc),oe(y.Mc,y.Lc,x,I,B),y.Lc+=B,B)}function ce(y){return y.Mc=g(32),y.Yb=0,y}function X(y){var x=y.Mc;return x.length=y.Yb,x}function P(y,x){y.Mc[y.Yb++]=x<<24>>24}function z(y,x,I,B){oe(x,I,y.Mc,y.Yb,B),y.Yb+=B}function oe(y,x,I,B,me){for(var Oe=0;me>Oe;++Oe)I[B+Oe]=y[x+Oe]}function A(y,x,I,B,me){var Oe,Qe;if(_(B,yi)<0)throw Error("invalid length "+B);for(y.Tb=B,function(qe,yt){(function(Re,_t){Re.ab=_t;for(var ii=0;_t>1<<ii;++ii);Re.$b=2*ii})(yt,1<<qe.s),yt.n=qe.f,function(Re,_t){var ii=Re.X;Re.X=_t,Re.b&&ii!=Re.X&&(Re.wb=-1,Re.b=null)}(yt,qe.m),yt.eb=0,yt.fb=3,yt.Y=2,yt.y=3}(me,Oe=ye({})),Oe.Gc=c.disableEndMark===void 0,function(qe,yt){qe.fc[0]=9*(5*qe.Y+qe.eb)+qe.fb<<24>>24;for(var Re=0;4>Re;++Re)qe.fc[1+Re]=qe.ab>>8*Re<<24>>24;z(yt,qe.fc,0,5)}(Oe,I),Qe=0;64>Qe;Qe+=8)P(I,255&U(q(B,Qe)));y.yb=(Oe.W=0,Oe.oc=x,Oe.pc=0,function(qe){var yt,Re;qe.b||(yt={},Re=4,qe.X||(Re=2),function(_t,ii){_t.qb=ii>2,_t.qb?(_t.w=0,_t.xb=4,_t.R=66560):(_t.w=2,_t.xb=3,_t.R=0)}(yt,Re),qe.b=yt),it(qe.A,qe.eb,qe.fb),(qe.ab!=qe.wb||qe.Hb!=qe.n)&&(G(qe.b,qe.ab,4096,qe.n,274),qe.wb=qe.ab,qe.Hb=qe.n)}(Oe),Oe.d.Ab=I,function(qe){(function(Re){Re.l=0,Re.J=0;for(var _t=0;4>_t;++_t)Re.v[_t]=0})(qe),function(Re){Re.mc=fe,Re.xc=fe,Re.E=-1,Re.Jb=1,Re.Oc=0}(qe.d),zt(qe.C),zt(qe._),zt(qe.bb),zt(qe.hb),zt(qe.Ub),zt(qe.vc),zt(qe.Sb),function(Re){var _t,ii=1<<Re.u+Re.I;for(_t=0;ii>_t;++_t)zt(Re.V[_t].tb)}(qe.A);for(var yt=0;4>yt;++yt)zt(qe.K[yt].G);xt(qe.$,1<<qe.Y),xt(qe.i,1<<qe.Y),zt(qe.S.G),qe.N=0,qe.jb=0,qe.q=0,qe.s=0}(Oe),xe(Oe),De(Oe),Oe.$.rb=Oe.n+1-2,Ee(Oe.$,1<<Oe.Y),Oe.i.rb=Oe.n+1-2,Ee(Oe.i,1<<Oe.Y),Oe.g=fe,function(qe,yt){return qe.cb=yt,qe.Z=null,qe.zc=1,qe}({},Oe))}function le(y,x,I){return y.Nb=ce({}),A(y,se({},x),y.Nb,O(x.length),I),y}function $(y,x,I){var B,me,Oe,Qe,qe="",yt=[];for(me=0;5>me;++me){if((Oe=Y(x))==-1)throw Error("truncated input");yt[me]=Oe<<24>>24}if(!function(Re,_t){var ii,Wt,Ie,Ve,Ne,$e,mt;if(5>_t.length)return 0;for(Ie=(mt=255&_t[0])%9,Ve=($e=~~(mt/9))%5,Ne=~~($e/5),ii=0,Wt=0;4>Wt;++Wt)ii+=(255&_t[1+Wt])<<8*Wt;return ii>99999999||!function(ct,qt,Bt,jt){if(qt>8||Bt>4||jt>4)return 0;dt(ct.gb,Bt,qt);var Xt=1<<jt;return ze(ct.Rb,Xt),ze(ct.sb,Xt),ct.Dc=Xt-1,1}(Re,Ie,Ve,Ne)?0:function(ct,qt){return 0>qt?0:(ct.Ob!=qt&&(ct.Ob=qt,ct.nb=Math.max(ct.Ob,1),W(ct.B,Math.max(ct.nb,4096))),1)}(Re,ii)}(B=Fe({}),yt))throw Error("corrupted input");for(me=0;64>me;me+=8){if((Oe=Y(x))==-1)throw Error("truncated input");(Oe=Oe.toString(16)).length==1&&(Oe="0"+Oe),qe=Oe+""+qe}/^0+$|^f+$/i.test(qe)?y.Tb=yi:(Qe=parseInt(qe,16),y.Tb=Qe>4294967295?yi:O(Qe)),y.yb=function(Re,_t,ii,Wt){return Re.e.Ab=_t,ne(Re.B),Re.B.cc=ii,function(Ie){Ie.B.h=0,Ie.B.o=0,zt(Ie.Gb),zt(Ie.pb),zt(Ie.Zb),zt(Ie.Cb),zt(Ie.Db),zt(Ie.Eb),zt(Ie.kc),function(Ne){var $e,mt;for(mt=1<<Ne.u+Ne.I,$e=0;mt>$e;++$e)zt(Ne.V[$e].Ib)}(Ie.gb);for(var Ve=0;4>Ve;++Ve)zt(Ie.kb[Ve].G);rt(Ie.Rb),rt(Ie.sb),zt(Ie.Fb.G),function(Ne){Ne.Bb=0,Ne.E=-1;for(var $e=0;5>$e;++$e)Ne.Bb=Ne.Bb<<8|Y(Ne.Ab)}(Ie.e)}(Re),Re.U=0,Re.ib=0,Re.Jc=0,Re.Ic=0,Re.Qc=0,Re.Nc=Wt,Re.g=fe,Re.jc=0,function(Ie,Ve){return Ie.Z=Ve,Ie.cb=null,Ie.zc=1,Ie}({},Re)}(B,x,I,y.Tb)}function k(y,x){return y.Nb=ce({}),$(y,se({},x),y.Nb),y}function j(y,x){return y.c[y.f+y.o+x]}function K(y,x,I,B){var me,Oe;for(y.T&&y.o+x+B>y.h&&(B=y.h-(y.o+x)),++I,Oe=y.f+y.o+x,me=0;B>me&&y.c[Oe+me]==y.c[Oe+me-I];++me);return me}function Z(y){return y.h-y.o}function J(y){var x,I;if(!y.T)for(;;){if(!(I=-y.f+y.Kb-y.h))return;if((x=pe(y.cc,y.c,y.f+y.h,I))==-1)return y.zb=y.h,y.f+y.zb>y.H&&(y.zb=y.H-y.f),void(y.T=1);y.h+=x,y.h>=y.o+y._b&&(y.zb=y.h-y._b)}}function D(y,x){y.f+=x,y.zb-=x,y.o-=x,y.h-=x}function G(y,x,I,B,me){var Oe,Qe;1073741567>x&&(y.Fc=16+(B>>1),function(qe,yt,Re,_t){var ii;qe.Bc=yt,qe._b=Re,ii=yt+Re+_t,(qe.c==null||qe.Kb!=ii)&&(qe.c=null,qe.Kb=ii,qe.c=g(qe.Kb)),qe.H=qe.Kb-Re}(y,x+I,B+me,256+~~((x+I+B+me)/2)),y.ob=B,y.p!=(Oe=x+1)&&(y.L=g(2*(y.p=Oe))),Qe=65536,y.qb&&(Qe=x-1,Qe|=Qe>>1,Qe|=Qe>>2,Qe|=Qe>>4,Qe|=Qe>>8,Qe>>=1,(Qe|=65535)>16777216&&(Qe>>=1),y.Ec=Qe,++Qe,Qe+=y.R),Qe!=y.rc&&(y.ub=g(y.rc=Qe)))}function M(y){var x;++y.k>=y.p&&(y.k=0),function(I){++I.o,I.o>I.zb&&(I.f+I.o>I.H&&function(B){var me,Oe,Qe;for((Qe=B.f+B.o-B.Bc)>0&&--Qe,Oe=B.f+B.h-Qe,me=0;Oe>me;++me)B.c[me]=B.c[Qe+me];B.f-=Qe}(I),J(I))}(y),y.o==1073741823&&(L(y.L,2*y.p,x=y.o-y.p),L(y.ub,y.rc,x),D(y,x))}function L(y,x,I){var B,me;for(B=0;x>B;++B)I>=(me=y[B]||0)?me=0:me-=I,y[B]=me}function W(y,x){(y.Lb==null||y.M!=x)&&(y.Lb=g(x)),y.M=x,y.o=0,y.h=0}function ve(y){var x=y.o-y.h;x&&(z(y.cc,y.Lb,y.h,x),y.o>=y.M&&(y.o=0),y.h=y.o)}function de(y,x){var I=y.o-x-1;return 0>I&&(I+=y.M),y.Lb[I]}function ne(y){ve(y),y.cc=null}function he(y){return 4>(y-=2)?y:3}function _e(y){return 4>y?0:10>y?y-3:y-6}function Ue(y){if(!y.zc)throw Error("bad state");return y.cb?function(x){(function(I,B,me,Oe){var Qe,qe,yt,Re,_t,ii,Wt,Ie,Ve,Ne,$e,mt,ct,qt,Bt;if(B[0]=fe,me[0]=fe,Oe[0]=1,I.oc&&(I.b.cc=I.oc,function(jt){jt.f=0,jt.o=0,jt.h=0,jt.T=0,J(jt),jt.k=0,D(jt,-1)}(I.b),I.W=1,I.oc=null),!I.pc){if(I.pc=1,qt=I.g,w(I.g,fe)){if(!Z(I.b))return void Je(I,U(I.g));Ke(I),ct=U(I.g)&I.y,R(I.d,I.C,(I.l<<4)+ct,0),I.l=_e(I.l),yt=j(I.b,-I.s),tt(nt(I.A,U(I.g),I.J),I.d,yt),I.J=yt,--I.s,I.g=v(I.g,Ce)}if(!Z(I.b))return void Je(I,U(I.g));for(;;){if(Wt=ut(I,U(I.g)),Ne=I.mb,ct=U(I.g)&I.y,qe=(I.l<<4)+ct,Wt==1&&Ne==-1)R(I.d,I.C,qe,0),yt=j(I.b,-I.s),Bt=nt(I.A,U(I.g),I.J),7>I.l?tt(Bt,I.d,yt):(Ve=j(I.b,-I.v[0]-1-I.s),Et(Bt,I.d,Ve,yt)),I.J=yt,I.l=_e(I.l);else{if(R(I.d,I.C,qe,1),4>Ne){if(R(I.d,I.bb,I.l,1),Ne?(R(I.d,I.hb,I.l,1),Ne==1?R(I.d,I.Ub,I.l,0):(R(I.d,I.Ub,I.l,1),R(I.d,I.vc,I.l,Ne-2))):(R(I.d,I.hb,I.l,0),R(I.d,I._,qe,Wt==1?0:1)),Wt==1?I.l=7>I.l?9:11:($t(I.i,I.d,Wt-2,ct),I.l=7>I.l?8:11),Re=I.v[Ne],Ne!=0){for(ii=Ne;ii>=1;--ii)I.v[ii]=I.v[ii-1];I.v[0]=Re}}else{for(R(I.d,I.bb,I.l,0),I.l=7>I.l?7:10,$t(I.$,I.d,Wt-2,ct),mt=St(Ne-=4),Ie=he(Wt),Hi(I.K[Ie],I.d,mt),mt>=4&&($e=Ne-(Qe=(2|1&mt)<<(_t=(mt>>1)-1)),14>mt?pr(I.Sb,Qe-mt-1,I.d,_t,$e):(at(I.d,$e>>4,_t-4),Qi(I.S,I.d,15&$e),++I.Qb)),Re=Ne,ii=3;ii>=1;--ii)I.v[ii]=I.v[ii-1];I.v[0]=Re,++I.Mb}I.J=j(I.b,Wt-1-I.s)}if(I.s-=Wt,I.g=v(I.g,O(Wt)),!I.s){if(I.Mb>=128&&xe(I),I.Qb>=16&&De(I),B[0]=I.g,me[0]=ke(I.d),!Z(I.b))return void Je(I,U(I.g));if(_(ue(I.g,qt),[4096,0])>=0)return I.pc=0,void(Oe[0]=0)}}}})(x.cb,x.cb.Xb,x.cb.uc,x.cb.Kc),x.Pb=x.cb.Xb[0],x.cb.Kc[0]&&(function(I){je(I),I.d.Ab=null}(x.cb),x.zc=0)}(y):function(x){var I=function(B){var me,Oe,Qe,qe,yt,Re;if(Re=U(B.g)&B.Dc,bt(B.e,B.Gb,(B.U<<4)+Re)){if(bt(B.e,B.Zb,B.U))Qe=0,bt(B.e,B.Cb,B.U)?(bt(B.e,B.Db,B.U)?(bt(B.e,B.Eb,B.U)?(Oe=B.Qc,B.Qc=B.Ic):Oe=B.Ic,B.Ic=B.Jc):Oe=B.Jc,B.Jc=B.ib,B.ib=Oe):bt(B.e,B.pb,(B.U<<4)+Re)||(B.U=7>B.U?9:11,Qe=1),Qe||(Qe=Me(B.sb,B.e,Re)+2,B.U=7>B.U?8:11);else if(B.Qc=B.Ic,B.Ic=B.Jc,B.Jc=B.ib,Qe=2+Me(B.Rb,B.e,Re),B.U=7>B.U?7:10,(yt=gi(B.kb[he(Qe)],B.e))>=4){if(B.ib=(2|1&yt)<<(qe=(yt>>1)-1),14>yt)B.ib+=function(_t,ii,Wt,Ie){var Ve,Ne,$e=1,mt=0;for(Ne=0;Ie>Ne;++Ne)Ve=bt(Wt,_t,ii+$e),$e<<=1,$e+=Ve,mt|=Ve<<Ne;return mt}(B.kc,B.ib-yt-1,B.e,qe);else if(B.ib+=function(_t,ii){var Wt,Ie,Ve=0;for(Wt=ii;Wt!=0;--Wt)_t.E>>>=1,_t.Bb-=_t.E&(Ie=_t.Bb-_t.E>>>31)-1,Ve=Ve<<1|1-Ie,-16777216&_t.E||(_t.Bb=_t.Bb<<8|Y(_t.Ab),_t.E<<=8);return Ve}(B.e,qe-4)<<4,B.ib+=function(_t,ii){var Wt,Ie,Ve=1,Ne=0;for(Ie=0;_t.F>Ie;++Ie)Wt=bt(ii,_t.G,Ve),Ve<<=1,Ve+=Wt,Ne|=Wt<<Ie;return Ne}(B.Fb,B.e),0>B.ib)return B.ib==-1?1:-1}else B.ib=yt;if(_(O(B.ib),B.g)>=0||B.ib>=B.nb)return-1;(function(_t,ii,Wt){var Ie=_t.o-ii-1;for(0>Ie&&(Ie+=_t.M);Wt!=0;--Wt)Ie>=_t.M&&(Ie=0),_t.Lb[_t.o++]=_t.Lb[Ie++],_t.o>=_t.M&&ve(_t)})(B.B,B.ib,Qe),B.g=v(B.g,O(Qe)),B.jc=de(B.B,0)}else me=function(_t,ii,Wt){return _t.V[((ii&_t.qc)<<_t.u)+((255&Wt)>>>8-_t.u)]}(B.gb,U(B.g),B.jc),B.jc=7>B.U?function(_t,ii){var Wt=1;do Wt=Wt<<1|bt(ii,_t.Ib,Wt);while(256>Wt);return Wt<<24>>24}(me,B.e):function(_t,ii,Wt){var Ie,Ve,Ne=1;do if(Ve=Wt>>7&1,Wt<<=1,Ie=bt(ii,_t.Ib,(1+Ve<<8)+Ne),Ne=Ne<<1|Ie,Ve!=Ie){for(;256>Ne;)Ne=Ne<<1|bt(ii,_t.Ib,Ne);break}while(256>Ne);return Ne<<24>>24}(me,B.e,de(B.B,B.ib)),function(_t,ii){_t.Lb[_t.o++]=ii,_t.o>=_t.M&&ve(_t)}(B.B,B.jc),B.U=_e(B.U),B.g=v(B.g,Ce);return 0}(x.Z);if(I==-1)throw Error("corrupted input");x.Pb=yi,x.Pc=x.Z.g,(I||_(x.Z.Nc,fe)>=0&&_(x.Z.g,x.Z.Nc)>=0)&&(ve(x.Z.B),ne(x.Z.B),x.Z.e.Ab=null,x.zc=0)}(y),y.zc}function Fe(y){y.B={},y.e={},y.Gb=g(192),y.Zb=g(12),y.Cb=g(12),y.Db=g(12),y.Eb=g(12),y.pb=g(192),y.kb=g(4),y.kc=g(114),y.Fb=ri({},4),y.Rb=We({}),y.sb=We({}),y.gb={};for(var x=0;4>x;++x)y.kb[x]=ri({},6);return y}function ze(y,x){for(;x>y.O;++y.O)y.ec[y.O]=ri({},3),y.hc[y.O]=ri({},3)}function Me(y,x,I){return bt(x,y.wc,0)?8+(bt(x,y.wc,1)?8+gi(y.tc,x):gi(y.hc[I],x)):gi(y.ec[I],x)}function We(y){return y.wc=g(2),y.ec=g(16),y.hc=g(16),y.tc=ri({},8),y.O=0,y}function rt(y){zt(y.wc);for(var x=0;y.O>x;++x)zt(y.ec[x].G),zt(y.hc[x].G);zt(y.tc.G)}function dt(y,x,I){var B,me;if(y.V==null||y.u!=I||y.I!=x)for(y.I=x,y.qc=(1<<x)-1,y.u=I,y.V=g(me=1<<y.u+y.I),B=0;me>B;++B)y.V[B]=ht({})}function ht(y){return y.Ib=g(768),y}function Pt(y,x){var I,B,me,Oe;y.jb=x,me=y.a[x].r,B=y.a[x].j;do y.a[x].t&&(It(y.a[me]),y.a[me].r=me-1,y.a[x].Ac&&(y.a[me-1].t=0,y.a[me-1].r=y.a[x].r2,y.a[me-1].j=y.a[x].j2)),I=B,B=y.a[Oe=me].j,me=y.a[Oe].r,y.a[Oe].j=I,y.a[Oe].r=x,x=Oe;while(x>0);return y.mb=y.a[0].j,y.q=y.a[0].r}function ye(y){var x;for(y.v=g(4),y.a=[],y.d={},y.C=g(192),y.bb=g(12),y.hb=g(12),y.Ub=g(12),y.vc=g(12),y._=g(192),y.K=[],y.Sb=g(114),y.S=Si({},4),y.$=ci({}),y.i=ci({}),y.A={},y.m=[],y.P=[],y.lb=[],y.nc=g(16),y.x=g(4),y.Q=g(4),y.Xb=[fe],y.uc=[fe],y.Kc=[0],y.fc=g(5),y.yc=g(128),y.vb=0,y.X=1,y.D=0,y.Hb=-1,y.mb=0,x=0;4096>x;++x)y.a[x]={};for(x=0;4>x;++x)y.K[x]=Si({},6);return y}function De(y){for(var x=0;16>x;++x)y.nc[x]=br(y.S,x);y.Qb=0}function xe(y){var x,I,B,me,Oe,Qe,qe,yt;for(me=4;128>me;++me)Qe=St(me),y.yc[me]=Vr(y.Sb,(x=(2|1&Qe)<<(B=(Qe>>1)-1))-Qe-1,B,me-x);for(Oe=0;4>Oe;++Oe){for(I=y.K[Oe],qe=Oe<<6,Qe=0;y.$b>Qe;++Qe)y.P[qe+Qe]=Gi(I,Qe);for(Qe=14;y.$b>Qe;++Qe)y.P[qe+Qe]+=(Qe>>1)-1-4<<6;for(yt=128*Oe,me=0;4>me;++me)y.lb[yt+me]=y.P[qe+me];for(;128>me;++me)y.lb[yt+me]=y.P[qe+St(me)]+y.yc[me]}y.Mb=0}function Je(y,x){je(y),function(B,me){if(B.Gc){R(B.d,B.C,(B.l<<4)+me,1),R(B.d,B.bb,B.l,0),B.l=7>B.l?7:10,$t(B.$,B.d,0,me);var Oe=he(2);Hi(B.K[Oe],B.d,63),at(B.d,67108863,26),Qi(B.S,B.d,15)}}(y,x&y.y);for(var I=0;5>I;++I)ft(y.d)}function ut(y,x){var I,B,me,Oe,Qe,qe,yt,Re,_t,ii,Wt,Ie,Ve,Ne,$e,mt,ct,qt,Bt,jt,Xt,si,Ei,Ui,ji,ki,Zi,Bi,Ti,Mi,Gr,en,Sr,Yr,Mo,Lr,Ln,tn,gn,Wn,Qn,rr,kr,Mn;if(y.jb!=y.q)return Ve=y.a[y.q].r-y.q,y.mb=y.a[y.q].j,y.q=y.a[y.q].r,Ve;if(y.q=y.jb=0,y.N?(Ie=y.vb,y.N=0):Ie=Ke(y),ki=y.D,2>(Ui=Z(y.b)+1))return y.mb=-1,1;for(Ui>273&&(Ui=273),gn=0,_t=0;4>_t;++_t)y.x[_t]=y.v[_t],y.Q[_t]=K(y.b,-1,y.x[_t],273),y.Q[_t]>y.Q[gn]&&(gn=_t);if(y.Q[gn]>=y.n)return y.mb=gn,we(y,(Ve=y.Q[gn])-1),Ve;if(Ie>=y.n)return y.mb=y.m[ki-1]+4,we(y,Ie-1),Ie;if(yt=j(y.b,-1),ct=j(y.b,-y.v[0]-1-1),2>Ie&&yt!=ct&&2>y.Q[gn])return y.mb=-1,1;if(y.a[0].Hc=y.l,y.a[1].z=pt[y.C[(y.l<<4)+(Sr=x&y.y)]>>>2]+Vt(nt(y.A,x,y.J),y.l>=7,ct,yt),It(y.a[1]),tn=(qt=pt[2048-y.C[(y.l<<4)+Sr]>>>2])+pt[2048-y.bb[y.l]>>>2],ct==yt&&(Wn=tn+function(Zn,Rn,fa){return pt[Zn.hb[Rn]>>>2]+pt[Zn._[(Rn<<4)+fa]>>>2]}(y,y.l,Sr),y.a[1].z>Wn&&(y.a[1].z=Wn,function(Zn){Zn.j=0,Zn.t=0}(y.a[1]))),2>(Wt=Ie>=y.Q[gn]?Ie:y.Q[gn]))return y.mb=y.a[1].j,1;y.a[1].r=0,y.a[0].bc=y.x[0],y.a[0].ac=y.x[1],y.a[0].dc=y.x[2],y.a[0].lc=y.x[3],ii=Wt;do y.a[ii--].z=268435455;while(ii>=2);for(_t=0;4>_t;++_t)if(!(2>(Ln=y.Q[_t]))){Mo=tn+Se(y,_t,y.l,Sr);do Oe=Mo+He(y.i,Ln-2,Sr),(Mi=y.a[Ln]).z>Oe&&(Mi.z=Oe,Mi.r=0,Mi.j=_t,Mi.t=0);while(--Ln>=2)}if(Ei=qt+pt[y.bb[y.l]>>>2],Ie>=(ii=y.Q[0]>=2?y.Q[0]+1:2)){for(Zi=0;ii>y.m[Zi];)Zi+=2;for(;Oe=Ei+re(y,Re=y.m[Zi+1],ii,Sr),(Mi=y.a[ii]).z>Oe&&(Mi.z=Oe,Mi.r=0,Mi.j=Re+4,Mi.t=0),ii!=y.m[Zi]||(Zi+=2)!=ki;++ii);}for(I=0;;){if(++I==Wt)return Pt(y,I);if(Bt=Ke(y),ki=y.D,Bt>=y.n)return y.vb=Bt,y.N=1,Pt(y,I);if(++x,en=y.a[I].r,y.a[I].t?(--en,y.a[I].Ac?(rr=y.a[y.a[I].r2].Hc,rr=4>y.a[I].j2?7>rr?8:11:7>rr?7:10):rr=y.a[en].Hc,rr=_e(rr)):rr=y.a[en].Hc,en==I-1?rr=y.a[I].j?_e(rr):7>rr?9:11:(y.a[I].t&&y.a[I].Ac?(en=y.a[I].r2,Gr=y.a[I].j2,rr=7>rr?8:11):rr=4>(Gr=y.a[I].j)?7>rr?8:11:7>rr?7:10,Ti=y.a[en],4>Gr?Gr?Gr==1?(y.x[0]=Ti.ac,y.x[1]=Ti.bc,y.x[2]=Ti.dc,y.x[3]=Ti.lc):Gr==2?(y.x[0]=Ti.dc,y.x[1]=Ti.bc,y.x[2]=Ti.ac,y.x[3]=Ti.lc):(y.x[0]=Ti.lc,y.x[1]=Ti.bc,y.x[2]=Ti.ac,y.x[3]=Ti.dc):(y.x[0]=Ti.bc,y.x[1]=Ti.ac,y.x[2]=Ti.dc,y.x[3]=Ti.lc):(y.x[0]=Gr-4,y.x[1]=Ti.bc,y.x[2]=Ti.ac,y.x[3]=Ti.dc)),y.a[I].Hc=rr,y.a[I].bc=y.x[0],y.a[I].ac=y.x[1],y.a[I].dc=y.x[2],y.a[I].lc=y.x[3],qe=y.a[I].z,yt=j(y.b,-1),ct=j(y.b,-y.x[0]-1-1),B=qe+pt[y.C[(rr<<4)+(Sr=x&y.y)]>>>2]+Vt(nt(y.A,x,j(y.b,-2)),rr>=7,ct,yt),jt=0,(Xt=y.a[I+1]).z>B&&(Xt.z=B,Xt.r=I,Xt.j=-1,Xt.t=0,jt=1),tn=(qt=qe+pt[2048-y.C[(rr<<4)+Sr]>>>2])+pt[2048-y.bb[rr]>>>2],ct!=yt||I>Xt.r&&!Xt.j||Xt.z>=(Wn=tn+(pt[y.hb[rr]>>>2]+pt[y._[(rr<<4)+Sr]>>>2]))&&(Xt.z=Wn,Xt.r=I,Xt.j=0,Xt.t=0,jt=1),!(2>(Ui=ji=(ji=Z(y.b)+1)>4095-I?4095-I:ji))){if(Ui>y.n&&(Ui=y.n),!jt&&ct!=yt&&(Mn=Math.min(ji-1,y.n),($e=K(y.b,0,y.x[0],Mn))>=2)){for(kr=_e(rr),si=B+pt[2048-y.C[(kr<<4)+(Yr=x+1&y.y)]>>>2]+pt[2048-y.bb[kr]>>>2],Bi=I+1+$e;Bi>Wt;)y.a[++Wt].z=268435455;Oe=si+(He(y.i,$e-2,Yr)+Se(y,0,kr,Yr)),(Mi=y.a[Bi]).z>Oe&&(Mi.z=Oe,Mi.r=I+1,Mi.j=0,Mi.t=1,Mi.Ac=0)}for(Qn=2,Lr=0;4>Lr;++Lr)if(!(2>(Ne=K(y.b,-1,y.x[Lr],Ui)))){mt=Ne;do{for(;I+Ne>Wt;)y.a[++Wt].z=268435455;Oe=tn+(He(y.i,Ne-2,Sr)+Se(y,Lr,rr,Sr)),(Mi=y.a[I+Ne]).z>Oe&&(Mi.z=Oe,Mi.r=I,Mi.j=Lr,Mi.t=0)}while(--Ne>=2);if(Ne=mt,Lr||(Qn=Ne+1),ji>Ne&&(Mn=Math.min(ji-1-Ne,y.n),($e=K(y.b,Ne,y.x[Lr],Mn))>=2)){for(kr=7>rr?8:11,Yr=x+Ne&y.y,me=tn+(He(y.i,Ne-2,Sr)+Se(y,Lr,rr,Sr))+pt[y.C[(kr<<4)+Yr]>>>2]+Vt(nt(y.A,x+Ne,j(y.b,Ne-1-1)),1,j(y.b,Ne-1-(y.x[Lr]+1)),j(y.b,Ne-1)),kr=_e(kr),si=me+pt[2048-y.C[(kr<<4)+(Yr=x+Ne+1&y.y)]>>>2]+pt[2048-y.bb[kr]>>>2],Bi=Ne+1+$e;I+Bi>Wt;)y.a[++Wt].z=268435455;Oe=si+(He(y.i,$e-2,Yr)+Se(y,0,kr,Yr)),(Mi=y.a[I+Bi]).z>Oe&&(Mi.z=Oe,Mi.r=I+Ne+1,Mi.j=0,Mi.t=1,Mi.Ac=1,Mi.r2=I,Mi.j2=Lr)}}if(Bt>Ui){for(Bt=Ui,ki=0;Bt>y.m[ki];ki+=2);y.m[ki]=Bt,ki+=2}if(Bt>=Qn){for(Ei=qt+pt[y.bb[rr]>>>2];I+Bt>Wt;)y.a[++Wt].z=268435455;for(Zi=0;Qn>y.m[Zi];)Zi+=2;for(Ne=Qn;;++Ne)if(Oe=Ei+re(y,Qe=y.m[Zi+1],Ne,Sr),(Mi=y.a[I+Ne]).z>Oe&&(Mi.z=Oe,Mi.r=I,Mi.j=Qe+4,Mi.t=0),Ne==y.m[Zi]){if(ji>Ne&&(Mn=Math.min(ji-1-Ne,y.n),($e=K(y.b,Ne,Qe,Mn))>=2)){for(me=Oe+pt[y.C[((kr=7>rr?7:10)<<4)+(Yr=x+Ne&y.y)]>>>2]+Vt(nt(y.A,x+Ne,j(y.b,Ne-1-1)),1,j(y.b,Ne-(Qe+1)-1),j(y.b,Ne-1)),kr=_e(kr),si=me+pt[2048-y.C[(kr<<4)+(Yr=x+Ne+1&y.y)]>>>2]+pt[2048-y.bb[kr]>>>2],Bi=Ne+1+$e;I+Bi>Wt;)y.a[++Wt].z=268435455;Oe=si+(He(y.i,$e-2,Yr)+Se(y,0,kr,Yr)),(Mi=y.a[I+Bi]).z>Oe&&(Mi.z=Oe,Mi.r=I+Ne+1,Mi.j=0,Mi.t=1,Mi.Ac=1,Mi.r2=I,Mi.j2=Qe+4)}if((Zi+=2)==ki)break}}}}}function re(y,x,I,B){var me=he(I);return(128>x?y.lb[128*me+x]:y.P[(me<<6)+function(Oe){return 131072>Oe?lt[Oe>>6]+12:134217728>Oe?lt[Oe>>16]+32:lt[Oe>>26]+52}(x)]+y.nc[15&x])+He(y.$,I-2,B)}function Se(y,x,I,B){var me;return x?(me=pt[2048-y.hb[I]>>>2],x==1?me+=pt[y.Ub[I]>>>2]:(me+=pt[2048-y.Ub[I]>>>2],me+=Ge(y.vc[I],x-2))):(me=pt[y.hb[I]>>>2],me+=pt[2048-y._[(I<<4)+B]>>>2]),me}function we(y,x){x>0&&(function(I,B){var me,Oe,Qe,qe,yt,Re,_t,ii,Wt,Ie,Ve,Ne,$e,mt,ct;do{if(I.h>=I.o+I.ob)Ie=I.ob;else if(I.xb>(Ie=I.h-I.o)){M(I);continue}for(Ve=I.o>I.p?I.o-I.p:0,Oe=I.f+I.o,I.qb?(I.ub[1023&(ct=et[255&I.c[Oe]]^255&I.c[Oe+1])]=I.o,I.ub[1024+(65535&(ct^=(255&I.c[Oe+2])<<8))]=I.o,Re=(ct^et[255&I.c[Oe+3]]<<5)&I.Ec):Re=255&I.c[Oe]^(255&I.c[Oe+1])<<8,Qe=I.ub[I.R+Re],I.ub[I.R+Re]=I.o,$e=1+(I.k<<1),mt=I.k<<1,ii=Wt=I.w,me=I.Fc;;){if(Ve>=Qe||me--==0){I.L[$e]=I.L[mt]=0;break}if(qe=(I.k>=(yt=I.o-Qe)?I.k-yt:I.k-yt+I.p)<<1,I.c[(Ne=I.f+Qe)+(_t=Wt>ii?ii:Wt)]==I.c[Oe+_t]){for(;++_t!=Ie&&I.c[Ne+_t]==I.c[Oe+_t];);if(_t==Ie){I.L[mt]=I.L[qe],I.L[$e]=I.L[qe+1];break}}(255&I.c[Oe+_t])>(255&I.c[Ne+_t])?(I.L[mt]=Qe,Qe=I.L[mt=qe+1],Wt=_t):(I.L[$e]=Qe,Qe=I.L[$e=qe],ii=_t)}M(I)}while(--B!=0)}(y.b,x),y.s+=x)}function Ke(y){var x=0;return y.D=function(I,B){var me,Oe,Qe,qe,yt,Re,_t,ii,Wt,Ie,Ve,Ne,$e,mt,ct,qt,Bt,jt,Xt,si,Ei;if(I.h>=I.o+I.ob)mt=I.ob;else if(I.xb>(mt=I.h-I.o))return M(I),0;for(Bt=0,ct=I.o>I.p?I.o-I.p:0,Oe=I.f+I.o,qt=1,ii=0,Wt=0,I.qb?(ii=1023&(Ei=et[255&I.c[Oe]]^255&I.c[Oe+1]),Wt=65535&(Ei^=(255&I.c[Oe+2])<<8),Ie=(Ei^et[255&I.c[Oe+3]]<<5)&I.Ec):Ie=255&I.c[Oe]^(255&I.c[Oe+1])<<8,Qe=I.ub[I.R+Ie]||0,I.qb&&(qe=I.ub[ii]||0,yt=I.ub[1024+Wt]||0,I.ub[ii]=I.o,I.ub[1024+Wt]=I.o,qe>ct&&I.c[I.f+qe]==I.c[Oe]&&(B[Bt++]=qt=2,B[Bt++]=I.o-qe-1),yt>ct&&I.c[I.f+yt]==I.c[Oe]&&(yt==qe&&(Bt-=2),B[Bt++]=qt=3,B[Bt++]=I.o-yt-1,qe=yt),Bt!=0&&qe==Qe&&(Bt-=2,qt=1)),I.ub[I.R+Ie]=I.o,Xt=1+(I.k<<1),si=I.k<<1,Ne=$e=I.w,I.w!=0&&Qe>ct&&I.c[I.f+Qe+I.w]!=I.c[Oe+I.w]&&(B[Bt++]=qt=I.w,B[Bt++]=I.o-Qe-1),me=I.Fc;;){if(ct>=Qe||me--==0){I.L[Xt]=I.L[si]=0;break}if(Re=(I.k>=(_t=I.o-Qe)?I.k-_t:I.k-_t+I.p)<<1,I.c[(jt=I.f+Qe)+(Ve=$e>Ne?Ne:$e)]==I.c[Oe+Ve]){for(;++Ve!=mt&&I.c[jt+Ve]==I.c[Oe+Ve];);if(Ve>qt&&(B[Bt++]=qt=Ve,B[Bt++]=_t-1,Ve==mt)){I.L[si]=I.L[Re],I.L[Xt]=I.L[Re+1];break}}(255&I.c[Oe+Ve])>(255&I.c[jt+Ve])?(I.L[si]=Qe,Qe=I.L[si=Re+1],$e=Ve):(I.L[Xt]=Qe,Qe=I.L[Xt=Re],Ne=Ve)}return M(I),Bt}(y.b,y.m),y.D>0&&(x=y.m[y.D-2])==y.n&&(x+=K(y.b,x-1,y.m[y.D-1],273-x)),++y.s,x}function je(y){y.b&&y.W&&(y.b.cc=null,y.W=0)}function St(y){return 2048>y?lt[y]:2097152>y?lt[y>>10]+20:lt[y>>20]+40}function xt(y,x){zt(y.db);for(var I=0;x>I;++I)zt(y.Vb[I].G),zt(y.Wb[I].G);zt(y.ic.G)}function Ht(y,x,I,B,me){var Oe,Qe,qe,yt,Re;for(Oe=pt[y.db[0]>>>2],qe=(Qe=pt[2048-y.db[0]>>>2])+pt[y.db[1]>>>2],yt=Qe+pt[2048-y.db[1]>>>2],Re=0,Re=0;8>Re;++Re){if(Re>=I)return;B[me+Re]=Oe+Gi(y.Vb[x],Re)}for(;16>Re;++Re){if(Re>=I)return;B[me+Re]=qe+Gi(y.Wb[x],Re-8)}for(;I>Re;++Re)B[me+Re]=yt+Gi(y.ic,Re-8-8)}function $t(y,x,I,B){(function(me,Oe,Qe,qe){8>Qe?(R(Oe,me.db,0,0),Hi(me.Vb[qe],Oe,Qe)):(Qe-=8,R(Oe,me.db,0,1),8>Qe?(R(Oe,me.db,1,0),Hi(me.Wb[qe],Oe,Qe)):(R(Oe,me.db,1,1),Hi(me.ic,Oe,Qe-8)))})(y,x,I,B),--y.sc[B]==0&&(Ht(y,B,y.rb,y.Cc,272*B),y.sc[B]=y.rb)}function ci(y){return function(x){x.db=g(2),x.Vb=g(16),x.Wb=g(16),x.ic=Si({},8);for(var I=0;16>I;++I)x.Vb[I]=Si({},3),x.Wb[I]=Si({},3)}(y),y.Cc=[],y.sc=[],y}function He(y,x,I){return y.Cc[272*I+x]}function Ee(y,x){for(var I=0;x>I;++I)Ht(y,I,y.rb,y.Cc,272*I),y.sc[I]=y.rb}function it(y,x,I){var B,me;if(y.V==null||y.u!=I||y.I!=x)for(y.I=x,y.qc=(1<<x)-1,y.u=I,y.V=g(me=1<<y.u+y.I),B=0;me>B;++B)y.V[B]=Nt({})}function nt(y,x,I){return y.V[((x&y.qc)<<y.u)+((255&I)>>>8-y.u)]}function tt(y,x,I){var B,me,Oe=1;for(me=7;me>=0;--me)R(x,y.tb,Oe,B=I>>me&1),Oe=Oe<<1|B}function Et(y,x,I,B){var me,Oe,Qe,qe,yt=1,Re=1;for(Oe=7;Oe>=0;--Oe)me=B>>Oe&1,qe=Re,yt&&(qe+=1+(Qe=I>>Oe&1)<<8,yt=Qe==me),R(x,y.tb,qe,me),Re=Re<<1|me}function Nt(y){return y.tb=g(768),y}function Vt(y,x,I,B){var me,Oe,Qe=1,qe=7,yt=0;if(x){for(;qe>=0;--qe)if(yt+=Ge(y.tb[(1+(Oe=I>>qe&1)<<8)+Qe],me=B>>qe&1),Qe=Qe<<1|me,Oe!=me){--qe;break}}for(;qe>=0;--qe)yt+=Ge(y.tb[Qe],me=B>>qe&1),Qe=Qe<<1|me;return yt}function It(y){y.j=-1,y.t=0}function ri(y,x){return y.F=x,y.G=g(1<<x),y}function gi(y,x){var I,B=1;for(I=y.F;I!=0;--I)B=(B<<1)+bt(x,y.G,B);return B-(1<<y.F)}function Si(y,x){return y.F=x,y.G=g(1<<x),y}function Hi(y,x,I){var B,me,Oe=1;for(me=y.F;me!=0;)--me,R(x,y.G,Oe,B=I>>>me&1),Oe=Oe<<1|B}function Gi(y,x){var I,B,me=1,Oe=0;for(B=y.F;B!=0;)--B,Oe+=Ge(y.G[me],I=x>>>B&1),me=(me<<1)+I;return Oe}function Qi(y,x,I){var B,me,Oe=1;for(me=0;y.F>me;++me)R(x,y.G,Oe,B=1&I),Oe=Oe<<1|B,I>>=1}function br(y,x){var I,B,me=1,Oe=0;for(B=y.F;B!=0;--B)I=1&x,x>>>=1,Oe+=Ge(y.G[me],I),me=me<<1|I;return Oe}function pr(y,x,I,B,me){var Oe,Qe,qe=1;for(Qe=0;B>Qe;++Qe)R(I,y,x+qe,Oe=1&me),qe=qe<<1|Oe,me>>=1}function Vr(y,x,I,B){var me,Oe,Qe=1,qe=0;for(Oe=I;Oe!=0;--Oe)me=1&B,B>>>=1,qe+=pt[(2047&(y[x+Qe]-me^-me))>>>2],Qe=Qe<<1|me;return qe}function bt(y,x,I){var B,me=x[I];return(-2147483648^(B=(y.E>>>11)*me))>(-2147483648^y.Bb)?(y.E=B,x[I]=me+(2048-me>>>5)<<16>>16,-16777216&y.E||(y.Bb=y.Bb<<8|Y(y.Ab),y.E<<=8),0):(y.E-=B,y.Bb-=B,x[I]=me-(me>>>5)<<16>>16,-16777216&y.E||(y.Bb=y.Bb<<8|Y(y.Ab),y.E<<=8),1)}function zt(y){for(var x=y.length-1;x>=0;--x)y[x]=1024}function R(y,x,I,B){var me,Oe=x[I];me=(y.E>>>11)*Oe,B?(y.xc=v(y.xc,b(O(me),[4294967295,0])),y.E-=me,x[I]=Oe-(Oe>>>5)<<16>>16):(y.E=me,x[I]=Oe+(2048-Oe>>>5)<<16>>16),-16777216&y.E||(y.E<<=8,ft(y))}function at(y,x,I){for(var B=I-1;B>=0;--B)y.E>>>=1,(x>>>B&1)==1&&(y.xc=v(y.xc,O(y.E))),-16777216&y.E||(y.E<<=8,ft(y))}function ke(y){return v(v(O(y.Jb),y.mc),[4,0])}function ft(y){var x,I=U(function(B,me){var Oe;return Oe=q(B,me&=63),0>B[1]&&(Oe=v(Oe,C([2,0],63-me))),Oe}(y.xc,32));if(I!=0||_(y.xc,[4278190080,0])<0){y.mc=v(y.mc,O(y.Jb)),x=y.Oc;do P(y.Ab,x+I),x=255;while(--y.Jb!=0);y.Oc=U(y.xc)>>>24}++y.Jb,y.xc=C(b(y.xc,[16777215,0]),8)}function Ge(y,x){return pt[(2047&(y-x^-x))>>>2]}function Tt(y){for(var x,I,B,me=0,Oe=0,Qe=y.length,qe=[],yt=[];Qe>me;++me,++Oe){if(128&(x=255&y[me]))if((224&x)==192){if(me+1>=Qe||(192&(I=255&y[++me]))!=128)return y;yt[Oe]=(31&x)<<6|63&I}else{if((240&x)!=224||me+2>=Qe||(192&(I=255&y[++me]))!=128||(192&(B=255&y[++me]))!=128)return y;yt[Oe]=(15&x)<<12|(63&I)<<6|63&B}else{if(!x)return y;yt[Oe]=x}Oe==16383&&(qe.push(String.fromCharCode.apply(String,yt)),Oe=-1)}return Oe>0&&(yt.length=Oe,qe.push(String.fromCharCode.apply(String,yt))),qe.join("")}function Qt(y){var x,I,B,me=[],Oe=0,Qe=y.length;if(typeof y=="object")return y;for(function(qe,yt,Re,_t,ii){var Wt;for(Wt=yt;Re>Wt;++Wt)_t[ii++]=qe.charCodeAt(Wt)}(y,0,Qe,me,0),B=0;Qe>B;++B)(x=me[B])>=1&&127>=x?++Oe:Oe+=!x||x>=128&&2047>=x?2:3;for(I=[],Oe=0,B=0;Qe>B;++B)(x=me[B])>=1&&127>=x?I[Oe++]=x<<24>>24:!x||x>=128&&2047>=x?(I[Oe++]=(192|x>>6&31)<<24>>24,I[Oe++]=(128|63&x)<<24>>24):(I[Oe++]=(224|x>>12&15)<<24>>24,I[Oe++]=(128|x>>6&63)<<24>>24,I[Oe++]=(128|63&x)<<24>>24);return I}function wt(y){return y[1]+y[0]}var Ut=1,di=2,Ri=3,oi=typeof setImmediate=="function"?setImmediate:setTimeout,Ii=4294967296,yi=[4294967295,-Ii],hi=[0,-9223372036854776e3],fe=[0,0],Ce=[1,0],et=function(){var y,x,I,B=[];for(y=0;256>y;++y){for(I=y,x=0;8>x;++x)1&I?I=I>>>1^-306674912:I>>>=1;B[y]=I}return B}(),lt=function(){var y,x,I,B=2,me=[0,1];for(I=2;22>I;++I)for(x=1<<(I>>1)-1,y=0;x>y;++y,++B)me[B]=I<<24>>24;return me}(),pt=function(){var y,x,I,B=[];for(x=8;x>=0;--x)for(y=1<<9-x,I=1<<9-x-1;y>I;++I)B[I]=(x<<6)+(y-I<<6>>>9-x-1);return B}(),H=function(){var y=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(x){return y[x-1]||y[6]}}();return typeof onmessage>"u"||typeof window<"u"&&window.document!==void 0||(onmessage=function(y){y&&y.gc&&(y.gc.action==di?c.decompress(y.gc.gc,y.gc.cbn):y.gc.action==Ut&&c.compress(y.gc.gc,y.gc.Rc,y.gc.cbn))}),{compress:function(y,x,I,B){var me,Oe,Qe={},qe=I===void 0&&B===void 0;if(typeof I!="function"&&(Oe=I,I=B=0),B=B||function(yt){return Oe!==void 0?l(yt,Oe):void 0},I=I||function(yt,Re){return Oe!==void 0?postMessage({action:Ut,cbn:Oe,result:yt,error:Re}):void 0},qe){for(Qe.c=le({},Qt(y),H(x));Ue(Qe.c.yb););return X(Qe.c.Nb)}try{Qe.c=le({},Qt(y),H(x)),B(0)}catch(yt){return I(null,yt)}oi(function yt(){try{for(var Re,_t=new Date().getTime();Ue(Qe.c.yb);)if(me=wt(Qe.c.yb.Pb)/wt(Qe.c.Tb),new Date().getTime()-_t>200)return B(me),oi(yt,0),0;B(1),Re=X(Qe.c.Nb),oi(I.bind(null,Re),0)}catch(ii){I(null,ii)}},0)},decompress:function(y,x,I){var B,me,Oe,Qe,qe={},yt=x===void 0&&I===void 0;if(typeof x!="function"&&(me=x,x=I=0),I=I||function(Re){return me!==void 0?l(Oe?Re:-1,me):void 0},x=x||function(Re,_t){return me!==void 0?postMessage({action:di,cbn:me,result:Re,error:_t}):void 0},yt){for(qe.d=k({},y);Ue(qe.d.yb););return Tt(X(qe.d.Nb))}try{qe.d=k({},y),Qe=wt(qe.d.Tb),Oe=Qe>-1,I(0)}catch(Re){return x(null,Re)}oi(function Re(){try{for(var _t,ii=0,Wt=new Date().getTime();Ue(qe.d.yb);)if(++ii%1e3==0&&new Date().getTime()-Wt>200)return Oe&&(B=wt(qe.d.yb.Z.g)/Qe,I(B)),oi(Re,0),0;I(1),_t=Tt(X(qe.d.Nb)),oi(x.bind(null,_t),0)}catch(Ie){x(null,Ie)}},0)}}}();this.G=c},5515:function(c){c.exports=function(){function l(g,v,b){function _(O,U){if(!v[O]){if(!g[O]){if(E)return E(O,!0);var V=new Error("Cannot find module '"+O+"'");throw V.code="MODULE_NOT_FOUND",V}var C=v[O]={exports:{}};g[O][0].call(C.exports,function(q){return _(g[O][1][q]||q)},C,C.exports,l,g,v,b)}return v[O].exports}for(var E=void 0,w=0;w<b.length;w++)_(b[w]);return _}return l}()({1:[function(l,g,v){var b=(0,l("./adapter_factory.js").adapterFactory)({window});g.exports=b},{"./adapter_factory.js":2}],2:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0}),v.adapterFactory=C;var b=V(l("./utils")),_=V(l("./chrome/chrome_shim")),E=V(l("./edge/edge_shim")),w=V(l("./firefox/firefox_shim")),O=V(l("./safari/safari_shim")),U=V(l("./common_shim"));function V(q){if(q&&q.__esModule)return q;var ue={};if(q!=null)for(var se in q)Object.prototype.hasOwnProperty.call(q,se)&&(ue[se]=q[se]);return ue.default=q,ue}function C(){var q=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},se=b.log,Y=b.detectBrowser(q),pe={browserDetails:Y,commonShim:U,extractVersion:b.extractVersion,disableLog:b.disableLog,disableWarnings:b.disableWarnings};switch(Y.browser){case"chrome":if(!_||!_.shimPeerConnection||!ue.shimChrome)return se("Chrome shim is not included in this adapter release."),pe;se("adapter.js shimming chrome."),pe.browserShim=_,_.shimGetUserMedia(q),_.shimMediaStream(q),_.shimPeerConnection(q),_.shimOnTrack(q),_.shimAddTrackRemoveTrack(q),_.shimGetSendersWithDtmf(q),_.shimGetStats(q),_.shimSenderReceiverGetStats(q),_.fixNegotiationNeeded(q),U.shimRTCIceCandidate(q),U.shimConnectionState(q),U.shimMaxMessageSize(q),U.shimSendThrowTypeError(q),U.removeAllowExtmapMixed(q);break;case"firefox":if(!w||!w.shimPeerConnection||!ue.shimFirefox)return se("Firefox shim is not included in this adapter release."),pe;se("adapter.js shimming firefox."),pe.browserShim=w,w.shimGetUserMedia(q),w.shimPeerConnection(q),w.shimOnTrack(q),w.shimRemoveStream(q),w.shimSenderGetStats(q),w.shimReceiverGetStats(q),w.shimRTCDataChannel(q),U.shimRTCIceCandidate(q),U.shimConnectionState(q),U.shimMaxMessageSize(q),U.shimSendThrowTypeError(q);break;case"edge":if(!E||!E.shimPeerConnection||!ue.shimEdge)return se("MS edge shim is not included in this adapter release."),pe;se("adapter.js shimming edge."),pe.browserShim=E,E.shimGetUserMedia(q),E.shimGetDisplayMedia(q),E.shimPeerConnection(q),E.shimReplaceTrack(q),U.shimMaxMessageSize(q),U.shimSendThrowTypeError(q);break;case"safari":if(!O||!ue.shimSafari)return se("Safari shim is not included in this adapter release."),pe;se("adapter.js shimming safari."),pe.browserShim=O,O.shimRTCIceServerUrls(q),O.shimCreateOfferLegacy(q),O.shimCallbacksAPI(q),O.shimLocalStreamsAPI(q),O.shimRemoteStreamsAPI(q),O.shimTrackEventTransceiver(q),O.shimGetUserMedia(q),U.shimRTCIceCandidate(q),U.shimMaxMessageSize(q),U.shimSendThrowTypeError(q),U.removeAllowExtmapMixed(q);break;default:se("Unsupported browser!")}return pe}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=v.shimGetUserMedia=void 0;var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},_=l("./getusermedia");Object.defineProperty(v,"shimGetUserMedia",{enumerable:!0,get:function(){return _.shimGetUserMedia}});var E=l("./getdisplaymedia");Object.defineProperty(v,"shimGetDisplayMedia",{enumerable:!0,get:function(){return E.shimGetDisplayMedia}}),v.shimMediaStream=U,v.shimOnTrack=V,v.shimGetSendersWithDtmf=C,v.shimGetStats=q,v.shimSenderReceiverGetStats=ue,v.shimAddTrackRemoveTrackWithNative=se,v.shimAddTrackRemoveTrack=Y,v.shimPeerConnection=pe,v.fixNegotiationNeeded=ce;var w=O(l("../utils.js"));function O(X){if(X&&X.__esModule)return X;var P={};if(X!=null)for(var z in X)Object.prototype.hasOwnProperty.call(X,z)&&(P[z]=X[z]);return P.default=X,P}function U(X){X.MediaStream=X.MediaStream||X.webkitMediaStream}function V(X){if((X===void 0?"undefined":b(X))==="object"&&X.RTCPeerConnection&&!("ontrack"in X.RTCPeerConnection.prototype)){Object.defineProperty(X.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(z){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=z)},enumerable:!0,configurable:!0});var P=X.RTCPeerConnection.prototype.setRemoteDescription;X.RTCPeerConnection.prototype.setRemoteDescription=function(){var z=this;return this._ontrackpoly||(this._ontrackpoly=function(oe){oe.stream.addEventListener("addtrack",function(A){var le=void 0;le=X.RTCPeerConnection.prototype.getReceivers?z.getReceivers().find(function(k){return k.track&&k.track.id===A.track.id}):{track:A.track};var $=new Event("track");$.track=A.track,$.receiver=le,$.transceiver={receiver:le},$.streams=[oe.stream],z.dispatchEvent($)}),oe.stream.getTracks().forEach(function(A){var le=void 0;le=X.RTCPeerConnection.prototype.getReceivers?z.getReceivers().find(function(k){return k.track&&k.track.id===A.id}):{track:A};var $=new Event("track");$.track=A,$.receiver=le,$.transceiver={receiver:le},$.streams=[oe.stream],z.dispatchEvent($)})},this.addEventListener("addstream",this._ontrackpoly)),P.apply(this,arguments)}}else w.wrapPeerConnectionEvent(X,"track",function(z){return z.transceiver||Object.defineProperty(z,"transceiver",{value:{receiver:z.receiver}}),z})}function C(X){if((X===void 0?"undefined":b(X))==="object"&&X.RTCPeerConnection&&!("getSenders"in X.RTCPeerConnection.prototype)&&"createDTMFSender"in X.RTCPeerConnection.prototype){var P=function(k,j){return{track:j,get dtmf(){return this._dtmf===void 0&&(this._dtmf=j.kind==="audio"?k.createDTMFSender(j):null),this._dtmf},_pc:k}};if(!X.RTCPeerConnection.prototype.getSenders){X.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var z=X.RTCPeerConnection.prototype.addTrack;X.RTCPeerConnection.prototype.addTrack=function(k,j){var K=z.apply(this,arguments);return K||(K=P(this,k),this._senders.push(K)),K};var oe=X.RTCPeerConnection.prototype.removeTrack;X.RTCPeerConnection.prototype.removeTrack=function(k){oe.apply(this,arguments);var j=this._senders.indexOf(k);j!==-1&&this._senders.splice(j,1)}}var A=X.RTCPeerConnection.prototype.addStream;X.RTCPeerConnection.prototype.addStream=function(k){var j=this;this._senders=this._senders||[],A.apply(this,[k]),k.getTracks().forEach(function(K){j._senders.push(P(j,K))})};var le=X.RTCPeerConnection.prototype.removeStream;X.RTCPeerConnection.prototype.removeStream=function(k){var j=this;this._senders=this._senders||[],le.apply(this,[k]),k.getTracks().forEach(function(K){var Z=j._senders.find(function(J){return J.track===K});Z&&j._senders.splice(j._senders.indexOf(Z),1)})}}else if((X===void 0?"undefined":b(X))==="object"&&X.RTCPeerConnection&&"getSenders"in X.RTCPeerConnection.prototype&&"createDTMFSender"in X.RTCPeerConnection.prototype&&X.RTCRtpSender&&!("dtmf"in X.RTCRtpSender.prototype)){var $=X.RTCPeerConnection.prototype.getSenders;X.RTCPeerConnection.prototype.getSenders=function(){var k=this,j=$.apply(this,[]);return j.forEach(function(K){return K._pc=k}),j},Object.defineProperty(X.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this._dtmf=this.track.kind==="audio"?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function q(X){if(X.RTCPeerConnection){var P=X.RTCPeerConnection.prototype.getStats;X.RTCPeerConnection.prototype.getStats=function(z,oe,A){var le=this,$=arguments;if(arguments.length>0&&typeof z=="function")return P.apply(this,arguments);if(P.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return P.apply(this,[]);var k=function(K){var Z={};return K.result().forEach(function(J){var D={id:J.id,timestamp:J.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[J.type]||J.type};J.names().forEach(function(G){D[G]=J.stat(G)}),Z[D.id]=D}),Z},j=function(K){return new Map(Object.keys(K).map(function(Z){return[Z,K[Z]]}))};return arguments.length>=2?P.apply(this,[function(K){$[1](j(k(K)))},arguments[0]]):new Promise(function(K,Z){P.apply(le,[function(J){K(j(k(J)))},Z])}).then(oe,A)}}}function ue(X){if((X===void 0?"undefined":b(X))==="object"&&X.RTCPeerConnection&&X.RTCRtpSender&&X.RTCRtpReceiver){if(!("getStats"in X.RTCRtpSender.prototype)){var P=X.RTCPeerConnection.prototype.getSenders;P&&(X.RTCPeerConnection.prototype.getSenders=function(){var le=this,$=P.apply(this,[]);return $.forEach(function(k){return k._pc=le}),$});var z=X.RTCPeerConnection.prototype.addTrack;z&&(X.RTCPeerConnection.prototype.addTrack=function(){var le=z.apply(this,arguments);return le._pc=this,le}),X.RTCRtpSender.prototype.getStats=function(){var le=this;return this._pc.getStats().then(function($){return w.filterStats($,le.track,!0)})}}if(!("getStats"in X.RTCRtpReceiver.prototype)){var oe=X.RTCPeerConnection.prototype.getReceivers;oe&&(X.RTCPeerConnection.prototype.getReceivers=function(){var le=this,$=oe.apply(this,[]);return $.forEach(function(k){return k._pc=le}),$}),w.wrapPeerConnectionEvent(X,"track",function(le){return le.receiver._pc=le.srcElement,le}),X.RTCRtpReceiver.prototype.getStats=function(){var le=this;return this._pc.getStats().then(function($){return w.filterStats($,le.track,!1)})}}if("getStats"in X.RTCRtpSender.prototype&&"getStats"in X.RTCRtpReceiver.prototype){var A=X.RTCPeerConnection.prototype.getStats;X.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof X.MediaStreamTrack){var le=arguments[0],$=void 0,k=void 0,j=void 0;return this.getSenders().forEach(function(K){K.track===le&&($?j=!0:$=K)}),this.getReceivers().forEach(function(K){return K.track===le&&(k?j=!0:k=K),K.track===le}),j||$&&k?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):$?$.getStats():k?k.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return A.apply(this,arguments)}}}}function se(X){X.RTCPeerConnection.prototype.getLocalStreams=function(){var le=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function($){return le._shimmedLocalStreams[$][0]})};var P=X.RTCPeerConnection.prototype.addTrack;X.RTCPeerConnection.prototype.addTrack=function(le,$){if(!$)return P.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var k=P.apply(this,arguments);return this._shimmedLocalStreams[$.id]?this._shimmedLocalStreams[$.id].indexOf(k)===-1&&this._shimmedLocalStreams[$.id].push(k):this._shimmedLocalStreams[$.id]=[$,k],k};var z=X.RTCPeerConnection.prototype.addStream;X.RTCPeerConnection.prototype.addStream=function(le){var $=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},le.getTracks().forEach(function(K){if($.getSenders().find(function(Z){return Z.track===K}))throw new DOMException("Track already exists.","InvalidAccessError")});var k=this.getSenders();z.apply(this,arguments);var j=this.getSenders().filter(function(K){return k.indexOf(K)===-1});this._shimmedLocalStreams[le.id]=[le].concat(j)};var oe=X.RTCPeerConnection.prototype.removeStream;X.RTCPeerConnection.prototype.removeStream=function(le){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[le.id],oe.apply(this,arguments)};var A=X.RTCPeerConnection.prototype.removeTrack;X.RTCPeerConnection.prototype.removeTrack=function(le){var $=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},le&&Object.keys(this._shimmedLocalStreams).forEach(function(k){var j=$._shimmedLocalStreams[k].indexOf(le);j!==-1&&$._shimmedLocalStreams[k].splice(j,1),$._shimmedLocalStreams[k].length===1&&delete $._shimmedLocalStreams[k]}),A.apply(this,arguments)}}function Y(X){if(X.RTCPeerConnection){var P=w.detectBrowser(X);if(X.RTCPeerConnection.prototype.addTrack&&P.version>=65)return se(X);var z=X.RTCPeerConnection.prototype.getLocalStreams;X.RTCPeerConnection.prototype.getLocalStreams=function(){var K=this,Z=z.apply(this);return this._reverseStreams=this._reverseStreams||{},Z.map(function(J){return K._reverseStreams[J.id]})};var oe=X.RTCPeerConnection.prototype.addStream;X.RTCPeerConnection.prototype.addStream=function(K){var Z=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},K.getTracks().forEach(function(D){if(Z.getSenders().find(function(G){return G.track===D}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[K.id]){var J=new X.MediaStream(K.getTracks());this._streams[K.id]=J,this._reverseStreams[J.id]=K,K=J}oe.apply(this,[K])};var A=X.RTCPeerConnection.prototype.removeStream;X.RTCPeerConnection.prototype.removeStream=function(K){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},A.apply(this,[this._streams[K.id]||K]),delete this._reverseStreams[this._streams[K.id]?this._streams[K.id].id:K.id],delete this._streams[K.id]},X.RTCPeerConnection.prototype.addTrack=function(K,Z){var J=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var D=[].slice.call(arguments,1);if(D.length!==1||!D[0].getTracks().find(function(L){return L===K}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(L){return L.track===K}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var G=this._streams[Z.id];if(G)G.addTrack(K),Promise.resolve().then(function(){J.dispatchEvent(new Event("negotiationneeded"))});else{var M=new X.MediaStream([K]);this._streams[Z.id]=M,this._reverseStreams[M.id]=Z,this.addStream(M)}return this.getSenders().find(function(L){return L.track===K})},["createOffer","createAnswer"].forEach(function(K){var Z=X.RTCPeerConnection.prototype[K];X.RTCPeerConnection.prototype[K]=function(){var J=this,D=arguments;return arguments.length&&typeof arguments[0]=="function"?Z.apply(this,[function(G){var M=k(J,G);D[0].apply(null,[M])},function(G){D[1]&&D[1].apply(null,G)},arguments[2]]):Z.apply(this,arguments).then(function(G){return k(J,G)})}});var le=X.RTCPeerConnection.prototype.setLocalDescription;X.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=j(this,arguments[0]),le.apply(this,arguments)):le.apply(this,arguments)};var $=Object.getOwnPropertyDescriptor(X.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(X.RTCPeerConnection.prototype,"localDescription",{get:function(){var K=$.get.apply(this);return K.type===""?K:k(this,K)}}),X.RTCPeerConnection.prototype.removeTrack=function(K){var Z=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!K._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(K._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var J=void 0;Object.keys(this._streams).forEach(function(D){Z._streams[D].getTracks().find(function(G){return K.track===G})&&(J=Z._streams[D])}),J&&(J.getTracks().length===1?this.removeStream(this._reverseStreams[J.id]):J.removeTrack(K.track),this.dispatchEvent(new Event("negotiationneeded")))}}function k(K,Z){var J=Z.sdp;return Object.keys(K._reverseStreams||[]).forEach(function(D){var G=K._reverseStreams[D];J=J.replace(new RegExp(K._streams[G.id].id,"g"),G.id)}),new RTCSessionDescription({type:Z.type,sdp:J})}function j(K,Z){var J=Z.sdp;return Object.keys(K._reverseStreams||[]).forEach(function(D){var G=K._reverseStreams[D],M=K._streams[G.id];J=J.replace(new RegExp(G.id,"g"),M.id)}),new RTCSessionDescription({type:Z.type,sdp:J})}}function pe(X){if(!X.RTCPeerConnection&&X.webkitRTCPeerConnection&&(X.RTCPeerConnection=X.webkitRTCPeerConnection),X.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(z){var oe=X.RTCPeerConnection.prototype[z];X.RTCPeerConnection.prototype[z]=function(){return arguments[0]=new(z==="addIceCandidate"?X.RTCIceCandidate:X.RTCSessionDescription)(arguments[0]),oe.apply(this,arguments)}});var P=X.RTCPeerConnection.prototype.addIceCandidate;X.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?P.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function ce(X){w.wrapPeerConnectionEvent(X,"negotiationneeded",function(P){if(P.target.signalingState==="stable")return P})}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(l,g,v){function b(_,E){_.navigator.mediaDevices&&"getDisplayMedia"in _.navigator.mediaDevices||_.navigator.mediaDevices&&(typeof E=="function"?_.navigator.mediaDevices.getDisplayMedia=function(w){return E(w).then(function(O){var U=w.video&&w.video.width,V=w.video&&w.video.height;return w.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:O,maxFrameRate:w.video&&w.video.frameRate||3}},U&&(w.video.mandatory.maxWidth=U),V&&(w.video.mandatory.maxHeight=V),_.navigator.mediaDevices.getUserMedia(w)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=b},{}],5:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U};v.shimGetUserMedia=O;var _=E(l("../utils.js"));function E(U){if(U&&U.__esModule)return U;var V={};if(U!=null)for(var C in U)Object.prototype.hasOwnProperty.call(U,C)&&(V[C]=U[C]);return V.default=U,V}var w=_.log;function O(U){var V=U&&U.navigator;if(V.mediaDevices){var C=_.detectBrowser(U),q=function(ce){if((ce===void 0?"undefined":b(ce))!=="object"||ce.mandatory||ce.optional)return ce;var X={};return Object.keys(ce).forEach(function(P){if(P!=="require"&&P!=="advanced"&&P!=="mediaSource"){var z=b(ce[P])==="object"?ce[P]:{ideal:ce[P]};z.exact!==void 0&&typeof z.exact=="number"&&(z.min=z.max=z.exact);var oe=function(le,$){return le?le+$.charAt(0).toUpperCase()+$.slice(1):$==="deviceId"?"sourceId":$};if(z.ideal!==void 0){X.optional=X.optional||[];var A={};typeof z.ideal=="number"?(A[oe("min",P)]=z.ideal,X.optional.push(A),(A={})[oe("max",P)]=z.ideal,X.optional.push(A)):(A[oe("",P)]=z.ideal,X.optional.push(A))}z.exact!==void 0&&typeof z.exact!="number"?(X.mandatory=X.mandatory||{},X.mandatory[oe("",P)]=z.exact):["min","max"].forEach(function(le){z[le]!==void 0&&(X.mandatory=X.mandatory||{},X.mandatory[oe(le,P)]=z[le])})}}),ce.advanced&&(X.optional=(X.optional||[]).concat(ce.advanced)),X},ue=function(ce,X){if(C.version>=61)return X(ce);if((ce=JSON.parse(JSON.stringify(ce)))&&b(ce.audio)==="object"){var P=function(le,$,k){$ in le&&!(k in le)&&(le[k]=le[$],delete le[$])};P((ce=JSON.parse(JSON.stringify(ce))).audio,"autoGainControl","googAutoGainControl"),P(ce.audio,"noiseSuppression","googNoiseSuppression"),ce.audio=q(ce.audio)}if(ce&&b(ce.video)==="object"){var z=ce.video.facingMode;z=z&&((z===void 0?"undefined":b(z))==="object"?z:{ideal:z});var oe=C.version<66;if(z&&(z.exact==="user"||z.exact==="environment"||z.ideal==="user"||z.ideal==="environment")&&(!V.mediaDevices.getSupportedConstraints||!V.mediaDevices.getSupportedConstraints().facingMode||oe)){delete ce.video.facingMode;var A=void 0;if(z.exact==="environment"||z.ideal==="environment"?A=["back","rear"]:z.exact!=="user"&&z.ideal!=="user"||(A=["front"]),A)return V.mediaDevices.enumerateDevices().then(function(le){var $=(le=le.filter(function(k){return k.kind==="videoinput"})).find(function(k){return A.some(function(j){return k.label.toLowerCase().includes(j)})});return!$&&le.length&&A.includes("back")&&($=le[le.length-1]),$&&(ce.video.deviceId=z.exact?{exact:$.deviceId}:{ideal:$.deviceId}),ce.video=q(ce.video),w("chrome: "+JSON.stringify(ce)),X(ce)})}ce.video=q(ce.video)}return w("chrome: "+JSON.stringify(ce)),X(ce)},se=function(ce){return C.version>=64?ce:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ce.name]||ce.name,message:ce.message,constraint:ce.constraint||ce.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},Y=function(ce,X,P){ue(ce,function(z){V.webkitGetUserMedia(z,X,function(oe){P&&P(se(oe))})})};if(V.getUserMedia=Y.bind(V),V.mediaDevices.getUserMedia){var pe=V.mediaDevices.getUserMedia.bind(V.mediaDevices);V.mediaDevices.getUserMedia=function(ce){return ue(ce,function(X){return pe(X).then(function(P){if(X.audio&&!P.getAudioTracks().length||X.video&&!P.getVideoTracks().length)throw P.getTracks().forEach(function(z){z.stop()}),new DOMException("","NotFoundError");return P},function(P){return Promise.reject(se(P))})})}}}}},{"../utils.js":15}],6:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se};v.shimRTCIceCandidate=U,v.shimMaxMessageSize=V,v.shimSendThrowTypeError=C,v.shimConnectionState=q,v.removeAllowExtmapMixed=ue;var _=O(l("sdp")),E=w(l("./utils"));function w(se){if(se&&se.__esModule)return se;var Y={};if(se!=null)for(var pe in se)Object.prototype.hasOwnProperty.call(se,pe)&&(Y[pe]=se[pe]);return Y.default=se,Y}function O(se){return se&&se.__esModule?se:{default:se}}function U(se){if(!(!se.RTCIceCandidate||se.RTCIceCandidate&&"foundation"in se.RTCIceCandidate.prototype)){var Y=se.RTCIceCandidate;se.RTCIceCandidate=function(pe){if((pe===void 0?"undefined":b(pe))==="object"&&pe.candidate&&pe.candidate.indexOf("a=")===0&&((pe=JSON.parse(JSON.stringify(pe))).candidate=pe.candidate.substr(2)),pe.candidate&&pe.candidate.length){var ce=new Y(pe),X=_.default.parseCandidate(pe.candidate),P=Object.assign(ce,X);return P.toJSON=function(){return{candidate:P.candidate,sdpMid:P.sdpMid,sdpMLineIndex:P.sdpMLineIndex,usernameFragment:P.usernameFragment}},P}return new Y(pe)},se.RTCIceCandidate.prototype=Y.prototype,E.wrapPeerConnectionEvent(se,"icecandidate",function(pe){return pe.candidate&&Object.defineProperty(pe,"candidate",{value:new se.RTCIceCandidate(pe.candidate),writable:"false"}),pe})}}function V(se){if(!se.RTCSctpTransport&&se.RTCPeerConnection){var Y=E.detectBrowser(se);"sctp"in se.RTCPeerConnection.prototype||Object.defineProperty(se.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var pe=function(oe){if(!oe||!oe.sdp)return!1;var A=_.default.splitSections(oe.sdp);return A.shift(),A.some(function(le){var $=_.default.parseMLine(le);return $&&$.kind==="application"&&$.protocol.indexOf("SCTP")!==-1})},ce=function(oe){var A=oe.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(A===null||A.length<2)return-1;var le=parseInt(A[1],10);return le!=le?-1:le},X=function(oe){var A=65536;return Y.browser==="firefox"&&(A=Y.version<57?oe===-1?16384:2147483637:Y.version<60?Y.version===57?65535:65536:2147483637),A},P=function(oe,A){var le=65536;Y.browser==="firefox"&&Y.version===57&&(le=65535);var $=_.default.matchPrefix(oe.sdp,"a=max-message-size:");return $.length>0?le=parseInt($[0].substr(19),10):Y.browser==="firefox"&&A!==-1&&(le=2147483637),le},z=se.RTCPeerConnection.prototype.setRemoteDescription;se.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,pe(arguments[0])){var oe=ce(arguments[0]),A=X(oe),le=P(arguments[0],oe),$=void 0;$=A===0&&le===0?Number.POSITIVE_INFINITY:A===0||le===0?Math.max(A,le):Math.min(A,le);var k={};Object.defineProperty(k,"maxMessageSize",{get:function(){return $}}),this._sctp=k}return z.apply(this,arguments)}}}function C(se){if(se.RTCPeerConnection&&"createDataChannel"in se.RTCPeerConnection.prototype){var Y=se.RTCPeerConnection.prototype.createDataChannel;se.RTCPeerConnection.prototype.createDataChannel=function(){var ce=Y.apply(this,arguments);return pe(ce,this),ce},E.wrapPeerConnectionEvent(se,"datachannel",function(ce){return pe(ce.channel,ce.target),ce})}function pe(ce,X){var P=ce.send;ce.send=function(){var z=arguments[0];if(ce.readyState==="open"&&X.sctp&&(z.length||z.size||z.byteLength)>X.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+X.sctp.maxMessageSize+" bytes)");return P.apply(ce,arguments)}}}function q(se){if(se.RTCPeerConnection&&!("connectionState"in se.RTCPeerConnection.prototype)){var Y=se.RTCPeerConnection.prototype;Object.defineProperty(Y,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(Y,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(pe){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),pe&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=pe)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(pe){var ce=Y[pe];Y[pe]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(X){var P=X.target;if(P._lastConnectionState!==P.connectionState){P._lastConnectionState=P.connectionState;var z=new Event("connectionstatechange",X);P.dispatchEvent(z)}return X},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),ce.apply(this,arguments)}})}}function ue(se){if(se.RTCPeerConnection){var Y=E.detectBrowser(se);if(!(Y.browser==="chrome"&&Y.version>=71)){var pe=se.RTCPeerConnection.prototype.setRemoteDescription;se.RTCPeerConnection.prototype.setRemoteDescription=function(ce){return ce&&ce.sdp&&ce.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(ce.sdp=ce.sdp.split(`
`).filter(function(X){return X.trim()!=="a=extmap-allow-mixed"}).join(`
`)),pe.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=v.shimGetUserMedia=void 0;var b=l("./getusermedia");Object.defineProperty(v,"shimGetUserMedia",{enumerable:!0,get:function(){return b.shimGetUserMedia}});var _=l("./getdisplaymedia");Object.defineProperty(v,"shimGetDisplayMedia",{enumerable:!0,get:function(){return _.shimGetDisplayMedia}}),v.shimPeerConnection=C,v.shimReplaceTrack=q;var E=V(l("../utils")),w=l("./filtericeservers"),O=U(l("rtcpeerconnection-shim"));function U(ue){return ue&&ue.__esModule?ue:{default:ue}}function V(ue){if(ue&&ue.__esModule)return ue;var se={};if(ue!=null)for(var Y in ue)Object.prototype.hasOwnProperty.call(ue,Y)&&(se[Y]=ue[Y]);return se.default=ue,se}function C(ue){var se=E.detectBrowser(ue);if(ue.RTCIceGatherer&&(ue.RTCIceCandidate||(ue.RTCIceCandidate=function(ce){return ce}),ue.RTCSessionDescription||(ue.RTCSessionDescription=function(ce){return ce}),se.version<15025)){var Y=Object.getOwnPropertyDescriptor(ue.MediaStreamTrack.prototype,"enabled");Object.defineProperty(ue.MediaStreamTrack.prototype,"enabled",{set:function(ce){Y.set.call(this,ce);var X=new Event("enabled");X.enabled=ce,this.dispatchEvent(X)}})}ue.RTCRtpSender&&!("dtmf"in ue.RTCRtpSender.prototype)&&Object.defineProperty(ue.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new ue.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),ue.RTCDtmfSender&&!ue.RTCDTMFSender&&(ue.RTCDTMFSender=ue.RTCDtmfSender);var pe=(0,O.default)(ue,se.version);ue.RTCPeerConnection=function(ce){return ce&&ce.iceServers&&(ce.iceServers=(0,w.filterIceServers)(ce.iceServers,se.version),E.log("ICE servers after filtering:",ce.iceServers)),new pe(ce)},ue.RTCPeerConnection.prototype=pe.prototype}function q(ue){ue.RTCRtpSender&&!("replaceTrack"in ue.RTCRtpSender.prototype)&&(ue.RTCRtpSender.prototype.replaceTrack=ue.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0}),v.filterIceServers=E;var b=_(l("../utils"));function _(w){if(w&&w.__esModule)return w;var O={};if(w!=null)for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&(O[U]=w[U]);return O.default=w,O}function E(w,O){var U=!1;return(w=JSON.parse(JSON.stringify(w))).filter(function(V){if(V&&(V.urls||V.url)){var C=V.urls||V.url;V.url&&!V.urls&&b.deprecated("RTCIceServer.url","RTCIceServer.urls");var q=typeof C=="string";return q&&(C=[C]),C=C.filter(function(ue){if(ue.indexOf("stun:")===0)return!1;var se=ue.startsWith("turn")&&!ue.startsWith("turn:[")&&ue.includes("transport=udp");return se&&!U?(U=!0,!0):se&&!U}),delete V.url,V.urls=q?C[0]:C,!!C.length}})}},{"../utils":15}],9:[function(l,g,v){function b(_){"getDisplayMedia"in _.navigator&&_.navigator.mediaDevices&&(_.navigator.mediaDevices&&"getDisplayMedia"in _.navigator.mediaDevices||(_.navigator.mediaDevices.getDisplayMedia=_.navigator.getDisplayMedia.bind(_.navigator)))}Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=b},{}],10:[function(l,g,v){function b(_){var E=_&&_.navigator,w=function(U){return{name:{PermissionDeniedError:"NotAllowedError"}[U.name]||U.name,message:U.message,constraint:U.constraint,toString:function(){return this.name}}},O=E.mediaDevices.getUserMedia.bind(E.mediaDevices);E.mediaDevices.getUserMedia=function(U){return O(U).catch(function(V){return Promise.reject(w(V))})}}Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetUserMedia=b},{}],11:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=v.shimGetUserMedia=void 0;var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},_=l("./getusermedia");Object.defineProperty(v,"shimGetUserMedia",{enumerable:!0,get:function(){return _.shimGetUserMedia}});var E=l("./getdisplaymedia");Object.defineProperty(v,"shimGetDisplayMedia",{enumerable:!0,get:function(){return E.shimGetDisplayMedia}}),v.shimOnTrack=U,v.shimPeerConnection=V,v.shimSenderGetStats=C,v.shimReceiverGetStats=q,v.shimRemoveStream=ue,v.shimRTCDataChannel=se;var w=O(l("../utils"));function O(Y){if(Y&&Y.__esModule)return Y;var pe={};if(Y!=null)for(var ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(pe[ce]=Y[ce]);return pe.default=Y,pe}function U(Y){(Y===void 0?"undefined":b(Y))==="object"&&Y.RTCTrackEvent&&"receiver"in Y.RTCTrackEvent.prototype&&!("transceiver"in Y.RTCTrackEvent.prototype)&&Object.defineProperty(Y.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function V(Y){var pe=w.detectBrowser(Y);if((Y===void 0?"undefined":b(Y))==="object"&&(Y.RTCPeerConnection||Y.mozRTCPeerConnection)){!Y.RTCPeerConnection&&Y.mozRTCPeerConnection&&(Y.RTCPeerConnection=Y.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(z){var oe=Y.RTCPeerConnection.prototype[z];Y.RTCPeerConnection.prototype[z]=function(){return arguments[0]=new(z==="addIceCandidate"?Y.RTCIceCandidate:Y.RTCSessionDescription)(arguments[0]),oe.apply(this,arguments)}});var ce=Y.RTCPeerConnection.prototype.addIceCandidate;Y.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ce.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var X={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},P=Y.RTCPeerConnection.prototype.getStats;Y.RTCPeerConnection.prototype.getStats=function(z,oe,A){return P.apply(this,[z||null]).then(function(le){if(pe.version<53&&!oe)try{le.forEach(function($){$.type=X[$.type]||$.type})}catch($){if($.name!=="TypeError")throw $;le.forEach(function(k,j){le.set(j,Object.assign({},k,{type:X[k.type]||k.type}))})}return le}).then(oe,A)}}}function C(Y){if((Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection&&Y.RTCRtpSender&&(!Y.RTCRtpSender||!("getStats"in Y.RTCRtpSender.prototype))){var pe=Y.RTCPeerConnection.prototype.getSenders;pe&&(Y.RTCPeerConnection.prototype.getSenders=function(){var X=this,P=pe.apply(this,[]);return P.forEach(function(z){return z._pc=X}),P});var ce=Y.RTCPeerConnection.prototype.addTrack;ce&&(Y.RTCPeerConnection.prototype.addTrack=function(){var X=ce.apply(this,arguments);return X._pc=this,X}),Y.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function q(Y){if((Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection&&Y.RTCRtpSender&&(!Y.RTCRtpSender||!("getStats"in Y.RTCRtpReceiver.prototype))){var pe=Y.RTCPeerConnection.prototype.getReceivers;pe&&(Y.RTCPeerConnection.prototype.getReceivers=function(){var ce=this,X=pe.apply(this,[]);return X.forEach(function(P){return P._pc=ce}),X}),w.wrapPeerConnectionEvent(Y,"track",function(ce){return ce.receiver._pc=ce.srcElement,ce}),Y.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function ue(Y){Y.RTCPeerConnection&&!("removeStream"in Y.RTCPeerConnection.prototype)&&(Y.RTCPeerConnection.prototype.removeStream=function(pe){var ce=this;w.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(X){X.track&&pe.getTracks().includes(X.track)&&ce.removeTrack(X)})})}function se(Y){Y.DataChannel&&!Y.RTCDataChannel&&(Y.RTCDataChannel=Y.DataChannel)}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(l,g,v){function b(_,E){_.navigator.mediaDevices&&"getDisplayMedia"in _.navigator.mediaDevices||_.navigator.mediaDevices&&(_.navigator.mediaDevices.getDisplayMedia=function(w){if(!w||!w.video){var O=new DOMException("getDisplayMedia without video constraints is undefined");return O.name="NotFoundError",O.code=8,Promise.reject(O)}return w.video===!0?w.video={mediaSource:E}:w.video.mediaSource=E,_.navigator.mediaDevices.getUserMedia(w)})}Object.defineProperty(v,"__esModule",{value:!0}),v.shimGetDisplayMedia=b},{}],13:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};v.shimGetUserMedia=w;var _=E(l("../utils"));function E(O){if(O&&O.__esModule)return O;var U={};if(O!=null)for(var V in O)Object.prototype.hasOwnProperty.call(O,V)&&(U[V]=O[V]);return U.default=O,U}function w(O){var U=_.detectBrowser(O),V=O&&O.navigator,C=O&&O.MediaStreamTrack;if(V.getUserMedia=function(pe,ce,X){_.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),V.mediaDevices.getUserMedia(pe).then(ce,X)},!(U.version>55&&"autoGainControl"in V.mediaDevices.getSupportedConstraints())){var q=function(pe,ce,X){ce in pe&&!(X in pe)&&(pe[X]=pe[ce],delete pe[ce])},ue=V.mediaDevices.getUserMedia.bind(V.mediaDevices);if(V.mediaDevices.getUserMedia=function(pe){return(pe===void 0?"undefined":b(pe))==="object"&&b(pe.audio)==="object"&&(pe=JSON.parse(JSON.stringify(pe)),q(pe.audio,"autoGainControl","mozAutoGainControl"),q(pe.audio,"noiseSuppression","mozNoiseSuppression")),ue(pe)},C&&C.prototype.getSettings){var se=C.prototype.getSettings;C.prototype.getSettings=function(){var pe=se.apply(this,arguments);return q(pe,"mozAutoGainControl","autoGainControl"),q(pe,"mozNoiseSuppression","noiseSuppression"),pe}}if(C&&C.prototype.applyConstraints){var Y=C.prototype.applyConstraints;C.prototype.applyConstraints=function(pe){return this.kind==="audio"&&(pe===void 0?"undefined":b(pe))==="object"&&(pe=JSON.parse(JSON.stringify(pe)),q(pe,"autoGainControl","mozAutoGainControl"),q(pe,"noiseSuppression","mozNoiseSuppression")),Y.apply(this,[pe])}}}}},{"../utils":15}],14:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};v.shimLocalStreamsAPI=w,v.shimRemoteStreamsAPI=O,v.shimCallbacksAPI=U,v.shimGetUserMedia=V,v.shimConstraints=C,v.shimRTCIceServerUrls=q,v.shimTrackEventTransceiver=ue,v.shimCreateOfferLegacy=se;var _=E(l("../utils"));function E(Y){if(Y&&Y.__esModule)return Y;var pe={};if(Y!=null)for(var ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(pe[ce]=Y[ce]);return pe.default=Y,pe}function w(Y){if((Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection){if("getLocalStreams"in Y.RTCPeerConnection.prototype||(Y.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in Y.RTCPeerConnection.prototype)){var pe=Y.RTCPeerConnection.prototype.addTrack;Y.RTCPeerConnection.prototype.addStream=function(ce){var X=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(ce)||this._localStreams.push(ce),ce.getTracks().forEach(function(P){return pe.call(X,P,ce)})},Y.RTCPeerConnection.prototype.addTrack=function(ce,X){return X&&(this._localStreams?this._localStreams.includes(X)||this._localStreams.push(X):this._localStreams=[X]),pe.call(this,ce,X)}}"removeStream"in Y.RTCPeerConnection.prototype||(Y.RTCPeerConnection.prototype.removeStream=function(ce){var X=this;this._localStreams||(this._localStreams=[]);var P=this._localStreams.indexOf(ce);if(P!==-1){this._localStreams.splice(P,1);var z=ce.getTracks();this.getSenders().forEach(function(oe){z.includes(oe.track)&&X.removeTrack(oe)})}})}}function O(Y){if((Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection&&("getRemoteStreams"in Y.RTCPeerConnection.prototype||(Y.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in Y.RTCPeerConnection.prototype))){Object.defineProperty(Y.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(ce){var X=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=ce),this.addEventListener("track",this._onaddstreampoly=function(P){P.streams.forEach(function(z){if(X._remoteStreams||(X._remoteStreams=[]),!X._remoteStreams.includes(z)){X._remoteStreams.push(z);var oe=new Event("addstream");oe.stream=z,X.dispatchEvent(oe)}})})}});var pe=Y.RTCPeerConnection.prototype.setRemoteDescription;Y.RTCPeerConnection.prototype.setRemoteDescription=function(){var ce=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(X){X.streams.forEach(function(P){if(ce._remoteStreams||(ce._remoteStreams=[]),!(ce._remoteStreams.indexOf(P)>=0)){ce._remoteStreams.push(P);var z=new Event("addstream");z.stream=P,ce.dispatchEvent(z)}})}),pe.apply(ce,arguments)}}}function U(Y){if((Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection){var pe=Y.RTCPeerConnection.prototype,ce=pe.createOffer,X=pe.createAnswer,P=pe.setLocalDescription,z=pe.setRemoteDescription,oe=pe.addIceCandidate;pe.createOffer=function(le,$){var k=ce.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return $?(k.then(le,$),Promise.resolve()):k},pe.createAnswer=function(le,$){var k=X.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return $?(k.then(le,$),Promise.resolve()):k};var A=function(le,$,k){var j=P.apply(this,[le]);return k?(j.then($,k),Promise.resolve()):j};pe.setLocalDescription=A,pe.setRemoteDescription=A=function(le,$,k){var j=z.apply(this,[le]);return k?(j.then($,k),Promise.resolve()):j},pe.addIceCandidate=A=function(le,$,k){var j=oe.apply(this,[le]);return k?(j.then($,k),Promise.resolve()):j}}}function V(Y){var pe=Y&&Y.navigator;if(pe.mediaDevices&&pe.mediaDevices.getUserMedia){var ce=pe.mediaDevices,X=ce.getUserMedia.bind(ce);pe.mediaDevices.getUserMedia=function(P){return X(C(P))}}!pe.getUserMedia&&pe.mediaDevices&&pe.mediaDevices.getUserMedia&&(pe.getUserMedia=(function(P,z,oe){pe.mediaDevices.getUserMedia(P).then(z,oe)}).bind(pe))}function C(Y){return Y&&Y.video!==void 0?Object.assign({},Y,{video:_.compactObject(Y.video)}):Y}function q(Y){var pe=Y.RTCPeerConnection;Y.RTCPeerConnection=function(ce,X){if(ce&&ce.iceServers){for(var P=[],z=0;z<ce.iceServers.length;z++){var oe=ce.iceServers[z];!oe.hasOwnProperty("urls")&&oe.hasOwnProperty("url")?(_.deprecated("RTCIceServer.url","RTCIceServer.urls"),(oe=JSON.parse(JSON.stringify(oe))).urls=oe.url,delete oe.url,P.push(oe)):P.push(ce.iceServers[z])}ce.iceServers=P}return new pe(ce,X)},Y.RTCPeerConnection.prototype=pe.prototype,"generateCertificate"in Y.RTCPeerConnection&&Object.defineProperty(Y.RTCPeerConnection,"generateCertificate",{get:function(){return pe.generateCertificate}})}function ue(Y){(Y===void 0?"undefined":b(Y))==="object"&&Y.RTCPeerConnection&&"receiver"in Y.RTCTrackEvent.prototype&&!Y.RTCTransceiver&&Object.defineProperty(Y.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function se(Y){var pe=Y.RTCPeerConnection.prototype.createOffer;Y.RTCPeerConnection.prototype.createOffer=function(ce){if(ce){ce.offerToReceiveAudio!==void 0&&(ce.offerToReceiveAudio=!!ce.offerToReceiveAudio);var X=this.getTransceivers().find(function(z){return z.receiver.track.kind==="audio"});ce.offerToReceiveAudio===!1&&X?X.direction==="sendrecv"?X.setDirection?X.setDirection("sendonly"):X.direction="sendonly":X.direction==="recvonly"&&(X.setDirection?X.setDirection("inactive"):X.direction="inactive"):ce.offerToReceiveAudio!==!0||X||this.addTransceiver("audio"),ce.offerToReceiveVideo!==void 0&&(ce.offerToReceiveVideo=!!ce.offerToReceiveVideo);var P=this.getTransceivers().find(function(z){return z.receiver.track.kind==="video"});ce.offerToReceiveVideo===!1&&P?P.direction==="sendrecv"?P.setDirection?P.setDirection("sendonly"):P.direction="sendonly":P.direction==="recvonly"&&(P.setDirection?P.setDirection("inactive"):P.direction="inactive"):ce.offerToReceiveVideo!==!0||P||this.addTransceiver("video")}return pe.apply(this,arguments)}}},{"../utils":15}],15:[function(l,g,v){Object.defineProperty(v,"__esModule",{value:!0});var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X};function _(X,P,z){return P in X?Object.defineProperty(X,P,{value:z,enumerable:!0,configurable:!0,writable:!0}):X[P]=z,X}v.extractVersion=O,v.wrapPeerConnectionEvent=U,v.disableLog=V,v.disableWarnings=C,v.log=q,v.deprecated=ue,v.detectBrowser=se,v.compactObject=Y,v.walkStats=pe,v.filterStats=ce;var E=!0,w=!0;function O(X,P,z){var oe=X.match(P);return oe&&oe.length>=z&&parseInt(oe[z],10)}function U(X,P,z){if(X.RTCPeerConnection){var oe=X.RTCPeerConnection.prototype,A=oe.addEventListener;oe.addEventListener=function($,k){if($!==P)return A.apply(this,arguments);var j=function(K){var Z=z(K);Z&&k(Z)};return this._eventMap=this._eventMap||{},this._eventMap[k]=j,A.apply(this,[$,j])};var le=oe.removeEventListener;oe.removeEventListener=function($,k){if($!==P||!this._eventMap||!this._eventMap[k])return le.apply(this,arguments);var j=this._eventMap[k];return delete this._eventMap[k],le.apply(this,[$,j])},Object.defineProperty(oe,"on"+P,{get:function(){return this["_on"+P]},set:function($){this["_on"+P]&&(this.removeEventListener(P,this["_on"+P]),delete this["_on"+P]),$&&this.addEventListener(P,this["_on"+P]=$)},enumerable:!0,configurable:!0})}}function V(X){return typeof X!="boolean"?new Error("Argument type: "+(X===void 0?"undefined":b(X))+". Please use a boolean."):(E=X,X?"adapter.js logging disabled":"adapter.js logging enabled")}function C(X){return typeof X!="boolean"?new Error("Argument type: "+(X===void 0?"undefined":b(X))+". Please use a boolean."):(w=!X,"adapter.js deprecation warnings "+(X?"disabled":"enabled"))}function q(){if((typeof window>"u"?"undefined":b(window))==="object"){if(E)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ue(X,P){w&&console.warn(X+" is deprecated, please use "+P+" instead.")}function se(X){var P=X.navigator,z={browser:null,version:null};if(X===void 0||!X.navigator)return z.browser="Not a browser.",z;if(P.mozGetUserMedia)z.browser="firefox",z.version=O(P.userAgent,/Firefox\/(\d+)\./,1);else if(P.webkitGetUserMedia||X.isSecureContext===!1&&X.webkitRTCPeerConnection&&!X.RTCIceGatherer)z.browser="chrome",z.version=O(P.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(P.mediaDevices&&P.userAgent.match(/Edge\/(\d+).(\d+)$/))z.browser="edge",z.version=O(P.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!X.RTCPeerConnection||!P.userAgent.match(/AppleWebKit\/(\d+)\./))return z.browser="Not a supported browser.",z;z.browser="safari",z.version=O(P.userAgent,/AppleWebKit\/(\d+)\./,1)}return z}function Y(X){return(X===void 0?"undefined":b(X))!=="object"?X:Object.keys(X).reduce(function(P,z){var oe=b(X[z])==="object",A=oe?Y(X[z]):X[z],le=oe&&!Object.keys(A).length;return A===void 0||le?P:Object.assign(P,_({},z,A))},{})}function pe(X,P,z){P&&!z.has(P.id)&&(z.set(P.id,P),Object.keys(P).forEach(function(oe){oe.endsWith("Id")?pe(X,X.get(P[oe]),z):oe.endsWith("Ids")&&P[oe].forEach(function(A){pe(X,X.get(A),z)})}))}function ce(X,P,z){var oe=z?"outbound-rtp":"inbound-rtp",A=new Map;if(P===null)return A;var le=[];return X.forEach(function($){$.type==="track"&&$.trackIdentifier===P.id&&le.push($)}),le.forEach(function($){X.forEach(function(k){k.type===oe&&k.trackId===$.id&&pe(X,k,A)})}),A}},{}],16:[function(l,g,v){var b=l("sdp");function _(q){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[q.type]||q.type}function E(q,ue,se,Y,pe){var ce=b.writeRtpDescription(q.kind,ue);if(ce+=b.writeIceParameters(q.iceGatherer.getLocalParameters()),ce+=b.writeDtlsParameters(q.dtlsTransport.getLocalParameters(),se==="offer"?"actpass":pe||"active"),ce+="a=mid:"+q.mid+`\r
`,ce+=q.rtpSender&&q.rtpReceiver?`a=sendrecv\r
`:q.rtpSender?`a=sendonly\r
`:q.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,q.rtpSender){var X=q.rtpSender._initialTrackId||q.rtpSender.track.id;q.rtpSender._initialTrackId=X;var P="msid:"+(Y?Y.id:"-")+" "+X+`\r
`;ce+="a="+P,ce+="a=ssrc:"+q.sendEncodingParameters[0].ssrc+" "+P,q.sendEncodingParameters[0].rtx&&(ce+="a=ssrc:"+q.sendEncodingParameters[0].rtx.ssrc+" "+P,ce+="a=ssrc-group:FID "+q.sendEncodingParameters[0].ssrc+" "+q.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ce+="a=ssrc:"+q.sendEncodingParameters[0].ssrc+" cname:"+b.localCName+`\r
`,q.rtpSender&&q.sendEncodingParameters[0].rtx&&(ce+="a=ssrc:"+q.sendEncodingParameters[0].rtx.ssrc+" cname:"+b.localCName+`\r
`),ce}function w(q,ue){var se=!1;return(q=JSON.parse(JSON.stringify(q))).filter(function(Y){if(Y&&(Y.urls||Y.url)){var pe=Y.urls||Y.url;Y.url&&!Y.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var ce=typeof pe=="string";return ce&&(pe=[pe]),pe=pe.filter(function(X){return X.indexOf("turn:")!==0||X.indexOf("transport=udp")===-1||X.indexOf("turn:[")!==-1||se?X.indexOf("stun:")===0&&ue>=14393&&X.indexOf("?transport=udp")===-1:(se=!0,!0)}),delete Y.url,Y.urls=ce?pe[0]:pe,!!pe.length}})}function O(q,ue){var se={codecs:[],headerExtensions:[],fecMechanisms:[]},Y=function(ce,X){ce=parseInt(ce,10);for(var P=0;P<X.length;P++)if(X[P].payloadType===ce||X[P].preferredPayloadType===ce)return X[P]},pe=function(ce,X,P,z){var oe=Y(ce.parameters.apt,P),A=Y(X.parameters.apt,z);return oe&&A&&oe.name.toLowerCase()===A.name.toLowerCase()};return q.codecs.forEach(function(ce){for(var X=0;X<ue.codecs.length;X++){var P=ue.codecs[X];if(ce.name.toLowerCase()===P.name.toLowerCase()&&ce.clockRate===P.clockRate){if(ce.name.toLowerCase()==="rtx"&&ce.parameters&&P.parameters.apt&&!pe(ce,P,q.codecs,ue.codecs))continue;(P=JSON.parse(JSON.stringify(P))).numChannels=Math.min(ce.numChannels,P.numChannels),se.codecs.push(P),P.rtcpFeedback=P.rtcpFeedback.filter(function(z){for(var oe=0;oe<ce.rtcpFeedback.length;oe++)if(ce.rtcpFeedback[oe].type===z.type&&ce.rtcpFeedback[oe].parameter===z.parameter)return!0;return!1});break}}}),q.headerExtensions.forEach(function(ce){for(var X=0;X<ue.headerExtensions.length;X++){var P=ue.headerExtensions[X];if(ce.uri===P.uri){se.headerExtensions.push(P);break}}}),se}function U(q,ue,se){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[ue][q].indexOf(se)!==-1}function V(q,ue){var se=q.getRemoteCandidates().find(function(Y){return ue.foundation===Y.foundation&&ue.ip===Y.ip&&ue.port===Y.port&&ue.priority===Y.priority&&ue.protocol===Y.protocol&&ue.type===Y.type});return se||q.addRemoteCandidate(ue),!se}function C(q,ue){var se=new Error(ue);return se.name=q,se.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[q],se}g.exports=function(q,ue){function se(P,z){z.addTrack(P),z.dispatchEvent(new q.MediaStreamTrackEvent("addtrack",{track:P}))}function Y(P,z){z.removeTrack(P),z.dispatchEvent(new q.MediaStreamTrackEvent("removetrack",{track:P}))}function pe(P,z,oe,A){var le=new Event("track");le.track=z,le.receiver=oe,le.transceiver={receiver:oe},le.streams=A,q.setTimeout(function(){P._dispatchEvent("track",le)})}var ce=function(P){var z=this,oe=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(le){z[le]=oe[le].bind(oe)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",P=JSON.parse(JSON.stringify(P||{})),this.usingBundle=P.bundlePolicy==="max-bundle",P.rtcpMuxPolicy==="negotiate")throw C("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(P.rtcpMuxPolicy||(P.rtcpMuxPolicy="require"),P.iceTransportPolicy){case"all":case"relay":break;default:P.iceTransportPolicy="all"}switch(P.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:P.bundlePolicy="balanced"}if(P.iceServers=w(P.iceServers||[],ue),this._iceGatherers=[],P.iceCandidatePoolSize)for(var A=P.iceCandidatePoolSize;A>0;A--)this._iceGatherers.push(new q.RTCIceGatherer({iceServers:P.iceServers,gatherPolicy:P.iceTransportPolicy}));else P.iceCandidatePoolSize=0;this._config=P,this.transceivers=[],this._sdpSessionId=b.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(ce.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(ce.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),ce.prototype.onicecandidate=null,ce.prototype.onaddstream=null,ce.prototype.ontrack=null,ce.prototype.onremovestream=null,ce.prototype.onsignalingstatechange=null,ce.prototype.oniceconnectionstatechange=null,ce.prototype.onconnectionstatechange=null,ce.prototype.onicegatheringstatechange=null,ce.prototype.onnegotiationneeded=null,ce.prototype.ondatachannel=null,ce.prototype._dispatchEvent=function(P,z){this._isClosed||(this.dispatchEvent(z),typeof this["on"+P]=="function"&&this["on"+P](z))},ce.prototype._emitGatheringStateChange=function(){var P=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",P)},ce.prototype.getConfiguration=function(){return this._config},ce.prototype.getLocalStreams=function(){return this.localStreams},ce.prototype.getRemoteStreams=function(){return this.remoteStreams},ce.prototype._createTransceiver=function(P,z){var oe={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:P,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)oe.iceTransport=this.transceivers[0].iceTransport,oe.dtlsTransport=this.transceivers[0].dtlsTransport;else{var A=this._createIceAndDtlsTransports();oe.iceTransport=A.iceTransport,oe.dtlsTransport=A.dtlsTransport}return z||this.transceivers.push(oe),oe},ce.prototype.addTrack=function(P,z){if(this._isClosed)throw C("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var oe;if(this.transceivers.find(function(le){return le.track===P}))throw C("InvalidAccessError","Track already exists.");for(var A=0;A<this.transceivers.length;A++)this.transceivers[A].track||this.transceivers[A].kind!==P.kind||(oe=this.transceivers[A]);return oe||(oe=this._createTransceiver(P.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(z)===-1&&this.localStreams.push(z),oe.track=P,oe.stream=z,oe.rtpSender=new q.RTCRtpSender(P,oe.dtlsTransport),oe.rtpSender},ce.prototype.addStream=function(P){var z=this;if(ue>=15025)P.getTracks().forEach(function(A){z.addTrack(A,P)});else{var oe=P.clone();P.getTracks().forEach(function(A,le){var $=oe.getTracks()[le];A.addEventListener("enabled",function(k){$.enabled=k.enabled})}),oe.getTracks().forEach(function(A){z.addTrack(A,oe)})}},ce.prototype.removeTrack=function(P){if(this._isClosed)throw C("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(P instanceof q.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var z=this.transceivers.find(function(A){return A.rtpSender===P});if(!z)throw C("InvalidAccessError","Sender was not created by this connection.");var oe=z.stream;z.rtpSender.stop(),z.rtpSender=null,z.track=null,z.stream=null,this.transceivers.map(function(A){return A.stream}).indexOf(oe)===-1&&this.localStreams.indexOf(oe)>-1&&this.localStreams.splice(this.localStreams.indexOf(oe),1),this._maybeFireNegotiationNeeded()},ce.prototype.removeStream=function(P){var z=this;P.getTracks().forEach(function(oe){var A=z.getSenders().find(function(le){return le.track===oe});A&&z.removeTrack(A)})},ce.prototype.getSenders=function(){return this.transceivers.filter(function(P){return!!P.rtpSender}).map(function(P){return P.rtpSender})},ce.prototype.getReceivers=function(){return this.transceivers.filter(function(P){return!!P.rtpReceiver}).map(function(P){return P.rtpReceiver})},ce.prototype._createIceGatherer=function(P,z){var oe=this;if(z&&P>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var A=new q.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(A,"state",{value:"new",writable:!0}),this.transceivers[P].bufferedCandidateEvents=[],this.transceivers[P].bufferCandidates=function(le){var $=!le.candidate||Object.keys(le.candidate).length===0;A.state=$?"completed":"gathering",oe.transceivers[P].bufferedCandidateEvents!==null&&oe.transceivers[P].bufferedCandidateEvents.push(le)},A.addEventListener("localcandidate",this.transceivers[P].bufferCandidates),A},ce.prototype._gather=function(P,z){var oe=this,A=this.transceivers[z].iceGatherer;if(!A.onlocalcandidate){var le=this.transceivers[z].bufferedCandidateEvents;this.transceivers[z].bufferedCandidateEvents=null,A.removeEventListener("localcandidate",this.transceivers[z].bufferCandidates),A.onlocalcandidate=function($){if(!(oe.usingBundle&&z>0)){var k=new Event("icecandidate");k.candidate={sdpMid:P,sdpMLineIndex:z};var j=$.candidate,K=!j||Object.keys(j).length===0;if(K)A.state!=="new"&&A.state!=="gathering"||(A.state="completed");else{A.state==="new"&&(A.state="gathering"),j.component=1,j.ufrag=A.getLocalParameters().usernameFragment;var Z=b.writeCandidate(j);k.candidate=Object.assign(k.candidate,b.parseCandidate(Z)),k.candidate.candidate=Z,k.candidate.toJSON=function(){return{candidate:k.candidate.candidate,sdpMid:k.candidate.sdpMid,sdpMLineIndex:k.candidate.sdpMLineIndex,usernameFragment:k.candidate.usernameFragment}}}var J=b.getMediaSections(oe._localDescription.sdp);J[k.candidate.sdpMLineIndex]+=K?`a=end-of-candidates\r
`:"a="+k.candidate.candidate+`\r
`,oe._localDescription.sdp=b.getDescription(oe._localDescription.sdp)+J.join("");var D=oe.transceivers.every(function(G){return G.iceGatherer&&G.iceGatherer.state==="completed"});oe.iceGatheringState!=="gathering"&&(oe.iceGatheringState="gathering",oe._emitGatheringStateChange()),K||oe._dispatchEvent("icecandidate",k),D&&(oe._dispatchEvent("icecandidate",new Event("icecandidate")),oe.iceGatheringState="complete",oe._emitGatheringStateChange())}},q.setTimeout(function(){le.forEach(function($){A.onlocalcandidate($)})},0)}},ce.prototype._createIceAndDtlsTransports=function(){var P=this,z=new q.RTCIceTransport(null);z.onicestatechange=function(){P._updateIceConnectionState(),P._updateConnectionState()};var oe=new q.RTCDtlsTransport(z);return oe.ondtlsstatechange=function(){P._updateConnectionState()},oe.onerror=function(){Object.defineProperty(oe,"state",{value:"failed",writable:!0}),P._updateConnectionState()},{iceTransport:z,dtlsTransport:oe}},ce.prototype._disposeIceAndDtlsTransports=function(P){var z=this.transceivers[P].iceGatherer;z&&(delete z.onlocalcandidate,delete this.transceivers[P].iceGatherer);var oe=this.transceivers[P].iceTransport;oe&&(delete oe.onicestatechange,delete this.transceivers[P].iceTransport);var A=this.transceivers[P].dtlsTransport;A&&(delete A.ondtlsstatechange,delete A.onerror,delete this.transceivers[P].dtlsTransport)},ce.prototype._transceive=function(P,z,oe){var A=O(P.localCapabilities,P.remoteCapabilities);z&&P.rtpSender&&(A.encodings=P.sendEncodingParameters,A.rtcp={cname:b.localCName,compound:P.rtcpParameters.compound},P.recvEncodingParameters.length&&(A.rtcp.ssrc=P.recvEncodingParameters[0].ssrc),P.rtpSender.send(A)),oe&&P.rtpReceiver&&A.codecs.length>0&&(P.kind==="video"&&P.recvEncodingParameters&&ue<15019&&P.recvEncodingParameters.forEach(function(le){delete le.rtx}),A.encodings=P.recvEncodingParameters.length?P.recvEncodingParameters:[{}],A.rtcp={compound:P.rtcpParameters.compound},P.rtcpParameters.cname&&(A.rtcp.cname=P.rtcpParameters.cname),P.sendEncodingParameters.length&&(A.rtcp.ssrc=P.sendEncodingParameters[0].ssrc),P.rtpReceiver.receive(A))},ce.prototype.setLocalDescription=function(P){var z,oe,A=this;if(["offer","answer"].indexOf(P.type)===-1)return Promise.reject(C("TypeError",'Unsupported type "'+P.type+'"'));if(!U("setLocalDescription",P.type,A.signalingState)||A._isClosed)return Promise.reject(C("InvalidStateError","Can not set local "+P.type+" in state "+A.signalingState));if(P.type==="offer")z=b.splitSections(P.sdp),oe=z.shift(),z.forEach(function($,k){var j=b.parseRtpParameters($);A.transceivers[k].localCapabilities=j}),A.transceivers.forEach(function($,k){A._gather($.mid,k)});else if(P.type==="answer"){z=b.splitSections(A._remoteDescription.sdp),oe=z.shift();var le=b.matchPrefix(oe,"a=ice-lite").length>0;z.forEach(function($,k){var j=A.transceivers[k],K=j.iceGatherer,Z=j.iceTransport,J=j.dtlsTransport,D=j.localCapabilities,G=j.remoteCapabilities;if(!(b.isRejected($)&&b.matchPrefix($,"a=bundle-only").length===0||j.rejected)){var M=b.getIceParameters($,oe),L=b.getDtlsParameters($,oe);le&&(L.role="server"),A.usingBundle&&k!==0||(A._gather(j.mid,k),Z.state==="new"&&Z.start(K,M,le?"controlling":"controlled"),J.state==="new"&&J.start(L));var W=O(D,G);A._transceive(j,W.codecs.length>0,!1)}})}return A._localDescription={type:P.type,sdp:P.sdp},A._updateSignalingState(P.type==="offer"?"have-local-offer":"stable"),Promise.resolve()},ce.prototype.setRemoteDescription=function(P){var z=this;if(["offer","answer"].indexOf(P.type)===-1)return Promise.reject(C("TypeError",'Unsupported type "'+P.type+'"'));if(!U("setRemoteDescription",P.type,z.signalingState)||z._isClosed)return Promise.reject(C("InvalidStateError","Can not set remote "+P.type+" in state "+z.signalingState));var oe={};z.remoteStreams.forEach(function(Z){oe[Z.id]=Z});var A=[],le=b.splitSections(P.sdp),$=le.shift(),k=b.matchPrefix($,"a=ice-lite").length>0,j=b.matchPrefix($,"a=group:BUNDLE ").length>0;z.usingBundle=j;var K=b.matchPrefix($,"a=ice-options:")[0];return z.canTrickleIceCandidates=!!K&&K.substr(14).split(" ").indexOf("trickle")>=0,le.forEach(function(Z,J){var D=b.splitLines(Z),G=b.getKind(Z),M=b.isRejected(Z)&&b.matchPrefix(Z,"a=bundle-only").length===0,L=D[0].substr(2).split(" ")[2],W=b.getDirection(Z,$),ve=b.parseMsid(Z),de=b.getMid(Z)||b.generateIdentifier();if(M||G==="application"&&(L==="DTLS/SCTP"||L==="UDP/DTLS/SCTP"))z.transceivers[J]={mid:de,kind:G,protocol:L,rejected:!0};else{var ne,he,_e,Ue,Fe,ze,Me,We,rt;!M&&z.transceivers[J]&&z.transceivers[J].rejected&&(z.transceivers[J]=z._createTransceiver(G,!0));var dt,ht,Pt=b.parseRtpParameters(Z);M||(dt=b.getIceParameters(Z,$),(ht=b.getDtlsParameters(Z,$)).role="client"),Me=b.parseRtpEncodingParameters(Z);var ye=b.parseRtcpParameters(Z),De=b.matchPrefix(Z,"a=end-of-candidates",$).length>0,xe=b.matchPrefix(Z,"a=candidate:").map(function(re){return b.parseCandidate(re)}).filter(function(re){return re.component===1});if((P.type==="offer"||P.type==="answer")&&!M&&j&&J>0&&z.transceivers[J]&&(z._disposeIceAndDtlsTransports(J),z.transceivers[J].iceGatherer=z.transceivers[0].iceGatherer,z.transceivers[J].iceTransport=z.transceivers[0].iceTransport,z.transceivers[J].dtlsTransport=z.transceivers[0].dtlsTransport,z.transceivers[J].rtpSender&&z.transceivers[J].rtpSender.setTransport(z.transceivers[0].dtlsTransport),z.transceivers[J].rtpReceiver&&z.transceivers[J].rtpReceiver.setTransport(z.transceivers[0].dtlsTransport)),P.type!=="offer"||M)P.type!=="answer"||M||(he=(ne=z.transceivers[J]).iceGatherer,_e=ne.iceTransport,Ue=ne.dtlsTransport,Fe=ne.rtpReceiver,ze=ne.sendEncodingParameters,We=ne.localCapabilities,z.transceivers[J].recvEncodingParameters=Me,z.transceivers[J].remoteCapabilities=Pt,z.transceivers[J].rtcpParameters=ye,xe.length&&_e.state==="new"&&(!k&&!De||j&&J!==0?xe.forEach(function(re){V(ne.iceTransport,re)}):_e.setRemoteCandidates(xe)),j&&J!==0||(_e.state==="new"&&_e.start(he,dt,"controlling"),Ue.state==="new"&&Ue.start(ht)),!O(ne.localCapabilities,ne.remoteCapabilities).codecs.filter(function(re){return re.name.toLowerCase()==="rtx"}).length&&ne.sendEncodingParameters[0].rtx&&delete ne.sendEncodingParameters[0].rtx,z._transceive(ne,W==="sendrecv"||W==="recvonly",W==="sendrecv"||W==="sendonly"),!Fe||W!=="sendrecv"&&W!=="sendonly"?delete ne.rtpReceiver:(rt=Fe.track,ve?(oe[ve.stream]||(oe[ve.stream]=new q.MediaStream),se(rt,oe[ve.stream]),A.push([rt,Fe,oe[ve.stream]])):(oe.default||(oe.default=new q.MediaStream),se(rt,oe.default),A.push([rt,Fe,oe.default]))));else{(ne=z.transceivers[J]||z._createTransceiver(G)).mid=de,ne.iceGatherer||(ne.iceGatherer=z._createIceGatherer(J,j)),xe.length&&ne.iceTransport.state==="new"&&(!De||j&&J!==0?xe.forEach(function(re){V(ne.iceTransport,re)}):ne.iceTransport.setRemoteCandidates(xe)),We=q.RTCRtpReceiver.getCapabilities(G),ue<15019&&(We.codecs=We.codecs.filter(function(re){return re.name!=="rtx"})),ze=ne.sendEncodingParameters||[{ssrc:1001*(2*J+2)}];var Je,ut=!1;W==="sendrecv"||W==="sendonly"?(ut=!ne.rtpReceiver,Fe=ne.rtpReceiver||new q.RTCRtpReceiver(ne.dtlsTransport,G),ut&&(rt=Fe.track,ve&&ve.stream==="-"||(ve?(oe[ve.stream]||(oe[ve.stream]=new q.MediaStream,Object.defineProperty(oe[ve.stream],"id",{get:function(){return ve.stream}})),Object.defineProperty(rt,"id",{get:function(){return ve.track}}),Je=oe[ve.stream]):(oe.default||(oe.default=new q.MediaStream),Je=oe.default)),Je&&(se(rt,Je),ne.associatedRemoteMediaStreams.push(Je)),A.push([rt,Fe,Je]))):ne.rtpReceiver&&ne.rtpReceiver.track&&(ne.associatedRemoteMediaStreams.forEach(function(re){var Se=re.getTracks().find(function(we){return we.id===ne.rtpReceiver.track.id});Se&&Y(Se,re)}),ne.associatedRemoteMediaStreams=[]),ne.localCapabilities=We,ne.remoteCapabilities=Pt,ne.rtpReceiver=Fe,ne.rtcpParameters=ye,ne.sendEncodingParameters=ze,ne.recvEncodingParameters=Me,z._transceive(z.transceivers[J],!1,ut)}}}),z._dtlsRole===void 0&&(z._dtlsRole=P.type==="offer"?"active":"passive"),z._remoteDescription={type:P.type,sdp:P.sdp},z._updateSignalingState(P.type==="offer"?"have-remote-offer":"stable"),Object.keys(oe).forEach(function(Z){var J=oe[Z];if(J.getTracks().length){if(z.remoteStreams.indexOf(J)===-1){z.remoteStreams.push(J);var D=new Event("addstream");D.stream=J,q.setTimeout(function(){z._dispatchEvent("addstream",D)})}A.forEach(function(G){J.id===G[2].id&&pe(z,G[0],G[1],[J])})}}),A.forEach(function(Z){Z[2]||pe(z,Z[0],Z[1],[])}),q.setTimeout(function(){z&&z.transceivers&&z.transceivers.forEach(function(Z){Z.iceTransport&&Z.iceTransport.state==="new"&&Z.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Z.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},ce.prototype.close=function(){this.transceivers.forEach(function(P){P.iceTransport&&P.iceTransport.stop(),P.dtlsTransport&&P.dtlsTransport.stop(),P.rtpSender&&P.rtpSender.stop(),P.rtpReceiver&&P.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},ce.prototype._updateSignalingState=function(P){this.signalingState=P;var z=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",z)},ce.prototype._maybeFireNegotiationNeeded=function(){var P=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,q.setTimeout(function(){if(P.needNegotiation){P.needNegotiation=!1;var z=new Event("negotiationneeded");P._dispatchEvent("negotiationneeded",z)}},0))},ce.prototype._updateIceConnectionState=function(){var P,z={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(A){A.iceTransport&&!A.rejected&&z[A.iceTransport.state]++}),P="new",z.failed>0?P="failed":z.checking>0?P="checking":z.disconnected>0?P="disconnected":z.new>0?P="new":z.connected>0?P="connected":z.completed>0&&(P="completed"),P!==this.iceConnectionState){this.iceConnectionState=P;var oe=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",oe)}},ce.prototype._updateConnectionState=function(){var P,z={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(A){A.iceTransport&&A.dtlsTransport&&!A.rejected&&(z[A.iceTransport.state]++,z[A.dtlsTransport.state]++)}),z.connected+=z.completed,P="new",z.failed>0?P="failed":z.connecting>0?P="connecting":z.disconnected>0?P="disconnected":z.new>0?P="new":z.connected>0&&(P="connected"),P!==this.connectionState){this.connectionState=P;var oe=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",oe)}},ce.prototype.createOffer=function(){var P=this;if(P._isClosed)return Promise.reject(C("InvalidStateError","Can not call createOffer after close"));var z=P.transceivers.filter(function(k){return k.kind==="audio"}).length,oe=P.transceivers.filter(function(k){return k.kind==="video"}).length,A=arguments[0];if(A){if(A.mandatory||A.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");A.offerToReceiveAudio!==void 0&&(z=A.offerToReceiveAudio===!0?1:A.offerToReceiveAudio===!1?0:A.offerToReceiveAudio),A.offerToReceiveVideo!==void 0&&(oe=A.offerToReceiveVideo===!0?1:A.offerToReceiveVideo===!1?0:A.offerToReceiveVideo)}for(P.transceivers.forEach(function(k){k.kind==="audio"?--z<0&&(k.wantReceive=!1):k.kind==="video"&&--oe<0&&(k.wantReceive=!1)});z>0||oe>0;)z>0&&(P._createTransceiver("audio"),z--),oe>0&&(P._createTransceiver("video"),oe--);var le=b.writeSessionBoilerplate(P._sdpSessionId,P._sdpSessionVersion++);P.transceivers.forEach(function(k,j){var K=k.track,Z=k.kind,J=k.mid||b.generateIdentifier();k.mid=J,k.iceGatherer||(k.iceGatherer=P._createIceGatherer(j,P.usingBundle));var D=q.RTCRtpSender.getCapabilities(Z);ue<15019&&(D.codecs=D.codecs.filter(function(M){return M.name!=="rtx"})),D.codecs.forEach(function(M){M.name==="H264"&&M.parameters["level-asymmetry-allowed"]===void 0&&(M.parameters["level-asymmetry-allowed"]="1"),k.remoteCapabilities&&k.remoteCapabilities.codecs&&k.remoteCapabilities.codecs.forEach(function(L){M.name.toLowerCase()===L.name.toLowerCase()&&M.clockRate===L.clockRate&&(M.preferredPayloadType=L.payloadType)})}),D.headerExtensions.forEach(function(M){(k.remoteCapabilities&&k.remoteCapabilities.headerExtensions||[]).forEach(function(L){M.uri===L.uri&&(M.id=L.id)})});var G=k.sendEncodingParameters||[{ssrc:1001*(2*j+1)}];K&&ue>=15019&&Z==="video"&&!G[0].rtx&&(G[0].rtx={ssrc:G[0].ssrc+1}),k.wantReceive&&(k.rtpReceiver=new q.RTCRtpReceiver(k.dtlsTransport,Z)),k.localCapabilities=D,k.sendEncodingParameters=G}),P._config.bundlePolicy!=="max-compat"&&(le+="a=group:BUNDLE "+P.transceivers.map(function(k){return k.mid}).join(" ")+`\r
`),le+=`a=ice-options:trickle\r
`,P.transceivers.forEach(function(k,j){le+=E(k,k.localCapabilities,"offer",k.stream,P._dtlsRole),le+=`a=rtcp-rsize\r
`,!k.iceGatherer||P.iceGatheringState==="new"||j!==0&&P.usingBundle||(k.iceGatherer.getLocalCandidates().forEach(function(K){K.component=1,le+="a="+b.writeCandidate(K)+`\r
`}),k.iceGatherer.state==="completed"&&(le+=`a=end-of-candidates\r
`))});var $=new q.RTCSessionDescription({type:"offer",sdp:le});return Promise.resolve($)},ce.prototype.createAnswer=function(){var P=this;if(P._isClosed)return Promise.reject(C("InvalidStateError","Can not call createAnswer after close"));if(P.signalingState!=="have-remote-offer"&&P.signalingState!=="have-local-pranswer")return Promise.reject(C("InvalidStateError","Can not call createAnswer in signalingState "+P.signalingState));var z=b.writeSessionBoilerplate(P._sdpSessionId,P._sdpSessionVersion++);P.usingBundle&&(z+="a=group:BUNDLE "+P.transceivers.map(function(le){return le.mid}).join(" ")+`\r
`),z+=`a=ice-options:trickle\r
`;var oe=b.getMediaSections(P._remoteDescription.sdp).length;P.transceivers.forEach(function(le,$){if(!($+1>oe)){if(le.rejected)return le.kind==="application"?z+=le.protocol==="DTLS/SCTP"?`m=application 0 DTLS/SCTP 5000\r
`:"m=application 0 "+le.protocol+` webrtc-datachannel\r
`:le.kind==="audio"?z+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:le.kind==="video"&&(z+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(z+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+le.mid+`\r
`);var k;le.stream&&(le.kind==="audio"?k=le.stream.getAudioTracks()[0]:le.kind==="video"&&(k=le.stream.getVideoTracks()[0]),k&&ue>=15019&&le.kind==="video"&&!le.sendEncodingParameters[0].rtx&&(le.sendEncodingParameters[0].rtx={ssrc:le.sendEncodingParameters[0].ssrc+1}));var j=O(le.localCapabilities,le.remoteCapabilities);!j.codecs.filter(function(K){return K.name.toLowerCase()==="rtx"}).length&&le.sendEncodingParameters[0].rtx&&delete le.sendEncodingParameters[0].rtx,z+=E(le,j,"answer",le.stream,P._dtlsRole),le.rtcpParameters&&le.rtcpParameters.reducedSize&&(z+=`a=rtcp-rsize\r
`)}});var A=new q.RTCSessionDescription({type:"answer",sdp:z});return Promise.resolve(A)},ce.prototype.addIceCandidate=function(P){var z,oe=this;return P&&P.sdpMLineIndex===void 0&&!P.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(A,le){if(!oe._remoteDescription)return le(C("InvalidStateError","Can not add ICE candidate without a remote description"));if(P&&P.candidate!==""){var $=P.sdpMLineIndex;if(P.sdpMid){for(var k=0;k<oe.transceivers.length;k++)if(oe.transceivers[k].mid===P.sdpMid){$=k;break}}var j=oe.transceivers[$];if(!j)return le(C("OperationError","Can not add ICE candidate"));if(j.rejected)return A();var K=Object.keys(P.candidate).length>0?b.parseCandidate(P.candidate):{};if(K.protocol==="tcp"&&(K.port===0||K.port===9)||K.component&&K.component!==1)return A();if(($===0||$>0&&j.iceTransport!==oe.transceivers[0].iceTransport)&&!V(j.iceTransport,K))return le(C("OperationError","Can not add ICE candidate"));var Z=P.candidate.trim();Z.indexOf("a=")===0&&(Z=Z.substr(2)),(z=b.getMediaSections(oe._remoteDescription.sdp))[$]+="a="+(K.type?Z:"end-of-candidates")+`\r
`,oe._remoteDescription.sdp=b.getDescription(oe._remoteDescription.sdp)+z.join("")}else for(var J=0;J<oe.transceivers.length&&(oe.transceivers[J].rejected||(oe.transceivers[J].iceTransport.addRemoteCandidate({}),(z=b.getMediaSections(oe._remoteDescription.sdp))[J]+=`a=end-of-candidates\r
`,oe._remoteDescription.sdp=b.getDescription(oe._remoteDescription.sdp)+z.join(""),!oe.usingBundle));J++);A()})},ce.prototype.getStats=function(P){if(P&&P instanceof q.MediaStreamTrack){var z=null;if(this.transceivers.forEach(function(A){A.rtpSender&&A.rtpSender.track===P?z=A.rtpSender:A.rtpReceiver&&A.rtpReceiver.track===P&&(z=A.rtpReceiver)}),!z)throw C("InvalidAccessError","Invalid selector.");return z.getStats()}var oe=[];return this.transceivers.forEach(function(A){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(le){A[le]&&oe.push(A[le].getStats())})}),Promise.all(oe).then(function(A){var le=new Map;return A.forEach(function($){$.forEach(function(k){le.set(k.id,k)})}),le})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(P){var z=q[P];if(z&&z.prototype&&z.prototype.getStats){var oe=z.prototype.getStats;z.prototype.getStats=function(){return oe.apply(this).then(function(A){var le=new Map;return Object.keys(A).forEach(function($){A[$].type=_(A[$]),le.set($,A[$])}),le})}}});var X=["createOffer","createAnswer"];return X.forEach(function(P){var z=ce.prototype[P];ce.prototype[P]=function(){var oe=arguments;return typeof oe[0]=="function"||typeof oe[1]=="function"?z.apply(this,[arguments[2]]).then(function(A){typeof oe[0]=="function"&&oe[0].apply(null,[A])},function(A){typeof oe[1]=="function"&&oe[1].apply(null,[A])}):z.apply(this,arguments)}}),(X=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(P){var z=ce.prototype[P];ce.prototype[P]=function(){var oe=arguments;return typeof oe[1]=="function"||typeof oe[2]=="function"?z.apply(this,arguments).then(function(){typeof oe[1]=="function"&&oe[1].apply(null)},function(A){typeof oe[2]=="function"&&oe[2].apply(null,[A])}):z.apply(this,arguments)}}),["getStats"].forEach(function(P){var z=ce.prototype[P];ce.prototype[P]=function(){var oe=arguments;return typeof oe[1]=="function"?z.apply(this,arguments).then(function(){typeof oe[1]=="function"&&oe[1].apply(null)}):z.apply(this,arguments)}}),ce}},{sdp:17}],17:[function(l,g,v){var b={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};b.localCName=b.generateIdentifier(),b.splitLines=function(_){return _.trim().split(`
`).map(function(E){return E.trim()})},b.splitSections=function(_){return _.split(`
m=`).map(function(E,w){return(w>0?"m="+E:E).trim()+`\r
`})},b.getDescription=function(_){var E=b.splitSections(_);return E&&E[0]},b.getMediaSections=function(_){var E=b.splitSections(_);return E.shift(),E},b.matchPrefix=function(_,E){return b.splitLines(_).filter(function(w){return w.indexOf(E)===0})},b.parseCandidate=function(_){for(var E,w={foundation:(E=_.indexOf("a=candidate:")===0?_.substring(12).split(" "):_.substring(10).split(" "))[0],component:parseInt(E[1],10),protocol:E[2].toLowerCase(),priority:parseInt(E[3],10),ip:E[4],address:E[4],port:parseInt(E[5],10),type:E[7]},O=8;O<E.length;O+=2)switch(E[O]){case"raddr":w.relatedAddress=E[O+1];break;case"rport":w.relatedPort=parseInt(E[O+1],10);break;case"tcptype":w.tcpType=E[O+1];break;case"ufrag":w.ufrag=E[O+1],w.usernameFragment=E[O+1];break;default:w[E[O]]=E[O+1]}return w},b.writeCandidate=function(_){var E=[];E.push(_.foundation),E.push(_.component),E.push(_.protocol.toUpperCase()),E.push(_.priority),E.push(_.address||_.ip),E.push(_.port);var w=_.type;return E.push("typ"),E.push(w),w!=="host"&&_.relatedAddress&&_.relatedPort&&(E.push("raddr"),E.push(_.relatedAddress),E.push("rport"),E.push(_.relatedPort)),_.tcpType&&_.protocol.toLowerCase()==="tcp"&&(E.push("tcptype"),E.push(_.tcpType)),(_.usernameFragment||_.ufrag)&&(E.push("ufrag"),E.push(_.usernameFragment||_.ufrag)),"candidate:"+E.join(" ")},b.parseIceOptions=function(_){return _.substr(14).split(" ")},b.parseRtpMap=function(_){var E=_.substr(9).split(" "),w={payloadType:parseInt(E.shift(),10)};return E=E[0].split("/"),w.name=E[0],w.clockRate=parseInt(E[1],10),w.channels=E.length===3?parseInt(E[2],10):1,w.numChannels=w.channels,w},b.writeRtpMap=function(_){var E=_.payloadType;_.preferredPayloadType!==void 0&&(E=_.preferredPayloadType);var w=_.channels||_.numChannels||1;return"a=rtpmap:"+E+" "+_.name+"/"+_.clockRate+(w!==1?"/"+w:"")+`\r
`},b.parseExtmap=function(_){var E=_.substr(9).split(" ");return{id:parseInt(E[0],10),direction:E[0].indexOf("/")>0?E[0].split("/")[1]:"sendrecv",uri:E[1]}},b.writeExtmap=function(_){return"a=extmap:"+(_.id||_.preferredId)+(_.direction&&_.direction!=="sendrecv"?"/"+_.direction:"")+" "+_.uri+`\r
`},b.parseFmtp=function(_){for(var E,w={},O=_.substr(_.indexOf(" ")+1).split(";"),U=0;U<O.length;U++)w[(E=O[U].trim().split("="))[0].trim()]=E[1];return w},b.writeFmtp=function(_){var E="",w=_.payloadType;if(_.preferredPayloadType!==void 0&&(w=_.preferredPayloadType),_.parameters&&Object.keys(_.parameters).length){var O=[];Object.keys(_.parameters).forEach(function(U){O.push(_.parameters[U]?U+"="+_.parameters[U]:U)}),E+="a=fmtp:"+w+" "+O.join(";")+`\r
`}return E},b.parseRtcpFb=function(_){var E=_.substr(_.indexOf(" ")+1).split(" ");return{type:E.shift(),parameter:E.join(" ")}},b.writeRtcpFb=function(_){var E="",w=_.payloadType;return _.preferredPayloadType!==void 0&&(w=_.preferredPayloadType),_.rtcpFeedback&&_.rtcpFeedback.length&&_.rtcpFeedback.forEach(function(O){E+="a=rtcp-fb:"+w+" "+O.type+(O.parameter&&O.parameter.length?" "+O.parameter:"")+`\r
`}),E},b.parseSsrcMedia=function(_){var E=_.indexOf(" "),w={ssrc:parseInt(_.substr(7,E-7),10)},O=_.indexOf(":",E);return O>-1?(w.attribute=_.substr(E+1,O-E-1),w.value=_.substr(O+1)):w.attribute=_.substr(E+1),w},b.parseSsrcGroup=function(_){var E=_.substr(13).split(" ");return{semantics:E.shift(),ssrcs:E.map(function(w){return parseInt(w,10)})}},b.getMid=function(_){var E=b.matchPrefix(_,"a=mid:")[0];if(E)return E.substr(6)},b.parseFingerprint=function(_){var E=_.substr(14).split(" ");return{algorithm:E[0].toLowerCase(),value:E[1]}},b.getDtlsParameters=function(_,E){return{role:"auto",fingerprints:b.matchPrefix(_+E,"a=fingerprint:").map(b.parseFingerprint)}},b.writeDtlsParameters=function(_,E){var w="a=setup:"+E+`\r
`;return _.fingerprints.forEach(function(O){w+="a=fingerprint:"+O.algorithm+" "+O.value+`\r
`}),w},b.getIceParameters=function(_,E){var w=b.splitLines(_);return{usernameFragment:(w=w.concat(b.splitLines(E))).filter(function(O){return O.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:w.filter(function(O){return O.indexOf("a=ice-pwd:")===0})[0].substr(10)}},b.writeIceParameters=function(_){return"a=ice-ufrag:"+_.usernameFragment+`\r
a=ice-pwd:`+_.password+`\r
`},b.parseRtpParameters=function(_){for(var E={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},w=b.splitLines(_)[0].split(" "),O=3;O<w.length;O++){var U=w[O],V=b.matchPrefix(_,"a=rtpmap:"+U+" ")[0];if(V){var C=b.parseRtpMap(V),q=b.matchPrefix(_,"a=fmtp:"+U+" ");switch(C.parameters=q.length?b.parseFmtp(q[0]):{},C.rtcpFeedback=b.matchPrefix(_,"a=rtcp-fb:"+U+" ").map(b.parseRtcpFb),E.codecs.push(C),C.name.toUpperCase()){case"RED":case"ULPFEC":E.fecMechanisms.push(C.name.toUpperCase())}}}return b.matchPrefix(_,"a=extmap:").forEach(function(ue){E.headerExtensions.push(b.parseExtmap(ue))}),E},b.writeRtpDescription=function(_,E){var w="";w+="m="+_+" ",w+=E.codecs.length>0?"9":"0",w+=" UDP/TLS/RTP/SAVPF ",w+=E.codecs.map(function(U){return U.preferredPayloadType!==void 0?U.preferredPayloadType:U.payloadType}).join(" ")+`\r
`,w+=`c=IN IP4 0.0.0.0\r
`,w+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,E.codecs.forEach(function(U){w+=b.writeRtpMap(U),w+=b.writeFmtp(U),w+=b.writeRtcpFb(U)});var O=0;return E.codecs.forEach(function(U){U.maxptime>O&&(O=U.maxptime)}),O>0&&(w+="a=maxptime:"+O+`\r
`),w+=`a=rtcp-mux\r
`,E.headerExtensions&&E.headerExtensions.forEach(function(U){w+=b.writeExtmap(U)}),w},b.parseRtpEncodingParameters=function(_){var E,w=[],O=b.parseRtpParameters(_),U=O.fecMechanisms.indexOf("RED")!==-1,V=O.fecMechanisms.indexOf("ULPFEC")!==-1,C=b.matchPrefix(_,"a=ssrc:").map(function(Y){return b.parseSsrcMedia(Y)}).filter(function(Y){return Y.attribute==="cname"}),q=C.length>0&&C[0].ssrc,ue=b.matchPrefix(_,"a=ssrc-group:FID").map(function(Y){return Y.substr(17).split(" ").map(function(pe){return parseInt(pe,10)})});ue.length>0&&ue[0].length>1&&ue[0][0]===q&&(E=ue[0][1]),O.codecs.forEach(function(Y){if(Y.name.toUpperCase()==="RTX"&&Y.parameters.apt){var pe={ssrc:q,codecPayloadType:parseInt(Y.parameters.apt,10)};q&&E&&(pe.rtx={ssrc:E}),w.push(pe),U&&((pe=JSON.parse(JSON.stringify(pe))).fec={ssrc:q,mechanism:V?"red+ulpfec":"red"},w.push(pe))}}),w.length===0&&q&&w.push({ssrc:q});var se=b.matchPrefix(_,"b=");return se.length&&(se=se[0].indexOf("b=TIAS:")===0?parseInt(se[0].substr(7),10):se[0].indexOf("b=AS:")===0?1e3*parseInt(se[0].substr(5),10)*.95-16e3:void 0,w.forEach(function(Y){Y.maxBitrate=se})),w},b.parseRtcpParameters=function(_){var E={},w=b.matchPrefix(_,"a=ssrc:").map(function(V){return b.parseSsrcMedia(V)}).filter(function(V){return V.attribute==="cname"})[0];w&&(E.cname=w.value,E.ssrc=w.ssrc);var O=b.matchPrefix(_,"a=rtcp-rsize");E.reducedSize=O.length>0,E.compound=O.length===0;var U=b.matchPrefix(_,"a=rtcp-mux");return E.mux=U.length>0,E},b.parseMsid=function(_){var E,w=b.matchPrefix(_,"a=msid:");if(w.length===1)return{stream:(E=w[0].substr(7).split(" "))[0],track:E[1]};var O=b.matchPrefix(_,"a=ssrc:").map(function(U){return b.parseSsrcMedia(U)}).filter(function(U){return U.attribute==="msid"});return O.length>0?{stream:(E=O[0].value.split(" "))[0],track:E[1]}:void 0},b.generateSessionId=function(){return Math.random().toString().substr(2,21)},b.writeSessionBoilerplate=function(_,E,w){var O=E!==void 0?E:2;return`v=0\r
o=`+(w||"thisisadapterortc")+" "+(_||b.generateSessionId())+" "+O+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},b.writeMediaSection=function(_,E,w,O){var U=b.writeRtpDescription(_.kind,E);if(U+=b.writeIceParameters(_.iceGatherer.getLocalParameters()),U+=b.writeDtlsParameters(_.dtlsTransport.getLocalParameters(),w==="offer"?"actpass":"active"),U+="a=mid:"+_.mid+`\r
`,U+=_.direction?"a="+_.direction+`\r
`:_.rtpSender&&_.rtpReceiver?`a=sendrecv\r
`:_.rtpSender?`a=sendonly\r
`:_.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,_.rtpSender){var V="msid:"+O.id+" "+_.rtpSender.track.id+`\r
`;U+="a="+V,U+="a=ssrc:"+_.sendEncodingParameters[0].ssrc+" "+V,_.sendEncodingParameters[0].rtx&&(U+="a=ssrc:"+_.sendEncodingParameters[0].rtx.ssrc+" "+V,U+="a=ssrc-group:FID "+_.sendEncodingParameters[0].ssrc+" "+_.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return U+="a=ssrc:"+_.sendEncodingParameters[0].ssrc+" cname:"+b.localCName+`\r
`,_.rtpSender&&_.sendEncodingParameters[0].rtx&&(U+="a=ssrc:"+_.sendEncodingParameters[0].rtx.ssrc+" cname:"+b.localCName+`\r
`),U},b.getDirection=function(_,E){for(var w=b.splitLines(_),O=0;O<w.length;O++)switch(w[O]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return w[O].substr(2)}return E?b.getDirection(E):"sendrecv"},b.getKind=function(_){return b.splitLines(_)[0].split(" ")[0].substr(2)},b.isRejected=function(_){return _.split(" ",2)[1]==="0"},b.parseMLine=function(_){var E=b.splitLines(_)[0].substr(2).split(" ");return{kind:E[0],port:parseInt(E[1],10),protocol:E[2],fmt:E.slice(3).join(" ")}},b.parseOLine=function(_){var E=b.matchPrefix(_,"o=")[0].substr(2).split(" ");return{username:E[0],sessionId:E[1],sessionVersion:parseInt(E[2],10),netType:E[3],addressType:E[4],address:E[5]}},b.isValidSDP=function(_){if(typeof _!="string"||_.length===0)return!1;for(var E=b.splitLines(_),w=0;w<E.length;w++)if(E[w].length<2||E[w].charAt(1)!=="=")return!1;return!0},typeof g=="object"&&(g.exports=b)},{}]},{},[1])(1)},3349:function(c){c.exports=__WEBPACK_EXTERNAL_MODULE__3349__},4119:function(c){c.exports=__WEBPACK_EXTERNAL_MODULE__4119__}},__webpack_module_cache__={};function __webpack_require__(c){var l=__webpack_module_cache__[c];if(l!==void 0)return l.exports;var g=__webpack_module_cache__[c]={exports:{}};return __webpack_modules__[c].call(g.exports,g,g.exports,__webpack_require__),g.exports}__webpack_require__.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return __webpack_require__.d(l,{a:l}),l},__webpack_require__.d=function(c,l){for(var g in l)__webpack_require__.o(l,g)&&!__webpack_require__.o(c,g)&&Object.defineProperty(c,g,{enumerable:!0,get:l[g]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},__webpack_require__.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var __webpack_exports__={};return function(){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WebRTCUtil:function(){return ym},ZegoExpressEngine:function(){return v0}});var c,l,g=__webpack_require__(4119),v="3.2.0";(function(n){n[n.debug=0]="debug",n[n.info=1]="info",n[n.warn=2]="warn",n[n.error=3]="error",n[n.report=99]="report",n[n.disable=100]="disable"})(c||(c={})),function(n){n[n.CN=2]="CN",n[n.NA=3]="NA",n[n.EU=4]="EU",n[n.AS=5]="AS",n[n.IN=6]="IN",n[n.NCN=7]="NCN"}(l||(l={}));var b,_;(function(n){n[n.disable=0]="disable",n[n.websocket=1]="websocket",n[n.https=2]="https"})(b||(b={})),function(n){n[n.SDKProject_Other=0]="SDKProject_Other",n[n.SDKProject_ZegoExpressVideo=1]="SDKProject_ZegoExpressVideo",n[n.SDKProject_ZegoExpressAudio=2]="SDKProject_ZegoExpressAudio",n[n.SDKProject_ZegoLiveRoom=3]="SDKProject_ZegoLiveRoom",n[n.SDKProject_ZegoAudioRoom=4]="SDKProject_ZegoAudioRoom",n[n.SDKProject_ZegoAVKit=5]="SDKProject_ZegoAVKit",n[n.SDKProject_ZegoWebRTC=6]="SDKProject_ZegoWebRTC",n[n.SDKProject_ZegoMiniProgram=7]="SDKProject_ZegoMiniProgram"}(_||(_={}));var E;(function(n){n[n.disconnected=0]="disconnected",n[n.connecting=1]="connecting",n[n.connected=2]="connected"})(E||(E={}));var w,O,U,V,C={width:320,height:240,frameRate:15,bitRate:300},q={width:640,height:480,frameRate:15,bitRate:800},ue={width:1280,height:720,frameRate:20,bitRate:1500},se={frameRate:20,bitRate:800},Y={frameRate:15,bitRate:1500},pe={frameRate:5,bitRate:2e3},ce=0,X=1,P=2,z=3,oe=4,A=5,le=6,$=7,k=0,j=1,K=2,Z=3,J=4,D=5,G=6,M=7,L=1,W=2,ve={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8};(function(n){n[n.tryProbe=0]="tryProbe",n[n.probed=2]="probed"})(w||(w={})),function(n){n[n.CDN=0]="CDN",n[n.RTC=1]="RTC",n[n.L3=2]="L3",n[n.DG=3]="DG"}(O||(O={})),function(n){n[n.UDP=0]="UDP",n[n.RTMP=1]="RTMP",n[n.FLV=2]="FLV",n[n.HLS=3]="HLS",n[n.WEBRTC=4]="WEBRTC"}(U||(U={})),function(n){n[n.replaceNew=0]="replaceNew",n[n.changeResolution=1]="changeResolution"}(V||(V={}));var de,ne,he,_e=0,Ue=1,Fe=2,ze=1e3,Me={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},We=2001,rt=2002,dt=2003,ht=1,Pt=0;(function(n){n[n.logout=0]="logout",n[n.trylogin=1]="trylogin",n[n.login=2]="login"})(de||(de={})),function(n){n[n.logout=0]="logout",n[n.trylogin=1]="trylogin",n[n.login=2]="login",n[n.reconnect=3]="reconnect"}(ne||(ne={})),function(n){n[n.offline=0]="offline",n[n.online=1]="online"}(he||(he={}));var ye,De={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}};(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.CDN=1]="CDN",n[n.RTC=2]="RTC",n[n.L3=3]="L3"})(ye||(ye={}));var xe,Je=12001,ut=12002,re=12003,Se=1,we=2,Ke=3;(function(n){n[n.low=1]="low",n[n.stantard=2]="stantard",n[n.hight=3]="hight",n[n.custome=4]="custome"})(xe||(xe={}));var je,St,xt,Ht,$t,ci,He={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8};(function(n){n[n.captureFpsToLow=1001]="captureFpsToLow",n[n.captureVolumeToLow=1002]="captureVolumeToLow",n[n.sendVideoBitrateToLow=1003]="sendVideoBitrateToLow",n[n.sendFpsToLow=1004]="sendFpsToLow",n[n.sendAudioBitrateToLow=1005]="sendAudioBitrateToLow",n[n.receiveVolumeToLow=1006]="receiveVolumeToLow",n[n.receiveAudioDecodedFail=1007]="receiveAudioDecodedFail",n[n.receiveVideoDecodedFail=1008]="receiveVideoDecodedFail",n[n.receiveVideoFpsDecodedToLow=1009]="receiveVideoFpsDecodedToLow",n[n.renderVideoFpsToLow=1010]="renderVideoFpsToLow",n[n.captureFpsNormal=2001]="captureFpsNormal",n[n.captureVolumeNormal=2002]="captureVolumeNormal",n[n.sendVideoBitrateNormal=2003]="sendVideoBitrateNormal",n[n.sendFpsNormal=2004]="sendFpsNormal",n[n.sendAudioBitrateNormal=2005]="sendAudioBitrateNormal",n[n.receiveVolumeNormal=2006]="receiveVolumeNormal",n[n.receiveAudioDecodedNormal=2007]="receiveAudioDecodedNormal",n[n.receiveVideoDecodedNormal=2008]="receiveVideoDecodedNormal",n[n.receiveVideoFpsDecodedNormal=2009]="receiveVideoFpsDecodedNormal",n[n.renderVideoFpsNormal=2010]="renderVideoFpsNormal"})(je||(je={})),function(n){n[n.cdn=0]="cdn",n[n.ultra=1]="ultra"}(St||(St={})),function(n){n[n.stop=0]="stop",n[n.start=1]="start"}(xt||(xt={})),function(n){n[n.cdn=0]="cdn",n[n.ultra=1]="ultra",n[n.customUrl=2]="customUrl"}(Ht||(Ht={})),function(n){n[n.CDN=0]="CDN",n[n.BGP=1]="BGP"}($t||($t={})),function(n){n[n.ClientType_None=0]="ClientType_None",n[n.ClientType_H5=1]="ClientType_H5",n[n.ClientType_SmallPragram=2]="ClientType_SmallPragram",n[n.ClientType_Webrtc=3]="ClientType_Webrtc"}(ci||(ci={}));var Ee,it,nt,tt,Et,Nt,Vt,It,ri,gi,Si,Hi,Gi,Qi,br=function(){function n(e,t){e===void 0&&(e=null),t===void 0&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(n.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),n.prototype.hasNext=function(){return this.next&&this.next.id},n.prototype.hasPrev=function(){return this.prev&&this.prev.id},n}(),pr=function(){function n(){this.start=new br,this.end=new br,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return n.prototype.insertBefore=function(e,t){var i=new br(this._idCounter,t);return i.next=e,i.prev=e.prev,e.prev&&(e.prev.next=i),e.prev=i,++this._idCounter,++this._numNodes,i},n.prototype.addLast=function(e){return this.insertBefore(this.end,e)},n.prototype.add=function(e){return this.addLast(e)},n.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},n.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},n.prototype.size=function(){return this._numNodes},n.prototype.getFromFirst=function(e){var t=0,i=this.start.next;if(e>=0)for(;t<e&&i!==null;)i=i.next,++t;else i=null;if(i===null)throw"Index out of bounds.";return i},n.prototype.get=function(e){return e===0?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},n.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},n.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},n.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},n.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},n.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},n.prototype.find=function(e){for(var t=this.start,i=!1,r=null;t.hasNext()&&!i;)e(t=t.next)&&(r=t,i=!0);return r},n.prototype.map=function(e){for(var t=this.start,i=[];t.hasNext();)e(t=t.next)&&i.push(t);return i},n.prototype.push=function(e){return this.addLast(e)},n.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},n.prototype.pop=function(){return this.removeLast()},n.prototype.shift=function(){return this.removeFirst()},n}(),Vr=0,bt=1,zt=2,R=0,at=1,ke=2,ft=3;(function(n){n[n.Unknown=-1]="Unknown",n[n.Excellent=0]="Excellent",n[n.Good=1]="Good",n[n.Middle=2]="Middle",n[n.Poor=3]="Poor",n[n.Die=4]="Die"})(Ee||(Ee={})),function(n){n[n.MinQuality=0]="MinQuality",n[n.DieQuality=0]="DieQuality",n[n.PoorMinQuality=1]="PoorMinQuality",n[n.MiddleMinQuality=30]="MiddleMinQuality",n[n.GoodMinQuality=60]="GoodMinQuality",n[n.ExcellentMinQuality=85]="ExcellentMinQuality",n[n.MaxQuality=100]="MaxQuality"}(it||(it={})),function(n){n[n.ZegoDefined=0]="ZegoDefined",n[n.UserUnregister=1]="UserUnregister"}(nt||(nt={})),function(n){n[n.CDN=0]="CDN",n[n.L3=1]="L3"}(tt||(tt={})),function(n){n[n.RTC=0]="RTC",n[n.CDN=1]="CDN",n[n.L3=2]="L3",n[n.DG=3]="DG"}(Et||(Et={})),function(n){n[n.PortraitSegmentation=0]="PortraitSegmentation"}(Nt||(Nt={})),function(n){n[n.Default=3]="Default",n[n.StandardVideoCall=4]="StandardVideoCall",n[n.HighVideoCall=5]="HighVideoCall",n[n.StandardChatroom=6]="StandardChatroom",n[n.HighQualityChatroom=7]="HighQualityChatroom",n[n.Broadcast=8]="Broadcast",n[n.UNKNOWN=100]="UNKNOWN"}(Vt||(Vt={})),function(n){n[n.I=0]="I",n[n.H=10]="H",n[n.M=100]="M",n[n.L=1e3]="L"}(It||(It={})),function(n){n[n.BASE_LINE=1]="BASE_LINE",n[n.MAIN=2]="MAIN",n[n.HIGH=3]="HIGH"}(ri||(ri={})),function(n){n.ONLY_BASELINE="only_baseline",n.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first",n.HIGH_PROFILE_FIRST="high_profile_first"}(gi||(gi={})),function(n){n[n.useAnalyzer=0]="useAnalyzer",n[n.useWorklet=1]="useWorklet"}(Si||(Si={})),function(n){n[n.None=0]="None",n[n.Vocalist=1]="Vocalist",n[n.BackingSinging=2]="BackingSinging"}(Hi||(Hi={})),function(n){n[n.METHOD_UNSET=0]="METHOD_UNSET",n[n.METHOD_GET=1]="METHOD_GET",n[n.METHOD_POST=2]="METHOD_POST",n[n.METHOD_PUT=3]="METHOD_PUT",n[n.METHOD_PATCH=4]="METHOD_PATCH",n[n.METHOD_DELETE=5]="METHOD_DELETE",n[n.METHOD_HEAD=6]="METHOD_HEAD",n[n.METHOD_OPTIONS=7]="METHOD_OPTIONS"}(Gi||(Gi={})),function(n){n[n.SERVICE_UNSET=0]="SERVICE_UNSET",n[n.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",n[n.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",n[n.SERVICE_MIX=3]="SERVICE_MIX",n[n.SERVICE_ZEUS=4]="SERVICE_ZEUS",n[n.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",n[n.SERVICE_L3=6]="SERVICE_L3",n[n.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",n[n.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",n[n.SERVICE_ZIM=9]="SERVICE_ZIM",n[n.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",n[n.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",n[n.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",n[n.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",n[n.SERVICE_QUALITY=14]="SERVICE_QUALITY",n[n.SERVICE_SECURITY=15]="SERVICE_SECURITY",n[n.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",n[n.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",n[n.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",n[n.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",n[n.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",n[n.SERVICE_CDN=21]="SERVICE_CDN",n[n.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",n[n.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",n[n.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",n[n.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",n[n.SERVICE_ECHO=26]="SERVICE_ECHO",n[n.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",n[n.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR"}(Qi||(Qi={}));var Ge=Promise,Tt=document;function Qt(){return navigator.userAgent||""}function wt(){var n,e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(t[1])?{name:"IE",version:(n=/\brv[ :]+([\d\.]+)/g.exec(e)||[])[1]||""}:t[1]==="Chrome"&&(n=e.match(/\bOPR|Edge\/([\d\.]+)/))!=null?{name:"Opera",version:n[1]}:(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],(n=e.match(/version\/([\d+\.]+)/i))!=null&&t.splice(1,1,n[1]),{name:t[0],version:t[1]})}function Ut(){return wt().name.toLowerCase()=="safari"}function di(){return wt().name.toLowerCase()=="chrome"}function Ri(){return wt().name.toLowerCase()=="firefox"}function oi(n,e,t){t===void 0&&(t=!0);var i=Tt.createElement("video");return n&&(i.style.width=n+"px;"),e&&(i.style.height=e+"px;"),i.setAttribute("muted",""),i.muted=!0,t&&(i.setAttribute("autoplay",""),i.autoplay=!0),i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i}function Ii(n,e){var t=Tt.createElement("canvas");return t.width=n,t.height=e,t}function yi(n,e,t){t===void 0&&(t=""),n.info("".concat(e," call ").concat(t))}function hi(n,e,t){t===void 0&&(t=""),n.info("".concat(e," end ").concat(t))}function fe(n,e,t){t===void 0&&(t=""),n.info("".concat(e," success ").concat(t))}function Ce(){var n=Qt();return!!(n.match(/Mobi/i)||n.match(/Android/i)||n.match(/iPhone/i))}function et(){return Qt().toLowerCase().match(/MicroMessenger/i)=="micromessenger"}function lt(){var n=Qt().toLowerCase().match(/cpu iphone os (.*?) like mac os/);return n&&n[1]||""}var pt="room not exist",H="device is not found",y="stream is not from zego",x="input param error",I="no preview",B="network is broken",me="stop retry",Oe="the user cancels the stream request.",Qe={code:1000002,message:"not login room"},qe={code:1000017,message:B},yt={code:1000018,message:"local stream wrong"},Re={code:1001021,message:"set geoFence fail"},_t={code:1100001,message:x},ii={code:1100002,message:"network timeout."},Wt={code:1100003,msg:"socket close"},Ie={code:1100999,message:"unknown server error"},Ve={code:1101002,message:"get app config fail"},Ne=1101003,$e={code:1002014,msg:pt},mt=1102016,ct={code:1102017,message:"dispatch error"},qt={code:1102018,message:"token expired"},Bt={code:1102022,message:"dispatch request timeout"},jt={code:1102023,message:"connect signal fail"},Xt={code:1003050,message:"extra info of publishing stream is null"},si=1003080,Ei={code:1103001,message:x},Ui={code:1103002,message:"browser do not support"},ji={code:1103011,message:"enumerate devices fail"},ki={code:1103012,message:"use camera device fail"},Zi={code:1103021,message:"session request fail"},Bi={code:1103022,message:"create offer error"},Ti={code:1103044,message:y},Mi={code:1103055,message:"publish stream no found"},Gr={code:1103061,message:"get media fail"},en={code:1103062,message:"update stream info fail"},Sr={code:1103068,message:"update sdp fail"},Yr={code:1103089,message:Oe},Mo=1103093,Lr={code:1104001,message:"input parm error"},Ln={code:1104021,message:"session request fail"},tn={code:1104027,message:"server session closed"},gn={code:1104038,message:"resource mode is not supported"},Wn={code:1104042,message:Oe},Qn={code:1104043,message:"mini sdp error"},rr={code:1104044,message:"stream is not playing"},kr=1006006,Mn=1106007,Zn="the microphone may be loose, and audio data collection is abnormal.",Rn=1106008,fa="the camera may be loose, and video data collection is abnormal.",hc=1106009,fc=1106010,Du={code:1000067,message:"Logged in room, setting scenario is not supported"},Nu={code:1103083,message:"sdp wrong format"},Lu={code:1103084,message:"mini sdp buffer size exceeded"},pc={code:1103085,message:"url size exceeded"},Mu=1103086,xu="this publish stream id is not created by CreateZegoStream",Uu=1103087,Bu="the zego stream does not capture audio",zu=1103088,Fu="the zego stream does not capture video",pa={code:1103052,message:"publisher cdn push error"},mc=1103057,Wr="decode audio data fail",rs={code:1103074,message:"video track is not readable"},Fr=1103047,Qr="track is not found",ma={code:1103048,message:H},gc=1103029,rn={code:1103045,message:"video is false"},ga={code:1103046,message:"audio is false"},Kn=1103101,va="only stream which have one track and kind no exist can add track",ns=1103069,os="publisher state wrong",ya=1103070,ar="not support handle track",_a=1103071,Hu=1103071,vn=1103079,vc="replace track fail",hr={code:1000055,message:"cdn url is invalid"},yc=1103072,ba="not support beauty effect",Ki=1103075,qu="beauty effect overload",Sa={code:1103076,message:"audio track is not readable"},Pr={code:1017130,message:"get mini sdp error"},yn={code:1017131,message:"parse mini sdp error"},Ns={code:1017132,message:"worker is invalid"},nr=function(n){return n},Kt=function(n){return n},Kr=function(n){return n},Dt=function(n){return n},zi=function(n){return n},lo="/sdk/init",xr=lo,dn="/sdk/login",Ea="listener",Ta={event:"/sdk/on_listener",listener:Kt,error:{tt:_t}},_c={event:"/sdk/off_listener",listener:Kt,error:{tt:_t}},Cn=lo,Ai={event:"/sdk/create_stream",error:{it:Ui,tt:Ei,et:{code:1103042,message:"screen canceled"},nt:{code:1103010,message:"screen fail"},rt:{code:1103043,message:"screen not support"},st:{code:1103053,message:"https is required"},ot:Gr,ut:{code:1103064,message:"get device not allowed"},ht:{code:1103065,message:"device is not readable"},ct:{code:1103066,message:"device does not meet constraints"}},stream_type:Kt,screen:nr,camera:nr,custom:nr,preview_conf:nr,media_stream_id:Kt},xi={event:"/sdk/start_publish",error:{ft:Ei,dt:ii,vt:Bt,bt:ct,yt:qe,wt:Ti,kt:{code:1103099,message:"stream is not capturing"},Et:{code:1103073,message:"video effect is starting, please operate after video effect is started"},St:Qe,It:{code:1103051,message:"publisher retry timeout"},Ot:{code:1003025,message:"stream is forbided by media server"},At:qt,zt:{code:1103027,message:"server session closed"},Dt:{code:1103030,message:"negotiation timeout"},Rt:Bi,_t:{code:1103023,message:"setLocalDescription error"},Ct:{code:1103060,message:"session request timeout"},Nt:Zi,xt:{code:1103025,message:"other side offer error"},Tt:{code:1103028,message:"ice connection error"},Pt:{code:1103050,message:"websocket disconnected"},Mt:{code:1103024,message:"mediaDesc error"},Bt:{code:1103026,message:"candidate error"},qt:{code:1103056,message:"publish is publishing"},jt:{code:1103058,message:"client ip changed"},Lt:{code:1103059,message:"ttl over time"},Ut:{code:1103067,message:"update sdp time out"},Ft:Sr,Qt:{code:1103078,message:"publish stream poor and net probe poor"},Gt:{code:1103100,message:"background process is start, but not subscribe yet"},Jt:Yr,Vt:Qn},urls:Kr,is_center:zi,server_url:Kt,publish_option:nr,message:Kt,stream_id:Kt,stream_sid:Dt,room_id:Kt,video_en_codec_id:Dt,cap_w:Dt,cap_h:Dt,w:Dt,h:Dt,video_en_fps:Dt,video_en_bps:Dt,audio_c_channel_count:Dt,audio_en_bps:Dt,aec_level:Dt,ans_level:Dt,agc:zi,enable_camera:zi,enable_mic:zi,video_activate:zi,audio_activate:zi,gw_version:Dt,use_na:Dt},Ur={event:"/publish/start",is_peer:zi,reason:Kt,url:Kt,ip:Kt,peer_id:Dt,source_type:Kt,net_protocol:Kt,wait_consume:Dt,dispatch_consume:Dt,signal_consume:Dt,is_center:zi},Jn={event:"/publish/restart",stream_id:Kt,server_url:Kt,reason_code:Dt},Ls={event:"/sdk/publish",room_id:Kt,room_sid_string:Kt,retry_btime:Dt,max_retry_interval:Dt,fail_cnt:Dt,continuous_fail_cnt:Dt,probe_ip_cnt:Dt,valid_probe_ip_cnt:Dt,poor_quality_retry_cnt:Dt,use_resource_type:Kr,probe_not_trigger_retry_info:nr,stop_reason:Kt,child_error:Dt,try_time:Dt,try_cnt:Dt,server_url:Kt,publish_begin_time:Dt,publish_state_time:Dt,bitrate:Dt,h:Dt,w:Dt,cap_w:Dt,cap_h:Dt,fps:Dt,use_na:Dt,env:Dt,webrtc_sid:Dt,stream_id:Kt,itemtype:Kt,total_d:Dt,valid_d:Dt,tempbroken_cnt:Dt},bc="/sdk/api/publish_video_c_size",Sc=Dt,ju=Dt,Ec=Dt,Vu="/sdk/play_video_size_changed",Tc=Dt,Rc=Dt,xn=Dt,Xi={event:"/rtc/publish",tryidx:Dt,url:Kt,ip:Kt,net_protocol:Kt,lsttime:Dt,denied_info:Kt,dispatch_external_ip:Kt,total_stat:nr,room_id:Kt,room_sid_string:Kt,resource_type:Kt,protocol:Kt,stop_reason:Kt,try_time:Dt},ss={event:"/sdk/stop_publish",error:{tt:Ei},stream_id:Kt,stream_sid:Dt,room_id:Kt},mr="/rtc/publish_stream_state_error",sr={event:"/sdk/start_play",error:{Ht:{code:1000015,message:"streamID is empty"},Kt:Lr,Wt:{code:1000014,message:"stream ID is too long"},Xt:{code:1000016,message:"stream ID contains illegal characters"},Yt:Qe,Zt:{code:1103049,message:"repeated pull same stream"},$t:ii,ti:Bt,ii:ct,ei:qe,ni:gn,ri:{code:1104039,message:"play stream not found"},si:{code:1104031,message:"player retry timeout"},oi:tn,ui:{code:1104035,message:"reset session push"},ai:{code:1104030,message:"negotiation timeout"},Rt:{code:1104022,message:"create offer error"},_t:{code:1104023,message:"setLocalDescription error"},Nt:Ln,Ct:{code:1104036,message:"session request timeout"},xt:{code:1104025,message:"other side offer error"},Tt:{code:1104028,message:"ice connection error"},Pt:{code:1104029,message:"websocket disconnected"},Bt:{code:1104026,message:"candidate error"},Mt:{code:1104024,message:"mediaDesc error"},ci:{code:1104032,message:"player is playing"},jt:{code:1104033,message:"client ip changed"},Lt:{code:1104034,message:"ttl is over time"},fi:{code:1104037,message:"probe time out"},li:{code:1104041,message:"stream quality poor and net probe poor"},di:Wn,Vt:Qn},room_id:Kt,urls:Kr,is_center:zi,server_url:Kt,video_layer:Dt,play_option:nr,message:Kt,stream_id:Kt,stream_sid:Dt,resource_mode:Dt,src:Kt,video_codec_id:Kt,room_sid_string:Kt,is_multi:zi,audio_activate:zi,video_activate:zi,gw_version:Dt,use_na:Dt,biz_product:Dt},Un={event:"/play/start",is_peer:zi,reason:Kt,url:Kt,ip:Kt,peer_id:Dt,source_type:Kt,net_protocol:Kt,wait_consume:Dt,dispatch_consume:Dt,signal_consume:Dt,is_center:zi},Pi={event:"/play/restart",stream_id:Kt,server_url:Kt,reason_code:Dt},ho={event:"/sdk/play",audio_cumulative_break_time:Dt,audio_cumulative_decode_time:Dt,video_cumulative_break_time:Dt,video_cumulative_decode_time:Dt,l3_a_break_time:Dt,l3_a_decode_time:Dt,l3_v_break_time:Dt,l3_v_decode_time:Dt,rtc_a_break_time:Dt,rtc_a_decode_time:Dt,rtc_v_break_time:Dt,rtc_v_decode_time:Dt,fft_audio:Dt,fft_video:Dt,room_id:Kt,room_sid_string:Kt,retry_btime:Dt,max_retry_interval:Dt,use_na:Dt,fail_cnt:Dt,continuous_fail_cnt:Dt,probe_ip_cnt:Dt,valid_probe_ip_cnt:Dt,poor_quality_retry_cnt:Dt,probe_not_trigger_retry_info:nr,use_resource_type:Kr,stop_reason:Kt,child_error:Dt,try_time:Dt,try_cnt:Dt,webrtc_sid:Dt,itemtype:Kt,server_url:Kt,play_begin_time:Dt,play_state_time:Dt,play_state_cnt:Dt,first_frame_time:Dt,protocol:Kt,dispatch_external_ip:Kt,total_stat:nr,w:Dt,h:Dt,abrc:Dt,vbrc:Dt,vinfo:nr,total_d:Dt,valid_d:Dt,tempbroken_cnt:Dt},Di={event:"/rtc/play",tryidx:Dt,url:Kt,ip:Kt,stream_id:Kt,room_id:Kt,room_sid_string:Kt,net_protocol:Kt,lsttime:Dt,denied_info:Kt,stop_reason:Kt,dispatch_external_ip:Kt,env:Dt,resource_type:Kt,protocol:Kt,total_stat:nr,vinfo:nr,try_time:Dt},xo={event:"/sdk/stop_play",error:{tt:Ei},room_id:Kt,stream_id:Kt,webrtc_sid:Dt,stream_sid:Dt,biz_product:Dt},Gu="/rtc/play_stream_state_error",nn="/device/list",fo={it:Ui,vi:ji},Ra=nr,Cc=Kt,Wu={event:"/device/audio_device_changed",error:{it:Ui,vi:ji},interrupt:Dt,device:Kt,device_name:Kt},Qu={event:"/device/video_device_changed",error:{it:Ui,vi:ji},interrupt:Dt,device:Kt,device_name:Kt},Hr="/sdk/check_system",Uo=nr,po="/sdk/remote_camera_update",wc=Kt,Bo=Kt,Ic=Dt,Zu="/sdk/remote_mic_update",Ku=Kt,Bn=Kt,Ju=Dt,zn={event:"/sdk/destroy_stream",error:{mi:yt},stop_reason:Kt},as="/device/api/audio_output",mo=Kt,zo=Kt,Xr={event:"/liveroom/recv_stream_update_info",stream_update_type:Kt,stream_seq:Dt,stream_list:nr,error:{pi:$e}},Zt="/liveroom/send_stream_update_info",Oc=Kt,Ca=Kt,Yu=Kt,Br={event:"/liveroom/get_current_stream_list",room_id:Kt,room_sid_string:Kt,stream_seq:Dt,stream_size:Dt,stream_list:nr,use_ua:Dt,error:{tt:Ei,NOT_LOGIN:Qe}},go={event:"/sdk/net_first_video_frame",webrtc_sid:Dt,fft_consumed:nr,resource_type:Kt,reliability:Dt,push_consumed:Dt,prepare_recv_consumed:Dt,connected_consumed:Dt,protocol:Kt,biz_product:Dt,dev_changed:zi},wa={event:"/sdk/net_first_audio_frame",webrtc_sid:Dt,fft_consumed:nr,resource_type:Kt,reliability:Dt,push_consumed:Dt,prepare_recv_consumed:Dt,connected_consumed:Dt,protocol:Kt,biz_product:Dt,dev_changed:zi},Ms="/app/lifecycle",Er=Kt,kc={tt:_t},Mr="/sdk/listener",d="/sdk/net_probe",T=Dt,N=Kr,Q={event:"/sdk/net_probe_result",is_switch:zi,is_publish:zi,stream_id:Kt,result:Dt,node:Kt,net_quality:Dt,probe_net_quality:Dt},te="/cloud_setting/cache",ge=nr,Le="/cdn/play",ot=Kt,Ye=Kt,gt=Kt,Xe="/l3/play",Ot=Dt,mi=Dt,_i="/sdk/play_src_changed",Yt=Kt,ni=Kt,pi={event:"/publish/stream_resource",urls:Kr,try_cnt:Dt,is_center:zi},fi="/publish/server_connect",Ci=Kt,Wi="/publish/create_offer",Ji=Kt,vr=zi,$i="/publish/set_local_sdp",cs=Kt,or=zi,Ia={event:"/publish/create_session",sdp:Kt,is_mini:zi,gw_nodes:Kr,gw_nodes_ttl:Dt,gw_version:Dt,webrtc_sid:Dt},gp="/publish/set_remote_sdp",vp=Kt,yp=zi,_p=Dt,Xu="/publish/ice_connected",bp="/publish/rtc_publish_event",Sp=Dt,Ep="/rtc/play_event_message",Tp=Dt,Rp="/rtc/recv_close_session",Cp=nr,gd="/rtc/recv_reset_session",vd="/rtc/ice_connection_state_changed",yd=Kt,wp="/publish/send_media_desc",Ip=Dt,Op="/publish/recv_media_desc",kp=Kt,Pp=zi,Ap="/publish/send_ice_candidate",Dp=nr,Np="/publish/recv_ice_candidate",Lp=nr,_d={event:"/play/stream_resource",urls:Kr,try_cnt:Dt,is_center:zi},Pc="/play/server_connect",Mp="/play/create_offer",xp=Kt,Up=zi,Bp="/play/set_local_sdp",zp=Kt,Fp=zi,Ac={event:"/play/create_session",sdp:Kt,is_mini:zi,gw_nodes:Kr,gw_nodes_ttl:Dt,gw_version:Dt,webrtc_sid:Dt},Hp="/play/set_remote_sdp",qp=Kt,jp=zi,Vp=Dt,$u="/play/ice_connected",Gp="/play/send_media_desc",Wp=Dt,Qp="/play/recv_media_desc",Zp=Kt,Kp=zi,Jp="/play/send_ice_candidate",Yp=nr,Xp="/play/recv_ice_candidate",$p=nr,el="/zegoconn/connect",em={event:"/zegoconn/proxy_connect",service_no:Dt,proxy_link_sources:Dt,recv_time:Dt,connect_stream:Dt},tm={event:"/zegoconn/proxy_broken",service_no:Dt},im={event:"/zegoconn/proxy_disconnect",service_no:Dt},rm="/rtc/exception_update",nm=Dt,om=Kt,xs={event:"/sdk/publish_target",error:{tt:_t,gi:Mi,bi:Qe,yi:{code:1103063,message:"publish target no response"},wi:{code:1102021,message:"biz channel error."},ki:{code:1102024,message:"invalid channel"},Ei:Ie}},sm="/mss/pushadd",am="/mss/pushdel",cm=Kt,bd={event:"/liveroom/send_stream_extra_info",error:{tt:_t,Si:Xt,bi:Qe,gi:Mi,Ii:en},stream_id:Kt,stream_extra_info:Kt,room_sid_string:Kt,room_id:Kt,send_seq:Dt};function qi(n){return typeof n=="number"}function bi(n){return typeof n=="string"}function Li(n){return typeof n=="boolean"}function Yi(n){return n===void 0}function tr(n){return n!==null&&n instanceof Object}function wn(n){return typeof n=="function"}function In(n){return n instanceof Array}function tl(n){return n instanceof Uint8Array}function Ar(n){return n instanceof MediaStream}function il(n){return n instanceof HTMLElement}function us(n){return n instanceof HTMLMediaElement}function Sd(n){return n instanceof ArrayBuffer}function _r(n,e){if(n&&!Ar(n)&&n.zegoStream){if(e.info("cu.gs type:zego"),Ar(n.stream))return n.stream;throw new Error("The ZegoLocalStream type requires first calling the capture api to capture the stream")}return n}var On=function(){return On=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},On.apply(this,arguments)},um=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},lm=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}};function Us(n){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(n)&&/^[^:/]*$/g.test(n)}function rl(n){return!!(n.startsWith("rtmp://")||n.startsWith("avertp://")||n.startsWith("https://")&&n.endsWith(".flv")||n.startsWith("https://")&&n.endsWith(".m3u8"))}function Ed(n,e,t){e.success&&(t[n+"SuccessCallback"]=e.success),e.error&&(t[n+"ErrorCallback"]=e.error)}function nl(n,e){return e[n+"SuccessCallback"]}function dm(n,e,t,i,r){switch(t){case"eventStart":n.eventStart(e,i);break;case"eventEndWithMsgInfo":n.eventEndWithMsgInfo(e,i,r[0]);break;case"addEventMsg":n.addEventMsg(e,i,r[0],r[1]);break;case"addEvent":n.addEvent(e,i);break;case"eventEnd":n.eventEnd(e,i);break;case"addMsgInfo":n.addMsgInfo(e,r[0])}}function hm(n,e,t,i){Ed(n,{success:function(r,s){for(var o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];dm(e,t,r,s,o)}},i)}function fm(n,e,t){return e?{code:n,message:t||"liveroom error"}:{code:0,message:""}}function pm(n,e){delete e[n+"SuccessCallback"],delete e[n+"ErrorCallback"]}function mm(n,e){var t={code:-1,message:"server error"};return n>1e9&&(t.code=n-1e9+52e6),e&&(t.message=e),t}function gm(n,e){var t={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return e?n>2e5&&n<3e5?t[n-2e5]:n<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[n]||t[n]||"ROOM_INNER_ERROR":t[n]||"ROOM_INNER_ERROR":""}function vm(n,e,t,i){var r,s=[],o=[],u=[];t||(t=[]);for(var m=0;m<t.length;m++)if(t[m].anchor_id_name!=n&&t[m].id_name!=n&&t[m].user_id!=n){r=!1;for(var f=0;f<e.length;f++)if(t[m].stream_id===e[f].stream_id){t[m].extra_info!==e[f].extra_info&&u.push(t[m]),r=!0;break}r||s.push(t[m])}for(var a=0;a<e.length;a++)if(e[a].anchor_id_name!=n&&e[a].id_name!=n&&e[a].user_id!=n){r=!1;for(var S=0;S<t.length;S++)if(e[a].stream_id===t[S].stream_id){r=!0;break}r||o.push(e[a])}for(e.splice(0),m=0;m<t.length;m++)e.push(t[m]);i(s,o,u)}function cr(n,e){return e==0?qi(n)&&n%1==0&&n>=0:qi(n)&&n%1==0&&n>0}function Td(n,e,t){return e=e??1,t=t??1e4,qi(n)&&n%1==0&&n>=e&&n<=t}function Dc(n,e){navigator.mediaDevices!==void 0&&navigator.mediaDevices.enumerateDevices!==void 0?navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=[],r=[],s=[],o=0;o<t.length;o++){var u=t[o];u.kind==="audioinput"&&i.push({deviceName:u.label,deviceID:u.deviceId}),u.kind==="audiooutput"&&r.push({deviceName:u.label,deviceID:u.deviceId}),u.kind==="videoinput"&&s.push({deviceName:u.label,deviceID:u.deviceId})}n&&n({microphones:i,speakers:r,cameras:s})}).catch(function(t){console.error("enumerate devices wrong "+t),e&&e(fo.vi)}):e&&e(fo.it)}function Nc(n,e,t,i){if(!tr(n))return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(Object.keys(n).length===0)return{result:!1,message:"".concat(e," can not be a empty object")};for(var r=0,s=["exact","ideal","max","min"];r<s.length;r++){var o=s[r],u=n[o];if(qi(u)&&!cr(u,!1))return{result:!1,message:" ".concat(o," of ").concat(e," must be integer number")};if(qi(t)&&qi(u)&&u<t)return{result:!1,message:" ".concat(o," of ").concat(e," must greater than ").concat(t)};if(qi(i)&&qi(u)&&u>i)return{result:!1,message:" ".concat(o," of ").concat(e," cannot greater than ").concat(i)}}return{result:!0,message:"Constraint Extend OK."}}function ol(n,e,t,i,r){var s=Nc(n,e,i,r);return s.result||t&&t(Ai.error.tt,s.message),s.result}function Rd(n,e){for(var t=0,i=["frameRate","width","height"];t<i.length;t++){var r=i[t],s=n[r];if(Yi(s))return e&&e(Ai.error.tt," ".concat(r," is required when videoQuality is 4")),!1;if(qi(s)&&!cr(s,!1))return e&&e(Ai.error.tt," ".concat(r," must be integer number")),!1;if(qi(s)&&(r==="width"||r==="height")&&s<0)return e&&e(Ai.error.tt," ".concat(r," must greater than 0.")),!1;if(qi(s)&&r==="width"&&s>7680)e&&e(Ai.error.tt," ".concat(r," cannot greater than 7680."));else if(qi(s)&&r==="height"&&s>4320)e&&e(Ai.error.tt," ".concat(r," cannot greater than 4320."));else if(tr(s)){if(r==="width"&&!ol(s,r,e,0,7680)||r==="height"&&!ol(s,r,e,0,4320)||r==="frameRate"&&!ol(s,r,e))return!1}else if(!qi(s)&&tr(s))return e&&e(Ai.error.tt," ".concat(r," must be number or object")),!1}return!0}function Cd(n,e){if(Yi(n))return e(Ai.error.tt," bitrate is required when videoQuality is 4"),!1;if(qi(n)){if(!Td(n,0,10240))return e(Ai.error.tt," bitrate must be integer number"),!1;if(!function(t,i){return!(t>10240&&(i(Ai.error.tt," bitrate cannot greater than 10 Mbps"),1))}(n,e))return!1}else e(Ai.error.tt," bitrate must be number");return!0}function Lc(n){var e=n.message.match(/action:(\d+)/),t=e?Number(e[1]):NaN;return[sr.error.Lt,sr.error.jt,xi.error.Lt,xi.error.jt].includes(n)||[6].includes(t)}function sl(n,e,t){return n.push(e),n.length>t&&n.shift(),n.reduce(function(i,r){return i+r})/n.length}function wd(n){return n<600?97-Math.pow(.09*n,1.1):18*Math.exp(.002*(600-n))}function Id(n,e){if(e)return n<=55?99-Math.pow(.8*n,1.18):it.PoorMinQuality;var t=100*n;return t<=40?96-Math.pow(t,1.22):it.PoorMinQuality}function Oa(n,e,t){if(Yi(t))return Math.min(wd(n),Id(e,!0));var i=function(r){return r<=50?98-Math.pow(r,1.15):it.PoorMinQuality}(t);return .15*i+.85*Math.min(wd(n),Id(e,!1))}function Fo(n){return n>=it.ExcellentMinQuality?Ee.Excellent:n>=it.GoodMinQuality?Ee.Good:n>=it.MiddleMinQuality?Ee.Middle:n>=it.PoorMinQuality?Ee.Poor:Ee.Die}function ka(){var n=!!window.RTCRtpScriptTransform;if(!n){var e=!!RTCRtpSender.prototype.createEncodedStreams,t=!1;try{new ReadableStream,t=!0}catch{console.error("Transferable streams are not supported.")}n=e&&t}return n}function Od(){return typeof RTCPeerConnection.prototype.setConfiguration=="function"}function Mc(n){for(var e,t=0,i=n.length,r="";t<i;)e=n.subarray(t,Math.min(t+32768,i)),r+=String.fromCharCode.apply(null,Array.from(e)),t+=32768;return btoa(r)}function Jr(n,e,t){e.info(n.kind==="audio"?t+" "+"mic(".concat(n.id,",").concat(n.label,",").concat(n.muted,",").concat(n.enabled,",").concat(n.readyState,")"):t+" "+"camera(".concat(n.id,",").concat(n.label,",").concat(n.muted,",").concat(n.enabled,",").concat(n.readyState,")"))}function kd(n,e,t){var i=new Date().getTime(),r=(0,g.getReportSeq)();return function(s){var o=0;if(s.length==0)return o;for(var u=0;u<s.length;u++)o=(o<<5)-o+s.charCodeAt(u),o&=o;return o>>>0}("".concat(n,"_").concat(e,"_").concat(t,"_").concat(i,"_").concat(r))}function ls(n){var e="rtc";switch(n){case 0:case 3:default:e="rtc";break;case 1:e="cdn";break;case 2:e="l3"}return e}function Pd(n){var e=this;return new Ge(function(t,i){return um(e,void 0,void 0,function(){var r,s,o,u,m,f;return lm(this,function(a){switch(a.label){case 0:r=[On({},n),On(On({},n),{video:{width:360}}),On(On({},n),{video:{width:640}}),On(On({},n),{video:{width:720}}),On(On({},n),{video:{width:854}}),On(On({},n),{video:{width:1280}})],s=null,o=null,u=0,a.label=1;case 1:if(!(u<r.length))return[3,6];m=r[u],a.label=2;case 2:return a.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia(m)];case 3:return s=a.sent(),[3,6];case 4:return f=a.sent(),o=f,[3,5];case 5:return u++,[3,1];case 6:return s?t(s):i(o),[2]}})})})}function Ad(n,e,t,i,r,s,o){return o===void 0&&(o=!1),n.createSpan(e,{key:r,bak_key:s,par:t},{key:i,par:t},i,o)}function Dd(n,e,t){var i=JSON.parse(JSON.stringify(n));if(e.forEach(function(s){var o=i.indexOf(s);o>=0&&(i.splice(o,1),i.push(s))}),!t){var r=i.findIndex(function(s){return s===n[0]});r>0&&(i.splice(r,1),i.unshift(n[0]))}return i}function Nd(n,e){var t;if(e==="chrome"||e==="safari")switch(n){case 0:t="tls";break;case 1:t="tcp";break;case 2:t="udp"}else if(e==="firefox")switch(n){case 0:t="tcp";break;case 5:t="udp"}return t}function Pa(n,e){if(e===void 0&&(e="video"),!(n instanceof MediaStream))return null;for(var t=e=="video",i=document.querySelectorAll(e),r=null,s=0;s<i.length;s++){var o=i[s],u=o.srcObject;if(u&&(u===n||(t?u.getVideoTracks()[0]===n.getVideoTracks()[0]:u.getAudioTracks()[0]===n.getAudioTracks()[0]))){if(o.currentTime)return o;r=o}}return r}var on=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},xc=function(){function n(){}return n.zegoSdp=function(e){var t=e.split(`\r
`),i=[],r=[];t.forEach(function(o){var u=o.match(/a=rtpmap:(\d+)\s+((H264\/90000)|(opus\/48000\/2))/);u&&u[1]&&u[2]&&(u[2]==="H264/90000"&&i.push(u[1]),u[2]==="opus/48000/2"&&r.push(u[1]))});var s=[];return t.map(function(o){var u=!0,m=o.match(/((a=rtcp-fb:)|(a=rtpmap:)|(a=fmtp:))(\d+)/);if(m&&m[5]&&(on(on([],i,!0),r,!0).some(function(a){return a==m[5]})||(u=!1)),o.indexOf("m=video")>-1){var f=o.split(" ");o=on([f[0],f[1],f[2]],i,!0).join(" ")}else o.indexOf("m=audio")>-1&&(f=o.split(" "),o=on([f[0],f[1],f[2]],r,!0).join(" "));u&&s.push(o)}),s.join(`\r
`)},n.getSDPByVideDecodeType=function(e,t,i,r){var s={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[],OTHER:[]}};if(!e.includes("m=video"))return e;var o=/m=video.+/.exec(e)[0];o=o.match(/[\s|\d]+/g)[1].replace(" ",""),s.str=o,s.arr=s.str.split(" "),s.arr.forEach(function(S){var F=new RegExp("a=rtpmap:"+S+".+").exec(e)[0];F.includes("H264")?s.obj.H264.push(S):F.includes("H265")?s.obj.H265.push(S):F.includes("VP8")?s.obj.VP8.push(S):F.includes("VP9")?s.obj.VP9.push(S):s.obj.OTHER.push(S)}),s.obj.OTHER.forEach(function(S){var F=new RegExp("a=fmtp:"+S+".+apt=(\\d+)").exec(e),ee=F&&F[1];ee&&(s.obj.H264.includes(ee)?s.obj.H264.push(S):s.obj.H265.includes(ee)?s.obj.H265.push(S):s.obj.VP8.includes(ee)?s.obj.VP8.push(S):s.obj.VP9.includes(ee)&&s.obj.VP9.push(S))});var u=[];if(t==="VP9"?u=on(on(on([],s.obj.H265,!0),s.obj.H264,!0),s.obj.VP8,!0):t==="VP8"?u=on(on(on([],s.obj.H265,!0),s.obj.H264,!0),s.obj.VP9,!0):t==="H264"?u=on(on(on([],s.obj.H265,!0),s.obj.VP8,!0),s.obj.VP9,!0):t==="H265"&&(u=on(on(on([],s.obj.VP8,!0),s.obj.H264,!0),s.obj.VP9,!0)),t=="H264"&&Li(i)){var m=function(S){return function(F){return!!F.includes("profile-level-id=")&&(S?!F.includes("profile-level-id=42e01f"):F.includes("profile-level-id=42e01f"))}},f=function(S){return function(F){if(!F.includes("profile-level-id="))return!1;switch(S){case ri.BASE_LINE:return!F.includes("profile-level-id=42");case ri.MAIN:return!F.includes("profile-level-id=4d");case ri.HIGH:return!F.includes("profile-level-id=64");default:return!1}}},a=function(S){return function(){var F=[];return s.obj.H264.forEach(function(ee){for(var ie=new RegExp("a=fmtp:"+ee+".+\\s\\n","g").exec(e)||[],ae=0,be=S;ae<be.length;ae++)ie.filter(be[ae]).length!==0&&F.push(ee);var Te=new RegExp("a=fmtp:"+ee+".+apt=(\\d+)").exec(e),Pe=Te&&Te[1];Pe&&F.includes(Pe)&&F.push(ee)}),F}};u=u.concat(function(){for(var S=[],F=0,ee=Yi(r)||r!==gi.HARD_SOFT_ENCODEC_FIRST?Yi(r)||r!==gi.HIGH_PROFILE_FIRST?[a([f(ri.BASE_LINE),m(i)]),a([f(ri.BASE_LINE),m(!i)]),a([m(i)]),a([m(!i)])]:[a([f(ri.HIGH),m(i)]),a([f(ri.HIGH),m(!i)]),a([m(i)]),a([m(!i)])]:[a([m(i),f(ri.BASE_LINE)]),a([m(i)]),a([m(!i),f(ri.BASE_LINE)]),a([m(!i)])];F<ee.length&&(S=(0,ee[F])(),new Set(S).size===s.obj.H264.length);F++)S=[];return S}())}return u.forEach(function(S){var F=s.arr.indexOf(S);F>=0&&s.arr.splice(F,1);var ee=new RegExp("a=rtpmap:"+S+".+\\s\\n","g"),ie=new RegExp("a=rtcp-fb:"+S+".+\\s\\n","g"),ae=new RegExp("a=fmtp:"+S+".+\\s\\n","g");e=(e=(e=e.replace(ee,"")).replace(ie,"")).replace(ae,"")}),e=e.replace(o,s.arr.join(" "))},n}(),Aa=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Da=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Ld=function(){function n(){var e=this;this.iceconnectionstatechangeTimes=0,this.isCheckAll=!1;var t=Tt.createElement("canvas");t.getContext("2d").fillStyle="rgba(255, 255, 255, 0)";try{this.localStream=t.captureStream()}catch(i){console.error("canvas captureStream error",i)}this.timer=setTimeout(function(){e.resolve("Detection timeout"),e.hangup()},5e3)}return n.prototype.checkSupportByType=function(e,t){return Aa(this,void 0,void 0,function(){var i,r,s=this;return Da(this,function(o){switch(o.label){case 0:return this.checkType=e,i={},this.localPc=new RTCPeerConnection(i),this.remotePc=new RTCPeerConnection(i),r=new Ge(function(u){return s.resolve=u}),this.localPc.addEventListener("icecandidate",function(u){return s.onIceCandidate(s.localPc,u)}),this.remotePc.addEventListener("icecandidate",function(u){return s.onIceCandidate(s.remotePc,u)}),this.remotePc.addEventListener("iceconnectionstatechange",function(u){s.remotePc.iceConnectionState==="connected"&&(s.iceconnectionstatechangeResult=!0),++s.iceconnectionstatechangeTimes==2&&s.iceCandidate&&(clearTimeout(s.timer),s.resolve(s.remotePc.iceConnectionState==="connected"||"The browser does not support ".concat(e," format")),s.hangup())}),this.localStream.getTracks().forEach(function(u){return s.localPc.addTrack(u,s.localStream)}),[4,this.check(e)];case 1:return o.sent(),[4,r];case 2:return[2,o.sent()]}})})},n.prototype.check=function(e,t){return Aa(this,void 0,void 0,function(){var i,r;return Da(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t&&wn(this.localPc.addTransceiver)&&(this.localPc.addTransceiver("video",{direction:"sendonly"}),this.localPc.addTransceiver("audio",{direction:"sendonly"})),[4,this.localPc.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(i=s.sent()).sdp=xc.getSDPByVideDecodeType(i.sdp,e),this.onCreateOfferSuccess(i),[3,3];case 2:return r=s.sent(),this.onCreateSessionDescriptionError(r),[3,3];case 3:return[2]}})})},n.prototype.onCreateOfferSuccess=function(e){return Aa(this,void 0,void 0,function(){var t,i,r,s;return Da(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.localPc.setLocalDescription(e)];case 1:return o.sent(),[3,3];case 2:return t=o.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return o.trys.push([3,5,,6]),[4,this.remotePc.setRemoteDescription(e)];case 4:return o.sent(),[3,6];case 5:return i=o.sent(),this.onSetSessionDescriptionError(i),[2];case 6:return o.trys.push([6,9,,10]),[4,this.remotePc.createAnswer()];case 7:return r=o.sent(),[4,this.onCreateAnswerSuccess(r)];case 8:return o.sent(),[3,10];case 9:return s=o.sent(),this.onCreateSessionDescriptionError(s),[2];case 10:return[2]}})})},n.prototype.onCreateAnswerSuccess=function(e){return Aa(this,void 0,void 0,function(){var t,i;return Da(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.remotePc.setLocalDescription(e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return r.trys.push([3,5,,6]),[4,this.localPc.setRemoteDescription(e)];case 4:return r.sent(),[3,6];case 5:return i=r.sent(),this.onSetSessionDescriptionError(i),[2];case 6:return[2]}})})},n.prototype.onIceCandidate=function(e,t){return Aa(this,void 0,void 0,function(){var i;return Da(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return r.sent(),[3,3];case 2:return i=r.sent(),console.error(this.checkType,"".concat(this.getPcName(e)," addIceCandidate error"),i),clearTimeout(this.timer),this.hangup(),this.resolve(i),[3,3];case 3:return this.getPcName(e)==="remotePc"&&t.candidate&&(this.iceCandidate=!0),this.iceconnectionstatechangeResult&&this.getPcName(e)==="localPc"&&(clearTimeout(this.timer),this.hangup(),this.resolve(!0)),[2]}})})},n.prototype.getOtherPc=function(e){return e===this.localPc?this.remotePc:this.localPc},n.prototype.getPcName=function(e){return e===this.localPc?"localPc":"remotePc"},n.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},n.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: ".concat(e.toString())),clearTimeout(this.timer),this.hangup(),this.resolve(e)},n.prototype.hangup=function(){this.localPc.close(),this.remotePc.close(),this.iceconnectionstatechangeTimes=0,this.localStream.getTracks().forEach(function(e){return e.stop()})},n}(),al=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},cl=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}};function Md(n,e){return al(this,void 0,void 0,function(){return cl(this,function(t){return e&&wn(n.addTransceiver)&&(n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"})),[2,n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})]})})}function xd(n,e,t,i,r){return al(this,void 0,void 0,function(){var s,o,u,m,f,a,S,F;return cl(this,function(ee){switch(ee.label){case 0:return s={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:n,errInfo:{}},i&&i==="screenSharing"?(e({result:n,errInfo:s.errInfo}),[2]):i&&i!=="customCapture"||(((o=Tt.createElement("video")).captureStream||o.mozCaptureStream)&&(s.customCapture=!0),i!=="customCapture")?(u=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,m=function(){var ie=window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1;if(ie)throw console.error("webrtc requires https or localhost"),new Error("webrtc requires https or localhost");return!ie}(),i&&i!=="camera"&&i!=="microphone"?[3,9]:u?m?[3,1]:(s.camera=!1,s.microphone=!1,console.error("webrtc requires https or localhost"),[3,9]):[3,9]):(e({result:s.customCapture,errInfo:s.errInfo}),[2]);case 1:if(i&&i!=="camera")return[3,5];ee.label=2;case 2:return ee.trys.push([2,4,,5]),[4,Pd({video:!0,audio:!1})];case 3:return(f=ee.sent())&&(s.camera=!0)&&f.getTracks().forEach(function(ie){ie.stop()}),[3,5];case 4:return a=ee.sent(),s.errInfo.camera={name:a.name,message:a.message},console.error("camera devices detect error: ",a.name,a.message),[3,5];case 5:if(i&&i!=="microphone")return[3,9];ee.label=6;case 6:return ee.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 7:return(S=ee.sent())&&(s.microphone=!0)&&S.getTracks().forEach(function(ie){return ie.stop()}),[3,9];case 8:return F=ee.sent(),s.errInfo.microphone={name:F.name,message:F.message},console.error("microphone devices detect error: ",F.name,F.message),[3,9];case 9:return i==="camera"||i==="microphone"?(e({result:s[i],errInfo:s.errInfo}),[2]):(function(ie,ae,be,Te){al(this,void 0,void 0,function(){var Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct;return cl(this,function(Mt){switch(Mt.label){case 0:return Pe={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},be?ae!==1||be!=="VP8"&&be!=="H264"?[3,2]:[4,(Ct=new Ld).checkSupportByType(be,Te)]:[3,2];case 1:return Li(Ae=Mt.sent())?(Pe[be]=Ae,[2,ie(Pe)]):(Pe[be]=!1,[2,ie(Pe,Ae)]);case 2:if(be!=="webRTC"&&ae!==1)return[3,7];Mt.label=3;case 3:return Mt.trys.push([3,5,,6]),[4,Md(new RTCPeerConnection,Te)];case 4:return Mt.sent(),Pe.webRTC=!0,[3,6];case 5:return Be=Mt.sent(),ie&&ie(Pe,Be),[3,6];case 6:if(be==="webRTC")return[2,ie(Pe)];Mt.label=7;case 7:if(ae===1){for(Ze="",Rt=[],At=0,vt=st=["VP8","H264"];At<vt.length;At++)Ft=vt[At],Ct=new Ld,Rt.push(Ct.checkSupportByType(Ft));return Promise.all(Rt).then(function(Gt){Gt.forEach(function(li,kt){Li(li)?Pe[st[kt]]=!0:(Pe[st[kt]]=!1,Ze=li)}),Ze?ie(Pe,Ze):ie(Pe)}),[2]}try{Md(new RTCPeerConnection,Te).then(function(Gt){if(Pe.webRTC=!0,Gt&&Gt.sdp){var li=Gt.sdp.split(`\r
`);if(Pe.H264=li.some(function(kt){return kt.startsWith("a=rtpmap:")&&kt.indexOf("H264/")>-1}),be==="H264"||(Pe.VP8=li.some(function(kt){return kt.startsWith("a=rtpmap:")&&kt.indexOf("VP8/")>-1}),be==="VP8"))return ie(Pe);Pe.VP9=li.some(function(kt){return kt.startsWith("a=rtpmap:")&&kt.indexOf("VP9/")>-1}),Pe.H265=li.some(function(kt){return kt.startsWith("a=rtpmap:")&&kt.indexOf("H265/")>-1}),ie&&ie(Pe)}})}catch(Gt){ie&&ie(Pe,Gt)}return[2]}})})}(function(ie,ae){i||(s.videoCodec.H264=ie.H264,s.videoCodec.H265=ie.H265,s.videoCodec.VP8=ie.VP8,s.videoCodec.VP9=ie.VP9,s.webRTC=ie.webRTC),ae&&(bi(ae)?s.errInfo.extendedDate=ae:s.errInfo.webRTC={name:ae.name,message:ae.message},console.error("videoCodec detect error: "+ae)),e&&e(i?{result:ie[i],errInfo:s.errInfo}:s)},t,i,r),[2])}})})}var ym={supportDetection:xd};function ul(n){return n&&n.videoQuality===void 0&&["width","height","frameRate","bitRate"].forEach(function(e){n[e]===void 0&&delete n[e]}),n}function Uc(n){for(var e=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(e),i=new Uint8Array(t.length),r=0;r<t.length;++r)i[r]=t.charCodeAt(r);return i}function Ud(n){return Uint8Array.from(Array.from(window.unescape(encodeURIComponent(n))).map(function(e){return e.charCodeAt(0)}))}function Ho(n){for(var e in n)tr(n[e])?Ho(n[e]):n.hasOwnProperty(e)||(qi(n[e])&&(n[e]=0),bi(n[e])&&(n[e]=""))}function Bc(n){var e=n.split(`
m=`).map(function(r,s){return(s>0?"m="+r:r).trim()+`\r
`}),t=[],i=[];return e.forEach(function(r,s){var o=function(u,m){return function(f){return f.trim().split(`
`).map(function(a){return a.trim()})}(u).filter(function(f){return f.indexOf(m)===0})}(r,"a=candidate:").map(function(u){return i.push(u),function(m){for(var f,a={foundation:(f=m.indexOf("a=candidate:")===0?m.substring(12).split(" "):m.substring(10).split(" "))[0],component:parseInt(f[1],10),protocol:f[2].toLowerCase(),priority:parseInt(f[3],10),ip:f[4],address:f[4],port:parseInt(f[5],10),type:f[7]},S=8;S<f.length;S+=2)switch(f[S]){case"raddr":a.relatedAddress=f[S+1];break;case"rport":a.relatedPort=parseInt(f[S+1],10);break;case"tcptype":a.tcpType=f[S+1];break;case"ufrag":a.ufrag=f[S+1],a.usernameFragment=f[S+1];break;default:a[f[S]]=f[S+1]}return a}(u)});t.push.apply(t,o)}),[t,i]}var Bd="zc.0",zd="zc.1",sn="zc.cs",ll="zc.ds",Zr="zc.sps.0",Na="zc.sps.1",dl="zc.sps.0.0",zc="zc.sps.1.0",Fc="zc.smsi.0",hl="zc.scsu",Bs="zc.rdh.a",Hc="zc.rdh.hfwur",qo="zc.psh.0",ds="zc.psh.1",fl="zc.tsh.rngn.0",pl="zc.tsh.rngn.1",Fd="zc.tsh.dgnb",_m="zc.sc.al",La="zc.s.bwh",qc="zc.s.ut",Ma="zc.s.smwc",Yn="zc.s.cs.0",ml="zc.s.sct",xa="zc.s.cs.1",gl="zc.s.sm",vl="zc.s.hrd",Hd="zc.s.hpd",yl="zc.s.hprsd",qd="zc.s.smd",jd="zc.s.smda",Vd="zc.s.cmt",Ua="zc.s.sh",Gd="zc.s.sss",Wd="zc.s.apas",Qd="zc.s.snp",Zd="zc.s.dgn",Kd="zc.wcs.ml",_l="zc.wcs.csws.1",bl="zc.wcs.smd",Sl="zsc.ssgn",hs="zsc.ccns",Jd="zsc.ucgl",gr="zc.p.0.sp.0",jc="zc.p.ps",Yd="zc.p.0.ocpss",zs="zc.p.0.ocos",vo="zc.p.0.oslds",Xn="zc.p.0.ogrd",Ba="zc.p.0.ormd",za="zc.p.0.orci.0",Xd="zc.p.0.orci.1",El="zc.p.0.oic",$d="zc.p.0.ocsc",jo="zc.p.0.oicsc",Fa="zc.p.0.spqt",eh="zc.p.0.cpqut.1",th="zc.p.0.upq",ih="zc.p.0.orrs",rh="zc.p.0.orcs",Ha="zc.p.0.sci",nh="zc.p.0.psr",oh="zc.p.0.od",Vc="zc.p.0.ssl.0",Gc="zc.p.0.orumd",Wc="zc.p.0.ss",Qc="zc.p.0.scd",an="zc.p.1.sp.0",Zc="zc.p.ocpss.1",fs="zc.p.hcsws.1",Kc="zc.p.ocos.1",Fs="zc.p.oslds.1",_n="zc.p.ormd.1",Hs="zc.p.orci.1",sh="zc.p.orpe.1",Jc="zc.p.oic.1",ps="zc.p.oicsc.1",qs="zc.p.spqt.1",ah="zc.p.orrs.1",ch="zc.p.orcs.1",js="zc.p.orss.1",qa="zc.p.ogrs.1",ja="zc.p.sci.1",uh="zc.p.psr.1",Tl="zc.p.ssl.1",lh="zc.p.1.nqi",Yc="zc.p.1.scd",dh="zc.p.1.oce",kn="zc.uslq",Rl="zc.p.scv",hh="zc.sh.msbss",fh="zc.sh.ms",Cl="zc.sh.psl",ph="zc.sh.sbr",mh="zc.sh.sbr3",gh="zc.as.smss",vh="zc.as.sass",yh="zc.as.s.0",Xc="zc.srs",wl="zc.irs",Va="zc.ssh",$c="zc.wmh.db",Il="zc.ups.0",_h="zc.crh.a.0",eu="zc.hrh.smt.0",Ga="zc.vam.rv",tu="zc.vam.iwg",Wa="zc.vam.vam",bm=function(){function n(e,t){this.Oi=e,this.Ai=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.waitPublishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnToTcp=!1,this.turnOverTcpOnly=void 0,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.engineDestroy=!1,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[],playerRecvSEI:[],beautyEffectError:[],_engineConfigUpdate:[],backgroundEffectError:[],exceptionUpdate:[],networkQuality:[],mixerSoundLevelUpdate:[],autoMixerSoundLevelUpdate:[],_engineDestroy:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.customUa=!1,this.testNetPackageSize=!1,this.testSignalConnectCount=0,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.defaultConnTime=5,this.clientIP="",this.accessClientIp="",this.isMultiOuter=!1,this.type="PUBLIC",this.roomList=[],this.tempRoomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.debugLog=!1,this.netAppConfigDelay=0,this.seiConfig={emulationPreventionByte:!1},this.playAccelerate=!0,this.connectChanged=!1,this.autoSwitchDeviceSetting={camera:!1,microphone:!1},this.unSendMessageList=[],this.scenario=Vt.Default,this.testStreamRetryMode=0,this.testStreamRetryCount=10,this.supportDispatchByPass=!1,this.testStreamStatusSeq=0,this.engineConfig={keepAudioTrack:!0,playClearLastFrame:!0,previewClearLastFrame:!0,mixingAudioDelay:0,baseMixingAudioDelay:0,adaptCustomUA:!1,allowReplaceEmptyTrack:!1,publishQualityInterval:0,playQualityInterval:0},this.zi=!0,this.Di=!1,this.player265Validated=!1,this.player265ReceiverList=[],this.logReportCallback=hm,this.unregisterCallback=pm,this.decodeServerError=mm,this.getLiveRoomError=gm,this.getServerError=fm,this.mergeStreamList=vm,this.actionSuccessCallback=nl,this.checkValidNumber=Td,this.getDevices=Dc,this.uint8arrayToBase64=Mc,this.getSeq=g.getSeq,this.getReportSeq=g.getReportSeq}return Object.defineProperty(n.prototype,"networkState",{get:function(){var e;return(e=this.rtm)===null||e===void 0?void 0:e.stateCenter.networkState},set:function(e){var t;!((t=this.rtm)===null||t===void 0)&&t.stateCenter&&!Yi(e)&&(this.rtm.stateCenter.networkState=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMiniSdp",{get:function(){if(!this.zi&&!this.Di||!window.WebAssembly||!window.Worker)return!1;var e=this.settingConfig.getSetting("open_mini_sdp");return!!Li(e)&&(this.Oi.info("zc.c.ims setting: "+e),e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"streamCenter",{get:function(){return this.Ri},set:function(e){this.Ri=e},enumerable:!1,configurable:!0}),n.prototype.getRequestId=function(){return this.idName+"-"+(0,g.getSeq)()},n.prototype.getSignalCmdContent=function(e,t,i,r){var s={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:i};return r!=null&&(s.result=r),JSON.stringify(s)},n.prototype.actionListener=function(e){for(var t=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var s=["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate","playerRecvSEI","_remoteCameraStatusUpdate","_remoteMicStatusUpdate","_streamUpdated","_deviceError","networkQuality","exceptionUpdate","mixerSoundLevelUpdate","autoMixerSoundLevelUpdate"].includes(e);if(!s&&this.listenerList[e]){var o=this.reporter.createSpan(It.H,{key:Ea},{key:""},Mr);o.setAttributes({listener:e,listener_params:JSON.stringify(i)}),["deviceError","streamExtraInfoUpdate","publisherStateUpdate","playerStateUpdate","roomStreamUpdate"].includes(e)&&this.Oi.info("zc.al ".concat(e," ").concat(JSON.stringify(i))),o.end()}this.listenerList[e]&&this.listenerList[e].forEach(function(u){try{setTimeout(function(){u.apply(void 0,i)},0)}catch(m){t.Oi.error(_m+" "+e+" "+m)}})},n.prototype.getRoomByRoomID=function(e){return this.roomList.find(function(t){return t.roomID==e})},n.prototype.getPlayRoom=function(e){return this.roomList.find(function(t){return!!t.streamList.find(function(i){return i.stream_id==e})})},n.prototype.destroy=function(){this.Ri=null},n}(),Vo=Br,Qa="zb.sh.usi",Za=function(){function n(e,t,i,r,s){this.Oi=e,this._i=t,this.rtm=i,this.Ri=r,this.Ci=s,this.Ni=0,this.xi=0,this.Ti=0,this.Pi=!1,this.Mi=null,this.Bi=2e3,this.qi=5e3,this.roomID=s,this.logger=e,this.stateCenter=t}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"reporter",{get:function(){return this.ji},enumerable:!1,configurable:!0}),n.prototype._setCDNInfo=function(e,t){var i=t.urls_flv,r=t.urls_m3u8,s=t.urls_flv_plus,o=t.urls_m3u8_plus,u=t.urls_https_flv,m=t.urls_https_m3u8,f=t.urls_rtmp;e.urlFlv=In(i)?i[0]||"":bi(i)?i:"",e.urlHls=In(r)?r[0]||"":bi(r)?r:"",e.urlFlvPlus=In(s)?s[0]||"":bi(s)?s:"",e.urlHlsPlus=In(o)?o[0]||"":bi(o)?o:"",e.urlHttpsFlv=In(u)?u[0]||"":bi(u)?u:"",e.urlHttpsHls=In(m)?m[0]||"":bi(m)?m:"",e.urlRtmp=In(f)?f[0]||"":bi(f)?f:""},n.prototype.onStreamUpdated=function(e,t,i){},n.prototype.onStreamExtraInfoUpdated=function(e,t){},n.prototype.handleStreamStart=function(e,t){var i="zb.sh.hss";yi(this.Oi,i,"stream update"),this.room=t,e.body?(this.Bi=e.body.stream_list_hb_wait_merge_time||2e3,this.qi=e.body.stream_list_push_merge_timeout||5e3,this.Pi=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this._handleReconnectStream(e.body.stream_info),hi(this.Oi,i)):this.Oi.error(i+" server response wrong")},n.prototype.onPublishStateUpdate=function(e,t,i){},n.prototype._updateStreamInfo=function(e,t,i,r,s){var o,u,m=this;i===void 0&&(i=""),yi(this.Oi,Qa);var f=i,a=(o=this.room)===null||o===void 0?void 0:o.streamList.find(function(be){return be.stream_id===e});a||this.Oi.info(Qa+" stream not in room cmd "+t);var S={stream_id:e,extra_info:f};t!==2002&&t!==2003||(S.stream_sid=(a==null?void 0:a.stream_sid)||"");var F=JSON.stringify(S),ee={sub_cmd:t,stream_msg:F,third_token:(u=this.room)===null||u===void 0?void 0:u.token},ie=this.room;if(this._i.useNetAgent){var ae=this.rtm.liveRoomHandler.sendStreamUpdate(ee,function(be,Te){m.handleStreamUpdateRsp(be,e,t),r&&r(be,Te)},function(be,Te){var Pe=m.room,Ae=m.rtm.stateCenter.roomModulesList.find(function(Rt){return Rt.roomID===(Pe==null?void 0:Pe.roomID)}),Be=function(){return(Ae==null?void 0:Ae.isTryLogin())||(Ae==null?void 0:Ae.roomState)==="CONNECTING"},Ze=function(){m.Oi.warn(Qa+" resend stream update "+t),m._updateStreamInfo(e,t,i,r,s)};if(Pe&&(Ae!=null&&Ae.isLogin()||Be())&&be.code&&be.code==ii.code&&Pe.streamInfoList[e].seq==Te)setTimeout(function(){if(t==2001&&m._i.publishStreamList[e]&&m._i.publishStreamList[e].state==Me.update_info||t==2002)if(Be()){var Rt=function(At,vt){var Ft=function(){m.rtm.stateCenter.offListener("_roomStateUpdate",Rt)};At===(Pe==null?void 0:Pe.roomID)&&vt==="CONNECTED"?(Ze(),Ft()):At===(Pe==null?void 0:Pe.roomID)&&vt==="DISCONNECTED"&&Ft()};m.rtm.stateCenter.onListener("_roomStateUpdate",Rt)}else Ze();else s&&s(ii)},0);else if(be.body&&be.body.err_code){var st=m._i.getServerError(be.body.err_code,m._i.useNetAgent,be.body.err_message);[1011,1000002002].includes(st.code)&&(st=qt),s&&s(st,Te),t===We&&m.onPublishStateUpdate(bt,e,st)}},{sessionID:ie==null?void 0:ie.sessionID,roomID:ie==null?void 0:ie.roomID,roomSessionID:ie==null?void 0:ie.roomSessionID});[2001,2002].includes(t)&&(this.room.streamInfoList[e]={seq:ae})}fe(this.Oi,Qa,"cmd: "+t+", roomid: ".concat(ie==null?void 0:ie.roomID,", stream: ").concat(e))},n.prototype.updateStreamInfo=function(e,t,i,r,s){var o=this;if(i===void 0&&(i=""),this.room){var u;(t===2001||t===2002)&&(u=this.ji.createSpan(It.H,{key:dn,par:this.Ci},{key:""},Zt)).setAttributes({stream_update_type:Oc(t===2001?"stream added":t===2002?"stream deleted":""),stream_extra_info:Ca(i),stream_id:Yu(e)}),this._updateStreamInfo(e,t,i,function(m,f){[2001,2002].includes(t)&&(u.setAttributes({send_seq:f}),u&&u.end()),r&&r(m,f)},function(m,f){[2001,2002].includes(t)&&(u.setAttributes({send_seq:f}),o.ji.setError(u,m)),s&&s(m,f)})}else this.Oi.warn(Qa+" "+pt)},n.prototype.handleStreamUpdateRsp=function(e,t,i){var r,s,o,u;if(this.rtm.isDisConnect())this.Oi.warn("zb.sh.hsur not login");else if(e.body.err_code==0){this.Oi.info("zb.sh.hsur stream seq "+this.xi+" server seq "+e.body.stream_seq);var m=this.room;if(m){if(!((r=e==null?void 0:e.body)===null||r===void 0)&&r.token_remain_time&&(this._i.getRoomByRoomID((s=e==null?void 0:e.header)===null||s===void 0?void 0:s.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.Oi.error("zb.sh.hsur room no found ignore "+JSON.stringify((o=e.header)===null||o===void 0?void 0:o.room_id))),this._i.useNetAgent){this.handleStreamSync(e,t,i);var f=m.streamInfoList[t],a=(u=e.header)===null||u===void 0?void 0:u.seq;f&&f.seq===a?delete m.streamInfoList[t]:this.Oi.info("zb.sh.hsur ".concat(JSON.stringify(t)," udp stream info; rsp seq: ").concat(a,", cur seq: ").concat(f==null?void 0:f.seq," "))}}else this.Oi.info("hsur.0 room no found")}else this.Oi.error("zb.sh.hsur stream update error "+e.body.err_code)},n.prototype.handleStreamSync=function(e,t,i){if(this.handleStreamRsp(this.room,t,{stream_id:t,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,stream_nid:e.body.stream_nid,id_name:this._i.idName,nick_name:this._i.nickName},i),e.body.stream_seq>this.xi+1)return this.Oi.info("zb.sh.hss.1 seq diff server: "+e.body.stream_seq+" client "+this.xi),void this.fetchStreamList();this.xi=e.body.stream_seq;var r=this.room.streamList.find(function(s){return s.stream_id==t});r&&e.body.stream_ver>r.stream_ver&&this.fetchStreamList(t)},n.prototype.handleStreamRsp=function(e,t,i,r){var s=this._i.publishStreamList[t],o=e.streamList.find(function(m){return m.stream_id==t});if(this.Oi.info("hsur.0 cmd "+r+" "+!!o),o&&r===2002){var u=e.streamList.findIndex(function(m){return m.stream_id==t});this.Oi.info("hsur.0 stream index "+u),u>-1&&e.streamList.splice(u,1)}s?(s.state==Me.update_info&&(s.state=Me.publishing,r!==2001||o||e.streamList.push(i),this.onPublishStateUpdate(Vr,t,{code:0,message:""})),o&&o.stream_sid!==i.stream_sid&&(this.Oi.info("hsur.0 update sid. "+t+" origin:"+o.stream_sid+", new:"+i.stream_sid),o.stream_sid=i.stream_sid)):this.Oi.info("hsur.0 stream is not exist")},n.prototype.handleFetchStreamListRsp=function(e,t){var i,r,s,o,u,m,f="zb.sh.hfslr";if(yi(this.Oi,f,t),this.Pi=!1,this.ji.spanEnd({key:Vo.event,par:this.Ci},{stream_seq:Vo.stream_seq((i=e.body)===null||i===void 0?void 0:i.stream_seq),stream_size:Vo.stream_size((s=(r=e.body)===null||r===void 0?void 0:r.stream_info)===null||s===void 0?void 0:s.length),stream_list:Vo.stream_list((o=e.body)===null||o===void 0?void 0:o.stream_info),error:((u=e==null?void 0:e.body)===null||u===void 0?void 0:u.err_code)||(e==null?void 0:e.code),message:((m=e==null?void 0:e.body)===null||m===void 0?void 0:m.err_message)||(e==null?void 0:e.msg)}),e.body.err_code===0)if(this.xi!==e.body.stream_seq){if(this.xi>e.body.stream_seq)return this.Oi.error(f+" less seq"),void this.fetchStreamList(t);if(this.Ti>e.body.stream_seq)this.Oi.info(f+" less than max fetch stream seq ");else{var a=e.body.stream_info;this._i.useNetAgent&&t&&(a=e.body.stream_info.filter(function(S){return S.stream_id===t})),this.handleFullUpdateStream(e.body.stream_seq,a),fe(this.Oi,f)}}else this.Oi.info(f+" same seq");else this.Oi.info(f+" server error=",e.body.err_code)},n.prototype.syncPublishStreamList=function(){var e="zb.sh.spsl";yi(this.Oi,e);var t=function(s){var o=i._i.publishStreamList[s];if(o.state===Me.publishing){var u=i.room.streamList.findIndex(function(m){return m.stream_id===s});o.roomID===i.room.roomID&&u===-1&&(o.state=Me.update_info,i.updateStreamInfo(s,We,o.extra_info,function(m){}))}},i=this;for(var r in this._i.publishStreamList)t(r);fe(this.Oi,e)},n.prototype.handleFullUpdateStream=function(e,t){var i=this,r="zb.sh.hfus";yi(this.Oi,r),this.xi=e,this.Ti<e&&(this.Ti=e),this.Oi.debug(r+" server seq "+this.xi),t=t.filter(function(s){return s.stream_type!==1}),this._i.mergeStreamList(this._i.idName,this.room.streamList,t,function(s,o,u){s.length!==0&&(i.Oi.debug(r+" callback addstream"),i.onStreamUpdated(i.Ci,ht,i.makeCallbackStreamList(s))),o.length!==0&&(i.Oi.debug(r+" callback delstream"),i.onStreamUpdated(i.Ci,Pt,i.makeCallbackStreamList(o))),u.length!==0&&(i.Oi.debug(r+" callback updatestream"),i.onStreamExtraInfoUpdated(i.Ci,i.makeCallbackStreamList(u)))}),this.syncPublishStreamList(),fe(this.Oi,r)},n.prototype.handlePushStreamUpdateMsg=function(e){var t="zb.sh.hpsum";yi(this.Oi,t,JSON.stringify(e));var i=e.body.stream_info;if(i&&i.length!==0){if(i=i.filter(function(r){return r.stream_type!==1}),this.xi+1!==e.body.stream_seq)return yi(this.Oi,t,"updatestream 1"),void this.fetchStreamList();if(e.body.stream_seq<this.Ti)return yi(this.Oi,t,"updatestream 2"),void this.fetchStreamList();switch(this.xi=e.body.stream_seq,e.body.stream_cmd){case Je:this.Li(i);break;case ut:this.Ui(i);break;case re:this._handleUpdatedStreamList(i)}fe(this.Oi,t)}else this.Oi.info(t+", emtpy list")},n.prototype.handlePriPushStreamUpdateMsg=function(e){var t="zb.sh.hppsum";if(yi(this.Oi,t),e.body.streams_info&&e.body.streams_info.length!==0){if(e.body.streams_info.length+this.xi!==e.body.stream_seq)return yi(this.Oi,t,"updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.xi=e.body.stream_seq,e.body.stream_cmd){case Se:this.Li(e.body.streams_info);break;case Ke:this.Ui(e.body.streams_info);break;case we:this._handleUpdatedStreamList(e.body.streams_info)}fe(this.Oi,t)}else this.Oi.info(t+", emtpy list")},n.prototype.Li=function(e){var t="zb.sh.hasl";yi(this.Oi,t);for(var i,r=[],s=0;s<e.length;s++)if(e[s].anchor_id_name!=this._i.idName&&e[s].id_name!=this._i.idName&&e[s].user_id!==this._i.idName){i=!1;for(var o=0;o<this.room.streamList.length;o++)if(e[s].stream_id===this.room.streamList[o].stream_id){i=!0;break}i||r.push(e[s])}else this.Oi.debug("hdsl.0 have self stream added");if(r.length!==0){this.Oi.debug(t+" callback addstream");for(var u=0;u<r.length;u++){this.room.streamList.push(r[u]);var m=this.Ri.playerList[r[u].stream_id];m==null||m.player.setStreamAdd()}this.onStreamUpdated(this.Ci,ht,this.makeCallbackStreamList(r))}fe(this.Oi,t)},n.prototype.Ui=function(e){var t="zb.sh.hdsl";yi(this.Oi,t);for(var i=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this._i.idName&&e[r].id_name!=this._i.idName&&e[r].user_id!==this._i.idName){for(var s=this.room.streamList.length-1;s>=0;s--)if(e[r].stream_id===this.room.streamList[s].stream_id){!this._i.connectChanged&&this.room.streamList.splice(s--,1),i.push(e[r]);break}}else this.Oi.debug(t+" have self stream deleted");i.length!==0&&(this.Oi.debug(t+" callback delstream"),this.onStreamUpdated(this.Ci,Pt,this.makeCallbackStreamList(i))),hi(this.Oi,t)},n.prototype._handleUpdatedStreamList=function(e){var t="zb.sh.husl";yi(this.Oi,t);for(var i=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this._i.idName&&e[r].id_name!=this._i.idName&&e[r].user_id!==this._i.idName){for(var s=0;s<this.room.streamList.length;s++)if(e[r].stream_id===this.room.streamList[s].stream_id){e[r].extra_info!==this.room.streamList[s].extra_info&&(this.room.streamList[s]=e[r],i.push(e[r]));break}}else this.Oi.debug("hsul.0 have self stream updated");i.length!==0&&(this.Oi.debug(t+" callback updatestream"),this.onStreamExtraInfoUpdated(this.Ci,this.makeCallbackStreamList(i))),fe(this.Oi,t)},n.prototype.fetchStreamList=function(e){var t,i,r,s=this,o="zb.sh.fsl";yi(this.Oi,o);var u=this.ji.createSpan(It.H,{key:dn,par:this.Ci},{key:Vo.event,par:this.Ci},Vo.event,!0);return this.rtm.isDisConnect()?(this.Oi.info(o+" state error"),void this.ji.setError(u,Vo.error.NOT_LOGIN)):this.Pi?(this.Oi.info(o+" already doing"),void this.ji.setError(u,Vo.error.tt," already doing")):(this.Pi=!0,this.Oi.info(o+" send fetch request"),this._i.useNetAgent&&this.rtm.liveRoomHandler.getStreamList({},function(m){s.handleFetchStreamListRsp(m,e)},function(m){},{roomID:(t=this.room)===null||t===void 0?void 0:t.roomID,sessionID:(i=this.room)===null||i===void 0?void 0:i.sessionID,roomSessionID:(r=this.room)===null||r===void 0?void 0:r.roomSessionID}),void fe(this.Oi,o))},n.prototype._handleReconnectStream=function(e){var t,i,r,s,o,u,m,f="zb.sh.hrs";yi(this.Oi,f);var a=this.Ri.publisherList,S=this.Ri.playerList;this.Oi.info(f+" publish "+Object.keys(this.Ri.publisherList));var F=function(Ae){if(((i=(t=a[Ae])===null||t===void 0?void 0:t.room)===null||i===void 0?void 0:i.roomID)!==ee.Ci)return"continue";var Be=e.find(function(Rt){return Rt.stream_id==Ae}),Ze=Be&&!(Be.anchor_id_name===ee._i.idName||Be.id_name===ee._i.idName||Be.user_id===ee._i.idName);if(ee.Oi.info("zb.sh.hrs stream ".concat(Ae," ").concat(!!Be," ").concat(Ze," ").concat((r=a[Ae].publisher)===null||r===void 0?void 0:r.state)),((s=a[Ae].publisher)===null||s===void 0?void 0:s.state)!=le&&a[Ae].state!==L||Be&&!Ze){if((((o=a[Ae].publisher)===null||o===void 0?void 0:o.state)==$||a[Ae].state===W)&&!(!((m=(u=a[Ae])===null||u===void 0?void 0:u.retryStreamHandler)===null||m===void 0)&&m.maxTimer)&&e.find(function(Rt){return Rt.stream_id==Ae})){ee.updateStreamInfo(Ae,rt);for(var st=0;st<ee.room.streamList.length;st++)if(ee.room.streamList[st].stream_id==Ae){ee.room.streamList.splice(st--,1);break}}}else ee.updateStreamInfo(Ae,We,ee._i.publishStreamList[Ae].extra_info)},ee=this;for(var ie in a)F(ie);for(var ie in a)a[ie].room.roomID===this.Ci&&a[ie].isReDispatch&&(this.Oi.info(f+" "+ie+"retry dispatch"),(ae=a[ie].retryDispatchHandler).stopMaxTime(),ae.invalid(),ae.initStream(ie,a[ie].publishOption,!0),ae.active(0),a[ie].isReDispatch=!1);for(var ie in S){var ae;S[ie].room.roomID===this.Ci&&S[ie].isReDispatch&&(this.Oi.info(f+" "+ie+"retry dispatch"),(ae=S[ie].retryDispatchHandler).stopMaxTime(),ae.invalid(),ae.initStream(ie,S[ie].playOption,!1),ae.active(0),S[ie].isReDispatch=!1)}var be=this.Ri.stopedPlayerList,Te=function(Ae){if(be[Ae].roomID!==Pe.Ci)return"continue";var Be=Pe.Ri,Ze=be[Ae],st=Ze.playOption,Rt=Ze.playStream;Be.setPlayStateStart(Ae,st,Ze.isDataChannel);var At=Be.playerList[Ae].retryDispatchHandler;Be.playSuccessCallBackList[Ae]=be[Ae].sucCallBack?be[Ae].sucCallBack:function(vt){for(var Ft=Tt.querySelectorAll("video, audio"),Ct=0;Ct<Ft.length;Ct++)Rt&&Ft[Ct].srcObject===Rt&&(Rt.getTracks().forEach(function(Mt){return Rt.removeTrack(Mt)}),vt.clone().getTracks().forEach(function(Mt){return Rt.addTrack(Mt)}))},be[Ae].errCallBack&&(Be.playErrorCallBackList[Ae]=be[Ae].errCallBack),Be.onPlayStateUpdate(ke,Ae,{code:0,message:""}),At.stopMaxTime(),At.invalid(),At.initStream(Ae,st,!1),At.startMaxTime(),At.active(0),delete be[Ae]},Pe=this;for(var ie in be)Te(ie);hi(this.Oi,f)},n.prototype.makeCallbackStreamList=function(e){var t,i=[];if(this._i.useNetAgent&&this._i.appConfig&&(t=this._i.appConfig.media_config.play_config.resource_info.filter(function(be){return[O.CDN,O.DG].includes(be.resource_type)})),e&&e.length>0)for(var r=0;r<e.length;r++){var s=e[r].stream_id;if(t&&t.length)for(var o=0;o<t.length;o++){for(var u=t[o].resource_type==O.DG?"_plus":"",m=[],f=[],a=[],S=0;S<t[o].service_info.length;S++){var F=t[o].service_info[S],ee=F.protocol,ie=F.url_template.replace("{STREAM_NAME}",s);switch(ee){case U.FLV:m.push(ie);break;case U.HLS:f.push(ie);break;case U.RTMP:a.push(ie)}}e[r]["urls_flv"+u]=m,e[r]["urls_m3u8"+u]=f,e[r]["urls_rtmp"+u]=a}var ae={user:{userID:e[r].anchor_id_name||e[r].id_name,userName:e[r].anchor_nick_name||e[r].nick_name},extraInfo:e[r].extra_info,streamID:e[r].stream_id,roomID:"",urlFlv:"",urlFlvPlus:"",urlRtmp:"",urlHls:"",urlHlsPlus:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[r].stream_gid,closeType:e[r].close_type};this._setCDNInfo(ae,e[r]),i.push(ae)}return i},n.prototype.sendBizChannelRequestV3=function(e,t,i,r){var s=this,o=e.server,u=e.location,m=this.rtm.netAgent,f=this.room,a=void 0;t&&(a=JSON.stringify(t)),this.Oi.info(mh+" "+JSON.stringify(a)+" request "+JSON.stringify(e)),m.startHttpRequest({service:o,headers:[{"Token-Appid":this._i.appid+""},{"Token-Check":"true"},{"Token-Str":f==null?void 0:f.token},{"Token-Userid":this._i.idName},{"Token-Biztype":0}],body:t,idName:this._i.idName,method_no:2,ack:!1,location:u},function(S){s.Oi.info(mh+" rsp "+JSON.stringify(S.body));var F=S.status_code,ee=S.body;if(F===200){var ie=ee;if(bi(ee))try{ie=JSON.parse(ee)}catch(Pe){throw r(F),Pe}var ae=ie.code,be=ie.data,Te=void 0;try{Te=JSON.parse(be)}catch{Te=be}ae===0?i(Te):r(F,ae,Te)}else r(F)},function(S){r(-1,S==null?void 0:S.code,void 0,S)})},n.prototype.sendHttpPBRequest=function(e,t,i,r,s){var o,u;(o=this.rtm.netAgent)===null||o===void 0||o.startHttpRequest2({interfaceID:e.interfaceID,resID:e.resID||"",body:t,ack:!1,idName:this._i.idName,method:2,token:(u=this.room)===null||u===void 0?void 0:u.token,mode:this._i.testEnvironment?2:1,reduceRspHeaders:!0},function(m,f){i&&i(m,f)},function(m){r&&r(m)},null,{timeout:(s==null?void 0:s.timeout)||4e3,extras:{protoCmd:e.protoCmd}})},n.prototype.sendMixRequest=function(e,t,i,r,s){var o=this;s===void 0&&(s=2);var u=function(m,f){var a=m.status_code,S=m.body;if(a!==200)return s--,void(a===502&&s>0?o.sendMixRequest(e,t,i,r,s):r&&r(a,S));i&&i(S,f)};this.sendHttpPBRequest(e,t,function(m,f){u(m,f)},function(m){u(m)})},n.prototype.sendBizChannelRequestV2=function(e,t,i,r){var s=this,o=e.server,u=e.location,m=e.cmd,f=e.channel,a=this.rtm.netAgent,S=this.room,F=void 0,ee=t.timestamp;t&&(F=JSON.stringify(t));var ie={cmd:m,req_body:F,appid:this._i.appid,timestamp:ee||Math.ceil(new Date().getTime()/1e3),token:S==null?void 0:S.token,user_id:this._i.idName,channel:f||"media"};this.Oi.info(ph+" "+JSON.stringify(ie)+" request "+JSON.stringify(e)),a.startHttpRequest({service:o,headers:[],body:ie,idName:this._i.idName,method_no:2,ack:!1,location:u},function(ae){s.Oi.info(ph+" rsp "+JSON.stringify(ae.body));var be=ae.status_code,Te=ae.body;if(be===200){var Pe=Te;if(bi(Te))try{Pe=JSON.parse(Te)}catch(st){throw r(be),st}var Ae=Pe.err_code,Be=Pe.rsp_body,Ze=void 0;try{Ze=JSON.parse(Be)}catch{Ze=Be}Ae===0?i(Ze):r(be,Ae,Ze)}else r(be)},function(ae){r(-1,ae==null?void 0:ae.code,void 0,ae)})},n.prototype.sendRTMPRequest=function(e,t,i){var r=this.rtm.netAgent,s=this._i.appid,o=e.streamID,u="/v1/jsrtmp/dispatch/".concat(s,"/").concat(o,"/").concat(e.actionType,"/").concat(r.clientIP),m=this.room;r.startHttpRequest({service:1,headers:[{name:"Token-Appid",val:s+""},{name:"Token-Str",val:(m==null?void 0:m.token)||""},{name:"Token-Userid",val:this._i.idName},{name:"Token-Biztype",val:"2"}],body:{},idName:this._i.idName,method_no:1,ack:!1,location:u},function(f){t(f)},function(f,a,S){i(f)})},n.prototype._publishTarget=function(e,t,i){this.Oi.info("zb.sh.ptcall")},n.prototype.updateStreamExtraInfo=function(e,t,i,r){yi(this.Oi,"zb.sh.usei");var s=dt;this._i.publishStreamList[e]&&this._i.publishStreamList[e].state>=Me.update_info?(this._i.publishStreamList[e].extra_info=t,this.updateStreamInfo(e,s,t,i,r)):this._i.publishStreamList[e]&&this._i.publishStreamList[e].state===Me.tryPublish?(this._i.publishStreamList[e].extra_info=t,i({errorCode:0})):r(bd.error.Ii)},n.prototype.setStreamExtraInfo=function(e,t,i,r){this.updateStreamExtraInfo(e,t,i,r)},n.prototype._publishTargetWeb=function(e,t,i){},n.prototype.patchStreamList=function(e){var t=this;if(qi(e.body.stream_refresh)&&e.body.stream_refresh!==0)return this.Oi.info(Cl+" stream refresh "),void this.fetchStreamList();this.Oi.info(Cl+" stream seq "+this.xi+" "+JSON.stringify(this.Mi)),e.body.stream_seq>this.xi&&!this.Mi&&(this.Mi={},yi(this.Oi,Cl,"update stream "+this.xi+" server "+e.body.stream_seq),this.Fi&&clearTimeout(this.Fi),this.Fi=setTimeout(function(){t.handleMergeTimeout()},this.Bi)),this.Ni=e.body.stream_seq},n.prototype.getStreamSeq=function(){return this.xi},n.prototype.mergeStreamByStreamSeq=function(e,t,i){var r=this;this.Mi||(this.Oi.warn(hh+" new merge stream list "+this.xi+" server "+t),this.Mi={},this.Fi&&clearTimeout(this.Fi),this.Fi=setTimeout(function(){r.handleMergeTimeout()},this.qi)),this.Oi.info(hh+" ".concat(this.Mi," ").concat(e," ").concat(t," ").concat(i)),this.Mi[t]={cmd:e,streamList:i}},n.prototype.handleMergeTimeout=function(){if(this.Mi){var e=Object.keys(this.Mi).map(function(t){return+t}).sort(function(t,i){return t-i});e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.Ni?this.mergeStream(e):(this.Mi=null,this.fetchStreamList())}},n.prototype.mergeStream=function(e){var t=this;this.Oi.info(fh+" merge streamList "+this.xi+" streamSeqList "+e.join(","));var i=e[e.length-1],r=[];e.forEach(function(s){if(t.Mi&&t.Mi[s])switch(t.Mi[s].cmd){case Je:t.Mi[s].streamList.forEach(function(o){var u=r.findIndex(function(m){return m.stream_id==o.stream_id});u!==-1&&r.splice(u),r.push(o)});break;case ut:t.Mi[s].streamList.forEach(function(o){var u=r.findIndex(function(m){return m.stream_id==o.stream_id});u!==-1&&r.splice(u)});break;case re:t.Mi[s].streamList.forEach(function(o){var u=r.findIndex(function(m){return m.stream_id==o.stream_id});u!==-1&&r.splice(u),r.push(o)})}}),this.Mi=null,this.Oi.info(fh+" "+r),this.handleFullUpdateStream(i,r)},n.prototype.reset=function(){this.Ni=0,this.Mi=null,this.Fi&&(clearTimeout(this.Fi),this.Fi=void 0),this.Bi=2e3,this.qi=5e3},n}(),Sm=function(){function n(){this.handlerListMap={}}return n.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),!wn(t))throw new Error("Params callBack is not a Function");return this.handlerListMap[e].indexOf(t)==-1&&this.handlerListMap[e].push(t),!0},n.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter(function(i){return i!==t}):[],!0)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.handlerListMap[e]&&this.handlerListMap[e].forEach(function(r){try{r.apply(void 0,t)}catch(s){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(s))}})},n}(),iu=Sm,ru="zg_autoplay_wrapper";function bh(){return navigator.language.includes("zh")}var Em=function(){function n(){this.content='Media play failed. Click the "Resume"to resume.',this.dialogNode=null,this.bodyPosition="static";var e=Tt.createElement("style");e.innerHTML=".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500;}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block !important;}.".concat(ru,"{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px #988e8d;border:1px solid #d1cfcf;max-width:500px;}.").concat(ru," a{color:#2473E8;}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600;}.zg_autoplay_content{margin:8px 0;}.zg_autoplay_action_wrapper{width:100%;display:flex !important;align-items:center;justify-content:right;float:right;}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer;}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold;}.zg_autoplay_action_confirm:hover{opacity:0.9;}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px;}@media screen and (max-width:750px){.").concat(ru,"{width:80vw;}}"),Tt.head.appendChild(e),bh()&&(this.content="浏览器阻止音视频播放，请点击“恢复播放”。"),this.eManager=new iu}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.createDialog=function(){var e=Tt.createElement("template");e.innerHTML="<div class='zg_autoplay_mask'><div class='".concat(ru,"'><div class='zg_autoplay_header'>").concat(location.host,"</div><div class='zg_autoplay_content'>").concat(this.content,"</div><div class='zg_autoplay_action_wrapper'></div></div></div>").trim();var t=Tt.createElement("button");t.className="zg_autoplay_action_confirm",t.innerText=bh()?"恢复播放":"Resume",t.onclick=this.onConfirm.bind(this);var i=e.content.firstChild,r=i.querySelector(".zg_autoplay_action_wrapper");return r&&r.appendChild(t),i},n.prototype.onConfirm=function(e){e&&e.stopPropagation(),this.eManager.emit("allowPlay"),this.deleteDiaLog()},n.prototype.deleteDiaLog=function(){this.dialogNode&&(Tt.body.removeChild(this.dialogNode),this.dialogNode=null)},n.prototype.addDiaLog=function(){this.dialogNode=this.dialogNode||this.createDialog(),Tt.body.appendChild(this.dialogNode),this.dialogNode.onclick=this.onConfirm.bind(this)},n.prototype.on=function(e,t){return this.eManager.addEventHandler(e,t)},n.prototype.off=function(e,t){return this.eManager.removeEventHandler(e,t)},n.instance=null,n}(),yo=function(){return yo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},yo.apply(this,arguments)},Go=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Wo=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Sh=Qt(),Eh=/^(?=.*MicroMessenger)(?=.*HONOR).*$/.test(Sh||""),Ol=Em.getInstance(),nu,_o,kl=function(){function n(e,t,i){var r,s,o,u=this;this.previewer=t,this._video=null,this._audio=null,this.inited=!1,this.container=null,this.srcNode=null,this.options={enableVideoAutoplayDialog:!0,enableAudioAutoplayDialog:!0,clearLastFrame:!0,useAudioElement:!0},this.emitPlayFailed=(r=function(ae,be,Te){u.eventManager.emit("autoplayFailed",be,Te),(ae?u.options.enableVideoAutoplayDialog:u.options.enableAudioAutoplayDialog)?Ol.addDiaLog():Tt.body.addEventListener("mousedown",u.eventHandler.resumePlayByClickBody),u.Oi.warn("zc.zsv id:".concat(u.id," autoplay failed"))},(s=600)===void 0&&(s=100),function(){for(var ae=[],be=0;be<arguments.length;be++)ae[be]=arguments[be];var Te=this;clearTimeout(o),o=window.setTimeout(function(){r.apply(Te,ae)},s)}),this.videoMuted=!1,this.audioMuted=!1,this.eventHandler={visibilitychange:function(){var ae;Tt.hidden||u.audioMuted||!Ce()||(u.Oi.info("zc.zsv id:".concat(u.id," page show, recover audio")),u.options.useAudioElement&&u._audio?u._audio.srcObject=u._audio.srcObject:(u.Oi.info("zc.ac.rs id:".concat(u.id," page show")),u.ac.resume()),u._mountPlayer(u._audio,!0)),Tt.hidden||u.videoMuted||!Ce()||!((ae=u._video)===null||ae===void 0)&&ae.paused&&(u.Oi.info("zc.zsv id:".concat(u.id," page show, recover video")),u._mountPlayer(u._video,!0))},canPlayAudio:function(ae){u.eventManager.emit("canPlayAudio",ae)},canPlayVideo:function(ae){u.eventManager.emit("canPlayVideo",ae)},resumePlayByClickBody:function(){return Go(u,void 0,void 0,function(){return Wo(this,function(ae){switch(ae.label){case 0:return this.Oi.info("zc.zsv id:".concat(this.id," resume by click dom_body")),[4,this.resume()];case 1:return ae.sent(),Tt.body.removeEventListener("mousedown",this.eventHandler.resumePlayByClickBody),[2]}})})}},this.inited=!0,this.options=yo(yo({},this.options),i);var m=this.id="".concat(e.id),f=(t==null?void 0:t.streamId)||"";this.Oi.info("zc.sv.c id:".concat(m," streamID: ").concat(f));var a=Tt.createElement("div");a.id="zg-rtc-player_".concat(m),a.setAttribute("style","width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");var S=e.getVideoTracks()[0],F=e.getAudioTracks()[0],ee=oi(void 0,void 0,this.browser!=="safari");ee.id="zg-rtc-video_".concat(m),ee.setAttribute("style","width:100%;height:100%;object-fit:contain;"),ee.srcObject=new MediaStream,ee.addEventListener("canplay",this.eventHandler.canPlayVideo),S&&ee.srcObject.addTrack(S);var ie=Tt.createElement("audio");ie.id="zg-rtc-audio_".concat(m),ie.setAttribute("autoplay",""),ie.setAttribute("playsinline",""),ie.setAttribute("muted",""),ie.muted=!0,ie.srcObject=this.audioStream=new MediaStream,ie.addEventListener("canplay",this.eventHandler.canPlayAudio),F&&ie.srcObject.addTrack(F),typeof WeixinJSBridge=="object"&&typeof WeixinJSBridge.invoke=="function"&&WeixinJSBridge.invoke("getNetworkType",{},function(){u.Oi.info("zc.zsv id:".concat(u.id," weixin load media")),ie.load(),ee.load()}),this._wrapper=a,this._video=ee,this._audio=ie,this.eventManager=new iu,this.allowPlayListener=function(){u.resume()},Ol.on("allowPlay",this.allowPlayListener),Tt.addEventListener("visibilitychange",this.eventHandler.visibilitychange)}return Object.defineProperty(n.prototype,"ac",{get:function(){return this.previewer.ac},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"browser",{get:function(){return this.previewer._i.browser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Oi",{get:function(){return this.previewer.Oi},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLocal",{get:function(){return this.previewer instanceof vs},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_isMounted",{get:function(){return!!this._wrapper.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_hasAudio",{get:function(){var e,t;return((t=(e=this.audioStream)===null||e===void 0?void 0:e.getTracks()[0])===null||t===void 0?void 0:t.readyState)==="live"&&!this.audioMuted},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_hasVideo",{get:function(){var e,t,i;return!!(!((e=this._video)===null||e===void 0)&&e.parentNode)&&((i=(t=this._video.srcObject)===null||t===void 0?void 0:t.getTracks()[0])===null||i===void 0?void 0:i.readyState)==="live"},enumerable:!1,configurable:!0}),n.prototype.resume=function(e,t){return t===void 0&&(t=["audio","video"]),Go(this,void 0,void 0,function(){var i=this;return Wo(this,function(r){return this.Oi.info("zc.zsv resume call: ".concat(e,", kindList: ").concat(t,", id:").concat(this.id)),t.forEach(function(s){return Go(i,void 0,void 0,function(){var o,u,m=this;return Wo(this,function(f){switch(f.label){case 0:return u=s==="audio"?this._audio:this._video,((o=s==="audio")?this._hasAudio:this._hasVideo)?!o||this.options.useAudioElement?[3,1]:(this.Oi.info("zc.zsv resume id:".concat(this.id," ac: ")+this.ac.state),this.ac.resume(),[3,5]):[3,5];case 1:return e&&u?(u.srcObject=u.srcObject,[4,new Ge(function(a){var S=function(){u.removeEventListener("canplay",S),a(0)};u.addEventListener("canplay",S)})]):[3,3];case 2:f.sent(),f.label=3;case 3:return[4,u==null?void 0:u.play().catch(function(a){m.Oi.info("zc.zsv id:".concat(m.id," resume failed. err:")+a.message)})];case 4:f.sent(),f.label=5;case 5:return[2]}})})}),[2]})})},n.prototype.checkIfClearLastFrame=function(){return Go(this,void 0,void 0,function(){return Wo(this,function(e){switch(e.label){case 0:return this.options.clearLastFrame?[4,this.resume(!0,["video"])]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.play=function(e,t){t===void 0&&(t={}),this.Oi.info("zc.zsv play: ".concat(typeof e,", ").concat(JSON.stringify(t),", id:").concat(this.id," isLocal:").concat(this.isLocal?"1":"0 streamid:"+this.previewer.streamId,","));var i=(t=yo({},t)).enableAutoplayDialog;Li(i)&&(t.enableVideoAutoplayDialog=i,t.enableAudioAutoplayDialog=i,delete t.enableAutoplayDialog),this.playVideo(e,t),this.playAudio(t,!this.isLocal)},n.prototype.playVideo=function(e,t){t===void 0&&(t={}),this.Oi.info("zc.zsv.pv id:".concat(this.id," play: ").concat(typeof e,", ").concat(JSON.stringify(t)));var i=null;if(bi(e)?i=Tt.getElementById(e):il(e)&&(i=e),!i)throw"Execute `play` failed, container not exist";t&&"enableAutoplayDialog"in t&&(t.enableVideoAutoplayDialog=t.enableAutoplayDialog,delete t.enableAutoplayDialog),this.options=yo(yo({},this.options),t);var r=this.options,s=r.objectFit,o=r.mirror;this._video&&(s!==void 0&&(this._video.style.objectFit=s),Li(o)&&(this._video.style.transform=o?"rotateY(180deg)":"")),!i.contains(this._wrapper)&&i.appendChild(this._wrapper),this.container=i,this.videoMuted=!1,this._mountPlayer(this._video,!0)},n.prototype.playAudio=function(e,t){t===void 0&&(t=!0),this.Oi.info("zc.zsv.pa id:".concat(this.id," play: ").concat(JSON.stringify(e))),e&&"enableAutoplayDialog"in e&&(e.enableAudioAutoplayDialog=e.enableAutoplayDialog,delete e.enableAutoplayDialog),this.options=yo(yo({},this.options),e);var i=!0;if(this.browser==="safari"){var r=Sh.match(/Version\/([\d\.]+)/);r&&(r[1]!=="13.1.2"||this.options.useAudioElement||(i=!1))}i||(this.Oi.warn("zc.zsv.pa id:".concat(this.id," safari 13.1.2 cannot use audio ctx render.")),this.options.useAudioElement=!0);var s=t,o=this.options.muted;this._audio&&Li(o)&&(s=!o),this.audioMuted=!s,this._mountPlayer(this._audio,s)},n.prototype.stop=function(){this.Oi.info("zc.zsv stop id:".concat(this.id)),this.stopAudio(),this.stopVideo()},n.prototype.stopAudio=function(){this.Oi.info("zc.zsv.sa stop id:".concat(this.id)),this.audioMuted=!0,this._mountPlayer(this._audio,!1)},n.prototype.stopVideo=function(){var e;this.Oi.info("zc.zsv.sv stop id:".concat(this.id)),this._mountPlayer(this._video,!1);var t=(e=this._wrapper)===null||e===void 0?void 0:e.parentNode;t&&t.removeChild(this._wrapper)},n.prototype.setVideo=function(e,t){return t===void 0&&(t=!1),Go(this,void 0,void 0,function(){return Wo(this,function(i){switch(i.label){case 0:return[4,this.setTrack(!0,e,t)];case 1:return i.sent(),[2]}})})},n.prototype.setAudio=function(e,t){return t===void 0&&(t=!1),Go(this,void 0,void 0,function(){return Wo(this,function(i){switch(i.label){case 0:return[4,this.setTrack(!1,e,t)];case 1:return i.sent(),[2]}})})},n.prototype.setTrack=function(e,t,i){return i===void 0&&(i=!1),Go(this,void 0,void 0,function(){var r,s,o;return Wo(this,function(u){switch(u.label){case 0:return this.Oi.info("zc.zsv set id:".concat(this.id," track: ").concat(e,", ").concat(typeof t,", ").concat(i,", ").concat(t==null?void 0:t.readyState)),(r=e?this._video:this._audio)?(s=r.srcObject)?t?[3,1]:((o=s.getTracks()).forEach(function(m){s==null||s.removeTrack(m),r.srcObject=r.srcObject}),this.eventManager.emit("_trackChange",e?"video":"audio"),[3,5]):[2]:[2];case 1:if(!(t instanceof MediaStreamTrack))return[3,5];if((o=s.getTracks()).includes(t))return[3,5];if(o.forEach(function(m){s==null||s.removeTrack(m)}),s.addTrack(t),this.options.useAudioElement||this._initAC(!0),this.eventManager.emit("_trackChange",t.kind,t),this._mountPlayer(r,!(e?this.videoMuted:this.audioMuted)),!i)return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.resume(!0,[e?"video":"audio"])];case 3:return u.sent(),[3,5];case 4:return u.sent(),[3,5];case 5:return[2]}})})},n.prototype.setMirror=function(e){var t=this.options.mirror=!!e;this._video&&(this._video.style.transform=t?"rotateY(180deg)":"")},n.prototype.setVideoMuted=function(e){return this.Oi.info("zc.zsv id:".concat(this.id," mute video: ").concat(e)),this.videoMuted=e,this._mountPlayer(this._video,!e)},n.prototype.setAudioMuted=function(e){return this.Oi.info("zc.zsv id:".concat(this.id," mute audio: ").concat(e)),this.audioMuted=e,this._mountPlayer(this._audio,!e)},n.prototype.setVolume=function(e){if(this.Oi.info("zc.zsv id:".concat(this.id," volume: ").concat(e)),this._audio){var t=e>100?1:e/100;return this._audio.volume=t,this.gainNode&&(this.gainNode.gain.value=t),this._audio.volume==t}return!1},n.prototype.takeStreamSnapshot=function(e){var t=this._video;if(!t||!t.srcObject)return"";var i=Ii(this._video.videoWidth,this._video.videoHeight),r=i.getContext("2d");r&&r.drawImage(this._video,0,0,i.width,i.height);var s=i.toDataURL("image/"+(e==null?void 0:e.imageType)||0,e==null?void 0:e.quality),o="png";return e!=null&&e.imageType&&(o=["png","jpeg"].includes(e==null?void 0:e.imageType)?e==null?void 0:e.imageType:"png"),e!=null&&e.save&&i.toBlob(function(u){var m=window.URL.createObjectURL(u),f=Tt.createElement("a");f.style.display="none",f.href=m;var a=(e==null?void 0:e.fileName)||"snapshot"+Date.now();f.download=a+"."+o,Tt.body.appendChild(f),f.click(),setTimeout(function(){Tt.body.removeChild(f),window.URL.revokeObjectURL(m)},100)}),s},n.prototype._initAC=function(e){if(e===void 0&&(e=!1),this.srcNode?e&&(this.srcNode.disconnect(),this.srcNode=this.ac.createMediaStreamSource(this.audioStream)):this.srcNode=this.ac.createMediaStreamSource(this.audioStream),!this.gainNode){var t=this.gainNode=this.ac.createGain();this._audio&&(t.gain.value=this._audio.volume)}return this.srcNode.connect(this.gainNode),{gainNode:this.gainNode,srcNode:this.srcNode}},n.prototype._mountPlayer=function(e,t){var i,r,s=this;if(!e||!this._wrapper)return!1;var o=!this.options.useAudioElement,u=e.tagName==="VIDEO";if(t){if(!u&&o){e.muted=!0,e.pause(),e.remove(),this._initAC().gainNode.connect(this.ac.destination);var m="running";this.Oi.info("zc.zsv id:".concat(this.id," render use audio context: ")+this.ac.state),this.ac.state!==m&&this.ac.resume().then(function(){s.ac.state!==m&&s.emitPlayFailed(u,e)})}else if(((r=(i=e==null?void 0:e.srcObject)===null||i===void 0?void 0:i.getTracks()[0])===null||r===void 0?void 0:r.readyState)==="live"){var f=null,a=function(){e.oncanplay=null,f&&(clearTimeout(f),f=null),e.play().then(function(){Eh&&!u&&(s.Oi.info("zc.ac.rs id:".concat(s.id," honor suspend ac")),s.ac.resume()),s.Oi.info("zc.zsv id:".concat(s.id," render  ").concat(e.tagName," use element success"))}).catch(function(F){s.Oi.warn("zc.zsv id:".concat(s.id," ").concat(e.tagName," play() error: ").concat(F.message));var ee=s._isMounted,ie=s._hasVideo,ae=s._hasAudio,be=(F.message||"").includes("interrupted");ee&&!be&&(u&&ie||!u&&ae)&&s.emitPlayFailed(u,e,F)})};e.muted=!0,u||(this.gainNode&&this.gainNode.disconnect(),e.muted=!1,e.srcObject=e.srcObject),Eh&&!u&&(this.Oi.info("zc.ac.rs id:".concat(this.id," honor resume ac")),this.ac.suspend()),e.play().catch(function(){}),f=window.setTimeout(function(){a()},1e3),e.oncanplay=function(){a()},!e.parentNode&&u&&this._wrapper.appendChild(e)}}else if(e.muted=!0,e.remove(),e.pause(),!u){o&&this.gainNode&&this.gainNode.disconnect();var S=5*Math.random()+4;setTimeout(function(){!u&&!e.parentNode&&e.readyState>3&&e.load()},1e3*S)}return!0},n.prototype.on=function(e,t){return!!t&&this.eventManager.addEventHandler(e,t)},n.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},n.prototype.useAudioOut=function(e){var t;return Go(this,void 0,void 0,function(){var i;return Wo(this,function(r){switch(r.label){case 0:return i=(t=this._audio)===null||t===void 0?void 0:t.setSinkId,i?[4,i.call(this._audio,e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.destroy=function(){this.stop(),this._video&&(this._video.removeEventListener("canplay",this.eventHandler.canPlayVideo),this._video=null),this._audio&&(this._audio.removeEventListener("canplay",this.eventHandler.canPlayAudio),this._audio=null),Tt.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),Tt.body.removeEventListener("mousedown",this.eventHandler.resumePlayByClickBody),Ol.off("allowPlay",this.allowPlayListener),this.inited=!1,this.allowPlayListener=null},n.prototype.getAudioNodeAndStopRender=function(){var e=this._audio,t=this.options;e&&(e.muted=!0,e.remove(),e.pause());var i=this._initAC(!0).gainNode;return t.useAudioContext&&i.disconnect(),i},n}(),Tm=function(){function n(e,t){this.source=e,this.destination=t,this.audioNodeList=[],this.source.disconnect(),this.source.connect(this.destination)}return Object.defineProperty(n.prototype,"destinationNode",{get:function(){return this.destination},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[this.audioNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondToLastNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[this.audioNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[1]},enumerable:!1,configurable:!0}),n.prototype.pushBack=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e),e.connect(this.destination)):(this.source.disconnect(),this.source.connect(e),e.connect(this.destination)),this.audioNodeList.push(e)},n.prototype.popBack=function(){this.lastNode&&(this.lastNode.disconnect(),this.secondToLastNode?(this.secondToLastNode.disconnect(),this.secondToLastNode.connect(this.destination)):(this.source.disconnect(),this.source.connect(this.destination))),this.audioNodeList.pop()},n.prototype.pushFront=function(e){this.source.disconnect(),this.source.connect(e),e.connect(this.firstNode?this.firstNode:this.destination),this.audioNodeList.unshift(e)},n.prototype.popFront=function(){this.source.disconnect(),this.firstNode&&(this.firstNode.disconnect(),this.source.connect(this.secondNode?this.secondNode:this.destination)),this.audioNodeList.shift()},n.prototype.remove=function(e){var t=this.audioNodeList.indexOf(e);if(t!==-1){if(e.disconnect(),t-1>=0){var i=this.audioNodeList[t-1];i.disconnect(),i.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination)}else this.source.disconnect(),this.source.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination);this.audioNodeList.splice(t,1)}},n.prototype.isConnected=function(e){return this.audioNodeList.indexOf(e)!==-1},n.prototype.isEmpty=function(){return this.audioNodeList.length===0},n.prototype.replaceSource=function(e){this.source.disconnect(),e.connect(this.firstNode?this.firstNode:this.destination),this.source=e},n.prototype.replaceDestination=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e)):(this.source.disconnect(),this.source.connect(e)),this.destination=e},n}(),Th=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Rh=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Pl=function(){function n(){this.isFirstNode=!0,this.isLastNode=!0,this.hasAnother=!1}return n.prototype.connect=function(e){return Th(this,void 0,void 0,function(){return Rh(this,function(t){switch(t.label){case 0:return this.next=e,this.output?[4,e.setInput(this.output)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,e]}})})},n.prototype.disconnect=function(e){return Th(this,void 0,void 0,function(){return Rh(this,function(t){switch(t.label){case 0:return this.next?[4,this.next.setInput(null,e)]:[3,2];case 1:t.sent(),this.next=void 0,t.label=2;case 2:return[2]}})})},n.prototype.setNodePos=function(e,t,i){e!==void 0&&(this.isFirstNode=e),t!==void 0&&(this.isLastNode=t),typeof i=="boolean"&&(this.hasAnother=!i)},n}(),Ch=function(){function n(){}return n.createError=function(e,t){return{code:e.code,message:e.message+(t?" "+t:"")}},n}(),Rm=(nu=function(n,e){return nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},nu(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}nu(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),Cm=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},wm=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Im=Ch.createError,wh=function(n){function e(t,i){var r=n.call(this)||this;return r.track=t,r.streamCenter=i,r.isFirstNode=!1,r.isLastNode=!1,r}return Rm(e,n),Object.defineProperty(e.prototype,"output",{get:function(){return{track:this.track}},enumerable:!1,configurable:!0}),e.prototype.setInput=function(t){return Cm(this,void 0,void 0,function(){return wm(this,function(i){throw Im({code:-1,message:"Can not set track input to VideoSourceNode"})})})},e.prototype.process=function(){},e.prototype.destory=function(){this.track&&(this.streamCenter.trackUtils.stopTrack(this.track),this.track=null),this.next=null},e}(Pl),Qo=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Zo=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Om=function(){function n(e,t,i,r,s){this.source=e,this.destination=t,this.streamCenter=i,this.browser=r,this.preview=s,this.videoNodeList=[],this._vcMgr=void 0,this.source.connect(this.destination)}return Object.defineProperty(n.prototype,"vcMgr",{get:function(){return this._vcMgr},set:function(e){this._vcMgr||(this._vcMgr=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.videoNodeList[this.videoNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondToLastNode",{get:function(){return this.videoNodeList.length<2?null:this.videoNodeList[this.videoNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.videoNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"secondNode",{get:function(){return this.videoNodeList.length<2?null:this.videoNodeList[1]},enumerable:!1,configurable:!0}),n.prototype.pushBack=function(e){return Qo(this,void 0,void 0,function(){return Zo(this,function(t){switch(t.label){case 0:return this.lastNode?(this.lastNode.setNodePos(void 0,!1),[4,this.lastNode.connect(e)]):[3,3];case 1:return t.sent(),e.setNodePos(!1),[4,e.connect(this.destination)];case 2:return t.sent(),[3,6];case 3:return[4,this.source.connect(e)];case 4:return t.sent(),e.setNodePos(!0),[4,e.connect(this.destination)];case 5:t.sent(),t.label=6;case 6:return this.videoNodeList.push(e),[2]}})})},n.prototype.popBack=function(){return Qo(this,void 0,void 0,function(){return Zo(this,function(e){switch(e.label){case 0:return this.lastNode?[4,this.lastNode.disconnect()]:[3,7];case 1:return e.sent(),this.secondToLastNode?[4,this.secondToLastNode.disconnect()]:[3,4];case 2:return e.sent(),this.secondToLastNode.setNodePos(void 0,!0),[4,this.secondToLastNode.connect(this.destination)];case 3:return e.sent(),[3,7];case 4:return[4,this.source.disconnect()];case 5:return e.sent(),[4,this.source.connect(this.destination)];case 6:e.sent(),e.label=7;case 7:return this.videoNodeList.pop(),[2]}})})},n.prototype.pushFront=function(e){return Qo(this,void 0,void 0,function(){return Zo(this,function(t){switch(t.label){case 0:return[4,this.source.disconnect()];case 1:return t.sent(),this.firstNode&&e.setNodePos(void 0,void 0,!1),[4,this.source.connect(e)];case 2:return t.sent(),this.firstNode?(this.firstNode.setNodePos(!1),e.setNodePos(!0,!1),[4,e.connect(this.firstNode)]):[3,4];case 3:return t.sent(),[3,6];case 4:return e.setNodePos(!0,!0),[4,e.connect(this.destination)];case 5:t.sent(),t.label=6;case 6:return this.videoNodeList.unshift(e),[2]}})})},n.prototype.popFront=function(){return Qo(this,void 0,void 0,function(){return Zo(this,function(e){switch(e.label){case 0:return[4,this.source.disconnect()];case 1:return e.sent(),this.firstNode?[4,this.firstNode.disconnect()]:[3,6];case 2:return e.sent(),this.secondNode?(this.secondNode.setNodePos(!1),[4,this.source.connect(this.secondNode)]):[3,4];case 3:return e.sent(),[3,6];case 4:return[4,this.source.connect(this.destination)];case 5:e.sent(),e.label=6;case 6:return this.videoNodeList.shift(),[2]}})})},n.prototype.remove=function(e){return Qo(this,void 0,void 0,function(){var t,i,r;return Zo(this,function(s){switch(s.label){case 0:return(t=this.videoNodeList.indexOf(e))===-1?[3,13]:[4,e.disconnect()];case 1:return s.sent(),i=this.videoNodeList[t+1],t-1>=0?[4,(r=this.videoNodeList[t-1]).disconnect()]:[3,7];case 2:return s.sent(),this.lastNode==e?[3,4]:(r.setNodePos(void 0,!1),[4,r.connect(i)]);case 3:return s.sent(),[3,6];case 4:return r.setNodePos(void 0,!0),[4,r.connect(this.destination)];case 5:s.sent(),s.label=6;case 6:return[3,12];case 7:return[4,this.source.disconnect()];case 8:return s.sent(),this.lastNode==e?[3,10]:(i.setNodePos(!0),[4,this.source.connect(i)]);case 9:return s.sent(),[3,12];case 10:return[4,this.source.connect(this.destination)];case 11:s.sent(),s.label=12;case 12:this.videoNodeList.splice(t,1),s.label=13;case 13:return[2]}})})},n.prototype.isConnected=function(e){return this.videoNodeList.indexOf(e)!==-1},n.prototype.isEmpty=function(){return this.videoNodeList.length===0},n.prototype.getSourceTrack=function(){var e;return(e=this.source.output)===null||e===void 0?void 0:e.track},n.prototype.getDestinationTrack=function(){var e;return(e=this.destination.output)===null||e===void 0?void 0:e.track},n.prototype.replaceNewSourceByTrack=function(e,t,i){var r,s,o,u;return t===void 0&&(t=!0),Qo(this,void 0,void 0,function(){var m;return Zo(this,function(f){switch(f.label){case 0:return(((m=this.browser)==="firefox"||m==="safari")&&((r=this.vcMgr)===null||r===void 0?void 0:r.renderTrack)!==null&&e!==null&&((s=this.vcMgr)===null||s===void 0?void 0:s.renderTrack)!==e||m==="safari"&&(i==null?void 0:i.handleTrackType)===V.changeResolution)&&((o=this.preview.backgroundProcessor)===null||o===void 0||o.pauseRender(!0)),[4,(u=this.vcMgr)===null||u===void 0?void 0:u.checkInit(e,i)];case 1:return f.sent(),[4,this.replaceSource(new wh(e,this.streamCenter),t)];case 2:return f.sent(),[2]}})})},n.prototype.replaceSource=function(e,t){return t===void 0&&(t=!0),Qo(this,void 0,void 0,function(){return Zo(this,function(i){switch(i.label){case 0:return this.destination.setReplaceRemote(t),this.firstNode?[4,e.connect(this.firstNode)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,e.connect(this.destination)];case 3:i.sent(),i.label=4;case 4:return this.source=e,this.destination.setReplaceRemote(),[2]}})})},n.prototype.replaceDestination=function(e){return Qo(this,void 0,void 0,function(){return Zo(this,function(t){switch(t.label){case 0:return this.lastNode?[4,this.lastNode.disconnect()]:[3,3];case 1:return t.sent(),[4,this.lastNode.connect(e)];case 2:return t.sent(),[3,6];case 3:return[4,this.source.disconnect()];case 4:return t.sent(),[4,this.source.connect(e)];case 5:t.sent(),t.label=6;case 6:return this.destination=e,[2]}})})},n.prototype.destroy=function(){for(var e,t=0;t<this.videoNodeList.length;t++)this.videoNodeList[t].disconnect();this.videoNodeList=[],this.destination.destroy(),this.source.destory(),(e=this.vcMgr)===null||e===void 0||e.destroy()},n}(),km=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Al=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Dl=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Nl=Ch.createError,Pm=function(n){function e(t,i){var r=n.call(this)||this;return r.preview=t,r.browser=i,r.isFirstNode=!1,r.isLastNode=!1,r.track=null,r.replaceRemote=!0,r}return km(e,n),e.prototype.setReplaceRemote=function(t){t===void 0&&(t=!0),this.replaceRemote=t},e.prototype.setInput=function(t){return Al(this,void 0,void 0,function(){var i,r,s,o;return Dl(this,function(u){if((t==null?void 0:t.track)==null)return[2];if(!this.preview.localStream)throw Nl({code:-1,message:"preview haven't been inited."});return this.track=i=t==null?void 0:t.track,this.preview.localStream.getVideoTracks()[0]!==i&&(r=this.preview.localStream,(s=this.preview.zegoCaptureStream)!=null&&s.stream&&(r=s.stream),o=this.preview.Ri.getPublishList(r),this.replaceRemote&&o.length!==0?o.map(function(m){return m.publisher}).forEach(function(m){m&&m.previewer&&m.replacePublishedTrack(i,!0)}):this.preview.replacePreviewTrack(i,!0)),[2]})})},Object.defineProperty(e.prototype,"output",{get:function(){return{track:this.track}},enumerable:!1,configurable:!0}),e.prototype.connect=function(t){return Al(this,void 0,void 0,function(){return Dl(this,function(i){throw Nl({code:-1,message:"video destination node cann't connect any video node."})})})},e.prototype.disconnect=function(){return Al(this,void 0,void 0,function(){return Dl(this,function(t){throw Nl({code:-1,message:"video destination node cann't disconnect any video node."})})})},e.prototype.destroy=function(){this.track=null},e}(Pl),ms=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},gs=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Am=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};(function(n){n[n.inited=0]="inited",n[n.noInit=1]="noInit",n[n.initing=2]="initing"})(_o||(_o={}));var Dm=function(){function n(e,t,i){var r=this;this.Oi=e,this.Qi=t,this.customVC=i,this.canvasTrack=null,this.gl=null,this.lastRenderTime=0,this.animationFrameId=0,this._initState=_o.noInit,this.hasBeautyTask=!1,this.hasBackgroundTask=!1,this.backgroundLoop=null,this.eventHandler={visibilitychange:function(){if(Tt.hidden){var s=function(){return ms(r,void 0,void 0,function(){return gs(this,function(o){switch(o.label){case 0:return this.backgroundLoop=window.setTimeout(s,Math.floor(1e3/this.fps)),!Tt.hidden&&this.backgroundLoop?(clearTimeout(this.backgroundLoop),this.backgroundLoop=null,[2]):[4,this.renderAFrame()];case 1:return o.sent(),[2]}})})};s()}else r.backgroundLoop&&(clearTimeout(r.backgroundLoop),r.backgroundLoop=null)}},this.fps=15,this.renderEventManger=new iu}return Object.defineProperty(n.prototype,"initState",{set:function(e){this._initState=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inited",{get:function(){return this._initState===_o.inited},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"beautyAndBackgroundProcess",{get:function(){return this.hasBackgroundTask&&this.hasBeautyTask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderTrack",{get:function(){return this.Gi},enumerable:!1,configurable:!0}),n.prototype.init=function(e,t){var i;return ms(this,void 0,void 0,function(){var r;return gs(this,function(s){switch(s.label){case 0:if(this._initState!=_o.noInit)return[3,4];this._initState=_o.initing,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.renderVideo(e,t)];case 2:return s.sent(),this._initState=_o.inited,this.onInited(),[3,4];case 3:return r=s.sent(),this._initState=_o.noInit,this.onRenderFail(r),r.code===rs.code&&((i=this.Gi)===null||i===void 0?void 0:i.readyState)==="ended"&&this.resetVideo(),[3,4];case 4:return[2]}})})},n.prototype.checkInit=function(e,t){return ms(this,void 0,void 0,function(){return gs(this,function(i){switch(i.label){case 0:return!e||e.readyState!=="live"||this.Gi===e&&(t==null?void 0:t.handleTrackType)!==V.changeResolution?[3,2]:(this._initState=_o.noInit,[4,this.init(e,t)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.renderVideo=function(e,t){var i;return ms(this,void 0,void 0,function(){var r,s,o;return gs(this,function(u){switch(u.label){case 0:return this.Oi.info("".concat(Ga," call")),e===null?(this.Gi=e,[2]):this.Gi==e&&(t==null?void 0:t.handleTrackType)!==V.changeResolution?[2]:(this.Gi=e,this.videoEl||(this.videoEl=oi(),(i=this.videoEl)===null||i===void 0||i.setAttribute("style","display:none")),[4,this.getPlayingVideo(this.videoEl,e,t)]);case 1:if(u.sent(),r=e.getSettings(),s=r.width||this.videoEl.videoWidth,o=r.height||this.videoEl.videoHeight,r.frameRate&&this.fps!==r.frameRate&&(this.fps=r.frameRate,this.Oi.info(Ga+" set target fps: "+this.fps)),this.Oi.info(Ga+" video canvas render: width "+r.width+" height "+r.height),!s||!o)throw this.Oi.error(Ga+" resolution of track is wrong"),rs;return this.originWidth=s,this.originHeight=o,this.videoEl.setAttribute("width",s.toString()),this.videoEl.setAttribute("height",o.toString()),this.Qi!=="safari"||(t==null?void 0:t.handleTrackType)!==V.replaceNew&&(t==null?void 0:t.handleTrackType)!==V.changeResolution||this.resetCanvas(),this.initWegGl(),[2]}})})},n.prototype.getPlayingVideo=function(e,t,i){return ms(this,void 0,void 0,function(){var r,s,o=this;return gs(this,function(u){switch(u.label){case 0:return e.srcObject?((r=e.srcObject).getTracks().forEach(function(m){return r.removeTrack(m)}),r.addTrack(t),i==null||i.handleTrackType,(s=this.Qi)!=="safari"&&s!=="firefox"||(e.srcObject=r)):e.srcObject=new MediaStream([t]),[4,new Promise(function(m,f){var a=function(){e.videoWidth==0||e.videoHeight==0?f(rs):m(void 0)};if(e!=null&&e.paused){var S=null,F=function(){a(),S&&(clearTimeout(S),S=null),e&&e.removeEventListener("playing",F)};S=window.setTimeout(function(){S&&(clearTimeout(S),S=null),S=window.setTimeout(function(){o.Oi.warn(Ga+" video track error"),e&&e.removeEventListener("playing",F),f(rs)},1e3),e.play().catch(function(ee){console.error(ee)})},1e3),e&&e.addEventListener("playing",F),e&&e.play()}else e&&e.play(),setTimeout(function(){a()},1e3)})];case 1:return u.sent(),[2]}})})},n.prototype.resetVideo=function(){var e;this.destroyVideo(),this.videoEl=oi(),(e=this.videoEl)===null||e===void 0||e.setAttribute("style","display:none")},n.prototype.initWegGl=function(){var e;if(this.Oi.info("".concat(tu," call")),this.canvasEl||(this.Oi.info("".concat(tu," no canvas")),this.customVC?(this.canvasEl=document.getElementById("render_canvas"),this.canvasEl.width=this.originWidth,this.canvasEl.height=this.originHeight):this.canvasEl=Ii(this.originWidth,this.originHeight)),this.gl||(this.gl=(e=this.canvasEl)===null||e===void 0?void 0:e.getContext("webgl")),!this.gl)return this.Oi.warn("".concat(tu," no gl")),void this.handleInitError({code:1001});this.Oi.info("".concat(tu," end"))},n.prototype.resetCanvas=function(){this.canvasEl=null,this.gl=null,this.canvasTrack=null},n.prototype.getCanvasTrack=function(e){return this.Oi.info("".concat(Wa," get track")),this.canvasTrack&&!e||!this.canvasEl||(this.canvasTrack=this.canvasEl.captureStream(this.fps).getVideoTracks()[0]),this.canvasTrack},n.prototype.startRenderTask=function(){var e=this;this.Oi.info("".concat(Wa," start task"));var t=function(){return ms(e,void 0,void 0,function(){return gs(this,function(i){switch(i.label){case 0:return this.animationFrameId=requestAnimationFrame(t),[4,this.renderAFrame()];case 1:return i.sent(),[2]}})})};this.animationFrameId=requestAnimationFrame(t),Tt.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),Tt.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1)},n.prototype.stopRenderTask=function(){this.Oi.info("".concat(Wa," stop task")),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),Tt.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},n.prototype.renderAFrame=function(){return ms(this,void 0,void 0,function(){var e,t,i;return gs(this,function(r){return e=Date.now(),t=1e3/this.fps,(i=this.lastRenderTime?e-this.lastRenderTime:t)>=t&&(this.lastRenderTime=e-(i-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.videoEl&&this.videoEl.videoWidth>6&&this.videoEl.videoHeight>6&&this.renderEventManger.emit("renderFrame")),[2]})})},n.prototype.on=function(e,t){return!!t&&this.renderEventManger.addEventHandler(e,t)},n.prototype.off=function(e,t){return this.renderEventManger.removeEventHandler(e,t)},n.prototype.actionListener=function(e){for(var t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(t=this.renderEventManger).emit.apply(t,Am([e],i,!1))},n.prototype.setRenderTask=function(e,t){this.Oi.info("".concat(Wa," set task ").concat(e," ").concat(t)),t==="beauty"&&(this.hasBeautyTask=e),t==="background"&&(this.hasBackgroundTask=e),this.hasBeautyTask&&!this.hasBackgroundTask?this.startRenderTask():this.stopRenderTask()},n.prototype.resetResolution=function(e,t){this.originWidth=e,this.originHeight=t},n.prototype.handleInitError=function(e){throw e},n.prototype.onInited=function(){},n.prototype.onRenderFail=function(e){},n.prototype.onRenderSuc=function(){},n.prototype.destroyVideo=function(){this.videoEl&&(this.videoEl.pause(),this.videoEl.remove(),this.videoEl.srcObject=null,this.videoEl=null)},n.prototype.destroy=function(){this.Oi.info("".concat(Wa," dt")),this.destroyVideo(),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=null),this.canvasTrack=null,this.Gi=null,this.gl=null,this.stopRenderTask(),this.hasBeautyTask=!1,this.hasBackgroundTask=!1,this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null},n}();function Nm(n,e,t,i,r){t===void 0&&(t=1e3),i===void 0&&(i=200);var s=n.createAnalyser();s.fftSize=2048,e.connect(s);var o=null,u=0,m=s.fftSize,f=null,a=null,S=0;function F(){var ee=0;if(s.getFloatTimeDomainData){a||(a=new Float32Array(m)),s.getFloatTimeDomainData(a);for(var ie=0;ie<a.length;ie++)ee=Math.max(ee,Math.abs(a[ie]))}else{for(f||(f=new Uint8Array(m)),s.getByteTimeDomainData(f),ie=0;ie<f.length;ie++)ee=Math.max(ee,Math.abs(f[ie]-128));ee/=128}var ae=.005;i<=100?ae=.5:i<=200?ae=.3:i<=300?ae=.15:i<=500?ae=.07:i<=1e3&&(ae=.05),ee>(u*=ae)&&(u=ee),u>1&&(u=1);var be=Date.now();return S==0&&(S=be),(be-S>=t||i>=t)&&(S=be,r&&r(u)),i&&(o=window.setTimeout(function(){o&&clearTimeout(o),F()},i))}return t<100&&(t=100),i<100&&(i=100),t<i&&(i=t),i&&(o=window.setTimeout(function(){F()},i)),n.state!=="running"&&n.resume(),{analyzer:s,destroy:function(){s.disconnect(),o!==null&&(clearInterval(o),i=0,o=null),u=0,f=null,a=null},setInterval:function(ee){ee>30&&(t=ee)}}}var Ka,bo,$n,So,Ih,Oh,kh,Ph,Ah,Dh,Vs,Nh,Lh,Mh,xh,Uh,Bh,Pn,Ll=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Ml=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Gs="zc.smw",Lm=new Blob([`
class VolumeMeter extends AudioWorkletProcessor {
  constructor() {
    super();
    this.volume = 0;
    this.intervalTime = 1000;
    this.tick = this.intervalTime;
    this.isStop = false;
    this.port.onmessage = event => {
      const { data } = event;
      switch (data.name) {
        case "setIntervalTime":
          this.intervalTime = data.intervalTime;
          break;
        case "stop":
          this.isStop = true;
          break;
      }
    };
  }
  process(inputs) {
    const input = inputs[0];
    if (this.isStop) {
      return false;
    }
    if (input.length > 0) {
      const buffer = input[0];
      let maxVal = this.volume;
      for (let i = 0; i < buffer.length; i++) {
        if (maxVal < buffer[i]) {
          maxVal = buffer[i];
        }
      }
      this.volume = maxVal;
      this.tick -= buffer.length;
      if (this.tick < 0) {
        this.tick += (this.intervalTime / 1000) * sampleRate;
        this.port.postMessage({ volume: this.volume });
        this.volume = 0;
      }
    }
    return true;
  }
}
try {
  registerProcessor("meter", VolumeMeter);
} catch (error) {
  
}  
`],{type:"application/javascript"}),zh=function(){function n(){}return n.addModuleToContext=function(e,t){return Ll(this,void 0,void 0,function(){var i;return Ml(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t.info(Gs+" worklet addModule call"),[4,e.audioWorklet.addModule(URL.createObjectURL(Lm))];case 1:return r.sent(),t.info(Gs+" worklet addModule success"),this.isSuccess=!0,[2];case 2:return i=r.sent(),t.warn(Gs+" worklet addModule catch error. ".concat(i==null?void 0:i.message)),[3,3];case 3:return[2]}})})},n.isSuccess=!1,n}(),xl=function(){function n(e,t,i,r){i===void 0&&(i=1e3),r===void 0&&(r=200),this.Oi=e,this._i=t,this._updateInterval=i,this._sampleInterval=r,this._worklet=null,this._processor=null,this._analyzer=null,this.volume=0,this.onSoundLevelUpdate=function(s){}}return n.prototype.preload=function(e){return Ll(this,void 0,void 0,function(){return Ml(this,function(t){switch(t.label){case 0:return zh.isSuccess?[3,2]:[4,zh.addModuleToContext(e,this.Oi)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.initAudioWorklet=function(e,t){return Ll(this,void 0,void 0,function(){var i,r,s=this;return Ml(this,function(o){switch(o.label){case 0:if(this._worklet)return[3,5];o.label=1;case 1:if(o.trys.push([1,3,,4]),function(u){return!!wn(u.createAnalyser)}(e)&&this._i.settingConfig.getSetting("sound_level_api_type")!==Si.useWorklet)throw"use analyzer";return this.Oi.info(Gs+" use AudioWorklet. "),[4,this.preload(e)];case 2:return o.sent(),(i=this._worklet=new AudioWorkletNode(e,"meter")).port.onmessage=function(u){s.onSoundLevelUpdate&&s.onSoundLevelUpdate(u.data.volume||0)},t.connect(i).connect(e.destination),this.setInterval(this._updateInterval),[3,4];case 3:return r=o.sent(),this.Oi.info(Gs+" not use AudioWorklet. "+r),this._analyzer=Nm(e,t,this._updateInterval,this._sampleInterval,function(u){s.onSoundLevelUpdate&&s.onSoundLevelUpdate(u||0)}),[3,4];case 4:return[3,6];case 5:t.connect(this._worklet).connect(e.destination),o.label=6;case 6:return[2]}})})},n.prototype.getSrcSource=function(e,t){var i=t.getAudioTracks()[0],r=t.id,s=n.sourceList[r]||{},o=s.source,u=s._ac,m=s.trackid;return o&&u===e&&m===(i==null?void 0:i.id)||(o&&o.disconnect(),o=e.createMediaStreamSource(t),n.sourceList[r]={source:o,_ac:u=e,trackid:m=i.id}),o},n.prototype.replaceSrcSource=function(e,t){var i;n.sourceDisConnect(t);var r=this.getSrcSource(e,t);return!((i=this._analyzer)===null||i===void 0)&&i.analyzer&&r.connect(this._analyzer.analyzer),r},n.sourceDisConnect=function(e){var t=e.id,i=(n.sourceList[t]||{}).source;i&&(i.disconnect(),delete n.sourceList[t])},n.prototype.setInterval=function(e){var t=this._worklet;this._updateInterval=e,t&&t.port.postMessage({name:"setIntervalTime",intervalTime:e}),this._analyzer&&this._analyzer.setInterval(e)},n.prototype.destroy=function(){this._processor&&(this._processor.onaudioprocess=null,this._processor.disconnect()),this._analyzer&&(this._analyzer.destroy(),this._analyzer=null),this._worklet&&(this._worklet.port.postMessage({name:"stop"}),this._worklet.port.onmessage=null,this._worklet.port.close(),this._worklet.disconnect(),this.Oi.info(Gs+" close worklet")),this._worklet=null,this._processor=null},n.sourceList={},n}(),An=function(){return An=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},An.apply(this,arguments)},Ul=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Bl=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},vs=function(){function n(e,t,i,r,s){var o=this;this.Oi=e,this._i=t,this.Ri=i,this.previewType=r,this.onlyPreview=s,this.localStream=null,this.videoInfo={},this.rtcViewer=null,this.streamFromCanvas=!1,this.streamFromCanvasTrack=null,this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this._emptyAudioTrack=null,this.voiceProccessor=null,this.constraintsVideoKeys=["videoInput","videoQuality","facingMode","width","height","bitrate","frameRate","startBitrate","videoOptimizationMode","minBitrate","keyFrameInterval"],this.constraintsAudioKeys=["audioInput","channelCount","ANS","AGC","AEC"],this.lastTrackEndTime={audio:0,video:0},this.script=null,this.mic=null,this._audioTrack=null,this._videoTrack=null,this.cloneVideoTrack=null,this.originVideoTrack=null,this.originAudioTrack=null,this.activateSEIConfig=null,this.isAudioEnabled=!0,this.isVideoEnabled=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableDualStream=!1,this.lowStreamConfig={width:160,height:120,frameRate:15,bitRate:50},this.muteImage=null,this.syncVideoEnabled=!1,this.syncAudioEnabled=!1,this.hasMicTrack=!0,this.enableMicrophoneOnly=function(u,m){return o.localStream?(o.updatePublisherStreamMicStatus(u),o.micTrack?(o.micTrack.enabled=o.isAudioEnabled&&u,o.Oi.debug("zp.emo.2 call success"),!0):(o.Oi.info("zp.emo.2 no micTrack"),!0)):(o.Oi.error("zp.em.2 no localStream"),!1)},this.soundMeterWorklet=null,this.audioMixManager=null,this.volume=100,this.volumeFactor=1,this.logger=e,this.stateCenter=t,this.streamCenter=i,r&&(this.videoPreviewType=r,this.audioPreviewType=r)}return n.prototype.getEmptyAudioTrack=function(){if(!this._emptyAudioTrack){var e=this.Ri.ac.createMediaStreamDestination(),t=e?e.stream:null,i=this._emptyAudioTrack=t?t.getAudioTracks()[0]:null;this.Oi.info("zp.geat "+"empty audio id: ".concat(i==null?void 0:i.id))}return this._emptyAudioTrack},Object.defineProperty(n.prototype,"audioTrack",{get:function(){var e;return this._audioTrack||((e=this.localStream)===null||e===void 0?void 0:e.getAudioTracks()[0])||null},set:function(e){this._audioTrack=e,this.bindAudioTrackEvent(e)},enumerable:!1,configurable:!0}),n.prototype.checkAudioExceptionEnded=function(e){e&&(this.Ri.trackUtils.isTrackStopBySDK(e)||(this._i.actionListener("_deviceError",hc,e.label,"micro"),this._i.actionListener("deviceError",hc,e.label)))},n.prototype.checkVideoExceptionEnded=function(e){e&&(this.Ri.trackUtils.isTrackStopBySDK(e)||(this._i.actionListener("_deviceError",fc,e.label,"camera"),this._i.actionListener("deviceError",fc,e.label)))},n.prototype.bindAudioTrackEvent=function(e){var t=this;e==null||e.addEventListener("ended",function(){t.logger.info("zp.pv.adt audio track ended"),t.lastTrackEndTime.audio=performance.now(),t.checkAudioExceptionEnded(e)})},n.prototype.bindVideoTrackEvent=function(e){var t=this;e==null||e.addEventListener("ended",function(){t.logger.info("zp.pv.vdt video track ended"),t.lastTrackEndTime.video=performance.now(),t.checkVideoExceptionEnded(e)})},Object.defineProperty(n.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||((e=this.localStream)===null||e===void 0?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack=e,this.bindVideoTrackEvent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoNodeQueue",{get:function(){if(!this._videoNodeQueue){if(!this._videoTrack)throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");var e=new wh(this._videoTrack,this.Ri),t=new Pm(this,this.stateCenter.browser);this._videoNodeQueue=new Om(e,t,this.Ri,this.stateCenter.browser,this),this.vcMgr&&(this._videoNodeQueue.vcMgr=this.vcMgr)}return this._videoNodeQueue},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVideoNodeQueueEnabled",{get:function(){return this._videoNodeQueue&&!this._videoNodeQueue.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ac",{get:function(){return this.Ri.ac},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"acMgr",{get:function(){return this.Ri.acMgr},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"vcMgr",{get:function(){if(!this._vcMgr){if(!this._videoTrack)throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");this._vcMgr=new Dm(this.logger,this.stateCenter.browser,this.streamCenter.isCustomVC),this._videoNodeQueue&&(this._videoNodeQueue.vcMgr=this.vcMgr)}return this._vcMgr},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containBackgroundProcess",{get:function(){var e=this;if(this.previewType==="compositing"){var t=this.inputStreamOptions.some(function(i){if(i.stream){var r=e.Ri.checkPreview(i.stream);return r==null?void 0:r.isBackgroundBlur}});return t}return!!this.isBackgroundBlur},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"micTrack",{get:function(){return this.hasMicTrack&&this.audioPreviewType==="camera"&&this.audioTrack||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVideoEffectStarting",{get:function(){return!!this.videoEffect&&this.videoEffect.isStarting},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isVideoEffectEnabled",{get:function(){return!!this.videoEffect&&this.videoEffect.enabled},enumerable:!1,configurable:!0}),n.prototype.getMediaStreamConstraints=function(e,t){var i={audio:null,video:null};if(i.audio=!0,i.video={width:this._i.settingConfig.getSetting("camera_width")||640,height:this._i.settingConfig.getSetting("camera_height")||480,frameRate:this._i.settingConfig.getSetting("camera_framerate")||15,bitRate:this._i.settingConfig.getSetting("camera_video_bitrate")},e.audio){var r=this._i.settingConfig.getCloudSettingScenario(this._i.scenario);this.logger.info("zp.gmsc.2 audio cloud config "+JSON.stringify(r));var s=r.ANS,o=r.AGC,u=r.AEC;i.audio={},e.audioInput&&e.audioInput!=="undefined"&&(i.audio.deviceId={exact:e.audioInput}),i.audio.noiseSuppression=s,i.audio.autoGainControl=o,i.audio.echoCancellation=u,Li(e.ANS)&&(i.audio.noiseSuppression=e.ANS),Li(e.AGC)&&(i.audio.autoGainControl=e.AGC),Li(e.AEC)&&(i.audio.echoCancellation=e.AEC),i.audio.channelCount=qi(e.channelCount)?e.channelCount:1}else e.audio===!1&&(i.audio=!1);if(e.video){var m=640,f=480,a=15,S=this._i.settingConfig.getSetting("camera_video_bitrate");if(e.videoQuality===1?(m=C.width,f=C.height,a=C.frameRate,S=C.bitRate):e.videoQuality===2?(m=q.width,f=q.height,a=q.frameRate,S=q.bitRate):e.videoQuality===3?(m=ue.width,f=ue.height,a=ue.frameRate,S=ue.bitRate):e.videoQuality===4?(m=e.width||640,f=e.height||480,a=e.frameRate||15,S=e.bitRate||this._i.settingConfig.getSetting("camera_video_bitrate")):this.Oi.info("zp.gmsc.2 use default"),t&&!e.videoQuality&&(e.width&&(m=e.width),e.height&&(f=e.height),e.frameRate&&(a=e.frameRate),e.bitRate&&(S=e.bitRate)),e.horizontal===!1){var F=f;f=m,m=F}e.isSwitch===!0&&(F=f,f=m,m=F),i.video={width:m,height:f,frameRate:a,bitRate:S},e.facingMode!=null?i.video.facingMode=e.facingMode:e.videoInput&&e.videoInput!="undefined"&&(i.video.deviceId={exact:e.videoInput}),this.Oi.info("zp.gmsc.2 width: "+m+" height: "+f+" rate: "+a)}else e.video===!1&&(e.audioBitrate&&(i.video={}),i.video=!1);return i},n.prototype.addTrackListener=function(e){var t=this;e.addEventListener("ended",function(){Jr(e,t.Oi,"zc.tk.end")}),e.addEventListener("mute",function(){Jr(e,t.Oi,"zc.tk.mute")}),e.addEventListener("unmute",function(){Jr(e,t.Oi,"zc.tk.unmt")})},n.prototype.startPreview=function(e,t,i,r){var s,o;return Ul(this,void 0,void 0,function(){var u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st,Rt,At,vt=this;return Bl(this,function(Ft){return this.Oi.info("zp.sv.2 called "+JSON.stringify(e)),this.mediaStreamConfig=e,e.video===!1&&this.deleteConstraints(this.mediaStreamConfig,this.constraintsVideoKeys),e.audio===!1&&this.deleteConstraints(this.mediaStreamConfig,this.constraintsAudioKeys),this.Oi.info("zp.sv.2 store "+JSON.stringify(this.mediaStreamConfig)),navigator.mediaDevices===void 0||navigator.mediaDevices.getUserMedia==null?(i&&i(Ai.error.it),[2]):(u=function(Ct){t(Ct)},Ar(e.source)?(m=e.source.getVideoTracks(),f=m.length>0?m[0].getSettings():{width:0,height:0,frameRate:0},this.Oi.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.localStream=e.source,this.initMediaTrack(e.source),this.videoInfo={width:f.width,height:f.height,frameRate:f.frameRate,bitRate:e.bitRate||this._i.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this._i.settingConfig.getSetting("bitrate_mode"),minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval,channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3},u&&u(this.localStream),[2]):us(e.source)?((a=this.captureStream(e.source,e))?(this.videoInfo.bitRate=e.bitRate||this._i.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(a),u&&u(a)):i&&i(Ai.error.it),[2]):(S=this.getMediaStreamConstraints(e),this.videoInfo=An(An({},S.video),{keyFrameInterval:e.keyFrameInterval}),this.videoInfo?(this.videoInfo.audioBitrate=1e3*e.audioBitrate||48e3,this.videoInfo.startBitrate=e.startBitrate||this._i.settingConfig.getSetting("bitrate_mode"),this.videoInfo.minBitrate=e.minBitrate,this.videoInfo.keyFrameInterval=e.keyFrameInterval):e.audioBitrate&&(this.videoInfo={audioBitrate:1e3*e.audioBitrate||48e3}),S.audio&&(F=this._i.settingConfig.getCloudSettingScenario(this._i.scenario,!0),ie=F.channelCount,ae=F.AEC,be=F.AGC,Te=F.ANS,this.logger.info("zp.sv.2 scenario ".concat(ee=F.audioBitrate," ").concat(ie," ").concat(ae," ").concat(be," ").concat(Te)),ee&&(this.videoInfo.audioBitrate=1e3*ee),ie&&(S.audio.channelCount=ie,this.videoInfo.channelCount=ie),Li(ae)&&(this.logger.info("zp.sv.2 setting AEC "+ae),this.mediaStreamConfig.AEC=S.audio.echoCancellation=ae),Li(be)&&(this.logger.info("zp.sv.2 setting AGC "+be),this.mediaStreamConfig.AGC=S.audio.autoGainControl=be),Li(Te)&&(this.logger.info("zp.sv.2 setting ANS "+Te),this.mediaStreamConfig.ANS=S.audio.noiseSuppression=Te)),S.video instanceof Object&&(S.video.width=this._i.settingConfig.getSetting("camera_width",!0)||S.video.width,S.video.height=this._i.settingConfig.getSetting("camera_height",!0)||S.video.height,S.video.frameRate=this._i.settingConfig.getSetting("camera_framerate",!0)||S.video.frameRate),this.mediaStreamConfig.video=!!S.video,this.mediaStreamConfig.audio=!!S.audio,e.unlimitedCaptureResolution&&S.video.width&&(S.video.width={ideal:4096},S.video.height={ideal:2160},this.Oi.info("zp.sv.2 ","capture max resolution of camera")),this.logger.info("zp.sv.2 constraints ",JSON.stringify(S)),r.setAttribute("preview_conf",Ai.preview_conf(S)),Pe=function(Ct){vt.localStream=Ct,vt.previewSuc=!0,vt.initMediaTrack(Ct),vt.videoInfo&&(vt.videoInfo.channelCount=e.channelCount||(vt.audioTrack&&vt.audioTrack.getSettings?vt.audioTrack.getSettings().channelCount:1)),u&&u(Ct)},Ae=function(Ct){if(i){var Mt=Ai.error.ot;Mt.message=Mt.message+" "+Ct.name+" "+Ct.message,Ct.name==="NotAllowedError"||Ct.name==="SecurityError"?(Mt=An({},Ai.error.ut)).message=Ct.name+": "+Mt.message:Ct.name==="NotReadableError"?(Mt=An({},Ai.error.ht)).message=Ct.name+": "+Mt.message:Ct.name==="OverconstrainedError"&&((Mt=An({},Ai.error.ct)).message=Ct.name+": "+Mt.message+(Ct.constraint?". such as "+Ct.constraint:"")),i(Mt)}},Ze=S.video===!1,st=!1,Rt=!1,(Be=S.audio===!1)&&(st=Yi((s=S.video)===null||s===void 0?void 0:s.videoInput)),Ze&&(Rt=Yi((o=S.audio)===null||o===void 0?void 0:o.audioInput)),At=function(Ct,Mt,Gt){vt.Oi.info("zp.sv.2 recapture call"),Dc(function(li){var kt=li.cameras,ti=li.microphones;if(vt.Oi.info("zp.sv.2 recapture devices "+kt.length+" "+ti.length),Gt==="video"){if(!(kt.length>0))return void Ae(Mt);var vi=kt[0].deviceID;vt.Oi.info("zp.sv.2 recapture video "+vi),Ct.video.deviceId={exact:vi}}else if(Gt==="audio"){if(!(ti.length>0))return void Ae(Mt);var Lt=ti[0].deviceID;vt.Oi.info("zp.sv.2 recapture audio "+Lt),Ct.audio.deviceId={exact:Lt}}navigator.mediaDevices.getUserMedia(Ct).then(function(ui){vt.Oi.info("zp.sv.2 recapture success"),Pe(ui)}).catch(function(ui){Ae(Mt)})},function(li){vt.Oi.warn("zp.sv.2 recapture getDevices err:",li.message),Ae(Mt)})},navigator.mediaDevices.getUserMedia(S).then(function(Ct){Ct.getTracks().forEach(function(Mt){Jr(Mt,vt.Oi,"zp.sv.2"),vt.addTrackListener(Mt)}),vt.Oi.info("zp.sv.2 success"),Pe(Ct)},function(Ct){if(vt.Oi.info("zp.sv.2 failed ",Ct.name," ",Ct.message),Ct.name==="NotFoundError"){var Mt=Be&&st||Ze&&Rt,Gt=Be?"video":"audio";vt.Oi.info("zp.sv.2 failed "+Mt+" "+Gt),Mt?At(S,Ct,Gt):Ae(Ct)}else Ae(Ct)}),[2]))})})},n.prototype.captureStream=function(e,t){if(!e)return this.Oi.info("zp.cs.2 no local video"),null;var i;if(e.captureStream)i=e.captureStream(),this.Oi.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.Oi.info("zp.cs.2 don't support"),null;i=e.mozCaptureStream(),this.Oi.debug("zp.cs.2 mozCaptureStream")}return i.getTracks().length==0?(this.Oi.error("zp.cs.2 external capture tracks no found"),null):(this.localStream=i,this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:t.bitRate||this._i.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this._i.settingConfig.getSetting("bitrate_mode"),minBitrate:t.minBitrate,keyFrameInterval:t.keyFrameInterval},this.Oi.debug("zp.cs.2 called success"),this.localStream)},n.prototype.stopPreview=function(){var e,t,i,r=this;if(this.Oi.info("zp.sv.2.1 called"),this.localStream){var s=this.rtcViewer;s&&s.destroy(),this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),(e=this._i.backgroundBlurManager)===null||e===void 0||e.releaseMap(this.localStream),this.backgroundProcessor&&(this.backgroundProcessor.release(),this.backgroundProcessor=null),this.streamCompositor&&(this.streamCompositor=null),this._videoNodeQueue&&this.videoNodeQueue.destroy(),this.Ri.trackUtils.stopTrack(this.cloneVideoTrack),this.cloneVideoTrack=null,this.muteImageAnID&&cancelAnimationFrame(this.muteImageAnID),this.stopSoundLevel(),this.Ri.trackUtils.stopTrack(this.originVideoTrack),this.originVideoTrack=null,this.Ri.trackUtils.stopTrack(this.originAudioTrack),this.originAudioTrack=null,this.Ri.trackUtils.stopTrack(this.videoTrack),this.videoTrack=null,this.Ri.trackUtils.stopTrack(this.audioTrack),this.audioTrack=null,xl.sourceDisConnect(this.localStream),(t=this.audioMixManager)===null||t===void 0||t.stopAudioManager(),!this.zegoCaptureStream&&this.localStream.getTracks().forEach(function(o){r.Ri.trackUtils.stopTrack(o)}),this.localStream=null,!this.zegoCaptureStream&&((i=this.lowStream)===null||i===void 0||i.getTracks().forEach(function(o){return r.Ri.trackUtils.stopTrack(o)})),this.lowStream=void 0,this.videoInfo={}}},n.prototype.enableMicrophone=function(e,t){return!1},n.prototype.updatePublisherStreamMicStatus=function(e){var t=this;if(this.localStream){var i=this.streamCenter.getPublishList(this.localStream).map(function(r){return r.publisher});i.length&&i.forEach(function(r){r.sendStreamStatus(r.camera_status,t.isAudioEnabled&&e?0:2)})}},n.prototype.updatePublisherStreamCameraStatus=function(e){if(this.localStream){var t=this.streamCenter.getPublishList(this.localStream).map(function(i){return i.publisher});t.length&&t.forEach(function(i){i.sendStreamStatus(e?0:2,i.mic_status)})}},n.prototype.enableCamera=function(e,t,i){return!1},n.prototype.enableCameraCapturing=function(e){return Ul(this,void 0,void 0,function(){return Bl(this,function(t){return[2,!1]})})},n.prototype.stopCaptureVideo=function(){return new Ge(function(e){return e()})},n.prototype.startSoundLevel=function(){var e;if(this.localStream&&this.localStream.getAudioTracks().length!=0){(e=this.soundMeterWorklet)===null||e===void 0||e.destroy();var t=this.Ri.getCloudSoundInterval();try{var i=this,r=this.Ri.createSoundLevel(this.ac,this.localStream,this.Ri.soundLevelInterval,t,function(o){i.soundLevel=100*o}),s=r.mic;this.soundMeterWorklet=r.soundMeter,this.mic=s}catch(o){this.Oi.error(Vc+" get sound level failed "+o)}}},n.prototype.stopSoundLevel=function(){var e;this.soundLevel=0,(e=this.soundMeterWorklet)===null||e===void 0||e.destroy(),this.soundMeterWorklet=null,this.mic=null},n.prototype.restartSoundLevel=function(){this.Ri.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},n.prototype.setBeautyEffect=function(e,t){return Ul(this,void 0,void 0,function(){return Bl(this,function(i){return[2]})})},n.prototype.replacePreviewTrack=function(e,t,i){},n.prototype.updateZegoStreamCaptureTrack=function(e){var t=this.zegoCaptureStream;if(t){var i=e.kind=="video"?t.originVideoStream:t.originAudioStream;if(i){var r=this.Ri.checkPreview(i);this.Oi.info("zsc.uzsct replace zego preivew"),r==null||r.replacePreviewTrack(e)}}},n.prototype.createLowStream=function(){var e,t,i,r,s,o=(e=this.localStream)===null||e===void 0?void 0:e.getVideoTracks()[0];if(o){var u=o.getSettings().height,m=o.getSettings().width,f=Qt(),a=et(),S=f.indexOf("Android")>-1||f.indexOf("Adr")>-1;this.Oi.info("zp.cls w: "+m+" h: "+u+" "+S+" "+a);var F=qi((t=this.videoInfo)===null||t===void 0?void 0:t.width)&&qi((i=this.videoInfo)===null||i===void 0?void 0:i.height)&&u==this.videoInfo.width&&m==this.videoInfo.height;if(a&&S&&F){var ee=u;u=m,m=ee}var ie=u&&m?u/m:1;try{var ae,be=this.lowStreamConfig,Te=be.width,Pe=be.frameRate;if(ae=Math.round(ie*this.lowStreamConfig.width),this.Oi.info("zp.cls lw: "+Te+" lh: "+ae),this._i.browser==="firefox")this.lowStream=this.getStreamThroughCanvas(this.localStream,{w:Te,h:ae,fps:Pe});else{this.lowStream=(r=this.localStream)===null||r===void 0?void 0:r.clone();var Ae=(s=this.lowStream)===null||s===void 0?void 0:s.getVideoTracks()[0];Ae==null||Ae.applyConstraints({width:Te,height:ae,frameRate:Pe})}}catch(Be){this.Oi.error("zp.cls "+Be)}}},n.prototype.initAudioNodeQueue=function(e){if(!this.audioTrack||!this.localStream)return!1;var t=this.createSrcNode(this.audioTrack),i=this.createDestNode(this.localStream);return this.audioNodeQueue=new Tm(t,i),!0},n.prototype.createSrcNode=function(e,t,i){var r;t===void 0&&(t=!1),i===void 0&&(i=!1);var s=e||this.audioTrack;if(s===((r=this.destNode)===null||r===void 0?void 0:r.stream.getAudioTracks()[0])&&(this.Oi.info("zp.pv.csn use empty track"),s=this.getEmptyAudioTrack()),this.srcNode&&!i){if(!t)return this.srcNode;this.srcNode.disconnect(),this.Oi.info("zp.pv.csn recreate src")}var o=new MediaStream;s&&o.addTrack(s);var u=this.ac.createMediaStreamSource(o);return i||(this.srcNode=u),this.Oi.info("zp.pv.csn "+"create src audio id: ".concat(s==null?void 0:s.id,", ").concat(s==null?void 0:s.label,",i")),u},n.prototype.isOriginEmptyTrack=function(){return!this.audioTrack||this._emptyAudioTrack===this.audioTrack},n.prototype.createDestNode=function(e){var t;if(this.destNode)return this.destNode;var i=this.destNode=this.destNode||this.ac.createMediaStreamDestination(),r=i.stream.getAudioTracks()[0];this.Oi.info("zp.pv.cdn "+"create dest audio id: ".concat(r==null?void 0:r.id,", ").concat(r==null?void 0:r.label,",i"));var s=this.rtcViewer;for(var o in this.Ri.publisherList){var u=this.Ri.publisherList[o];if(u.localStream==e){var m=(t=u.publisher.peerConnection)===null||t===void 0?void 0:t.getSenders().find(function(a){return a.track&&a.track.kind==="audio"});m&&(m.replaceTrack(r),this.Oi.info("zc.pv.cdn change sender audio track"));break}}var f=e.getAudioTracks()[0];return f&&(e.removeTrack(f),!this.isOriginEmptyTrack()&&r&&(r.enabled=f.enabled)),e.addTrack(r),s&&s.setAudio(r),i},n.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0],this.originAudioTrack=this.audioTrack)},n.prototype.onAudioTrackChange=function(e){},n.prototype.getViewer=function(){return!this.localStream||this.rtcViewer&&this.rtcViewer.inited||(this.rtcViewer=new kl(this.localStream,this,{clearLastFrame:this._i.engineConfig.previewClearLastFrame})),this.rtcViewer},n.prototype.getStreamThroughCanvas=function(e,t){var i,r=this;if(e.getVideoTracks().length==0)return e;var s=(i=e.getVideoTracks()[0])===null||i===void 0?void 0:i.getSettings(),o=s.width,u=s.height,m=s.frameRate;if(!o||!u||!m)return e;var f=oi(),a=Tt.createElement("canvas"),S=a.getContext("2d");f.setAttribute("style","display:none"),a.setAttribute("style","display:none"),a.width=(t==null?void 0:t.w)||o,a.height=(t==null?void 0:t.h)||u,new Ge(function(ie,ae){var be=null,Te=function(){be&&clearTimeout(be),f&&f.removeEventListener("playing",Te),ie(void 0)};f&&f.addEventListener("playing",Te),be=window.setTimeout(function(){ae()},1e3)}).then(function(){var ie=(t==null?void 0:t.fps)||m||15;r.drawCanvasTimer&&(clearInterval(r.drawCanvasTimer),r.drawCanvasTimer=null),r.drawCanvasTimer=setInterval(function(){var ae,be=(ae=e.getVideoTracks()[0])===null||ae===void 0?void 0:ae.getSettings();a.width=(t==null?void 0:t.w)||be.width||f.videoWidth,a.height=(t==null?void 0:t.h)||be.height||f.videoHeight,S==null||S.drawImage(f,0,0,a.width,a.height)},1e3/ie)}),f.srcObject=e,f.play();var F=a.captureStream((t==null?void 0:t.fps)||15);if(F.getVideoTracks()[0].stop=function(){r.drawCanvasTimer&&(clearInterval(r.drawCanvasTimer),r.drawCanvasTimer=null),f.pause(),f.remove(),a.remove()},Ar(e)&&e.getAudioTracks().length){var ee=e.getAudioTracks()[0];F.addTrack(ee)}return F},n.prototype.stopCanvasStreamTrack=function(){this.streamFromCanvas&&this.streamFromCanvasTrack&&(this.Ri.trackUtils.stopTrack(this.streamFromCanvasTrack),this.streamFromCanvasTrack=null),this.drawCanvasTimer&&(clearInterval(this.drawCanvasTimer),this.drawCanvasTimer=null)},n.prototype.updateVideoInfo=function(e){var t={width:e.width,height:e.height,frameRate:e.frameRate,bitRate:e.bitRate,minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval};return this.Oi.info("zc.pv.uvi input video info: ".concat(JSON.stringify(t))),this.videoInfo=An(An({},this.videoInfo),t),An({},this.videoInfo)},n.prototype.updateAudioInfo=function(e){var t={};return this.Oi.info("zc.pv.uai input audio info: ".concat(JSON.stringify(t))),this.videoInfo=An(An({},this.videoInfo),t),An({},this.videoInfo)},n.prototype.updateMediaStreamConstraints=function(e,t){var i=this;this.Oi.info("zc.pv.umsc ".concat(JSON.stringify(e))),t==="video"?this.constraintsVideoKeys.forEach(function(r){return i.mediaStreamConfig[r]=e[r]}):this.constraintsAudioKeys.forEach(function(r){return i.mediaStreamConfig[r]=e[r]})},n.prototype.deleteConstraints=function(e,t){t.forEach(function(i){return delete e[i]})},n.prototype.setVolumeFactorByUserCount=function(e){var t,i=this._i.engineConfig.choirRole;if(this.localStream){this.Oi.info("zc.pv.svf ".concat((t=this.localStream)===null||t===void 0?void 0:t.id," count: ").concat(e,", mic: ").concat(!!this.micTrack,", choir role: ").concat(i));var r=this.volumeFactor,s=[1,2].includes(i);if(this.micTrack&&s)for(var o=[[0,1],[3,1],[4,.9],[8,.7],[12,.5],[16,.45],[20,.4],[24,.35],[1/0,.3]],u=0;u<o.length;u++){var m=o[u][0],f=o[u+1];if(!f){this.Oi.error("zc.pv.svf error: no map factor");break}if(e>=m&&e<f[0]){r=f[1];break}}else r=i===1?.6:1;this.audioMixManager&&this.audioMixManager.setVolumeFactor(i===1?.6:1),this.Oi.info("zc.pv.svf factor: ".concat(r)),this.setVolume(void 0,r)}},n.prototype.setVolume=function(e,t){var i,r,s;this.Oi.info("zc.pv.scv volume: ".concat(e,", factor: ").concat(t,"; origin: ").concat(this.volume,", ").concat(this.volumeFactor)),e===void 0?e=this.volume:this.volume=e,t===void 0?t=this.volumeFactor:this.volumeFactor=t;var o=this.gainNode;o||(this.audioNodeQueue||this.initAudioNodeQueue(),o=this.ac.createGain(),(i=this.audioNodeQueue)===null||i===void 0||i.pushFront(o),this.gainNode=o);var u=e/100*this.volumeFactor;if(qi(u)){var m=!1;o.gain.value!=u&&(m=!0,o.gain.value=u),this.Oi.info("zc.pv.scv ".concat(this.audioPreviewType," ").concat((s=this.localStream)===null||s===void 0?void 0:s.id,"  volume: ").concat(u,". hasChanged: ").concat(m))}else this.Oi.error("zc.pv.scv ".concat(this.audioPreviewType," ").concat((r=this.localStream)===null||r===void 0?void 0:r.id,"  volume error: ").concat(u))},n}();(function(n){n[n.Off=0]="Off",n[n.TurningOn=1]="TurningOn",n[n.On=2]="On"})(Ka||(Ka={})),function(n){n[n.World=0]="World",n[n.Team=1]="Team",n[n.SecretTeam=2]="SecretTeam"}(bo||(bo={})),function(n){n[n.All=0]="All",n[n.World=1]="World",n[n.Team=2]="Team"}($n||($n={})),function(n){n[n.All=0]="All",n[n.World=1]="World",n[n.Team=2]="Team"}(So||(So={})),function(n){n[n.Song=0]="Song",n[n.Accompaniment=1]="Accompaniment",n[n.AccompanimentClip=2]="AccompanimentClip",n[n.AccompanimentSegment=3]="AccompanimentSegment"}(Ih||(Ih={})),function(n){n[n.Count=0]="Count",n[n.User=1]="User",n[n.Room=2]="Room",n[n.Master=3]="Master"}(Oh||(Oh={})),function(n){n[n.VendorDefault=0]="VendorDefault",n[n.Vendor1=1]="Vendor1",n[n.Vendor2=2]="Vendor2",n[n.Vendor3=4]="Vendor3"}(kh||(kh={})),function(n){n[n.PortraitSegmentation=0]="PortraitSegmentation"}(Ph||(Ph={})),function(n){n[n.NONE=0]="NONE",n[n.MEN_TO_CHILD=1]="MEN_TO_CHILD",n[n.MEN_TO_WOMEN=2]="MEN_TO_WOMEN",n[n.WOMEN_TO_CHILD=3]="WOMEN_TO_CHILD",n[n.WOMEN_TO_MEN=4]="WOMEN_TO_MEN",n[n.FOREIGNER=5]="FOREIGNER",n[n.OPTIMUS_PRIME=6]="OPTIMUS_PRIME",n[n.ANDROID=7]="ANDROID",n[n.ETHEREAL=8]="ETHEREAL",n[n.MALE_MAGNETIC=9]="MALE_MAGNETIC",n[n.FEMALE_FRESH=10]="FEMALE_FRESH",n[n.MAJOR_C=11]="MAJOR_C",n[n.MINOR_A=12]="MINOR_A",n[n.HARMONIC_MINOR=13]="HARMONIC_MINOR",n[n.FEMALE_ENERGETIC=14]="FEMALE_ENERGETIC",n[n.RICHNESS=15]="RICHNESS",n[n.MUFFLED=16]="MUFFLED",n[n.ROUNDNESS=17]="ROUNDNESS",n[n.FALSETTO=18]="FALSETTO",n[n.FULLNESS=19]="FULLNESS",n[n.CLEAR=20]="CLEAR",n[n.HIGHLY_RESONANT=21]="HIGHLY_RESONANT",n[n.LOUD_CLEAR=22]="LOUD_CLEAR"}(Ah||(Ah={})),function(n){n[n.None=0]="None",n[n.SoftRoom=1]="SoftRoom",n[n.LargeRoom=2]="LargeRoom",n[n.ConcertHall=3]="ConcertHall",n[n.Valley=4]="Valley",n[n.RecordingStudio=5]="RecordingStudio",n[n.Basement=6]="Basement",n[n.KTV=7]="KTV",n[n.Popular=8]="Popular",n[n.Rock=9]="Rock",n[n.VocalConcert=10]="VocalConcert",n[n.GramoPhone=11]="GramoPhone",n[n.EnhancedKTV=12]="EnhancedKTV"}(Dh||(Dh={})),function(n){n[n.None=0]="None",n[n.Local=1]="Local",n[n.Publish=2]="Publish",n[n.All=3]="All"}(Vs||(Vs={})),function(n){n[n.Off=0]="Off",n[n.On=1]="On"}(Nh||(Nh={})),function(n){n[n.PortraitSegmentation=0]="PortraitSegmentation"}(Lh||(Lh={})),function(n){n[n.ZegoGeoFenceTypeNone=0]="ZegoGeoFenceTypeNone",n[n.ZegoGeoFenceTypeInclude=1]="ZegoGeoFenceTypeInclude",n[n.ZegoGeoFenceTypeExclude=2]="ZegoGeoFenceTypeExclude"}(Mh||(Mh={})),function(n){n[n.AspectFill=0]="AspectFill",n[n.AspectFit=1]="AspectFit"}(xh||(xh={})),function(n){n[n.ZegoFontTypeSourceHanSans=0]="ZegoFontTypeSourceHanSans",n[n.ZegoFontTypeAlibabaSans=1]="ZegoFontTypeAlibabaSans",n[n.ZegoFontTypePangMenZhengDaoTitle=2]="ZegoFontTypePangMenZhengDaoTitle",n[n.ZegoFontTypeHappyZcool=3]="ZegoFontTypeHappyZcool"}(Uh||(Uh={})),function(n){n[n.ZegoDefined=0]="ZegoDefined",n[n.UserUnregister=1]="UserUnregister"}(Bh||(Bh={})),function(n){n[n.video=0]="video",n[n.audio=1]="audio",n[n.videoAndAudio=2]="videoAndAudio"}(Pn||(Pn={}));var Fh=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Hh=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Mm=function(){function n(e){this.zegoStream=e}return Object.defineProperty(n.prototype,"active",{get:function(){return this.zegoStream.active},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.zegoStream.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoCaptureStream",{get:function(){return this.zegoStream.originVideoStream},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"audioCaptureStream",{get:function(){return this.zegoStream.originAudioStream},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stream",{get:function(){return this.zegoStream.stream},enumerable:!1,configurable:!0}),n.prototype.getAudioTracks=function(){return this.zegoStream.getAudioTracks()},n.prototype.getVideoTracks=function(){return this.zegoStream.getVideoTracks()},n.prototype.getTracks=function(){return this.zegoStream.getTracks()},Object.defineProperty(n.prototype,"videoDeviceId",{get:function(){return this.zegoStream.videoDeviceId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"audioDeviceId",{get:function(){return this.zegoStream.audioDeviceId},enumerable:!1,configurable:!0}),n.prototype.on=function(e,t){return this.zegoStream.on(e,t)},n.prototype.off=function(e,t){return this.zegoStream.off(e,t)},n.prototype.startCaptureMicrophone=function(e){return this.zegoStream.startCaptureMicrophone(e)},n.prototype.startCaptureCamera=function(e){return this.zegoStream.startCaptureCamera(e)},n.prototype.startCaptureCameraAndMicrophone=function(e,t){return this.zegoStream.startCaptureCameraAndMicrophone(e,t)},n.prototype.startCaptureCustomAudio=function(e){return this.zegoStream.startCaptureCustomAudio(e)},n.prototype.startCaptureCustomVideo=function(e){return this.zegoStream.startCaptureCustomVideo(e)},n.prototype.startCaptureCustomVideoAndAudio=function(e,t){return this.zegoStream.startCaptureCustomVideoAndAudio(e,t)},n.prototype.startCaptureScreen=function(e){return this.zegoStream.startCaptureScreen(e)},n.prototype.startCaptureScreenWithAudio=function(e,t){return this.zegoStream.startCaptureScreenWithAudio(e,t)},n.prototype.stopCaptureAudio=function(){return Fh(this,void 0,void 0,function(){return Hh(this,function(e){return[2,this.zegoStream.stopCaptureAudio()]})})},n.prototype.stopCaptureVideo=function(){return Fh(this,void 0,void 0,function(){return Hh(this,function(e){return[2,this.zegoStream.stopCaptureVideo()]})})},n.prototype.playAudio=function(e){this.zegoStream.playAudio(e)},n.prototype.playCaptureAudio=function(e){this.zegoStream.playCaptureAudio(e)},n.prototype.playVideo=function(e,t){this.zegoStream.playVideo(e,t)},n.prototype.playCaptureVideo=function(e,t){this.zegoStream.playCaptureVideo(e,t)},n.prototype.takeStreamSnapshot=function(e){return this.zegoStream.takeStreamSnapshot(e)},n.prototype.resumeVideo=function(){return this.zegoStream.resumeVideo()},n.prototype.resumeAudio=function(){return this.zegoStream.resumeAudio()},n.prototype.stopVideo=function(){this.zegoStream.stopVideo()},n.prototype.stopAudio=function(){this.zegoStream.stopAudio()},n.prototype.stopPlayCaptureVideo=function(){this.zegoStream.stopPlayCaptureVideo()},n.prototype.stopPlayCaptureAudio=function(){this.zegoStream.stopPlayCaptureAudio()},n.prototype.setVolume=function(e){return this.zegoStream.setVolume(e)},n}(),wr=function(){return wr=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},wr.apply(this,arguments)},hn=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},fn=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},qh=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},xm=function(){function n(e,t,i,r,s,o){var u=this;this.Ji=e,this.Oi=t,this.Ri=i,this._i=r,this.Vi=s,this.Hi=o,this.id="zego-stream-"+Date.now().toString(16),this.originVideoStream=null,this.originAudioStream=null,this.audioMuted=!0,this.audioCaptureMuted=!0,this.stream=null,this.Ki=[],this.Wi=[],this.eventHandler={autoplayFailed:function(m,f){u.eventManager.emit("autoplayFailed",m,f)},autoplayCaptureFailed:function(m,f){u.eventManager.emit("autoplayCaptureFailed",m,f)},canPlayAudio:function(m){u.eventManager.emit("canPlayAudio",m)},canPlayVideo:function(m){u.eventManager.emit("canPlayVideo",m)},canPlayCaptureVideo:function(m){u.eventManager.emit("canPlayCaptureVideo",m)},canPlayCaptureAudio:function(m){u.eventManager.emit("canPlayCaptureAudio",m)}},this.isPlayingVideo=!1,this.isPlayingCaptureVideo=!1,this.aCaptureViewer=null,this.vCaptureViewers=[],this.videoWrappers=[],this.viewer=null,this.Xi=null,this.originStreamPreviewType="",this.streamPreviewType="",this.originVideoTrack=null,this.originAudioTrack=null,this.eventManager=new iu,this.autoPlay&&!e.view&&this.Oi.error("zcs.c if you want to play the stream automatically, the view parameter is required.")}return Object.defineProperty(n.prototype,"active",{get:function(){var e,t;return((e=this.originAudioStream)===null||e===void 0?void 0:e.active)||((t=this.originVideoStream)===null||t===void 0?void 0:t.active)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this.Ji.view||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"autoPlay",{get:function(){return!!Li(this.Ji.autoPlay)&&this.Ji.autoPlay},enumerable:!1,configurable:!0}),n.prototype.getAudioTracks=function(){var e;return this.Oi.info("zcs.gats call"),((e=this.originAudioStream)===null||e===void 0?void 0:e.getAudioTracks())||[]},n.prototype.getVideoTracks=function(){var e;return this.Oi.info("zcs.gvts call"),((e=this.originVideoStream)===null||e===void 0?void 0:e.getVideoTracks())||[]},n.prototype.getTracks=function(){return qh(qh([],this.getAudioTracks(),!0),this.getVideoTracks(),!0)},Object.defineProperty(n.prototype,"videoDeviceId",{get:function(){var e=this.originVideoStream&&this.originVideoStream.getVideoTracks()[0];return e&&this._getDeviceIdByTrack(e)||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"audioDeviceId",{get:function(){var e=this.originAudioStream&&this.originAudioStream.getAudioTracks()[0];return e&&this._getDeviceIdByTrack(e)||""},enumerable:!1,configurable:!0}),n.prototype.on=function(e,t){return!!t&&this.eventManager.addEventHandler(e,t)},n.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},n.prototype.startPublish=function(){},n.prototype.replacePublish=function(e,t){e===void 0&&(e=Pn.videoAndAudio)},n.prototype.resetPublish=function(){this.Yi()},n.prototype._getDeviceIdByTrack=function(e){return e&&e.getSettings().deviceId||""},n.prototype.Zi=function(e,t){var i=tr(e)?e:{};return t.call(this,i)},n.prototype.$i=function(e,t){var i=this;if(this.Oi.info("zcs.uos call type:"+t),t==0){if(this.originVideoStream=e,this.autoPlay||this.isPlayingCaptureVideo){var r=this.vCaptureViewers.map(function(s){return{container:s.container,option:s.options}});this.stopPlayCaptureVideo(),r!=null&&r.length||(r=[{container:this.Ji.captureView||null,option:{}}]),r.forEach(function(s){return s.container&&i.playCaptureVideo(s.container,s.option)})}}else this.originAudioStream=e,this.audioCaptureMuted||(this.stopPlayCaptureAudio(),this.playCaptureAudio())},Object.defineProperty(n.prototype,"isPublish",{get:function(){for(var e in this.Ri.publisherList)if(this.Ri.publisherList[e].localStream==this.stream)return!0;return!1},enumerable:!1,configurable:!0}),n.prototype.updateStreamAudioTrack=function(e,t,i){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),i===void 0&&(i=0),hn(this,void 0,void 0,function(){var r,s,o,u,m,f,a=this;return fn(this,function(S){switch(S.label){case 0:if(this.Oi.info("zcs.uat call"),!this.originAudioStream||this.isPublish&&i==0||!this.stream)return[2];if(!(r=this.checkPreview(this.originAudioStream))||!r.audioTrack)return this.Oi.info("zcs.uat not preview"),[2];s=this.originAudioTrack,o=r.audioTrack,u=function(F){a.replacePublish(1),a.originAudioTrack=r.audioTrack,a.stream&&a.te(a.stream,a.originVideoStream,a.originAudioStream),e(F)},S.label=1;case 1:return S.trys.push([1,3,,4]),[4,this._updateStreamTrack(s,o,u,t)];case 2:return m=S.sent(),this.Oi.info("zcs.uat success"),[2,m];case 3:return f=S.sent(),this.Oi.info("zcs.uat fail"),[2,f];case 4:return[2]}})})},n.prototype.updateStreamVideoTrack=function(e,t,i){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),i===void 0&&(i=0),hn(this,void 0,void 0,function(){var r,s,o,u,m=this;return fn(this,function(f){if(this.Oi.info("zcs.uvt call"),!this.originVideoStream||this.isPublish&&i==0||!this.stream)return this.Oi.info("zcs.uvt not capture"),[2];if(r=this.originVideoTrack,!(s=this.checkPreview(this.originVideoStream))||!s.videoTrack)return this.Oi.info("zcs.uvt not preview"),[2];o=s.videoTrack,u=function(a){m.replacePublish(0),m.originVideoTrack=s.videoTrack,m.stream&&m.te(m.stream,m.originVideoStream,m.originAudioStream),e(a)};try{this._updateStreamTrack(r,o,u,t),this.streamPreviewType=this.originStreamPreviewType,this.Oi.info("zcs.uvt success")}catch(a){return this.Oi.info("zcs.uvt fail"),[2,a]}return[2]})})},n.prototype.updateStreamVideoAndAudio=function(e,t,i){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),i===void 0&&(i=0),hn(this,void 0,void 0,function(){var r,s,o,u,m;return fn(this,function(f){switch(f.label){case 0:this.Oi.info("zcs.uva call"),r=!this.originVideoStream,s=!this.originAudioStream,o=function(a){r=!0,s&&e(a)},u=function(a){s=!0,r&&e(a)},f.label=1;case 1:return f.trys.push([1,4,,5]),[4,this.updateStreamVideoTrack(o,t,i)];case 2:return f.sent(),[4,this.updateStreamAudioTrack(u,t,i)];case 3:return f.sent(),[3,5];case 4:return m=f.sent(),t(m),this.Oi.info("zcs.uva error:".concat(JSON.stringify(m))),[3,5];case 5:return[2]}})})},n.prototype._updateStreamTrack=function(e,t,i,r){return hn(this,void 0,void 0,function(){var s,o,u,m;return fn(this,function(f){switch(f.label){case 0:return f.trys.push([0,5,,6]),this.Oi.info("zcs.ut call"),s=this.stream&&this.checkPreview(this.stream),this.stream&&s?(o={errorCode:0,extendedData:""},e?[3,2]:(this.Oi.info("zcs.ut add"),[4,this.Hi.handleTrack("ADD",this.stream,t,i,r)])):(this.Oi.info("zcs.ut stream:".concat(!this.stream,", previewer:").concat(!s)),[2]);case 1:return o=f.sent(),[3,4];case 2:return e.id==t.id?[3,4]:(this.Oi.info("zcs.ut replace"),u=!1,this.originStreamPreviewType&&this.streamPreviewType&&this.originStreamPreviewType!==this.streamPreviewType&&(u=!0),[4,this.Hi.replaceTrack(this.stream,t,void 0,u)]);case 3:o=f.sent(),this.Ri.trackUtils.stopTrack(e),f.label=4;case 4:return i(o),[3,6];case 5:return m=f.sent(),r(m),[3,6];case 6:return[2]}})})},n.prototype.ie=function(){var e;if(!this.stream){var t=[];if(this.originAudioStream){var i=this.checkPreview(this.originAudioStream);i&&i.audioTrack&&(t.push(i.audioTrack),this.originAudioTrack=i.audioTrack)}if(this.originVideoStream){var r=this.checkPreview(this.originVideoStream);r&&r.videoTrack&&(t.push(r.videoTrack),this.originVideoTrack=r.videoTrack)}this.stream=new MediaStream(t)}var s=this.checkPreview(this.stream);s||(s=this.createZegoStreamPreview(this.stream,!1),this.stream=this.Vi.getStreamByCanvas(this.stream)),this.stream&&this.te(this.stream,this.originVideoStream,this.originAudioStream),s&&((e=this.stream)===null||e===void 0?void 0:e.getAudioTracks().length)===0&&this.Vi.setEmptyAudioTrack(this.stream,s),this.Vi.initCopyMusic(this.stream),s.zegoCaptureStream=this,this.streamPreviewType=this.originStreamPreviewType,this.Xi=s},n.prototype.createZegoStreamPreview=function(e,t,i){var r=new vs(this.Oi,this._i,this.Ri,i,t);return this.Ri.previewStreamList.push(r),r.localStream=e,r.mediaStreamConfig={},r.initMediaTrack(e),e.getTracks().forEach(function(s){return r.addTrackListener(s)}),i=="screen"&&this.Vi.addShareScreenEnd(e),r},n.prototype.checkPreview=function(e){return this.Ri.checkPreview(e)},n.prototype.te=function(e,t,i){if(e){var r=this.checkPreview(e);if(r){var s=t&&this.checkPreview(t),o=i&&this.checkPreview(i),u={},m={},f=!1;if(r.previewType=o==null?void 0:o.previewType,s){var a=s.videoInfo,S=s.mediaStreamConfig;r.previewType=s.previewType,r.videoPreviewType=s.videoPreviewType,r.previewSuc=!0,u=wr({},S),f=S.video,m=wr({},a)}if(o){a=o.videoInfo;var F=(S=o.mediaStreamConfig).audio,ee=S.AEC,ie=S.AGC,ae=S.ANS,be=S.audioBitrate,Te=S.channelCount,Pe=S.audioInput;r.audioPreviewType=o.audioPreviewType,r.previewSuc=!0,m.channelCount=a.channelCount,m.audioBitrate=a.audioBitrate,u=wr(wr({},u),{audio:F,AEC:ee,AGC:ie,ANS:ae,audioBitrate:be,channelCount:Te,audioInput:Pe})}u.video=f,r.mediaStreamConfig=u,r.videoInfo=m}}},n.prototype._getVideoBitrate=function(e){return qi(this.Ji.videoBitrate)?wr(wr({},e),{bitrate:this.Ji.videoBitrate}):wr(wr({},e),this.Ji.videoBitrate)},n.prototype._getAudioBitrate=function(e){return e.audioBitrate=this.Ji.audioBitrate,e},n.prototype._createStream=function(e,t,i,r,s){return hn(this,void 0,void 0,function(){var o,u,m,f,a,S,F,ee,ie,ae,be;return fn(this,function(Te){switch(Te.label){case 0:return Te.trys.push([0,2,,3]),o=i==Pn.video||i==Pn.videoAndAudio,u=i==Pn.audio||i==Pn.videoAndAudio,e=this._getVideoBitrate(e),e=this._getAudioBitrate(e),this.Oi.info("zcs.cs config:",JSON.stringify(((ae={})[t]=e,ae))),[4,this.Vi.createStream((be={},be[t]=e,be))];case 1:return m=Te.sent(),this.originStreamPreviewType=t,f=this.checkPreview(m),a=(f==null?void 0:f.originVideoTrack)||m.getVideoTracks()[0],S=(f==null?void 0:f.originAudioTrack)||m.getAudioTracks()[0],u&&o?(F=new MediaStream([a]),ee=new MediaStream([S]),this.createZegoStreamPreview(F,!0,t),this.createZegoStreamPreview(ee,!0,t),this.te(F,m,null),this.te(ee,null,m),this.Wi.push(F),this.Ki.push(ee),this.$i(F,0),this.$i(ee,1),!this.stream&&f?(this.stream=m,this.originAudioTrack=S,this.originVideoTrack=a,f.zegoCaptureStream=this,this.Xi=f):this.updateStreamVideoAndAudio(r,s,0)):o?(this.$i(m,0),this.Wi.push(m),this.stream?this.updateStreamVideoTrack(r,s,0):this.ie()):u&&(ee=new MediaStream([S]),this.createZegoStreamPreview(ee,!0,t),this.te(ee,null,m),this.$i(ee,1),this.Ki.push(ee),this.Ki.push(m),this.stream?this.updateStreamAudioTrack(r,s,0):this.ie()),this.isPublish||(this.autoPlay||this.isPlayingVideo)&&this.autoPlay&&this.playVideo(),this.Yi(),r({errorCode:0,extendedData:""}),[3,3];case 2:return ie=Te.sent(),s({errorCode:ie.errorCode||ie.code,extendedData:ie.extendedData||ie.msg}),[3,3];case 3:return[2]}})})},n.prototype.startCaptureMicrophone=function(e){var t=this;return e===void 0&&(e={}),new Ge(function(i){return hn(t,void 0,void 0,function(){var r;return fn(this,function(s){switch(s.label){case 0:this.Oi.info("zcs.scm call ".concat(JSON.stringify(e))),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._createStream(wr({audio:!0,video:!1,audioInput:e.input},e),"camera",1,i,i)];case 2:return s.sent(),this.Oi.info("zcs.scm success"),[3,4];case 3:return r=s.sent(),i(r),this.Oi.info("zcs.scm fail"),[3,4];case 4:return[2]}})})})},n.prototype.startCaptureCamera=function(e){var t=this;return e===void 0&&(e={}),new Ge(function(i){return hn(t,void 0,void 0,function(){var r,s;return fn(this,function(o){switch(o.label){case 0:this.Oi.info("zcs.scc call ".concat(JSON.stringify(e))),o.label=1;case 1:return o.trys.push([1,3,,4]),r=wr({audio:!1,video:!0,videoInput:e.input,videoOptimizationMode:e.optimizationMode},e),(e==null?void 0:e.quality)!==void 0&&(r.videoQuality=e.quality),[4,this._createStream(r,"camera",0,i,i)];case 2:return o.sent(),this.Oi.info("zcs.scc success"),[3,4];case 3:return s=o.sent(),i(s),this.Oi.info("zcs.scc fail"),[3,4];case 4:return[2]}})})})},n.prototype.startCaptureCameraAndMicrophone=function(e,t){var i=this;return e===void 0&&(e={}),t===void 0&&(t={}),new Ge(function(r){return hn(i,void 0,void 0,function(){var s,o;return fn(this,function(u){switch(u.label){case 0:this.Oi.info("zcs.sccm call c:".concat(JSON.stringify(e),", m:").concat(JSON.stringify(t))),u.label=1;case 1:return u.trys.push([1,3,,4]),s=wr(wr(wr({audio:!0,video:!0,videoInput:e==null?void 0:e.input,videoOptimizationMode:e==null?void 0:e.optimizationMode},e),{audioInput:t==null?void 0:t.input}),t),e!=null&&e.quality&&(s.videoQuality=e==null?void 0:e.quality),[4,this._createStream(s,"camera",2,r,r)];case 2:return u.sent(),this.Oi.info("zcs.sccm success"),[3,4];case 3:return o=u.sent(),r(o),this.Oi.info("zcs.sccm fail"),[3,4];case 4:return[2]}})})})},n.prototype.autoCapture=function(){var e=this;return new Ge(function(t,i){return hn(e,void 0,void 0,function(){var r,s,o,u,m,f,a,S,F,ee,ie,ae;return fn(this,function(be){switch(be.label){case 0:this.Oi.info("zcs.ac call"),be.label=1;case 1:return be.trys.push([1,23,,24]),u=(s=this.Ji).custom,m=s.screen,(o=s.camera)?(this.Oi.info("zcs.ac camera:".concat(JSON.stringify(o))),ie=o.video,(ee=o.audio)&&ie?(f=tr(ie)?ie:void 0,a=tr(ee)?ee:void 0,[4,this.startCaptureCameraAndMicrophone(f,a)]):[3,3]):[3,8];case 2:return r=be.sent(),[3,7];case 3:return ee?[4,this.Zi(ee,this.startCaptureMicrophone)]:[3,5];case 4:return r=be.sent(),[3,7];case 5:return ie?[4,this.Zi(ie,this.startCaptureCamera)]:[3,7];case 6:r=be.sent(),be.label=7;case 7:return[3,22];case 8:return m?(this.Oi.info("zcs.ac screen:".concat(JSON.stringify(m))),ie=m.video,(ee=m.audio)?(S=ie,F=ee,Li(ie)&&(S={}),Li(ee)&&(F={}),[4,this.startCaptureScreenWithAudio(S,F)]):[3,10]):[3,13];case 9:return r=be.sent(),[3,12];case 10:return[4,this.Zi(ie,this.startCaptureScreen)];case 11:r=be.sent(),be.label=12;case 12:return[3,22];case 13:return u?(this.Oi.info("zcs.ac custom:".concat(JSON.stringify(u))),ie=u.video,(ee=u.audio)&&ie&&ee.source===ie.source?[4,this.startCaptureCustomVideoAndAudio(ie,ee)]:[3,15]):[3,20];case 14:return r=be.sent(),[3,19];case 15:return ee?[4,this.Zi(ee,this.startCaptureCustomAudio)]:[3,17];case 16:r=be.sent(),be.label=17;case 17:return ie?[4,this.Zi(ie,this.startCaptureCustomVideo)]:[3,19];case 18:r=be.sent(),be.label=19;case 19:return[3,22];case 20:return[4,this.startCaptureCameraAndMicrophone({},{})];case 21:r=be.sent(),be.label=22;case 22:return r||i({errorCode:Gr.code,extendedData:Gr.message}),(r==null?void 0:r.errorCode)!==0?i(r):t(r),[3,24];case 23:return ae=be.sent(),i(ae),[3,24];case 24:return[2]}})})})},n.prototype.startCaptureCustomAudio=function(e){var t=this;return new Ge(function(i){return hn(t,void 0,void 0,function(){var r;return fn(this,function(s){switch(s.label){case 0:this.Oi.info("zcs.scca call ".concat(JSON.stringify(e))),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._createStream(e,"custom",1,i,i)];case 2:return s.sent(),this.Oi.info("zcs.scca success"),[3,4];case 3:return r=s.sent(),i(r),this.Oi.info("zcs.scca fail"),[3,4];case 4:return[2]}})})})},n.prototype.startCaptureCustomVideo=function(e){var t=this;return new Ge(function(i){return hn(t,void 0,void 0,function(){var r;return fn(this,function(s){switch(s.label){case 0:this.Oi.info("zcs.sccv call ".concat(JSON.stringify(e))),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._createStream(wr({videoOptimizationMode:e.optimizationMode},e),"custom",0,i,i)];case 2:return s.sent(),this.Oi.info("zcs.sccv success"),[3,4];case 3:return r=s.sent(),i(r),this.Oi.info("zcs.sccv fail"),[3,4];case 4:return[2]}})})})},n.prototype.startCaptureCustomVideoAndAudio=function(e,t){var i=this;return new Ge(function(r){return hn(i,void 0,void 0,function(){var s,o;return fn(this,function(u){switch(u.label){case 0:this.Oi.info("zcs.sccva call v:".concat(JSON.stringify(e)," a:").concat(JSON.stringify(t))),u.label=1;case 1:return u.trys.push([1,7,,8]),e.source!=t.source?[3,3]:[4,this._createStream(wr(wr({videoOptimizationMode:e.optimizationMode},e),t),"custom",2,r,r)];case 2:return u.sent(),[3,6];case 3:return s={video:!1,audio:!1},[4,this._createStream(wr({videoOptimizationMode:e.optimizationMode},e),"custom",0,function(m){s.video=!0,s.audio&&r(m)},r)];case 4:return u.sent(),[4,this._createStream(wr({},t),"custom",1,function(m){s.audio=!0,s.video&&r(m)},r)];case 5:u.sent(),u.label=6;case 6:return this.Oi.info("zcs.sccva success"),[3,8];case 7:return o=u.sent(),r(o),this.Oi.info("zcs.sccva fail"),[3,8];case 8:return[2]}})})})},n.prototype.startCaptureScreen=function(e){var t=this;return e===void 0&&(e={}),new Ge(function(i,r){return hn(t,void 0,void 0,function(){var s,o;return fn(this,function(u){switch(u.label){case 0:this.Oi.info("zcs.scs call ".concat(JSON.stringify(e))),u.label=1;case 1:return u.trys.push([1,3,,4]),s=wr(wr({videoOptimizationMode:e.optimizationMode},e),{audio:!1}),e!=null&&e.quality&&(s.videoQuality=e==null?void 0:e.quality),[4,this._createStream(s,"screen",0,i,i)];case 2:return u.sent(),this.Oi.info("zcs.scs success"),[3,4];case 3:return o=u.sent(),i(o),this.Oi.info("zcs.scs fail"),[3,4];case 4:return[2]}})})})},n.prototype.startCaptureScreenWithAudio=function(e,t){var i=this;return e===void 0&&(e={}),t===void 0&&(t={}),new Ge(function(r,s){return hn(i,void 0,void 0,function(){var o,u;return fn(this,function(m){switch(m.label){case 0:this.Oi.info("zcs.scs call v:".concat(JSON.stringify(e)," a:").concat(JSON.stringify(t))),m.label=1;case 1:return m.trys.push([1,3,,4]),o=wr(wr(wr({videoOptimizationMode:e.optimizationMode},e),t),{audio:!0}),(e==null?void 0:e.quality)!==void 0&&(o.videoQuality=e.quality),[4,this._createStream(o,"screen",2,r,r)];case 2:return m.sent(),this.Oi.info("zcs.scs success"),[3,4];case 3:return u=m.sent(),r(u),this.Oi.info("zcs.scs fail"),[3,4];case 4:return[2]}})})})},n.prototype.stopCaptureAudio=function(){var e=this;return new Ge(function(t){var i,r,s=!0;if(e.originAudioStream){e.Oi.info("zcs.sca call stop capture");var o=e.originAudioStream.getAudioTracks()[0];!((i=e.stream)===null||i===void 0)&&i.getAudioTracks()[0]&&e.isPublish&&e.stream&&(e.Oi.info("zcs.sca stop audio"),s=((r=e.Xi)===null||r===void 0?void 0:r.audioPreviewType)==="camera"?e.Xi.enableMicrophoneOnly(!1,e.Ri):e.Hi.enableStream(e.stream,{audio:!0}),e.Xi&&(e.Xi.syncAudioEnabled=!1)),e.Oi.info("zcs.sca stop result:"+s),s&&(o.stop(),e.originAudioStream=null,e.stopPlayCaptureAudio(),e.Yi())}t(s)})},n.prototype.stopCaptureVideo=function(){var e;return hn(this,void 0,void 0,function(){var t,i,r,s,o=this;return fn(this,function(u){switch(u.label){case 0:if(t=!0,this.Oi.info("zcs.scv call stop capture"),!this.originVideoStream)return[3,7];i=this.originVideoStream.getVideoTracks()[0],r=(e=this.stream)===null||e===void 0?void 0:e.getVideoTracks()[0],u.label=1;case 1:return u.trys.push([1,6,,7]),r?this.Xi?(this.Oi.info("zcs.scv stop stream video"),this.Xi.videoPreviewType!="camera"?[3,3]:[4,this.Xi.enableCameraCapturing(!1)]):[3,5]:[3,5];case 2:return t=u.sent(),[3,5];case 3:return[4,this.Xi.stopCaptureVideo()];case 4:u.sent(),t=!0,u.label=5;case 5:return this.Oi.info("zcs.scv stop result:"+t),t&&(this.Ri.trackUtils.stopTrack(i),this.originVideoStream=null,this.stopPlayCaptureVideo(),this.Wi.forEach(function(m){return o.Vi.destroyStream(m)}),this.Wi=[],this.Yi()),[3,7];case 6:return s=u.sent(),this.Oi.error("zcs.scv "+JSON.stringify(s)),t=!1,[3,7];case 7:return[2,t]}})})},n.prototype.ee=function(e,t){t===void 0&&(t=!1);var i=e&&this.checkPreview(e);if(!i)throw new Error("The stream does not exist, you must first capture the stream");return t&&i?new kl(e,i,{clearLastFrame:this._i.engineConfig.previewClearLastFrame}):(i==null?void 0:i.getViewer())||null},n.prototype.re=function(){var e,t,i;this.viewer=this.ee(this.stream),(e=this.viewer)===null||e===void 0||e.on("canPlayAudio",this.eventHandler.canPlayAudio),(t=this.viewer)===null||t===void 0||t.on("canPlayVideo",this.eventHandler.canPlayVideo),(i=this.viewer)===null||i===void 0||i.on("autoplayFailed",this.eventHandler.autoplayFailed)},n.prototype.playAudio=function(e){var t;if(this.Oi.info("zcs.pa call"),!this.stream)return this.Oi.warn("zcs.pa You need to capture the audio stream first");this.viewer||this.re(),(t=this.viewer)===null||t===void 0||t.playAudio(e,!0),this.audioMuted=!1},n.prototype.playCaptureAudio=function(e){var t,i,r;if(this.Oi.info("zcs.pca call"),!this.originAudioStream)return this.Oi.warn("zcs.pca You need to capture the audio stream first");this.aCaptureViewer||(this.aCaptureViewer=this.ee(this.originAudioStream),(t=this.aCaptureViewer)===null||t===void 0||t.on("canPlayAudio",this.eventHandler.canPlayCaptureAudio),(i=this.aCaptureViewer)===null||i===void 0||i.on("autoplayFailed",this.eventHandler.autoplayCaptureFailed)),this.audioCaptureMuted=!1,(r=this.aCaptureViewer)===null||r===void 0||r.playAudio(e,!0)},n.prototype.playVideo=function(e,t){var i;if(this.Oi.info("zcs.pv call"),this.stream){if(this.viewer&&this.viewer.inited||(this.re(),(i=this.viewer)===null||i===void 0||i.setAudioMuted(this.audioMuted)),this.viewer){var r=e||this.view;r&&il(r)?(this.viewer.playVideo(r,t),this.isPlayingVideo=!0):this.Oi.error("zcs.pv Execute `playVideo` failed, container not exist")}}else this.Oi.warn("zcs.pv You need to capture the video stream first")},n.prototype.playCaptureVideo=function(e,t){this.Oi.info("zcs.pcv call");var i=this.vCaptureViewers[0]||null;if(this.originVideoStream){if(!i||this.Ji.multiplacePreview){if(!(i=this.ee(this.originVideoStream,i&&this.Ji.multiplacePreview)))return;i.on("canPlayVideo",this.eventHandler.canPlayCaptureVideo),i.on("autoplayFailed",this.eventHandler.autoplayCaptureFailed),this.vCaptureViewers.push(i)}var r=e||this.Ji.captureView;r&&il(r)?(i.playVideo(r,t),this.isPlayingCaptureVideo=!0):this.Oi.error("zcs.pcv Execute `playVideo` failed, container not exist")}else this.Oi.warn("zcs.pv You need to capture the video stream first")},n.prototype.updatePlayVideo=function(){this.viewer&&this.stream?this.viewer.setVideo(this.stream.getVideoTracks()[0]):this.autoPlay&&this.playVideo()},n.prototype.updatePlayAudio=function(){this.viewer&&this.stream&&this.viewer.setAudio(this.stream.getAudioTracks()[0])},n.prototype.takeStreamSnapshot=function(e){var t;return((t=this.viewer)===null||t===void 0?void 0:t.takeStreamSnapshot(e))||""},n.prototype.resumeVideo=function(){var e;return(e=this.viewer)===null||e===void 0?void 0:e.resume(!0,["video"])},n.prototype.resumeAudio=function(){var e;return(e=this.viewer)===null||e===void 0?void 0:e.resume(!0,["audio"])},n.prototype.stopVideo=function(){var e;(e=this.viewer)===null||e===void 0||e.stopVideo(),this.isPlayingVideo=!1},n.prototype.stopAudio=function(){this.viewer&&(this.viewer.stopAudio(),this.audioMuted=!0)},n.prototype.stopPlayCaptureVideo=function(){this.vCaptureViewers.forEach(function(e){e.stopVideo(),e.destroy()}),this.vCaptureViewers=[],this.isPlayingCaptureVideo=!1},n.prototype.stopPlayCaptureAudio=function(){this.aCaptureViewer&&(this.aCaptureViewer.destroy(),this.aCaptureViewer=null,this.audioCaptureMuted=!0)},n.prototype.setVolume=function(e){return!!this.viewer&&this.viewer.setVolume(e)},n.prototype._destroyCacheStream=function(e){var t=this;return e.filter(function(i){return!!i.active||(t.Vi.destroyStream(i),!1)})},n.prototype.Yi=function(){this.Ki=this._destroyCacheStream(this.Ki),this.Wi=this._destroyCacheStream(this.Wi)},n.prototype.destroy=function(){var e,t=this;this.originAudioStream&&(this.originAudioStream=null),this.originVideoStream&&(this.originVideoStream=null),this.stream&&(this.Vi.destroyStream(this.stream),this.stream=null),this.Ki.forEach(function(i){return t.Vi.destroyStream(i)}),this.Wi.forEach(function(i){return t.Vi.destroyStream(i)}),this.Ki=[],this.Wi=[],this.stopPlayCaptureVideo(),this.stopPlayCaptureAudio(),this.stopVideo(),this.stopAudio(),(e=this.viewer)===null||e===void 0||e.destroy(),this.viewer=null},n}(),ys="zsc.rd.qd",Um=function(){function n(e,t,i){this.logger=e,this.stateCenter=t,this.streamCenter=i,this.maxQuickDeviceChangeDelayMs=2e3,this.lastRecordDeviceTime=0}return n.prototype.getDetectionStreams=function(){var e=[];return this.streamCenter.previewStreamList.forEach(function(t){t.localStream&&e.push(t.localStream)}),e},n.prototype.actionMicDeviceQuickChangeException=function(e){this.logger.warn(ys+" DeviceError: ".concat(Mn," ").concat(Zn)),this.stateCenter.actionListener("_deviceError",Mn,e,"micro"),this.stateCenter.actionListener("deviceError",Mn,e)},n.prototype.getDeviceName=function(e){if(this.logger.info(ys+" get name of device id: ".concat(JSON.stringify(e))),!e.deviceID&&!this.devicesInfo&&e.trackLabel=="")return"unknown";if(!e.deviceID||e.deviceID==="default")return e.trackLabel;for(var t in this.devicesInfo){var i=this.devicesInfo[t];if(i)for(var r=0,s=i;r<s.length;r++){var o=s[r];if(o.deviceID===e.deviceID)return o.deviceName}}return e.trackLabel},n.prototype.actionCameraDeviceQuickChangeException=function(e){this.logger.warn(ys+" DeviceError: ".concat(Rn," ").concat(fa)),this.stateCenter.actionListener("_deviceError",Rn,e,"camera"),this.stateCenter.actionListener("deviceError",Rn,e)},n.prototype.updateDeviceInfo=function(e){this.devicesInfo=e},n.prototype.getTrackStatsSnapshot=function(e){return{trackID:e.id,trackLabel:e.label,readyState:e.readyState,deviceID:e.getSettings().deviceId}},n.prototype.includeExceptionDevices=function(e,t){return e.findIndex(function(i){return i.deviceName==t.deviceName&&i.preview==i.preview})!==-1},n.prototype.checkAudioTrackStatsChange=function(e,t){if(e.audioTrack){var i=this.getTrackStatsSnapshot(e.audioTrack),r=performance.now()-e.lastTrackEndTime.audio;if(i.readyState=="ended"&&r<this.maxQuickDeviceChangeDelayMs){this.logger.warn(ys+" mic device may loose.");var s={deviceName:this.getDeviceName(i),preview:e};this.includeExceptionDevices(t,s)||t.push(s)}}},n.prototype.checkVideoTrackStatsChange=function(e,t){if(e.videoTrack){var i=this.getTrackStatsSnapshot(e.videoTrack),r=performance.now()-e.lastTrackEndTime.video;if(i.readyState=="ended"&&r<this.maxQuickDeviceChangeDelayMs){this.logger.warn(ys+" camera device may loose.");var s={deviceName:this.getDeviceName(i),preview:e};this.includeExceptionDevices(t,s)||t.push(s)}}},n.prototype.checkStreamStatesChanged=function(e,t,i){var r=this.streamCenter.getPreviewer(e);r&&(this.checkAudioTrackStatsChange(r,t),this.checkVideoTrackStatsChange(r,i))},n.prototype.isRecordQuickly=function(){return performance.now()-this.lastRecordDeviceTime<this.maxQuickDeviceChangeDelayMs},n.prototype.onDeviceNoChangeQuickly=function(e){var t=this;if(this.isRecordQuickly())this.logger.info(ys+" device no change because record device quickly");else{this.logger.info(ys+" device no change quickly"),this.updateDeviceInfo(e);var i=[],r=[];this.getDetectionStreams().forEach(function(s){t.checkStreamStatesChanged(s,i,r)}),i.forEach(function(s){t.actionMicDeviceQuickChangeException(s.deviceName),s.preview.updatePublisherStreamMicStatus(!1)}),r.forEach(function(s){t.actionCameraDeviceQuickChangeException(s.deviceName),s.preview.updatePublisherStreamCameraStatus(!1)})}},n}();function Bm(){return!!navigator.userAgent.toLocaleLowerCase().match(/chrome/)&&!!navigator.userAgent.toLocaleLowerCase().match(/redmi\snote\s8/)}var pn=function(){return pn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},pn.apply(this,arguments)},ou=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},su=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},_s=xi,jh=xi.event,Vh=xi.error,zl=Ur,Gh=Xi,Wh=function(){function n(e,t,i,r,s,o){this.Oi=e,this.dataReport=t,this._i=i,this.Ri=r,this.rtm=s,this.zegoWebRtc=o,this.quickDeviceChangeDetection=new Um(this.Oi,this._i,this.Ri),this.recordDevices()}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.createStream=function(e){var t=this;this.Oi.info(sn+" call"),e&&e.camera&&e.camera.audioBitRate&&(e.camera.audioBitrate=e.camera.audioBitRate),e&&e.camera&&e.camera.bitrate&&(e.camera.bitRate=e.camera.bitrate),e&&e.screen&&tr(e.screen)&&e.screen.bitrate&&(e.screen.bitRate=e.screen.bitrate),e&&e.custom&&e.custom.bitrate&&(e.custom.bitRate=e.custom.bitrate),e&&(e.camera=ul(e.camera),e.custom=ul(e.custom),e.screen=ul(e.screen));var i={width:640,height:360},r={width:640,height:480},s={width:960,height:540};if(!(e!=null&&e.custom)&&!(e!=null&&e.screen)||e.camera||!e){var o=lt();if(!o||!o.includes("11_4")){var u=pn(pn({video:!0,videoQuality:4,frameRate:15,bitRate:500},i),{audioBitrate:48,channelCount:1});switch(this._i.scenario){case Vt.UNKNOWN:u={};break;case Vt.StandardVideoCall:break;case Vt.HighVideoCall:u.frameRate=25,u.bitRate=1500,u=pn(pn({},u),s);break;case Vt.StandardChatroom:u.video=!1,u.audioBitrate=24;break;case Vt.HighQualityChatroom:u.video=!1;break;case Vt.Broadcast:u.frameRate=20,u.bitRate=1200,(u=pn(pn({},u),s)).audioBitrate=64,u.channelCount=2;break;default:u.bitRate=800,u=pn(pn({},u),r)}this.Oi.info("".concat(sn," scenario ").concat(this._i.scenario," ").concat(JSON.stringify(u)));var m=this._i.settingConfig.getCloudSettingScenario(this._i.scenario,!1,!0);(e=e||{}).camera=Object.assign(u,m||{},JSON.parse(JSON.stringify(e.camera||{})))}}return new Ge(function(f,a){var S,F,ee,ie,ae,be="camera",Te=t.ji.createSpan(It.H,{key:xr},{key:""},Ai.event),Pe=function(vt){var Ft=t.Ri.checkPreview(vt),Ct=t.getStreamByCanvas(vt);Ft&&t.setEmptyAudioTrack(Ct,Ft),t.initCopyMusic(vt),Te.setAttributes({media_stream_id:Ai.media_stream_id(vt==null?void 0:vt.id)}),Te.end(),!t._i.deviceInfos&&t.recordDevices(),f(Ct),t.Ri.activeSoundLevel()},Ae=function(vt,Ft){Ft===void 0&&(Ft=""),t.ji.setError(Te,vt,Ft),a({code:vt.code,msg:vt.message+Ft})};if(window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1)return t.Oi.error(sn+" https or localhost required "),void Ae({code:Ai.error.it.code,message:Ai.error.it.message+" https or localhost required"});if(e&&(S=e.camera,F=e.custom,ee=e.screen),ee){if(be="screen",!function(vt,Ft){return tr(vt)&&vt.videoQuality!==void 0&&!cr(vt.videoQuality)?(Ft(Ai.error.tt," videoQuality must be integer number"),!1):tr(vt)&&!Yi(vt.sourceID)&&!bi(vt.sourceID)?(Ft(Ai.error.tt," sourceID must be string"),!1):!(tr(vt)&&vt.videoQuality===4&&(!Cd(vt.bitRate,Ft)||!Rd(vt,Ft)))}(ee,Ae))return;var Be=t._i.browser,Ze=t.Ri.getScreenConstrains(ee);Te.setAttributes({stream_type:Ai.stream_type("screen"),screen:Ai.screen(Ze)});var st=function(vt){t.Ri.createScreenPreviewer(vt,Ze)&&Pe(vt),t.addShareScreenEnd(vt)};Ri()||tr(ee)&&ee.type=="firefox"?t.startScreenShotFirFox("screen",Ze,function(vt,Ft,Ct){vt?Ft&&st(Ft):Ct&&Ae(Ct)}):di()&&ws.screenShotReady||tr(ee)&&ee.type=="shot"?t.startScreenShotChrome(function(vt,Ft,Ct){vt?(t.Oi.info(sn+" using extension"),Ft&&st(Ft)):(Ct&&t.Oi.error(sn+" extension "+Ct),Ct==="SS_DIALOG_CANCEL"||tr(ee)&&ee.type=="shot"?Ct&&Ae(Ai.error.et):t.startScreenSharing(Ze,function(Mt,Gt,li){Mt?Gt&&st(Gt):(t.Oi.error(sn+" "+li),li&&Ae(li))}))}):Be=="Electron"||tr(ee)&&ee.type=="Electron"?t.startScreenShotElectron(Ze,function(vt,Ft,Ct){vt?Ft&&st(Ft):Ct&&Ae(Ct)}):t.startScreenSharing(Ze,function(vt,Ft,Ct){vt?Ft&&st(Ft):Ct&&Ae(Ct)})}else{if(tr(S)&&!Yi(S.videoQuality)&&!cr(S.videoQuality))return t.Oi.error(sn+" videoQuality must be integer number"),void Ae(Ai.error.tt," videoQuality must be integer number");if(S&&S.audioBitrate){if(!cr(S.audioBitrate))return t.Oi.error(sn+" audioBitrate must be integer number"),void Ae(Ai.error.tt," audioBitrate must be integer number");if(S.audioBitrate<6)return t.Oi.error(sn+" audioBitrate cannot less 6 kbps"),void Ae(Ai.error.tt," audioBitrate cannot less 6 kbps");if(S.audioBitrate>510)return t.Oi.error(sn+" audioBitrate cannot greater than 510 kbps"),void Ae(Ai.error.tt," audioBitrate cannot greater than 510 kbps");t._i.audioBitRate=1e3*S.audioBitrate}if(S&&S.bitRate){if(!qi(S.bitRate))return t.Oi.error(sn+" bitrate must be integer number"),void Ae(Ai.error.tt," bitrate must be integer number");if(S.bitRate>10240)return t.Oi.error(sn+" bitrate cannot greater than 10 Mbps"),void Ae(Ai.error.tt," bitrate cannot greater than 10 Mbps")}if(S&&S.channelCount!==void 0&&!cr(S.channelCount))return t.Oi.error(sn+" channelCount must be integer number"),void Ae(Ai.error.tt," channelCount must be integer number");if(S&&S.videoQuality===4&&(!Rd(ie=S,ae=Ae)||!Cd(ie.bitRate,ae)))return;if(F&&F.bitRate){if(!cr(F.bitRate))return t.Oi.error(sn+" bitrate must be integer number"),void Ae(Ai.error.tt," bitrate must be integer number");if(F.bitRate>10240)return t.Oi.error(sn+" bitrate cannot greater than 10 Mbps"),void Ae(Ai.error.tt," bitrate cannot greater than 10 Mbps")}if(F&&F.audioBitrate){if(!cr(F.audioBitrate))return t.Oi.error("ze.cs.0 audioBitrate must be integer number"),void Ae(Ai.error.tt," audioBitrate must be integer number");if(F.audioBitrate<6)return t.Oi.error("ze.cs.0 audioBitrate cannot less 6 kbps"),void Ae(Ai.error.tt," audioBitrate cannot less 6 kbps");if(F.audioBitrate>510)return t.Oi.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),void Ae(Ai.error.tt," audioBitrate cannot greater than 510 kbps")}if(F&&F.channelCount!==void 0&&F.channelCount!==1&&F.channelCount!==2)return t.Oi.error("ze.cs.0 channelCount must number 1 or 2"),void Ae(Ai.error.tt," channelCount must number 1 or 2");var Rt={};if(S)be="camera",t.Oi.info(sn+" camera "+JSON.stringify(S)),Rt=S,Te.setAttributes({stream_type:Ai.stream_type("camera"),camera:Ai.camera(S)}),Li(Rt.video)||(Rt.video=!0),Li(Rt.audio)||(Rt.audio=!0);else if(F){be="custom",Rt=F;var At=Ar(F.source)?"MediaStream":"HTMLElement";Te.setAttributes({stream_type:Ai.stream_type("custom"),custom:Ai.custom(pn(pn({},F),{source_type:At}))})}t.startPreview(Rt,be,Pe,Ae,Te)}})},n.prototype.getStreamByCanvas=function(e){var t=this.Ri.checkPreview(e);if(t){var i=lt();if(i&&i.includes("15_1")&&!this._i.engineConfig.disableCanvasIOS15_1){var r=t.getStreamThroughCanvas(e);return t.localStream=r,t.streamFromCanvas=!0,t.streamFromCanvasTrack=r.getVideoTracks()[0],r}}return e},n.prototype.createZegoStream=function(e){var t=this;return e===void 0&&(e={}),new Ge(function(i,r){return ou(t,void 0,void 0,function(){var s,o,u;return su(this,function(m){switch(m.label){case 0:if(this.Oi.info("ze.czs.0 call"),!this.zegoWebRtc.rtcModules.advancedModule)return[3,5];if(e&&!tr(e))return[2,r(_t)];if(s=new xm(e,this.Oi,this.Ri,this._i,this,this.zegoWebRtc.rtcModules.advancedModule),o=new Mm(s),!e.autoCapture&&e.autoCapture!=null)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,o.zegoStream.autoCapture()];case 2:return m.sent(),[3,4];case 3:return u=m.sent(),[2,r(u)];case 4:return this.Oi.info("ze.czs.0 success"),i(o),[3,6];case 5:throw this.Oi.info("ze.czs.0 fail"),new Error("should use advanced module first");case 6:return[2]}})})})},n.prototype.destroyStream=function(e){this.Oi.info(ll+" call");var t=this.ji.createSpan(It.H,{key:xr},{key:""},zn.event);if(t.setAttributes({stop_reason:zn.stop_reason("destroyStream")}),!(Ar(e)||tr(e)&&e.getTracks))return this.Oi.error(ll+" localStream is not mediaStream or tracks is null"),void this.ji.setError(t,zn.error.mi);Ar(e)?(Ar(e)&&e.getTracks().length==0&&this.Oi.info(ll+" tracks is null"),this.stopPreview(e)):e.zegoStream&&e.zegoStream.destroy(),t.end()},n.prototype.startPublishingStream=function(e,t,i,r){var s,o,u,m=this,f=_r(t,this.Oi);this.Oi.info(Zr+" call "+e+" publishOption: "+JSON.stringify(i)+" isDataChannel: "+JSON.stringify(!!r)+" ms_id: "+(f==null?void 0:f.id));var a,S=!0,F="",ee=Vh,ie=ee.ft,ae=this.ji.createSpan(It.I,{key:xr},{key:jh,par:e},jh,!0);S&&e===void 0&&(this.Oi.error(Zr+(F="stream id required")),S=!1,a=ie),!S||e&&bi(e)||(this.Oi.error(Zr+" "+(F="stream id type wrong")),S=!1,a=ie),S&&e.length>256&&(this.Oi.error(Zr+" "+(F="stream id length limit")),S=!1,a=ie),S&&!Us(e)&&(this.Oi.error(Zr+" "+(F="stream ID contains illegal characters")),S=!1,a=ie),ae.setAttributes({stream_id:_s.stream_id(e)}),S&&(!f||Ar(f)&&f.getTracks().length==0)?(this.Oi.error(Zr+" "+(F="localStream wrong")),S=!1,a=ie):f&&f.getTracks().forEach(function(At){Jr(At,m.Oi,Zr)});var be=this.Ri.checkPreview(f);S&&!be&&(this.Oi.error(Zr+" "+(F=y)),S=!1,a=ee.wt);var Te=be==null?void 0:be.zegoCaptureStream;if(Te&&(Te.originAudioStream||Te.originVideoStream||(this.Oi.error(Zr+" "+(F="stream is not capturing")),S=!1,a=ee.kt)),be!=null&&be.isVideoEffectStarting&&(this.Oi.error(Zr+" "+(F=(a=ee.Et).message)),S=!1),S&&i&&!tr(i)&&(S=!1,a=ie,F="publishOption must be object"),S&&i&&!Yi(i.streamParams)&&!bi(i.streamParams)&&(this.Oi.error(Zr+" publishOption streamParams must be string"),S=!1,a=ie,F=" publishOption streamParams must be string"),S&&i&&!Yi(i.extraInfo)&&!bi(i.extraInfo)&&(this.Oi.error(Zr+" publishOption extraInfo must be string"),S=!1,a=ie,F=" publishOption extraInfo must be string"),S&&i&&!Yi(i.videoCodec)&&!bi(i.videoCodec)&&(this.Oi.error(Zr+" publishOption videoCodec must be string"),S=!1,a=ie,F=" publishOption videoCodec must be string"),!S||!this._i.isMultiRoom||i&&bi(i.roomID)&&i.roomID!=""||(S=!1,a=ie,F=" roomID is need if set multi room"),i&&i.videoCodec&&(i.videoCodec=i.videoCodec.toUpperCase()),S&&(this._i.waitPublishStreamList[e]={retryStart:!1,localStream:f,publishOption:i,isDataChannel:r}),this._i.useNetAgent&&this._i.roomList.length>0)this.Oi.info(Zr+" publish quick");else if(S&&this.rtm.isDisConnect()){if(this._i.connectChanged)return this._i.waitPublishStreamList[e].retryStart=!0,this.Oi.info(Zr+" connect changed"),!1;this.Oi.error(Zr+" not login"),S=!1,a=ee.St}if(!S)throw this.Oi.error(Zr+" "+F),this.ji.setError(ae,a),{errorCode:a==null?void 0:a.code,extendedData:F};i||(i={}),!i.videoCodec&&Bm()&&(be==null?void 0:be.previewType)=="custom"&&(!((o=be.mediaStreamConfig)===null||o===void 0)&&o.source)&&us((u=be.mediaStreamConfig)===null||u===void 0?void 0:u.source)&&(this.Oi.info(Zr+" Redmi note 8 uesed custom stream. change to VP8"),i.videoCodec="VP8");var Pe=kd(this._i.appid,this._i.idName,e),Ae=((s={})["_publish_"+e]={stream_sid:Pe},s);this.ji.setPublicPros(Ae),ae.setAttributes({stream_sid:_s.stream_sid(Pe),publish_option:_s.publish_option(i),enable_camera:_s.enable_camera(!!(be!=null&&be.videoTrack)),enable_mic:_s.enable_mic(!!(be!=null&&be.audioTrack)),use_na:_s.use_na(this._i.useNetAgent?1:0)}),i.audioBitRate=this._i.audioBitRate;var Be=i.roomID?i.roomID:this._i.roomList[0]?this._i.roomList[0].roomID:"",Ze=this._i.getRoomByRoomID(Be);if(!Ze)return this.Oi.error("zc.p.sps.1 room no found"),!1;ae.setAttributes({room_id:_s.room_id(Be)});var st=this.Ri.getSignalNodes();if(st)return this._i.publishStreamList[e]={state:Me.tryPublish,extra_info:i.extraInfo,roomID:Ze.roomID},this.Ri.setPublishStateStart(Ze,e,f,i,Pe,r)?(Ze.streamHandler.onPublishStateUpdate(zt,e,{code:0,message:""}),this.Ri.publisherList[e].serverUrls=st,this.Ri.startPublishingStream(e)):(this.Oi.info("zc.p.sps.1 cannot start publish"),!1);if(!this.Ri.setPublishStateStart(Ze,e,f,i,Pe,r))return this.Oi.error("zc.p.sps.1 cannot start publish"),!1;this._i.publishStreamList[e]={state:Me.tryPublish,extra_info:i.extraInfo,roomID:Ze.roomID},this.Oi.info("zc.p.sps.1 start publish"),Ze.streamHandler.onPublishStateUpdate(zt,e,{code:0,message:""});var Rt=this._i.useNetAgent;return this.ji.createSpan(It.H,{key:xi.event,par:e},{key:zl.event,par:e},zl.event,!0).setAttributes({reason:zl.reason("StartPublish")}),this.ji.createSpan(It.I,{key:xi.event,par:e},{key:Xi.event,par:e},Xi.event,!0).setAttributes({room_id:Gh.room_id(Ze==null?void 0:Ze.roomID),room_sid_string:Gh.room_sid_string(Ze==null?void 0:Ze.roomSessionID)}),!!Rt&&(this._i.appConfig?be!=null&&be.containBackgroundProcess&&this._i.supportBg===!1?(this.Oi.info("zc.p.sps.1 check not support background porcess"),Ze.streamHandler.onPublishStateUpdate(bt,e,ee.Gt),!1):(this.Ri.publisherList[e].serverUrls=["unified_rtc"],this.Ri.startPublishingStream(e,Rt),!0):(this.Ri.waitPublishList.push(e),!0))},n.prototype.updatePublishingStream=function(e,t){var i=this;return new Ge(function(r){var s=function(m,f){var a=qi(m)?{errorCode:m,extendedData:JSON.stringify({fail_reason:f})}:m;i.Oi.error(Il+" "+a.extendedData),r(a)};i.Oi.info(Il+" call by user");var o=i.Ri.checkPreview(e);if(o)if(o.zegoCaptureStream){var u=o.zegoCaptureStream;t!=Pn.audio&&t!=Pn.videoAndAudio||u.getAudioTracks().length?t!=Pn.video&&t!=Pn.videoAndAudio||u.getVideoTracks().length?t==Pn.audio?u.updateStreamAudioTrack(r,s,1):t==Pn.video?u.updateStreamVideoTrack(r,s,1):u.updateStreamVideoAndAudio(r,s,1):s(zu,Fu):s(Uu,Bu)}else s(_t.code,_t.message+", stream type wrong");else s(Mu,xu)})},n.prototype.activateSEIInsert=function(e,t,i){return!1},n.prototype.sendSEI=function(e,t){if(!ka())return this.Oi.warn(Fc+" browser not support "),!1;if(!tl(t))return this.Oi.error(Fc+" inData required Uint8Array"),!1;if(t.byteLength>4096)return this.Oi.error(Fc+" inData length limit"),!1;var i=this.Ri.publisherList[e];return i&&i.publisher?i.publisher.sendSEI(t):(this.Oi.warn(Fc+" publish not exist"),!1)},n.prototype.stopPublishingStream=function(e,t,i,r){var s,o,u,m;this.Oi.info(dl+" call ",e+(t?t.toString():"")+" "+i);var f=t||{code:0,message:""},a=this.ji.createSpan(It.I,{key:xr},{key:""},ss.event);if(!bi(e)||e=="")return this.Oi.error(dl+" streamID must be string and not empty"),this.ji.setError(a,ss.error.tt,"stream id type error"),!1;var S=this.Ri.publisherList[e];r&&!(!((s=S==null?void 0:S.publisher)===null||s===void 0)&&s.se)&&(f=Vh.Jt),a.setAttributes({stream_id:ss.stream_id(e),stream_sid:ss.stream_sid(S==null?void 0:S.streamSid),room_id:ss.room_id((u=(o=this.Ri.publisherList[e])===null||o===void 0?void 0:o.room)===null||u===void 0?void 0:u.roomID),error:f.code,message:f.message});var F=this.Ri.getRoomByStreamID(e),ee=S&&S.publisher&&S.publisher.state!==$||((m=S==null?void 0:S.retryStreamHandler)===null||m===void 0?void 0:m.isRetrying());if(this.Ri.stopPublishingStream(e,f),i&&delete this._i.waitPublishStreamList[e],this._i.publishStreamList[e]){if(this._i.publishStreamList[e].state>=Me.update_info&&F){(!t||t.code!==1102018)&&F.streamHandler.updateStreamInfo(e,rt);for(var ie=0;ie<F.streamList.length;ie++)if(F.streamList[ie].stream_id==e){!this._i.connectChanged&&F.streamList.splice(ie--,1);break}}delete this._i.publishStreamList[e]}return a.end(),F&&ee&&F.streamHandler.onPublishStateUpdate(bt,e,f),!0},n.prototype.setCaptureVolume=function(e,t){var i=this;return new Ge(function(r){i.Oi.info(Rl+" call");var s=_r(e,i.Oi),o=function(m){i.Oi.error(Rl+" "+m),r({errorCode:kc.tt.code,extendedData:JSON.stringify({fail_reason:kc.tt.message+" "+m})})},u=i.Ri.checkPreview(s);Ar(s)&&u?s.getAudioTracks().length!=0?!qi(t)||t<0||t>200?o(" volume must be number between 0 to 200"):(u.setVolume(t),r({errorCode:0,extendedData:""}),i.Oi.info(Rl+" call success")):o(" stream audioTrack no found"):o(" stream must be created by zego")})},n.prototype.getElectronScreenSources=function(){var e=this;return new Ge(function(t,i){var r=window.require("electron");r||(e.Oi.error("zc.gess.0 Electron is not exist"),i({message:"Electron is not exist"})),r.desktopCapturer.getSources({types:["window","screen"]}).then(function(s){var o=s.map(function(u){return{id:u.id,name:u.name,thumbnail:u.thumbnail}});t(o)}).catch(function(s){e.Oi.error("zc.gess.0 "+s),i(s)})})},n.prototype.startScreenShotChrome=function(e){if(ws.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),Ed("screenShare",{success:e},this._i.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.Oi.error(t),e(!1,null,{code:Ai.error.nt.code,message:Ai.error.nt.message+" "+t})}},n.prototype.startScreenSharing=function(e,t){var i=this;if("getDisplayMedia"in navigator.mediaDevices){var r=navigator.mediaDevices,s=!1;if(e.audio&&(s={noiseSuppression:!1,autoGainControl:!1,echoCancellation:!0},e.ANS!==void 0&&(s.noiseSuppression=e.ANS),e.AGC!==void 0&&(s.autoGainControl=e.AGC),e.AEC!==void 0&&(s.echoCancellation=e.AEC)),Ut()&&tr(e.video)){var o=e.video,u=o.width,m=o.height;tr(u)?e.video.width={max:u.max||u.ideal}:u&&(e.video.width={max:u}),tr(m)?e.video.height={max:m.max||m.ideal}:m&&(e.video.height={max:m})}this.Oi.info("zc.b.sss video config: "+JSON.stringify(e.video)),this.Oi.info("zc.b.sss audio config: "+JSON.stringify(s)),r.getDisplayMedia({audio:s,video:e.video}).then(function(f){t(!0,f)}).catch(function(f){i.Oi.error("zc.b.sss "+f),f.message&&f.message.toLowerCase()=="permission denied"?t(!1,null,Ai.error.et):t(!1,null,{code:Ai.error.nt.code,message:Ai.error.nt.message+" "+f})})}else this.Oi.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,Ai.error.it)},n.prototype.startScreenShotFirFox=function(e,t,i){var r=this,s={video:pn(pn({},t.video),{mediaSource:e}),audio:t.audio};navigator.mediaDevices.getUserMedia(s).then(function(o){o.getTracks().forEach(function(u){return Jr(u,r.Oi,"ze.ssf.1")}),i(!0,o)}).catch(function(o){r.Oi.error("ze.ssf.1 "+o),i(!1,null,{code:Ai.error.nt.code,message:Ai.error.nt.message+" "+o})})},n.prototype.startScreenShotElectron=function(e,t){var i=this;if(!window.require("electron"))return this.Oi.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:Ai.error.nt.code,message:Ai.error.nt.message+" Electron is not exist"});var r={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(r).then(function(s){s.getTracks().forEach(function(o){return Jr(o,i.Oi,"ze.sse.1")}),t(!0,s)}).catch(function(s){i.Oi.error("ze.sse.1 "+s),t(!1,null,{code:Ai.error.nt.code,message:Ai.error.nt.message+" "+s})})},n.prototype.startPreview=function(e,t,i,r,s){var o=this,u=null;return u=new vs(this.Oi,this._i,this.Ri,t),this.Ri.previewStreamList.push(u),u.startPreview(e,function(m){o.Ri.soundLevelDelegate&&(u==null||u.startSoundLevel()),t==="camera"&&((e==null?void 0:e.audio)===!1&&u&&(u.hasMicTrack=!1),u!=null&&u.micTrack&&(u.micTrack.enabled=o.Ri.isMicEnabled)),e!=null&&e.videoOptimizationMode&&o.Ri.setVideoTrackContentHint(m,e==null?void 0:e.videoOptimizationMode),o.Oi.debug("zsc.sp.0 call success"),!o._i.deviceInfos&&o.recordDevices(),i&&i(m)},function(m){o.Ri.previewStreamList=o.Ri.previewStreamList.filter(function(f){return f!==u}),r&&r(m)},s),!0},n.prototype.stopPreview=function(e){if(!e)return this.Oi.warn("zsc.sp.0 localStream null"),!1;for(var t in this.Ri.publisherList)this.Ri.publisherList[t].localStream===e&&(this.Ri.publisherList[t].localStream=null);var i=this.Ri.checkPreview(e);return i?(i.previewSuc&&(i.stopPreview(),this.Ri.removePreview(i)),!0):(this.Oi.warn("zsc.sp.0 "+I),!1)},n.prototype.recordDevices=function(e,t){var i,r=this;this.Oi.info("zsc.rd.0 call"),Dc(function(s){r._i.deviceInfos={microphones:s.microphones,speakers:s.speakers,cameras:s.cameras},r.quickDeviceChangeDetection.lastRecordDeviceTime=performance.now(),e&&e(s)},function(s){r.Oi.warn("zsc.rd.0 getDevices err:",s),t&&t(s)}),((i=navigator.mediaDevices)===null||i===void 0?void 0:i.ondevicechange)!==void 0&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(s){return ou(r,void 0,void 0,function(){var o,u=this;return su(this,function(m){return this.Oi.info("zsc.rd.0 devicechange"),this._i.deviceChangeTimer&&(clearTimeout(this._i.deviceChangeTimer),this._i.deviceChangeTimer=null),o=function(){Dc(function(f){var a,S,F,ee,ie,ae;u.Oi.info("zsc.rd.0 get devices success. ".concat(JSON.stringify(f)));var be=!0,Te=[],Pe=[];if(Ut()&&((S=(a=u._i.deviceInfos)===null||a===void 0?void 0:a.cameras)===null||S===void 0?void 0:S.length)===1&&((F=u._i.deviceInfos)===null||F===void 0?void 0:F.cameras[0].deviceID)==="")u.Oi.info("zsc.rd.0 cameras not accurate");else{for(var Ae=function(Ct){var Mt=u._i.deviceInfos.cameras[Ct];f.cameras.find(function(Gt){return Gt.deviceID===Mt.deviceID})||Te.push(Mt)},Be=0;Be<u._i.deviceInfos.cameras.length;Be++)Ae(Be);u._i.deviceStateOut=!1;var Ze=!1;Te.length>0&&(Ze=!0),Te.forEach(function(Ct){for(var Mt in u.Ri.publisherList){var Gt=u.Ri.publisherList[Mt],li=Gt.publisher;Gt.localStream&&Gt.cameraLabel!==""&&Gt.cameraLabel===Ct.deviceName&&(Ze=!1,li.sendStreamStatus(-6,li.mic_status),be=!1,u._i.actionListener("_deviceError",kr,Ct.deviceName,"camera"),u._i.actionListener("deviceError",kr,Ct.deviceName)),Gt.localStream&&Gt.localStream.getAudioTracks().length===0&&(Ze=!1)}Ze&&(u._i.deviceStateOut=!0),u.deviceInterruptReport(0,Ct,"camera"),be=!1,u._i.actionListener("videoDeviceStateChanged","DELETE",Ct)}),f.cameras.filter(function(Ct){return!u._i.deviceInfos.cameras.find(function(Mt){return Mt.deviceID===Ct.deviceID})}).forEach(function(Ct){u.deviceInterruptReport(1,Ct,"camera"),be=!1,u._i.actionListener("videoDeviceStateChanged","ADD",Ct)})}Ut()&&((ie=(ee=u._i.deviceInfos)===null||ee===void 0?void 0:ee.microphones)===null||ie===void 0?void 0:ie.length)===1&&((ae=u._i.deviceInfos)===null||ae===void 0?void 0:ae.microphones[0].deviceID)===""?u.Oi.info("zsc.rd.0 microphones not accurate"):((Pe=u._i.deviceInfos.microphones.filter(function(Ct){return!f.microphones.find(function(Mt){return Mt.deviceID===Ct.deviceID})})).forEach(function(Ct){for(var Mt in u.Ri.publisherList){var Gt=u.Ri.publisherList[Mt],li=Gt.publisher;Gt.localStream&&Gt.microLabel!==""&&(Gt.microLabel===Ct.deviceName||Gt.microLabel!==""&&Gt.microLabel.includes(Ct.deviceName))&&(li.sendStreamStatus(li.camera_status,-6),be=!1,u._i.actionListener("_deviceError",kr,u.Ri.publisherList[Mt].microLabel,"micro"),u._i.actionListener("deviceError",kr,u.Ri.publisherList[Mt].microLabel))}u.deviceInterruptReport(0,Ct,"micro"),be=!1,u._i.actionListener("audioDeviceStateChanged","DELETE","Input",Ct)}),f.microphones.filter(function(Ct){return!u._i.deviceInfos.microphones.find(function(Mt){return Mt.deviceID===Ct.deviceID})}).forEach(function(Ct){u.deviceInterruptReport(1,Ct,"micro"),be=!1,u._i.actionListener("audioDeviceStateChanged","ADD","Input",Ct)}));var st=u._i.deviceInfos.speakers.filter(function(Ct){return!f.speakers.find(function(Mt){return Mt.deviceID===Ct.deviceID})}),Rt=f.speakers.filter(function(Ct){return!u._i.deviceInfos.speakers.find(function(Mt){return Mt.deviceID===Ct.deviceID})});st.forEach(function(Ct){var Mt=u.ji.createSpan(It.H,{key:xr},{key:""},as);Mt.setAttributes({reason_type:zo("delete"),device:mo(Ct.deviceID),device_name:mo(Ct.deviceName)}),Mt.end(),be=!1,u._i.actionListener("audioDeviceStateChanged","DELETE","Output",Ct)}),Rt.forEach(function(Ct){var Mt=u.ji.createSpan(It.H,{key:xr},{key:""},as);Mt.setAttributes({reason_type:zo("add"),device:mo(Ct.deviceID),device_name:mo(Ct.deviceName)}),Mt.end(),be=!1,u._i.actionListener("audioDeviceStateChanged","ADD","Output",Ct)}),be&&u.quickDeviceChangeDetection.onDeviceNoChangeQuickly(f);var At=pn({},u._i.deviceInfos);if(u._i.deviceInfos={microphones:f.microphones,speakers:f.speakers,cameras:f.cameras},u._i.autoSwitchDeviceSetting.microphone){var vt=u._i.deviceInfos.microphones;Pe&&Pe.length!==0&&vt.length!=0&&u.Ri.previewStreamList.forEach(function(Ct){return ou(u,void 0,void 0,function(){var Mt,Gt,li,kt,ti,vi,Lt;return su(this,function(ui){switch(ui.label){case 0:return Mt=Ct.localStream,Gt=vt[0].deviceID,kt=(li=Ct.audioTrack)==null?void 0:li.getSettings().deviceId,ti=!1,kt&&kt==="default"?(vi=At.microphones.find(function(Jt){return Jt.deviceID==="default"}).deviceName,Lt=vt.find(function(Jt){return Jt.deviceID==="default"}).deviceName,ti=Lt!==vi):kt!==""&&(ti=Pe.some(function(Jt){return Jt.deviceID===kt})),Mt&&ti&&Gt!==""?(this.Oi.info("zsc.rd.0 auto switch audio device. "+Gt),[4,this.zegoWebRtc.useAudioDevice(Mt,Gt)]):[3,2];case 1:ui.sent(),ui.label=2;case 2:return[2]}})})})}if(u._i.autoSwitchDeviceSetting.camera){var Ft=u._i.deviceInfos.cameras;Te&&Te.length!==0&&Ft.length!=0&&u.Ri.previewStreamList.forEach(function(Ct){return ou(u,void 0,void 0,function(){var Mt,Gt,li,kt,ti,vi,Lt;return su(this,function(ui){switch(ui.label){case 0:return Mt=Ct.localStream,Gt=Ft[0].deviceID,kt=(li=Ct.videoTrack)==null?void 0:li.getSettings().deviceId,ti=!1,kt&&kt==="default"?(vi=At.cameras.find(function(Jt){return Jt.deviceID==="default"}).deviceName,Lt=Ft.find(function(Jt){return Jt.deviceID==="default"}).deviceName,ti=Lt!==vi):kt!==""&&(ti=Te.some(function(Jt){return Jt.deviceID===kt})),Mt&&ti&&Gt!==""?(this.Oi.info("zsc.rd.0 auto switch video device. "+Gt),[4,this.zegoWebRtc.useVideoDevice(Mt,Gt)]):[3,2];case 1:ui.sent(),ui.label=2;case 2:return[2]}})})})}},function(f){u.Oi.warn("zsc.rd.0 getDevices err:",f)})},this._i.deviceChangeTimer=setTimeout(o,500),[2]})})})},n.prototype.getStreamStats=function(e){var t,i,r;return this.Oi.info("zc.p.0.gqs call"),Ar(e)&&e.getTracks().length>0?r=(t=this.Ri.checkPublish(e))===null||t===void 0?void 0:t.publisher:bi(e)&&(r=(i=this.Ri.publisherList[e])===null||i===void 0?void 0:i.publisher),r?(r==null?void 0:r.qualityHandler.currentQuality)||null:(this.Oi.error("zsc.sp.0 stream is not publishing"),null)},n.prototype.startWaitPublish=function(){var e=this;this.Ri.waitPublishList.forEach(function(t){e._i.useNetAgent&&(e.Ri.publisherList[t].serverUrls=["unified_rtc"]),e.Ri.startPublishingStream(t,e._i.useNetAgent)}),this.Ri.waitPublishList=[]},n.prototype.deviceInterruptReport=function(e,t,i){var r=i==="camera"?Qu:Wu,s=this.ji.createSpan(It.H,{key:xr},{key:""},r.event);s.setAttributes({changed_type:r.interrupt(e),device:r.device(t.deviceID),device_name:r.device_name(t.deviceName)}),s.end()},n.prototype.initCopyMusic=function(e){if(this.Ri.useCopyMusic&&!isNaN(this._i.engineConfig.choirRole)){var t=this.Ri.checkPreview(e),i=this._i.roomList[0];if(i){var r=Array.from(new Set(i.streamList.map(function(o){return o.id_name}))),s=r.length+(r.includes(this.Ri.userid)?0:1);t&&!t.onlyPreview&&t.setVolumeFactorByUserCount(s)}}},n.prototype.setEmptyAudioTrack=function(e,t){if(this._i.engineConfig.keepAudioTrack&&e.getAudioTracks().length==0){var i=t.getEmptyAudioTrack();i&&(i.enabled=!1,e.addTrack(i),t&&(t.hasEmptyAudioTrack=!0))}},n.prototype.addShareScreenEnd=function(e){var t=this,i=e.getVideoTracks()[0];i&&(i.onended=function(){var r=t.ji.createSpan(It.H,{key:xr},{key:""},zn.event);r.setAttributes({stop_reason:zn.stop_reason("screenSharingEnded")}),e&&t.stopPreview(e),r.end(),t._i.actionListener("screenSharingEnded",e)})},n}(),Ws=function(){return Ws=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Ws.apply(this,arguments)},zm=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Fm=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},qn=sr,Hm=Di.event,qm=Xe,Fl=Di,Qh=function(){function n(e,t,i,r,s){this.Oi=e,this.dataReport=t,this._i=i,this.Ri=r,this.rtm=s}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.startPlayingStream=function(e,t,i){var r=this;return this.Oi.info(Na+" call ",e," playOption: ",JSON.stringify(function(s,o){var u={};if(s)for(var m=0,f=Object.keys(s);m<f.length;m++){var a=f[m];o.includes(a)||(u[a]=s[a])}return u}(t||{},["CDNVideo","CDNPlayer"]))," isDataChannel: ",JSON.stringify(!!i)),new Ge(function(s,o){return r._handlePlayStream(e,t,s,o,i)})},n.prototype._handlePlayStream=function(e,t,i,r,s){var o,u,m=this,f=qn,a=this.ji.createSpan(It.I,{key:xr},{key:qn.event,par:e},qn.event,!0),S=function(vt,Ft){m.Oi.error(Na+" "+(Ft||vt.message)),m.ji.setError(a,vt),r&&r(Ws(Ws({},vt),{errorCode:vt.code,extendedData:vt.message+(Ft?" "+Ft:"")}))};if(e===void 0||!bi(e)||e==="")return S(f.error.Kt,"stream id type error"),!1;if(e.length>256)return S(f.error.Wt,"stream id length limit 256"),!1;if(!Us(e))return S(f.error.Xt),!1;if(!Yi(t)&&!tr(t))return S(f.error.Kt,"playOption must be object"),!1;var F=kd(this._i.appid,this._i.idName,e),ee=((o={})["_play_"+e]={stream_sid:F},o);this.ji.setPublicPros(ee);var ie,ae=Ws(Ws({},t),{CDNVideo:void 0,CDNPlayer:void 0});if(a.setAttributes({stream_id:qn.stream_id(e),stream_sid:qn.stream_sid(F),play_option:qn.play_option(ae),video_codec_id:qn.video_codec_id(t==null?void 0:t.videoCodec),use_na:qn.use_na(this._i.useNetAgent?1:0),biz_product:(t==null?void 0:t.resourceMode)==Et.DG?1:0}),this._i.customUrl&&this._i.customUrl.length!=0)this.Oi.info("zc.p.sps.1 customUrl "+JSON.stringify(this._i.customUrl)),ie=this._i.customUrl;else{var be=this._i.settingConfig.getSetting("signal_nodes",!0);be&&In(be)&&be.length>0&&(ie=be,this.Oi.info("zc.p.sps.1 setting config signal_nodes "+JSON.stringify(be)))}if(ie){var Te=this.Ri.setPlayStateStart(e,t,F,s);return Te!==!0?(S(JSON.parse(JSON.stringify(Te)),"cannot start play"),!1):(this.Ri.onPlayStateUpdate(ke,e,{code:0,message:""}),this.Ri.playerList[e].serverUrls=ie,this.Ri.startPlayingStream(e,!1,function(vt){i&&i(vt)}))}if(this._i.useNetAgent&&this._i.playAccelerate&&this._i.roomList.length>0)this.Oi.info(Na+" play accelerate");else if(this.rtm.isDisConnect())return S(f.error.Yt),!1;this._i.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var Pe=this._i.settingConfig.getSetting("resource_mode",!0);Pe!==void 0&&(this.Oi.info(Na," setting resource_mode "+Pe),!t&&(t={}),t.resourceMode=Pe);var Ae=this.Ri.setPlayStateStart(e,t,F,s);if(Ae!==!0)return S(JSON.parse(JSON.stringify(Ae)),"cannot start play"),!1;if(this.Ri.onPlayStateUpdate(ke,e,{code:0,message:""}),this.Ri.playSuccessCallBackList[e]=function(vt){i&&i(vt)},r&&(this.Ri.playErrorCallBackList[e]=r),t&&t.resourceMode&&[1,3].includes(t.resourceMode)&&this.Ri.playerList[e].playMode==tt.CDN)return this.Ri.startPlayingStream(e,this._i.useNetAgent,this.Ri.playSuccessCallBackList[e],!0);var Be=Un;this.ji.createSpan(It.H,{key:qn.event,par:e},{key:Be.event,par:e},Be.event,!0).setAttributes({reason:Be.reason("StartPlay")});var Ze=Hm;(t==null?void 0:t.resourceMode)!==Et.L3&&(t==null?void 0:t.resourceMode)!==Et.DG||(Ze=qm);var st=this.ji.createSpan(It.I,{key:qn.event,par:e},{key:Ze,par:e},Ze,!0),Rt=(u=this.Ri.playerList[e])===null||u===void 0?void 0:u.room;st.setAttributes({room_id:Fl.room_id(Rt==null?void 0:Rt.roomID),room_sid_string:Fl.room_sid_string(Rt==null?void 0:Rt.roomSessionID),stream_id:Fl.stream_id(e)});var At=this._i.useNetAgent;return!!At&&(this._i.appConfig?(this.Ri.playerList[e].serverUrls=(t==null?void 0:t.resourceMode)===2?["unified_l3"]:["unified_rtc"],this.Ri.startPlayingStream(e,At,this.Ri.playSuccessCallBackList[e]),!0):(this.Ri.waitPlayList.push(e),!0))},n.prototype.stopPlayingStream=function(e,t,i){var r,s,o;this.Oi.info(zc+" call ",e);var u=this.ji.createSpan(It.I,{key:xr},{key:""},xo.event);if(!bi(e)||e==="")return this.Oi.error(zc+" streamid must be string and not empty"),this.ji.setError(u,xo.error.tt,"stream id type error"),void delete this._i.reportSeqList.stopPlay[e];var m=this.Ri.playerList[e],f=m==null?void 0:m.player;u.setAttributes({stream_id:xo.stream_id(e),room_id:xo.room_id((r=this.Ri.playerList[e])===null||r===void 0?void 0:r.room.roomID),webrtc_sid:xo.webrtc_sid(f==null?void 0:f.sessionId),stream_sid:xo.stream_sid(m==null?void 0:m.streamSid),biz_product:m&&((s=m.playOption)===null||s===void 0?void 0:s.resourceMode)==Et.DG?1:0});var a=m&&f&&f.state!==M||((o=m==null?void 0:m.retryStreamHandler)===null||o===void 0?void 0:o.isRetrying());i&&!t&&(f==null?void 0:f.state)!==G&&(t=qn.error.di);var S=[1,3].includes(f==null?void 0:f.resourceMode)&&(m==null?void 0:m.playMode)===tt.CDN;for(var F in this.Ri.stopPlayingStream(e,t),this._i.streamUrlMap)if(this._i.streamUrlMap[F]===e){delete this._i.streamUrlMap[F];break}t?this.ji.setError(u,t):u.end(),a&&this.Ri.onPlayStateUpdate(at,e,t||{code:0,message:""},{isCDN:S}),this.Oi.debug(zc+" call success")},n.prototype.mutePlayStream=function(e,t,i){return new Ge(function(r,s){r(!1)})},n.prototype.setStreamAudioOutput=function(e,t){return!1},n.prototype.setAudioFrameCallback=function(e,t,i){var r=this;return new Promise(function(s,o){return zm(r,void 0,void 0,function(){var u,m,f,a;return Fm(this,function(S){switch(S.label){case 0:return u=function(F){o({errorCode:F.errorCode||F.code,extendedData:F.extendedData||F.message})},bi(e)?i!=null&&i.frameSize&&![256,512,1024,2048,4096,8192,16384].includes(i==null?void 0:i.frameSize)?(this.Oi.error("zc.safc.0 option frameSize invalid"),u(_t),[2]):(m=this.Ri.playerList[e])&&(m!=null&&m.player)?((a=(f=m.player).playStream)===null||a===void 0?void 0:a.getAudioTracks().length)===0?(this.Oi.error("zc.safc.0 no stream or no audio"),u(rr),[2]):[4,this.Ri.acMgr.registerModule("audioPCMExporter",`class AudioPcmDataProcessor extends AudioWorkletProcessor {
  // 0. Determine the buffer size (this is the same as the 1st argument of ScriptProcessor)

  constructor(options) {
    super();
    // console.error("AudioPcmDataProcessor");
    this.bufferSize = 1024;
    // 1. Track the current buffer fill level
    this._bytesWritten = 0;

    // 2. Create a buffer of fixed size
    this.channelCount = 2;

    this.inputChannels = [];
    this.bufferSize = options.processorOptions.bufferSize || this.bufferSize;
    this.initBuffer();
    this.port.postMessage({
      type: "msg",
      msg: "init"
    });
  }

  initBuffer() {
    this._bytesWritten = 0;
  }

  process(inputList) {
    // console.warn("process", inputList[0]);
    this.port.postMessage({
      type: "proces",
      len: inputList[0].length
    });
    if (this.isBufferFull()) {
      this.flush();
    }

    const _inputChannels = inputList[0];
    this.channelCount = _inputChannels.length;
    if (_inputChannels && _inputChannels.length) {
      // 创建缓存输入
      if (!this.inputChannels[0]) {
        for (let i = 0; i < this.channelCount; i++) {
          this.inputChannels[i] = new Float32Array(this.bufferSize);
        }
      }

      const bufferLen = _inputChannels[0].length;
      for (let j = 0; j < bufferLen; j++) {
        for (let i = 0; i < _inputChannels.length; i++) {
          this.inputChannels[i][this._bytesWritten] = _inputChannels[i][j];
        }
        this._bytesWritten++;
      }
    }
    return true;
  }

  isBufferEmpty() {
    return this._bytesWritten === 0;
  }

  isBufferFull() {
    // console.warn(this._bytesWritten, this.bufferSize, this.channelCount);
    return this._bytesWritten === this.bufferSize;
  }

  flush() {
    this.port.postMessage({
      type: "process",
      channels: this.inputChannels,
      channelCount: this.inputChannels.length,
      sampleRate: sampleRate
    });
    this.initBuffer();
  }
}

try {
  registerProcessor("audio-pcm-data-processor", AudioPcmDataProcessor);
} catch (error) {
  console.error("registerProcessor", error);
}
`)]:(this.Oi.error("zc.safc.0 player not found"),u(rr),[2]):(this.Oi.error("zc.zc.safc.0 streamID must be string"),u(_t),[2]);case 1:return S.sent(),f.setAudioFrameCallback(t,i),s({errorCode:0,extendedData:""}),[2]}})})})},n.prototype.startWaitPlay=function(){var e=this;this.Ri.waitPlayList.forEach(function(t){var i,r=e.Ri.playerList[t];r.serverUrls=((i=r.playOption)===null||i===void 0?void 0:i.resourceMode)===2?["unified_l3"]:["unified_rtc"],e.Ri.startPlayingStream(t,e._i.useNetAgent,e.Ri.playSuccessCallBackList[t])}),this.Ri.waitPlayList=[]},n.prototype.getStreamStats=function(e){var t,i,r;return this.Oi.info("zc.p.1.gqs call"),bi(e)&&(r=(t=this.Ri.playerList[e])===null||t===void 0?void 0:t.player),r&&(!((i=r==null?void 0:r.qualityHandler)===null||i===void 0)&&i.currentQuality)?r.qualityHandler.currentQuality||null:(this.Oi.error("zsc.sp.0 stream is not playing"),null)},n}(),jm=function(){function n(e,t,i,r){this.Ri=e,this._i=t,this.Oi=i,this.rtm=r}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.setStreamExtraInfo=function(e,t){var i=this;return new Ge(function(r,s){var o=i.Ri.getRoomByStreamID(e),u=bd,m=i.ji.createSpan(It.H,o?{key:dn,par:o==null?void 0:o.roomID}:{key:Cn},{key:""},u.event);m.setAttributes({stream_id:u.stream_id(e),stream_extra_info:u.stream_extra_info(t)});var f=function(a,S){S===void 0&&(S=""),i.Oi.error("zb.ssei "+S),i.ji.setError(m,a,S),s({errorCode:a.code,extendedData:a.message+" "+S})};bi(e)&&e!=""?bi(t)&&t!=""?i.rtm.isDisConnect()?f(u.error.bi,"not login"):i._i.publishStreamList[e]?o?o.streamHandler.setStreamExtraInfo(e,t,function(a,S){var F,ee,ie,ae;if(((F=a==null?void 0:a.body)===null||F===void 0?void 0:F.err_code)===0||(a==null?void 0:a.errorCode)===0)m.setAttributes({send_seq:u.send_seq(S)}),m.end(),r({errorCode:((ee=a==null?void 0:a.body)===null||ee===void 0?void 0:ee.err_code)===0?(ie=a==null?void 0:a.body)===null||ie===void 0?void 0:ie.err_code:a==null?void 0:a.errorCode,extendedData:""});else{var be={errorCode:((ae=a==null?void 0:a.body)===null||ae===void 0?void 0:ae.err_code)||(a==null?void 0:a.code)};i.ji.setError(m,be),s(be)}},f):f(u.error.bi,"not login"):f(u.error.gi):f(u.error.tt,"extraInfo must be string and no empty"):f(u.error.tt,"streamID must be string and not empty")})},n}(),Vm=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Gm=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},bs=Un,Zh=sr.event,au=sr.error,cu=xi.error,Ja=function(){function n(e,t,i,r,s,o,u){var m=this;this.Oi=e,this.dataReport=t,this._i=i,this.Ri=r,this.rtm=s,this.ac=o,this.zegoWebRtc=u,this.beforeunloadListener=function(){for(var f=0;f<m.Ri.previewStreamList.length;f++)m.Ri.previewStreamList[f].stopPreview();m.Ri.previewStreamList=[]},this.pagehideListener=function(){for(var f in window.event&&(window.event.cancelBubble=!0),m.Ri.publisherList)m.publishModule.stopPublishingStream(f);for(var f in m.Ri.playerList)m.playModule.stopPlayingStream(f)},this.messageListener=function(f){var a=f.data,S=a.type;S==="SS_DIALOG_SUCCESS"&&m.screenStreamFrom(a.streamId,a.canRequestAudioTrack,nl("screenShare",m._i.callbackList)),S==="SS_DIALOG_CANCEL"&&nl("screenShare",m._i.callbackList)(!1,null,S)},this.offlineListener=function(){var f="zc.off.0 ";console.error("-----offline",Date.now()),m.Oi.info(f+B),m._i.networkState=he.offline,m._i.useNetAgent&&m.Oi.info(f+"use netAgent")},this.onlineListener=function(f){for(var a in m.Oi.info("zc.on.0 network is online"),m._i.networkState=he.online,m.Ri.publisherList){var S=m.Ri.publisherList[a].publisher,F=m.Ri.publisherList[a].retryStreamHandler;S.state==$||S.stateNego!==He.iceConnected?!F.isOverTime&&F.publishStateHandle(bt,a,cu.yt):S.state==le&&F.stopMaxTime()}for(var a in m.Ri.playerList){var ee=m.Ri.playerList[a],ie=ee.player,ae=ee.playMode,be=(F=ee.retryStreamHandler,ee.cdnPlayer);ae==tt.CDN&&be&&(be.canRetry=!1),ie.state==M||ae!==tt.CDN&&ie.stateNego!==ve.iceConnected?!F.isOverTime&&F.playStateHandle(at,a,au.ei):ie.state==G&&F.stopMaxTime()}},this.visibilitychangeListener=function(f){var a="";a=Tt.visibilityState==="visible"?"foreground":"background";var S=m.ji.createSpan(It.H,{key:xr},{key:""},Ms);S.setAttribute("state",Er(a)),S.end()},this.safariPagehideListener=function(f){var a=m.ji.createSpan(It.H,{key:xr},{key:""},Ms);a.setAttribute("state",Er("background")),a.end()},this.safariPageshowListener=function(f){var a=m.ji.createSpan(It.H,{key:xr},{key:""},Ms);a.setAttribute("state",Er("foreground")),a.end()},this.publishModule=new Wh(this.Oi,this.dataReport,this._i,this.Ri,this.rtm,this.zegoWebRtc),this.playModule=new Qh(this.Oi,this.dataReport,this._i,this.Ri,this.rtm),this.Ri.playModule=this.playModule,this.initAdvance(),this.streamCommon=new jm(r,i,e,s),this.initStreamCDN(),this.initAudioMix(),this.init()}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"logger",{get:function(){return this.Oi},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stateCenter",{get:function(){return this._i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"streamCenter",{get:function(){return this.Ri},enumerable:!1,configurable:!0}),n.prototype.init=function(){var e=this;this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler(),this.bindEngineDestroyListener(),this.bindListener("_engineConfigUpdate",function(t){isNaN(t.choirRole)||e.updatePreviewerVolumeFactor()})},n.prototype.initAudioMix=function(){},n.prototype.initAdvance=function(){},n.prototype.initStreamCDN=function(){},n.prototype.bindWindowListener=function(){var e=Qt(),t=e.match(/iPad/i)||e.match(/iPhone/i)?"pagehide":this._i.browser==="firefox"?"beforeunload":"unload";window.addEventListener("beforeunload",this.beforeunloadListener),window.addEventListener(t,this.pagehideListener),window.addEventListener("message",this.messageListener),window.addEventListener("offline",this.offlineListener),window.addEventListener("online",this.onlineListener),Tt.addEventListener("visibilitychange",this.visibilitychangeListener),Ut()&&(window.addEventListener("pagehide",this.safariPagehideListener),window.addEventListener("pageshow",this.safariPageshowListener))},n.prototype.offWindowListner=function(){var e=Qt(),t=e.match(/iPad/i)||e.match(/iPhone/i)?"pagehide":this._i.browser==="firefox"?"beforeunload":"unload";window.removeEventListener("beforeunload",this.beforeunloadListener),window.removeEventListener(t,this.pagehideListener),window.removeEventListener("message",this.messageListener),window.removeEventListener("offline",this.offlineListener),window.removeEventListener("online",this.onlineListener),Tt.removeEventListener("visibilitychange",this.visibilitychangeListener),Ut()&&(window.removeEventListener("pagehide",this.safariPagehideListener),window.removeEventListener("pageshow",this.safariPageshowListener))},n.prototype.bindEngineDestroyListener=function(){var e=this;this._i.listenerList._engineDestroy.push(function(){e.offWindowListner()})},n.prototype.bindRTMListener=function(){var e=this;this.rtm._on("_settingCanFetch",function(t){return Vm(e,void 0,void 0,function(){var i,r,s,o;return Gm(this,function(u){return this.Oi.info("zc.scf stream config "+JSON.stringify(t).length),i=["auto_to_tcp","udp_max_fail_num","probe_started_num","hardware_encode","camera_hard_encode","custom_hard_encode","camera_width","camera_height","camera_framerate","camera_audio_bitrate","camera_video_bitrate","sound_level_api_type","open_mini_sdp","sound_sample_interval","AEC","AGC","ANS","publish_video_codec","screen_video_bitrate","l3_play_buffer_ms","udp_or_tcp","resource_mode","bitrate_mode","bg_fps_stat"],t&&(this._i.settingConfig.setSetting(t.setting,i),!((s=t.setting)===null||s===void 0)&&s.open_mini_sdp&&(r=t.setting.open_mini_sdp,(o=this.Ri)===null||o===void 0||o.initMiniSdpWorker(r.open_mini_sdp))),[2]})})}),this.rtm._on("_appConfigRsp",function(){e.Oi.info("zc.acr call "),e._i.appConfig=e.rtm.getAppConfig(),e.Ri.reConnectSignals(),e.publishModule.startWaitPublish(),e.playModule.startWaitPlay()}),this.rtm._on("_netAppConfigRsp",function(t){e._i.netAppConfig=t,e._i.supportBg=e.checkBackgroundCapacity()}),this.rtm._on("_roomLogin",function(t,i){e._i.appid=e.rtm.getAppID(),e._i.idName=e.rtm.getUserID(),e._i.nickName=e.rtm.getUserName(),e._i.testEnvironment=e.rtm.isTestEnvironment(),e._i.isMultiRoom=e.rtm.getMultiRoom(),e._i.useNetAgent=e.rtm.isUseNetAgent,e.Ri.setSessionInfo(e._i.appid,e._i.idName,e._i.testEnvironment);var r=e._i.getRoomByRoomID(t);if(!r){var s=new Za(e.Oi,e._i,e.rtm,e.Ri,t);e.bindStreamHandler(s),e._i.roomList.push(r={roomID:t,streamHandler:s,sessionID:"",roomSessionID:"",token:i,isResetRoom:!1,streamList:[],streamInfoList:[]}),e.Ri.connectStreamSignal(t,i)}}),this.rtm._on("roomLoginResponse",function(t){e.Oi.info("zc.rlr call "+JSON.stringify(t));var i=t.header.room_id||t.body.room_id;e._i.appConfig=e.rtm.getAppConfig();var r=e.rtm.getToken(i),s=e.rtm.getSessionId(i),o=e.rtm.getRoomSessionID(i),u=e._i.getRoomByRoomID(i);if(!u){var m=new Za(e.Oi,e._i,e.rtm,e.Ri,i);e.bindStreamHandler(m),e._i.roomList.push(u={roomID:i,streamHandler:m,sessionID:s,roomSessionID:o,token:r,isResetRoom:!1,streamList:[],streamInfoList:[]})}if(u.sessionID=s,u.roomSessionID=o,e._i.tempRoomList.length>0)for(var f=function(S){var F=e._i.tempRoomList[S],ee=F.roomID,ie=F.streamList,ae=e._i.roomList.find(function(be){return be.roomID===ee});ae&&(ae.streamList=ie.filter(function(be){var Te=e.Ri.stopedPlayerList[be==null?void 0:be.stream_id];return!!(Te&&Te.state<=6)}),e._i.tempRoomList[S].streamList=[])},a=0;a<e._i.tempRoomList.length;a++)f(a);if(t.body.stream_fetch_flag===1)return e.Oi.info("zc.rlr stream fetch "+i),u.streamHandler.room=u,void u.streamHandler.fetchStreamList();u.streamHandler.handleStreamStart(t,u),e.Ri.checkStreamReport(),e.Oi.info("zc.rlr end "+i)}),this.rtm._on("_connectChanged",function(t,i){e.Oi.info("zc.cc.0 "+t+" "+JSON.stringify(i)),t==="connecting"?e._i.connectChanged=!0:t==="connected"&&(e._i.connectChanged=!1,e._i.useNetAgent=e.rtm.isUseNetAgent,e.handleWaitPublishAndPlays(i))}),this.rtm._on("HBResponse",function(t,i){var r,s=(r=t==null?void 0:t.header)===null||r===void 0?void 0:r.room_id,o=e._i.getRoomByRoomID(s||i);o==null||o.streamHandler.patchStreamList(t)}),this.rtm._on("_roomStateUpdate",function(t,i,r,s,o){if(i==="CONNECTED"&&(e.Ri.chargeInfosSaver.checkAndReport(),e.Ri.billingTimer.shouldReportRoomTime&&e.Ri.billingTimer.startChargeInfosUpload()),i=="DISCONNECTED"){e.Oi.info("zc.rsu "+t+" disconnected "+(r?r+" ":"")+(s||"")+o),e.Ri.billingTimer.stopChargeInfosUpload();var u=e._i.getRoomByRoomID(t);if(u){var m=e._i.roomList.findIndex(function(f){return f.roomID==t});u.isResetRoom=!0,u.streamHandler.reset(),e.Ri.reset(t,r,o),e._i.roomList.splice(m,1),o?e._i.tempRoomList.push(u):e._i.tempRoomList=e._i.tempRoomList.filter(function(f){return f.roomID!==t})}e.Ri.disconnectStreamSignal()}else e.Oi.info("zc.rsu "+t+" state: "+i)}),this.rtm._on("_tokenRenewed",function(t,i){e.Oi.info("zc.tr roomID:"+i),e.Oi.remoteReport("zc.tr token:"+t);var r=e._i.getRoomByRoomID(i);r&&(r.token=t)}),this.rtm._on("_tokenExpired",function(t){var i,r;(((r=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.stop_stream_info)===null||r===void 0?void 0:r.stream_id_list)||[]).forEach(function(s){e.publishModule.stopPublishingStream(s,qt)})}),this.rtm.liveRoomHandler.handlePushStreamMsg=function(t){t.body.stream_cmd=t.header.sub_cmd,t.body.stream_info=t.body.stream_info_list,delete t.body.stream_info_list,e.handlePushStreamMsg(t)}},n.prototype.handleWaitPublishAndPlays=function(e){for(var t=Object.keys(this._i.waitPublishStreamList),i=0;i<t.length;i++){var r=t[i],s=this._i.waitPublishStreamList[r],o=s.localStream,u=s.publishOption,m=s.isDataChannel;if(s.retryStart){if(u.roomID&&u.roomID!==(e==null?void 0:e.roomID)){this.Oi.info("zc.hwpap.0 room not connect");continue}this.publishModule.startPublishingStream(r,o,u,m),delete this._i.waitPublishStreamList[r]}}},n.prototype.handlePushStreamMsg=function(e){var t,i=((t=e==null?void 0:e.header)===null||t===void 0?void 0:t.room_id)||"",r=this._i.getRoomByRoomID(i),s=this.rtm.getMsgSpan(Xr.event,i);if(!r)return this.ji.setError(s,Xr.error.pi),void this.Oi.error("zc.opsu room no found");var o="";switch(e.body.stream_cmd){case Je:o="add";break;case ut:o="delete";break;case re:o="update"}var u=e.body.stream_info.map(function(m){return{stream_id:m.stream_id,stream_extra_info:m.extra_info,id_name:m.id_name||m.anchor_id_name}});s.setAttributes({stream_update_type:Xr.stream_update_type(o),stream_seq:e.body.stream_seq,stream_list:Xr.stream_list(u)}),s.end(),r.streamHandler.handlePushStreamUpdateMsg(e)},n.prototype.bindStreamCenterHandler=function(){var e=this;this.Ri.onPlayStateUpdate=function(t,i,r,s){var o,u,m,f,a,S,F,ee,ie;e.Oi.info("zc.opsu.1 ".concat(i," ").concat(t));var ae=e.Ri.playerList[i];if(t==1&&ae&&Lc(r)){var be=ae.player,Te=ae.retryDispatchHandler,Pe=ae.playOption;return be.sessionId!=0&&be.signal&&be.shouldSendCloseSession()&&(be.signal.sendCloseSession(e._i.getSeq(),be.sessionId,1),be.signal.removeSession(be.sessionId),be.closeSessionSignal=!0),be.resetPlay(),Te.stopMaxTime(),Te.invalid(),Te.initStream(i,Pe,!1),void(e.rtm.isLogin()?(Te.startMaxTime(),Te.active(0)):e.Ri.playerList[i].isReDispatch=!0)}var Ae=ae==null?void 0:ae.player;if(Ae){var Be=ae.player.isRePlay?Pi:Un;t!=0&&t!=1||(ae.retryStreamHandler.streamRetryStartTime=0,Ae.uploadPlayEvent(r)),[0,au.di.code].includes(r==null?void 0:r.code)||(Ae.latestPlayErrCode=r.code),t==1&&r&&e.ji.spanSetAttributes({key:Be.event,par:i},{error:r.code,message:r.message}),e.ji.spanEnd({key:Be.event,par:i},{url:bs.url((u=(o=ae==null?void 0:ae.player)===null||o===void 0?void 0:o.signal)===null||u===void 0?void 0:u.server),ip:bs.ip((m=ae==null?void 0:ae.player)===null||m===void 0?void 0:m.ip),peer_id:bs.peer_id((f=ae==null?void 0:ae.player)===null||f===void 0?void 0:f.peerID),source_type:bs.source_type(ls((a=ae==null?void 0:ae.player)===null||a===void 0?void 0:a.resourceMode)),net_protocol:bs.net_protocol((S=ae==null?void 0:ae.player)===null||S===void 0?void 0:S.netProtocol),signal_consume:bs.signal_consume((F=ae==null?void 0:ae.player)===null||F===void 0?void 0:F.signalTime),is_center:bs.is_center(ae==null?void 0:ae.isCenterNode)})}var Ze=e.Ri.playEventKeys[i],st=Date.now();if(t!=0||s!=null&&s.isCDN){if(t==1&&!(s!=null&&s.isCDN)){Ae==null||Ae.uploadRTCPlayStats();var Rt=Ae!=null&&Ae.se?0:(ee=ae==null?void 0:ae.retryStreamHandler)===null||ee===void 0?void 0:ee.getTryTime(Ae);delete e.Ri.playEventKeys[i],e.ji.spanEnd({key:Ze,par:i},{tryidx:Di.tryidx(Ae==null?void 0:Ae.rtcPlayCount),url:Di.url((ie=Ae==null?void 0:Ae.signal)===null||ie===void 0?void 0:ie.server),ip:Di.ip(Ae==null?void 0:Ae.ip),resource_type:Di.resource_type(ls((Ae==null?void 0:Ae.resourceMode)||0)),protocol:Di.protocol("webrtc"),dispatch_external_ip:Di.dispatch_external_ip(e._i.clientIP),net_protocol:Di.net_protocol(Ae==null?void 0:Ae.netProtocol),stop_reason:Di.stop_reason(Ae==null?void 0:Ae.stopReason),try_time:Di.try_time(Rt),error:r.code,message:r.message}),ae&&ae.player&&(ae.player.stopReason="")}}else Ae.pulledTimeStamp=st,Ae.updateCDNValidTime();if(t===1&&e.Ri.playErrorCallBackList[i]){if(!e._i.connectChanged){e.Oi.info("zc.opsu.1 connect changed");var At=r&&(r.code==au.di.code?0:r.code);e.Ri.playErrorCallBackList[i]({errorCode:At||0,extendedData:At?r.message:""}),delete e.Ri.playErrorCallBackList[i]}e.Oi.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(i,r)}else{var vt=function(Ct){return Ct==0||Ct==1?Ct==0?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"}(t),Ft=t===1||(Ae==null?void 0:Ae.updateCBState({state:vt,code:r.code}));t===0?Ae.firstPulledTimeStamp==0&&(Ae.firstPulledTimeStamp=st):Ae&&Ae.pulledTimeStamp&&Ae.updateValidTime(r),r.code===au.di.code&&(r={code:0,message:""}),Ft&&e._i.actionListener("playerStateUpdate",{state:vt,streamID:i,errorCode:r&&r.code,extendedData:r&&r.message})}},this.Ri.onPublishStateUpdate=function(t,i,r){e.onPublishStateUpdateHandle(t,i,r)},this.Ri.onPublishQualityUpdate=function(t,i){e._i.actionListener("publishQualityUpdate",t,i)},this.Ri.onPlayQualityUpdate=function(t,i){e._i.actionListener("playQualityUpdate",t,i)},this.Ri.onRemoteCameraStatusUpdate=function(t,i,r){var s=e.ji.createSpan(It.H,{key:Zh,par:t},{key:""},po);s.setAttributes({stream_id:wc(t),camera_status:Bo(i),status_code:Ic(r)}),s.end(),e._i.actionListener("remoteCameraStatusUpdate",t,i),e._i.actionListener("_remoteCameraStatusUpdate",t,r)},this.Ri.onRemoteMicStatusUpdate=function(t,i,r){var s=e.ji.createSpan(It.H,{key:Zh,par:t},{key:""},Zu);s.setAttributes({stream_id:Ku(t),mic_status:Bn(i),status_code:Ju(r)}),s.end(),e._i.actionListener("remoteMicStatusUpdate",t,i),e._i.actionListener("_remoteMicStatusUpdate",t,r)},this.Ri.onSoundLevelUpdate=function(t){e._i.actionListener("soundLevelUpdate",t)},this.Ri.onMicSoundLevelUpdate=function(t){e._i.actionListener("capturedSoundLevelUpdate",t)}},n.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(i,r,s){var o=s.map(function(a){return{streamID:a.streamID,user:a.user,extraInfo:a.extraInfo,urlsFLV:a.urlFlv,urlsRTMP:a.urlRtmp,urlsHLS:a.urlHls,urlsHttpsFLV:a.urlHttpsFlv,urlsHttpsHLS:a.urlHttpsHls}}),u={};if(r===0){var m=s.map(function(a){return{stream_id:a.streamID,code:De[a.closeType]&&De[a.closeType].code||0,description:De[a.closeType]&&De[a.closeType].description||"unknown"}});u.stream_delete_reason=m}if(r===0&&(o=o.filter(function(a){return!t._i.publishStreamList[a.streamID]})),t.updatePreviewerVolumeFactor(i),o.length>0&&t._i.actionListener("roomStreamUpdate",i,function(a){return a==0?"DELETE":"ADD"}(r),o,Object.keys(u).length>0?JSON.stringify(u):""),s.length>0&&t._i.actionListener("_streamUpdated",r,s),r===1){var f=[];o.forEach(function(a){a.extraInfo&&f.push({streamID:a.streamID,user:a.user,extraInfo:a.extraInfo})}),f.length>0&&t._i.actionListener("streamExtraInfoUpdate",i,f)}},e.onPublishStateUpdate=function(i,r,s){var o,u,m,f,a,S,F,ee,ie,ae,be;t.Oi.info("zb.opsu "+r+" "+i);var Te=t.Ri.publisherList[r],Pe=Te&&Te.publisher;if(Pe){var Ae=Te.publisher.isRePublish?Jn:Ur,Be=Ur;i!=0&&i!=1||(Te.retryStreamHandler.streamRetryStartTime=0,Pe.uploadPublishEvent(s)),[0,cu.Jt.code].includes(s==null?void 0:s.code)||(Pe.latestPublishErrCode=s.code),t.ji.spanEnd({key:Ae.event,par:r},{error:s.code,message:s.message,url:Be.url((u=(o=Te==null?void 0:Te.publisher)===null||o===void 0?void 0:o.signal)===null||u===void 0?void 0:u.server),ip:Be.ip((m=Te==null?void 0:Te.publisher)===null||m===void 0?void 0:m.ip),peer_id:Be.peer_id((f=Te==null?void 0:Te.publisher)===null||f===void 0?void 0:f.peerID),source_type:Be.source_type("rtc"),net_protocol:Be.net_protocol((a=Te==null?void 0:Te.publisher)===null||a===void 0?void 0:a.netProtocol),is_center:Be.is_center(Te==null?void 0:Te.isCenterNode)})}var Ze=Xi,st=Date.now();if(Pe){var Rt=Pe.publishedTimeStamp;i!=0&&Rt&&(s&&s.code&&s.code!==cu.Jt.code&&Pe.errorTimes++,Pe.validPublishedTime=st-Rt,Pe.publishedTimeStamp=0),i==0?(Pe.firstPublishedTimeStamp==0&&(Pe.firstPublishedTimeStamp=st),Pe.publishedTimeStamp=st):i==1&&(s.code===1012?t.Ri.stopPublishingStream(r,s):s.code===2002&&(t.Ri.stopPublishingStream(r,s),s.code=mt),Pe.uploadRTCPublishStats(),t.ji.spanEnd({key:Ze.event,par:r},{tryidx:Ze.tryidx(Pe.rtcPublishCount),url:Ze.url((S=Pe==null?void 0:Pe.signal)===null||S===void 0?void 0:S.server),ip:Ze.ip((ee=(F=Pe==null?void 0:Pe.gwNode)===null||F===void 0?void 0:F.split(":"))===null||ee===void 0?void 0:ee[0]),dispatch_external_ip:Ze.dispatch_external_ip(t._i.clientIP),room_id:Ze.room_id((ie=Te==null?void 0:Te.room)===null||ie===void 0?void 0:ie.roomID),room_sid_string:Ze.room_sid_string((ae=Te==null?void 0:Te.room)===null||ae===void 0?void 0:ae.roomSessionID),resource_type:Ze.resource_type("rtc"),protocol:Ze.protocol("webrtc"),net_protocol:Ze.net_protocol(Pe.netProtocol),stop_reason:Ze.stop_reason(Pe.stopReason),error:s.code,message:s.message}),Te&&(Pe.stopReason=""))}s.code===cu.Jt.code&&(s={code:0,message:""});var At=function(vt){return vt==0||vt==1?vt==0?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"}(i);(i===1||!((be=Te==null?void 0:Te.publisher)===null||be===void 0)&&be.updateCBState({state:At,code:s.code}))&&t._i.actionListener("publisherStateUpdate",{state:At,streamID:r,errorCode:s.code,extendedData:s.message})},e.onStreamExtraInfoUpdated=function(i,r){var s=r.map(function(o){return{streamID:o.streamID,user:o.user,extraInfo:o.extraInfo}});t._i.actionListener("streamExtraInfoUpdate",i,s)}},n.prototype.updatePreviewerVolumeFactor=function(e){var t=this;if(this.Ri.useCopyMusic&&!isNaN(this._i.engineConfig.choirRole)){this.Oi.info("zc.rtc.upvf "+e);var i=[];if(e){var r=this._i.getRoomByRoomID(e);r&&i.push(r)}else i.push.apply(i,this._i.roomList);i.forEach(function(s){var o=Array.from(new Set(s.streamList.map(function(u){return u.id_name})));t.Ri.previewStreamList.forEach(function(u){u&&!u.onlyPreview&&u.setVolumeFactorByUserCount(o.length)})})}},n.prototype.screenStreamFrom=function(e,t,i){var r=this,s={};s.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(s.audio=!1),navigator.mediaDevices.getUserMedia(s).then(function(o){o.getTracks().forEach(function(u){return Jr(u,r.Oi,"zc.st.ssf")}),i(!0,o)}).catch(function(o){i(!1,null,o)})},n.prototype.onPublishStateUpdateHandle=function(e,t,i){var r=this;this.Oi.info("zc.opsuh.0 call");var s=this.Ri.publisherList[t],o=s.room;if(o)if(e==0){if(this._i.publishStreamList[t]){var u=!o.streamList.find(function(S){return S.stream_id==t&&(S.anchor_id_name==r._i.idName||S.id_name==r._i.idName||S.user_id===r._i.idName)});this.Oi.info("zc.opsuh.0 room stream"+t+" "+u),[Me.tryPublish,Me.retryPublish].includes(this._i.publishStreamList[t].state)&&u?(this._i.publishStreamList[t].state=Me.update_info,o.streamHandler.updateStreamInfo(t,We,this._i.publishStreamList[t].extra_info,function(S){})):(this.Oi.info("zc.opsuh.0 stream update "+t),this._i.publishStreamList[t].state=Me.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,i))}}else{if(e==1&&s&&Lc(i)){var m=s.publisher,f=s.retryDispatchHandler,a=s.publishOption;return m.sessionId!=0&&m.signal&&m.shouldSendCloseSession()&&(m.signal.sendCloseSession(this._i.getSeq(),m.sessionId,1),m.signal.removeSession(m.sessionId),m.closeSessionSignal=!0),m.resetPublish(),f.stopMaxTime(),f.invalid(),f.initStream(t,a,!0),void(this.rtm.isLogin()?(f.startMaxTime(),f.active(0)):this.Ri.publisherList[t].isReDispatch=!0)}o.streamHandler.onPublishStateUpdate(e,t,i),e==1&&(this.Oi.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,i))}else this.Oi.error("zc.opsuh.0 "+pt)},n.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,i){if(this._i.publishStreamList[t].state==Me.publishing){var r=this.Ri.getRoomByStreamID(t);r&&r.streamHandler.onPublishStateUpdate(e,t,i)}},n.prototype.bindListener=function(e,t){var i=this.ji.createSpan(It.H,{key:Ea},{key:""},Ta.event);return i.setAttributes({listener:e}),this._i.listenerList[e]?wn(t)?(this._i.listenerList[e].indexOf(t)==-1&&this._i.listenerList[e].push(t),i.end(),!0):(this.Oi.error("zc.o.0 listener callBack must be funciton"),this.ji.setError(i,Ta.error.tt," listener callBack must be function"),!1):(this.Oi.error("zc.o.0 event "+e+" no found"),this.ji.setError(i,Ta.error.tt," event "+event+" no found"),!1)},n.prototype.deleteListener=function(e,t){var i=this.ji.createSpan(It.H,{key:Ea},{key:""},_c.event);if(i.setAttributes({listener:e}),!this._i.listenerList[e])return this.Oi.error("zc.o.1 listener no found"),this.ji.setError(i,_c.error.tt," event "+event+" no found"),!1;this.Oi.info("dc.o.1 "+"".concat(e," cb:")+typeof t);var r=this._i.listenerList[e];if(t){var s=r.indexOf(t);s>=0&&r.splice(s,1)}else this._i.listenerList[e]=[];return i.end(),!0},n.prototype.checkBackgroundCapacity=function(){if(this._i.netAppConfig){var e=this._i.netAppConfig.media_config.publish_config.object_segmentation_platform;return!!e&&!!((e&1<<(t=0))>>t)}var t;return!0},n}();function uu(n){return[n>>24&255,n>>16&255,n>>8&255,255&n].join(".")}function Kh(n){var e=n.split(".");return(parseInt(e[0])<<24)+(parseInt(e[1])<<16)+(parseInt(e[2])<<8)+parseInt(e[3])}var Eo,Ss,er,Jh=function(){function n(e){this.view=e,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=e.byteLength}return n.prototype.FindStartCode=function(){var e=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;e>=3;){if(this.view.getUint8(this.offset)==0&&this.view.getUint8(this.offset+1)==0&&this.view.getUint8(this.offset+2)==1)return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&this.view.getUint8(this.offset-1)==0&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--e,++this.offset}return!1},n.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},n.prototype.NextNalu=function(e){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,this.offset>=this.view.byteLength||!this.FindStartCode()?!1:(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,e&&(31&this.view.getUint8(this.nalu_start+this.start_code_size))!=6?!0:this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0))},n}();function Yh(n,e,t){if(n===0)return"";var i=1,r="  Here are some explanations about the error code: ".concat(i++,". reason=").concat(n,": ").concat(function(s){switch(s){case Eo.PEER_CLOSE_REASON_NORMAL:return"Client voluntarily exits.";case Eo.PEER_CLOSE_REASON_STATE_ERROR:return"Status error; Reason: Repeatedly received offer/answer, etc.";case Eo.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:return"Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";case Eo.PEER_CLOSE_REASON_VRS_PLAY_DENIED:return"Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";case Eo.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:return"No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";case Eo.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:return"No matching video codec; Reason: Client (Web) does not support h264 and vp8 etc.";case Eo.PEER_CLOSE_REASON_SDP_INVALID:return"SDP parsing error; Reason: SDP format error.";default:return"unknown"}}(n));return e&&(r+=" ".concat(i++,". action=").concat(e,": ").concat(function(s){switch(s){case Ss.DENIED_ACTION_STOP:return"cancel pushing stream.";case Ss.DENIED_ACTION_RETRY_NEXT_IP:return"Try the next ip, if there is no next ip, re-request the route.";case Ss.DENIED_ACTION_REDIRECT:return"Redirect to the ip address specified by data.";case Ss.DENIED_ACTION_REDISPATCH:return"re-request route.";case Ss.DENIED_ACTION_RETRY:return"retry current gateway node.";default:return"unknown"}}(e))),t&&(r+=" ".concat(i++,". err=").concat(t,": ").concat(function(s){switch(s){case er.DENIED_ERROR_DISPATCH_FAILED:return"media scheduling failed.";case er.DENIED_ERROR_EMPTY_PUBLISH_IPS:return"empty publish ips error.";case er.DENIED_ERROR_EMPTY_PLAY_IPS:return"empty play ips error.";case er.DENIED_ERROR_STREAM_NOT_EXSIT:return"stream does not exist.";case er.DENIED_ERROR_APP_NOT_ONLINE:return"APP has been removed.";case er.DENIED_ERROR_INVALID_PARAMETERS:return"invalid parameter.";case er.DENIED_ERROR_NO_CLIENTIP_SET:return"client ip is not set.";case er.DENIED_ERROR_PERMISSION_DENIED:return"No permission, access denied.";case er.DENIED_ERROR_SET_STREAM_INFO_FAILED:return"Failed to set stream information.";case er.DENIED_ERROR_INTERNAL_ERROR:return"internal error / server busy.";case er.DENIED_ERROR_PUBLISH_FORBIDDEN:return"Streaming is banned.";case er.DENIED_ERROR_NEW_PUBLISH:return"new publish error.";case er.DENIED_ERROR_INNER_ERROR:return"inner error.";case er.DENIED_ERROR_MANAGER_STOP:return"manager stop error.";case er.DENIED_ERROR_PUBLISH_AUTH_FAILED:return"Stream push authentication failed.";case er.DENIED_ERROR_PLAY_AUTH_FAILED:return"Stream pull authentication failed.";case er.DENIED_ERROR_SERVER_STOP:return"server stoped error.";case er.DENIED_ERROR_SESSION_ID:return"session id error.";case er.DENIED_ERROR_MANAGER_TIMEOUT:return"manager timeout.";case er.DENIED_ERROR_NEW_PUBLISH_SRC:return"new publish src.";case er.DENIED_ERROR_PLAY_SESSION_LIMIT:return"Pull session limit.";case er.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:return"disable ip port flexible.";case er.DENIED_ERROR_PACKET_ILLEGAL_TS:return"packet illegal ts.";case er.DENIED_ERROR_PACKET_ILLEGAL_ADDR:return"packet illegal address.";case er.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:return"packet illegal format.";case er.DENIED_ERROR_CHECK_ADDR_TIMEOUT:return"Check address timed out.";case er.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:return"Check Address Illegal Signature.";case er.DENIED_ERROR_CHECK_ADDR_INCONSTANT:return"Check for address changes.";case er.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:return"SDP negotiation timed out, check whether the SDP is sent successfully.";case er.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:return"Address negotiation timed out, check whether the Candidate is sent successfully.";case er.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:return"The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";case er.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:return"The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";case er.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:return"The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";case er.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:return"Streaming encryption failed";case er.DENIED_ERROR_WEBRTC_HB_TIMEOUT:return"The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";case er.DENIED_ERROR_WEBRTC_CONNECTION_LOST:return"The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";case er.DENIED_ERROR_WEBRTC_NEW_SRC:return"After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";default:return"unknown"}}(t))),r}(function(n){n[n.PEER_CLOSE_REASON_NORMAL=0]="PEER_CLOSE_REASON_NORMAL",n[n.PEER_CLOSE_REASON_STATE_ERROR=5]="PEER_CLOSE_REASON_STATE_ERROR",n[n.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED=15]="PEER_CLOSE_REASON_VRS_PUBLISH_DENIED",n[n.PEER_CLOSE_REASON_VRS_PLAY_DENIED=18]="PEER_CLOSE_REASON_VRS_PLAY_DENIED",n[n.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH=21]="PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH",n[n.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH=22]="PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH",n[n.PEER_CLOSE_REASON_SDP_INVALID=23]="PEER_CLOSE_REASON_SDP_INVALID"})(Eo||(Eo={})),function(n){n[n.DENIED_ACTION_STOP=1]="DENIED_ACTION_STOP",n[n.DENIED_ACTION_RETRY_NEXT_IP=2]="DENIED_ACTION_RETRY_NEXT_IP",n[n.DENIED_ACTION_REDIRECT=3]="DENIED_ACTION_REDIRECT",n[n.DENIED_ACTION_REDISPATCH=4]="DENIED_ACTION_REDISPATCH",n[n.DENIED_ACTION_RETRY=5]="DENIED_ACTION_RETRY"}(Ss||(Ss={})),function(n){n[n.DENIED_ERROR_DISPATCH_FAILED=1001]="DENIED_ERROR_DISPATCH_FAILED",n[n.DENIED_ERROR_EMPTY_PUBLISH_IPS=1002]="DENIED_ERROR_EMPTY_PUBLISH_IPS",n[n.DENIED_ERROR_EMPTY_PLAY_IPS=1003]="DENIED_ERROR_EMPTY_PLAY_IPS",n[n.DENIED_ERROR_STREAM_NOT_EXSIT=1004]="DENIED_ERROR_STREAM_NOT_EXSIT",n[n.DENIED_ERROR_APP_NOT_ONLINE=1005]="DENIED_ERROR_APP_NOT_ONLINE",n[n.DENIED_ERROR_INVALID_PARAMETERS=1006]="DENIED_ERROR_INVALID_PARAMETERS",n[n.DENIED_ERROR_NO_CLIENTIP_SET=1007]="DENIED_ERROR_NO_CLIENTIP_SET",n[n.DENIED_ERROR_PERMISSION_DENIED=1008]="DENIED_ERROR_PERMISSION_DENIED",n[n.DENIED_ERROR_SET_STREAM_INFO_FAILED=1009]="DENIED_ERROR_SET_STREAM_INFO_FAILED",n[n.DENIED_ERROR_INTERNAL_ERROR=1010]="DENIED_ERROR_INTERNAL_ERROR",n[n.DENIED_ERROR_PUBLISH_FORBIDDEN=1011]="DENIED_ERROR_PUBLISH_FORBIDDEN",n[n.DENIED_ERROR_NEW_PUBLISH=1012]="DENIED_ERROR_NEW_PUBLISH",n[n.DENIED_ERROR_INNER_ERROR=1013]="DENIED_ERROR_INNER_ERROR",n[n.DENIED_ERROR_MANAGER_STOP=1014]="DENIED_ERROR_MANAGER_STOP",n[n.DENIED_ERROR_PUBLISH_AUTH_FAILED=1015]="DENIED_ERROR_PUBLISH_AUTH_FAILED",n[n.DENIED_ERROR_PLAY_AUTH_FAILED=1016]="DENIED_ERROR_PLAY_AUTH_FAILED",n[n.DENIED_ERROR_SERVER_STOP=2001]="DENIED_ERROR_SERVER_STOP",n[n.DENIED_ERROR_SESSION_ID=2002]="DENIED_ERROR_SESSION_ID",n[n.DENIED_ERROR_MANAGER_TIMEOUT=2003]="DENIED_ERROR_MANAGER_TIMEOUT",n[n.DENIED_ERROR_NEW_PUBLISH_SRC=2004]="DENIED_ERROR_NEW_PUBLISH_SRC",n[n.DENIED_ERROR_PLAY_SESSION_LIMIT=2005]="DENIED_ERROR_PLAY_SESSION_LIMIT",n[n.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE=2006]="DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE",n[n.DENIED_ERROR_PACKET_ILLEGAL_TS=2007]="DENIED_ERROR_PACKET_ILLEGAL_TS",n[n.DENIED_ERROR_PACKET_ILLEGAL_ADDR=2008]="DENIED_ERROR_PACKET_ILLEGAL_ADDR",n[n.DENIED_ERROR_PACKET_ILLEGAL_FORMAT=2009]="DENIED_ERROR_PACKET_ILLEGAL_FORMAT",n[n.DENIED_ERROR_CHECK_ADDR_TIMEOUT=2010]="DENIED_ERROR_CHECK_ADDR_TIMEOUT",n[n.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE=2011]="DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE",n[n.DENIED_ERROR_CHECK_ADDR_INCONSTANT=2012]="DENIED_ERROR_CHECK_ADDR_INCONSTANT",n[n.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT=3e3]="DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT",n[n.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT=3001]="DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT",n[n.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED=3002]="DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED",n[n.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED=3003]="DENIED_ERROR_WEBRTC_DTLS_HS_FAILED",n[n.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT=3004]="DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT",n[n.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED=3005]="DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED",n[n.DENIED_ERROR_WEBRTC_HB_TIMEOUT=3006]="DENIED_ERROR_WEBRTC_HB_TIMEOUT",n[n.DENIED_ERROR_WEBRTC_CONNECTION_LOST=3007]="DENIED_ERROR_WEBRTC_CONNECTION_LOST",n[n.DENIED_ERROR_WEBRTC_NEW_SRC=3008]="DENIED_ERROR_WEBRTC_NEW_SRC"}(er||(er={}));var Hl={FPS:{code:je.captureFpsToLow,message:"The video capture frame rate is too low."},VOLUME:{code:je.captureVolumeToLow,message:"The capture volume is too low."}},lu={V_BITRATE:{code:je.sendVideoBitrateToLow,message:"The video bit rate sent is too low."},FPS:{code:je.sendFpsToLow,message:"The video frame rate sent is too low."},A_BITRATE:{code:je.sendAudioBitrateToLow,message:"The audio bit rate sent is too low."}},Qs={A_VOLUME:{code:je.receiveVolumeToLow,message:"The volume of audio received is too low."},A_DECODE:{code:je.receiveAudioDecodedFail,message:"The received audio failed to be decoded."},V_DECODE:{code:je.receiveVideoDecodedFail,message:"The received video failed to be decoded."},V_DECODED_FPS:{code:je.receiveVideoFpsDecodedToLow,message:"Received video decode frame rate is too low."},RENDER_VIDEO_FPS:{code:je.renderVideoFpsToLow,message:"The rendered video frame rate is too low."}},Xh={FPS:{code:je.captureFpsNormal,message:"The video capture frame rate is normal."},VOLUME:{code:je.captureVolumeNormal,message:"The capture volume is normal."}},ql={V_BITRATE:{code:je.sendVideoBitrateNormal,message:"The video bit rate sent is normal."},FPS:{code:je.sendFpsNormal,message:"The video frame rate sent is normal."},A_BITRATE:{code:je.sendAudioBitrateNormal,message:"The audio bit rate sent is normal."}},Ya={A_VOLUME:{code:je.receiveVolumeNormal,message:"The volume of audio received is normal."},A_DECODE:{code:je.receiveAudioDecodedNormal,message:"The received audio successed to be decoded."},V_DECODE:{code:je.receiveVideoDecodedNormal,message:"The received video successed to be decoded."},V_DECODED_FPS:{code:je.receiveVideoFpsDecodedNormal,message:"Received video decode frame rate is normal."},RENDER_VIDEO_FPS:{code:je.renderVideoFpsNormal,message:"The rendered video frame rate is normal."}},$h=function(){function n(e,t,i,r){this._i=e,this.parentEvent=r,this.results={},this.preTime=Date.now(),this.preTotalFps=0,this.preIsNormal={},this.Oi=t,this.streamId=i,this.initPreIsNormal(Hl),this.initPreIsNormal(lu),this.initPreIsNormal(Qs)}return n.prototype.initPreIsNormal=function(e){for(var t in e)this.preIsNormal[e[t].code]=!0},n.prototype.recordData=function(e,t,i){var r=e.code,s=this.results[r]||[];if(s.push(i),s.length>=5){var o=s.includes(!1);this.preIsNormal[r]&&!o&&(this.uploadEventData(e),this._i.actionListener("exceptionUpdate",this.streamId,e)),!this.preIsNormal[r]&&o&&(this.uploadEventData(t),this._i.actionListener("exceptionUpdate",this.streamId,t)),this.preIsNormal[r]=o,s=[]}this.results[r]=s},n.prototype.uploadEventData=function(e){var t=this._i.reporter.createSpan(It.I,{key:this.parentEvent,par:this.streamId},{key:""},rm);t.setAttributes({code:nm(e.code),message:om(e.message)}),t.end()},n.prototype.checkRemoteStats=function(e,t){this.recordData(Qs.A_VOLUME,Ya.A_VOLUME,this.recvAudioVolume(e)),this.recordData(Qs.A_DECODE,Ya.A_DECODE,this.recvAudioDecode(e)),this.recordData(Qs.V_DECODE,Ya.V_DECODE,this.recvVideoDecode(e)),this.recordData(Qs.V_DECODED_FPS,Ya.V_DECODED_FPS,this.recvVideoDecodedFrameRate(e)),this.recordData(Qs.RENDER_VIDEO_FPS,Ya.RENDER_VIDEO_FPS,this.renderVideoFrameRate(e,t))},n.prototype.checkLocalStats=function(e){this.recordData(Hl.FPS,Xh.FPS,this.captureVideoFrameRate(e)),this.recordData(lu.FPS,ql.FPS,this.sendVideoFrameRate(e)),this.recordData(Hl.VOLUME,Xh.VOLUME,this.sendAudioVolume(e)),this.recordData(lu.V_BITRATE,ql.V_BITRATE,this.sendVideoBitrate(e)),this.recordData(lu.A_BITRATE,ql.A_BITRATE,this.sendAudioBitrate(e))},n.prototype.sendVideoBitrate=function(e){return!(e.videoMuteState==="1"||e.videoQuality>2)&&e.videoBitrate===0},n.prototype.sendVideoFrameRate=function(e){var t=e.videoTransferFPS,i=e.videoFPS;return e.videoMuteState!=="1"&&(i>=10&&t<5||i<10&&i>=5&&t<=1)},n.prototype.captureVideoFrameRate=function(e){var t=e.videoTargetFPS,i=e.videoFPS;return e.videoMuteState!=="1"&&(t>=10&&i<5||t<10&&t>=5&&i<=1)},n.prototype.sendAudioVolume=function(e){return e.audioMuteState!=="1"&&Math.floor(32767*e.audioLevel)<Math.floor(327.67)},n.prototype.sendAudioBitrate=function(e){var t=e.audioBitrate;return!(e.audioMuteState==="1"||e.audioQuality>2)&&(t===0||e.audioTargetBitrate>=48&&t<22)},n.prototype.recvAudioVolume=function(e){return!(e.audioMuteState==="1"||e.audioQuality>2)&&e.audioBitrate>0&&Math.floor(32767*e.audioLevel)<Math.floor(327.67)},n.prototype.recvAudioDecode=function(e){return!(e.audioMuteState==="1"||e.audioQuality>2)&&e.audioBitrate>0&&e.audioFPS===0},n.prototype.recvVideoDecode=function(e){return!(e.videoMuteState==="1"||e.videoQuality>2)&&e.videoBitrate>0&&e.videoTransferFPS===0},n.prototype.recvVideoDecodedFrameRate=function(e){var t=e.videoFPS,i=e.videoTransferFPS;return e.videoMuteState!=="1"&&(t>=10&&i<5||t<10&&t>=5&&i<=1)},n.prototype.renderVideoFrameRate=function(e,t){var i=e.videoTransferFPS,r=e.videoRenderFPS;return e.videoMuteState!=="1"&&r!=-1&&(i>10&&r<5||i<=10&&i>=5&&r<=1)},n}(),Zs=function(){return Zs=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Zs.apply(this,arguments)},Wm=function(){function n(e,t,i,r,s,o,u){this._qualityUpdateInterval=e,this._qualityUploadInterval=t,this.oe=i,this.Oi=r,this.Ai=s,this._i=o,this.Ri=u,this.qualityTimer=null,this.qualityUpdateTimer=null,this.qualityUploadTimer=null,this.lastPublishStats={},this.netQuality=0,this.poorQualityNum=0,this.probeState=w.probed,this.probeTime=0,this.probeInterval=6e4,this.publishStat={},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,videoPacketsLost:0,videoPacketsLostRate:0,googCodecName:""},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioPacketsLost:0,audioPacketsLostRate:0,googCodecName:""}},this.qualityUploadLastTime=0,this.qualitySeq=0,this.timerType=0,this.webrtcProtocol="udp";var m=Math.min(e,t);this.qualitySampleInterval=m>1e3?m:1e3,this.getTimerType(),this.exception=new $h(this._i,this.Oi,this.streamId,xi.event)}return Object.defineProperty(n.prototype,"streamId",{get:function(){return this.oe.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return this.oe.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"peerID",{get:function(){return this.oe.peerID},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ue",{get:function(){return this.oe.localStream},enumerable:!1,configurable:!0}),n.prototype.getTimerType=function(){this._qualityUpdateInterval===this._qualityUploadInterval?this.timerType=0:this.qualitySampleInterval===this._qualityUpdateInterval?this.timerType=1:this.qualitySampleInterval===this._qualityUploadInterval&&(this.timerType=2),this.Oi.info("zc.p.0.qgtt "+this.streamId+" timer type "+this.timerType+" "+this.qualitySampleInterval+" "+this._qualityUpdateInterval+" "+this._qualityUploadInterval)},n.prototype.setPublishQualityTimer=function(){var e=this;this.qualityTimer==null&&(this.Oi.info(Fa+" "+this.streamId+" called "+this.qualitySampleInterval),this.clearPublishQualityTimer(),this.qualityTimer=setInterval(function(){e._peerConnectionGetStats()},this.qualitySampleInterval),this.lastPublishStats={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,videoTime:Date.now(),audioTime:Date.now(),time:Date.now(),audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0},this.qualitySeq=(0,g.getSeq)())},n.prototype.clearPublishQualityTimer=function(){this.clearPublishQualityUpdateTimer(),this.clearPublishQualityUploadTimer(),this.qualityTimer!=null&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.poorQualityNum=0,this.qualityUploadLastTime=0},n.prototype._getConnectionStatsPromiseList=function(){var e=this,t=[];return this.oe.peerConnection&&this.oe.peerConnection.getSenders().filter(function(i){var r;return i.track&&(i.track.kind==="audio"||!(!((r=e.oe.lowStream)===null||r===void 0)&&r.getTracks().includes(i.track)))}).forEach(function(i){e.oe.peerConnection&&t.push(e.oe.peerConnection.getStats(i.track))}),t},n.prototype._peerConnectionGetStats=function(){var e=this;if(this.oe.peerConnection){var t=this._getConnectionStatsPromiseList();di()&&t.push(new Ge(function(i){var r;try{var s=(r=e.oe.peerConnection)===null||r===void 0?void 0:r.getStats(function(o){return i(o)},function(o){i(null)});s&&wn(s.catch)&&s.catch(function(o){i(null)})}catch{i(null)}})),Promise.all(t).then(function(i){i.length!==0&&e._getPublishStats(i.filter(function(r){return r instanceof RTCStatsReport}),i[i.length-1]instanceof RTCStatsReport?null:i[i.length-1])}).catch(function(i){e.Oi.info(Fa+" "+e.streamId+" getStats error "+i.toString())})}},n.prototype._getPublishStats=function(e,t){var i,r,s,o=this;if(e){var u,m,f=this.Ri.checkPreview(this.ue),a=f&&f.rtcViewer;a&&(u=a._video,m=a._audio),u&&u.currentTime||(u=Pa(this.ue,"video")||u),m&&m.currentTime||(m=Pa(this.ue,"audio")||m||u);var S=[],F="",ee={scenario:this._i.scenario,sampleTimeWindow:this._qualityUploadInterval,audioCodec:"opus",audioTargetBitrate:this.oe.videoInfo.audioBitrate/1e3||0,audioBitrate:0,videoTargetBitrate:this.oe.videoInfo.bitRate||0,videoTargetFPS:this.oe.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioPacketsLost:0,totalAudioEnergy:0,totalSamplesDuration:0,audioPacketsLostRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,googActualEncBitrate:0,googTargetEncBitrate:0,googFrameWidthInput:0,googFrameHeightInput:0,googFrameRateInput:0,qualityLimitationReason:"",codecImplementationName:"",videoMuteState:!((i=f==null?void 0:f.videoTrack)===null||i===void 0)&&i.enabled?"0":"1",audioMuteState:this.ue.getAudioTracks().length>0&&this.ue.getAudioTracks()[0].enabled?"0":"1",soundLevel:f==null?void 0:f.soundLevel,muted:m?m.muted:void 0,audioPaused:m?m.paused:void 0,videoPaused:u?u.paused:void 0,volume:m?m.volume:void 0,sinkId:m?m.sinkId:void 0},ie=this.lastPublishStats.time,ae=0,be=0,Te=0,Pe=0,Ae=0,Be=0;if(e.forEach(function(Gt){var li=!1;Gt.forEach(function(kt){kt.type=="track"&&(li=!0)}),Gt.forEach(function(kt){var ti=kt.kind||kt.mediaType;if((kt.type=="outbound-rtp"||kt.type=="ssrc"&&kt.bytesSent!=null)&&ti=="audio")ie!=0&&(ee.audioBitrate=8*(kt.bytesSent-o.lastPublishStats.audioBytesSent)/(kt.timestamp-ie),kt.retransmittedPacketsSent=kt.retransmittedPacketsSent||0,kt.packetsSent=kt.packetsSent||0,ee.audioFPS=(kt.packetsSent-(kt.retransmittedPacketsSent-o.lastPublishStats.audioRetransmittedPacketsSent)-o.lastPublishStats.audioPacketsSent)/(kt.timestamp-ie)*1e3||0,Te=(kt.retransmittedPacketsSent-o.lastPublishStats.audioRetransmittedPacketsSent)/(kt.packetsSent-o.lastPublishStats.audioPacketsSent)),ee.audioBitrate<0&&(ee.audioBitrate=0),o.lastPublishStats.audioBytesSent=kt.bytesSent,o.lastPublishStats.time=kt.timestamp,o.lastPublishStats.audioPacketsSentTimeStamp=kt.packetsSent-o.lastPublishStats.audioPacketsSent,o.lastPublishStats.audioPacketsSent=kt.packetsSent,o.lastPublishStats.audioRetransmittedPacketsSent=kt.retransmittedPacketsSent;else if((kt.type=="outbound-rtp"||kt.type=="ssrc"&&kt.bytesSent!=null)&&ti=="video")ee.isHardwareEncode=function(ui){if(ui){var Jt=ui==null?void 0:ui.toLocaleLowerCase();if(Jt!=="unknown")return Jt!=="openh264"&&Jt!=="libvpx"}}(kt.encoderImplementation),ie!=0&&(ee.videoBitrate=8*(kt.bytesSent-o.lastPublishStats.videoBytesSent)/(kt.timestamp-ie),ee.videoFPS=1e3*(kt.framesEncoded-o.lastPublishStats.framesEncoded)/(kt.timestamp-ie),Pe=(kt.retransmittedPacketsSent-o.lastPublishStats.videoRetransmittedPacketsSent)/(kt.packetsSent-o.lastPublishStats.videoPacketsSent)),ee.videoBitrate<0&&(ee.videoBitrate=0),ee.videoFPS<0&&(ee.videoFPS=0),ee.nackCount=kt.nackCount,ee.pliCount=kt.pliCount,ee.qualityLimitationReason=kt.qualityLimitationReason,o.lastPublishStats.videoBytesSent=kt.bytesSent,o.lastPublishStats.framesEncoded=kt.framesEncoded,o.lastPublishStats.time=kt.timestamp,o.lastPublishStats.videoPacketsSentTimeStamp=kt.packetsSent-o.lastPublishStats.videoPacketsSent,o.lastPublishStats.videoPacketsSent=kt.packetsSent,o.lastPublishStats.videoRetransmittedPacketsSent=kt.retransmittedPacketsSent,li||o._vTrackStats(ie,ee,kt);else if(kt.type=="remote-inbound-rtp"&&ti=="video"){kt.packetsLost>0&&(ee.videoPacketsLost=kt.packetsLost);var vi=kt.packetsLost-o.lastPublishStats.videoPacketsLost;ee.videoPacketsLostRate=vi>0?vi/o.lastPublishStats.videoPacketsSentTimeStamp:0,kt.packetsLost>0&&(o.lastPublishStats.videoPacketsLost=kt.packetsLost),o.lastPublishStats.videoTime=kt.timestamp,be=1e3*kt.roundTripTime,Be=kt.jitter}else if(kt.type=="remote-inbound-rtp"&&ti=="audio"){kt.packetsLost>0&&(ee.audioPacketsLost=kt.packetsLost);var Lt=kt.packetsLost-o.lastPublishStats.audioPacketsLost;ee.audioPacketsLostRate=Lt>0?Lt/o.lastPublishStats.audioPacketsSentTimeStamp:0,kt.packetsLost>0&&(o.lastPublishStats.audioPacketsLost=kt.packetsLost),o.lastPublishStats.audioTime=kt.timestamp,ae=1e3*kt.roundTripTime,Ae=kt.jitter}else kt.type=="media-source"&&(ti=="audio"||kt.id.toLowerCase().indexOf("audio")>=0)?(ee.audioLevel=kt.audioLevel||0,ee.totalAudioEnergy=kt.totalAudioEnergy,ee.totalSamplesDuration=kt.totalSamplesDuration):kt.type=="track"&&(ti=="video"||kt.id.indexOf("video")>=0||kt.frameWidth)?o._vTrackStats(ie,ee,kt):kt.type=="candidate-pair"?(kt.totalRoundTripTime!=null&&(ee.totalRoundTripTime=kt.totalRoundTripTime),kt.currentRoundTripTime!=null&&(ee.currentRoundTripTime=kt.currentRoundTripTime),kt.state==="succeeded"&&(F=kt.localCandidateId)):kt.type==="local-candidate"&&S.push(kt)})}),F){var Ze=S.find(function(Gt){return Gt.id==F});if(Ze){var st=void 0;if(Ze.relayProtocol!==void 0)st=Ze.relayProtocol;else if(Ze.priority){var Rt=Ze.priority>>24;Rt!==void 0&&(st=Nd(Rt,this._i.browser))}st!==void 0&&this.webrtcProtocol!==st&&(this.Oi.info(Fa+" "+this.streamId+" pro "+st),this.webrtcProtocol=st)}}if(t&&t.result().forEach(function(Gt){Gt.type=="ssrc"&&Gt.names().indexOf("googBandwidthLimitedResolution")>=0&&(ee.googBandwidthLimitedResolution=Gt.stat("googBandwidthLimitedResolution")),Gt.type=="ssrc"&&Gt.stat("mediaType")=="video"&&Gt.names().indexOf("googCodecName")>=0&&(ee.videoCodecName=Gt.stat("googCodecName")),Gt.type=="ssrc"&&Gt.stat("mediaType")=="audio"&&Gt.names().indexOf("googCodecName")>=0&&(ee.audioCodecName=Gt.stat("googCodecName")),Gt.type=="ssrc"&&Gt.names().indexOf("googCpuLimitedResolution")>=0&&(ee.googCpuLimitedResolution=Gt.stat("googCpuLimitedResolution")),Gt.type=="ssrc"&&Gt.names().indexOf("googFrameWidthInput")>=0&&(ee.googFrameWidthInput=Gt.stat("googFrameWidthInput")),Gt.type=="ssrc"&&Gt.names().indexOf("googFrameHeightInput")>=0&&(ee.googFrameHeightInput=Gt.stat("googFrameHeightInput")),Gt.type=="ssrc"&&Gt.names().indexOf("googFrameRateInput")>=0&&(ee.googFrameRateInput=Gt.stat("googFrameRateInput")),Gt.type=="ssrc"&&Gt.names().indexOf("codecImplementationName")>=0&&(ee.codecImplementationName=Gt.stat("codecImplementationName")),Gt.type=="VideoBwe"&&Gt.names().indexOf("googAvailableSendBandwidth")>=0&&(ee.googAvailableSendBandwidth=Gt.stat("googAvailableSendBandwidth")),Gt.type=="VideoBwe"&&Gt.names().indexOf("googActualEncBitrate")>=0&&(ee.googActualEncBitrate=Gt.stat("googActualEncBitrate")),Gt.type=="VideoBwe"&&Gt.names().indexOf("googTargetEncBitrate")>=0&&(ee.googTargetEncBitrate=Gt.stat("googTargetEncBitrate")),Gt.type=="VideoBwe"&&Gt.names().indexOf("googRetransmitBitrate")>=0&&(ee.googRetransmitBitrate=Gt.stat("googRetransmitBitrate"))}),this._i.browser==="chrome"){var At=(r=Qt())===null||r===void 0?void 0:r.match(/Chrome\/(\d+)/);parseInt(At&&At[1]||"100")<=91&&ee.isHardwareEncode&&this.oe.handleEncBitrate(Number.parseInt(ee.googTargetEncBitrate),Number.parseInt(ee.googActualEncBitrate),Number.parseInt(ee.googRetransmitBitrate))}be=isNaN(be)||be<0?0:be,Pe=isNaN(Pe)||Pe<0?0:Pe,Be=isNaN(Be)||Be<0?0:Be,ae=isNaN(ae)||ae<0?0:ae,Te=isNaN(Te)||Te<0?0:Te,Ae=isNaN(Ae)||Ae<0?0:Ae;var vt=Oa(be,Pe,Be),Ft=Oa(ae,Te,Ae);if(ee.videoQuality=ie>0?Fo(vt):0,ee.audioQuality=ie>0?Fo(Ft):0,this._i.networkState!==he.offline&&((s=this.oe.peerConnection)===null||s===void 0?void 0:s.connectionState)!=="disconnected"||(ee.videoQuality=Ee.Die,ee.audioQuality=Ee.Die),!ee.frameHeight||!ee.frameWidth){var Ct=this.ue.getVideoTracks()[0];Ct&&(ee.frameHeight=Ct.getSettings().height||0,ee.frameWidth=Ct.getSettings().width||0)}var Mt=Math.min(vt,Ft);this.netQuality=Mt,this._updateCurrentQualityStats(ee),this.publishStat=ee,this.timerType===0?ie!==0&&(this.checkProbe(),this._uploadPublishQuality(ee),this.oe.onPublishQualityUpdate(this.streamId,this.currentQuality),this.exception.checkLocalStats(ee),this.Ri.changeTxQuality(Fo(this.netQuality),this.sessionId,this.peerID)):this.timerType===1?ie!==0?this.oe.onPublishQualityUpdate(this.streamId,this.currentQuality):this.qualityTimer&&this.setPublishQualityUploadTimer():ie!==0?(this.checkProbe(),this._uploadPublishQuality(ee),this.exception.checkLocalStats(ee),this.Ri.changeTxQuality(Fo(this.netQuality),this.sessionId,this.peerID)):this.qualityTimer&&this.setPublishQualityUpdateTimer()}},n.prototype.setPublishQualityUpdateTimer=function(){var e=this;this.qualityUpdateTimer==null&&(this.Oi.info("zc.p.0.spqut.1 "+this.streamId+" called "+this._qualityUpdateInterval),this.clearPublishQualityUpdateTimer(),this.qualityUpdateTimer=setInterval(function(){e.oe.onPublishQualityUpdate(e.streamId,e.currentQuality)},this._qualityUpdateInterval))},n.prototype.clearPublishQualityUpdateTimer=function(){this.Oi.info(eh+" "+this.streamId+" called "+!!this.qualityUpdateTimer),this.qualityUpdateTimer!=null&&(clearInterval(this.qualityUpdateTimer),this.qualityUpdateTimer=null)},n.prototype.setPublishQualityUploadTimer=function(){var e=this;this.qualityUploadTimer==null&&(this.Oi.info("zc.p.0.spqut.2 "+this.streamId+" called "+this._qualityUploadInterval),this.qualityUploadTimer=setInterval(function(){e.checkProbe(),e._uploadPublishQuality(e.publishStat),e.exception.checkLocalStats(e.publishStat),e.Ri.changeTxQuality(Fo(e.netQuality),e.sessionId,e.peerID)},this._qualityUploadInterval))},n.prototype.clearPublishQualityUploadTimer=function(){this.Oi.info(eh+" "+this.streamId+" called "+!!this.qualityUpdateTimer),this.qualityUploadTimer!=null&&(clearInterval(this.qualityUploadTimer),this.qualityUploadTimer=null)},n.prototype.checkProbe=function(){var e=this.netQuality,t=this.lastPublishStats.time;this.Oi.info(Fa+" netQuality "+e+" "+t),e<=this.Ri.targetQuality?this.poorQualityNum++:this.poorQualityNum=0,t>0&&this.poorQualityNum>=this.Ri.probeStartedNum&&Date.now()>this.probeTime+this.probeInterval&&(this.Oi.info(Fa+" netQuality "+e+" start net probe"),this.probeState=w.tryProbe,this.oe.poorQualityRetryCnt++,this.Ri.startNetProbe(!0,this.oe,this.oe.gwNodeList),this.probeTime=Date.now())},n.prototype._vTrackStats=function(e,t,i){var r=i.frameHeight,s=i.frameWidth,o=i.framesSent,u=i.timestamp;if(t.frameHeight=r,t.frameWidth=s,e===0||this.lastPublishStats.frameHeight===r&&this.lastPublishStats.frameWidth===s)e===0&&(this.lastPublishStats.frameHeight=r,this.lastPublishStats.frameWidth=s);else{var m=this._i.reporter.createSpan(It.H,{key:xi.event,par:this.streamId},{key:""},bc);m.setAttributes({webrtc_sid:Sc(this.sessionId),w:ju(s),h:Ec(r)}),m.end(),this.lastPublishStats.frameHeight=r,this.lastPublishStats.frameWidth=s}e!=0&&(t.videoTransferFPS=1e3*(o-this.lastPublishStats.framesSent)/(u-e)),t.videoTransferFPS<0&&(t.videoTransferFPS=0),this.lastPublishStats.framesSent=o},n.prototype._updateCurrentQualityStats=function(e){var t=e.videoBitrate,i=e.videoFPS,r=e.videoTransferFPS,s=e.frameHeight,o=e.frameWidth,u=e.videoMuteState,m=e.videoQuality,f=e.isHardwareEncode,a=e.audioBitrate,S=e.audioCodec,F=e.audioMuteState,ee=e.audioQuality,ie=e.audioFPS,ae={video:Zs(Zs({},this.currentQuality.video),{videoBitrate:t,videoFPS:i,videoTransferFPS:r,frameHeight:s,frameWidth:o,muteState:u,videoQuality:m,isHardwareEncode:f}),audio:Zs(Zs({},this.currentQuality.audio),{audioBitrate:a,audioCodec:S,muteState:F,audioQuality:ee,audioFPS:ie}),nackCount:e.nackCount,pliCount:e.pliCount,totalRoundTripTime:e.totalRoundTripTime,currentRoundTripTime:e.currentRoundTripTime,qualityLimitationReason:e.qualityLimitationReason};if(e.videoPacketsLost!==void 0){var be=e.videoPacketsLostRate;ae.video.videoPacketsLost=e.videoPacketsLost,ae.video.videoPacketsLostRate=be}if(e.audioPacketsLost!==void 0){var Te=e.audioPacketsLostRate;ae.audio.audioPacketsLost=e.audioPacketsLost,ae.audio.audioPacketsLostRate=Te}if(e.googBandwidthLimitedResolution!==void 0){var Pe=e.videoCodecName,Ae=e.audioCodecName,Be=e.googFrameWidthInput,Ze=e.googFrameHeightInput,st=e.googCpuLimitedResolution,Rt=e.googFrameRateInput,At=e.codecImplementationName,vt=e.googAvailableSendBandwidth,Ft=e.googActualEncBitrate,Ct=e.googTargetEncBitrate;ae.googBandwidthLimitedResolution=e.googBandwidthLimitedResolution,ae.video.googCodecName=Pe,ae.audio.googCodecName=Ae,ae.googCpuLimitedResolution=st,ae.googFrameWidthInput=Be,ae.googFrameHeightInput=Ze,ae.googFrameRateInput=Rt,ae.codecImplementationName=At,ae.googAvailableSendBandwidth=vt,ae.googActualEncBitrate=Ft,ae.googTargetEncBitrate=Ct}this.currentQuality=ae},n.prototype._uploadPublishQuality=function(e){var t=this;if(this.oe.signal.isServerConnected){var i=Date.now();(this.qualityUploadLastTime==0||i-this.qualityUploadLastTime>=2e3)&&(e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=i,this.Oi.info(th+" "+this.streamId+" upload"+JSON.stringify(e)),this.ue&&this.ue.getTracks().forEach(function(r){Jr(r,t.Oi,th)}),this.Ri.updateQuality(0,e),this.qualityUploadLastTime=i)}},n}(),To=function(){return To=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},To.apply(this,arguments)},bn=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Sn=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},jl=new Uint8Array([0,0,0,1,101,184,0,4,0,0,9,255,254,222,35,192,166,30,73,128]),Vl=new Uint8Array([0,0,0,1,103,77,64,51,140,141,78,64,60,34,17,168,0,0,0,1,104,238,60,128]),cn=xi,Dr=Ls,Dn=Ur,yr=cn.error,Ko=Xi,Gl=function(){function n(e,t,i,r,s,o,u,m){var f,a=this;this.curCBState={state:"NO_PUBLISH",code:0},this.isProbeDispatch=!1,this.supportTransceiver=!0,this.useTransceiver=!1,this.zi=!1,this.publishedTimeStamp=0,this.firstPublishedTimeStamp=0,this.validPublishedTime=0,this.errorTimes=0,this.hasSucceed=!1,this.lastFailTimeLen=0,this._state=$,this.lastState=$,this.sessionId=0,this.sessionToken="",this.candidateInfo=[],this.qualityUpdateInterval=3e3,this.publishQualityList=[],this.maxQualityListCount=10,this.canvasTimer=null,this.canvas=null,this.ctx=null,this.canvasImage=null,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,g.getSeq)(),this.videoInfo={width:0,height:0,frameRate:0,bitRate:0,minBitrate:0,keyFrameInterval:2,channelCount:1,audioBitrate:48e3},this.mediaStreamConfig=null,this.offerSeq=0,this.peerConnection=null,this.qualityCount=0,this.closeSessionSignal=!1,this.channelCount=1,this.localSdpOrder=[],this.remoteSdpOrder=[],this.videoCodec="H264",this.stateNego=He.stop,this.isExternal=!1,this.negoInterval=25e3,this.publishEvent=!1,this.cameraState="on",this.microState="on",this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[],this.isPeer=!0,this.peerFailCount=0,this.peerID=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.iceDisconnectedMaxTime=15e3,this.isUpdateSDP=!1,this.isUdpSuccess=!1,this.toBeReplacedTracks={},this.send_seq=0,this.dataChannelState=0,this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.answerSdpTime=0,this.streamConnectIP="",this.mediaSideInfos=[],this.lowMediaSideInfos=[],this.mixConfig={forceSynchronousNetworkTime:0,alignment:0},this.sideMediaConfig={isSEIStart:!1,SEIType:nt.ZegoDefined,unregisterSeiFilter:"",uuidSend:!1,track:null},this.reportBeginTime=0,this.reportPublishingTime=0,this.reportPublishStateTime=0,this.isRePublish=!1,this.cachedGwNodesMode=io.TheSameReUse,this.rtcPublishCount=0,this.stopReason="",this.signalTime=0,this.pushCmdSeqMap=((f={}).MediaDescPush={seq:-1,time:0},f.MediaDescUpdatePush={seq:-1,time:0},f.PublishEventPush={seq:-1,time:0},f.ClientInfoPush={seq:-1,time:0},f.CandidateInfoPush={seq:-1,time:0},f),this._autoTcp=!0,this._turnToTcp=!1,this.proxyVrs={lanIP:"",wanIP:"",intranet:!1},this.encodeLowVideoFrame=function(S,F){a.encodeFrame(S,F,!0)},this.encodeVideoFrame=function(S,F){a.sideMediaConfig.track?a.encodeFrameAudioOnly(S,F,!1):a.encodeFrame(S,F,!1)},this.camera_status=2,this.mic_status=2,this.streamId=e,this.Oi=t,this.dataReport=i,this.qualityTimeInterval=r,this.Ri=o,this._i=u,this.videoCodec=this.ae("publish_video_codec"),this.previewer=m,this.localStream=m.localStream,this.zegoCaptureStream=m.zegoCaptureStream,this.zi=this._i.isMiniSdp,this.zegoCaptureStream&&this.zegoCaptureStream.startPublish(),m.onAudioTrackChange=function(S){var F=a.peerConnection&&a.peerConnection.getSenders().find(function(ee){var ie;return((ie=ee.track)===null||ie===void 0?void 0:ie.kind)===S.kind});F?(F.replaceTrack(S),a.Oi.info("zc.oatc remote audio track change success")):a.Oi.warn("zc.oatc stream has not sender")},this.initStreamReport(),this.qualityHandler=new Wm(this.qualityTimeInterval,s,this,this.Oi,this.dataReport,this._i,this.Ri)}return n.prototype.updateCBState=function(e){var t=this,i=Object.keys(e).some(function(r){return e[r]!==t.curCBState[r]});return i&&(this.curCBState=e),i},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),n.prototype.createSEIWorker=function(){return this.Ri.createSEIWorker()},Object.defineProperty(n.prototype,"seiWorker",{get:function(){return this.Ri.seiWorker},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"publishStat",{get:function(){return this.qualityHandler.publishStat},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastPublishStats",{get:function(){return this.qualityHandler.lastPublishStats},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"webrtcProtocol",{get:function(){return this.qualityHandler.webrtcProtocol},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lowStream",{get:function(){var e;return(e=this.previewer)===null||e===void 0?void 0:e.lowStream},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"iceStateDisConnect",{get:function(){return[He.iceClosed,He.iceDisconnected,He.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLastConnected",{get:function(){return this.lastState===le},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":this._autoTcp?this.webrtcProtocol:"udp"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ip",{get:function(){var e,t;return(t=(e=this.gwNode)===null||e===void 0?void 0:e.split(":"))===null||t===void 0?void 0:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"he",{get:function(){return this._i.useNetAgent},enumerable:!1,configurable:!0}),n.prototype.ae=function(e,t){return t===void 0&&(t=!1),this._i.settingConfig.getSetting(e,t)},Object.defineProperty(n.prototype,"se",{get:function(){return this.state===le},enumerable:!1,configurable:!0}),n.prototype.initStreamReport=function(){this.reportSpan=this.ji.createSpan(It.I,{key:xi.event,par:this.streamId},{key:Dr.event,par:this.streamId},Dr.event,!0),this.reportBeginTime=new Date().getTime()},n.prototype.checkAutoTcp=function(){var e=Od();this.Oi.info("zc.p.0.cat ".concat(this.he," ").concat(e," ").concat(this.isPeer)),this._autoTcp=!!(this.he&&e&&this.isPeer)},n.prototype.publishStateUpdateError=function(e,t,i,r){this.Oi.error(nh+"  call ",this.streamId+" "+JSON.stringify(e));var s=this.ji.createSpan(It.H,{key:xi.event,par:this.streamId},{key:""},mr);s.setAttributes({error:e==null?void 0:e.code,message:e==null?void 0:e.message}),s.end(),this.streamId&&this.onPublishStateUpdate(bt,this.streamId,e,t,i,r),this.Oi.info(nh+"  ended")},n.prototype.netProbeToReDispatch=function(){this.isProbeDispatch=!0,this.publishStateUpdateError(xi.error.Qt)},n.prototype.resetPublish=function(){this.Oi.info("zc.p.0.rp   "+this.streamId+" call"),this.state=$,this.publishEvent=!1,this.peerConnection==null&&this.peerConnection==null||(this.peerConnection.close(),this.peerConnection=null),this.localDesc&&(this.localDesc=null),this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.qualityHandler.clearPublishQualityTimer(),this._clearCanvasTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PublishEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescUpdatePush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.resetEncBitrate(),this.isUpdateSDP=!1},n.prototype._clearCanvasTimer=function(){this.canvasTimer!=null&&(clearInterval(this.canvasTimer),this.sideMediaConfig.track=null,this.canvasTimer=null,this.canvas=null,this.ctx=null,this.canvasImage=null)},n.prototype.shouldSendCloseSession=function(){return this.state!=$&&this.state!=X},n.prototype.resetPushCmdSeqMap=function(){var e;this.pushCmdSeqMap=((e={}).MediaDescPush={seq:-1,time:0},e.MediaDescUpdatePush={seq:-1,time:0},e.PublishEventPush={seq:-1,time:0},e.ClientInfoPush={seq:-1,time:0},e.CandidateInfoPush={seq:-1,time:0},e)},n.prototype.startPublish=function(e,t,i,r,s){var o,u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae=this;if(this.Oi.info(gr+" "+e+" called"),this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){if(this.checkAutoTcp(),this.state=ce,this.localStream=t,this.mediaStreamConfig=r,this.channelCount=r.channelCount,this.publishOption=s||{},Li(this.publishOption.enableDTX)){var Be=this.ae("dtx",!0);this.publishOption.enableDTX=Be!==void 0?!!Be:this.publishOption.enableDTX}else this.publishOption.enableDTX=!!this.ae("dtx");var Ze;s!=null&&s.SEIType&&(this.sideMediaConfig.SEIType=s.SEIType),this.qualityHandler.currentQuality.video.muteState=!((u=(o=this.previewer)===null||o===void 0?void 0:o.videoTrack)===null||u===void 0)&&u.enabled?"0":"1",this.qualityHandler.currentQuality.audio.muteState=this.localStream.getAudioTracks().length>0&&this.localStream.getAudioTracks()[0].enabled?"0":"1",Ri()&&r&&(r.externalCapture||r.externalMediaStream)&&(this.localStream.onaddtrack=function(){var Ft,Ct,Mt,Gt;Ae.Oi.info(gr+" "+Ae.streamId+" Track added"),t&&t.getTracks().forEach(function(vi){Jr(vi,Ae.Oi,gr)});var li=[];!((Ft=Ae.previewer)===null||Ft===void 0)&&Ft.videoTrack&&li.push((Ct=Ae.previewer)===null||Ct===void 0?void 0:Ct.videoTrack);var kt=Ae.localStream.getAudioTracks();if(li.length>1){var ti=(Mt=Ae.peerConnection)===null||Mt===void 0?void 0:Mt.getSenders().find(function(vi){var Lt;return((Lt=vi.track)===null||Lt===void 0?void 0:Lt.id)===Ae.localStream.getVideoTracks()[0].id});ti==null||ti.replaceTrack(li[1]),Ae.localStream.removeTrack(li[0])}else kt.length>1&&(ti=(Gt=Ae.peerConnection)===null||Gt===void 0?void 0:Gt.getSenders().find(function(vi){var Lt;return((Lt=vi.track)===null||Lt===void 0?void 0:Lt.kind)===kt[1].kind}),ti==null||ti.replaceTrack(kt[1]),Ae.localStream.removeTrack(kt[0]))}),i&&(this.videoInfo=i),s&&s.videoCodec&&(this.videoCodec=s.videoCodec);var st=(m=this.previewer)===null||m===void 0?void 0:m.videoPreviewType;switch(st){case"camera":Ze=this.ae("camera_video_bitrate",!0);break;case"screen":Ze=this.ae("screen_video_bitrate",!0);break;case"custom":Ze=this.ae("custom_video_bitrate",!0)}Ze!==void 0&&(this.Oi.info(gr+" setting "+st+" "+Ze),this.videoInfo.bitRate=Ze);var Rt=this.ae("bitrate_mode",!0);Rt&&(this.Oi.info(gr+" setting bitrate_mode "+Rt),this.videoInfo.startBitrate=Rt);var At=this.ae("publish_video_codec",!0);if(At&&(this.Oi.info(gr+" setting publish_video_codec "+At),this.videoCodec=At),s&&Li(s.isSEIStart)&&(this.sideMediaConfig.isSEIStart=s==null?void 0:s.isSEIStart),this.sideMediaConfig.isSEIStart){var vt=ka();this.videoCodec==="H264"&&vt||(this.Oi.warn(gr+" not use sei; support: ".concat(vt,", codec: ").concat(this.videoCodec," ")),this.sideMediaConfig.isSEIStart=!1)}!((f=this._i.seiConfig)===null||f===void 0)&&f.unregisterSEIFilter&&(this.sideMediaConfig.unregisterSeiFilter=(a=this._i.seiConfig)===null||a===void 0?void 0:a.unregisterSEIFilter),[0,1].includes(s==null?void 0:s.forceSynchronousNetworkTime)&&(this.mixConfig.forceSynchronousNetworkTime=s==null?void 0:s.forceSynchronousNetworkTime),this.ji.spanSetAttributes({key:cn.event,par:this.streamId},{video_en_codec_id:cn.video_en_codec_id(this.videoCodec=="VP8"?2:0),audio_c_channel_count:cn.audio_c_channel_count(this.channelCount==2?2:1),audio_en_bps:cn.audio_en_bps(this.videoInfo.audioBitrate),aec_level:cn.aec_level(r.AEC==1?2:r.AEC==0?0:2),ans_level:cn.ans_level(r.ANS==1?2:r.ANS==0?0:2),agc:cn.agc(r.AGC==1||r.AGC!=0),video_activate:cn.video_activate(!!(!((F=(S=this.previewer)===null||S===void 0?void 0:S.videoTrack)===null||F===void 0)&&F.enabled)),audio_activate:cn.audio_activate(!!(!((ie=(ee=this.previewer)===null||ee===void 0?void 0:ee.audioTrack)===null||ie===void 0)&&ie.enabled)),scenario:this._i.scenario}),this.reportSpan.setAttributes({room_id:Dr.room_id((be=(ae=this.Ri.publisherList[this.streamId])===null||ae===void 0?void 0:ae.room)===null||be===void 0?void 0:be.roomID),room_sid_string:Dr.room_sid_string((Pe=(Te=this.Ri.publisherList[this.streamId])===null||Te===void 0?void 0:Te.room)===null||Pe===void 0?void 0:Pe.roomSessionID),max_retry_interval:Dr.max_retry_interval(this._i.streamRetryTime),scenario:this._i.scenario,use_resource_type:Dr.use_resource_type(["rtc"])}),this.isPeer?this._createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.ce(),this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.negoTimer=setTimeout(function(){Ae.Oi.error(gr+" waiting timeout"),Ae.publishStateUpdateError(yr.Dt)},this.negoInterval)}else this.Oi.error(gr+" "+e+" streamId is null")},n.prototype.activateSEIInsert=function(e,t){return new Ge(function(i,r){i(!1)})},n.prototype.ce=function(e,t){var i,r,s,o=this;this.sessionSeq=(0,g.getSeq)();var u=this.streamId;this.Ri.testEnvironment==1&&(u="zegotest-"+this.Ri.appid+"-"+this.streamId),this.Ri.gwNode&&(this.gwNode=this.Ri.gwNode);var m=this.ae("gw_nodes");m&&In(m)&&m.length>0&&(this.Oi.info(gr+" setting "+JSON.stringify(m)),this.gwNodeList=m,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var f=this.ae("udp_or_tcp",!0);f&&(this.Oi.info(gr+" setting udp_or_tcp "+f),this._turnToTcp=f==="tcp"),this._turnToTcp&&(this.isPeer=!1,this._autoTcp=!1);var a=((r=(i=this.Ri.publisherList[this.streamId])===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.roomID)||((s=this._i.roomList[0])===null||s===void 0?void 0:s.roomID),S=this.getSessionParams(a),F=S.params,ee=S.paramsExt;this.paramsExt=ee;var ie=Ia;if(this.isPeer){var ae=new Date().getTime(),be=this.getSpan(Ia.event,this.parentSpanKey);this.signal.createSessionWithSdp({seq:this.sessionSeq,type:0,mode:0,streamId:u,videoInfo:this.videoInfo,strAuthParam:this.publishOption&&this.publishOption.streamParams||"",sdp:t||e.sdp,serverHost:this.gwNode,params:F,paramsExt:ee,roomID:a,geo:{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},player:this},function(Pe,Ae,Be){return bn(o,void 0,void 0,function(){var Ze;return Sn(this,function(st){return Ze=new Date().getTime(),this.Oi.info(gr+" create session time "+(Ze-ae)),be.setAttributes({webrtc_sid:Ae,sdp:ie.sdp(Be.sdp),is_mini:ie.is_mini(this.zi),gw_nodes:ie.gw_nodes(Be.gw_nodes),gw_nodes_ttl:ie.gw_nodes(Be.gw_nodes_ttl),gw_version:ie.gw_version(Be.gw_version)}),be.end(),this.ji.spanSetAttributes({key:cn.event,par:this.streamId},{gw_version:cn.gw_version(Be.gw_version)}),this.stateNego!==He.iceConnected&&this.getSpan(Xu,this.parentSpanKey,"",!0),this._handleCreateSessionWithSdpResp(Pe,Ae,Be),[2]})})},function(Pe,Ae){var Be;if(o.sessionSeq==Ae){var Ze=Pe==1?yr.Ct:yr.Nt;o.Oi.info(gr+" ".concat(o.streamId," create session fail. signal: ").concat(o.signal.state,"; ws: ").concat((Be=o.signal.websocket)===null||Be===void 0?void 0:Be.readyState," ")),be.setAttributes({try_cnt:o.peerFailCount}),o.ji.setError(be,Ze),o.publishStateUpdateError(Ze)}else o.Oi.warn(gr+" seq is not match.")})}else{var Te=this.getSpan(Ia.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,0,0,u,this.publishOption&&this.publishOption.streamParams,this.gwNode,F,a,{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},function(Pe,Ae,Be){return bn(o,void 0,void 0,function(){return Sn(this,function(Ze){return Te.setAttributes({webrtc_sid:ie.webrtc_sid(Ae),gw_nodes:ie.gw_nodes(Be.gw_nodes),gw_nodes_ttl:ie.gw_nodes(Be.gw_nodes_ttl),gw_version:ie.gw_version(Be.gw_version)}),Te.end(),this.ji.spanSetAttributes({key:cn.event,par:this.streamId},{gw_version:cn.gw_version(Be.gw_version)}),this._handleCreateSessionResp(Pe,Ae,Be),[2]})})},function(Pe,Ae){if(o.sessionSeq==Ae){var Be=Pe==1?yr.Ct:yr.Nt;o.ji.setError(Te,Be),o.publishStateUpdateError(Be)}else o.Oi.warn(gr+" seq is not match.")})}this.state=X,this.Oi.info(gr+" "+this.streamId+" called success"),this.stateNego=He.start},n.prototype._handleCreateSessionResp=function(e,t,i){var r=i.turn_server,s=r.split("?")[0]&&r.split("?")[0].slice(5),o=this.Ri.server.split("?"),u=o[1]&&o[1].slice(2),m="webrtc://".concat(s,"/").concat(u,"/").concat(this.streamId);if(this.ji.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:i.session_id,url:m}),this.Oi.info(gr+" "+this.streamId+" sessionId:"+i.session_id),this.sessionSeq==e){this.resetPushCmdSeqMap();var f=i.client_ip||i.clientip;f&&(this._i.clientIP=f);var a=0,S=new Date().getTime();if(this.reportBeginTime&&(this.Oi.info(gr+" "+this.streamId+" create signal time "+(a=S-this.reportBeginTime)),this.signalTime=a),this.answerSdpTime=S,i.result!==0){if(this.Oi.error(gr+" "+this.streamId+" create session failed "+i.result),(i==null?void 0:i.result)===1021)return void this.publishStateUpdateError(Re,!0);this.publishStateUpdateError(yr.Nt)}else this.sessionId=i.session_id,this.sessionToken=i.session_token,this.Oi.info(gr+" "+this.streamId+" create session success "+this.sessionId),this.setGwNodes(i,!1),this._onCreatePublishSessionSuccess(i)}else this.Oi.error(gr+" "+this.streamId+" seq is not match.")},n.prototype._handleCreateSessionWithSdpResp=function(e,t,i){var r=this;if(this.Oi.info(gr+" sessionId:"+t),this.sessionSeq==e){this.resetPushCmdSeqMap();var s=i.client_ip||i.clientip;s&&(this._i.clientIP=s);var o=0,u=new Date().getTime();if(this.reportBeginTime&&(this.Oi.info(gr+" "+this.streamId+" create signal time "+(o=u-this.reportBeginTime)),this.signalTime=o),this.answerSdpTime=u,i.result!==0){if(i.result===110&&(this.zi=!1,this._i.zi=!1),this.Oi.error(gr+" create session failed "+i.result),(i==null?void 0:i.result)===1021)return void this.publishStateUpdateError(Re,!0);this.publishStateUpdateError({code:yr.Nt.code,message:yr.Nt.message+" result:"+i.result})}else{this.sessionId=t,this.sessionToken=i.session_token,this.setGwNodes(i,!1),this.Oi.info(gr+" get remote session success "+this.streamId);var m=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(f,a,S){if(m){var F=(performance.now()-m).toFixed(0);m=void 0,r.Oi.info(gr+" ".concat(r.streamId,", cmd: CloseSessionPush, cost_time: ").concat(F))}r.onRecvCloseSession(f,a,S)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(f,a,S){r.onRecvResetSession(f,a,S)}),this.signal.registerPushCallback("PublishEventPush",this.sessionId,function(f,a,S){if(r.fe("PublishEventPush",f)){if(m){var F=(performance.now()-m).toFixed(0);m=void 0,r.Oi.info(gr+" ".concat(r.streamId,", cmd: PublishEventPush, cost_time: ").concat(F))}r._onRecvPublishEvent(f,a,S)}}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(f,a,S){r.fe("ClientInfoPush",f)&&r._onRecvClientInfo(f,a,S)}),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,function(f,a,S){return bn(r,void 0,void 0,function(){return Sn(this,function(F){switch(F.label){case 0:return this.fe("MediaDescUpdatePush",f)?[4,this._onRecvUpdateMediaDescription(f,a,S)]:[2];case 1:return F.sent(),[2]}})})}),this._autoTcp&&(this.Oi.info(gr+" ".concat(this.streamId,", fully auto tcp")),this.setConfiguration(i.sdp,i.params_ext),this.setLocalSdp(this.localDesc)),this.de(i.sdp,void 0,i.params_ext)}}else this.Oi.error(gr+" seq is not match.")},n.prototype.setCandidate=function(e){var t,i=this;if(this.Oi.info(Qc+" ".concat(this.streamId,", set candidate ").concat(JSON.stringify(e))),e){var r=e.candidate,s=e.sdpMid,o=e.sdpMLineIndex;r&&(this.Oi.info(Qc+" ".concat(this.streamId,", addIceCandidate")),(t=this.peerConnection)===null||t===void 0||t.addIceCandidate(new RTCIceCandidate({sdpMid:s,sdpMLineIndex:o,candidate:r})).then(function(){i.Oi.info(Qc+" ".concat(i.streamId,", add can suc"))}).catch(function(u){i.Oi.info(Qc+" ".concat(i.streamId,", add can fail, ").concat(u.message))}))}},n.prototype.getSessionParams=function(e){var t="",i=[],r={},s=this._i.seiConfig.SEIPass;if(Li(s)){var o=s?1:0;this.he?r.sei_filter_pass=o:i.push("zgseipass="+o)}this.he&&(r.auto_switch_turn_type=this._i.browser==="firefox"?2:1),this.zi&&!this.he&&i.push("sdp_fmt_type=1"),this._i.idName&&i.push("zguid="+this._i.idName),e&&i.push("zgrid="+e),this.Ri.isProxy&&(this._i.useNetAgent?r.zg_proxy=1:i.push("zg_proxy=1")),this.mixConfig.forceSynchronousNetworkTime===1&&(this.he?r.sync_ntp=1:i.push("sync_ntp=1"));var u=this.publishOption.setDeviceDelayByUser;return isNaN(u)||(this.he?r.ktv_device_delay=u:i.push("ktv_device_delay="+u)),i.length>0&&(t=i.join("&")),{params:t,paramsExt:r}},n.prototype.setGwNodes=function(e,t){var i;if(this.Oi.info("zc.p.0.sgn "+this.streamId+" "+JSON.stringify(e==null?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),((i=e.gw_nodes)===null||i===void 0?void 0:i.length)>0){var r=Dd(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(r,e.gw_nodes_ttl)}},n.prototype.resetGwNodes=function(){this.Oi.info("zc.p.0.rgn "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},n.prototype.handleDispatchedGwNodes=function(e,t){if(this.Oi.info("zc.p.0.hdgn "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var i=t===0?60:t;this.gwNodesTTL=i?new Date().getTime()+1e3*i:this.gwNodesTTL,e.length>0&&this.Ri.updateCachedGwNodesList(this,!0,e,i)}},n.prototype.dispatchGwNodes=function(e,t){var i,r=this.streamId;this.Ri.testEnvironment==1&&(r="zegotest-"+this.Ri.appid+"-"+this.streamId),(i=this.signal)===null||i===void 0||i.dispatchGwNodes((0,g.getSeq)(),0,r,{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},function(s,o,u){e&&e(u)},function(s,o){t&&t(s)})},n.prototype._onCreatePublishSessionSuccess=function(e){var t;return bn(this,void 0,void 0,function(){var i,r,s,o,u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct,Mt,Gt,li,kt,ti=this;return Sn(this,function(vi){switch(vi.label){case 0:return this.Oi.info((i=Yd)+" "+this.streamId+" called"),r=[],this.Ri.autoSwitchProtocol=this.ae("auto_to_tcp")||!1,s=this.ae("udp_max_fail_num"),!isNaN(s)&&(this.Ri.maxUdpFailNum=s),m=(o=this.Ri).maxUdpFailNum,f=o.udpFailNum,this.Oi.info(i+"  autoToTcp: ".concat(u=o.autoSwitchProtocol,", udpFailNum: ").concat(f,", maxUdpFailNum: ").concat(m,".")),u&&!this._turnToTcp&&f>=m&&(this.Oi.info(i+" switch to tcp. "),this._turnToTcp=!0,this._autoTcp=!1),(a=this.ae("udp_or_tcp",!0))&&(this.Oi.info(i+" setting udp_or_tcp "+a),this._turnToTcp=a==="tcp"),S=void 0,F=this.proxyVrs.wanIP=(e.gw_nodes[0]||this.gwNode).split(":")[0],!this.Ri.isProxy||this.Ri.isLocalProxy?[3,2]:(ee=g.ZegoExpressWebRTM==null?void 0:g.ZegoExpressWebRTM.proxyCtrl,[4,Promise.all([ee.getTurnInfo(),ee.intranetCheck(Kh(F),void 0)])]);case 1:return ie=vi.sent(),be=ie[1],(ae=ie[0]).code?this.Oi.warn(i+" "+this.streamId+" use proxy failed."+JSON.stringify(ae)):(Pe=(Te=ae.data).password,Ae=Te.turn_ipv4,Be=Te.turn_port,Ze=Te.username,(st=Te.turn_internal_ipv4)&&(this.paramsExt.coturn_internal=st),Rt=uu(Ae),At="turn:".concat(Rt,":").concat(Be,"?transport=").concat(this._turnToTcp?"tcp":"udp"),this.Oi.info(i+" turn server: ".concat(At," ; intranet: ").concat(JSON.stringify((t=be==null?void 0:be.data)===null||t===void 0?void 0:t.intranet),"; turn internal ip: ").concat(uu(st))),S=[{credential:Pe,urls:[At],username:Ze}]),be.code?this.Oi.warn(i+" "+this.streamId+" use intranetCheck failed."+JSON.stringify(be)):this.proxyVrs.intranet=be.data.intranet||!1,[3,3];case 2:this.Ri.isLocalProxy&&this.Ri.turnServers?(S=(Ft=this.Ri.turnServers).map(function(Lt){return{credential:Lt.credential,urls:[Lt.url],username:Lt.username}}),this.Oi.info(i+" "+this.streamId+" use local proxy: "+JSON.stringify(Ft)),this.proxyVrs.intranet=!1):e.turn_server&&(vt=e.turn_server.split(";"),this.setTurnTcp(),Ft=void 0,Ct=vt.filter(function(Lt){return Lt.indexOf("udp")>-1}),Mt=vt.filter(function(Lt){return Lt.indexOf("tcp")>-1}),Ft=this._turnToTcp?Mt.length>0?Mt:Ct.map(function(Lt){return Lt.replace("udp","tcp")}):Ct,this.Oi.info(i+" over tcp "+JSON.stringify(Ft)),r.push.apply(r,Ft)),vi.label=3;case 3:return e.stun_server&&r.push(e.stun_server),Gt={iceTransportPolicy:"all",iceServers:[{urls:r,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart},S&&(Gt.iceServers=S,Gt.iceTransportPolicy="relay",Gt.rtcpMuxPolicy="require"),this.Oi.info(i+" "+this.streamId+" username: "+(li=Gt.iceServers[0]).username+", credential: "+li.credential),this._createOffer(Gt),kt=performance.now(),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(Lt,ui,Jt){if(ti.fe("CandidateInfoPush",Lt))var ai=setTimeout(function(){ti.onRecvCandidateInfo(Lt,ui,Jt),clearTimeout(ai)},0)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(Lt,ui,Jt){if(kt){var ai=(performance.now()-kt).toFixed(0);kt=void 0,ti.Oi.info(i+" ".concat(ti.streamId,", cmd: CloseSessionPush, cost_time: ").concat(ai))}Jt.reason===32&&(ti.zi=!1,ti._i.zi=!1),ti.onRecvCloseSession(Lt,ui,Jt)}),this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(Lt,ui,Jt){return bn(ti,void 0,void 0,function(){return Sn(this,function(ai){switch(ai.label){case 0:return this.fe("MediaDescPush",Lt)?[4,this._onRecvMediaDescription(Lt,ui,Jt)]:[2];case 1:return ai.sent(),[2]}})})}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(Lt,ui,Jt){ti.onRecvResetSession(Lt,ui,Jt)}),this.signal.registerPushCallback("PublishEventPush",this.sessionId,function(Lt,ui,Jt){if(ti.fe("PublishEventPush",Lt)){if(kt){var ai=(performance.now()-kt).toFixed(0);kt=void 0,ti.Oi.info(i+" ".concat(ti.streamId,", cmd: PublishEventPush, cost_time: ").concat(ai))}ti._onRecvPublishEvent(Lt,ui,Jt)}}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(Lt,ui,Jt){ti.fe("ClientInfoPush",Lt)&&ti._onRecvClientInfo(Lt,ui,Jt)}),this.signal.registerPushCallback("MediaDescUpdatePush",this.sessionId,function(Lt,ui,Jt){return bn(ti,void 0,void 0,function(){return Sn(this,function(ai){switch(ai.label){case 0:return this.fe("MediaDescUpdatePush",Lt)?[4,this._onRecvUpdateMediaDescription(Lt,ui,Jt)]:[2];case 1:return ai.sent(),[2]}})})}),this.Oi.info(i+" "+this.streamId+" call success"),[2]}})})},n.prototype.fe=function(e,t){var i=this.pushCmdSeqMap[e],r=i.seq,s=i.time,o=performance.now();return r!==-1&&r>=t&&o-s<6e3?(this.Oi.warn("zc.p.cps.0"+" ".concat(this.streamId,", push ").concat(e,", seq ").concat(t," local ").concat(JSON.stringify(this.pushCmdSeqMap[e]))),!1):(this.pushCmdSeqMap[e]={seq:t,time:o},!0)},n.prototype._createOffer=function(e){var t,i,r,s=this,o=Yd;this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(Te){s.onIceCandidate(Te)},this.peerConnection.onsignalingstatechange=function(Te){s.onSignalStateChange(Te)},this.peerConnection.connectionState?this.peerConnection.onconnectionstatechange=function(Te){s.onConnectionStateChange(Te)}:this.Oi.info("".concat(o," not support connectionState")),this.peerConnection.oniceconnectionstatechange=function(Te){s.onIceConnectionStateChange(Te)},this.Ri.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(Te){s.Oi.info(o+" "+s.streamId+" data channel open"),s.dataChannelState=1},this.dataChannel.onclose=function(Te){s.Oi.error(o+" "+s.streamId+" data channel close ")});var u=[],m=[],f=ka();if(this.lowStream&&this.lowStream.getVideoTracks().forEach(function(Te){var Pe,Ae=(Pe=s.peerConnection)===null||Pe===void 0?void 0:Pe.addTrack(Te,s.lowStream);s.sideMediaConfig.isSEIStart&&Ae&&f&&s.createVideoSenderTransform(Ae,!0)}),this.localStream){if(this.localStream.getTracks().forEach(function(Te){var Pe,Ae=(Pe=s.peerConnection)===null||Pe===void 0?void 0:Pe.addTrack(Te,s.localStream);s.sideMediaConfig.isSEIStart&&Ae&&f&&(Te.kind==="video"?s.createVideoSenderTransform(Ae):Te.kind==="audio"&&s._createAudioSenderTransform(Ae),Jr(Te,s.Oi,o))}),!(!((t=this.previewer)===null||t===void 0)&&t.videoTrack)&&this.sideMediaConfig.isSEIStart){this.videoInfo.bitRate||(this.videoInfo.bitRate=50);var a=this.sideMediaConfig.track=this._addCanvasStreamVideoTrack(),S=this.peerConnection.addTrack(a,this.localStream);S&&a.kind=="video"&&f&&this.createVideoSenderTransform(S)}!((i=this.previewer)===null||i===void 0)&&i.videoTrack&&(u=[(r=this.previewer)===null||r===void 0?void 0:r.videoTrack]),m=this.localStream.getAudioTracks();var F,ee=!1,ie=!1;u.length>0&&(this.Oi.info(o+" "+this.streamId+" video device: "+(F=u[0]).label+" ; set: "+JSON.stringify(F.getSettings())),ee=!0),m.length>0&&(this.Oi.info(o+" "+this.streamId+" audio device: "+(F=m[0]).label+" ; set: "+JSON.stringify(F.getSettings())),ie=!0),typeof RTCPeerConnection.prototype.addTransceiver=="function"?(this.supportTransceiver=!0,ee||this.sideMediaConfig.isSEIStart||(this.peerConnection.addTransceiver("video",{direction:"sendrecv"}),this.useTransceiver=!0),ie||(this.peerConnection.addTransceiver("audio",{direction:"sendrecv"}),this.useTransceiver=!0)):this.supportTransceiver=!1}var ae={offerToReceiveAudio:m.length>0?1:0,offerToReceiveVideo:u.length>0?1:0};this.publishOption.enableDTX===!0&&(ae.voiceActivityDetection=!0),this.Oi.info(o+" "+this.streamId+" createOffer: "+JSON.stringify(ae));var be=this.getSpan(Wi,this.parentSpanKey);this.peerConnection.createOffer(ae).then(function(Te){be.setAttributes({sdp:Ji(Te.sdp),is_mini:vr(s.zi)}),be.end(),s.onCreateOfferSuccess(Te)},function(Te){s.Oi.error(o+" "+s.streamId+" create offer error "+Te.toString()),s.ji.setError(be,{code:yr.Rt.code,message:Te.toString()}),s.publishStateUpdateError(yr.Rt,!0)})},n.prototype.sendSEI=function(e){var t=this;if(this.videoCodec!=="H264")return this.Oi.error(Wc+" code not support"),!1;if(!this.sideMediaConfig.isSEIStart)return this.Oi.error(Wc+" not enable to send sei"),!1;if(this.sideMediaConfig.SEIType==nt.UserUnregister&&e.byteLength<=16)return this.Oi.error(Wc+" inData size should greater than 16"),!1;if(this.mediaSideInfos.length>=10)return this.Oi.error(Wc+" side info count limit"),!1;this.mediaSideInfos.push(e.buffer);var i=this.seiWorker;return i&&(this.mediaSideInfos.forEach(function(r){i.postMessage({cmd:"pushSideInfo",buffer:r,hasLowStream:!!t.lowStream,streamID:t.streamId,maxLength:10},[r])}),this.mediaSideInfos=[]),!0},n.prototype._createAudioSenderTransform=function(e){var t={cmd:"encode",streamID:this.streamId,kind:"audio"},i=this.createSEIWorker();if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(i,t);else{var r=e.createEncodedStreams(),s=r.readable,o=r.writable,u=!i;try{i&&i.postMessage(To({readable:s,writable:o},t),[s,o])}catch{u=!0}if(u){this.Oi.warn("zc.p.cart The current browser version is too low.");var m=new TransformStream({transform:this.encodeAudioFrame});s.pipeThrough(m).pipeTo(o),this.Ri.handleSeiRollBack()}}},n.prototype.createVideoSenderTransform=function(e,t){t===void 0&&(t=!1);var i=this.createSEIWorker(),r={cmd:"encode",streamID:this.streamId,type:this.sideMediaConfig.SEIType,isLowStream:t,emulationPreventionByte:this._i.seiConfig.emulationPreventionByte,onlyAudio:!!this.sideMediaConfig.track};if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(i,r);else{var s=e.createEncodedStreams(),o=s.readable,u=s.writable,m=!i;try{i&&i.postMessage(To({readable:o,writable:u},r),[o,u])}catch{m=!0}if(m){this.Oi.warn("zc.p.cvrt The current browser version is too low.");var f=new TransformStream({transform:this.encodeVideoFrame});o.pipeThrough(f).pipeTo(u),this.Ri.handleSeiRollBack()}}},n.prototype.encodeAudioFrame=function(e,t){t.enqueue(e)},n.prototype.encodeSEINalu=function(e){var t=e.byteLength,i=parseInt(t/255),r=t%255,s=new ArrayBuffer(1+(i+1)+t+1),o=new DataView(s),u=0;o.setUint8(u++,this.sideMediaConfig.SEIType===nt.UserUnregister?5:243);for(var m=0;m<i;m++)o.setUint8(u++,255);o.setUint8(u++,r);var f=new DataView(e);for(m=0;m<(e==null?void 0:e.byteLength);m++)o.setInt8(u++,f.getInt8(m));o.setInt8(u++,128);var a=new Uint8Array(s),S=a;if(this._i.seiConfig.emulationPreventionByte){var F=function(ee){for(var ie=[],ae=ee.length,be=0,Te=0;Te<ae;++Te){var Pe=ee[Te];Pe<=3&&be>=2&&(ie.push(3),be=0),ie.push(ee[Te]),Pe==0?++be:be=0}var Ae=new Uint8Array(ie);return{output:Ae,outLength:Ae.length}}(a).output;S=F}return{rbspView:S,ebspLength:S.length}},n.prototype.encodeFrame=function(e,t,i){var r=i?this.lowMediaSideInfos:this.mediaSideInfos;if(r.length>0){for(var s=new DataView(e.data),o=[],u=0,m=0;m<r.length;m++){var f=this.encodeSEINalu(r[m]);u+=5+(Ze=f.ebspLength),o.push(f)}i?this.lowMediaSideInfos=[]:this.mediaSideInfos=[];for(var a=new ArrayBuffer(u+e.data.byteLength),S=new DataView(a),F=0,ee=new Jh(s),ie=0,ae=!1,be=!1;ee.NextNalu();){var Te=31&s.getUint8(ee.nalu_start+ee.start_code_size);if(Te==7)ae=!0,ie+=ee.nalu_size;else if(Te==8)be=!0,ie+=ee.nalu_size;else if(Te==9)continue;if(ae&&be)break}for(var Pe=0;Pe<ie;Pe++)S.setInt8(F++,s.getInt8(Pe));for(m=0;m<o.length;m++){var Ae=o[m],Be=Ae.rbspView,Ze=Ae.ebspLength;S.setUint8(F++,0),S.setUint8(F++,0),S.setUint8(F++,0),S.setUint8(F++,1),S.setUint8(F++,6);for(var st=0;st<Ze;st++)S.setInt8(F++,Be[st-0])}for(Pe=ie;Pe<e.data.byteLength;Pe++)S.setInt8(F++,s.getInt8(Pe));e.data=a}t.enqueue(e)},n.prototype.encodeFrameAudioOnly=function(e,t,i){var r=i?this.lowMediaSideInfos:this.mediaSideInfos,s=0;e.type==="key"&&(s=Vl.length+jl.length);var o=0,u=[];if(r.length>0){for(var m=0;m<r.length;m++){var f=this.encodeSEINalu(r[m]);o+=5+(Te=f.ebspLength),u.push(f)}i?this.lowMediaSideInfos=[]:this.mediaSideInfos=[]}var a=new ArrayBuffer(o+s),S=new DataView(a),F=0;if(e.type==="key")for(var ee=new DataView(Vl.buffer),ie=0;ie<Vl.length;ie++)S.setInt8(F++,ee.getInt8(ie));for(m=0;m<u.length;m++){var ae=u[m],be=ae.rbspView,Te=ae.ebspLength;S.setUint8(F++,0),S.setUint8(F++,0),S.setUint8(F++,0),S.setUint8(F++,1),S.setUint8(F++,6);for(var Pe=0;Pe<Te;Pe++)S.setInt8(F++,be[Pe-0])}if(e.type==="key"){var Ae=new DataView(jl.buffer);for(ie=0;ie<jl.length;ie++)S.setInt8(F++,Ae.getInt8(ie))}e.data=a,t.enqueue(e)},n.prototype.onCreateOfferSuccess=function(e,t,i,r){var s=this;t&&(this.isUpdateSDP=!0,r&&(this.updateSDPCallBack=r)),this.localStream&&this.localStream.getTracks().forEach(function(Pe){Jr(Pe,s.Oi,zs)}),this.videoInfo.bitRate>0&&(e.sdp=this._updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),e.sdp=e.sdp.replace(/sendrecv/g,"sendonly");var o=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(o){var u=o.replace(/sendonly/,"sendrecv");e.sdp=e.sdp.replace(o,u)}var m=[];isNaN(this.videoInfo.audioBitrate)||m.push("maxaveragebitrate="+this.videoInfo.audioBitrate);var f=/stereo=\d+/,a=e.sdp.match(f),S="stereo="+(this.videoInfo.channelCount===2?1:0);if(a&&a[0]?e.sdp=e.sdp.replace(f,S):m.push(S),this.publishOption.enableDTX===!0){var F=/usedtx=\d+/,ee=e.sdp.match(F),ie="usedtx="+(this.publishOption.enableDTX?1:0);ee&&ee[0]?e.sdp=e.sdp.replace(F,ie):m.push(ie)}var ae=/useinbandfec=\d+/,be=e.sdp.match(ae);if(be&&be[0]&&m.push(be[0]),e.sdp=e.sdp.replace(ae,m.join(";")),this.localSdpOrder=e.sdp.match(/m=(.\w*)\s/g)||[],this.Oi.info(zs+" "+this.streamId+" local sdp revert "+this.localSdpOrder.join("")),e.sdp=xc.getSDPByVideDecodeType(e.sdp,this.videoCodec),this.Oi.info(zs+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.Oi.info(zs+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),this._autoTcp){this.localDesc=e;var Te=this.setSdpHardCode(e);this.ce(e,Te)}else this.setLocalSdp(e,i)},n.prototype.setLocalSdp=function(e,t){var i,r=this;this.Oi.info(zs+" "+this.streamId+" set local sdp");var s=this.getSpan($i,this.parentSpanKey);s.setAttributes({sdp:cs(e.sdp),is_mini:or(this.zi)}),(i=this.peerConnection)===null||i===void 0||i.setLocalDescription(e).then(function(){return bn(r,void 0,void 0,function(){return Sn(this,function(o){switch(o.label){case 0:return s.end(),[4,this.onSetLocalDescriptionSuccess(e,t)];case 1:return o.sent(),[2]}})})},function(o){r.Oi.error(zs+" "+r.streamId+" error "+o.toString()),r.ji.setError(s,{code:yr._t.code,message:o.toString()}),r.publishStateUpdateError(yr._t,!0)})},n.prototype._updateBandwidthRestriction=function(e,t){var i="AS";return this._i.browser==="firefox"&&(t=1e3*(t>>>0),i="TIAS"),e=e.indexOf("b="+i+":")===-1?e.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+i+":"+t+`\r
`):(e=e.replace(new RegExp("b="+i+`:.*\r
`,"g"),"b="+i+":"+t+`\r
`)).replace("b="+i+":"+t+`\r
`,"")},n.prototype.setSdpHardCode=function(e){var t,i,r=!1,s=(t=this.previewer)===null||t===void 0?void 0:t.previewType,o=this._i.settingConfig;s==="camera"?r=o.getSetting("camera_hard_encode"):s==="screen"?r=o.getSetting("hardware_encode"):s==="custom"&&(r=o.getSetting("custom_hard_encode"));var u=!r;return this.Oi.info(vo+" "+this.streamId+" ".concat((i=this.previewer)===null||i===void 0?void 0:i.previewType," software encode: ").concat(u,", ")),xc.getSDPByVideDecodeType(e.sdp,this.videoCodec,u,this._i.engineConfig.encodecSelectionMode)},n.prototype.onSetLocalDescriptionSuccess=function(e,t){var i,r;return bn(this,void 0,void 0,function(){var s,o,u,m,f,a,S,F,ee=this;return Sn(this,function(ie){return this.Oi.info(vo+" "+this.streamId+" success"),this.localStream&&this.localStream.getTracks().forEach(function(ae){Jr(ae,ee.Oi,vo)}),!this.isUpdateSDP&&(this.state=P),t&&(this.videoInfo=To(To({},this.videoInfo),t)),s=this.setSdpHardCode(e),o=(i=this.previewer.videoTrack)===null||i===void 0?void 0:i.getSettings(),u=(o==null?void 0:o.width)||this.videoInfo.width,m=(o==null?void 0:o.height)||this.videoInfo.height,f=(o==null?void 0:o.frameRate)||this.videoInfo.frameRate,a={sdp:s,width:isNaN(u)?100:u,height:isNaN(m)?100:m,frameRate:isNaN(f)?15:f,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48,keyframe_intv:Math.floor(((r=this.videoInfo)===null||r===void 0?void 0:r.keyFrameInterval)||2),paramsExt:this.paramsExt},this.offerSeq=(0,g.getSeq)(),this.isUpdateSDP?(this.Oi.info(vo+" "+this.streamId+" update sdp"),S=To(To({},a),{seq:this.sessionSeq,peerID:this.peerID,type:0}),this.signal.sendMediaDescUpdateReq(this,this.offerSeq,this.sessionId,S,function(ae,be,Te){(Te==null?void 0:Te.result)==0&&(Te!=null&&Te.sdp)&&ee.de(Te==null?void 0:Te.sdp)},function(ae,be){ee.Oi.error(vo+" "+ee.streamId+" update sdp failed"),ee.updateSDPCallBack&&ee.updateSDPCallBack(-1),ee.publishStateUpdateError(ae==1?yr.Ut:yr.Ft)}),[2]):this.isPeer?this._autoTcp?(this.Oi.info(vo+" "+this.streamId+" fully auto tcp"),[2]):(this.ce(e,s),[2]):(F=this.getSpan(wp,this.parentSpanKey),this.signal.sendMediaDesc(this,this.offerSeq,this.sessionId,0,a,function(ae,be,Te){F.setAttributes({webrtc_sid:Ip(be),mediaDescription:{width:a.width,height:a.height,frameRate:a.frameRate,video_min_kpbs:a.video_min_kpbs,video_max_kpbs:a.video_max_kpbs,audio_kpbs:a.audio_kpbs,keyframe_intv:a.keyframe_intv},sdp:a.sdp}),F.end(),ee.offerSeq==ae&&ee.sessionId==be?(ee.Oi.info(vo+" "+ee.streamId+" send success stateNego:waiterAnswer"),ee.stateNego=He.waiterAnswer,ee.state=z,bi(Te==null?void 0:Te.sdp)&&(Te!=null&&Te.sdp)&&ee.de(Te.sdp,!0)):ee.Oi.error(vo+" "+ee.streamId+" seq or sessionId is not equal")},function(ae,be){ee.ji.setError(F,{code:yr.Mt.code,message:ae.toString()}),ee.publishStateUpdateError(yr.Mt)}),this.Oi.info(vo+" "+this.streamId+" call success"),[2])})})},n.prototype._onRecvUpdateMediaDescription=function(e,t,i){return bn(this,void 0,void 0,function(){var r,s,o;return Sn(this,function(u){switch(u.label){case 0:if(this.Oi.info(Gc+" "+this.streamId+" received"),this.Oi.info(Gc+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendUpdateMediaDescAck(e,this.sessionId,0,this.peerID),r=i.sdp,this.Oi.info("".concat(Gc," ").concat(this.streamId," rSdp:").concat(r.length," ").concat(this.zi)),!this.zi||!r)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.signal.webrtcCenterSvr.parseRecSdp(r,!0,this)];case 2:return s=u.sent(),[3,4];case 3:return o=u.sent(),this.Oi.info(Gc+" "+this.streamId+" parse sdp err "+JSON.stringify(o)),[2,this.publishStateUpdateError(cn.error.Vt)];case 4:return s=s||i.sdp,i.type==1?this.de(s):this.publishStateUpdateError(yr.Mt),[2]}})})},n.prototype._onRecvMediaDescription=function(e,t,i){return bn(this,void 0,void 0,function(){var r,s,o,u;return Sn(this,function(m){switch(m.label){case 0:if(this.Oi.info(Ba+" "+this.streamId+" received"),r=i.sdp,this.Oi.info("".concat(Ba," ").concat(this.streamId," rSdp:").concat(r.length," ").concat(this.zi)),!this.zi||!r)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.signal.webrtcCenterSvr.parseRecSdp(r,!0,this)];case 2:return s=m.sent(),[3,4];case 3:return o=m.sent(),this.Oi.info(Ba+" "+this.streamId+" parse sdp err "+JSON.stringify(o)),[2,this.publishStateUpdateError(cn.error.Vt)];case 4:return s=s||i.sdp,(u=this.getSpan(Op,this.parentSpanKey)).setAttributes({sdp:kp(i.sdp),is_mini:Pp(this.zi)}),u.end(),this.state!=z?(this.Oi.info(Ba+" "+this.streamId+" current state "+this.state+" not allowed"),[2]):(this.stateNego=He.waitingCandidate,this.Oi.info(Ba+" "+this.streamId+" received stateNego:waitingCandidate"),this.signal.sendMediaDescAck(e,this.sessionId,0),i.type==1?this.de(s):this.publishStateUpdateError(yr.Mt),[2])}})})},n.prototype.getVideoSenders=function(){var e;return(e=this.peerConnection)===null||e===void 0?void 0:e.getSenders().filter(function(t){return t.track&&t.track.kind==="video"})},n.prototype.canSetBandWidthBySender=function(){var e=this._i.browserInfo.name.toLowerCase(),t=function(i){return bi(i)&&Number(i.split(".")[0])||0}(this._i.browserInfo.version);return(e==="chrome"||e==="safari"||e==="firefox"&&t>=64)&&"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype},n.prototype.ve=function(e,t){return t===void 0&&(t=""),bn(this,void 0,void 0,function(){var i=this;return Sn(this,function(r){return[2,new Ge(function(s){var o,u=function(f){i.Oi.info("zc.p.sbw set band width by sdp.");var a="AS";return i._i.browser==="firefox"&&(e=1e3*(e>>>0),a="TIAS"),f=/b=AS.*(\r\n|\n)/.test(f)?f.replace(/AS:(\d+)/,a+":"+e):f.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=".concat(a,":").concat(e,`
`))},m=(o=i.getVideoSenders())===null||o===void 0?void 0:o.filter(function(f){var a,S;return((a=f.track)===null||a===void 0?void 0:a.id)!==((S=i.lowStream)===null||S===void 0?void 0:S.getVideoTracks()[0].id)});i.canSetBandWidthBySender()&&(m!=null&&m.length)?(i.Oi.info("zc.p.sbw set band width by sender parameter."),m==null||m.forEach(function(f){return bn(i,void 0,void 0,function(){var a,S,F,ee,ie=this;return Sn(this,function(ae){return(a=f.getParameters()).encodings||(a.encodings=[{}]),S=1e3*e,F=a.encodings[0].maxBitrate,ee=JSON.stringify(a.encodings[0]),a.encodings[0].maxBitrate=S,f.setParameters(a).then(function(){ie.Oi.info("zc.p.sbw update maxBitrate success. origin: ".concat(F,", new: ").concat(S," , ").concat(ee,",").concat(f.getParameters().encodings[0]," ")),s(t)}).catch(function(be){ie.Oi.warn("zc.p.sbw set band width by sender parameter fail, fall back to sdp parse."+be),t&&(t=u(t)),s(t)}),[2]})})})):(t&&(t=u(t)),s(t))})]})})},n.prototype.de=function(e,t,i){var r,s;return t===void 0&&(t=!1),bn(this,void 0,void 0,function(){var o,u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct,Mt,Gt,li,kt,ti,vi,Lt=this;return Sn(this,function(ui){switch(ui.label){case 0:if(this.Oi.info(Xn+" "+this.streamId+" call"),this.videoInfo.audioBitrate&&this.videoInfo.audioBitrate!==48e3&&(e=e.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.videoInfo.audioBitrate)),this.remoteSdpOrder=e.match(/m=(.\w*)\s/g)||[],this.Oi.info(Xn+" "+this.streamId+" sdp revert "+this.remoteSdpOrder.join("")),this.setTurnTcp(),this.Ri.autoSwitchProtocol=this.ae("auto_to_tcp")||!1,o=this.ae("udp_max_fail_num"),!isNaN(o)&&(this.Ri.maxUdpFailNum=o),f=(u=this.Ri).maxUdpFailNum,a=u.udpFailNum,this.Oi.info("zp.oro.0  autoToTcp: ".concat(m=u.autoSwitchProtocol,", udpFailNum: ").concat(a,", maxUdpFailNum: ").concat(f,".")),m&&!this._turnToTcp&&a>=f&&(this.Oi.info("zp.oro.0 switch to tcp."),this._turnToTcp=!0,this._autoTcp=!1),(S=this.ae("udp_or_tcp",!0))&&(this.Oi.info("zp.oro.0 setting udp_or_tcp "+S),this._turnToTcp=S==="tcp"),this._turnToTcp&&!this.Ri.isProxy&&this._i.browser!=="firefox"&&((r=e.match(/candidate.*/g))===null||r===void 0||r.forEach(function(Jt){var ai=Jt.replace(/udp/,"tcp");ai.includes(" tcptype ")||(ai=ai.replace(" typ host "," typ host tcptype passive ")),e=e.replace(Jt,ai)})),this.Ri.isProxy)if(F=Bc(e),ee=F[0],ie=F[1],ae=e.match(/a=mid:[^(\n|\r)]+/g),ie&&ae)if(this.proxyVrs.intranet)setTimeout(function(){ie.forEach(function(Jt,ai){var Vi,Fi={sdpMLineIndex:ai,candidate:Jt.replace(ee[ai].ip,Lt.proxyVrs.wanIP).replace("a=",""),sdpMid:ae[ai].replace("a=mid:","")};Lt.Oi.info("zp.oro.0  add wan candidate:"+JSON.stringify(Fi)),(Vi=Lt.peerConnection)===null||Vi===void 0||Vi.addIceCandidate(new RTCIceCandidate(Fi))})},1e3);else for(this.Oi.info("zp.oro.0  change candidate ip from lan to wan: "+(be=this.proxyVrs.wanIP)),Te=0;Te<ie.length;Te++)Ae=(Pe=ie[Te]).replace(ee[Te].ip,be),e=e.replace(Pe,Ae);else this.Oi.warn("zp.oro.0  candidate not found");if(this.Oi.info("zp.oro.0 "+this.streamId+" sdp revert "+this.localSdpOrder.join("")+" "+this.remoteSdpOrder.join("")),this.localSdpOrder.join()!==this.remoteSdpOrder.join()&&this.localSdpOrder.length==this.remoteSdpOrder.length&&(Be=new RegExp("[\\s\\S]*"+this.remoteSdpOrder[0]).exec(e)[0].replace(this.remoteSdpOrder[0],""),Ze=[],st="",this.localSdpOrder.forEach(function(Jt){var ai=Lt.remoteSdpOrder.findIndex(function(Ni){return Ni==Jt}),Vi=new RegExp(Jt+"[\\s\\S]*"+(Lt.remoteSdpOrder[ai+1]||"")).exec(e)[0].replace(Lt.remoteSdpOrder[ai+1],""),Fi=/a=mid:(\w)/.exec(Vi)[1];Ze.push(Fi),st+=Vi||""}),e=Be.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+Ze.join(" "))+st,this.localSdpOrder=[],this.remoteSdpOrder=[]),Rt=e.match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/),di()&&(At=0,vt=0,this.videoInfo.bitRate&&this.videoInfo.startBitrate==="target"&&(At=this.videoInfo.bitRate),this.videoInfo.minBitrate?vt=this.videoInfo.minBitrate:this.previewer.previewType==="screen"&&(Ft=function(Jt){var ai=0,Vi=Jt.frameRate,Fi=Jt.width*Jt.height*(Vi<=30?Vi:30);return qi(Fi)?(ai=Fi<=3888e3?200:Fi<=6912e3?400:Fi<=15552e3?700:Fi<=27648e3?1e3:2e3)>Jt.bitRate&&(ai=Jt.bitRate):ai=parseInt(.6*Jt.bitRate+""),{minBitrate:ai,resolution:Fi}}(this.videoInfo),vt=Ft.minBitrate,this.Oi.info(Xn+" "+this.streamId+" resolution: ".concat(Ft.resolution,", min bitrate: ").concat(vt))),Ct=[],vt&&Ct.push("x-google-min-bitrate=".concat(vt)),At&&Ct.push("x-google-start-bitrate=".concat(At)),Rt!==null&&Ct.length&&(Mt=Rt[3],Gt="".concat(Mt,";").concat(Ct.join(";")),e=e.replace(Mt,Gt))),!(this.videoInfo.bitRate>0))return[3,5];ui.label=1;case 1:return ui.trys.push([1,3,,4]),[4,this.ve(this.videoInfo.bitRate,e)];case 2:return e=ui.sent(),[3,4];case 3:return li=ui.sent(),this.Oi.error(Xn+JSON.stringify(li)),[3,4];case 4:(kt=this.getVideoSenders())==null||kt.forEach(function(Jt){var ai,Vi,Fi,Ni,ir,Rr;if(Jt&&Jt.getParameters&&Jt.setParameters){var Oi=Jt.getParameters();if(Oi.encodings&&Oi.encodings.length!=0||(Oi.encodings=[{}]),((ai=Jt.track)===null||ai===void 0?void 0:ai.id)==((Vi=Lt.lowStream)===null||Vi===void 0?void 0:Vi.getVideoTracks()[0].id)){var fr=(Fi=Lt.previewer)===null||Fi===void 0?void 0:Fi.lowStreamConfig.bitRate;fr&&(Oi.encodings[0].maxBitrate=1e3*fr)}else{var jr=Lt.lastPublishStats.frameWidth,Or=((ir=(Ni=Lt.previewer)===null||Ni===void 0?void 0:Ni.cameraMaxResolution)===null||ir===void 0?void 0:ir.maxWidth)||0,Cr=(Rr=Lt.previewer.videoTrack)===null||Rr===void 0?void 0:Rr.getSettings().width,uo=jr?Math.min(Or,jr):Or;if(Or&&Cr){var ei=Math.max(uo/Cr,1);Oi.encodings[0].scaleResolutionDownBy=ei}}Jt.setParameters(Oi)}}),ui.label=5;case 5:return this.Oi.info(Xn+" "+this.streamId+" remoteSdp:",e),ti={type:"answer",sdp:e,toJSON:function(){}},(vi=this.getSpan(gp,this.parentSpanKey)).setAttributes({sdp:vp(ti.sdp),is_mini:yp(this.zi),webrtc_sid:_p(this.sessionId)}),this.remoteDesc=ti.sdp,(s=this.peerConnection)===null||s===void 0||s.setRemoteDescription(new RTCSessionDescription(ti)).then(function(){Lt.Oi.info(Xn+" "+Lt.streamId+" set success"),Lt.localStream&&Lt.localStream.getTracks().forEach(function(Jt){Jr(Jt,Lt.Oi,Xn)}),vi.end(),Lt.stateNego==He.iceConnected&&Lt.updateSDPCallBack&&(Lt.Oi.info(Xn+" "+Lt.streamId+" update sdp success"),Lt.updateSDPCallBack(0),Lt.updateSDPCallBack=void 0,Lt.isUpdateSDP=!1)},function(Jt){Lt.Oi.error(Xn+" "+Lt.streamId+" failed: "+Jt.toString()),vi.setAttributes({error:yr.xt.code,message:Jt.toString()}),vi.end();var ai=!0;Lt.zi&&(ai=!1,Lt.zi=!1),Lt.publishStateUpdateError(yr.xt,ai)}),this.state=oe,t&&e.indexOf("candidate")>-1&&(this.me(this.candidateInfo),this.candidateInfo=[],this.state=A),this._autoTcp&&this.setCandidate(i),this.Oi.info(Xn+" "+this.streamId+" call success"),[2]}})})},n.prototype.setBitrate=function(e){return bn(this,void 0,void 0,function(){var t;return Sn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.ve(e,this.remoteDesc)];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),this.Oi.error("zc.p.0.sb.0"+JSON.stringify(t)),[3,3];case 3:return[2]}})})},n.prototype.setConfiguration=function(e,t){var i,r=this.getIceServers(e);this.Oi.info("zc.p.0.scg "+this.streamId+" ".concat(JSON.stringify(r)," ").concat(JSON.stringify(t))),r.length>0&&t&&((i=this.peerConnection)===null||i===void 0||i.setConfiguration({iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:r,username:t.turn_username,credential:t.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart}))},n.prototype.getIceServers=function(e){var t=Bc(e)[0];if(t.length>0){var i=t[0].ip;return["turn:".concat(i,":3478?transport=udp"),"turns:".concat(i,":443?transport=tcp"),"turn:".concat(i,":3478?transport=tcp")]}return[]},n.prototype.onIceConnectionStateChange=function(e){var t,i=this;if(this.state!=$&&this.peerConnection!=null){this.Oi.info(jo+" "+this.streamId+" ice state: "+this.peerConnection.iceConnectionState);var r=this.getSpan(vd,this.parentSpanKey,Xi.event);if(r.setAttributes({ice_state:yd(this.peerConnection.iceConnectionState)}),this.peerConnection.iceConnectionState==="connected"){if(this.Oi.info(jo+" "+this.streamId+" connected state "+this.state+" ?"+((t=this.peerConnection)===null||t===void 0?void 0:t.connectionState)),this.reportBeginTime){var s=new Date().getTime()-this.reportBeginTime;this.reportSpan.setAttributes({publish_begin_time:Dr.publish_begin_time(s)}),this.reportBeginTime=0}if(this.ji.spanEnd({key:Xu,par:this.streamId},{webrtc_sid:this.sessionId}),this.stateNego=He.iceConnected,this.answerSdpTime){var o=new Date().getTime()-this.answerSdpTime;this.Oi.info(jo+" "+this.streamId+" ice time "+o)}this.isProbeDispatch=!1,this.Oi.info(jo+" "+this.streamId+" stateNego:iceConnected"),this.negoTimer&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.peerConnection.connectionState||(this.publishEvent?this.publishSuccess():(this.firstGetStatsTimer&&clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null,this.firstGetStatsTimer=setTimeout(function(){var u;i.Oi.info(jo+" get first stats state "+i.state),i.state!==le&&((u=i.peerConnection)===null||u===void 0||u.getStats().then(function(m){i.Oi.info(jo+" get first stats suc"),m.size>0&&i.publishSuccess()}))},1e3)))}else this.peerConnection.iceConnectionState==="closed"?(r.end(),this.stateNego=He.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="failed"?(r.end(),this.stateNego=He.iceFailed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="disconnected"&&(r.end(),this.Oi.warn(jo+" ice disconnected "),this.stateNego=He.iceDisconnected,this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout(function(){i.checkPublishConnectionFailedState("disconnected")},this.iceDisconnectedMaxTime)))}},n.prototype.onIceCandidate=function(e){var t,i=this;if(this.Oi.info(El+" "+this.streamId+" candidate "+JSON.stringify(e.candidate)),e.candidate)if(((t=e.candidate.candidate)===null||t===void 0?void 0:t.indexOf("relay"))!=-1){this.Oi.info(El+" "+this.streamId+" candidate "+e.candidate.candidate+" state "+this.state+" autotcp "+this._autoTcp);var r=function(s){i.me([{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex}])};this._autoTcp?r(e):this.state<A||this.state==$?this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}):r(e)}else this.Oi.info(El+" "+this.streamId+" candidate not relay")},n.prototype.me=function(e){var t=this;if(this.Oi.info(Ha+" "+this.streamId+" called"),!(e=e.filter(function(r){return r.candidate.indexOf("relay")>0}))||e.length<1)this.Oi.info(Ha+" "+this.streamId+" cancelled");else{var i=this.getSpan(Ap,this.parentSpanKey);i.setAttributes({candidate_info:Dp(e)}),this.stateNego!==He.iceConnected&&(this.stateNego=He.sendCandidate),this.Oi.info(Ha+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,g.getSeq)(),this.sessionId,e,function(r,s,o){t.Oi.info(Ha+" "+t.streamId+" send success"),i.end()},function(r,s){t.Oi.error(Ha+" "+t.streamId+" failed to send: "+r.toString()),t.ji.setError(i,{code:yr.Bt.code,message:r.toString()}),t.publishStateUpdateError(yr.Bt)})}},n.prototype.onConnectionStateChange=function(e){var t,i=(t=this.peerConnection)===null||t===void 0?void 0:t.connectionState;this.Oi.info($d+" "+this.streamId+" conn state: "+i),i==="connected"&&this.state!==le&&this.publishSuccess()},n.prototype.onSignalStateChange=function(e){this.Oi.info($d+" "+this.streamId+" signal state: "+e.target.signalingState),this.state!=$&&this.peerConnection!=null&&e.target.signalingState==="closed"&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=He.iceClosed,this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState))},n.prototype.onRecvCandidateInfo=function(e,t,i){var r,s=this;this.Oi.info(za+" "+this.streamId+" received "+JSON.stringify(i.infos));var o=this.getSpan(Np,this.parentSpanKey);if(o.setAttributes({candidate_info:Lp(i.infos)}),o.end(),this.state==oe){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.me(this.candidateInfo),this.candidateInfo=[];for(var u=0;u<i.infos.length;u++){var m={sdpMid:i.infos[u].sdpMid,sdpMLineIndex:i.infos[u].sdpMLineIndex,candidate:i.infos[u].candidate};this.Oi.debug(za+""+this.streamId+" candidate "+m.candidate),(r=this.peerConnection)===null||r===void 0||r.addIceCandidate(new RTCIceCandidate(m)).then(function(){s.Oi.info(za+" "+s.streamId+" add success")},function(f){s.Oi.error(za+" "+s.streamId+" add error "+f.toString()),s.publishStateUpdateError(yr.Bt,!0)})}this.state=A,this.getSpan(Xu,this.parentSpanKey,"",!0).setAttributes({webrtc_sid:this.sessionId})}else this.Oi.info(za+" "+this.streamId+" current state "+this.state+" not allowed")},n.prototype.onRecvCloseSession=function(e,t,i){var r=this;this.Oi.info(rh+" "+this.streamId+" "+JSON.stringify(i));var s=this.getSpan(Rp,Xi.event);s.setAttributes({err_info:Cp(i.err_info||""),reason_info:i==null?void 0:i.reason}),s.end(),this.ji.spanSetAttributes({key:Xi.event,par:this.streamId},{denied_info:Xi.denied_info(i.err_info),stop_reason:Xi.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var o=i.err_info?JSON.parse(i.err_info.toLowerCase()):{},u=o.action?o.action:null,m=1*i.reason,f=JSON.parse(JSON.stringify(yr.zt));f.message+=" reason:".concat(m," ").concat(u?" action:"+u:""," ").concat(o!=null&&o.err?" err:"+(o==null?void 0:o.err):""),f.message+=";".concat(Yh(m,u,o==null?void 0:o.err)),o.err===1011&&(f=yr.Ot),o.err===1014&&(f=yr.At),this.negoTimer&&clearTimeout(this.negoTimer);var a=!([4,8,10,11,12,14,18,24,26,27,28,32].includes(m)||[2,3,4,5,6].includes(u)),S=!1;if(!this._turnToTcp){if([8,10].includes(m)||[18,15].includes(m)&&u===2&&[3001,3002].includes(o.err)){this.Ri.udpFailNum++;var F=this.Ri;F.autoSwitchProtocol&&F.udpFailNum>=F.maxUdpFailNum&&(this.isPeer=!1,this.Ri.setIsPeer(!1),S=!0)}else this._turnToTcp||(this.Ri.udpFailNum=0);var ee=this.gwNodeList.findIndex(function(ae){return ae==r.gwNode})===this.gwNodeList.length-1,ie=[3001,3002,3003,3004,3005,3006,3007,3008].includes(o.err);ee&&ie&&(this.Oi.info(rh+" "+this.streamId+" switch tcp by all fail"),this._i.turnToTcp=!0,this._autoTcp=!1,this.isPeer=!1,this.Ri.setIsPeer(!1))}this.publishStateUpdateError(f,a,o,S)},n.prototype.onRecvResetSession=function(e,t,i){if(this.Oi.info(ih+" "+this.streamId+" received "),this.getSpan(gd,Xi.event).end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var r=yr.zt;this.negoTimer&&clearTimeout(this.negoTimer),this.publishStateUpdateError(r)}else this.Oi.error(ih+" "+this.streamId+" cannot find session")},n.prototype._onRecvPublishEvent=function(e,t,i){var r;this.Oi.info("zc.p.0.orpe "+this.streamId+" received");var s=this.getSpan(bp,this.parentSpanKey,Xi.event);s.setAttributes({event_state:Sp(i.event),webrtc_sid:t}),s.end(),this.firstGetStatsTimer&&(clearTimeout(this.firstGetStatsTimer),this.firstGetStatsTimer=null);var o=(r=this.peerConnection)===null||r===void 0?void 0:r.connectionState;this.publishEvent=!0,(o?o==="connected":this.stateNego===He.iceConnected)&&this.state!=le&&i.event==0&&this.publishSuccess()},n.prototype._onRecvClientInfo=function(e,t,i){this._i.clientIP!==i.clientip&&this.Oi.info(Xd+" client ip changed "+this._i.clientIP+" "+i.clientip),this.signal.sendClientInfoAck(e,this.sessionId,0),this._i.clientIP=i.clientip,this.peerID=i.peer_id,this.streamConnectIP=i.clientip,this._i.isMultiOuter=this.isMultiOuter(),this.sideMediaConfig.isSEIStart&&this.sideMediaConfig.SEIType==nt.UserUnregister&&this.sideMediaConfig.unregisterSeiFilter&&this.sendSEIUUID();var r=this.previewer;if(r&&r.activateSEIConfig!==null){var s=r==null?void 0:r.activateSEIConfig;this.activateSEIInsert(s.action,s.infoType)}},n.prototype.sendSEIUUID=function(){var e=this;this.Oi.info("zc.ssuid call: "+this.sideMediaConfig.unregisterSeiFilter),this.signal.gw.mediaStreamSEIUUIDReq(this.sessionId,this.peerID,this.sideMediaConfig.unregisterSeiFilter).then(function(t){var i;e.Oi.info("zc.ssuid success"),((i=t==null?void 0:t.usr_sei_filter)===null||i===void 0?void 0:i.result)==0&&(e.sideMediaConfig.uuidSend=!0)}).catch(function(t){e.Oi.error("zc.ssuid failed")})},n.prototype.checkPublishConnectionFailedState=function(e){this.Oi.info(jo+" streamID "+this.streamId," state "+this.state+" connectionState "+e),this.publishStateUpdateError(yr.Tt)},n.prototype.getStopReason=function(e){var t="StopPublish";return e&&e.code&&(e.code===1103051?t="ReachMaxAVRetryTime":t="StopPublish"),t},n.prototype.stopPublish=function(e){var t,i,r,s,o,u;this.Oi.info("zc.p.0.sp.1  .1 "+this.streamId+" called "+this.state+" "+JSON.stringify(e));var m=this.getStopReason(e);if(Object.keys(this.Ri.publisherList).length=1){var f=this.Ri.playerList;for(var a in f){var S=f[a].player;S.state==G&&S.broadcasterStatus==xt.start&&(this.signal&&this.signal.sendBroadcasterStatus((0,g.getSeq)(),S.sessionId,0),S.broadcasterStatus=xt.stop)}}this.sessionId&&!this.closeSessionSignal&&(this.signal.sendCloseSession((0,g.getSeq)(),this.sessionId,0),this.resetPushCmdSeqMap());var F=Date.now();this.reportSpan.setAttributes({publish_state_time:Dr.publish_state_time(F-this.reportPublishStateTime)}),this.uploadRTCPublishStats();var ee=this.se?0:this.lastFailTimeLen;this.ji.spanEnd({key:Xi.event,par:this.streamId},{tryidx:Ko.tryidx(this.rtcPublishCount),url:Ko.url((t=this.signal)===null||t===void 0?void 0:t.server),ip:Ko.ip((r=(i=this.gwNode)===null||i===void 0?void 0:i.split(":"))===null||r===void 0?void 0:r[0]),dispatch_external_ip:Ko.dispatch_external_ip(this._i.clientIP),resource_type:Ko.resource_type("rtc"),protocol:Ko.protocol("webrtc"),net_protocol:Dn.net_protocol(this.netProtocol),stop_reason:Xi.stop_reason(m),try_time:Ko.try_time(ee),error:(e==null?void 0:e.code)||0,message:(e==null?void 0:e.message)||""}),this.se||this.ji.spanEnd({key:(this.isRePublish?Jn:Ur).event,par:this.streamId},{error:(e==null?void 0:e.code)||0,message:(e==null?void 0:e.message)||"",url:Dn.url((s=this.signal)===null||s===void 0?void 0:s.server),ip:Dn.ip(this.ip),peer_id:Dn.peer_id(this.peerID),source_type:Dn.source_type("rtc"),net_protocol:Dn.net_protocol(this.netProtocol),is_center:Dn.is_center((o=this.Ri.publisherList[this.streamId])===null||o===void 0?void 0:o.isCenterNode)});var ie=(e==null?void 0:e.code)!==0&&this.latestPublishErrCode?this.latestPublishErrCode:0,ae=this.publishedTimeStamp;this.reportSpan.setAttributes({stream_id:Dr.stream_id(this.streamId),webrtc_sid:Dr.webrtc_sid(this.sessionId),probe_ip_cnt:Dr.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:Dr.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:Dr.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:Dr.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),bitrate:Dr.bitrate(1e3*this.videoInfo.bitRate),h:Dr.h(this.videoInfo.height),w:Dr.w(this.videoInfo.width),cap_w:Dr.w(this.videoInfo.width),cap_h:Dr.h(this.videoInfo.height),fps:Dr.h(this.videoInfo.frameRate),env:Dr.env(this._i.testEnvironment?3:1),fail_cnt:Dr.fail_cnt(Math.max(this.rtcPublishCount-1,0)),continuous_fail_cnt:Dr.continuous_fail_cnt(Math.max(this.continuousFailCnt-1,0)),stop_reason:Dr.stop_reason(m),error:(e==null?void 0:e.code)||0,message:(e==null?void 0:e.message)||"",last_error:ie,try_time:Ko.try_time(ee),valid_d:this.validPublishedTime+(ae?F-ae:0),total_d:F-this.firstPublishedTimeStamp,tempbroken_cnt:this.errorTimes}),(e==null?void 0:e.code)===yr.Jt.code&&this.uploadPublishEvent(e),this.reportSpan.end(),this.Ri.stopToReport(0),this.retryFailGwNodes=[],this.resetPublish(),this.hasSucceed=!1,this.isRePublish=!1,this.rtcPublishCount=0,this.isProbeDispatch=!1,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,(u=this.zegoCaptureStream)===null||u===void 0||u.resetPublish(),this.seiWorker&&this.seiWorker.postMessage({cmd:"clear",type:"push",streamID:this.streamId})},n.prototype.uploadRTCPublishStats=function(){var e,t,i,r,s,o,u,m,f,a,S,F,ee,ie;this.lastPublishStats.time&&this.ji.spanSetAttributes({key:Xi.event,par:this.streamId},{lsttime:Xi.lsttime(parseInt(this.lastPublishStats.time)),total_stat:Xi.total_stat({afc:(e=this.lastPublishStats)===null||e===void 0?void 0:e.audioPacketsSent,vfc:(t=this.lastPublishStats)===null||t===void 0?void 0:t.framesSent,tfc:((i=this.lastPublishStats)===null||i===void 0?void 0:i.audioPacketsSent)+((r=this.lastPublishStats)===null||r===void 0?void 0:r.framesSent),vb:(s=this.lastPublishStats)===null||s===void 0?void 0:s.videoBytesSent,ab:(o=this.lastPublishStats)===null||o===void 0?void 0:o.audioBytesSent,tb:((u=this.lastPublishStats)===null||u===void 0?void 0:u.videoBytesSent)+((m=this.lastPublishStats)===null||m===void 0?void 0:m.audioBytesSent),rtp_rtt:Math.round(1e3*((f=this.publishStat)===null||f===void 0?void 0:f.currentRoundTripTime))||0,w:(a=this.publishStat)===null||a===void 0?void 0:a.frameWidth,rtp_plr:(S=this.publishStat)===null||S===void 0?void 0:S.videoPacketsLostRate,h:(F=this.publishStat)===null||F===void 0?void 0:F.frameHeight,rtp_bw:!((ee=this.publishStat)===null||ee===void 0)&&ee.googAvailableSendBandwidth?(ie=this.publishStat)===null||ie===void 0?void 0:ie.googAvailableSendBandwidth:void 0})})},n.prototype.onPublishStateUpdate=function(e,t,i,r,s,o){},n.prototype.onPublishQualityUpdate=function(e,t){},n.prototype.onDisconnect=function(e){this.Oi.info(oh+" "+this.streamId+" call"),this.Oi.info(oh+" "+this.streamId+" websocket disconnect"),this.publishStateUpdateError(e||sr.error.Pt,!!e)},n.prototype.publishSuccess=function(){var e,t,i,r,s,o=this;if(this.Oi.info(jc+" call"),this._turnToTcp||(this.Ri.udpFailNum=0),this.isUpdateSDP&&this.updateSDPCallBack)return this.Oi.info(jc+" "+this.streamId+" update sdp success"),this.updateSDPCallBack(0),this.updateSDPCallBack=void 0,void(this.isUpdateSDP=!1);var u=this.isRePublish?Jn:Ur,m=(e=this.Ri.publisherList[this.streamId])===null||e===void 0?void 0:e.retryStreamHandler;for(var f in m==null||m.getTryTime(this,!0),this.ji.spanEnd({key:u.event,par:this.streamId},{url:Dn.url((t=this.signal)===null||t===void 0?void 0:t.server),ip:Dn.ip(this.ip),source_type:Dn.source_type("rtc"),is_center:Dn.is_center((i=this.Ri.publisherList[this.streamId])===null||i===void 0?void 0:i.isCenterNode),signal_consume:Dn.signal_consume(this.signalTime),is_peer:Dn.is_peer(this.isPeer)}),this.state!=le&&this.onPublishStateUpdate(Vr,this.streamId,{code:0,message:""},!0),this.isPeer&&(this.peerFailCount=0),this.state=le,this.hasSucceed=!0,this.continuousFailCnt=0,this.reportPublishStateTime=Date.now(),this.Ri.playerList){var a=this.Ri.playerList[f].player;a.state==G&&a.broadcasterStatus==xt.stop&&(this.signal&&this.signal.sendBroadcasterStatus((0,g.getSeq)(),a.sessionId,1),a.broadcasterStatus=xt.start)}var S=this.ae("probe_started_num");!isNaN(S)&&(this.Ri.probeStartedNum=S),this.qualityHandler.setPublishQualityTimer();var F=2,ee=2,ie=(r=this.previewer)===null||r===void 0?void 0:r.videoTrack,ae=this.localStream.getAudioTracks().length!==0&&this.localStream.getAudioTracks()[0];this.localStream&&this.localStream.getTracks().forEach(function(be){Jr(be,o.Oi,jc)}),(ie&&ie.readyState==="live"&&ie.enabled===!0||!((s=this.previewer)===null||s===void 0)&&s.muteImage)&&(F=0),ae&&ae.readyState==="live"&&ae.enabled===!0&&(ee=0),this.sendStreamStatus(F,ee,!0),this.Ri.soundLevelDelegate&&this.previewer&&this.previewer.startSoundLevel(),this.Oi.info(jc+" call success")},n.prototype.startSoundLevel=function(){var e;if(this.Oi.info(Vc+" call streamID: "+this.streamId),this.localStream&&this.localStream.getAudioTracks().length!=0)try{(e=this.previewer)===null||e===void 0||e.startSoundLevel()}catch(t){this.Oi.error(Vc+" "+this.streamId+" get sound level failed "+t)}else this.Oi.info(Vc+" "+this.streamId+" local stream no found")},n.prototype.stopSoundLevel=function(){var e;this.Oi.info("zc.p.0.ssl.1 call streamID: "+this.streamId),(e=this.previewer)===null||e===void 0||e.stopSoundLevel()},n.prototype.handleEncBitrate=function(e,t,i){var r,s=this,o=1e3*this.videoInfo.bitRate,u=0;if(t>0){this.needIncMax||this.gotMax||(this.probeCount++,t>=.75*e?(this.probeCount>=10&&this.initFitCnt>=.6*this.probeCount&&(this.gotMax=!0,this.targetRate=o),this.initFitCnt++):this.probeCount>=10&&this.initFitCnt/this.probeCount<.3&&(this.needIncMax=!0));var m=sl(this.totalBitrateArray,t,10);this.needIncMax&&(m>=1.05*o?this.targetRate>o&&(this.targetRate-=m>e?m-e:m-o,this.targetRate=Math.max(this.targetRate,o),this.targetRate=Math.min(this.targetRate,2*o),u=this.targetRate):m<.8*o&&(this.targetRate===0&&(this.targetRate=e),this.targetRate=this.targetRate>=o?this.targetRate+.08*o:1.05*this.targetRate,this.targetRate=Math.min(this.targetRate,2*o),u=this.targetRate))}if(i>0&&i<o){var f=sl(this.totalRetransRateArray,i,5);this.needIncMax?f+t>1.05*o&&(this.targetRate-=f+t-o,this.targetRate=Math.max(this.targetRate,o-f),u=this.targetRate):u=this.targetRate-f}else this.targetRate<o&&(this.targetRate=o,u=this.targetRate);if(u>0){u=sl(this.totalTargetRateArray,u,5);var a=(r=this.peerConnection)===null||r===void 0?void 0:r.getSenders().filter(function(ee){return ee.track&&ee.track.kind==="video"});if(!a)return;var S=a.length>1?a[1]:a[0]?a[0]:null;if(!S)return;var F=S.getParameters();F.encodings||(F.encodings=[{}]),F.encodings[0].maxBitrate=u,S.setParameters(F).catch(function(ee){s.Oi.error("zc.p.0.heb "+ee)})}},n.prototype.resetEncBitrate=function(){this.needIncMax=!1,this.probeCount=0,this.gotMax=!1,this.initFitCnt=0,this.targetRate=0,this.totalBitrateArray=[],this.totalTargetRateArray=[],this.totalRetransRateArray=[]},n.prototype.replacePublishedTrack=function(e,t,i){return{errorCode:-1,extendedData:"should install advanced module first"}},n.prototype.sendStreamStatus=function(e,t,i,r){var s=this;i===void 0&&(i=!1),r===void 0&&(r=0),(i||this.camera_status!==e||this.mic_status!==t)&&this.signal&&(this.camera_status=e,this.mic_status=t,r++,this.signal.sendStreamStatus((0,g.getSeq)(),this.sessionId,e,t,this.streamId,function(){s.camera_status===e&&s.mic_status===t&&r<=1&&s.sendStreamStatus(e,t,!0,r)}))},n.prototype.handleSEIVideoTrack=function(e){e=="add"&&this.sideMediaConfig.track?this._clearCanvasTimer():e!="remove"||this.sideMediaConfig.track||(this.sideMediaConfig.track=this._addCanvasStreamVideoTrack()),this.seiWorker&&this.seiWorker.postMessage({cmd:"publishStreamType",streamID:this.streamId,onlyAudio:!!this.sideMediaConfig.track})},n.prototype._addCanvasStreamVideoTrack=function(){var e=this;this.canvas=Ii(16,16),this.ctx=this.canvas.getContext("2d"),this.canvasImage=new Image,this.canvasImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==";var t=this._i.engineConfig.blankVideoTrackFrameInterval||100;return this.Oi.info("zc.acsvt frame interval: "+t),this.canvasTimer=setInterval(function(){var i;(i=e.ctx)===null||i===void 0||i.drawImage(e.canvasImage,0,0,16,16)},t),this.canvas.captureStream().getVideoTracks()[0]},n.prototype.getSpan=function(e,t,i,r){return r===void 0&&(r=!1),Ad(this.ji,It.H,this.streamId,e,t,i,r)},n.prototype.isMultiOuter=function(){return!(!this._i.accessClientIp||!this.streamConnectIP||this._i.accessClientIp===this.streamConnectIP)},n.prototype.isCustomCdn=function(){var e,t;return((e=this.publishOption)===null||e===void 0?void 0:e.cdnUrl)!==void 0&&((t=this.publishOption)===null||t===void 0?void 0:t.cdnUrl)!==""},n.prototype.setTurnTcp=function(){this._turnToTcp=this._i.turnToTcp,this._i.turnOverTcpOnly!==void 0&&(this._turnToTcp=this._i.turnOverTcpOnly)},n.prototype.setStreamAlignmentProperty=function(e){var t=this;return new Ge(function(i){t.signal.gw.streamPropertyUpdate(t.sessionId,t.peerID,e).then(function(r){t.Oi.info("zc.zsap succsess. ".concat(r)),t.mixConfig.alignment=e,i(!0)}).catch(function(r){t.Oi.error("zc.zsap failed. ".concat(r)),i(!1)})})},n.prototype.uploadPublishEvent=function(e){this.ji.spanEnd({key:xi.event,par:this.streamId},To({error:e.code},e),!0)},n}(),Qm=function(){this.publisherList={},this.playerList={},this.stopedPlayerList={}},qr=__webpack_require__(2100);const Zm=__webpack_require__(3720);qr.util.Long=Zm,qr.util.Long.fromBits=qr.util.Long?qr.util.Long.fromBits:function(){return 0};for(var jn=qr.roots,Wl=qr.types?qr.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},ef=qr.types?qr.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},Xa=Object.keys(Wl),Jo={$:function(n){return Jo[n]?Jo[n].call(this):jn[n].decode?jn[n].decode(this,this.uint32()):Jo.$.call(this,"int32")}},Ks={$:function(n,e,t){var i=Wl[n];return i===void 0?jn[n].encode?(this.uint32((t<<3|2)>>0).fork(),jn[n].encode(e,this).ldelim()):Ks.$.call(this,"int32",e,t):Ks[n].call(this.uint32(t<<3|i),e)}},Js=0;Js<Xa.length;Js++)Jo[Xa[Js]]=qr.Reader.prototype[Xa[Js]],Ks[Xa[Js]]=qr.Writer.prototype[Xa[Js]];(function n(e,t,i,r){for(var s=0,o=Object.keys(e);s<o.length;s++){var u=o[s];if(e[u].$m&&Object.keys(e[u].$m).every(function(m){return Number(m)})){if(i[u])throw Error(`nested type ${i}.${u} has already exist`);i[u]=function(m,f){function a(ae){for(var be in m){var Te=m[be];Te[1].charAt(0)==="{"?this[Te[0]]={}:Te[1].charAt(0)!=="["&&Te[1].charAt(0)!=="<"||(this[Te[0]]=[])}if(ae)for(var Pe=Object.keys(ae),Ae=0;Ae<Pe.length;++Ae)ae[Pe[Ae]]!=null&&(this[Pe[Ae]]=ae[Pe[Ae]])}var S={};for(var F in m){var ee=m[F],ie=ee[1];ie.charAt(0)==="{"?(a.prototype[ee[0]]=qr.util.emptyObject,S[ie]={$m:ie.substring(1).split(",").map(function(ae,be){return[`$${be+1}`,ae,null]}).reduce(function(ae,be,Te){return ae[Te+1]=be,ae},{})}):a.prototype[ee[0]]=ie.charAt(0)==="["||ie.charAt(0)==="<"?qr.util.emptyArray:ie==="bytes"?qr.util.newBuffer([]):ee[2]&&ee[2].hasOwnProperty("low")&&ee[2].hasOwnProperty("high")?qr.util.Long.fromBits(ee[2].low,ee[2].high,ee[2].unsigned):ee[2]}return a.create=function(ae){return new a(ae)},a.decode=function(ae,be){ae instanceof qr.Reader||(ae=qr.Reader.create(ae));for(var Te=be===void 0?ae.len:ae.pos+be,Pe=new a;ae.pos<Te;){var Ae=ae.uint32(),Be=Ae>>>3;if(Be>0&&m[Be]){var Ze=m[Be][0],st=m[Be][1];if(st.charAt(0)==="{"){Pe[Ze]===qr.util.emptyObject&&(Pe[Ze]={});var Rt=a.$namespace[st].decode(ae,ae.uint32());Pe[Ze][Rt.$1]=Rt.$2}else if(st.charAt(0)==="["||st.charAt(0)==="<")if(st=st.substring(1),Pe[Ze]&&Pe[Ze].length||(Pe[Ze]=[]),ef[st=!Jo[st]&&!jn[st].decode?"int32":st]!==void 0&&(7&Ae)==2)for(var At=ae.uint32()+ae.pos;ae.pos<At;)Pe[Ze].push(Jo.$.call(ae,st));else Pe[Ze].push(Jo.$.call(ae,st));else Pe[Ze]=Jo.$.call(ae,st)}else ae.skipType(7&Ae)}return Pe},a.encode=function(ae,be){for(var Te in be||(be=qr.Writer.create()),m){var Pe=m[Te][0],Ae=m[Te][1];if(Ae.charAt(0)==="{"){if(ae[Pe]!=null&&ae.hasOwnProperty(Pe))for(var Be=0,Ze=Object.keys(ae[Pe]);Be<Ze.length;++Be)be.uint32((Te<<3|2)>>0).fork(),a.$namespace[Ae].encode({$1:Ze[Be],$2:ae[Pe][Ze[Be]]},be).ldelim()}else if(Ae.charAt(0)==="["||Ae.charAt(0)==="<"){var st=Ae.charAt(0)==="<";Ae=Ae.substring(1);var Rt=ae[Pe];if(Rt!=null&&Rt.length)if(Ae=Wl[Ae]===void 0&&!jn[Ae].encode?"int32":Ae,st&&ef[Ae]!==void 0){for(be.uint32((Te<<3|2)>>0).fork(),Be=0;Be<Rt.length;Be++)Ks[Ae].call(be,Rt[Be]);be.ldelim()}else for(Be=0;Be<Rt.length;Be++)Ks.$.call(be,Ae,Rt[Be],Te)}else ae[Pe]!=null&&ae.hasOwnProperty(Pe)&&Ks.$.call(be,Ae,ae[Pe],Te)}return be},Object.keys(S).length&&(a.$namespace=n(S,t+"."+f,a.$namespace||{},!0)),a}(e[u].$m,u)}else e[u].$s?i[u]=function(m,f){function a(S,F,ee){qr.rpc.Service.call(this,S,F,ee)}return(a.prototype=Object.create(qr.rpc.Service.prototype)).constructor=a,a.create=function(S,F,ee){return new a(S,F,ee)},Object.keys(m).forEach(function(S){var F=m[S];function ee(ie,ae){return this.rpcCall(ee,jn[F[0]],jn[F[1]],ie,ae)}Object.defineProperty(ee,"name",{value:S}),Object.defineProperty(ee,"path",{value:`${t}.${f}`}),a.prototype[S]=ee}),a}(e[u].$s,u):e[u].$e&&Object.values(e[u].$e).every(function(m){return Number(m)===m})&&(i[u]=function(m,f){for(var a=Object.keys(m),S={},F=0;F<a.length;F++)S[S[a[F]]=m[a[F]]]=a[F];return S}(e[u].$e));i[u]&&!r&&(jn[`${t}.${u}`]=i[u]),delete e[u].$m,delete e[u].$s,delete e[u].$e,i[u]=n(e[u],t?`${t}.${u}`:u,i[u]||{})}return i})({webrtc:{generalpclib:{CmbType:{$e:{CMD_TYPE_BUSINESS_REQUEST:100,CMD_TYPE_BUSINESS_RESPONSE:101}},Header:{$m:{1:["cmd","uint32",0]}}},logreport:{ChargeInfo:{$m:{1:["is_publishing","uint32",0],2:["play_stream_resolution_infos","<webrtc.logreport.ResolutionInfo",null],3:["play_max_audio_bitrate","uint32",0],4:["no_playing","uint32",0],5:["p2p_charge_info","webrtc.logreport.P2PChargeInfo",null],6:["sample_time_offset","uint32",0]}},ChargeInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["timestamp_diff_flag","uint32",0],4:["timestamp_diff","uint32",0],5:["room_id","string",""],100:["infos","<webrtc.logreport.ChargeInfo",null]}},DynQualityEvent:{$m:{1:["seq_no","string",""],2:["num","uint32",0],3:["dyn_quality_infos","<webrtc.logreport.DynQualityInfos",null],4:["device_id","string",""],5:["latitude","uint32",0],6:["longitude","uint32",0],7:["country","string",""],8:["region","string",""],9:["city","string",""],10:["isp","string",""],11:["ve_mode","uint32",0]}},DynQualityInfo:{$m:{1:["time","uint64",{low:0,high:0,unsigned:!0}],2:["plr","uint32",0],3:["rtt","uint32",0],4:["score","uint32",0],5:["sample_time","uint32",0]}},DynQualityInfos:{$m:{1:["timestamp_offset_begin","uint64",{low:0,high:0,unsigned:!0}],2:["timestamp_offset_end","uint64",{low:0,high:0,unsigned:!0}],3:["server_ip","string",""],4:["infos","<webrtc.logreport.DynQualityInfo",null],5:["network_type","uint32",0],6:["stream_id","string",""]}},HardwareInfo:{$m:{1:["sys_cpu_used","uint32",0],2:["app_cpu_used","uint32",0],3:["sys_mem_used","uint32",0],4:["app_mem_used","uint32",0],5:["sample_time_offset","uint32",0]}},HardwareInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["infos","<webrtc.logreport.HardwareInfo",null],4:["sys_mem_total","uint32",0]}},NoBillingEvent:{$m:{1:["platform_info","string",""],2:["room_id","string",""]}},P2PChargeInfo:{$m:{1:["media_inc","uint64",{low:0,high:0,unsigned:!0}],2:["data_inc","uint64",{low:0,high:0,unsigned:!0}]}},PlayQualityInfo:{$m:{1:["audio_bitrate","uint32",0],2:["video_bitrate","uint32",0],3:["video_network_fps","uint32",0],4:["audio_break_count","uint32",0],5:["video_break_count","uint32",0],6:["downlink_plr","uint32",0],7:["peer_to_peer_plr","uint32",0],8:["peer_to_peer_delay","uint32",0],9:["audio_network_fps","uint32",0],10:["audio_break_duration","uint32",0],11:["video_break_duration","uint32",0],12:["audio_break_rate","uint32",0],13:["video_break_rate","uint32",0],14:["audio_break_cancel","uint32",0],15:["video_break_cancel","uint32",0],16:["rtt","uint32",0],17:["rendered_sound_level","uint32",0],18:["audio_break_cancel_duration","uint32",0],19:["video_break_cancel_duration","uint32",0],20:["audio_decode_time","uint32",0],21:["video_decode_time","uint32",0],22:["real_sampling_interval","uint32",0],23:["mos","int32",0],24:["audio_decode_fps","uint32",0],25:["video_decode_fps","uint32",0],26:["video_frames_decoded","uint32",0],27:["video_frames_dropped","uint32",0],28:["quality","int32",0],29:["evaluation_quality","int32",0],30:["break_stat_duration","uint32",0],31:["sample_time_offset","uint32",0],100:["sample_time_window","uint32",0]}},PlayQualityInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["stream_id","string",""],4:["session_id","uint32",0],5:["video_width","uint32",0],6:["video_height","uint32",0],7:["ipv4","uint32",0],8:["ipv6","string",""],9:["resource_type","uint32",0],10:["infos","<webrtc.logreport.PlayQualityInfo",null],11:["room_id","string",""],13:["session","string",""],14:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],15:["protocol_type","uint32",0],16:["product","uint32",0]}},PublishQualityInfo:{$m:{1:["audio_bitrate","uint32",0],2:["video_bitrate","uint32",0],3:["video_capture_fps","uint32",0],4:["video_network_fps","uint32",0],5:["uplink_plr","uint32",0],6:["rtt","uint32",0],7:["audio_network_fps","uint32",0],8:["captured_sound_level","uint32",0],9:["quality","uint32",0],10:["sample_time_offset","uint32",0],100:["sample_time_window","uint32",0]}},PublishQualityInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["stream_id","string",""],4:["session_id","uint32",0],5:["video_width","uint32",0],6:["video_height","uint32",0],7:["ipv4","uint32",0],8:["ipv6","string",""],9:["resource_type","uint32",0],10:["infos","<webrtc.logreport.PublishQualityInfo",null],11:["room_id","string",""],13:["evnvironment","uint32",0],14:["ap","string",""],15:["session","string",""],16:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],17:["protocol_type","uint32",0],18:["setting_video_bitrate","uint32",0],19:["setting_audio_bitrate","uint32",0],20:["setting_video_fps","uint32",0]}},QualityEvent:{$m:{1:["hardware_infos","webrtc.logreport.HardwareInfos",null],2:["publish_quality_infos","<webrtc.logreport.PublishQualityInfos",null],3:["play_quality_infos","<webrtc.logreport.PlayQualityInfos",null],4:["network_type","uint32",0],5:["charge_infos","webrtc.logreport.ChargeInfos",null],6:["server_time","int64",{low:0,high:0,unsigned:!1}],100:["client_type","uint32",0]},ResourceType:{$e:{UNKNOWN:0,CDN:1,RTC:2,L3:3,P2P:4}}},ResolutionInfo:{$m:{1:["video_width","uint32",0],2:["video_height","uint32",0],3:["count","uint32",0]}},SpeedLogHead:{$m:{1:["version","uint32",0],2:["signature","bytes",[]],3:["timestamp","uint32",0],4:["event","uint32",0],5:["app_id","uint32",0],6:["user_id","string",""],7:["biz_type","uint32",0],8:["device_id","string",""],9:["lite_sign","bytes",[]],10:["token","bytes",[]],11:["os_type","string",""],12:["sdk_version","string",""],13:["time_offset","int64",{low:0,high:0,unsigned:!1}],14:["scenario","uint32",0]},BizType:{$e:{UNKNOWN:0,LIVE:1,RTV:2}},Event:{$e:{QUALITY_EVENT:0,NO_BILLING_EVENT:100,DETECT_QUALITY_EVENT:300}},ProtoVersion:{$e:{PROTO_VERSION:0,PROTO_VERSION1:1,PROTO_VERSION2:2,PROTO_VERSION3:3,PROTO_VERSION4:4,PROTO_VERSION5:5,PROTO_VERSION6:6,PROTO_VERSION7:7,PROTO_VERSION8:8,PROTO_VERSION9:9,PROTO_VERSION10:10,PROTO_VERSION11:11,PROTO_VERSION12:12,PROTO_VERSION13:13,PROTO_VERSION14:14}},ZegoScenario:{$e:{ZEGO_SCENARIO_GENERAL:0,ZEGO_SCENARIO_COMMUNICATION:1,ZEGO_SCENARIO_LIVE:2,ZEGO_SCENARIO_DEFAULT:3,ZEGO_SCENARIO_STANDARD_VIDEO_CALL:4,ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL:5,ZEGO_SCENARIO_STANDARD_CHATROOM:6,ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM:7,ZEGO_SCENARIO_BROADCAST:8,ZEGO_SCENARIO_KARAOKE:9,ZEGO_SCENARIO_UNDEFINED:99}}},SpeedLogRsp:{$m:{1:["code","uint32",0],2:["message","string",""]}}},webrtc_cmd:{MediaCodecErrorAck:{$m:{1:["result","sint32",0]}},MediaCodecErrorNotify:{$m:{1:["media_type","sint32",0],2:["error_type","sint32",0]}},MetadataAck:{$m:{1:["result","sint32",0]}},MetadataPush:{$m:{1:["width","uint32",0],2:["height","uint32",0]}},NetQualityGradeAck:{$m:{1:["result","sint32",0]}},NetQualityGradePush:{$m:{1:["tx_quality","sint32",0],2:["rx_quality","sint32",0]}},NetQualityGradeReq:{$m:{1:["tx_quality","sint32",0],2:["rx_quality","sint32",0]}},NetQualityGradeRsp:{$m:{1:["result","sint32",0]}},PeerExtendParamPush:{$m:{1:["turn_username","string",""],2:["turn_auth_key","string",""],3:["candidate","string",""],4:["sdpMid","string",""],5:["sdpMLineIndex","sint32",0]}},PeerExtendParams:{$m:{1:["keyframe_intv","sint32",0],2:["min_play_buf_level_ms","sint32",0],3:["tc_type","sint32",0],4:["video_content_type","sint32",0],5:["sei_filter_pass","sint32",0],6:["client_class_type","sint32",0],7:["video_stream_type","sint32",0],8:["ktv_device_delay","sint32",0],9:["sync_ntp","sint32",0],10:["auto_switch_turn_type","sint32",0],11:["zg_proxy","sint32",0],12:["coturn_internal","uint32",0]}},StreamPropertyUpdate:{$m:{1:["enable_stream_alignment_when_mix","sint32",0]}},StreamPropertyUpdateAck:{$m:{1:["result","sint32",0]}},UserUnregisteredSEIFilterReq:{$m:{1:["sei_filter","string",""]}},UserUnregisteredSEIFilterRsp:{$m:{1:["result","sint32",0]}},VideoStreamChangeAck:{$m:{1:["result","sint32",0]}},VideoStreamChangePush:{$m:{1:["change_type","uint32",0],2:["video_type","uint32",0]}},VideoStreamFallbackTypeReq:{$m:{1:["type","uint32",0]}},VideoStreamFallbackTypeRsp:{$m:{1:["result","sint32",0]}},VideoStreamSubscribeReq:{$m:{1:["type","uint32",0]}},VideoStreamSubscribeRsp:{$m:{1:["result","sint32",0]}},WebrtcCmdReqMsg:{$m:{1:["meta_data_push","webrtc.webrtc_cmd.MetadataPush",null],2:["video_stream_sub","webrtc.webrtc_cmd.VideoStreamSubscribeReq",null],3:["video_fallback_type","webrtc.webrtc_cmd.VideoStreamFallbackTypeReq",null],4:["video_change_push","webrtc.webrtc_cmd.VideoStreamChangePush",null],5:["usr_sei_filter","webrtc.webrtc_cmd.UserUnregisteredSEIFilterReq",null],6:["net_quality_grade","webrtc.webrtc_cmd.NetQualityGradeReq",null],7:["net_quality_grade_push","webrtc.webrtc_cmd.NetQualityGradePush",null],8:["peer_extend_param","webrtc.webrtc_cmd.PeerExtendParams",null],9:["stream_property_update","webrtc.webrtc_cmd.StreamPropertyUpdate",null],10:["peer_ext_params_push","webrtc.webrtc_cmd.PeerExtendParamPush",null],11:["codec_error_notify","webrtc.webrtc_cmd.MediaCodecErrorNotify",null]}},WebrtcCmdRspMsg:{$m:{1:["meta_data_ack","webrtc.webrtc_cmd.MetadataAck",null],2:["video_stream_sub","webrtc.webrtc_cmd.VideoStreamSubscribeRsp",null],3:["video_fallback_type","webrtc.webrtc_cmd.VideoStreamFallbackTypeRsp",null],4:["video_change_ack","webrtc.webrtc_cmd.VideoStreamChangeAck",null],5:["usr_sei_filter","webrtc.webrtc_cmd.UserUnregisteredSEIFilterRsp",null],6:["net_quality_grade","webrtc.webrtc_cmd.NetQualityGradeRsp",null],7:["net_quality_grade_ack","webrtc.webrtc_cmd.NetQualityGradeAck",null],8:["stream_property_update_ack","webrtc.webrtc_cmd.StreamPropertyUpdateAck",null],9:["codec_error_notify_ack","webrtc.webrtc_cmd.MediaCodecErrorAck",null]}}},webrtc_proto_v2:{ActivateAudioPlayStreamReq:{$m:{1:["active","sint32",0]}},ActivateAudioPlayStreamRsp:{$m:{1:["result","sint32",0]}},ActivateSEIInsertReq:{$m:{1:["peer_id","uint32",0],2:["action","sint32",0],3:["info_type","uint32",0]}},ActivateSEIInsertRsp:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},ActivateVideoPlayStreamReq:{$m:{1:["active","sint32",0],2:["layer","sint32",0]}},ActivateVideoPlayStreamRsp:{$m:{1:["result","sint32",0]}},BroadcasterStatusAck:{$m:{1:["result","sint32",0]}},BroadcasterStatusNotify:{$m:{1:["status","uint32",0]}},CandidateInfoAck:{$m:{1:["result","sint32",0]}},CandidateInfoPush:{$m:{1:["infos","<webrtc.webrtc_proto_v2.OneCandidateInfo",null]}},CandidateInfoReq:{$m:{1:["infos","<webrtc.webrtc_proto_v2.OneCandidateInfo",null]}},CandidateInfoRsp:{$m:{1:["result","sint32",0]}},ClientInfoAck:{$m:{1:["result","sint32",0]}},ClientInfoPush:{$m:{1:["peer_id","uint32",0],2:["client_ip","string",""]}},CloseSessionAck:{$m:{1:["result","sint32",0]}},CloseSessionPush:{$m:{1:["reason","sint32",0],2:["err_info","string",""]}},CloseSessionReq:{$m:{1:["reason","sint32",0]}},CloseSessionRsp:{$m:{1:["result","sint32",0]}},CmdAck:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdPush:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdReq:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdRsp:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdType:{$e:{NONE:0,LOGIN_REQ:1,LOGIN_RSP:2,CREATE_SESSION_REQ:3,CREATE_SESSION_RSP:4,CREATE_SESSION_WITH_SDP_REQ:5,CREATE_SESSION_WITH_SDP_RSP:6,SESSION_RESET_PUSH:7,SESSION_RESET_ACK:8,PUBLISH_EVENT_PUSH:9,PLAY_EVENT_PUSH:10,MEDIA_DESC_REQ:11,MEDIA_DESC_RSP:12,CANDIDATE_INFO_REQ:13,CANDIDATE_INFO_RSP:14,CLOSE_SESSION_REQ:15,CLOSE_SESSION_RSP:16,MEDIA_DESC_PUSH:17,MEDIA_DESC_ACK:18,CANDIDATE_INFO_PUSH:19,CANDIDATE_INFO_ACK:20,CLOSE_SESSION_PUSH:21,CLOSE_SESSION_ACK:22,STREAM_STATUS_NOTIFY:23,STREAM_STATUS_NOTIFY_ACK:24,STREAM_STATUS_NOTIFY_PUSH:25,STREAM_STATUS_NOTIFY_PUSH_ACK:26,BROADCASTER_STATUS_NOTIFY:27,BROADCASTER_STATUS_ACK:28,ACTIVATE_AUDIO_PLAY_STREAM_REQ:29,ACTIVATE_AUDIO_PLAY_STREAM_RSP:30,ACTIVATE_VIDEO_PLAY_STREAM_REQ:31,ACTIVATE_VIDEO_PLAY_STREAM_RSP:32,CLIENT_INFO_PUSH:33,CLIENT_INFO_ACK:34,NET_QUALITY_PROBE_REQ:35,NET_QUALITY_PROBE_RSP:36,NET_QUALITY_INFO_PUSH:37,NET_QUALITY_INFO_ACK:38,ACTIVATE_SEI_INSERT_REQ:39,ACTIVATE_SEI_INSERT_RSP:40,PEER2_PEER_NET_STATS_GET_REQ:41,PEER2_PEER_NET_STATS_GET_RSP:42,CMD_REQ:43,CMD_RSP:44,CMD_PUSH:45,CMD_ACK:46,WEBRTC_DISPATCH_REQ:47,WEBRTC_DISPATCH_RSP:48}},CreateSessionReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],3:["turn_server_host","string",""],4:["roomid","string",""],5:["strAuthParam","string",""],6:["params","string",""],7:["area_type","int32",0],8:["area_id_list","<int32",null]}},CreateSessionRsp:{$m:{1:["result","sint32",0],2:["turn_server","string",""],3:["turn_username","string",""],4:["turn_auth_key","string",""],5:["session_id","uint32",0],6:["session_token","string",""],7:["gw_version","uint32",0],8:["gw_nodes","<string",null],9:["gw_nodes_ttl","uint32",0],10:["client_ip","string",""]}},CreateSessionWithSdpReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["media_server_host","string",""],6:["strAuthParam","string",""],7:["roomid","string",""],8:["params","string",""],9:["params_ext","bytes",[]],10:["area_type","int32",0],11:["area_id_list","<int32",null]}},CreateSessionWithSdpRsp:{$m:{1:["result","sint32",0],2:["gw_version","uint32",0],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["session_token","string",""],6:["gw_nodes","<string",null],7:["gw_nodes_ttl","uint32",0],8:["client_ip","string",""],9:["params_ext","bytes",[]]}},DenyInfo:{$m:{1:["action","uint32",0],2:["err","uint32",0],3:["ins","<webrtc.webrtc_proto_v2.IpPort",null],4:["action_delay","uint32",0]}},Head:{$m:{1:["cmd","uint32",0],2:["seq","uint32",0],3:["session_id","uint32",0]}},IpPort:{$m:{1:["Ip","string",""],2:["Port","uint32",0]}},LoginReq:{$m:{1:["appid","uint32",0],2:["user_id","string",""],3:["tokenType","int32",0],4:["token","string",""],5:["sessions","<webrtc.webrtc_proto_v2.SessionInfo",null],6:["roomid","string",""],7:["sdk_version","uint32",0],8:["app","string",""]}},LoginRsp:{$m:{1:["result","int32",0],2:["tokenType","int32",0],3:["token","string",""]}},MediaDescAck:{$m:{1:["result","sint32",0]}},MediaDescPush:{$m:{1:["type","uint32",0],2:["sdp","string",""],3:["mini_sdp","bytes",[]]}},MediaDescReq:{$m:{1:["type","uint32",0],2:["update","uint32",0],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["params_ext","bytes",[]]}},MediaDescRsp:{$m:{1:["result","sint32",0],2:["sdp","string",""],3:["mini_sdp","bytes",[]]}},NetQualityInfoAck:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},NetQualityInfoPush:{$m:{1:["peer_id","uint32",0],2:["lossrate","uint32",0],3:["rtt","uint32",0]}},NetQualityProbeReq:{$m:{1:["peer_id","uint32",0],2:["action","sint32",0]}},NetQualityProbeRsp:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},OneCandidateInfo:{$m:{1:["candidate","string",""],2:["sdpMid","string",""],3:["sdpMLineIndex","sint32",0]}},Peer2PeerNetStatsGetReq:{$m:{1:["peer_id","uint32",0]}},Peer2PeerNetStatsGetRsp:{$m:{1:["result","sint32",0],2:["peer_id","uint32",0],3:["p2p_lost_rate","uint32",0],4:["p2p_rtt","uint32",0]}},PlayEventPush:{$m:{1:["event","sint32",0]}},PublishEventPush:{$m:{1:["event","sint32",0]}},SessionInfo:{$m:{1:["session_id","uint32",0],2:["session_token","string",""]}},SessionResetAck:{$m:{1:["result","sint32",0]}},SessionResetPush:{$m:{1:["dwTimeStamp","uint32",0],2:["cResetType","uint32",0],3:["session_ids","<uint32",null]}},StreamStatusNotify:{$m:{1:["mic_status","sint32",0],2:["camera_status","sint32",0]}},StreamStatusNotifyAck:{$m:{1:["result","sint32",0]}},StreamStatusNotifyPush:{$m:{1:["mic_status","sint32",0],2:["camera_status","sint32",0]}},StreamStatusNotifyPushAck:{$m:{1:["result","sint32",0]}},WebRTCDispatchReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],10:["area_type","int32",0],11:["area_id_list","<int32",null]}},WebRTCDispatchRsp:{$m:{1:["gw_nodes","<string",null],2:["gw_nodes_ttl","uint32",0],3:["client_ip","string",""],4:["result","sint32",0]}}}}},"",jn,!1);var Nr,Ql,En,Ys=jn.webrtc,tf=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},rf=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Xs=Ys.webrtc_cmd,Km=function(){function n(e,t,i){this.Oi=e,this.streamSignal=t,this._i=i,this.callbackMap={},this.pushCmdSeqs={}}return n.prototype.streamPropertyUpdate=function(e,t,i){return tf(this,void 0,void 0,function(){var r=this;return rf(this,function(s){return[2,new Ge(function(o,u){var m=Xs.WebrtcCmdReqMsg.encode({stream_property_update:{enable_stream_alignment_when_mix:i}}).finish();r.streamSignal.sendGWCmd(e,{peer_id:t,cmd_id:9},m,function(f,a,S){var F=Xs.WebrtcCmdRspMsg.decode(S.body);F.stream_property_update_ack?o(F.stream_property_update_ack.result):u(F)},function(f){u(f)})})]})})},n.prototype.mediaStreamSEIUUIDReq=function(e,t,i){return tf(this,void 0,void 0,function(){var r=this;return rf(this,function(s){return[2,new Ge(function(o,u){var m=Xs.WebrtcCmdReqMsg.encode({usr_sei_filter:{sei_filter:i}}).finish();r.streamSignal.sendGWCmd(e,{peer_id:t,cmd_id:5},m,function(f,a,S){var F=Xs.WebrtcCmdRspMsg.decode(S.body);Ho(F[Object.keys(F)[0]]),o(F)},function(f){u(f)})})]})})},n.prototype.sendGWAck=function(e,t,i,r,s){var o;s===void 0&&(s=0);var u=Xs.WebrtcCmdRspMsg.encode((o={},o[i]={result:s},o)).finish();this.streamSignal.sendGWAck(e,{peer_id:t,cmd_id:r},u)},n.prototype.registerPushCallback=function(e,t,i){var r,s=this,o=this.callbackMap[t];o?o[e]=i:(this.callbackMap[t]=((r={})[e]=i,r),this.pushCmdSeqs[t]={},this.streamSignal.registerPushCallback("CmdPush",t,function(u,m,f){var a=performance.now();if(s.pushCmdSeqs[m][f.cmd_id]){var S=s.pushCmdSeqs[m][f.cmd_id],F=S.seq;if(F!==void 0&&F>=u&&a-S.time<6e3)return void s.Oi.warn("zc.gs.rpc"+" ".concat(m," CdmPush order ").concat(e," ").concat(f.cmd_id," local: ").concat(F," seq ").concat(u))}s.pushCmdSeqs[m][f.cmd_id]={seq:u,time:a};var ee=s._i.useNetAgent?f.body:Uc(f.body),ie=Xs.WebrtcCmdReqMsg.decode(ee),ae=Object.keys(ie)[0];Ho(ie[ae=ae||"meta_data_push"]);var be=s.callbackMap[m];if(be){var Te=be[ae];Te&&Te(u,m,ie)}}))},n.prototype.unregisterPushCallback=function(e,t){var i=this.callbackMap[t];i&&(delete i[e],Object.keys(i).length===0&&(this.streamSignal.unregisterPushCallback("CmdPush",t),delete this.callbackMap[t],delete this.pushCmdSeqs[t]))},n}();(function(n){n[n.Connected=0]="Connected",n[n.Disconnected=1]="Disconnected",n[n.Broken=2]="Broken"})(Nr||(Nr={})),function(n){n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL"}(Ql||(Ql={})),function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"}(En||(En={}));var Zl,nf=function(){function n(e,t,i,r,s){var o=this;this.server=e,this.netAgent=t,this.signalConfig=i,this.Oi=r,this._i=s,this.readyState=En.CLOSED,this.isActive=!1,this.accessServerState=Nr.Disconnected,this.originAccessServerState=Nr.Disconnected,this.mediaServerState=Nr.Disconnected,this.originMediaServerState=Nr.Disconnected,this.eventHandler={accessDisconnect:function(){o.setAccessServerState(Nr.Disconnected)},accessConnect:function(){o.setAccessServerState(Nr.Connected)},accessBroken:function(){o.setAccessServerState(Nr.Broken)},mediaDisconnect:function(){o.setMediaServerState(Nr.Disconnected)},mediaConnect:function(u){o.setMediaServerState(Nr.Connected,u)},mediaBroken:function(){o.setMediaServerState(Nr.Broken)}},this.wsHandler=t.getPCRequest(e==="unified_rtc"?g.BusinessService.SERVICE_WEBRTC_SIGNAL:g.BusinessService.SERVICE_L3_WEBRTC_SIGNAL,{path:i.path,query:i.query,encode:i.encode,messageType:i.messageType,isMsgCache:!1}),this.setAccessServerState(t.isConnect()?Nr.Connected:Nr.Disconnected),this.setMediaServerState(this.wsHandler.connectState===0?Nr.Connected:Nr.Disconnected)}return n.prototype.updateAccessReadyState=function(){this.isActive&&this.accessServerState===Nr.Connected&&this.mediaServerState!==Nr.Connected?this.onreconnnecting&&this.onreconnnecting():this.accessServerState===Nr.Disconnected&&this.Oi.warn("zc.as.uars access timeout")},n.prototype.updateMediaReadyState=function(e){return this.Oi.info("zc.as.umrs "+e),this.mediaServerState===Nr.Connected?(this.originMediaServerState===Nr.Broken&&e===Ql.AUTO&&this.onreconnnecting&&this.onreconnnecting(),void(this.readyState!==En.OPEN&&(this.readyState=En.OPEN,this.onopen&&this.onopen()))):this.mediaServerState===Nr.Disconnected?(this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),void(this.readyState!==En.CLOSED&&(this.readyState=En.CLOSED,this.onclose&&this.onclose()))):void(this.mediaServerState===Nr.Broken&&(this.readyState=En.CONNECTING,this.onerror&&this.onerror(new Event("signal connecting"))))},Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.setMediaServerState=function(e,t){this.Oi.info(gh+" "+e+" "+t),this.mediaServerState!==e?(this.originMediaServerState=this.mediaServerState,this.mediaServerState=e,this.updateMediaReadyState(t)):this.Oi.info(gh+" same state")},n.prototype.setAccessServerState=function(e){this.Oi.info(vh+" "+e),this.accessServerState!==e?(this.originAccessServerState=this.accessServerState,this.accessServerState=e,this.updateAccessReadyState()):this.Oi.info(vh+" same state")},n.prototype.open=function(){var e=this;this.isActive=!0,this.Oi.info("zc.as.op state "+this.mediaServerState),this.mediaServerState===Nr.Disconnected&&(this.wsHandler.on("connected",this.eventHandler.mediaConnect),this.wsHandler.on("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.on("broken",this.eventHandler.mediaBroken),this.netAgent.on("connected",this.eventHandler.accessConnect),this.netAgent.on("disconnected",this.eventHandler.accessDisconnect),this.netAgent.on("broken",this.eventHandler.accessBroken),this.wsHandler.on("downLoadMessage",function(t,i){e.onmessage({data:t,extras:i})}),this.wsHandler.off("pcBrokenEvent"),this.wsHandler.on("pcBrokenEvent",function(t){var i=tm,r=e.ji.createSpan(It.H,{key:el},{key:""},i.event);r.setAttributes({service_no:i.service_no(t==null?void 0:t.service_no)}),r.end()}),this.wsHandler.off("pcDisconnectedEvent"),this.wsHandler.on("pcDisconnectedEvent",function(t){var i=im,r=e.ji.createSpan(It.H,{key:el},{key:""},i.event);r.setAttributes({service_no:i.service_no(t==null?void 0:t.service_no)}),r.end()}),this.wsHandler.off("pcConnectedEvent"),this.wsHandler.on("pcConnectedEvent",function(t){var i=em,r=e.ji.createSpan(It.H,{key:el},{key:""},i.event);r.setAttributes({service_no:i.service_no(t.service_no),recv_time:i.recv_time(new Date().getTime()),proxy_link_sources:i.proxy_link_sources(t.proxy_link_sources),connect_stream:i.connect_stream(t.connect_stream)}),r.end()}))},n.prototype.close=function(){this.Oi.info("zc.as.c call"),this.isActive=!1,this.wsHandler.off("connected",this.eventHandler.mediaConnect),this.wsHandler.off("disconnected",this.eventHandler.mediaDisconnect),this.wsHandler.off("broken",this.eventHandler.mediaBroken),this.wsHandler.off("downLoadMessage"),this.netAgent.off("connected",this.eventHandler.accessConnect),this.netAgent.off("disconnected",this.eventHandler.accessDisconnect),this.netAgent.off("broken",this.eventHandler.accessBroken),this.wsHandler.closeRequest()},n.prototype.send=function(e,t,i,r){var s=this;this.wsHandler.sendRequest({payload:e,ack:t,isInSendMap:i},function(o){s.Oi.info(yh+" fail "+o),s.onerror&&s.onerror(o)},function(o){s.Oi.info(yh+" suc "+o)},r)},n.prototype.onopen=function(){},n.prototype.onclose=function(e){},n.prototype.onerror=function(e){},n.prototype.onmessage=function(e){},n.prototype.onreconnnecting=function(){},n}();(function(n){n[n.LoginReq=1]="LoginReq",n[n.LoginRsp=2]="LoginRsp",n[n.CreateSessionReq=3]="CreateSessionReq",n[n.CreateSessionRsp=4]="CreateSessionRsp",n[n.CreateSessionWithSdpReq=5]="CreateSessionWithSdpReq",n[n.CreateSessionWithSdpRsp=6]="CreateSessionWithSdpRsp",n[n.SessionResetPush=7]="SessionResetPush",n[n.SessionResetAck=8]="SessionResetAck",n[n.PublishEventPush=9]="PublishEventPush",n[n.PlayEventPush=10]="PlayEventPush",n[n.MediaDescReq=11]="MediaDescReq",n[n.MediaDescRsp=12]="MediaDescRsp",n[n.CandidateInfoReq=13]="CandidateInfoReq",n[n.CandidateInfoRsp=14]="CandidateInfoRsp",n[n.CloseSessionReq=15]="CloseSessionReq",n[n.CloseSessionRsp=16]="CloseSessionRsp",n[n.MediaDescPush=17]="MediaDescPush",n[n.MediaDescAck=18]="MediaDescAck",n[n.CandidateInfoPush=19]="CandidateInfoPush",n[n.CandidateInfoAck=20]="CandidateInfoAck",n[n.CloseSessionPush=21]="CloseSessionPush",n[n.CloseSessionAck=22]="CloseSessionAck",n[n.StreamStatusNotify=23]="StreamStatusNotify",n[n.StreamStatusNotifyAck=24]="StreamStatusNotifyAck",n[n.StreamStatusNotifyPush=25]="StreamStatusNotifyPush",n[n.StreamStatusNotifyPushAck=26]="StreamStatusNotifyPushAck",n[n.BroadcasterStatusNotify=27]="BroadcasterStatusNotify",n[n.BroadcasterStatusAck=28]="BroadcasterStatusAck",n[n.ActivateAudioPlayStreamReq=29]="ActivateAudioPlayStreamReq",n[n.ActivateAudioPlayStreamRsp=30]="ActivateAudioPlayStreamRsp",n[n.ActivateVideoPlayStreamReq=31]="ActivateVideoPlayStreamReq",n[n.ActivateVideoPlayStreamRsp=32]="ActivateVideoPlayStreamRsp",n[n.ClientInfoPush=33]="ClientInfoPush",n[n.ClientInfoAck=34]="ClientInfoAck",n[n.NetQualityProbeReq=35]="NetQualityProbeReq",n[n.NetQualityProbeRsp=36]="NetQualityProbeRsp",n[n.NetQualityInfoPush=37]="NetQualityInfoPush",n[n.NetQualityInfoAck=38]="NetQualityInfoAck",n[n.ActivateSEIInsertReq=39]="ActivateSEIInsertReq",n[n.ActivateSEIInsertRsp=40]="ActivateSEIInsertRsp",n[n.Peer2PeerNetStatsGetReq=41]="Peer2PeerNetStatsGetReq",n[n.Peer2PeerNetStatsGetRsp=42]="Peer2PeerNetStatsGetRsp",n[n.CmdReq=43]="CmdReq",n[n.CmdRsp=44]="CmdRsp",n[n.CmdPush=45]="CmdPush",n[n.CmdAck=46]="CmdAck",n[n.WebRTCDispatchReq=47]="WebRTCDispatchReq",n[n.WebRTCDispatchRsp=48]="WebRTCDispatchRsp"})(Zl||(Zl={}));var of={1:"LoginReq",2:"LoginRsp",3:"CreateSessionReq",4:"CreateSessionRsp",5:"CreateSessionWithSdpReq",6:"CreateSessionWithSdpRsp",7:"SessionResetPush",8:"SessionResetAck",9:"PublishEventPush",10:"PlayEventPush",11:"MediaDescReq",12:"MediaDescRsp",13:"CandidateInfoReq",14:"CandidateInfoRsp",15:"CloseSessionReq",16:"CloseSessionRsp",17:"MediaDescPush",18:"MediaDescAck",19:"CandidateInfoPush",20:"CandidateInfoAck",21:"CloseSessionPush",22:"CloseSessionAck",23:"StreamStatusNotify",24:"StreamStatusNotifyAck",25:"StreamStatusNotifyPush",26:"StreamStatusNotifyPushAck",27:"BroadcasterStatusNotify",28:"BroadcasterStatusAck",29:"ActivateAudioPlayStreamReq",30:"ActivateAudioPlayStreamRsp",31:"ActivateVideoPlayStreamReq",32:"ActivateVideoPlayStreamRsp",33:"ClientInfoPush",34:"ClientInfoAck",35:"NetQualityProbeReq",36:"NetQualityProbeRsp",37:"NetQualityInfoPush",38:"NetQualityInfoAck",39:"ActivateSEIInsertReq",40:"ActivateSEIInsertRsp",41:"Peer2PeerNetStatsGetReq",42:"Peer2PeerNetStatsGetRsp",43:"CmdReq",44:"CmdRsp",45:"CmdPush",46:"CmdAck",47:"WebRTCDispatchReq",48:"WebRTCDispatchRsp"},Fn=function(){return Fn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Fn.apply(this,arguments)},sf=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},af=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Es=Ys.webrtc_proto_v2,cf=Ys.webrtc_cmd,Kl=Ys.generalpclib,Jm=function(){function n(e,t,i){this._i=e,this.Oi=t,this.isV2=!1,this.isV2=i}return n.prototype.mediaLogin=function(e,t){var i;if(this.isV2){var r=e.token,s={appid:this._i.appid,user_id:this._i.idName,token:r,tokenType:e.tokenType,sessions:e.sessions,roomid:e.roomid,sdk_version:this._i.sdkVerNum,app:t};this.Oi.info("".concat(Kd," LoginReq ").concat(JSON.stringify(Fn(Fn({},s),{token:void 0}))," ")),this.Oi.remoteReport("".concat(Kd," token ").concat(r,")} ")),i=this.encodePBBody("LoginReq",s)}else i=e;return i},n.prototype.createSession=function(e,t,i,r,s,o,u,m,f){var a;if(s===void 0&&(s=""),o===void 0&&(o=""),this.isV2){var S={type:t,stream_id:r,turn_server_host:bi(o)?o:"",strAuthParam:s,params:u,area_type:f.type,area_id_list:f.areaList};this._i.isMultiRoom&&(S.roomid=m),this.Oi.info("".concat("zc.wcs.cs.1"," ").concat(r," ").concat(e," ").concat(JSON.stringify(S)," ")),a=this.encodePBBody(e,S)}else{var F="";v.split(".").forEach(function(ie,ae){return F+=ie.length==1&&ae==1?"0"+ie:ie});var ee=this._i.browserInfo;a={type:t,stream_id:r,platform:navigator.platform,browser:ee.name,version:ee.version,app_id:this._i.appid+"",negotiate_mode:i,strAuthParam:s,sdk_version:1*F,turn_server_host:bi(o)?o:"",params:u}}return a},n.prototype.createSessionWithSdp=function(e,t,i,r){var s=this,o=t.type,u=t.streamId,m=t.strAuthParam,f=t.sdp,a=t.serverHost,S=t.playBufLevel,F=t.params,ee=t.paramsExt,ie=t.roomID,ae=t.geo,be=t.player,Te=function(Be){var Ze,st,Rt=((Ze=t.videoInfo)===null||Ze===void 0?void 0:Ze.keyFrameInterval)||2;if(s.isV2){var At=s.getParamsExt(ee,S,Rt),vt={type:o,stream_id:u,media_server_host:bi(a)?a:"",strAuthParam:m,params:F,params_ext:At,area_type:ae.type,area_id_list:ae.areaList};Be?vt.mini_sdp=Be:vt.sdp=f,s._i.isMultiRoom&&(vt.roomid=ie),s.Oi.info(_l+" "+u+" "+e+" params: "+JSON.stringify(Fn(Fn({},vt),{sdp:void 0,mini_sdp:void 0,params_ext:At.toString()}))),performance.now(),st=s.encodePBBody(e,vt)}else{var Ft="";v.split(".").forEach(function(Mt,Gt){return Ft+=Mt.length==1&&Gt==1?"0"+Mt:Mt});var Ct={type:o,app_id:s._i.appid+"",stream_id:u,sdp:Be.length?Be:f,user_id:s._i.idName,platform:navigator.platform,browser:s._i.browserInfo.name,sdk_vers:parseInt(Ft),clientIp:"",media_server_host:bi(a)?a:"",strAuthParam:m,params:F,keyframe_intv:parseInt(Rt)};S&&(Ct.min_play_buf_level_ms=S),s.Oi.info(_l+" "+u+" "+e+" params: "+JSON.stringify(Fn(Fn({},Ct),{sdp:void 0}))),st=Ct}return st},Pe=be.zi;if(this.Oi.info("".concat(_l," ").concat(u," ").concat(Pe)),Pe&&f)this.getMiniSdp(f,!this.isV2,be).then(function(Be){var Ze=Te(Be);i(Ze)}).catch(function(){var Be=Te();i(Be)});else{var Ae=Te();i(Ae)}},n.prototype.getParamsExt=function(e,t,i){return t&&(e.min_play_buf_level_ms=t),i&&(e.keyframe_intv=i),this.Oi.info("".concat("zc.wcs.gpe"," ").concat(JSON.stringify(e))),cf.WebrtcCmdReqMsg.encode({peer_extend_param:e}).finish()},n.prototype.decodeParamsExt=function(e){return cf.WebrtcCmdReqMsg.decode(e).peer_ext_params_push},n.prototype.sendMediaDesc=function(e,t,i,r){return sf(this,void 0,void 0,function(){var s=this;return af(this,function(o){return[2,new Ge(function(u,m){var f=function(ee){var ie,ae=ee||r.sdp;if(s.isV2){var be=s.getParamsExt(r.paramsExt,r.min_play_buf_level_ms,r.keyframe_intv),Te={type:i,update:0,params_ext:be};ee?Te.mini_sdp=ee:Te.sdp=ae,s.Oi.info(bl+"  params: "+JSON.stringify(Fn(Fn({},Te),{sdp:void 0}))),ie=s.encodePBBody(t,Te)}else{var Pe={type:i,sdp:ae};r.width!=null&&(Pe.width=r.width),r.height!=null&&(Pe.height=r.height),r.frameRate!=null&&(Pe.framerate=r.frameRate),r.video_min_kpbs!=null&&(Pe.video_min_kpbs=r.video_min_kpbs),r.video_max_kpbs!=null&&(Pe.video_max_kpbs=r.video_max_kpbs),r.audio_kpbs!=null&&(Pe.audio_kpbs=r.audio_kpbs),r.keyframe_intv!=null&&(Pe.keyframe_intv=r.keyframe_intv),r.min_play_buf_level_ms!=null&&(Pe.min_play_buf_level_ms=r.min_play_buf_level_ms),s.Oi.info(bl+"  params: "+JSON.stringify(Fn(Fn({},Pe),{sdp:void 0}))),ie=Pe}return ie},a=e.zi,S=e.streamId;if(s.Oi.info("".concat(bl," ").concat(S," ").concat(a)),a&&r.sdp)s.getMiniSdp(r.sdp,!s.isV2,e).then(function(ee){var ie=f(ee);u(ie)}).catch(function(){var ee=f();u(ee)});else{var F=f();u(F)}})]})})},n.prototype.sendCandidateInfo=function(e,t){for(var i=[],r=0;r<t.length;r++)i.push({candidate:t[r].candidate,sdpMid:t[r].sdpMid,sdpMLineIndex:t[r].sdpMLineIndex});return this.getBodyData(e,{infos:i})},n.prototype.sendCloseSession=function(e,t){return this.getBodyData(e,{reason:t})},n.prototype.sendAckMessage=function(e,t){return this.getBodyData(e,{result:t})},n.prototype.sendActivatePlayStream=function(e,t,i){var r={active:t?0:1,layer:0};return this.Oi.info(Wd+" activate "+i+" "+JSON.stringify(r)),this.getBodyData(e,r)},n.prototype.sendMediaDescUpdateReq=function(e,t){return sf(this,void 0,void 0,function(){var i=this;return af(this,function(r){return[2,new Ge(function(s,o){var u=e.peerID,m=e.type,f=e.sdp,a=e.width,S=e.height,F=e.frameRate,ee=e.video_min_kpbs,ie=e.video_max_kpbs,ae=e.audio_kpbs,be=e.keyframe_intv,Te=function(Be){var Ze;if(i.isV2){var st={type:m,update:1};Be?st.mini_sdp=Be:st.sdp=f,i.Oi.info("zc.wcs.smdu "+JSON.stringify(st)),Ze=i.encodePBBody("MediaDescReq",st)}else Ze={peer_id:u,type:m,sdp:Be||f,width:a,height:S,framerate:F,video_min_kpbs:ee,video_max_kpbs:ie,audio_kpbs:ae,keyframe_intv:be};return Ze},Pe=t.zi;if(i.Oi.info("zc.wcs.smdur ".concat(t.streamId," ").concat(Pe)),Pe&&f)i.getMiniSdp(f,!i.isV2,t).then(function(Be){var Ze=Te(Be);s(Ze)}).catch(function(){var Be=Te();s(Be)});else{var Ae=Te();s(Ae)}})]})})},n.prototype.getBodyData=function(e,t){return this.isV2?this.encodePBBody(e,t):t},n.prototype.getMiniSdp=function(e,t,i){var r=this,s="zc.s.gmsdp",o=i.streamId;return this.Oi.warn("".concat(s," ").concat(o," sdp:").concat(e.length," isMini")),new Ge(function(u,m){var f=r._i.streamCenter.miniSdpWorker,a=function(S){r.Oi.error("".concat(s," ").concat(o," error:").concat(JSON.stringify(S))),i.zi=!1,m(S)};return e?f?void f.parseToMiniSdp(e).then(function(S){var F,ee;if(r.Oi.warn("".concat(s," parse sdp success buffer:").concat(S==null?void 0:S.byteLength)),!S||!S.byteLength)return r._i.zi=!1,a(Pr);ee=t?(F=Mc(S))===null||F===void 0?void 0:F.trim():S,u(ee)}).catch(function(S){return r._i.zi=!1,a(S)}):a(Ns):a({code:Pr.code,message:"sdp error"})})},n.prototype.parseRecSdp=function(e,t,i){var r=this,s="zc.s.prsdp",o=i.streamId;return this.Oi.warn("".concat(s," ").concat(o," rSDP:").concat(e.length," isMini")),new Ge(function(u,m){var f=t?Uc(e):e,a=r._i.streamCenter.miniSdpWorker,S=function(F){r.Oi.error("".concat(s," ").concat(o," error:").concat(JSON.stringify(F))),i.zi=!1,m(F)};if(!f||!f.byteLength)return S({code:yn.code,message:"buffer error"});a?a.loadMiniSdpToOriginSdp(f).then(function(F){r.Oi.warn("".concat(s," parse minisdp success sdp:").concat(F.length)),F?u(F):S(yn)}).catch(function(F){S(F)}):S(Ns)})},n.prototype.headerData=function(e){var t=Zl[e.cmd];if(t!==void 0){var i=Es.Head.create({cmd:t,seq:e.seq,session_id:e.session_id});return Es.Head.encode(i).finish()}this.Oi.error("zc.wmh.hd cmd not exist")},n.prototype.encodePBMsg=function(e,t,i){i===void 0&&(i=!0);var r=new Uint8Array(Array.from(this.getWebRTCHead(e.length,t.length)).concat(Array.from(e)).concat(Array.from(t))),s=Kl.Header.create({cmd:i?100:101}),o=Kl.Header.encode(s).finish(),u=new Uint8Array(8);u[0]=181,u[1]=0;var m=o.length,f=r.length;return u[2]=m>>8,u[3]=m-(u[2]<<8),u.set(new Uint8Array(Int32Array.from([f]).buffer).reverse(),4),new Uint8Array(Array.from(u).concat(Array.from(o)).concat(Array.from(r)))},n.prototype.getWebRTCHead=function(e,t){var i=new Uint8Array(7);return i[0]=17,i[1]=e>>8,i[2]=e-(i[1]<<8),i.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),i},n.prototype.encodePBBody=function(e,t){var i=Es[e].create(t),r=Es[e].encode(i).finish();return Es[e].decode(r),r},n.prototype.decodePBBody=function(e,t){var i=of[e.cmd];if(i)return Es[i].decode(t);this.Oi.info($c+" cmd is not rtc")},n.prototype.handlePushMsg=function(e,t){var i=e[0];if(i===181){var r=(e[2]<<8)+e[3],s=Kl.Header.decode(e.slice(8,8+r));if(s.cmd===101){var o=e.slice(8+r),u=o[0];if(u===17){var m=(o[1]<<8)+o[2],f=Es.Head.decode(o.slice(7,7+m)),a=o.slice(7+m);return{header:f,body:this.decodePBBody(f,a)}}this.Oi.error($c+" webrtc tag error "+u)}else this.Oi.error($c+" cmd error "+s.cmd)}else this.Oi.error($c+" type error "+i)},n}(),$s=function(){return $s=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},$s.apply(this,arguments)},$a=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},ec=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Ym=["LoginReq","CreateSessionWithSdpReq","CreateSessionReq"],Jl=["Peer2PeerNetStatsGetReq","Peer2PeerNetStatsGetRsp"],uf=function(){function n(e,t,i,r){r===void 0&&(r=!1),this.netAgent=i,this.useNetAgent=r,this.sendDataMap={},this.sendDataList=new pr,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.loginTimer=null,this.loginTimeout=1e4,this.successConnectedCallback=null,this.isNoAppConfig=!1,this.checkMessageList=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify","MediaDescUpdateReq"],this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=_e,this.tokenType=0,this.platform=navigator.platform,this.testStreamStatusMsgs=[],this.unCheckCmds=["LoginReq","CreateSessionReq","CreateSessionWithSdpReq"],this._websocket=null,this.negoInterval=25e3,this.negoTryCount=1,this.negoTryMaxCount=2,this.isV2=!0,this.Oi=e,this._i=t,this._i.streamConnectTime&&(this.tryConnectInterval=this._i.streamConnectTime),this.isV2=!!this._i.useNetAgent,this.webrtcCenterSvr=new Jm(t,e,this.isV2),this.gw=new Km(e,this,t)}return Object.defineProperty(n.prototype,"wsReadyState",{get:function(){var e;return(e=this.websocket)===null||e===void 0?void 0:e.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"websocket",{get:function(){return this._websocket},set:function(e){e===null&&this.useNetAgent||(this._websocket=e)},enumerable:!1,configurable:!0}),n.prototype.setSessionInfo=function(e,t){this.Oi.debug("zc.s.ssi call"),this.appid=e+"",this.userid=t},n.prototype.onDisconnect=function(e,t){},n.prototype.onReConnect=function(e){},n.prototype.onUpdateHeartBeatInterval=function(e){},n.prototype.resetConnectTimer=function(){this.Oi.info("zc.s.rct call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},n.prototype.resetLoginTimer=function(){this.Oi.info("zc.s.rlt call"),clearTimeout(this.loginTimer),this.loginTimer=null},n.prototype.handleWsPBMsg=function(e,t){var i=this.webrtcCenterSvr.handlePushMsg(e,t);if(i!=null&&i.header&&(i!=null&&i.body)){var r;return i&&(i.header.cmd=of[i.header.cmd],Ho(i.body),r={header:$s($s({},i.header),{appid:this.appid,user_id:this.userid}),body:i.body}),r}this.Oi.error("zc.s.dwpm no header or body")},n.prototype.handleWsMessage=function(e){var t;(t=this.isV2?this.handleWsPBMsg(e.data,e.extras):JSON.parse(e.data))!=null&&t.header&&t.header.appid==this.appid&&t.header.user_id===this.userid?(Jl.includes(t.header.cmd)||(this.Oi.info(La+" signmsg= ",t.header.cmd),this.Oi.info(La+" signmsg= "+JSON.stringify(t.header)+" "+JSON.stringify($s($s({},t.body),{mini_sdp:void 0})))),this.handleServerPush(t)):this.Oi.warn(La+" check header failed")},n.prototype.bindWebSocketEvents=function(){var e=this;this.tryHeartbeatCount=0,this.tryConnectInterval=this._i.streamConnectTime?this._i.streamConnectTime:3e3,this.websocket&&(this.websocket.onclose=function(t){var i=t||{},r=i.reason,s=i.wasClean;if(e.Oi.info(La+" close msg = ".concat(i.code,", ").concat(r,", ").concat(s)),e.state!=_e){if(e.useNetAgent)return void e.disconnectCallback();e.resetCheckMessage()}},this.websocket.onerror=function(t){var i=t||{},r=i.code,s=i.reason,o=i.wasClean;e.Oi.info(La+" msg = ".concat(JSON.stringify(t),", ").concat(r,", ").concat(s,", ").concat(o))})},n.prototype.resetCheckMessage=function(){this.Oi.info("zc.s.rcm call"),clearTimeout(this.sendDataCheckTimer),this.sendDataCheckTimer=null;for(var e=this.sendDataList.getFirst();e!=null;)this.sendDataList.remove(e),e._data.error&&e._data.error(2,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},n.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),e.body.result===0&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),e.body.result===0&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":case"StreamStatusNotifyPush":case"PublishEventPush":case"PlayEventPush":case"ClientInfoPush":case"NetQualityInfoPush":case"MediaDescUpdatePush":case"CmdPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e);break;case"ActivateVideoPlayStreamRsp":this.handleRespondData("ActivateVideoPlayStreamReq",e);break;case"ActivateAudioPlayStreamRsp":this.handleRespondData("ActivateAudioPlayStreamReq",e);break;case"NetQualityProbeRsp":this.handleRespondData("NetQualityProbeReq",e);break;case"ActivateSEIInsertRsp":this.handleRespondData("ActivateSEIInsertReq",e);break;case"StreamStatusNotifyAck":this.handleRespondData("StreamStatusNotify",e);break;case"Peer2PeerNetStatsGetRsp":this.handleRespondData("Peer2PeerNetStatsGetReq",e);break;case"MediaDescUpdateRsp":this.handleRespondData("MediaDescUpdateReq",e);break;case"CmdRsp":this.handleRespondData("CmdReq",e);break;case"WebRTCDispatchRsp":this.handleRespondData("WebRTCDispatchReq",e)}},n.prototype.disconnectCallback=function(e,t){this.Oi.info("zc.s.dcb "+JSON.stringify(e)+" "+t),this.connectCallback&&(this.connectCallback(t||-1,this.server,void 0),this.connectCallback=null);var i=this.server;this.disconnectServer(),this.onDisconnect(i,e)},n.prototype.updateToken=function(){var e=this;this.Oi.info(qc+" call");var t={token:this.token,tokenType:this.tokenType,roomid:this.roomID,anchorname:this._i.anchor_info.anchor_id,sdkversion:v,osinfo:navigator.appVersion};if(this.Oi.info(qc+" osinfo "+Qt()),Object.keys(this.sessionInfos).length!=0){var i=[];for(var r in this.sessionInfos){var s=parseInt(r);i.push({session_id:s,session_token:this.sessionInfos[s].token})}t.sessions=i}var o=this.webrtcCenterSvr.mediaLogin(t,this.app);this.sendMessageWithCallback("LoginReq",this._i.getSeq(),0,o,function(u,m,f){f.result==0?(e.token=f.token,e.tokenType=f.tokenType,e.resetLoginTimer(),e.Oi.info(qc+" callback "+!!e.connectCallback),e.connectCallback!=null?(e.connectCallback(0,e.server,{}),e.connectCallback=null):e.useNetAgent&&e.onReConnect(e.server),e.checkMessageTimeout()):e.connectCallback!=null&&(e.connectCallback(f.result,e.server,{error:f.strError}),e.connectCallback=null)},function(){e.connectCallback!=null&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)}),this.resetLoginTimer(),this.loginTimer=setTimeout(function(){e.Oi.info(qc+" set login timer"),e.connectCallback!=null&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)},this.loginTimeout)},n.prototype.sendMessageWithCallback=function(e,t,i,r,s,o){var u,m=this;s===void 0&&(s=null),o===void 0&&(o=null),Jl.includes(e)||this.Oi.info(Ma+" call "+e+" "+t+" "+((u=this.websocket)===null||u===void 0?void 0:u.readyState));var f=performance.now();if(!this.websocket||!this.unCheckCmds.includes(e)&&this.websocket.readyState!==En.OPEN)return this.Oi.error(Ma+" connect not establish"),void(o&&o(1,t));var a={seq:t,deleted:!1,cmd:e,time:new Date().getTime(),success:function(){for(var ae=[],be=0;be<arguments.length;be++)ae[be]=arguments[be];if(Ym.includes(e)){var Te=(performance.now()-f).toFixed(0);m.Oi.info(Ma+" seq: ".concat(t,", cmd: ").concat(e,", cost_time: ").concat(Te))}s&&s.apply(void 0,ae)},error:o},S=this.sendDataList.push(a);this.sendDataMap[a.seq]=S;var F,ee=this.getHeader(e,t,i);this.isV2?F=this.webrtcCenterSvr.encodePBMsg(ee,r):F=JSON.stringify({header:ee,body:r}),Jl.includes(e)||this.isV2||this.Oi.info(Ma+" "+F);var ie={};this.useNetAgent&&e==="LoginReq"?this.websocket.send(F,!0,!0,ie):this.websocket.send(F,void 0,void 0,ie),this.Oi.debug(Ma+" success")},n.prototype.getHeader=function(e,t,i){var r={version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:i};return this.isV2?this.webrtcCenterSvr.headerData(r):r},n.prototype.connectServer=function(e,t,i,r){var s,o,u=this;if(this.Oi.info(Yn+" "+i),this.roomID=e,this.token=t,this.server=i,this.state=Ue,this.connectCallback=r,this.isServerConnected)this.Oi.info(Yn+" websocket is connected"),this.resetConnectTimer(),this.state=Fe;else try{if(this.useNetAgent){if(!this._i.appConfig)return this.Oi.info(Yn+" no app config "),void(this.isNoAppConfig=!0);var m=this._i.appConfig.media_config.publish_config.resource_info.find(function(ie){return ie.resource_type===O.RTC});if(!m)return void(r&&r(Ve));var f=(s=m==null?void 0:m.service_info)===null||s===void 0?void 0:s.find(function(ie){return ie.protocol===U.WEBRTC});if(!f)return void(r&&r(Ve));var a=f.url_template.split("{IP}")[1].split("?"),S=a[0],F=a[1];this.app=(o=F.split("="))===null||o===void 0?void 0:o[1];var ee=void 0;ee=this.isV2?{path:"wsv2",query:"",encode:!1,messageType:2}:{path:S,query:F,encode:!0,messageType:1},this.Oi.info(Yn+" signal "+JSON.stringify(ee)),this.websocket instanceof WebSocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),!this.websocket&&(this.websocket=new nf(this.server,this.netAgent,ee,this.Oi,this._i)),this.websocket.open()}if(!this.websocket)return void this.Oi.error("the socket is disconect");this.websocket.onclose=function(ie){var ae=ie||{},be=ae.code,Te=ae.reason,Pe=ae.wasClean;u.Oi.info(Yn+" websocket close call. msg = ".concat(JSON.stringify(ie),", ").concat(be,", ").concat(Te,", ").concat(Pe)),u.useNetAgent&&u.state!=_e&&(u.successConnectedCallback=u.connectCallback,u.resetConnectTimer(),u.startConnectTimer(function(Ae){Ae===1008&&u.disconnectCallback(qt)}))},this.websocket.onerror=function(ie){var ae=ie||{},be=ae.code,Te=ae.reason,Pe=ae.wasClean;u.Oi.info(Yn+" websocket onerror call. msg = ".concat(JSON.stringify(ie),", ").concat(be,", ").concat(Te,", ").concat(Pe)),u._i.useNetAgent&&(ie!=null&&ie.code)&&u.disconnectCallback(void 0,ie==null?void 0:ie.code)},this.useNetAgent&&this.websocket instanceof nf?(this.websocket.onopen=function(){u.Oi.info(Yn+" websocket open call"),u.bindWebSocketEvents(),u.state=Fe,u.websocket&&(u.websocket.onmessage=u.handleWsMessage.bind(u))},this.websocket.onreconnnecting=function(){u.Oi.info(Yn+" websocket reconnecting "+!!u.successConnectedCallback+" "+!!u.loginTimer),u.successConnectedCallback&&(u.connectCallback=u.successConnectedCallback),u.updateToken()},this.websocket.onmessage=this.handleWsMessage.bind(this),this.updateToken()):this.websocket.onopen=function(){u.resetConnectTimer(),u.Oi.info(Yn+" websocket open call"),u.websocket&&(u.websocket.onmessage=u.handleWsMessage.bind(u)),u.bindWebSocketEvents(),u.updateToken(),u.state=Fe}}catch(ie){this.Oi.error(Yn+" websocket error "+ie)}},n.prototype.startConnectTimer=function(e){if(this.Oi.info(ml+" call"),this.tryConnectCount>=3)return this.Oi.info(ml+" beyond "+this.server+"max limit"),void this.disconnectCallback();this.websocket&&this.websocket.readyState===En.OPEN?(this.Oi.info(ml+" websocket is connected"),this.resetConnectTimer()):(this.tryConnectCount+=1,this.connectServer(this.roomID,this.token,this.server,e))},n.prototype.disconnectServer=function(){this.Oi.info("zc.s.dc call"),this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.resetLoginTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=_e},Object.defineProperty(n.prototype,"isServerConnected",{get:function(){var e;return((e=this.websocket)===null||e===void 0?void 0:e.readyState)===En.OPEN},enumerable:!1,configurable:!0}),n.prototype.createSession=function(e,t,i,r,s,o,u,m,f,a,S){s===void 0&&(s=""),o===void 0&&(o=""),this.Oi.info(xa+" call: "+r);var F="CreateSessionReq",ee=this.webrtcCenterSvr.createSession(F,t,i,r,s,o,u,m,f);this.sendMessageWithCallback(F,e,0,ee,a,S)},n.prototype.createSessionWithSdp=function(e,t,i){var r=this,s=e.seq,o=e.streamId;this.Oi.info(xa+" call: "+o+" seq:"+s);var u="CreateSessionWithSdpReq";this.webrtcCenterSvr.createSessionWithSdp(u,e,function(m){r.sendMessageWithCallback(u,s,0,m,function(f,a,S){return $a(r,void 0,void 0,function(){var F,ee,ie,ae=this;return ec(this,function(be){return S.params_ext&&(S.params_ext=this.webrtcCenterSvr.decodeParamsExt(S.params_ext),Ho(S.params_ext)),F=S.sdp||S.mini_sdp,ie=(ee=e.player).zi,this.Oi.info("".concat(xa," ").concat(o," rSDP:").concat(F.length," ").concat(ie)),ie&&F?this.setRspBodySdp(S,ee).then(function(){ae.Oi.info(xa+" sdp "+o),t&&t(f,a,S)}).catch(function(Te){i&&i(Te,f)}):(this.Oi.info(xa+" sdp "+o),t&&t(f,a,S)),[2]})})},i)},function(){})},n.prototype.dispatchGwNodes=function(e,t,i,r,s,o){this.Oi.info(Zd+" call: "+i);var u="WebRTCDispatchReq",m={type:t,stream_id:i,area_type:r.type,area_id_list:r.areaList};this.Oi.info(Zd+" "+i+" "+JSON.stringify(m));var f=this.webrtcCenterSvr.getBodyData(u,m);this.sendMessageWithCallback(u,e,0,f,s,o)},n.prototype.sendMediaDescUpdateReq=function(e,t,i,r,s,o){var u=this,m=this.isV2?"MediaDescReq":"MediaDescUpdateReq";this.webrtcCenterSvr.sendMediaDescUpdateReq(r,e).then(function(f){u.sendMessageWithCallback(m,t,i,f,function(a,S,F){return $a(u,void 0,void 0,function(){var ee,ie;return ec(this,function(ae){return ee=F.sdp||F.mini_sdp,ie=e.zi,this.Oi.info("zc.ss.smdur ".concat(e.streamId," rSDP:").concat(ee.length," ").concat(ie)),ie&&ee?this.setRspBodySdp(F,e).then(function(){s&&s(a,S,F)}).catch(function(be){o&&o(be,a)}):s&&s(a,S,F),[2]})})},o)}).catch(function(f){o&&o(f)})},n.prototype.removeSession=function(e){this.Oi.info("zc.s.rs call "+e),this.sessionInfos[e]&&delete this.sessionInfos[e]},n.prototype.sendCloseSession=function(e,t,i,r,s){this.Oi.info("zc.s.srs call: "+t);var o="CloseSessionReq",u=this.webrtcCenterSvr.sendCloseSession(o,i);this.removeSession(t),this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.sendMessage=function(e,t,i,r){if(this.Oi.info(gl+" call "+e),this.websocket&&this.websocket.readyState===En.OPEN){var s,o=this.getHeader(e,t,i);this.isV2?s=this.webrtcCenterSvr.encodePBMsg(o,r):s=JSON.stringify({header:o,body:r}),this.websocket.send(s,void 0,void 0,{}),this.Oi.info(gl+" success")}else this.Oi.error(gl+" connect not establish")},n.prototype.handleRespondData=function(e,t){this.Oi.debug(vl+" call");var i=this.sendDataMap[t.header.seq];if(i!=null){delete this.sendDataMap[t.header.seq],this.sendDataList.remove(i);var r=i._data;r.cmd!==e?this.Oi.error(vl+" command is not match"):r.success&&r.success(t.header.seq,t.header.session_id,t.body)}else{if(t.header.cmd=="CloseSessionRsp")return;this.Oi.error(vl+" cannot find data "+e)}},n.prototype.addSession=function(e,t){this.Oi.info("zc.s.as call"+e),this.sessionInfos[e]={token:t}},n.prototype.handlePushData=function(e){this.Oi.info(Hd+" call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.Oi.info(Hd+" no callbackData "+e.header.cmd+" session: "+e.header.session_id)},n.prototype.handlePushResetSessionData=function(e){this.Oi.debug(yl+" call ");var t=[];if(e.body.cResetType==0)t=Object.keys(this.sessionInfos);else if(e.body.cResetType==1)for(var i=0;i<e.body.session_ids.length;i++)t.push(e.body.session_ids[i]);if(this.sendResetSessionAck(e.header.seq,0,0),t.length!=0)for(var r=0;r<t.length;r++){var s=this.pushCallback[e.header.cmd+t[r]];s==null?this.Oi.info(yl+" no callbackData "+t[r]):s.callback&&s.callback(e.header.seq,t[r],e.body)}else this.Oi.info(yl+" no session to callback")},n.prototype.sendMediaDesc=function(e,t,i,r,s,o,u){return $a(this,void 0,void 0,function(){var m,f=this;return ec(this,function(a){return this.Oi.info(qd+" call: "+i),this.webrtcCenterSvr.sendMediaDesc(e,m="MediaDescReq",r,s).then(function(S){f.sendMessageWithCallback(m,t,i,S,function(F,ee,ie){return $a(f,void 0,void 0,function(){var ae,be,Te;return ec(this,function(Pe){return ae=ie.sdp||ie.mini_sdp,be=e.zi,Te=e.streamId,this.Oi.info("".concat(qd," ").concat(Te," rSDP:").concat(ae.length," ").concat(be)),be&&ae?this.setRspBodySdp(ie,e).then(function(){o&&o(F,ee,ie)}).catch(function(Ae){u&&u(Ae,F)}):o&&o(F,ee,ie),[2]})})},u)}).catch(function(){}),[2]})})},n.prototype.sendCandidateInfo=function(e,t,i,r,s){this.Oi.info("zc.s.sci call: "+t);var o="CandidateInfoReq",u=this.webrtcCenterSvr.sendCandidateInfo(o,i);this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.sendMediaDescAck=function(e,t,i){this.Oi.info(jd+" call: "+t);var r="MediaDescAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.sendUpdateMediaDescAck=function(e,t,i,r){this.Oi.info(jd+" call: "+t),this.sendMessage("MediaDescUpdateAck",e,t,{peer_id:r,result:i})},n.prototype.sendCandidateInfoAck=function(e,t,i){this.Oi.info("zc.s.scia call: "+t);var r="CandidateInfoAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.sendCloseSessionAck=function(e,t,i){this.Oi.info("zc.s.scsa call: "+t);var r="CloseSessionAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.sendResetSessionAck=function(e,t,i){this.Oi.debug("zc.s.srsa call: "+t);var r="SessionResetAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.sendStreamStatusNotifyAck=function(e,t,i){this.Oi.debug("zc.s.sssna call: "+t);var r="StreamStatusNotifyPushAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.sendClientInfoAck=function(e,t,i){this.Oi.debug("zc.s.scia call: "+t);var r="ClientInfoAck",s=this.webrtcCenterSvr.sendAckMessage(r,i);this.sendMessage(r,e,t,s)},n.prototype.registerPushCallback=function(e,t,i){i&&wn(i)&&(this.Oi.info("zc.s.rpc set callback "+t+" "+e),this.pushCallback[e+t]={callback:i})},n.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},n.prototype.checkMessageTimeout=function(){for(var e,t,i=this,r=this.sendDataList.getFirst(),s=new Date().getTime(),o=0,u=0,m=0;r!=null&&!(r._data.time+this.sendDataTimeout>s);)if(delete this.sendDataMap[r._data.seq],this.sendDataList.remove(r),++u,this.checkMessageList.indexOf(r._data.cmd)!=-1){if(r._data.error==null||this.sendDataDropTimeout>0&&r._data.time+this.sendDataDropTimeout<s?++m:(this.Oi.warn(Vd+" error cmd = "+r._data.cmd+" seq ="+((e=r._data)===null||e===void 0?void 0:e.seq)+" start time ="+((t=r._data)===null||t===void 0?void 0:t.time)),r._data.error&&r._data.error(1,r._data.seq)),++o>=this.sendDataCheckOnceCount)break;r=this.sendDataList.getFirst()}else r=this.sendDataList.getFirst();this.sendDataCheckTimer=setTimeout(function(){i.checkMessageTimeout()},this.sendDataCheckInterval),u==0&&m==0||this.Oi.info(Vd+" call success, state: timeout="+u+" drop="+m)},n.prototype.sendHeartbeat=function(){var e=this;if(this.Oi.debug(Ua+"call tryHeartbeatCount:"+this.tryHeartbeatCount),Object.keys(this.sessionInfos).length!=0)if(this.state===Fe){if(++this.tryHeartbeatCount>5)return this.Oi.error(Ua+" heartbeat try limit"),void this.disconnectCallback();var t=[];for(var i in this.sessionInfos)t.push(parseInt(i));var r={session_ids:t},s=new Date().getTime();this.sendMessageWithCallback("ClientHBReq",this._i.getSeq(),0,r,function(o,u,m){e.Oi.info(Ua+" hb time "+(new Date().getTime()-s)),e.heartbeatInterval!=m.hb_interval&&(e.heartbeatInterval=m.hb_interval,e.onUpdateHeartBeatInterval(m.hb_interval)),e.tryHeartbeatCount=0},function(o,u){})}else this.Oi.warn(Ua+" state error");else this.Oi.info(Ua+" no need to heartbeat")},n.prototype.sendStreamStatus=function(e,t,i,r,s,o){this.Oi.info(Gd+" call "+t);var u="StreamStatusNotify",m={mic_status:r,camera_status:i};this.Oi.info("".concat(Gd," stream ").concat(s||""," status ").concat(JSON.stringify(m)));var f=this.webrtcCenterSvr.getBodyData(u,m);this.sendMessageWithCallback(u,e,t,f,function(){},function(a){a===1&&o&&o()})},n.prototype.ActivatePlayVideoStream=function(e,t,i,r,s){this.Oi.info("zc.s.apvs call");var o="ActivateVideoPlayStreamReq",u=this.webrtcCenterSvr.sendActivatePlayStream(o,i,"video");this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.ActivatePlayAudioStream=function(e,t,i,r,s){this.Oi.info(Wd+" call");var o="ActivateAudioPlayStreamReq",u=this.webrtcCenterSvr.sendActivatePlayStream(o,i,"audio");this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.sendBroadcasterStatus=function(e,t,i){this.Oi.info("zc.s.sbs call "+t);var r="BroadcasterStatusNotify",s=this.webrtcCenterSvr.getBodyData(r,{status:i});this.sendMessage(r,e,t,s)},n.prototype.sendNetProbe=function(e,t,i,r,s){this.Oi.info(Qd+" call "+t);var o="NetQualityProbeReq",u=this.webrtcCenterSvr.getBodyData(o,{peer_id:i,action:1});this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.sendNetQualityInfoPushAck=function(e,t,i,r){this.Oi.info(Qd+" call "+t);var s="NetQualityInfoAck",o=this.webrtcCenterSvr.getBodyData(s,{peer_id:i,result:r});this.sendMessage(s,e,t,o)},n.prototype.activateSEIInsert=function(e,t,i,r,s,o,u){},n.prototype.getP2PNetStats=function(e,t,i,r,s){var o="Peer2PeerNetStatsGetReq",u=this.webrtcCenterSvr.getBodyData(o,{peer_id:i});this.sendMessageWithCallback(o,e,t,u,r,s)},n.prototype.sendGWCmd=function(e,t,i,r,s){var o=this,u="CmdReq";t.body=this.isV2?i:Mc(i);var m=this.webrtcCenterSvr.getBodyData(u,t);this.sendMessageWithCallback(u,this._i.getSeq(),e,m,function(f,a,S){var F=o.isV2?S.body:Uc(S.body);S.body=F,r(f,a,S)},s)},n.prototype.sendGWAck=function(e,t,i){var r="CmdAck";t.body=this.isV2?i:Mc(i);var s=this.webrtcCenterSvr.getBodyData(r,t);this.sendMessage(r,this._i.getSeq(),e,s)},n.prototype.setRspBodySdp=function(e,t){return $a(this,void 0,void 0,function(){var i=this;return ec(this,function(r){return[2,new Ge(function(s,o){var u=e.sdp||e.mini_sdp;i.Oi.info("zc.srbsdp ".concat(t.streamId," rSdp:").concat(u.length)),i.webrtcCenterSvr.parseRecSdp(u,!e.mini_sdp,t).then(function(m){e.sdp=m,delete e.mini_sdp,s()}).catch(function(m){o(m)})})]})})},n}(),tc=function(n,e,t,i,r){if(e.breakStartTime){var s=n-e.breakStartTime;s>=i&&(e.cumulativeBreakDuration+=s,t.breakDuration+=s),e.breakStartTime=void 0}},lf=function(n,e,t,i,r,s,o,u,m,f){if(m===void 0&&(m=u),r>1e3&&(r=1e3),i.breakStartTime)if(t)e===0?(n-i.breakStartTime>=22e3&&tc(n,i,o,r),s.breakDuration+=1e3):u>=r?u<500?u+m<1e3?(tc(n-(1e3-m),i,o,r),i.breakStartTime=n-u,s.breakDuration+=m+u,s.decodeTime+=1e3-(m+u)):(tc(n-1e3+m,i,o,r),i.breakStartTime=n-1e3+m,s.breakDuration+=1e3):u>=500&&(tc(n-u,i,o,r),i.breakStartTime=n-u,s.breakDuration+=1e3):m<=r?(tc(n-1e3+m,i,o,r),i.breakStartTime=void 0,s.breakDuration+=m,s.decodeTime+=1e3-m,o.decodeDuration+=1e3-m):s.breakDuration+=1e3;else{i.resumeRecv=!1;var a=n-1e3-i.breakStartTime;a<=0&&(a=0),i.breakStartTime=void 0,i.noBreakNoDecodeDuration+=a,s.breakCancelDuration+=a,o.blankDuration+=a}else t?e===0?i.resumeRecv?(i.breakStartTime=n-1e3,s.breakDuration+=1e3):(i.noBreakNoDecodeDuration+=1e3,o.blankDuration+=1e3):m>r?i.resumeRecv?(i.breakStartTime=n-m,i.cumulativeBreakDuration+=m,s.breakDuration+=m,s.decodeTime+=1e3-m,o.breakDuration+=m,o.decodeDuration+=1e3-m):(i.noBreakNoDecodeDuration+=1e3,o.blankDuration+=1e3):(s.decodeTime+=1e3,o.decodeDuration+=1e3):i.decodeStartTime&&(e===0?(i.resumeRecv=!1,i.noBreakNoDecodeDuration+=1e3,o.blankDuration+=1e3):(s.decodeTime+=1e3,o.decodeDuration+=1e3));t&&e&&(i.resumeRecv=!0)},df=function(n,e,t,i,r,s,o){if(i=i>1e3?1e3:i,e.breakDuration=0,e.breakCancelDuration=0,e.decodeTime=0,t.decodeDuration=0,t.breakDuration=0,t.blankDuration=0,n.decodeStartTime){var u=s,m=u-n.decodeStartTime;if(n.decodeStartTime=void 0,n.totalDuration+=m,n.breakStartTime){var f=u-n.breakStartTime;n.breakStartTime=void 0,r?f>i&&(n.cumulativeBreakDuration+=f):n.noBreakNoDecodeDuration+=f}var a=n.cumulativeBreakDuration,S=n.totalDuration-n.cumulativeBreakDuration-n.noBreakNoDecodeDuration;return n.cumulativeDecodeDuration=S,{cumulativeBreakDuration:a,cumulativeDecodeDuration:S}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}},ea=function(){return ea=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},ea.apply(this,arguments)},Xm=function(){function n(e,t,i,r,s,o){this.qualityUpdateInterval=e,this.qualityUploadInterval=t,this.player=i,this.Oi=r,this.dataReport=s,this._i=o,this.playQualityList=[],this.qualityTimer=null,this.qualityUpdateTimer=null,this.qualityUploadTimer=null,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:0,lastTimestamp:0,videoElem:null},this.currentQuality={video:{videoBitrate:0,videoFPS:0,videoRenderFPS:-1,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,googCodecName:"",videoPacketsLost:0,videoPacketsLostRate:0,videoFramesDecoded:0,videoFramesDropped:0,videoCumulativeDecodeTime:0,videoCumulativeBreakTime:0,videoCumulativeBreakRate:0},audio:{audioBitrate:0,audioCodec:"opus",muteState:"1",audioQuality:-1,audioFPS:0,audioJitter:0,audioLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,audioSamplingRate:0,audioSendLevel:0,googCodecName:"",audioCumulativeDecodeTime:0,audioCumulativeBreakTime:0,audioCumulativeBreakRate:0},peerToPeerDelay:0,peerToPeerPacketLostRate:0},this.decodeStartTime=0,this.netQuality=0,this.probeTime=0,this.probeInterval=6e4,this.probeState=w.probed,this.probeTimer=null,this.probeTimeoutInterval=3e4,this.qualityUploadLastTime=0,this.playStat={},this.cumulativeQuality={},this.audioBreakThreshold=200,this.videoBreakThreshold=500,this.videoBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.audioBreak={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0},this.lastSampleTime=0,this.videoBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.audioBreakReport={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.videoReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.audioReliableBreak={decodeDuration:0,breakDuration:0,blankDuration:0},this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.currentSecondQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0},this.poorQualityNum=0,this.sampleTimes=0,this.qualitySampleInterval=1e3,this.timerType=0,this.webrtcProtocol="udp",this.hasRecvMediaData=!1,this.onRecvMediaData=function(){},this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.currentQuality.video.muteState=this.player.videoMuteState,this.currentQuality.audio.muteState=this.player.audioMuteState,this.getTimerType(),this.exception=new $h(this._i,this.Oi,this.streamId,sr.event)}return Object.defineProperty(n.prototype,"_playStream",{get:function(){return this.player.playStream},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"streamId",{get:function(){return this.player.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sessionId",{get:function(){return this.player.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"peerID",{get:function(){return this.player.peerID},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"audioMuted",{get:function(){if(!this.player.remoteStream||this.player.remoteStream.getAudioTracks().length<=0)return!0;var e=this.player.remoteStream.getAudioTracks()[0];return!(!e||!e.muted&&e.readyState!=="ended"&&e.enabled)||this.player.audioMuteState=="1"||!this.player.playMediaStatus.audio},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoMuted",{get:function(){if(!this.player.remoteStream||this.player.remoteStream.getVideoTracks().length<=0)return!0;var e=this.player.remoteStream.getVideoTracks()[0];return!(!e||!e.muted&&e.readyState!=="ended"&&e.enabled)||this.player.videoMuteState=="1"||!this.player.playMediaStatus.video},enumerable:!1,configurable:!0}),n.prototype.getPlayStats=function(e,t){var i,r=this;if(e!=null){var s=this.sampleTimes%parseInt((this.qualityUploadInterval/this.qualitySampleInterval).toString())==0;s&&this.getP2PNetStats(),Tt.querySelectorAll("video, audio");var o,u,m=this.player.rtcViewer;m&&(o=m._video,u=m._audio),o&&o.currentTime||(o=Pa(this._playStream,"video")||o),u&&u.currentTime||(u=Pa(this._playStream,"audio")||u||o);var f={sampleTimeWindow:this.qualityUploadInterval,audioFractionLost:0,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"opus",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,videoRenderFPS:-1,nackCount:0,pliCount:0,audioJitter:0,videoJitter:0,videoFractionLost:0,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,audioCurrentDelayMs:0,videoCurrentDelayMs:0,googCurrentDelayMs:0,googBandwidthLimitedResolution:void 0,videoCodecName:"",audioCodecName:"",googCpuLimitedResolution:void 0,googAvailableSendBandwidth:0,audioMuteState:this.audioMuted?"1":"0",videoMuteState:this.videoMuted?"1":"0",soundLevel:this.player.soundLevel,muted:u?u.muted:void 0,videoPaused:o?o.paused:void 0,audioPaused:u?u.paused:void 0,volume:u?u.volume:void 0,sinkId:u?u.sinkId:void 0},a=this.lastPlayStats.time,S=0,F=0,ee=0,ie=0,ae=0,be=0,Te=0,Pe=null,Ae=null;e.forEach(function(ei){var ln=ei.kind||ei.mediaType;["ssrc","inbound-rtp"].includes(ei.type)&&(ln=="video"||ei.id.indexOf("VideoStream")>=0)&&(Pe=ei),(ei.type=="inbound-rtp"||ei.type=="ssrc"&&ei.bytesReceived!=null)&&(ln=="audio"||ei.id.indexOf("AudioStream")>=0)&&(Ae=ei)});var Be=new Date().getTime(),Ze=function(ei,ln){return ei>ln?ei-ln:0};if(this.lastSampleTime||(this.lastSampleTime=Be-1e3),Pe){var st=Pe.totalInterFrameDelay,Rt=Pe.framesDecoded,At=Pe.totalSquaredInterFrameDelay,vt=Ze(Rt,this.totalQuality.framesDecode);this.totalQuality.framesDecode=Rt;var Ft=Ze(st,this.totalQuality.totalInterFrameDelay);this.totalQuality.totalInterFrameDelay=st;var Ct=Ze(At,this.totalQuality.totalSquaredInterFrameDelay);this.totalQuality.totalSquaredInterFrameDelay=At;var Mt=(Ct-Math.pow(Ft,2)/(vt||1))/(vt||1);Mt=Mt>0?Mt:-Mt;var Gt=parseInt((1e3/(vt+1)).toString()),li=1e3*Math.sqrt(Mt),kt=Ft/(vt||1)*1e3||Gt,ti=(kt=parseInt((kt>1e3?1e3:kt).toString()))+li;ti=parseInt((ti>1e3?1e3:ti).toString()),vt>0&&this.player.cameraStatus===0&&!this.videoBreak.decodeStartTime&&(this.videoBreak.decodeStartTime=Be-1e3),this.videoBreak.decodeStartTime&&lf(Be,vt,this.player.cameraStatus===0&&this.player.playMediaStatus.video,this.videoBreak,this.videoBreakThreshold,this.videoBreakReport,this.videoReliableBreak,kt,ti)}if(Ae){var vi=Ae.totalSamplesReceived,Lt=Ae.concealedSamples,ui=Ae.bytesReceived,Jt=Ze(vi,this.totalQuality.totalSamplesReceived);this.totalQuality.totalSamplesReceived=vi;var ai=Ze(Lt,this.totalQuality.concealedSamples);this.totalQuality.concealedSamples=Lt;var Vi=Ze(ui,this.totalQuality.audioBytesReceived);this.totalQuality.audioBytesReceived=ui;var Fi=parseInt((1e3*(ai/(Jt||1))).toString());Vi>0&&this.player.micStatus===0&&!this.audioBreak.decodeStartTime&&(this.audioBreak.decodeStartTime=Be-1e3),this.audioBreak.decodeStartTime&&lf(Be,Vi,this.player.micStatus===0&&this.player.playMediaStatus.audio,this.audioBreak,this.audioBreakThreshold,this.audioBreakReport,this.audioReliableBreak,Fi,Fi)}t&&t.result().forEach(function(ei){ei.type=="ssrc"&&(ei.names().indexOf("googBandwidthLimitedResolution")>=0&&(f.googBandwidthLimitedResolution=ei.stat("googBandwidthLimitedResolution")),ei.names().indexOf("codecImplementationName")>=0&&(f.codecImplementationName=ei.stat("codecImplementationName")),ei.stat("mediaType")=="video"&&(ei.names().indexOf("googCodecName")>=0&&(f.videoCodecName=ei.stat("googCodecName")),ei.names().indexOf("googCurrentDelayMs")>=0&&(Te=ei.stat("googCurrentDelayMs"),f.videoCurrentDelayMs=Te)),ei.stat("mediaType")=="audio"&&(ei.names().indexOf("googCodecName")>=0&&(f.audioCodecName=ei.stat("googCodecName")),ei.names().indexOf("googCurrentDelayMs")>=0&&(be=ei.stat("googCurrentDelayMs"),f.audioCurrentDelayMs=be)),ei.names().indexOf("googCpuLimitedResolution")>=0&&(f.googCpuLimitedResolution=ei.stat("googCpuLimitedResolution"))),ei.type=="VideoBwe"&&ei.names().indexOf("googAvailableSendBandwidth")>=0&&(f.googAvailableSendBandwidth=ei.stat("googAvailableSendBandwidth"))});var Ni=[],ir="",Rr=!1;if(e.forEach(function(ei){ei.type=="track"&&(Rr=!0)}),e.forEach(function(ei){var ln=ei.kind||ei.mediaType;if((ei.type=="inbound-rtp"||ei.type=="ssrc"&&ei.bytesReceived!=null)&&(ln=="audio"||ei.id.indexOf("AudioStream")>=0)){a!=0&&(f.audioBitrate=8*(ei.bytesReceived-r.lastPlayStats.audioBytesReceived)/(ei.timestamp-a),(is=ei.packetsLost-r.lastPlayStats.audioPacketsLost)>0&&(F=is/(is+ei.packetsReceived-r.lastPlayStats.audioPacketsReceived))),f.audioBitrate<0&&(f.audioBitrate=0),f.audioJitter=ei.jitter,ei.packetsLost>0&&(f.audioPacketsLost=ei.packetsLost),f.audioFractionLost=ei.fractionLost;var mn=ei.packetsLost-r.lastPlayStats.audioPacketsLost;f.audioFPS=(ei.packetsReceived-r.lastPlayStats.audioPacketsReceived)/(ei.timestamp-a)*1e3,f.audioPacketsLostRate=mn>0?mn/(ei.packetsReceived-r.lastPlayStats.audioPacketsReceived+mn):0,r.lastPlayStats.audioBytesReceived=ei.bytesReceived,ei.packetsLost>0&&(r.lastPlayStats.audioPacketsLost=ei.packetsLost),r.lastPlayStats.audioPacketsReceived=ei.packetsReceived,r.lastPlayStats.audioTime=ei.timestamp,r.lastPlayStats.time=ei.timestamp,r.lastPlayStats.audioBitrate=f.audioBitrate,ie=ei.jitter,Rr||r.aTrackStats(f,ei)}else if((ei.type=="inbound-rtp"||ei.type=="ssrc"&&ei.bytesReceived!=null)&&(ln=="video"||ei.id.indexOf("VideoStream")>=0)){var is;a!=0?(f.videoBitrate=8*(ei.bytesReceived-r.lastPlayStats.videoBytesReceived)/(ei.timestamp-a),f.videoFPS=1e3*(ei.framesDecoded-r.lastPlayStats.framesDecoded)/(ei.timestamp-a),(is=ei.packetsLost-r.lastPlayStats.videoPacketsLost)>0&&(ee=is/(is+ei.packetsReceived-r.lastPlayStats.videoPacketsReceived))):qi(ei.framesPerSecond)&&(f.videoFPS=ei.framesPerSecond),f.videoBitrate<0&&(f.videoBitrate=0),f.videoFPS<0&&(f.videoFPS=0),f.videoRenderFPS=r.getVideoRenderFps(o),f.videoJitter=ei.jitter,f.nackCount=ei.nackCount,f.pliCount=ei.pliCount,f.videoFractionLost=ei.fractionLost,f.videoFramesDecoded=ei.framesDecoded,ei.packetsLost>0&&(f.videoPacketsLost=ei.packetsLost),f.videoPacketsLostRate=(mn=ei.packetsLost-r.lastPlayStats.videoPacketsLost)>0?mn/(ei.packetsReceived-r.lastPlayStats.videoPacketsReceived+mn):0,r.lastPlayStats.videoBytesReceived=ei.bytesReceived,r.lastPlayStats.framesDecoded=ei.framesDecoded,ei.packetsLost>0&&(r.lastPlayStats.videoPacketsLost=ei.packetsLost),r.lastPlayStats.videoPacketsReceived=ei.packetsReceived,r.lastPlayStats.videoTime=ei.timestamp,r.lastPlayStats.time=ei.timestamp,ae=ei.jitter,Rr||r.vTrackStats(f,ei,a)}else ei.type=="track"&&(ln=="video"||ei.id.indexOf("video")>=0)||ei.frameWidth?r.vTrackStats(f,ei,a):ei.type=="track"&&(ln=="audio"||ei.id.indexOf("audio")>=0)?r.aTrackStats(f,ei):ei.type=="candidate-pair"?(ei.totalRoundTripTime!=null&&(f.totalRoundTripTime=ei.totalRoundTripTime),ei.currentRoundTripTime!=null&&(f.currentRoundTripTime=ei.currentRoundTripTime,S=1e3*f.currentRoundTripTime),ei.state==="succeeded"&&(ir=ei.localCandidateId)):ei.type==="local-candidate"&&Ni.push(ei)}),ir){var Oi=Ni.find(function(ei){return ei.id==ir});if(Oi){var fr=void 0;if(Oi.relayProtocol!==void 0)fr=Oi.relayProtocol;else if(Oi.priority){var jr=Oi.priority>>24;jr!==void 0&&(fr=Nd(jr,this._i.browser))}fr!==void 0&&this.webrtcProtocol!==fr&&(this.Oi.info(qs+" "+this.streamId+" pro "+fr),this.webrtcProtocol=fr)}}this.lastPlayStats.googCurrentDelayMs=Number(be)||Number(Te)||0,f.googCurrentDelayMs=this.lastPlayStats.googCurrentDelayMs,ee=isNaN(ee)||ee<0?0:ee,ae=isNaN(ae)||ae<0?0:ae,F=isNaN(F)||F<0?0:F,ie=isNaN(ie)||ie<0?0:ie;var Or=Oa(S,ee,ae),Cr=Oa(S,F,ie);f.audioQuality=a>0?Fo(Cr):0,f.videoQuality=a>0?Fo(Or):0,this.player._i.networkState!==he.offline&&((i=this.player.peerConnection)===null||i===void 0?void 0:i.connectionState)!=="disconnected"||(f.videoQuality=Ee.Die,f.audioQuality=Ee.Die);var uo=Math.min(Or,Cr);this.netQuality=uo,f.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.lastPlayStats.googCurrentDelayMs).toString()),f.peerToPeerPacketLostRate=this.p2pNetStats.p2pLostRate,this.playStat=f,this.updateCurrentQualityStats(f),(!this.hasRecvMediaData&&f.videoBitrate>0||f.audioBitrate>0)&&(this.hasRecvMediaData=!0,this.onRecvMediaData&&this.onRecvMediaData()),this.timerType===1&&a!=0&&this.player.onPlayQualityUpdate(this.streamId,this.currentQuality),s&&(this.checkProbe(Be),this.uploadPlayQuality(f,Be),a!=0&&(this.timerType===0&&this.player.onPlayQualityUpdate(this.streamId,this.currentQuality),this.exception.checkRemoteStats(f,this._playStream),this.player.Ri.changeRxQuality(Fo(this.netQuality)))),this.timerType==2&&a===0&&this.qualityTimer&&this.setPlayQualityUpdateTimer()}},n.prototype.getVideoRenderFps=function(e){var t=-1;if(!e||!(e&&(e.getVideoPlaybackQuality||e.requestVideoFrameCallback||e.mozPaintedFrames!==void 0)))return-1;var i=this.lastPlayStats.videoElem,r=e.currentTime,s=e.getVideoPlaybackQuality();e.requestVideoFrameCallback&&!s.totalVideoFrames?i&&i==e||(this.lastPlayStats.videoElem=e,this.lastPlayStats.lastTimestamp=r,!i&&e.requestVideoFrameCallback(this.videoFramesRender.bind(this))):this.lastPlayStats.videoElem=null,i=this.lastPlayStats.videoElem;var o,u=Date.now(),m=this.lastPlayStats,f=m.renderTime;return o=this.player._i.browser!="firefox"||s.totalVideoFrames||i||e.mozPaintedFrames===void 0?i?m.paintedFrames:s.totalVideoFrames-s.droppedVideoFrames:e.mozPaintedFrames,t=f!=0?1e3*(o-m.totalRenderFrames)/(u-f):o/s.creationTime,this.lastPlayStats.renderTime=u,this.lastPlayStats.totalRenderFrames=o,t},n.prototype.videoFramesRender=function(e,t){var i=this.lastPlayStats,r=i.videoElem;if(r&&r.requestVideoFrameCallback){var s=r.currentTime;i.lastTimestamp!=s&&(this.lastPlayStats.paintedFrames++,this.lastPlayStats.lastTimestamp=s),r.requestVideoFrameCallback(this.videoFramesRender.bind(this))}},n.prototype.vTrackStats=function(e,t,i){var r=t.frameHeight,s=t.frameWidth,o=t.framesReceived,u=t.framesDropped,m=t.timestamp;if(e.frameHeight=r,e.frameWidth=s,i===0||this.lastPlayStats.frameHeight===r&&this.lastPlayStats.frameWidth===s)i===0&&(this.lastPlayStats.frameHeight=r,this.lastPlayStats.frameWidth=s,this.player.isProbe||(this.ji.spanAppendAttribute({key:this.player.pe,par:this.streamId},"vinfo",{h:r,fft:Date.now(),w:s}),this.ji.spanAppendAttribute({key:ho.event,par:this.streamId},"vinfo",{h:r,fft:Date.now(),w:s})));else{if(!this.player.isProbe){var f=this.ji.createSpan(It.H,{key:sr.event,par:this.streamId},{key:""},Vu);f.setAttributes({webrtc_sid:Tc(this.sessionId),w:Rc(s),h:xn(r)}),f.end(),this.ji.spanAppendAttribute({key:this.player.pe,par:this.streamId},"vinfo",{h:r,fft:Date.now(),w:s}),this.ji.spanAppendAttribute({key:ho.event,par:this.streamId},"vinfo",{h:r,fft:Date.now(),w:s})}this.lastPlayStats.frameHeight=r,this.lastPlayStats.frameWidth=s}i!=0&&(isNaN(o)||isNaN(u)||(e.videoTransferFPS=1e3*(o-this.lastPlayStats.framesReceived)/(m-i),e.videoFramesDropped=u-this.lastPlayStats.framesDropped)),e.videoTransferFPS<0&&(e.videoTransferFPS=0),e.videoFramesDropped<0&&(e.videoFramesDropped=0),o&&(this.lastPlayStats.framesReceived=o),u&&(this.lastPlayStats.framesDropped=u)},n.prototype.aTrackStats=function(e,t){e.audioLevel=t.audioLevel||0,e.audioSendLevel=t.totalAudioEnergy,e.audioSamplingRate=t.totalSamplesDuration},n.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,i=e.videoFPS,r=e.videoTransferFPS,s=e.frameHeight,o=e.frameWidth,u=e.videoMuteState,m=e.videoQuality,f=e.videoFramesDecoded,a=e.videoFramesDropped,S=e.videoPacketsLost,F=e.videoPacketsLostRate,ee=e.audioBitrate,ie=e.audioCodec,ae=e.audioMuteState,be=e.audioQuality,Te=e.audioFPS,Pe=e.audioJitter,Ae=e.audioLevel,Be=e.audioPacketsLost,Ze=e.audioPacketsLostRate,st=e.audioSamplingRate,Rt=e.audioSendLevel,At=e.nackCount,vt=e.pliCount,Ft=e.totalRoundTripTime,Ct=e.currentRoundTripTime,Mt=e.peerToPeerDelay,Gt=e.peerToPeerPacketLostRate,li=e.sampleTimeWindow,kt=e.videoRenderFPS,ti={video:ea(ea({},this.currentQuality.video),{videoBitrate:t,videoFPS:i,videoTransferFPS:r,frameHeight:s,frameWidth:o,videoQuality:m,videoFramesDecoded:f,videoFramesDropped:a,videoPacketsLost:S,videoPacketsLostRate:F,muteState:u,videoCumulativeDecodeTime:this.videoReliableBreak.decodeDuration,videoCumulativeBreakTime:this.videoReliableBreak.breakDuration,videoCumulativeBreakRate:this.videoReliableBreak.breakDuration/(this.videoReliableBreak.decodeDuration+this.videoReliableBreak.breakDuration||1),videoRenderFPS:kt}),audio:ea(ea({},this.currentQuality.audio),{audioBitrate:ee,audioCodec:ie,audioQuality:be,audioFPS:Te,audioJitter:Pe,audioLevel:Ae,audioPacketsLost:Be,audioPacketsLostRate:Ze,audioSamplingRate:st,audioSendLevel:Rt,muteState:ae,audioCumulativeDecodeTime:this.audioReliableBreak.decodeDuration,audioCumulativeBreakTime:this.audioReliableBreak.breakDuration,audioCumulativeBreakRate:this.audioReliableBreak.breakDuration/(this.audioReliableBreak.decodeDuration+this.audioReliableBreak.breakDuration||1)}),nackCount:At,pliCount:vt,totalRoundTripTime:Ft,currentRoundTripTime:Ct,peerToPeerDelay:Mt,peerToPeerPacketLostRate:(Gt||0)/255,sampleTimeWindow:li};if(e.videoCodecName!==void 0){var vi=e.audioCodecName,Lt=e.codecImplementationName,ui=e.googAvailableSendBandwidth;ti.video.googCodecName=e.videoCodecName,ti.audio.googCodecName=vi,ti.codecImplementationName=Lt,ti.googAvailableSendBandwidth=ui}this.currentQuality=ti},n.prototype.uploadPlayQuality=function(e,t){if(this.player.signal.isServerConnected){var i=t;if(this.qualityUploadLastTime==0||i-this.qualityUploadLastTime>=2e3){if(e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=i,e.video_break_duration=this.videoBreakReport.breakDuration,e.video_break_cancel_duration=this.videoBreakReport.breakCancelDuration,e.video_decode_time=this.videoBreakReport.decodeTime,this.videoBreakReport.breakCancelDuration=0,this.videoBreakReport.breakDuration=0,this.videoBreakReport.decodeTime=0,e.audio_break_duration=this.audioBreakReport.breakDuration,e.audio_break_cancel_duration=this.audioBreakReport.breakCancelDuration,e.audio_decode_time=this.audioBreakReport.decodeTime,this.audioBreakReport.breakCancelDuration=0,this.audioBreakReport.breakDuration=0,this.audioBreakReport.decodeTime=0,e.real_sampling_interval=i-this.lastSampleTime,!e.frameHeight||!e.frameWidth){var r=this.lastPlayStats.videoElem||Pa(this.player.playStream);r&&(e.frameHeight=r.videoHeight||0,e.frameWidth=r.videoWidth||0)}this.lastSampleTime=i,this.Oi.info("zc.p.upq.1 "+this.streamId+" upload"+JSON.stringify(e)),this.player.Ri.updateQuality(1,e),this.qualityUploadLastTime=i}}},n.prototype.getP2PNetStats=function(){var e=this;this.player.signal.getP2PNetStats((0,g.getSeq)(),this.sessionId,this.peerID,function(t,i,r){var s=r.p2p_rtt;e.p2pNetStats.p2pLostRate=r.p2p_lost_rate||0,e.p2pNetStats.p2pRTT=s||0},function(t){})},n.prototype.getTimerType=function(){this.timerType=this.qualityUpdateInterval===this.qualityUploadInterval?0:this.qualitySampleInterval===this.qualityUpdateInterval?1:2,this.Oi.info("zc.p.0.qgtt "+this.streamId+" timer type "+this.timerType+" "+this.qualitySampleInterval+" "+this.qualityUpdateInterval+" "+this.qualityUploadInterval)},n.prototype.setPlayQualityTimer=function(){var e=this;this.qualityTimer==null&&(this.Oi.info(qs+" "+this.streamId+" startTimer"),this.clearPlayQualityTimer(),this.getP2PNetStats(),this.qualityTimer=setInterval(function(){e.sampleTimes++;var t=e.player.peerConnection;if(t){var i=[t.getStats(null)];di()&&i.push(new Ge(function(r){try{var s=t.getStats(function(o){return r(o)},function(o){r(null)});wn(s.catch)&&s.catch(function(o){r(null)})}catch{r(null)}})),Promise.all(i).then(function(r){e.getPlayStats(r[0],r[1])}).catch(function(r){e.Oi.error(qs+" "+e.streamId+" getStats error "+r.toString())})}},this.qualitySampleInterval),this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:Date.now(),audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:this.lastPlayStats.paintedFrames,lastTimestamp:0,videoElem:this.lastPlayStats.videoElem})},n.prototype.clearPlayQualityTimer=function(){if(this.clearPlayQualityUpdateTimer(),this.qualityTimer!=null){clearInterval(this.qualityTimer),this.qualityTimer=null;var e=new Date().getTime();this.lastSampleTime=0,this.sampleTimes=0,this.totalQuality={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},df(this.videoBreak,this.videoBreakReport,this.videoReliableBreak,this.videoBreakThreshold,this.player.cameraStatus===0&&this.player.playMediaStatus.video,e),df(this.audioBreak,this.audioBreakReport,this.audioReliableBreak,this.audioBreakThreshold,this.player.micStatus===0&&this.player.playMediaStatus.audio,e)}this.poorQualityNum=0,this.lastPlayStats={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:0,lastTimestamp:0,videoElem:null}},n.prototype.setPlayQualityUpdateTimer=function(){var e=this;this.qualityUpdateTimer==null&&(this.Oi.info("zc.p.1.spqt.1 "+this.streamId+" called "+this.qualityUpdateInterval),this.clearPlayQualityUpdateTimer(),this.qualityUpdateTimer=setInterval(function(){e.player.onPlayQualityUpdate(e.streamId,e.currentQuality)},this.qualityUpdateInterval))},n.prototype.clearPlayQualityUpdateTimer=function(){this.Oi.info("zc.p.1.cpqt.1 "+this.streamId+" called "+!!this.qualityUpdateTimer),this.qualityUpdateTimer!=null&&(clearInterval(this.qualityUpdateTimer),this.qualityUpdateTimer=null)},n.prototype.checkProbe=function(e){var t,i,r=this.netQuality,s=this.lastPlayStats.time;if(r<=this.player.Ri.targetQuality?this.poorQualityNum++:this.poorQualityNum=0,r<=this.player.Ri.l3BadQualityScore&&this.player.Ri.handleQualityBad(this.streamId,this.player.resourceMode,tt.L3)?this.Oi.info(qs+"check cdn mode"):s>0&&this.poorQualityNum>=((i=(t=this.player)===null||t===void 0?void 0:t.Ri)===null||i===void 0?void 0:i.probeStartedNum)&&e>this.probeTime+this.probeInterval&&(this.Oi.info(qs+" netQuality "+r+" start net probe"),this.probeState=w.tryProbe,this.player.poorQualityRetryCnt++,this.player.Ri.startNetProbe(!1,this.player,this.player.gwNodeList),this.probeTime=e),r>this.player.Ri.l3BadQualityScore){var o=this.player.Ri.playerList[this.streamId];o?o.qualityBadCount=0:this.Oi.warn(qs+" ".concat(this.streamId," play info not exist.")),this.player.Ri.l3ProtocolBadTimestamp=0,this.player.Ri.lastHandleL3BadTimestamp=0}},n.prototype.startProbeTimeout=function(){var e=this;this.probeTimer=setTimeout(function(){e.Oi.error(an+" probe timeout"),e.player.playStateUpdateError(sr.error.fi)},this.probeTimeoutInterval)},n.prototype.stopProbeTimeout=function(){this.probeTimer&&(clearTimeout(this.probeTimer),this.probeTimer=null)},n}(),$m=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};function eg(n){var e,t=n,i=function(s){var o={m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"}]};function u(F,ee,ie){var ae=function(Pe){return String(Number(Pe))===Pe?Number(Pe):Pe},be=F.name&&F.names;F.push&&!ee[F.push]?ee[F.push]=[]:be&&!ee[F.name]&&(ee[F.name]={});var Te=F.push?{}:be?ee[F.name]:ee;(function(Pe,Ae,Be,Ze){if(Ze&&!Be)Ae[Ze]=ae(Pe[1]);else for(var st=0;st<Be.length;st+=1)Pe[st+1]!=null&&(Ae[Be[st]]=ae(Pe[st+1]))})(ie.match(F.reg),Te,F.names,F.name),F.push&&ee[F.push].push(Te)}var m=RegExp.prototype.test.bind(/^([a-z])=(.*)/),f=[],a={},S=a;return s.split(/(\r\n|\r|\n)/).filter(m).forEach(function(F){var ee=F[0],ie=F.slice(2);ee==="m"&&(f.push({rtp:[],fmtp:[]}),S=f[f.length-1]);for(var ae=0;ae<(o[ee]||[]).length;ae+=1){var be=o[ee][ae];if(be.reg&&be.reg.test(ie))return u(be,S,ie)}}),a.media=f,a}(n),r=[];return i.media.forEach(function(s){s.type==="video"&&s.fmtp.forEach(function(o){e="a=fmtp:"+o.payload+" "+o.config,o.config.indexOf("sps-pps-idr-in-keyframe")===-1&&r.indexOf(e)===-1&&r.push(e)})}),r.forEach(function(s){t=t.replace(new RegExp(s,"g"),s+";sps-pps-idr-in-keyframe=1")}),t}var tg=function(){function n(e,t){this.ac=e,this.Oi=t,this.useScript=!1,this.scriptNode=null,this.workletNode=null,this.bufferSize=4096}return n.prototype.setAudioFrameCallback=function(e,t,i,r){var s,o,u,m=this;this.Oi.info("zc.apdp.safc.0 ".concat(e.id," ").concat(t," ").concat(JSON.stringify(r)));var f=(r==null?void 0:r.frameSize)||this.bufferSize;if(t)if(this.srcNode||(this.srcNode=this.ac.createMediaStreamSource(e)),this.useScript)this.scriptNode||(this.scriptNode=this.ac.createScriptProcessor(f),this.scriptNode.onaudioprocess=function(a){for(var S=0;S<a.outputBuffer.numberOfChannels;S+=1)for(var F=a.outputBuffer.getChannelData(S),ee=0;ee<F.length;ee+=1)F[ee]=0;var ie=a.inputBuffer.numberOfChannels,ae=[];try{if(ie>0)for(var be=0;be<ie;be++){var Te=a.inputBuffer.getChannelData(be);ae.push(Te)}i&&i({channels:ae,channelCount:ie,sampleRate:a.inputBuffer.sampleRate})}catch(Pe){m.Oi.info("zc.apdp.safc.0 script fail ".concat(Pe.toString()))}},this.Oi.info("zc.apdp.safc.0 create scriptNode")),this.srcNode.connect(this.scriptNode),this.scriptNode.connect(this.ac.destination);else{if(!this.workletNode){try{this.workletNode=new AudioWorkletNode(this.ac,"audio-pcm-data-processor",{processorOptions:{bufferSize:f}})}catch(a){this.Oi.error("zc.apdp.safc.0 create worklet fail ".concat(a.toString()))}this.workletNode&&(this.workletNode.port.onmessage=function(a){if(a.data.type==="process")try{var S=a.data;i&&i({channels:S.channels,channelCount:S.channelCount,sampleRate:S.sampleRate})}catch{}},this.Oi.info("zc.apdp.safc.0 init worklet"))}this.workletNode&&this.srcNode.connect(this.workletNode),(s=this.workletNode)===null||s===void 0||s.connect(this.ac.destination)}else{try{this.workletNode&&((o=this.srcNode)===null||o===void 0||o.disconnect(this.workletNode)),this.scriptNode&&((u=this.srcNode)===null||u===void 0||u.disconnect(this.scriptNode))}catch(a){this.Oi.info("zc.apdp.safc.0 ".concat(JSON.stringify(a)))}this.srcNode=null}},n.prototype.replaceSource=function(e){var t,i;if(this.Oi.info("zc.apdp.rs.0 ".concat(e.id)),this.srcNode){var r=this.ac.createMediaStreamSource(e);this.workletNode&&((t=this.srcNode)===null||t===void 0||t.disconnect(this.workletNode),r.connect(this.workletNode)),this.scriptNode&&((i=this.srcNode)===null||i===void 0||i.disconnect(this.scriptNode),r.connect(this.scriptNode)),this.srcNode=null,this.srcNode=r}},n.prototype.destroy=function(){var e,t;this.Oi.info("zc.apdp.ds.0 call"),this.workletNode&&(this.workletNode.port.close(),(e=this.srcNode)===null||e===void 0||e.disconnect(this.workletNode),this.workletNode.disconnect(),this.Oi.info("zc.apdp.ds.0 destroy worklet")),this.scriptNode&&(this.scriptNode.onaudioprocess=null,(t=this.srcNode)===null||t===void 0||t.disconnect(this.scriptNode),this.scriptNode.disconnect(),this.Oi.info("zc.apdp.ds.0 close script processor")),this.workletNode=null,this.scriptNode=null,this.srcNode=null,this.Oi.info("zc.apdp.ds.0 end")},n}(),Yo=function(){return Yo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Yo.apply(this,arguments)},ta=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},ia=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Ro=sr,Co=Ro.event,Tr=Ro.error,Ir=ho,ic=Un;function ig(n){var e=0,t=0;return e=n[t++]<<24,e|=n[t++]<<16,e|=n[t++]<<8,e|=n[t++]}function rg(n,e){e===void 0&&(e=0);for(var t=n.length,i=[],r=0;r<t;)r>=e&&t-r>=3&&!n[r]&&!n[r+1]&&n[r+2]==3?(i.push(n[r++]),i.push(n[r++]),r++):i.push(n[r++]);var s=new Uint8Array(i);return{output:s,outLength:s.length}}var hf=Di.event,ng=Xe,og=function(){function n(e,t,i,r,s,o,u,m,f){var a,S=this;this.curCBState={state:"NO_PLAY",code:0},this._autoTcp=!0,this.hasSucceed=!1,this.rtcValidTime=0,this.l3ValidTime=0,this.cdnValidTime=0,this.cdnPlayTime=0,this.pulledTimeStamp=0,this.firstPulledTimeStamp=0,this.validPulledTime=0,this.rtcBrokenCnt=0,this.l3BrokenCnt=0,this.CDNBrokenCnt=0,this._state=M,this.lastState=M,this.candidateInfo=[],this.broadcasterStatus=xt.stop,this.isExternal=!1,this.reportSeq=NaN,this.parentSpanKey="",this.streamReportSeq=(0,g.getSeq)(),this.reportBeginTime=0,this.reportPlayingTime=0,this.reportPlayStateTime=0,this.streamInRoom=!0,this.playStartTime=0,this.streamRoomPushConsumed=0,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.probeNotRetryInfos=[],this.continuousFailCnt=0,this.playStateCount=0,this.isRePlay=!1,this.videoSizeCallback=!1,this.remoteStream=null,this.playStream=null,this.rtcViewer=null,this.playOption={},this.playMediaStatus={video:!0,audio:!0},this.closeSessionSignal=!1,this.stateNego=ve.stop,this.negoTimer=null,this.negoInterval=25e3,this.cameraStatus=0,this.micStatus=0,this.hasSentStreamStatus=!1,this.playEvent=!1,this.gotStreamStatus=!1,this.soundLevel=0,this.mic=null,this.beginTime=0,this.firstFrameTime=0,this.resourceMode=0,this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0,this.isPeer=!0,this.peerFailCount=0,this.isProbe=!1,this.probeType="audio",this.peerID=0,this.isRecvClientInfo=!1,this.videoCodec="",this.videoCodecTimes=0,this.answerSdpTime=0,this.streamConnectIP="",this.initPoster="",this.initVideoStyle="",this.firstPlay=!0,this.isProbeByDG=!1,this.useResourceTypes=[],this.tryidx=0,this._CDNPlayerClone=null,this.retryFailGwNodes=[],this.dispatchedGwNodes=[],this.rtcPlayCount=0,this.signalTime=0,this.stopReason="",this.isProbeDispatch=!1,this.pe=hf,this.streamNotFoundTime=0,this.pushCmdSeqMap=((a={}).MediaDescPush={seq:-1,time:0},a.StreamStatusNotifyPush={seq:-1,time:0},a.PlayEventPush={seq:-1,time:0},a.ClientInfoPush={seq:-1,time:0},a.NetQualityInfoPush={seq:-1,time:0},a.CandidateInfoPush={seq:-1,time:0},a),this.audioMuteState="0",this.videoMuteState="0",this.first_pkt=!0,this.next_sn=[],this.pkt_list=[],this.onDataChannelList=[],this.sideMediaConfig={isSEIStart:!1,unregisterSeiFilter:"",filterSize:0},this.cachedGwNodesMode=io.DiffReUse,this.iceDisconnectedMaxTime=15e3,this.zi=!1,this.netTimer=null,this.lostQualityTime=0,this.userID="",this.proxyVrs={lanIP:"",wanIP:"",intranet:!1},this._turnToTcp=!1,this.decodeVideoFrame=function(F,ee){var ie,ae;if(S.videoCodec==="VP8")ee.enqueue(F);else{for(var be=new DataView(F.data),Te=0,Pe=new Jh(be),Ae=0,Be=!1;Pe.NextNalu(Be);)if((Ae=31&be.getUint8(Pe.nalu_start+Pe.start_code_size))!=7&&Ae!=8&&Ae!=9){if(Ae!=6)break;var Ze=new Uint8Array(F.data).slice(Pe.nalu_start+Pe.start_code_size,Pe.nalu_start+Pe.start_code_size+Pe.nalu_size);S._i.seiConfig.emulationPreventionByte&&(Ze=rg(Ze).output),Te=1,Be=!0;for(var st=0;Ze[Te]===255;)st+=255,Te++;if((st+=Ze[Te++])===243||st===5||st===100){for(var Rt=0;Ze[Te]===255;)Rt+=255,Te++;if(Rt+=Ze[Te++],F.data.byteLength-Te<Rt)break;var At=new Uint8Array(4+Rt);switch(At[0]=0,At[1]=0,st){case 100:At[2]=3,At[3]=235;break;case 5:At[2]=3,At[3]=236;break;case 243:At[2]=3,At[3]=237}for(var vt=0;vt<Rt;vt++)At[4+vt-0]=Ze[Te++];var Ft=!1;if(st===243)Ft=!0;else if(st===5){var Ct=S.sideMediaConfig.unregisterSeiFilter;if(Ct){var Mt=At.slice(4,4+S.sideMediaConfig.filterSize),Gt=void 0,li=!0;if((Gt=typeof Ct=="string"?Ud(Ct):Ct).length===0)li=!1;else for(var kt=0;kt<Gt.length;kt++)if(Gt[kt]!==Mt[kt]){li=!1;break}Ft=li}else Ft=!0}Ft&&S._i.actionListener("playerRecvSEI",S.streamId,At)}else if(st===244){for(Rt=0;Ze[Te]===255;)Rt+=255,Te++;if(Rt+=Ze[Te++],F.data.byteLength-Te<Rt)break;var ti=parseInt(Rt/5+""),vi=Ze.slice(Te,Te+=Rt),Lt=[],ui=function(Fi){var Ni=5*Fi,ir=vi.slice(Ni,Ni+4),Rr=vi.slice(Ni+4,Ni+5),Oi=ig(ir),fr=Rr[0],jr=((ae=(ie=S.room.streamList)===null||ie===void 0?void 0:ie.find(function(Or){return Or.stream_nid===Oi}))===null||ae===void 0?void 0:ae.stream_id)||"";Lt.push({soundLevelID:Oi,value:fr,streamID:jr})};for(kt=0;kt<ti;kt++)ui(kt);var Jt=new Map(Lt.map(function(Fi){return[Fi.soundLevelID,Fi.value]})),ai=Lt.filter(function(Fi){return Fi.streamID}).map(function(Fi){return[Fi.streamID,Fi.value]}),Vi=new Map(ai);S._i.actionListener("mixerSoundLevelUpdate",Jt,S.streamId),Vi.size&&S._i.actionListener("autoMixerSoundLevelUpdate",Vi,S.streamId)}}ee.enqueue(F)}},this.decodeAudioFrame=function(F,ee){ee.enqueue(F)},this._eventHandler={seiMessage:function(F){var ee=F.data,ie=ee.streamID;if(ie===S.streamId)switch(ee.cmd){case"recvSEI":S._i.actionListener("playerRecvSEI",ie,new Uint8Array(ee.buffer));break;case"mixSoundLevel":S._handleMixSoundLevels(ee.soundLevelList)}}},this.soundMeterWorklet=null,this.streamId=e,this.Oi=t,this.signal=i,this.dataReport=r,this.Ri=u,this.ac=m,this._i=f,this.zi=this._i.isMiniSdp,this.qualityHandler=new Xm(s,o,this,this.Oi,this.dataReport,this._i),this.qualityHandler.onRecvMediaData=function(){S.streamNotFoundTime&&(S.streamNotFoundTime=0,S.Oi.info("zc.p.ormd.1 "+S.streamId+" reset streamNotFoundTime"))},this.resourceMode=this.ae("resource_mode"),this.initStreamReport()}return n.prototype.updateCBState=function(e){var t=this,i=Object.keys(e).some(function(r){return e[r]!==t.curCBState[r]});return i&&(this.curCBState=e),i},Object.defineProperty(n.prototype,"room",{get:function(){var e;return(e=this.Ri.playerList[this.streamId])===null||e===void 0?void 0:e.room},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"se",{get:function(){return this.state===G},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(e){this.qualityHandler.probeState=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"netQuality",{get:function(){return this.qualityHandler.netQuality},set:function(e){this.qualityHandler.netQuality=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastPlayStats",{get:function(){return this.qualityHandler.lastPlayStats},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"iceStateDisConnect",{get:function(){return[ve.iceClosed,ve.iceDisconnected,ve.iceFailed].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLastConnected",{get:function(){return this.lastState===G},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playStat",{get:function(){return this.qualityHandler.playStat},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"webrtcProtocol",{get:function(){return this.qualityHandler.webrtcProtocol},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ip",{get:function(){var e,t;return(t=(e=this.gwNode)===null||e===void 0?void 0:e.split(":"))===null||t===void 0?void 0:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"netProtocol",{get:function(){return this._turnToTcp?"tcp":this._autoTcp?this.webrtcProtocol:"udp"},enumerable:!1,configurable:!0}),n.prototype.createSEIWorker=function(){return this.Ri.createSEIWorker()},Object.defineProperty(n.prototype,"seiWorker",{get:function(){return this.Ri.seiWorker},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"he",{get:function(){return this._i.useNetAgent},enumerable:!1,configurable:!0}),n.prototype.ae=function(e,t){return t===void 0&&(t=!1),this._i.settingConfig.getSetting(e,t)},Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.netProbeToReDispatch=function(){this.isProbeDispatch=!0,this.playStateUpdateError(Tr.li)},n.prototype.initStreamReport=function(){this.reportSpan=this.ji.createSpan(It.I,{key:Co,par:this.streamId},{key:Ir.event,par:this.streamId},Ir.event,!0),this.playStartTime=this.reportBeginTime=new Date().getTime()},n.prototype.checkAutoTcp=function(){var e=Od();this.Oi.info("zc.p.1.cat ".concat(this.he," ").concat(e," ").concat(this.isPeer)),this._autoTcp=!!(this.he&&e&&this.isPeer)},n.prototype.startPlay=function(e,t,i){var r,s,o,u,m,f,a,S,F=this;if(this.Oi.info(an+" called ",e),this.playEvent=!1,this.signal&&this.signal.negoInterval&&(this.negoInterval=this.signal.negoInterval),e){if(this.checkAutoTcp(),this.state=k,this.getRemoteStreamSuc=t,this.playOption=i||{},this.playMediaStatus={video:this.playMediaStatus.video&&(this.playOption.video===void 0||!!this.playOption.video),audio:this.playMediaStatus.audio&&(this.playOption.audio===void 0||!!this.playOption.audio)},i&&i.videoCodec&&(this.playOption.videoCodec=i.videoCodec),i&&Li(i.isSEIStart)&&(this.sideMediaConfig.isSEIStart=i==null?void 0:i.isSEIStart),this.sideMediaConfig.isSEIStart){var ee=ka(),ie=(r=this.playOption)===null||r===void 0?void 0:r.videoCodec;(ie&&ie!=="H264"||!ee)&&(this.Oi.warn(an+" not use sei; support: ".concat(ee,", codec: ").concat(ie," ")),this.sideMediaConfig.isSEIStart=!1)}if(!((s=this._i.seiConfig)===null||s===void 0)&&s.unregisterSEIFilter){var ae=this.sideMediaConfig.unregisterSeiFilter=(o=this._i.seiConfig)===null||o===void 0?void 0:o.unregisterSEIFilter;this.sideMediaConfig.filterSize=Ud(ae).byteLength}(i==null?void 0:i.streamType)==null&&this._i.streamType!==void 0&&(this.playOption.streamType=this._i.streamType),this.ji.spanSetAttributes({key:Co,par:e},{video_layer:Ro.video_layer(this.playOption.streamType===2?-1:this.playOption.streamType||1)});var be=this.ae("play_video_codec",!0);be&&(this.Oi.info(an+" setting play_video_codec "+be),this.playOption.videoCodec=be);var Te=((u=this.playOption)===null||u===void 0?void 0:u.resourceMode)==Et.DG?1:0;if(this.ji.spanSetAttributes({key:(this.isRePlay?Pi:ic).event,par:this.streamId},{is_peer:ic.is_peer(this.isPeer)}),this.ji.spanSetAttributes({key:Co,par:this.streamId},{audio_activate:Ro.audio_activate(this.playOption.audio==1||this.playOption.audio!=0),video_activate:Ro.video_activate(this.playOption.video==1||this.playOption.video!=0),biz_product:Ro.biz_product(Te)}),this.reportSpan.setAttributes({room_id:Ir.room_id((f=(m=this.Ri.playerList[this.streamId])===null||m===void 0?void 0:m.room)===null||f===void 0?void 0:f.roomID),room_sid_string:Ir.room_sid_string((S=(a=this.Ri.playerList[this.streamId])===null||a===void 0?void 0:a.room)===null||S===void 0?void 0:S.roomSessionID)}),this.isPeer?this.createOffer({encodedInsertableStreams:this.sideMediaConfig.isSEIStart}):this.createSession(),!this.isProbe){var Pe=i==null?void 0:i.resourceMode,Ae=hf;(Pe===Et.L3||Pe===Et.DG&&this.playMode==tt.L3)&&(Ae=ng),this.Ri.playEventKeys[e]=Ae,this.pe=Ae}this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.negoTimer=setTimeout(function(){F.Oi.error(an+" waiting timeout"),F.playStateUpdateError(Tr.ai)},this.negoInterval),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.Oi.warn(an+" streamId is null")},n.prototype.onCreatePlaySessionSuccess=function(e){var t;return ta(this,void 0,void 0,function(){var i,r,s,o,u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct,Mt,Gt,li,kt,ti=this;return ia(this,function(vi){switch(vi.label){case 0:return this.Oi.info((i=Zc)+" "+this.streamId+" success"),this.setTurnTcp(),this.Ri.autoSwitchProtocol=this.ae("auto_to_tcp")||!1,r=this.ae("udp_max_fail_num"),!isNaN(r)&&(this.Ri.maxUdpFailNum=r),u=(s=this.Ri).maxUdpFailNum,m=s.udpFailNum,this.Oi.info(i+"  autoToTcp: ".concat(o=s.autoSwitchProtocol,", udpFailNum: ").concat(m,", maxUdpFailNum: ").concat(u,".")),o&&!this._turnToTcp&&m>=u&&(this.Oi.info(i+" switch to tcp."),this._turnToTcp=!0,this._autoTcp=!1),(f=this.ae("udp_or_tcp",!0))&&(this.Oi.info(i+" setting udp_or_tcp "+f),this._turnToTcp=f==="tcp"),a=[],S=void 0,F=this.proxyVrs.wanIP=(e.gw_nodes[0]||this.gwNode).split(":")[0],!this.Ri.isProxy||this.Ri.isLocalProxy?[3,2]:(ee=g.ZegoExpressWebRTM==null?void 0:g.ZegoExpressWebRTM.proxyCtrl,[4,Promise.all([ee.getTurnInfo(),ee.intranetCheck(Kh(F),void 0)])]);case 1:return ie=vi.sent(),be=ie[1],(ae=ie[0]).code?this.Oi.warn(i+" "+this.streamId+" use proxy failed."+JSON.stringify(ae)):(Pe=(Te=ae.data).password,Ae=Te.turn_ipv4,Be=Te.turn_port,Ze=Te.username,(st=Te.turn_internal_ipv4)&&(this.paramsExt.coturn_internal=st),Rt=uu(Ae),At="turn:".concat(Rt,":").concat(Be,"?transport=").concat(this._turnToTcp?"tcp":"udp"),this.Oi.info(i+" turn server: ".concat(At," ; intranet: ").concat(JSON.stringify((t=be==null?void 0:be.data)===null||t===void 0?void 0:t.intranet),"; turn internal ip: ").concat(uu(st))),S=[{credential:Pe,urls:[At],username:Ze}]),be.code?this.Oi.warn(i+" "+this.streamId+" use intranetCheck failed."+JSON.stringify(be)):this.proxyVrs.intranet=be.data.intranet||!1,[3,3];case 2:this.Ri.isLocalProxy&&this.Ri.turnServers?(S=(Ft=this.Ri.turnServers).map(function(Lt){return{credential:Lt.credential,urls:[Lt.url],username:Lt.username}}),this.Oi.info(i+" "+this.streamId+" use local proxy: "+JSON.stringify(Ft)),this.proxyVrs.intranet=!1):e.turn_server&&(vt=e.turn_server.split(";"),Ft=void 0,Ct=vt.filter(function(Lt){return Lt.indexOf("udp")>-1}),Mt=vt.filter(function(Lt){return Lt.indexOf("tcp")>-1}),Ft=this._turnToTcp?Mt.length>0?Mt:Ct.map(function(Lt){return Lt.replace("udp","tcp")}):Ct,this.Oi.info(i+" over tcp "+JSON.stringify(Ft)),a.push.apply(a,Ft)),vi.label=3;case 3:return e.stun_server&&a.push(e.stun_server),Gt={iceTransportPolicy:"all",iceServers:[{urls:a,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart},S&&(Gt.iceServers=S,Gt.iceTransportPolicy="relay",Gt.rtcpMuxPolicy="require"),this.Oi.info(i+" "+this.streamId+" username: "+(li=Gt.iceServers[0]).username+", credential: "+li.credential),this.createOffer(Gt),kt=performance.now(),this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(Lt,ui,Jt){return ta(ti,void 0,void 0,function(){return ia(this,function(ai){switch(ai.label){case 0:return this.compareSeqs("MediaDescPush",Lt)?[4,this.onRecvMediaDesc(Lt,ui,Jt)]:[2];case 1:return ai.sent(),[2]}})})}),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(Lt,ui,Jt){if(ti.compareSeqs("CandidateInfoPush",Lt))var ai=setTimeout(function(){ti.onRecvCandidateInfo(Lt,ui,Jt),clearTimeout(ai)},0)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(Lt,ui,Jt){if(kt){var ai=(performance.now()-kt).toFixed(0);kt=void 0,ti.Oi.info(i+" ".concat(ti.streamId,", cmd: CloseSessionPush, cost_time: ").concat(ai))}Jt.reason===32&&(ti.zi=!1,ti._i.zi=!1),ti.onRecvCloseSession(Lt,ui,Jt)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(Lt,ui,Jt){ti.onRecvResetSession(Lt,ui,Jt)}),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,function(Lt,ui,Jt){ti.compareSeqs("StreamStatusNotifyPush",Lt)&&(ti.gotStreamStatus=!0,ti.streamStatus=Jt,ti.statusSeq=Lt,ti.playStream&&ti.onRecvStreamStatus(Lt,Jt))}),this.signal.registerPushCallback("PlayEventPush",this.sessionId,function(Lt,ui,Jt){if(ti.compareSeqs("PlayEventPush",Lt)){if(kt){var ai=(performance.now()-kt).toFixed(0);ti.Oi.info(i+" ".concat(ti.streamId,", cmd: PlayEventPush, cost_time: ").concat(ai))}ti.onRecvPlayEvent(Lt,ui,Jt)}}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(Lt,ui,Jt){ti.compareSeqs("ClientInfoPush",Lt)&&ti.onRecvClientInfo(Lt,ui,Jt)}),this.signal.gw.registerPushCallback("net_quality_grade_push",this.sessionId,function(Lt,ui,Jt){ti.onRecvNetQualityGrade(Lt,ui,Jt)}),this.Oi.info(i+" "+this.streamId+" call success"),[2]}})})},n.prototype.compareSeqs=function(e,t){var i=this.pushCmdSeqMap[e],r=i.seq,s=i.time,o=performance.now();return r!==-1&&r>=t&&o-s<6e3?(this.Oi.warn("zc.p.cps.1"+" ".concat(this.streamId,", push ").concat(e,", seq ").concat(t," local ").concat(JSON.stringify(this.pushCmdSeqMap[e]))),!1):(this.pushCmdSeqMap[e]={seq:t,time:o},!0)},n.prototype.createOffer=function(e){var t=this,i=Zc;if(this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onicecandidate=function(u){t.onIceCandidate(u)},this.peerConnection.onsignalingstatechange=function(u){t.onConnectionStateChange(u)},this.peerConnection.oniceconnectionstatechange=function(u){t.onIceConnectionStateChange(u)},this.peerConnection.onconnectionstatechange=function(u){t.onPeerConnectionStateChange(u)},this.peerConnection.ontrack=function(u){t.onGotRemoteStream(u.streams[0],u.receiver)},this.Ri.isDataChannelEnabled&&(this.dataChannel=this.peerConnection.createDataChannel(this.streamId),this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=function(u){t.Oi.info(i+" "+t.streamId+" data channel open")},this.dataChannel.onmessage=function(u){if(t.Oi.info(i+" "+t.streamId+" data channel onmessage"),u.data instanceof Blob){var m=new FileReader,f={};m.readAsArrayBuffer(u.data),m.onload=function(){f.data=m.result,t.onReceivedDataChannel(f)}}else t.onReceivedDataChannel(u)}),this._i.customUa){var r=wn(this.peerConnection.addTransceiver);this.Oi.info(i+" "+this.streamId+" custom ua ios "+r),r&&(this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"}))}var s={offerToReceiveAudio:1,offerToReceiveVideo:1};this.isProbe?this.probeType==="audio"&&(s.offerToReceiveVideo=0):(this.playOption&&this.playOption.video===!1&&(s.offerToReceiveVideo=0),this.playOption&&this.playOption.audio===!1&&(s.offerToReceiveAudio=0)),this.Oi.info(i+" "+this.streamId+" createOffer: "+JSON.stringify(s));var o=this.getSpan(Mp,this.parentSpanKey);this.peerConnection.createOffer(s).then(function(u){if(o&&(o.setAttributes({sdp:xp(u.sdp),is_mini:Up(t.zi)}),o.end()),!t.checkProbeSDP(u.sdp||""))return t.resetPlay(),void t.startPlay(t.streamId,t.getRemoteStreamSuc,t.playOption);t.onCreateOfferSuccess(u)},function(u){t.Oi.error(i+" "+t.streamId+" create offer error "+u.toString()),o&&t.ji.setError(o,{code:Tr.Rt.code,message:u.toString()}),t.playStateUpdateError(Tr.Rt,!0)})},n.prototype.checkProbeSDP=function(e){return this.Oi.info(Zc+" is probe "+this.isProbe),!this.isProbe||!(this.probeType==="audio"&&!e.includes("m=audio"))||(this.Oi.warn(Zc+" no audio"),this.probeType="all",!1)},n.prototype.createSession=function(e){var t,i,r,s=this;this.sessionSeq=(0,g.getSeq)();var o=this.streamId;this.Ri.testEnvironment==1&&(o="zegotest-"+this.Ri.appid+"-"+this.streamId),this.Ri.gwNode&&(this.gwNode=this.Ri.gwNode);var u=this.ae("gw_nodes");u&&In(u)&&u.length>0&&(this.Oi.info(an+" setting "+JSON.stringify(u)),this.gwNodeList=u,this.gwNode=this.gwNodeList[0]||this.gwNode),this.setTurnTcp();var m=this.ae("udp_or_tcp",!0);m&&(this.Oi.info(_n+" setting udp_or_tcp "+m),this._turnToTcp=m==="tcp"),this._turnToTcp&&(this.isPeer=!1,this._autoTcp=!1);var f=((i=(t=this.Ri.publisherList[this.streamId])===null||t===void 0?void 0:t.room)===null||i===void 0?void 0:i.roomID)||((r=this._i.roomList[0])===null||r===void 0?void 0:r.roomID),a=this.getSessionParams(f),S=a.params,F=a.paramsExt;this.paramsExt=F;var ee=Ac;if(this.isPeer){var ie=this.getSpan(Ac.event,this.parentSpanKey),ae=this.ae("l3_play_buffer_ms"),be=new Date().getTime();this.signal.createSessionWithSdp({seq:this.sessionSeq,type:this.isProbe?2:1,mode:0,streamId:o,strAuthParam:this.playOption&&this.playOption.streamParams||"",sdp:e.sdp,serverHost:this.gwNode,playBufLevel:[Et.L3,Et.DG].includes(this.resourceMode)?ae:void 0,params:S,paramsExt:F,roomID:f,geo:{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},player:this},function(Pe,Ae,Be){return ta(s,void 0,void 0,function(){var Ze;return ia(this,function(st){return Ze=new Date().getTime(),this.Oi.info(an+" create session time "+(Ze-be)),ie&&(ie.setAttributes({webrtc_sid:Ae,sdp:ee.sdp(Be.sdp),gw_nodes:ee.gw_nodes(Be.gw_nodes),gw_nodes_ttl:ee.gw_nodes(Be.gw_nodes_ttl),gw_version:ee.gw_version(Be.gw_version)}),ie.end()),this.stateNego!==ve.iceConnected&&this.getSpan($u,this.parentSpanKey,"",!0),this.ji.spanSetAttributes({key:Co,par:this.streamId},{gw_version:Ro.gw_version(Be.gw_version)}),this.handleCreateSessionWithSdpResp(Pe,Ae,Be),[2]})})},function(Pe,Ae){if(s.sessionSeq==Ae){var Be=Pe==1?Tr.Ct:Tr.Nt;ie&&(ie.setAttributes({try_cnt:s.peerFailCount}),s.ji.setError(ie,Be)),s.playStateUpdateError(Be)}else s.Oi.warn(an+" seq is not match.")})}else{var Te=this.getSpan(Ac.event,this.parentSpanKey);this.signal.createSession(this.sessionSeq,1,0,o,this.playOption&&this.playOption.streamParams,this.gwNode,S,f,{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},function(Pe,Ae,Be){return ta(s,void 0,void 0,function(){return ia(this,function(Ze){return Te&&(Te.setAttributes({webrtc_sid:Ac.webrtc_sid(Ae),sdp:ee.sdp(Be.sdp),is_mini:ee.is_mini(this.zi),gw_nodes:ee.gw_nodes(Be.gw_nodes),gw_nodes_ttl:ee.gw_nodes(Be.gw_nodes_ttl),gw_version:ee.gw_version(Be.gw_version)}),Te.end(),this.ji.spanSetAttributes({key:Co,par:this.streamId},{gw_version:Ro.gw_version(Be.gw_version)})),this.handleCreateSessionResp(Pe,Ae,Be),[2]})})},function(Pe,Ae){if(s.sessionSeq==Ae){var Be=Pe==1?Tr.Ct:Tr.Nt;Te&&s.ji.setError(Te,Be),s.playStateUpdateError(Be)}else s.Oi.warn(an+" seq is not match.")})}this.state=j,this.Oi.info(an+" "+this.streamId+" called success"),this.stateNego=ve.start},n.prototype.getSessionParams=function(e){var t="",i=[],r={},s=this._i.seiConfig.SEIPass;if(Li(s)){var o=s?1:0;this.he?r.sei_filter_pass=o:i.push("zgseipass="+o)}return this.he&&(r.auto_switch_turn_type=this._i.browser==="firefox"?2:1),this.zi&&!this.he&&i.push("sdp_fmt_type=1"),this.resourceMode===2&&(r.client_class_type=1),qi(this.playOption.streamType)&&(this.he?r.video_stream_type=this.playOption.streamType:i.push("video_stream_type="+this.playOption.streamType)),this._i.idName&&i.push("zguid="+this._i.idName),e&&i.push("zgrid="+e),this.Ri.isProxy&&(this._i.useNetAgent?r.zg_proxy=1:i.push("zg_proxy=1")),i.length>0&&(t=i.join("&")),{params:t,paramsExt:r}},n.prototype.setGwNodes=function(e,t){var i;if(this.Oi.info("zc.p.1.sgn "+this.streamId+" "+JSON.stringify(e==null?void 0:e.gw_nodes)+" "+JSON.stringify(this.retryFailGwNodes)),((i=e.gw_nodes)===null||i===void 0?void 0:i.length)>0){var r=Dd(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(r,e.gw_nodes_ttl)}},n.prototype.resetGwNodes=function(){this.Oi.info("zc.p.1.rgn "+this.streamId),this.gwNode="",this.gwNodeList=[],this.gwNodesTTL=0},n.prototype.handleDispatchedGwNodes=function(e,t){if(this.Oi.info("zc.p.1.hdgn "+this.streamId+" "+JSON.stringify(e)),Array.isArray(e)){this.gwNodeList=e.length>0?e:this.gwNodeList,this.gwNode=e.length>0?this.gwNodeList[0]:this.gwNode;var i=t===0?60:t;this.gwNodesTTL=i?new Date().getTime()+1e3*i:this.gwNodesTTL,e.length>0&&this.Ri.updateCachedGwNodesList(this,!1,e,i)}},n.prototype.dispatchGwNodes=function(e,t){var i,r=this.streamId;this.Ri.testEnvironment==1&&(r="zegotest-"+this.Ri.appid+"-"+this.streamId),(i=this.signal)===null||i===void 0||i.dispatchGwNodes((0,g.getSeq)(),1,r,{type:this.Ri.geo.type,areaList:this.Ri.geo.areaList},function(s,o,u){e&&e(u)},function(s,o){t&&t(s)})},n.prototype.handleCreateSessionResp=function(e,t,i){var r=i.turn_server,s=r.split("?")[0]&&r.split("?")[0].slice(5),o=this.Ri.server.split("?"),u=o[1]&&o[1].slice(2);if(this.ji.spanSetAttributes({key:this.parentSpanKey,par:this.streamId},{webrtc_sid:i.session_id,url:"webrtc://".concat(s,"/").concat(u,"/").concat(this.streamId)}),this.Oi.info(an+" "+this.streamId+" sessionId:"+i.session_id),this.sessionSeq==e){this.resetPushCmdSeqMap();var m=i.client_ip||i.clientip;m&&(this._i.clientIP=m);var f=0,a=new Date().getTime();if(this.reportBeginTime&&(this.Oi.info(fs+" "+this.streamId+" create signal time "+(f=a-this.reportBeginTime)),this.signalTime=f),this.answerSdpTime=a,i.result!==0){if(this.Oi.error(an+" "+this.streamId+" create error"),(i==null?void 0:i.result)===1021)return void this.playStateUpdateError(Re,!0);this.playStateUpdateError(Tr.Nt)}else this.sessionId=i.session_id,this.sessionToken=i.session_token,this.setGwNodes(i,!1),this.onCreatePlaySessionSuccess(i)}else this.Oi.error(an+" seq is not match.")},n.prototype.handleCreateSessionWithSdpResp=function(e,t,i){var r=this;if(this.Oi.info(fs+" sessionId:"+t),this.sessionSeq==e){this.resetPushCmdSeqMap();var s=i.client_ip||i.clientip;s&&(this._i.clientIP=s);var o=0,u=new Date().getTime();if(this.reportBeginTime&&(this.Oi.info(fs+" "+this.streamId+" create signal time "+(o=u-this.reportBeginTime)),this.signalTime=o),this.answerSdpTime=u,i.result!==0){if(i.result===110&&(this.zi=!1,this._i.zi=!1),this.Oi.error(fs+" create session failed "+i.result),(i==null?void 0:i.result)===1021)return void this.playStateUpdateError(Re,!0);if(this.he&&(i==null?void 0:i.result)===1004&&this.checkTryEmptyStreamTimeout())return void this.playStateUpdateError(Tr.ri,!0);this.playStateUpdateError(Tr.Nt)}else{this.sessionId=t,this.sessionToken=i.session_token,this.Oi.info(fs+" create session success ",this.streamId),this.setGwNodes(i,!1);var m=performance.now();this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(f,a,S){if(m){var F=(performance.now()-m).toFixed(0);m=void 0,r.Oi.info(fs+" ".concat(r.streamId,", cmd: CloseSessionPush, cost_time: ").concat(F))}r.onRecvCloseSession(f,a,S)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(f,a,S){r.onRecvResetSession(f,a,S)}),this.signal.registerPushCallback("StreamStatusNotifyPush",this.sessionId,function(f,a,S){r.compareSeqs("StreamStatusNotifyPush",f)&&(r.gotStreamStatus=!0,r.streamStatus=S,r.statusSeq=f,r.playStream&&r.onRecvStreamStatus(f,S))}),this.signal.registerPushCallback("PlayEventPush",this.sessionId,function(f,a,S){if(r.compareSeqs("PlayEventPush",f)){if(m){var F=(performance.now()-m).toFixed(0);m=void 0,r.Oi.info(an+" ".concat(r.streamId,", cmd: PlayEventPush, cost_time: ").concat(F))}r.onRecvPlayEvent(f,a,S)}}),this.signal.registerPushCallback("ClientInfoPush",this.sessionId,function(f,a,S){r.compareSeqs("ClientInfoPush",f)&&r.onRecvClientInfo(f,a,S)}),this.signal.registerPushCallback("NetQualityProbeRsp",this.sessionId,function(f,a,S){r.onRecvPlayEvent(f,a,S)}),this.signal.registerPushCallback("NetQualityInfoPush",this.sessionId,function(f,a,S){r.compareSeqs("NetQualityInfoPush",f)&&r.onRecvNetQualityInfo(f,a,S)}),this.signal.gw.registerPushCallback("net_quality_grade_push",this.sessionId,function(f,a,S){r.onRecvNetQualityGrade(f,a,S)}),this.signal.gw.registerPushCallback("codec_error_notify",this.sessionId,function(f,a,S){r.signal.gw.sendGWAck(a,r.peerID,"codec_error_notify_ack",9);var F=S.codec_error_notify,ee=F.error_type;if(ee!==0){var ie=F.media_type?"video":"audio";r.Oi.warn(dh+" ".concat(r.streamId," ").concat(ie," codec error: ").concat(JSON.stringify(F),",  codec: ").concat(r.videoCodec)),ee===1&&(r.Oi.warn(dh+" ".concat(r.streamId," remove ").concat(ie," track.")),r.isProbe||r.state!==G||r.onPlayStateUpdate(R,r.streamId,{code:si,message:"browser dose not support current ".concat(ie," codec")},!0))}}),this._autoTcp&&(this.Oi.info(an+" ".concat(this.streamId,", fully auto tcp")),this.setConfiguration(i.sdp,i.params_ext),this.setLocalSdp(this.localDesc)),this.de(i.sdp,void 0,i.params_ext)}}else this.Oi.error(fs+" seq is not match.")},n.prototype.setCandidate=function(e){var t,i=this;if(this.Oi.info(Yc+" ".concat(this.streamId,", set candidate ").concat(JSON.stringify(e))),e){var r=e.candidate,s=e.sdpMid,o=e.sdpMLineIndex;r&&(this.Oi.info(Yc+" ".concat(this.streamId,", addIceCandidate")),(t=this.peerConnection)===null||t===void 0||t.addIceCandidate(new RTCIceCandidate({sdpMid:s,sdpMLineIndex:o,candidate:r})).then(function(){i.Oi.info(Yc+" ".concat(i.streamId,", add can suc"))}).catch(function(u){i.Oi.info(Yc+" ".concat(i.streamId,", add can fail, ").concat(u.message))}))}},n.prototype.onCreateOfferSuccess=function(e){this.Oi.info(Kc+" "+this.streamId+" localSdp1 "+e.sdp.substr(0,e.sdp.length/2)),this.Oi.info(Kc+" "+this.streamId+" localSdp2 "+e.sdp.substr(e.sdp.length/2)),e.sdp=e.sdp.replace(/sendrecv/g,"recvonly"),e.sdp=e.sdp.replace(/useinbandfec=/,"stereo=1;useinbandfec=");var t=e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?e.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)[0]:null;if(t){var i=t.replace(/recvonly/,"sendrecv");e.sdp=e.sdp.replace(t,i)}if(e.sdp=eg(e.sdp),e.sdp=function(r){var s=r.split(`\r
`),o=new Map;s.forEach(function(a,S){if(/^a=rtcp-fb:/.test(a)&&s[S+1]&&!/^a=rtcp-fb:/.test(s[S+1])){var F=a.match(/^a=rtcp-fb:\d+/);F&&o.set(S+1,F[0]+" rrtr")}});for(var u=Array.from(o),m=0;m<u.length;m++){var f=$m([],u[m],!0);s.splice(f[0]+m,0,f[1])}return s.join(`\r
`)}(e.sdp),this.playOption.videoCodec&&(e.sdp=xc.getSDPByVideDecodeType(e.sdp,this.playOption.videoCodec)),this._autoTcp)return this.localDesc=e,void this.createSession(e);this.setLocalSdp(e)},n.prototype.setLocalSdp=function(e){var t=this;this.Oi.info(Kc+" "+this.streamId+" set local sdp");var i=this.getSpan(Bp,this.parentSpanKey);i&&i.setAttributes({sdp:zp(e.sdp),is_mini:Fp(this.zi)}),this.peerConnection.setLocalDescription(e).then(function(){i&&i.end(),t.onSetLocalDescriptionSuccess(e)},function(r){t.Oi.error(Kc+" "+t.streamId+" set error "+r.toString()),i&&t.ji.setError(i,{code:Tr._t.code,message:r.toString()}),t.playStateUpdateError(Tr._t,!0)})},n.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;if(this.Oi.info(Fs+" "+this.streamId+" success"),this.isPeer)return this._autoTcp?void this.Oi.info(Fs+" "+this.streamId+" fully auto tcp"):void this.createSession(e);var i={sdp:e.sdp,paramsExt:this.paramsExt};this.resourceMode==2&&(i.min_play_buf_level_ms=500),this.answerSeq=(0,g.getSeq)();var r=this.getSpan(Gp,this.parentSpanKey);this.signal.sendMediaDesc(this,this.answerSeq,this.sessionId,0,i,function(s,o,u){t.Oi.info(Fs+" "+t.streamId+" sendMediaDesc resp"),r&&(r.setAttributes({webrtc_sid:Wp(o),sdp:i.sdp}),r.end()),t.answerSeq==s&&t.sessionId==o?(t.Oi.info(Fs+" "+t.streamId+" send success stateNego:waiterAnswer"),t.stateNego=ve.waiterAnswer,t.state=Z,bi(u==null?void 0:u.sdp)&&(u!=null&&u.sdp)&&t.de(u.sdp,!0)):t.Oi.error(Fs+" "+t.streamId+" seq or sessionId is not equal "+t.answerSeq+" "+s,0+t.sessionId+" "+o)},function(s,o){t.Oi.error(Fs+" "+t.streamId+" failed to send "+s),r&&t.ji.setError(r,{code:Tr.Mt.code,message:s.toString()}),t.playStateUpdateError(Tr.Mt)}),this.state=K},n.prototype.onRecvMediaDesc=function(e,t,i){return ta(this,void 0,void 0,function(){var r,s,o,u;return ia(this,function(m){switch(m.label){case 0:if(this.Oi.info(_n+" "+this.streamId+" received ",i),r=i.sdp,this.Oi.info("".concat(_n," ").concat(this.streamId," rSdp:").concat(r.length," ").concat(this.zi)),!this.zi||!r)return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.signal.webrtcCenterSvr.parseRecSdp(r,!0,this)];case 2:return s=m.sent(),[3,4];case 3:return o=m.sent(),this.Oi.warn(_n+" "+this.streamId+" parse sdp err "+JSON.stringify(o)),[2,this.playStateUpdateError(Ro.error.Vt)];case 4:return s=s||i.sdp,(u=this.getSpan(Qp,this.parentSpanKey))&&(u.setAttributes({sdp:Zp(s),is_mini:Kp(this.zi)}),u.end()),this.stateNego=ve.waitingCandidate,this.Oi.info(_n+" "+this.streamId+" received stateNego:waitingCandidate"),this.state!==Z?(this.Oi.error(_n+" "+this.streamId+" current state "+this.state+" not allowed"),[2]):(this.signal.sendMediaDescAck(e,this.sessionId,0),this.de(s),[2])}})})},n.prototype.de=function(e,t,i){var r,s=this;t===void 0&&(t=!1);var o={type:"answer",sdp:e,toJSON:function(){}},u=this.getSpan(Hp,this.parentSpanKey);this.setTurnTcp(),this.Ri.autoSwitchProtocol=this.ae("auto_to_tcp")||!1;var m=this.ae("udp_max_fail_num");!isNaN(m)&&(this.Ri.maxUdpFailNum=m);var f=this.Ri,a=f.autoSwitchProtocol,S=f.maxUdpFailNum,F=f.udpFailNum;this.Oi.info(_n+"  autoToTcp: ".concat(a,", udpFailNum: ").concat(F,", maxUdpFailNum: ").concat(S,".")),a&&!this._turnToTcp&&F>=S&&(this.Oi.info(_n+" switch to tcp."),this._turnToTcp=!0,this._autoTcp=!1);var ee=this.ae("udp_or_tcp",!0);if(ee&&(this.Oi.info(_n+" setting udp_or_tcp "+ee),this._turnToTcp=ee==="tcp"),this._turnToTcp&&!this.Ri.isProxy&&this._i.browser!=="firefox"&&((r=o.sdp.match(/candidate.*/g))===null||r===void 0||r.forEach(function(At){var vt=At.replace(/udp/,"tcp");vt.includes(" tcptype ")||(vt=vt.replace(" typ host "," typ host tcptype passive ")),o.sdp=o.sdp.replace(At,vt)})),this.Ri.isProxy){var ie=_n,ae=o.sdp,be=Bc(ae),Te=be[0],Pe=be[1],Ae=ae.match(/a=mid:[^(\n|\r)]+/g);if(Pe&&Ae)if(this.proxyVrs.intranet)setTimeout(function(){Pe.forEach(function(At,vt){var Ft,Ct={sdpMLineIndex:vt,candidate:At.replace(Te[vt].ip,s.proxyVrs.wanIP).replace("a=",""),sdpMid:Ae[vt].replace("a=mid:","")};s.Oi.info(ie+"  add wan candidate:"+JSON.stringify(Ct)),(Ft=s.peerConnection)===null||Ft===void 0||Ft.addIceCandidate(new RTCIceCandidate(Ct))})},1e3);else{var Be=this.proxyVrs.wanIP;this.Oi.info(ie+"  change candidate ip from lan to wan: "+Be);for(var Ze=0;Ze<Pe.length;Ze++){var st=Pe[Ze],Rt=st.replace(Te[Ze].ip,Be);o.sdp=ae.replace(st,Rt)}}else this.Oi.warn(ie+" candidate not found")}this.Oi.info(_n+" "+this.streamId+" remoteSdp ",o.sdp),u&&u.setAttributes({sdp:qp(o.sdp),webrtc_sid:Vp(this.sessionId),is_mini:jp(this.zi)}),this.peerConnection.setRemoteDescription(new RTCSessionDescription(o)).then(function(){u&&u.end(),s.Oi.info(_n+" "+s.streamId+" set success")},function(At){s.Oi.error(_n+" "+s.streamId+" set remote error "+At.toString()),u&&(u.setAttributes({error:Tr.xt.code,message:At.toString()}),u.end());var vt=!0;s.zi&&(vt=!1,s.zi=!1),s.playStateUpdateError(Tr.xt,vt)}),this.state=J,t&&e.indexOf("candidate")>-1&&(this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[],this.state=A),this._autoTcp&&this.setCandidate(i),this.Oi.info(_n+" "+this.streamId+" call success")},n.prototype.setConfiguration=function(e,t){var i,r=this.getIceServers(e);this.Oi.info("zc.p.1.scg "+this.streamId+" ".concat(JSON.stringify(r)," ").concat(JSON.stringify(t))),r.length>0&&t&&((i=this.peerConnection)===null||i===void 0||i.setConfiguration({iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:r,username:t.turn_username,credential:t.turn_auth_key}],encodedInsertableStreams:this.sideMediaConfig.isSEIStart}))},n.prototype.getIceServers=function(e){var t=Bc(e)[0];if(t.length>0){var i=t[0].ip;return["turn:".concat(i,":3478?transport=udp"),"turns:".concat(i,":443?transport=tcp"),"turn:".concat(i,":3478?transport=tcp")]}return[]},n.prototype.onRecvCandidateInfo=function(e,t,i){var r=this;this.Oi.info(Hs+" "+this.streamId+" received ");var s=this.getSpan(Xp,this.parentSpanKey);if(s&&(s.setAttributes({candidate_info:$p(i.infos)}),s.end()),this.state==J){this.signal.sendCandidateInfoAck(e,this.sessionId,0),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[];for(var o=0;o<i.infos.length;o++){var u={sdpMid:i.infos[o].sdpMid,sdpMLineIndex:i.infos[o].sdpMLineIndex,candidate:i.infos[o].candidate};this.Oi.info(Hs+" "+this.streamId+" candidate "+u.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(u)).then(function(){r.Oi.debug(Hs+" "+r.streamId+" add success")},function(f){r.Oi.error(Hs+" "+r.streamId+" add error "+f.toString()),r.playStateUpdateError(Tr.Bt,!0)})}this.state=D;var m=this.getSpan($u,this.parentSpanKey,"",!0);m==null||m.setAttributes({webrtc_sid:this.sessionId}),this.Oi.info(Hs+" "+this.streamId+" call success")}else this.Oi.warn(Hs+" "+this.streamId+" current state "+this.state+" not allowed")},n.prototype.onRecvPlayEvent=function(e,t,i){if(this.Oi.info(sh+" "+this.streamId+" received"),!this.isProbe){var r=this.ji.createSpan(It.H,{key:Co,par:this.streamId},{key:""},Ep);r.setAttributes({event_state:Tp(i.event),webrtc_sid:t}),r.end()}if(this.playEvent===!0&&i.event==0){this.Oi.info(sh+" "+this.streamId+" retry: "+this.streamId);var s=this.streamId,o=this.playOption;this.signal.sendCloseSession((0,g.getSeq)(),this.sessionId,1),this.resetPlay(),this.startPlay(s,this.getRemoteStreamSuc,o)}else this.playEvent=!0},n.prototype.onRecvClientInfo=function(e,t,i){this._i.clientIP!==i.clientip&&this.Oi.info("zc.p.orci.1.1 client ip changed "+this._i.clientIP+" "+i.clientip),this.signal.sendClientInfoAck(e,this.sessionId,0),this._i.clientIP=i.clientip,this.peerID=i.peer_id,this.streamConnectIP=i.clientip,this._i.isMultiOuter=this.isMultiOuter(),this.isProbe&&this.stateNego==ve.iceConnected&&this.signal.sendNetProbe((0,g.getSeq)(),this.sessionId,this.peerID,function(){},function(){}),this.isRecvClientInfo=!0},n.prototype.onRecvNetQualityInfo=function(e,t,i){this.Oi.info(lh+" call"),this.qualityHandler.stopProbeTimeout();var r=0,s=i.lossrate,o=i.rtt;(this.peerID!==i.peer_id&&!this.isProbeByDG||Yi(s)||Yi(o))&&(this.Oi.info(lh+" local peerID:"+this.peerID+" remote peerID:"+i.peer_id+" lossrate:"+s+" rtt:"+o),r=1),this.signal.sendNetQualityInfoPushAck((0,g.getSeq)(),this.sessionId,this.peerID,r),r==0&&qi(s)&&qi(o)?(this.isProbeByDG=!1,this.onCalNetQualityResult(0,Oa(o,s))):this.onCalNetQualityResult(1)},n.prototype.onRecvNetQualityGrade=function(e,t,i){var r,s,o=this,u=i.net_quality_grade_push;this.userID=this.userID||((s=(r=this.Ri.playerList[this.streamId])===null||r===void 0?void 0:r.room.streamList.find(function(m){return m.stream_id==o.streamId}))===null||s===void 0?void 0:s.id_name),this.Oi.info("zc.s.nqga call: "+t),this.signal.gw.sendGWAck(this.sessionId,this.peerID,"net_quality_grade_ack",7),this.userID&&(this._i.actionListener("networkQuality",this.userID,u==null?void 0:u.tx_quality,u==null?void 0:u.rx_quality),!this.netTimer&&this.startPollNetworkQuality(),this.lostQualityTime=0)},n.prototype.onIceCandidate=function(e){var t=this;if(this.Oi.info(Jc+" "+this.streamId+" called"),e.candidate!=null){this.Oi.info(Jc+" "+this.streamId+" candidate "+e.candidate.candidate+" state "+this.state+" autotcp "+this._autoTcp);var i=function(r){t.sendCandidateInfo([{candidate:r.candidate.candidate,sdpMid:r.candidate.sdpMid,sdpMLineIndex:r.candidate.sdpMLineIndex}])};this._autoTcp?i(e):this.state<D||this.state==M?(this.Oi.info(Jc+" "+this.streamId+" cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})):(this.Oi.info(Jc+" "+this.streamId+" send"),i(e))}},n.prototype.onConnectionStateChange=function(e){this.Oi.info("zc.p.ocsc.1 "+this.streamId+" called "+e.target.signalingState),this.state!=M&&this.peerConnection!=null&&e.target.signalingState==="closed"&&(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.stateNego=ve.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState))},n.prototype.onIceConnectionStateChange=function(e){var t,i=this;if(this.state!=M&&this.peerConnection!=null){this.Oi.info(ps+" "+this.streamId+" stateChanged "+this.peerConnection.iceConnectionState);var r=this.getSpan(vd,this.parentSpanKey,this.pe);if(r&&r.setAttributes({ice_state:yd(this.peerConnection.iceConnectionState)}),this.peerConnection.iceConnectionState==="connected"){if(this.stateNego=ve.iceConnected,this.isProbe&&this.isPeer&&(this.isRecvClientInfo||this.isProbeByDG))return this.signal.sendNetProbe((0,g.getSeq)(),this.sessionId,this.peerID,function(){},function(){}),void(this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null));if(this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),!this.isProbe&&this.reportBeginTime){var s=new Date().getTime()-this.reportBeginTime;this.reportSpan.setAttributes({play_begin_time:Ir.play_begin_time(s)}),this.reportBeginTime=0}if(this.ji.spanEnd({key:$u,par:this.streamId},{webrtc_sid:this.sessionId}),this.answerSdpTime){var o=new Date().getTime()-this.answerSdpTime;this.Oi.info(ps+" "+this.streamId+" ice time "+o)}var u=(t=this.Ri.playerList[this.streamId])===null||t===void 0?void 0:t.retryStreamHandler;if(u==null||u.getTryTime(this,!0),!this.isProbe&&this.state!=G){this.onPlayStateUpdate(R,this.streamId,{code:0,message:""},!0),this.getRemoteStreamSuc&&this.getRemoteStreamSuc(this.playOption.resourceMode==Et.DG&&this.firstPlay?null:this.playStream);var m=this.playMediaStatus,f=m.video,a=m.audio,S=this.Ri.playModule;if(S){var F=[void 0,!0].includes(this.playOption.video),ee=[void 0,!0].includes(this.playOption.audio);F&&!f&&S.mutePlayStream(this.streamId,"video",!f).then(function(Te){i.Oi.info(ps+" mute video: ".concat(Te))}),ee&&!a&&S.mutePlayStream(this.streamId,"audio",!a).then(function(Te){i.Oi.info(ps+" mute audio: ".concat(Te))})}}this.state=G,this.hasSucceed=!0;var ie=this.isRePlay?Pi:ic;for(var ae in this.ji.spanEnd({key:ie.event,par:this.streamId},{signal_consume:ic.signal_consume(this.signalTime),is_peer:ic.is_peer(this.isPeer)}),this.playStateCount++,this.continuousFailCnt=0,this.reportPlayStateTime=Date.now(),this.isProbeDispatch=!1,this.Ri.publisherList)if(this.Ri.publisherList[ae].publisher.state==le&&this.broadcasterStatus==xt.stop){this.signal&&this.signal.sendBroadcasterStatus((0,g.getSeq)(),this.sessionId,1),this.broadcasterStatus=xt.start;break}if(!this.isProbe){this.qualityHandler.setPlayQualityTimer();var be=this.ae("probe_started_num");!isNaN(be)&&(this.Ri.probeStartedNum=be)}this.Oi.info(ps+" "+this.streamId+" stateNego:iceConnected"),this.isPeer&&(this.peerFailCount=0),!this.hasConnectionChange()&&this.recordFirstFrameData(),this._turnToTcp||(this.Ri.udpFailNum=0)}else this.peerConnection.iceConnectionState==="closed"?(r==null||r.end(),this.stateNego=ve.iceClosed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="failed"?(r==null||r.end(),this.stateNego=ve.iceFailed,this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):this.peerConnection.iceConnectionState==="disconnected"&&(r==null||r.end(),this.stateNego=ve.iceDisconnected,this.Oi.warn(ps+" ice disconnected"),this.iceDisconnectedTimer||(this.iceDisconnectedTimer=setTimeout(function(){i.checkPlayConnectionFailedState("disconnected")},this.iceDisconnectedMaxTime)))}},n.prototype.onPeerConnectionStateChange=function(e){this.Oi.info("zc.p.opcsc.1 "+this.streamId+" connectionChanged "+this.peerConnection.connectionState),this.peerConnection.connectionState==="connected"&&this.recordFirstFrameData()},n.prototype.hasConnectionChange=function(){var e,t,i=this._i.browser;return!(i==="firefox"||i==="chrome"&&(e=0,t=(Qt().toLowerCase().match(/chrome\/([\d.]+)/)||[])[1],t&&(e=parseInt(t.split(",")[0])),e<72))},n.prototype.checkPlayConnectionFailedState=function(e){this.Oi.info(ps+"  state "+this.state+" connectionState "+e),this.playStateUpdateError(Tr.Tt)},n.prototype.resetPlay=function(){this.Oi.info("zc.p.rp.1 "+this.streamId+" call"),this.state=M,this.playEvent=!1,this.isRecvClientInfo=!1,this.peerConnection!=null&&(this.peerConnection.close(),this.peerConnection=null),this.localDesc&&(this.localDesc=null);var e=this.seiWorker;e&&e.removeEventListener("message",this._eventHandler.seiMessage),this.negoTimer!=null&&(clearTimeout(this.negoTimer),this.negoTimer=null),this.iceDisconnectedTimer!=null&&(clearTimeout(this.iceDisconnectedTimer),this.iceDisconnectedTimer=null),this.stopVideocTimer(),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId),this.signal.unregisterPushCallback("SessionResetPush",this.sessionId),this.signal.unregisterPushCallback("PlayEventPush",this.sessionId),this.signal.unregisterPushCallback("ClientInfoPush",this.sessionId),this.signal.unregisterPushCallback("NetQualityProbeRsp",this.sessionId),this.signal.unregisterPushCallback("NetQualityInfoPush",this.sessionId),this.signal.gw.unregisterPushCallback("net_quality_grade_push",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.stopSoundLevel()},n.prototype.onRecvResetSession=function(e,t,i){this.Oi.info(ah+" "+this.streamId+" received ");var r=this.getSpan(gd,this.pe);if(r&&r.end(),t==this.sessionId){this.signal.sendCloseSessionAck(e,this.sessionId,0);var s=JSON.parse(JSON.stringify(Tr.oi));this.negoTimer&&clearTimeout(this.negoTimer),this.playStateUpdateError(s)}else this.Oi.info(ah+" "+this.streamId+" cannot find session")},n.prototype.onRecvCloseSession=function(e,t,i){var r=this;this.Oi.info(ch+" "+this.streamId+" "+JSON.stringify(i)),this.ji.spanSetAttributes({key:this.pe,par:this.streamId},{denied_info:Di.denied_info(i.err_info),stop_reason:Di.stop_reason("DenyStop")}),this.signal.sendCloseSessionAck(e,this.sessionId,0);var s=i.err_info?JSON.parse(i.err_info.toLowerCase()):{},o=s.action?s.action:null,u=1*i.reason,m=JSON.parse(JSON.stringify((s==null?void 0:s.err)===1004?Tr.ri:Tr.oi));m.message+=" reason:".concat(u," ").concat(o?" action:"+o:""," ").concat(s!=null&&s.err?" err:"+(s==null?void 0:s.err):""),m.message+=";".concat(Yh(u,o,s==null?void 0:s.err)),this.negoTimer&&clearTimeout(this.negoTimer);var f=!([4,8,10,11,12,14,24,26,27,28,32].includes(u)||[2,3,4,5,6].includes(o));(s==null?void 0:s.err)===1004&&this.checkTryEmptyStreamTimeout()&&(f=!0);var a=!1;if(!this._turnToTcp){if([8,10].includes(u)||[18,15].includes(u)&&o===2&&[3001,3002].includes(s.err)){this.Ri.udpFailNum++;var S=this.Ri;S.autoSwitchProtocol&&S.udpFailNum>=S.maxUdpFailNum&&(this.isPeer=!1,this.Ri.setIsPeer(!1),a=!0)}else this._turnToTcp||(this.Ri.udpFailNum=0);var F=this.gwNodeList.findIndex(function(ie){return ie==r.gwNode})===this.gwNodeList.length-1,ee=[3001,3002,3003,3004,3005,3006,3007,3008].includes(s.err);F&&ee&&(this.Oi.info(ch+" "+this.streamId+" switch tcp by all fail"),this._i.turnToTcp=!0,this._autoTcp=!1,this.isPeer=!1,this.Ri.setIsPeer(!1))}this.playStateUpdateError(m,f,s,a)},n.prototype.checkTryEmptyStreamTimeout=function(){var e=Date.now(),t=this._i.streamRetryTime,i=this.streamNotFoundTime;if(i){if(e-i>1e3*t)return this.streamNotFoundTime=0,this.Oi.info("zc.p.ctest.1 "+this.streamId+" stream not found. retry over time: ".concat(t,"s")),!0}else this.streamNotFoundTime=e;return!1},n.prototype.onRecvStreamStatus=function(e,t,i){var r=this;i===void 0&&(i=!1),this.Oi.info(js+" "+this.streamId+" call"),this.Oi.info("".concat(js," ").concat(this.streamId," status camera_status: ").concat(t.camera_status," mic_status: ").concat(t.mic_status)),this.signal.sendStreamStatusNotifyAck(e,this.sessionId,0),this.reportFirstFrameData(t.camera_status,t.mic_status),(!this.hasSentStreamStatus||this.cameraStatus!==t.camera_status)&&this.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(t.camera_status),t.camera_status),(!this.hasSentStreamStatus||this.micStatus!==t.mic_status)&&this.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(t.mic_status),t.mic_status),this.hasSentStreamStatus=!0;var s=this.cameraStatus!==t.camera_status;if(this.cameraStatus=t.camera_status,this.micStatus=t.mic_status,this.videoMuteState=t.camera_status===0?"0":"1",this.audioMuteState=t.mic_status===0?"0":"1",Li(this.playOption.video))this.Oi.info(js+" "+this.streamId+" has set video option, ignore stream status");else{var o=this.playStream,u=this.rtcViewer;if(t.camera_status!==0&&t.camera_status!==20)u?s&&(this.Oi.info(js+" "+this.streamId+" viewer clear last frame"),u.checkIfClearLastFrame()):o.getVideoTracks().forEach(function(F){F.enabled=!1,r.Ri.trackUtils.stopTrack(F),o.removeTrack(F)});else if(o.getVideoTracks().length===0){var m=this.remoteStream.clone().getVideoTracks()[0];o.addTrack(m),u&&u.setVideo(m,this._i.browser==="safari")}if(this._i.browser==="safari"&&i)for(var f=Tt.querySelectorAll("video, audio"),a=0;a<f.length;a++){var S=f[a];S.srcObject===this.playStream&&(this.Oi.info(js+" track changed. rerender stream"),S.srcObject=this.playStream)}}this.Oi.info(js+" "+this.streamId+" call success")},n.prototype.onGotRemoteStream=function(e,t){var i=this;if(this.Oi.info(qa+" "+this.streamId+" called "+e),e){var r=this.playOption.playoutDelayHint;if(!isNaN(r)&&t)try{this.Oi.info(qa+" "+this.streamId+" playoutDelayHint: ".concat(r,", origin delay: ").concat(t.playoutDelayHint)),t.playoutDelayHint=r,this.Oi.info(qa+" "+this.streamId+" playoutDelayHint result: ".concat(t.playoutDelayHint))}catch(o){this.Oi.warn(qa+" set playoutDelayHint failed. ".concat(o))}if(this.sideMediaConfig.isSEIStart&&ka()&&(t.track.kind==="video"?this.createVideoReceiverTransform(t):t.track.kind==="audio"&&this.createAudioReceiverTransform(t)),this.playStream){this.playStream.getTracks().forEach(function(o){return i.playStream.removeTrack(o)});var s=this.rtcViewer;e.clone().getTracks().forEach(function(o){return ta(i,void 0,void 0,function(){return ia(this,function(u){return this.playStream.addTrack(o),s&&s.setTrack(o.kind==="video",o,this._i.browser==="safari"),o.kind==="audio"&&this.be(),[2]})})})}else this.playStream=e.clone();this.audioMuteState=this.playStream.getAudioTracks().length>0?"0":"1",this.videoMuteState=this.playStream.getVideoTracks().length>0?"0":"1",this.remoteStream=e,this.getVideoCodec(),this.gotStreamStatus&&this.onRecvStreamStatus(this.statusSeq,this.streamStatus,!0),this.Ri.soundLevelDelegate&&!this.isProbe&&this.startSoundLevel()}else this.Oi.warn(qa+" "+this.streamId+" remote stream is empty")},n.prototype.createVideoReceiverTransform=function(e){var t=this.createSEIWorker();t&&t.addEventListener("message",this._eventHandler.seiMessage);var i=this.sideMediaConfig,r={cmd:"decode",streamID:this.streamId,emulationPreventionByte:this._i.seiConfig.emulationPreventionByte,codec:this.videoCodec,unregisterSeiFilter:i.unregisterSeiFilter,filterSize:i.filterSize};if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(t,r);else{var s=e.createEncodedStreams(),o=s.readable,u=s.writable,m=!t;try{t&&t.postMessage(Yo({readable:o,writable:u},r),[o,u])}catch{m=!0}if(m){this.Oi.warn("zc.cvrt The current browser version is too low.");var f=new TransformStream({transform:this.decodeVideoFrame});this.receiverStreams=s,o.pipeThrough(f).pipeTo(u),this.Ri.handleSeiRollBack()}}},n.prototype._handleMixSoundLevels=function(e){var t=this,i=e.map(function(u){var m,f,a=((f=(m=t.room.streamList)===null||m===void 0?void 0:m.find(function(S){return S.stream_nid===u.soundLevelID}))===null||f===void 0?void 0:f.stream_id)||"";return Yo(Yo({},u),{streamID:a})}),r=new Map(i.map(function(u){return[u.soundLevelID,u.value]})),s=i.filter(function(u){return u.streamID}).map(function(u){return[u.streamID,u.value]}),o=new Map(s);this._i.actionListener("mixerSoundLevelUpdate",r,this.streamId),o.size&&this._i.actionListener("autoMixerSoundLevelUpdate",o,this.streamId)},n.prototype.createAudioReceiverTransform=function(e){var t={cmd:"decode",streamID:this.streamId,kind:"audio"},i=this.createSEIWorker();if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(i,t);else{var r=e.createEncodedStreams(),s=r.readable,o=r.writable,u=!i;try{i&&i.postMessage(Yo({readable:s,writable:o},t),[s,o])}catch{u=!0}if(u){this.Oi.warn("zc.cart The current browser version is too low.");var m=new TransformStream({transform:this.decodeAudioFrame});s.pipeThrough(m).pipeTo(o),this.Ri.handleSeiRollBack()}}},n.prototype.sendCandidateInfo=function(e){var t=this;if(this.Oi.info(ja+" "+this.streamId+" called"),!(e=e.filter(function(r){return!!(r&&r.candidate.indexOf("relay")>0)}))||e.length<1)this.Oi.info(ja+" "+this.streamId+" cancelled");else{var i=this.getSpan(Jp,this.parentSpanKey);i&&i.setAttributes({candidate_info:Yp(e)}),this.stateNego!==ve.iceConnected&&(this.stateNego=ve.sendCandidate),this.Oi.info(ja+" "+this.streamId+" stateNego:sendCandidate"),this.signal.sendCandidateInfo((0,g.getSeq)(),this.sessionId,e,function(r,s,o){t.Oi.debug(ja+" "+t.streamId+" send success"),i&&i.end()},function(r,s){t.Oi.error(ja+" "+t.streamId+" failed to send: "+r.toString()),i&&t.ji.setError(i,{code:Tr.Bt.code,message:r.toString()}),t.playStateUpdateError(Tr.Bt)})}},n.prototype.shouldSendCloseSession=function(){return this.state!=ft&&this.state!=j},n.prototype.resetPushCmdSeqMap=function(){var e;this.pushCmdSeqMap=((e={}).MediaDescPush={seq:-1,time:0},e.StreamStatusNotifyPush={seq:-1,time:0},e.PlayEventPush={seq:-1,time:0},e.ClientInfoPush={seq:-1,time:0},e.NetQualityInfoPush={seq:-1,time:0},e.CandidateInfoPush={seq:-1,time:0},e)},n.prototype.playStateUpdateError=function(e,t,i,r){if(this.Oi.error(uh+" call ",this.streamId,JSON.stringify(e)),!this.isProbe){var s=this.ji.createSpan(It.H,{key:Co,par:this.streamId},{key:""},Gu);s.setAttributes({error:e==null?void 0:e.code,message:e==null?void 0:e.message}),s.end()}this.isProbe?this.onCalNetQualityResult(1):this.streamId&&this.onPlayStateUpdate(at,this.streamId,e,t,i,r),this.Oi.info(uh+" "+this.streamId+" ended")},n.prototype.getCameraMicStatus=function(e){return e==0?"OPEN":"MUTE"},n.prototype.onPlayStateUpdate=function(e,t,i,r,s,o){},n.prototype.onPlayQualityUpdate=function(e,t){},n.prototype.onRemoteCameraStatusUpdate=function(e,t,i){},n.prototype.onRemoteMicStatusUpdate=function(e,t,i){},n.prototype.getStopReason=function(e){var t="StopPlay";return e&&e.code&&(e.code===1104031?t="ReachMaxAVRetryTime":t="StopPlay"),t},n.prototype.stopPlay=function(e,t){var i,r,s,o,u;this.Oi.info("zc.p.1.sp.1 "+this.streamId+" called");var m=this.getStopReason(e);for(var f in this.Ri.publisherList)if(this.Ri.publisherList[f].publisher.state==le&&this.broadcasterStatus==xt.start){this.signal&&this.signal.sendBroadcasterStatus((0,g.getSeq)(),this.sessionId,0),this.broadcasterStatus=xt.stop;break}this.sessionId&&!this.closeSessionSignal&&(this.signal.sendCloseSession((0,g.getSeq)(),this.sessionId,0),this.resetPushCmdSeqMap());var a=this.se?0:this.lastFailTimeLen;if(!this.isProbe){var S=Date.now()-this.reportPlayStateTime;[0,2].includes(this.resourceMode)&&this.reportSpan.setAttributes({play_state_time:Ir.play_state_time(S||0)}),this.uploadRTCPlayStats(),this.ji.spanEnd({key:this.pe,par:this.streamId},{tryidx:Di.tryidx(this.rtcPlayCount),url:Di.url((r=this.signal)===null||r===void 0?void 0:r.server),ip:Di.ip(this==null?void 0:this.ip),resource_type:Di.resource_type(ls(this.resourceMode||0)),protocol:Di.protocol("webrtc"),dispatch_external_ip:Di.dispatch_external_ip(this._i.clientIP),net_protocol:Di.net_protocol(this.netProtocol),stop_reason:Di.stop_reason(m),try_time:Di.try_time(a)}),(e==null?void 0:e.code)==Tr.di.code&&this.uploadPlayEvent(e),this.seiWorker&&this.seiWorker.postMessage({cmd:"clear",type:"pull",streamID:this.streamId})}if(this.stopPollNetworkQuality(),this.resetPlay(),this.ye(),!this.isProbe&&!t){var F=this.qualityHandler,ee=F.videoBreak,ie=F.audioBreak,ae=this.resourceMode===2?"l3":"rtc",be=((i={})["".concat(ae,"_a_break_time")]=ie.cumulativeBreakDuration,i["".concat(ae,"_a_decode_time")]=ie.cumulativeDecodeDuration,i["".concat(ae,"_v_break_time")]=ee.cumulativeBreakDuration,i["".concat(ae,"_v_decode_time")]=ee.cumulativeDecodeDuration,i.audio_cumulative_break_time=ie.cumulativeBreakDuration,i.audio_cumulative_decode_time=ie.cumulativeDecodeDuration,i.video_cumulative_break_time=ee.cumulativeBreakDuration,i.video_cumulative_decode_time=ee.cumulativeDecodeDuration,i),Te=Date.now(),Pe=this.firstPulledTimeStamp;this.updateValidTime(e);var Ae=(e==null?void 0:e.code)!==0&&this.latestPlayErrCode?this.latestPlayErrCode:0;this.reportSpan.setAttributes(Yo(Yo({biz_product:((s=this.playOption)===null||s===void 0?void 0:s.resourceMode)==Et.DG?1:0,webrtc_sid:Ir.webrtc_sid(this.sessionId),max_retry_interval:Ir.max_retry_interval(this._i.streamRetryTime),probe_ip_cnt:Ir.probe_ip_cnt(this.probeIpCnt),valid_probe_ip_cnt:Ir.valid_probe_ip_cnt(this.validProbeIpCnt),poor_quality_retry_cnt:Ir.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:Ir.probe_not_trigger_retry_info(this.probeNotRetryInfos.length>0?this.probeNotRetryInfos:void 0),fail_cnt:Ir.fail_cnt(Math.max(this.rtcPlayCount-1,0)),continuous_fail_cnt:Ir.continuous_fail_cnt(Math.max(this.continuousFailCnt-1,0)),try_time:Ir.try_time(a),use_resource_type:Ir.use_resource_type(this.resourceMode===Et.DG?this.useResourceTypes:[ls(this.resourceMode)]),use_na:ho.use_na(this.he?1:0),play_state_cnt:Ir.first_frame_time(this.playStateCount),protocol:Ir.protocol("webrtc"),dispatch_external_ip:Ir.dispatch_external_ip(this._i.clientIP),w:Ir.w((o=this.playStat)===null||o===void 0?void 0:o.frameWidth),h:Ir.h((u=this.playStat)===null||u===void 0?void 0:u.frameHeight),stop_reason:Ir.stop_reason(m),error:(e==null?void 0:e.code)||0,last_error:Ae,message:(e==null?void 0:e.message)||"",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0,l3_a_break_time:0,l3_a_decode_time:0,l3_v_break_time:0,l3_v_decode_time:0,rtc_a_break_time:0,rtc_a_decode_time:0,rtc_v_break_time:0,rtc_v_decode_time:0},be),{total_d:Pe?Te-Pe:0,valid_d:this.rtcValidTime+this.l3ValidTime+this.cdnValidTime,tempbroken_cnt:this.rtcBrokenCnt+this.l3BrokenCnt+this.CDNBrokenCnt})),this.reportSpan.end()}this.Ri.stopToReport(1),this.retryFailGwNodes=[],this.isRePlay=!1,this.hasSucceed=!1,this.rtcPlayCount=0,this.isProbeDispatch=!1,this.probeIpCnt=0,this.validProbeIpCnt=0,this.poorQualityRetryCnt=0,this.continuousFailCnt=0;var Be=this.rtcViewer;Be&&Be.destroy()},n.prototype.uploadPlayEvent=function(e){this.ji.spanEnd({key:Co,par:this.streamId},{error:e.code,message:e.message},!0)},n.prototype.onDisconnect=function(e){this.Oi.info("zc.p.od.1 "+this.streamId+" call"),this.playStateUpdateError(e||Tr.Pt,!!e)},n.prototype.startSoundLevel=function(){var e,t=this;if(this.Oi.info(Tl+" call streamID: "+this.streamId),!this.isProbe)if(this.remoteStream&&this.remoteStream.getAudioTracks().length!=0){(e=this.soundMeterWorklet)===null||e===void 0||e.destroy(),this.mic=null;var i=this.Ri.getCloudSoundInterval();try{var r=this,s=this.Ri.createSoundLevel(this.ac,this.remoteStream,this.Ri.soundLevelInterval,i,function(u){r.soundLevel=t.micStatus===0?100*u:0}),o=s.mic;this.soundMeterWorklet=s.soundMeter,this.mic=o}catch(u){this.Oi.error(Tl+" get sound level failed "+u)}}else this.Oi.info(Tl+" "+this.streamId+" remote stream no found")},n.prototype.stopSoundLevel=function(){var e;this.Oi.info("zc.p.ssl.1.1 call streamID: "+this.streamId),(e=this.soundMeterWorklet)===null||e===void 0||e.destroy(),this.mic=null},n.prototype.onCalNetQualityResult=function(e,t){},n.prototype.onReceivedDataChannel=function(e){var t,i,r=this,s=new Uint8Array(e.data,0,10),o=e.data.byteLength-10,u=new Uint8Array(e.data,10,o);if(s[0]==1){var m=s[1],f=s[2]<<8|s[3],a=s[4]<<8|s[5],S=new Date().getTime();if(this.first_pkt&&(this.next_sn[0]=f==a?f:a,this.first_pkt=!1),this.pkt_list.push({sn:f,sn0:a,recv_ts:S,flags:m,payload_len:o,payloadArray:u}),this.pkt_list.sort(this.compareShort),f==this.next_sn[0]){var F=this.pkt_list.filter(function(Pe){return Pe.sn0==a});if(F.sort(this.compareShort),F.find(function(Pe){return 1&Pe.flags})!=null&&F.length==this.compareShort(f,a)+1){for(var ee=0,ie=new ArrayBuffer(65536),ae=0;ae<F.length;ae++)new Uint8Array(ie).set(F[ae].payloadArray,ee),ee+=F[ae].payload_len;(t=this.onDataChannelList)===null||t===void 0||t.forEach(function(Pe){Pe(ie,ee,r.streamId)}),this.pkt_list=[],this.first_pkt=!0}this.next_sn[0]++}else for(var be=function(){var Pe=Te.pkt_list.filter(function(Rt){return Rt.sn0==r.pkt_list[0].sn0});if(Pe.sort(Te.compareShort),Pe.find(function(Rt){return 1&Rt.flags})!=null&&Pe.length==Te.compareShort(Pe[Pe.length-1].sn,Pe[0].sn0)+1){for(var Ae=0,Be=new ArrayBuffer(65536),Ze=0;Ze<Pe.length;Ze++)new Uint8Array(Be).set(Pe[Ze].payloadArray,Ae),Ae+=Pe[Ze].payload_len;Te.next_sn[0]=Pe[0].sn0+Pe.length,(i=Te.onDataChannelList)===null||i===void 0||i.forEach(function(Rt){Rt(Be,Ae,r.streamId)}),Te.pkt_list=[],Te.first_pkt=!0}else if(S-Pe[0].ts<4e3){var st=Pe[0].sn0;for(Ze=0;Ze<Pe.length&&st==Pe[Ze].sn;Ze++)st++;return Te.next_sn[0]=st,"break"}for(Ze=0;Ze<Pe.length;Ze++)Te.pkt_list.shift()},Te=this;this.pkt_list.length>0&&be()!=="break";);}},n.prototype.compareShort=function(e,t){var i=new Uint16Array(1);i[0]=e-t;var r=new Int16Array(1);return r[0]=i[0],r[0]},n.prototype.uploadRTCPlayStats=function(){var e,t,i,r,s,o,u,m,f,a,S,F,ee,ie,ae;this.lastPlayStats.time&&this.ji.spanSetAttributes({key:this.pe,par:this.streamId},{lsttime:Di.lsttime(parseInt(this.lastPlayStats.time)),total_stat:Xi.total_stat({afc:(e=this.lastPlayStats)===null||e===void 0?void 0:e.audioPacketsReceived,vfc:(t=this.lastPlayStats)===null||t===void 0?void 0:t.framesReceived,tfc:((i=this.lastPlayStats)===null||i===void 0?void 0:i.audioPacketsReceived)+((r=this.lastPlayStats)===null||r===void 0?void 0:r.framesReceived),vb:(s=this.lastPlayStats)===null||s===void 0?void 0:s.videoBytesReceived,ab:(o=this.lastPlayStats)===null||o===void 0?void 0:o.audioBytesReceived,tb:((u=this.lastPlayStats)===null||u===void 0?void 0:u.videoBytesReceived)+((m=this.lastPlayStats)===null||m===void 0?void 0:m.audioBytesReceived),rtp_rtt:Math.round(1e3*((f=this.playStat)===null||f===void 0?void 0:f.currentRoundTripTime))||0,w:(a=this.playStat)===null||a===void 0?void 0:a.frameWidth,rtp_plr:(S=this.playStat)===null||S===void 0?void 0:S.videoPacketsLostRate,h:(F=this.playStat)===null||F===void 0?void 0:F.frameHeight,rtp_bw:!((ee=this.playStat)===null||ee===void 0)&&ee.googAvailableSendBandwidth?(ie=this.playStat)===null||ie===void 0?void 0:ie.googAvailableSendBandwidth:void 0,p2p_delay:(ae=this.playStat)===null||ae===void 0?void 0:ae.peerToPeerDelay})})},n.prototype.getVideoCodec=function(){var e=this;this.peerConnection&&(this.peerConnection.getStats().then(function(t){t.forEach(function(i){if(i.type==="inbound-rtp"&&i.kind==="video"&&i.codecId){var r=t.get(i.codecId).mimeType.toLowerCase();if(r.indexOf("h264")>-1)e.videoCodec="H264";else if(r.indexOf("vp8")>-1){e.videoCodec="VP8",e.sideMediaConfig.isSEIStart&&e.Oi.error("zc.p.gvc video code VP8 is not support SEI");var s=e.seiWorker;s&&s.postMessage({cmd:"updatePlayer",codec:e.videoCodec,streamID:e.streamId})}}})}),this.videoCodecTimes++,this.videoCodec||this.videoCodecTimes>=5)?this.stopVideocTimer():this.videoCodecTimer=setTimeout(function(){e.getVideoCodec()},100)},n.prototype.stopVideocTimer=function(){this.videoCodecTimer&&(clearTimeout(this.videoCodecTimer),this.videoCodecTimer=null)},n.prototype.getViewer=function(){return this.playStream&&!this.rtcViewer&&(this.rtcViewer=new kl(this.playStream,this,{clearLastFrame:this._i.engineConfig.playClearLastFrame})),this.rtcViewer},n.prototype.isMultiOuter=function(){return!(!this._i.accessClientIp||!this.streamConnectIP||this._i.accessClientIp===this.streamConnectIP)},n.prototype.isCustomCdn=function(){return!1},n.prototype.getSpan=function(e,t,i,r){return r===void 0&&(r=!1),this.isProbe?null:Ad(this.ji,It.H,this.streamId,e,t,i,r)},n.prototype.setTurnTcp=function(){this._turnToTcp=this._i.turnToTcp,this._i.turnOverTcpOnly!==void 0&&(this._turnToTcp=this._i.turnOverTcpOnly)},n.prototype.recordFirstFrameData=function(){var e;this.isProbe||this.firstFrameTime!=0||(this.firstFrameTime=new Date().getTime()-this.beginTime,this.reportSpan.setAttributes({first_frame_time:Ir.first_frame_time(this.firstFrameTime),fft_video:Ir.fft_video(this.firstFrameTime),fft_audio:Ir.fft_audio(this.firstFrameTime),biz_product:go.biz_product(((e=this.playOption)===null||e===void 0?void 0:e.resourceMode)==Et.DG?1:0)}),this.firstVideoSpan=this.firstFrameSpan("video"),this.firstAudioSpan=this.firstFrameSpan("audio"))},n.prototype.reportFirstFrameData=function(e,t){e===0&&this.firstVideoSpan&&(this.firstVideoSpan.setAttributes({dev_changed:go.dev_changed(this.cameraStatus!==0)}),this.firstVideoSpan.spanReport(),this.firstVideoSpan=null),t===0&&this.firstAudioSpan&&(this.firstAudioSpan.setAttributes({dev_changed:wa.dev_changed(this.micStatus!==0)}),this.firstAudioSpan.spanReport(),this.firstAudioSpan=null)},n.prototype.firstFrameSpan=function(e){var t,i=e==="video"?go:wa,r=this.ji.createSpan(It.H,{key:Co,par:this.streamId},{key:""},i.event),s=this.streamInRoom?2:this.streamRoomPushConsumed===0?0:1,o=new Date().getTime()-this.answerSdpTime;return r.setAttributes({webrtc_sid:i.webrtc_sid(this.sessionId),resource_type:i.resource_type(ls(this.resourceMode)),fft_consumed:i.fft_consumed(this.firstFrameTime),protocol:i.protocol("webrtc"),push_consumed:i.push_consumed(this.streamRoomPushConsumed),prepare_recv_consumed:i.prepare_recv_consumed(this.signalTime),connected_consumed:i.connected_consumed(o),reliability:i.reliability(s),biz_product:i.biz_product(((t=this.playOption)===null||t===void 0?void 0:t.resourceMode)==Et.DG?1:0)}),r==null||r.end(!1),r},n.prototype.setStreamAdd=function(){this.streamInRoom||this.streamRoomPushConsumed!==0||this.state===D||(this.streamRoomPushConsumed=new Date().getTime()-this.playStartTime)},n.prototype.startPollNetworkQuality=function(){var e=this;clearTimeout(this.netTimer),this.netTimer=setTimeout(function(){e.lostQualityTime++;var t=Ee.Unknown,i=Ee.Unknown;e.userID&&e.lostQualityTime>1&&(e.lostQualityTime>3&&(t=Ee.Die,i=Ee.Die),e._i.actionListener("networkQuality",e.userID,t,i)),e.startPollNetworkQuality()},3e3)},n.prototype.stopPollNetworkQuality=function(){clearTimeout(this.netTimer),this.lostQualityTime=0},n.prototype.setAudioFrameCallback=function(e,t){this.playStream?(this.we||(this.we=new tg(this.ac,this.Oi)),this.we.setAudioFrameCallback(this.playStream,e!==null,function(i){e&&e(i)},t)):this.Oi.warn("zc.p.safc.0 "+this.streamId+" no play stream")},n.prototype.ye=function(){this.we&&(this.we.destroy(),this.we=null)},n.prototype.be=function(){var e;(e=this.we)===null||e===void 0||e.replaceSource(this.playStream)},n.prototype.updateValidTime=function(e){if(this.pulledTimeStamp){var t=0;e!=null&&e.code&&e.code!==Wn.code&&(t=1);var i=Date.now(),r=this,s=r.resourceMode,o=r.playMode,u=i-r.pulledTimeStamp;s==Et.RTC?(this.rtcValidTime=u,this.rtcBrokenCnt+=t):(s==Et.L3||s==Et.DG&&o==tt.L3)&&(this.l3ValidTime=u,this.l3BrokenCnt+=t),this.pulledTimeStamp=0}},n.prototype.updateCDNValidTime=function(){this.cdnPlayTime&&(this.cdnValidTime+=Date.now()-this.cdnPlayTime,this.cdnPlayTime=0)},n}(),ff=function(){function n(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1}return n.prototype.init=function(e,t,i,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,qi(e)&&e<3600&&(this.RETRY_MAX_TIME=e),qi(t)&&(this.RETRY_START_TIME_INTERVAL=t),qi(i)&&(this.RETRY_CONTINUE_COUNT=i),qi(r)&&(this.RETRY_MAX_TIME_INTERVAL=r)},n.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.retryNetCount=0},n.prototype.isRetrying=function(){return this.retryTimer!==null||this.startRetryTimer!==null||this.maxTimer!==null},n}(),sg=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pf=Ls,mf=ho,Tn="zc.tsh.a ",du=sr.error,ra=xi.error,eo=Xi,wo=Di,gf=function(n){function e(t,i,r,s){var o=n.call(this)||this;return o.Oi=t,o._i=i,o.Ri=r,o.isPublish=s,o.serverUrls=[],o.streamRetryStartTime=0,o}return sg(e,n),Object.defineProperty(e.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),e.prototype.initStream=function(t,i){this.streamID=t,this.serverUrls=i},e.prototype.activePublish=function(t){var i=this;if(this.Oi.info(Tn+"retry call "+this.streamID),this.retryTimer)return this.Oi.info(Tn+"has active, ignore"),!1;var r=this._i.networkState==he.offline;if(r){if(this.Oi.info(Tn+"check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.Oi.warn(Tn+B+", "+me),!1}else this.retryNetCount=0;if(this.isOverTime)return this.Oi.warn(Tn+"retry over time, "+me),!1;if(this.retryActiveCount==1)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var s=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=s>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:s}var o=this.Ri.publisherList[this.streamID].publisher,u=this.serverUrls[0],m=["unified_rtc","unified_l3"].includes(u);if(!m){var f=this.serverUrls,a=o.signal?o.signal.server:"";f.forEach(function(ee,ie){return ie<=f.indexOf(a)&&i.serverUrls.push(ee)}),f.splice(0,f.indexOf(a)+1),u=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]}var S=qi(t)?t:1e3*this.retryActiveInterval;this.ji.spanSetAttributes({key:o.parentSpanKey,par:this.streamID},{wait_consume:Ur.wait_consume(S)});var F=function(){i.Oi.info("".concat(Tn," stream ").concat(i.streamID," : connect to ").concat(m?"unified signal server":"signal server "+u)),i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=null,r?i.retryNetCount++:i.retryActiveCount++,i.Ri.connectPublishServer(i.streamID,u)};return S!==0?this.retryTimer=setTimeout(F,S):F(),this.Oi.info(Tn+"call success. delay: "+S),!0},e.prototype.activePull=function(t,i){var r=this;if(this.Oi.info(Tn+"retry call "+this.streamID),i&&(this.playStreamSuccess=i),this.retryTimer)return this.Oi.info(Tn+"has active, ignore"),!1;var s=this._i.networkState==he.offline;if(s){if(this.Oi.info(Tn+"check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.Oi.warn(Tn+B+", "+me),!1}else this.retryNetCount=0;if(this.isOverTime)return this.Oi.warn(Tn+"retry over time, "+me),!1;if(this.retryActiveCount==1)this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL);else{var o=Math.pow(2,Math.floor(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)-1);this.retryActiveInterval=o>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:o}var u=this.Ri.playerList[this.streamID].player,m=this.serverUrls,f=u.signal?u.signal.server:"",a=this.serverUrls[0],S=["unified_rtc","unified_l3"].includes(a);S||(m.forEach(function(ee,ie){return ie<=m.indexOf(f)&&r.serverUrls.push(ee)}),m.splice(0,m.indexOf(f)+1),a=this.serverUrls[this.retryActiveCount%this.serverUrls.length==0?this.serverUrls.length-1:this.retryActiveCount%this.serverUrls.length-1]);var F=qi(t)?t:1e3*this.retryActiveInterval;return this.ji.spanSetAttributes({key:u.parentSpanKey,par:this.streamID},{wait_consume:Un.wait_consume(F)}),this.retryTimer=setTimeout(function(){r.Oi.warn("".concat(Tn," stream ").concat(r.streamID," : connect to ").concat(S?"unified signal server":"signal server "+a)),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,s?r.retryNetCount++:r.retryActiveCount++,r.Ri.connectPlayServer(r.streamID,r.playStreamSuccess,a)},F),this.Oi.info(Tn+"call success. delay: "+F),!0},e.prototype.startMaxTime=function(){var t=this;this.Oi.info("zc.tsh.smt ".concat(this.streamID," call")),this.maxTimer?this.Oi.warn("zc.tsh.smt max timer"):(this.streamRetryStartTime===0&&(this.streamRetryStartTime=new Date().getTime()),this.maxTimer=setTimeout(function(){if(t.Oi.warn("zc.tsh.smt ".concat(t.streamID," over max time ").concat(t.RETRY_MAX_TIME,"s, stop retry")),t.isOverTime=!0,t.invalid(),t.isPublish){if(!t.Ri.publisherList[t.streamID])return void t.Oi.info("zc.tsh.smt streamID "+t.streamID+" publish no found");t.publishStateHandle(bt,t.streamID,ra.It,!0)}else{if(!t.Ri.playerList[t.streamID])return void t.Oi.info("zc.tsh.smt streamID "+t.streamID+" play no found");t.playStateHandle(at,t.streamID,du.si,!0)}},1e3*this.RETRY_MAX_TIME),this.Oi.info("zc.tsh.smt maxTimer=".concat(this.maxTimer)))},e.prototype.stopMaxTime=function(){this.Oi.info("zc.tsh.stmt streamID "+this.streamID+" maxTimer="+this.maxTimer),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.onactive=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},e.prototype.retryNextSignal=function(t){var i,r,s,o;if(this._i.networkState==he.offline)return this.Oi.info("zc.tsh.rns "+this.streamID+" offline"),!0;if(this.isPublish){var u=this.Ri.publisherList[this.streamID];if(u.publisher.state==$&&[ra.Dt.code].includes(t.code))return!0;if(this.Oi.info("zc.tsh.rns "+this.streamID+" publish ws state "+((i=u.publisher.signal)===null||i===void 0?void 0:i.wsReadyState)),this.Oi.info("zc.tsh.rns "+this.streamID+" offline"),u.isCenterNode&&((r=u.publisher.signal)===null||r===void 0?void 0:r.wsReadyState)==En.OPEN)return!1;if(!u.isCenterNode&&[ra.zt.code].includes(t.code)){var m=t.message.match(/reason:(\d+)/);return!["26"].includes(m?m[1]:"")}return!0}var f=this.Ri.playerList[this.streamID];return f.player.state==M&&[du.ai.code].includes(t.code)?!0:(this.Oi.info("zc.tsh.rns "+this.streamID+" play ws state "+((s=f.player.signal)===null||s===void 0?void 0:s.wsReadyState)),f.isCenterNode&&((o=f.player.signal)===null||o===void 0?void 0:o.wsReadyState)==En.OPEN?!1:!f.isCenterNode&&[du.oi.code].includes(t.code)?(m=t.message.match(/reason:(\d+)/),!["24","26","28"].includes(m?m[1]:"")):!0)},e.prototype.publishStateHandle=function(t,i,r,s,o,u){var m=this;this.Oi.info(qo+" call "+i+" "+(r?r.code+"":"")+" "+s+" "+JSON.stringify(o)+" "+u);var f=s||this.RETRY_MAX_TIME<3,a=this.Ri.publisherList[i],S=a.publisher;if(!f&&r&&(Lc(r)||this.serverUrls.length==0))return this.Oi.info(qo+" stop "+f+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.Ri.onPublishStateUpdate(t,i,r);if(!f&&r&&r.code!==0){if(this.maxTimer||f||this.startMaxTime(),this._i.useNetAgent&&r.code===jt.code)return this.Oi.info(qo+" connect fail"),void(this.activePublish()&&(this.rtcPublishSpan(i,r,S),this.Ri.onPublishStateUpdate(2,i,r),this.publishStartSpan(i,r,a)));this._i.publishStreamList[i].state=Me.retryPublish;var F=S.localStream,ee=S.videoInfo,ie=S.mediaStreamConfig,ae=S.publishOption;if(S.sessionId!=0&&S.signal&&S.shouldSendCloseSession()&&(S.signal.sendCloseSession((0,g.getSeq)(),S.sessionId,1),S.signal.removeSession(S.sessionId),S.closeSessionSignal=!0),S.resetPublish(),!f&&!this.retryNextSignal(r)){if(this.Oi.info(qo+" retry current signal "),this.rtcPublishSpan(i,r,S),a.isCenterNode){this.Oi.info(qo+" current node "+S.gwNode+" failed "+JSON.stringify(S.retryFailGwNodes));var be=S.retryFailGwNodes.findIndex(function(Pe){return Pe===S.gwNode});be>=0&&S.retryFailGwNodes.splice(be,1),S.retryFailGwNodes.push(S.gwNode),this.retryNewGwNode(S,r,o,u)}this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null;var Te=[ra.yt.code,ra.Tt.code].includes(r.code)?0:1e3;return this.Oi.info(qo+" "+i+" delay "+Te),this.startRetryTimer=setTimeout(function(){m.Oi.info(qo+" "+i+" retry publish "+S.state),S.state==$&&S.startPublish(i,F,ee,ie,ae)},Te),r&&r.code!==0&&this.Ri.onPublishStateUpdate(2,i,r),void this.publishStartSpan(i,r,a)}this.Ri.removeStreamFromSignal(!0,i)}if(f)return this.stopMaxTime(),this.invalid(),t===1&&S.resetPublish(),r!=null&&r.code&&this.ji.spanSetAttributes({key:S.parentSpanKey,par:i},r),void this.Ri.onPublishStateUpdate(t,i,r);r&&r.code!==0&&this.activePublish(void 0)&&(S&&(S.isExternal=!1),this.rtcPublishSpan(i,r,S),this.Ri.onPublishStateUpdate(2,i,r),this.publishStartSpan(i,r,a)),this.Oi.info(qo+" end "+i)},e.prototype.needReDispatchError=function(t){return[ra.Qt.code,du.li.code].includes(t.code)},e.prototype.playStateHandle=function(t,i,r,s,o,u){var m=this;this.Oi.info(ds+" call "+i+" "+(r?r.code+"":"")+" "+s+" "+JSON.stringify(o)+" "+u);var f=s||this.RETRY_MAX_TIME<3;if(!f&&r&&(Lc(r)||this.serverUrls.length==0))return this.Oi.info(ds+" stop "+f+" "+JSON.stringify(this.serverUrls)),this.stopMaxTime(),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,void this.Ri.onPlayStateUpdate(t,i,r);var a=this.Ri.playerList[i],S=a.player;if(!f&&r&&r.code!==0){!this.maxTimer&&!f&&this.startMaxTime();var F=S.playOption;if(S.sessionId!=0&&S.signal&&S.shouldSendCloseSession()&&(S.signal.sendCloseSession((0,g.getSeq)(),S.sessionId,1),S.signal.removeSession(S.sessionId),S.closeSessionSignal=!0),S.resetPlay(),!f&&!this.retryNextSignal(r)){if(this.Oi.info(ds+" retry current signal "),this.rtcPlaySpan(i,r,S),a.isCenterNode){this.Oi.info(ds+" current node "+S.gwNode+" "+JSON.stringify(S.retryFailGwNodes));var ee=S.retryFailGwNodes.findIndex(function(be){return be===S.gwNode});ee>=0&&S.retryFailGwNodes.splice(ee,1),S.retryFailGwNodes.push(S.gwNode),this.retryNewGwNode(S,r,o,u)}this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null;var ie=sr.error,ae=[ie.ei.code,ie.Tt.code].includes(r.code)?0:1e3;return this.Oi.info(ds+" "+i+" delay "+ae),this.startRetryTimer=setTimeout(function(){m.Oi.info(ds+" "+i+" retry state "+S.state),S.state===M&&S.startPlay(i,S.getRemoteStreamSuc,F)},ae),r&&r.code!==0&&this.Ri.onPlayStateUpdate(2,i,r),void this.playStartSpan(i,r,S)}this.Ri.removeStreamFromSignal(!1,i)}if(f)return this.stopMaxTime(),this.invalid(),r!=null&&r.code&&this.ji.spanSetAttributes({key:S.parentSpanKey,par:i},{error:r==null?void 0:r.code}),void this.Ri.onPlayStateUpdate(t,i,r);r&&r.code!==0&&this.activePull(void 0)&&(S&&(S.isExternal=!1),this.rtcPlaySpan(i,r,S),this.Ri.onPlayStateUpdate(2,i,r),this.playStartSpan(i,r,S)),this.Oi.info(ds+" end "+i)},e.prototype.retryNewGwNode=function(t,i,r,s){var o,u,m,f;if(this.Oi.info(fl+" call "+t.streamId),i&&i.code&&this.needReDispatchError(i))this.retryNextGwNode(t,!0,s);else if(r!=null&&r.action)switch(r==null?void 0:r.action){case 1:case 5:break;case 2:default:this.retryNextGwNode(t,!1,s);break;case 3:this.Oi.info(fl+" "+t.streamId+" redirect");var a=r==null?void 0:r.ins;a&&a.length>0&&(t.gwNode=(((o=a[0])===null||o===void 0?void 0:o.IP)||((u=a[0])===null||u===void 0?void 0:u.ip))+":"+(((m=a[0])===null||m===void 0?void 0:m.Port)||((f=a[0])===null||f===void 0?void 0:f.port)));break;case 4:t.resetGwNodes(),this.Ri.clearCachedGwNodesList(t,this.isPublish)}else this.retryNextGwNode(t,!1,s);this.Oi.info(fl+" "+t.streamId+" new node "+t.gwNode)},e.prototype.retryNextGwNode=function(t,i,r){var s;if(this.Oi.info(pl+" call "+t.streamId+" "+t.gwNode),((s=t.gwNodeList)===null||s===void 0?void 0:s.length)!==0||t.gwNode){var o=t.gwNodesTTL<new Date().getTime(),u=t.iceStateDisConnect&&this._i.isMultiOuter,m=t.gwNodeList.findIndex(function(a){return a==t.gwNode}),f=m===t.gwNodeList.length-1;this.Oi.info(pl+" "+t.streamId+" ttl: "+o+" ice: "+u+" last: "+f),i||o||t.isLastConnected&&u||f?this._i.useNetAgent&&(t.gwNode=t.gwNodeList[++m%t.gwNodeList.length],this.dispatchGwNodesBypass(t)):t.gwNode=r?t.gwNodeList[0]:t.gwNodeList[++m%t.gwNodeList.length]}else this.Oi.info(pl+" call "+t.streamId+" gwNodeList is empty")},e.prototype.dispatchGwNodesBypass=function(t){var i=this;t.dispatchGwNodes(function(r){i.Oi.info(Fd+" suc "+JSON.stringify(r)),t.setGwNodes(r,!0)},function(r){i.Oi.info(Fd+" fail "+JSON.stringify(r))})},e.prototype.rtcPublishSpan=function(t,i,r){var s,o,u;r==null||r.uploadRTCPublishStats();var m=r!=null&&r.isLastConnected?0:this.getTryTime(r);this.ji.spanEnd({key:Xi.event,par:t},{tryidx:eo.tryidx(r==null?void 0:r.rtcPublishCount),url:eo.url((s=r==null?void 0:r.signal)===null||s===void 0?void 0:s.server),ip:eo.ip((u=(o=r==null?void 0:r.gwNode)===null||o===void 0?void 0:o.split(":"))===null||u===void 0?void 0:u[0]),dispatch_external_ip:eo.dispatch_external_ip(this._i.clientIP),resource_type:eo.resource_type("rtc"),protocol:eo.protocol("webrtc"),try_time:eo.try_time(m),error:i==null?void 0:i.code,message:i==null?void 0:i.message})},e.prototype.publishStartSpan=function(t,i,r){var s,o,u=r==null?void 0:r.publisher,m=u!=null&&u.hasSucceed?Jn:Ur;this.ji.createSpan(It.H,{key:xi.event,par:t},{key:m.event,par:t},m.event,!0),(u==null?void 0:u.isRePublish)===!1&&this.ji.spanSetAttributes({key:pf.event,par:t},{retry_btime:pf.retry_btime(new Date().getTime())}),u!=null&&u.hasSucceed&&(u.isRePublish=!0,u.parentSpanKey=Jn.event),this.ji.createSpan(It.I,{key:xi.event,par:t},{key:Xi.event,par:t},Xi.event,!0).setAttributes({room_id:eo.room_id((s=r==null?void 0:r.room)===null||s===void 0?void 0:s.roomID),room_sid_string:eo.room_sid_string((o=r==null?void 0:r.room)===null||o===void 0?void 0:o.roomSessionID)}),u&&(u.rtcPublishCount++,u.continuousFailCnt++)},e.prototype.rtcPlaySpan=function(t,i,r){var s;r==null||r.uploadRTCPlayStats();var o=r!=null&&r.isLastConnected?0:this.getTryTime(r);this.ji.spanEnd({key:(r==null?void 0:r.pe)||Di.event,par:t},{tryidx:wo.tryidx(r==null?void 0:r.rtcPlayCount),url:wo.url((s=r==null?void 0:r.signal)===null||s===void 0?void 0:s.server),ip:wo.ip(r==null?void 0:r.ip),resource_type:wo.resource_type(ls((r==null?void 0:r.resourceMode)||0)),protocol:wo.protocol("webrtc"),dispatch_external_ip:wo.dispatch_external_ip(this._i.clientIP),try_time:eo.try_time(o),error:i==null?void 0:i.code,message:i==null?void 0:i.message})},e.prototype.playStartSpan=function(t,i,r){var s,o=r!=null&&r.hasSucceed?Pi:Un;this.ji.createSpan(It.H,{key:sr.event,par:t},{key:o.event,par:t},o.event,!0),(r==null?void 0:r.isRePlay)===!1&&this.ji.spanSetAttributes({key:mf.event,par:t},{retry_btime:mf.retry_btime(new Date().getTime())}),r!=null&&r.hasSucceed&&(r.isRePlay=!0,r.parentSpanKey=Pi.event);var u=(r==null?void 0:r.pe)||Di.event,m=this.ji.createSpan(It.I,{key:sr.event,par:t},{key:u,par:t},u,!0),f=(s=this.Ri.playerList[t])===null||s===void 0?void 0:s.room;m.setAttributes({room_id:wo.room_id(f==null?void 0:f.roomID),room_sid_string:wo.room_sid_string(f==null?void 0:f.roomSessionID),stream_id:wo.stream_id(t)}),r&&(r.rtcPlayCount++,r.continuousFailCnt++)},e.prototype.getTryTime=function(t,i){var r=void 0;return t&&this.streamRetryStartTime>0&&(r=new Date().getTime()-this.streamRetryStartTime,t.lastFailTimeLen=r=r>0?r:void 0,i&&(this.streamRetryStartTime=0)),r},e}(ff),ag=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hu=pi,fu=_d,vf=function(n){function e(t,i,r,s){var o=n.call(this)||this;return o.retryActiveCount=1,o.RETRY_MAX_TIME=90,o.Oi=t,o._i=i,o.rtm=r,o.Ri=s,o}return ag(e,n),Object.defineProperty(e.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),e.prototype.initStream=function(t,i,r){this.streamID=t,this.playOption=i,this.isPublish=r},e.prototype.active=function(t){var i,r,s,o,u,m,f=this;if(this.Oi.info(Bs+" retry call "+this.streamID),this.isPublish){var a=(r=(i=this.Ri)===null||i===void 0?void 0:i.publisherList[this.streamID])===null||r===void 0?void 0:r.publisher;u=a!=null&&a.isRePublish?Jn:Ur,m=pi}else{var S=(o=(s=this.Ri)===null||s===void 0?void 0:s.playerList[this.streamID])===null||o===void 0?void 0:o.player;u=S!=null&&S.isRePlay?Pi:Un,m=_d}var F=this.ji.createSpan(It.H,{key:u.event,par:this.streamID},{key:""},m.event);if(this.retryTimer)return this.Oi.info(Bs+" has active, ignore"),this.ji.setError(F,ct,"has active, ignore"),!1;var ee=this.rtm.isDisConnect()&&this._i.networkState==he.offline;if(ee){if(this.Oi.info(Bs+" check if really offline"),this.retryNetCount>=this.retryNetMaxTimes)return this.Oi.warn(Bs+" "+B+", stop retry"),!1}else this.retryNetCount=0;if(this.isOverTime)return this.Oi.warn(Bs+" retry over time, stop retry"),this.ji.setError(F,ct,"retry over time, stop retry"),!1;if(!this.rtm.isLogin()){this.stopMaxTime(),this.invalid();var ie=this.isPublish?this.Ri.publisherList[this.streamID]:this.Ri.playerList[this.streamID];ie&&(ie.isReDispatch=!0)}var ae=this.retryActiveCount-1;this.retryDispatchSpan||(this.retryDispatchSpan=F,this.ji.setSpanInMap(F,{key:m.event,par:this.streamID}));var be=this.playOption&&this.playOption.resourceMode==2?1:0,Te={stream_id:this.streamID,ptype:this.isPublish?"push":"pull",signals:this.Ri.getAllInUseUrl(),header_kvs:[{key:"grpc-metadata-push",value:this.playOption&&this.playOption.cdnUrl||""}],retry:ae,center_ability:!0,dispatch_type:be};return this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=setTimeout(function(){f.retryTimer=null,ee?f.retryNetCount++:f.retryActiveCount++;var Pe=f.Ri.getRoomByStreamID(f.streamID),Ae=f.rtm.service.sendMessage("webrtc_url",Te,function(Be,Ze){f.handleFetchWebRtcUrlRsp(Be)},function(Be,Ze){f.handleFetchWebRtcUrlRsp(Be)},void 0,{sessionID:Pe==null?void 0:Pe.sessionID,roomID:Pe==null?void 0:Pe.roomID,roomSessionID:Pe==null?void 0:Pe.roomSessionID});f.isPublish&&Ae?f.Ri.publisherList[f.streamID]&&(f.Ri.publisherList[f.streamID].seq=Ae):Ae&&f.Ri.playerList[f.streamID]&&(f.Ri.playerList[f.streamID].seq=Ae)},qi(t)?t:1e3*this.retryActiveInterval),this.Oi.info(Bs+" call success"),!0},e.prototype.startMaxTime=function(){var t=this;this.Oi.info("zc.tdh.smt ".concat(this.streamID," call")),this.maxTimer||(this.maxTimer=setTimeout(function(){t.Oi.warn("".concat("zc.rdh.m"," ").concat(t.streamID," dispatch over max time ").concat(t.RETRY_MAX_TIME,"s stop retry")),t.isOverTime=!0,t.invalid();var i=sr.error.ii;i.message=i.message+" try max limit",t.isPublish?t.Ri.onPublishStateUpdate(bt,t.streamID,i):t.Ri.onPlayStateUpdate(at,t.streamID,i)},1e3*this.RETRY_MAX_TIME),this.Oi.info("zc.tdh.smt ".concat(this.streamID," maxTimer=").concat(this.maxTimer)))},e.prototype.stopMaxTime=function(){this.Oi.info("zc.tdh.stmt ".concat(this.streamID," maxTimer=").concat(this.maxTimer)),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.onactive=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},e.prototype.handleFetchWebRtcUrlRsp=function(t){var i,r,s,o,u,m,f,a,S,F,ee;if(t.code&&[ii.code].includes(t.code))this.active();else{if(t.code&&[Wt.code].includes(t.code))return this.stopMaxTime(),this.invalid(),void(this.isPublish?this.Ri.publisherList[this.streamID].isReDispatch=!0:this.Ri.playerList[this.streamID].isReDispatch=!0);var ie=t,ae=ie.body.stream_id,be=!1,Te=sr.error;if(this.isPublish&&(!this.Ri.publisherList[ae]||ie.header.seq!==this.Ri.publisherList[this.streamID].seq))return this.Oi.warn(Hc+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(!(this.isPublish||this.Ri.playerList[this.streamID]&&ie.header.seq===this.Ri.playerList[this.streamID].seq))return this.Oi.warn(Hc+" seq is not match, ignore "+this.streamID),this.stopMaxTime(),void this.invalid();if(this._i.clientIP=ie.body.clientip||"",ie.body.err_code===0||ie.body.need_action!=2)if(ie.body.err_code===0||ie.body.need_action===1||[3102].includes(ie.body.err_code)){this.stopMaxTime(),this.invalid();var Pe=ie.body.is_center_node;if(ie.body.urls&&Array.isArray(ie.body.urls)&&ie.body.urls.length>0?be=!0:this.Oi.error(Hc+" signal url is empty"),ie.body.ptype==="push"&&this.Ri.publisherList[ae]){if(!be)return(u=this.retryDispatchSpan)===null||u===void 0||u.setAttributes({try_cnt:hu.try_cnt(this.retryActiveCount)}),this.ji.setError(this.retryDispatchSpan,xi.error.bt),this.retryDispatchSpan=null,void this.Ri.onPublishStateUpdate(bt,ae,xi.error.bt);var Ae=this.Ri.publisherList[ae];this._i.publishStreamList[ae]?(Ae.ttl=ie.body.hosts_ttl?new Date().getTime()+1e3*ie.body.hosts_ttl:0,Ae.isCenterNode=!!Li(Pe)&&Pe,Ae.serverUrls=ie.body.urls,(m=this.retryDispatchSpan)===null||m===void 0||m.setAttributes({urls:hu.urls(Ae.serverUrls),is_center:hu.is_center(Ae.isCenterNode),try_cnt:hu.try_cnt(this.retryActiveCount)}),(f=this.retryDispatchSpan)===null||f===void 0||f.end(),this.retryDispatchSpan=null,this.Ri.startPublishingStream(ae)):this.Oi.error(Hc+" no streamid to publish")}else if(ie.body.ptype=="pull"&&this.Ri.playerList[ae]){if(!be)return(Ze=JSON.parse(JSON.stringify(((a=ie.body)===null||a===void 0?void 0:a.err_code)===1900001004?Te.ri:Te.ii))).message=Ze.message+(ie.body.err_code?" server error:"+ie.body.err_code:""),ie.body.err_code===3102&&(Ze=sr.error.ni),(S=this.retryDispatchSpan)===null||S===void 0||S.setAttributes({try_cnt:fu.try_cnt(this.retryActiveCount)}),this.ji.setError(this.retryDispatchSpan,Ze),void this.Ri.onPlayStateUpdate(at,ae,Ze);var Be=this.Ri.playerList[ae];Be.ttl=ie.body.hosts_ttl?new Date().getTime()+1e3*ie.body.hosts_ttl:0,Be.isCenterNode=!!Li(Pe)&&Pe,Be.serverUrls=ie.body.urls,(F=this.retryDispatchSpan)===null||F===void 0||F.setAttributes({urls:fu.urls(Be.serverUrls),is_center:fu.is_center(Be.isCenterNode),try_cnt:fu.try_cnt(this.retryActiveCount)}),(ee=this.retryDispatchSpan)===null||ee===void 0||ee.end(),this.retryDispatchSpan=null,this.Ri.startPlayingStream(ae,this._i.useNetAgent,this.Ri.playSuccessCallBackList[ae])}}else{var Ze;this.retryActiveInterval=Math.floor(3*Math.random())+3,this.retryActiveCount==2&&((Ze=JSON.parse(JSON.stringify(((s=ie.body)===null||s===void 0?void 0:s.ptype)==="pull"&&((o=ie.body)===null||o===void 0?void 0:o.err_code)===1900001004?Te.ri:Te.ii))).message=Ze.message+(ie.body.err_code?" server error:"+ie.body.err_code:""),ie.body.ptype==="push"?this.Ri.onPublishStateUpdate(zt,ae,Ze):this.Ri.onPlayStateUpdate(ke,ae,Ze)),this.active()}else this.retryActiveInterval=ie.body.action_delay/1e3||Math.floor(3*Math.random())+3,this.retryActiveCount==2&&((Ze=JSON.parse(JSON.stringify(((i=ie.body)===null||i===void 0?void 0:i.ptype)==="pull"&&((r=ie.body)===null||r===void 0?void 0:r.err_code)===1900001004?Te.ri:Te.ii))).message=Ze.message+(ie.body.err_code?" server error:"+ie.body.err_code:""),ie.body.ptype==="push"?this.Ri.onPublishStateUpdate(zt,ae,Ze):this.Ri.onPlayStateUpdate(ke,ae,Ze)),this.active()}},e}(ff),cg=__webpack_require__(3720),ug=__webpack_require__.n(cg),lg=__webpack_require__(3349),Yl=__webpack_require__.n(lg),to=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Vn=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},dg=function(){function n(e,t){this.name=e,this.Oi=t,this.storeName=e+":"+function(i,r){var s,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),u=[];if(r=r||o.length,i)for(s=0;s<i;s++)u[s]=o[0|Math.random()*r];else{var m=void 0;for(u[8]=u[13]=u[18]=u[23]="-",u[14]="4",s=0;s<36;s++)u[s]||(m=0|16*Math.random(),u[s]=o[s==19?3&m|8:m])}return u.join("")}(6),this.store=Yl().createInstance({name:this.storeName}),this.recordStoresInStorage(e,this.storeName)}return n.prototype.recordStoresInStorage=function(e,t){try{var i=localStorage.getItem(e),r=i?i.split(","):[];r.push(t+"-1"),localStorage.setItem(e,r==null?void 0:r.join(","))}catch{}},n.prototype.getStoresFromStorage=function(){return this.refreshStores("1")},n.prototype.resetStorageStores=function(){this.refreshStores("0")},n.prototype.removeStoreFromStorage=function(e){this.refreshStores("2",e)},n.prototype.refreshStores=function(e,t){var i=this;if(!localStorage)return[];var r=localStorage.getItem(this.name),s=r?r.split(","):[],o=[];if(s.length>0){var u=[];s.forEach(function(m){var f=m.split("-"),a=f[0],S=f[1];e=="2"?(a!==t&&u.push(a+"-"+S),t&&i.dropInstance(t)):u.push(a+"-"+e),a.indexOf(i.storeName)===-1&&S=="0"&&o.push(a)}),localStorage.setItem(this.name,u.join(","))}return o},n.prototype.dropInstance=function(e){return to(this,void 0,void 0,function(){return Vn(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Yl().dropInstance({name:e})];case 1:return t.sent(),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})},n.prototype.getCacheStoreData=function(e){return to(this,void 0,void 0,function(){var t,i,r,s;return Vn(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,(t=Yl().createInstance({name:e})).keys()];case 1:return i=o.sent(),r=i.filter(function(u){return u.indexOf("_head")>-1}),s=[],r.length>0?[4,this.readStoreDatas(r,i,t)]:[3,3];case 2:return s=o.sent(),[3,4];case 3:this.removeStoreFromStorage(e),o.label=4;case 4:return[2,s];case 5:return o.sent(),[3,6];case 6:return[2]}})})},n.prototype.readStoreDatas=function(e,t,i){return to(this,void 0,void 0,function(){var r,s,o;return Vn(this,function(u){switch(u.label){case 0:r=[],s=function(m){var f,a,S,F,ee,ie,ae,be,Te,Pe;return Vn(this,function(Ae){switch(Ae.label){case 0:a=(f=e[m]).replace("_head",""),S=t.filter(function(Be){return Be.indexOf(a)>-1}),F=null,ee=[],ie=[],ae=0,Ae.label=1;case 1:return ae<S.length?[4,i.getItem(be=S[ae])]:[3,4];case 2:Te=Ae.sent(),be.startsWith(a+"_head")?F=Te:be.startsWith(a+"_publish")?ee.push(Te):be.startsWith(a+"_play")&&ie.push(Te),Ae.label=3;case 3:return ae++,[3,1];case 4:return Pe=new Date().getTime()-parseInt(a),F?ee.length>0||ie.length>0?(r.push({timestamp:parseInt(a),head:F,publishInfos:ee,playInfos:ie}),[3,7]):[3,5]:[3,7];case 5:return ee.length===0&&ie.length===0&&Pe>6e4?[4,i.removeItem(f)]:[3,7];case 6:Ae.sent(),Ae.label=7;case 7:return[2]}})},o=0,u.label=1;case 1:return o<e.length?[5,s(o)]:[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2,r]}})})},n.prototype.saveItem=function(e,t){return to(this,void 0,void 0,function(){var i;return Vn(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.store.setItem(e,t)];case 1:return r.sent(),[3,3];case 2:return i=r.sent(),this.Oi.warn(Va+" save "+JSON.stringify(i)),[3,3];case 3:return[2]}})})},n.prototype.getItem=function(e){return to(this,void 0,void 0,function(){var t;return Vn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.store.getItem(e)];case 1:return[2,i.sent()];case 2:return t=i.sent(),this.Oi.warn(Va+" get "+JSON.stringify(t)),[3,3];case 3:return[2]}})})},n.prototype.removeItem=function(e){return to(this,void 0,void 0,function(){var t;return Vn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.store.removeItem(e)];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),this.Oi.warn(Va+" remove "+JSON.stringify(t)),[3,3];case 3:return[2]}})})},n.prototype.clearItems=function(e){return to(this,void 0,void 0,function(){var t,i,r=this;return Vn(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.store.keys()];case 1:return t=s.sent(),t.filter(function(o){return o.indexOf(e)>-1}).forEach(function(o){return to(r,void 0,void 0,function(){return Vn(this,function(u){switch(u.label){case 0:return[4,this.removeItem(o)];case 1:return u.sent(),[2]}})})}),[3,3];case 2:return i=s.sent(),this.Oi.warn(Va+" clear "+JSON.stringify(i)),[3,3];case 3:return[2]}})})},n.prototype.getUnReportCachedDatas=function(e){return to(this,void 0,void 0,function(){var t,i,r;return Vn(this,function(s){switch(s.label){case 0:return[4,this.filterItems(e)];case 1:return t=s.sent(),i=[],t&&t.length>0?(r=t.filter(function(o){return o.indexOf("_head")>-1}),[4,this.readStoreDatas(r,t,this.store)]):[3,3];case 2:i=s.sent(),s.label=3;case 3:return[2,i]}})})},n.prototype.filterItems=function(e){return to(this,void 0,void 0,function(){var t,i;return Vn(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.store.keys()];case 1:return t=r.sent(),[2,t.filter(function(s){return s.indexOf(e)===-1})];case 2:return i=r.sent(),this.Oi.warn(Va+" filter "+JSON.stringify(i)),[3,3];case 3:return[2]}})})},n}(),Xl=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},$l=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},pu=Ys.logreport,hg=function(){function n(e,t,i){var r=this;this.Oi=e,this._i=t,this.Ri=i,this.publishQualityInfos=[],this.playQualityInfos=[],this.ke=0,this.Ee=0,this.uploadInterval=6e4,this._cacheChargeInfoPackets=[],this._chargeInfoSending=!1,this.beforeunloadListener=function(){r.streamStoreHandler.resetStorageStores()},this.streamStoreHandler=new dg(this.CacheKey,e),this.bindListener(),this.bindDestroyListener()}return Object.defineProperty(n.prototype,"CacheKey",{get:function(){return"z_s_c_"+this._i.appid},enumerable:!1,configurable:!0}),n.prototype.bindListener=function(){window.addEventListener("beforeunload",this.beforeunloadListener)},n.prototype.offListener=function(){window.removeEventListener("beforeunload",this.beforeunloadListener)},n.prototype.bindDestroyListener=function(){var e=this;this._i.listenerList._engineDestroy.push(function(){e.offListener()})},n.prototype.updateQuality=function(e,t,i){var r=new Date().getTime(),s=JSON.stringify(this.publishQualityInfos).length+JSON.stringify(this.playQualityInfos).length,o=i&&(this.publishQualityInfos.length>0||this.playQualityInfos.length>0),u=s>8e3,m=this.ke!==0&&r-this.ke>this.uploadInterval;m||u||o?(this.Oi.info(kn+" start upload. ".concat(u,",").concat(m,",").concat(o)),this.streamQualityUpload(o),this.publishQualityInfos=[],this.playQualityInfos=[],this.Ee=Math.round(new Date().getTime()),this._saveSpeedLogHead(),this.ke=r):this.Ee==0&&(this.Ee=Math.round(new Date().getTime()),this._saveSpeedLogHead(),this.ke=r),t&&(e==0?this.handlePublishQualityData(t):this.handlePlayQualityData(t))},n.prototype._sendPacketFromCache=function(){var e=this;if(!this._chargeInfoSending){var t=function(){if(!e._logDomain||e._cacheChargeInfoPackets.length<=0)e._chargeInfoSending=!1;else{e._chargeInfoSending=!0;var i=e._cacheChargeInfoPackets[0];e._getStreamReportSocket(e._logDomain).then(function(r){e._sendMessageWithCallback(r,i,function(){e.Oi.info(kn+" upload charge info success"),e._chargeInfoSending=!1,e._cacheChargeInfoPackets.shift(),e._cacheChargeInfoPackets.length>0&&e._sendPacketFromCache()},function(){e.Oi.info(kn+" send message error, retry upload charge info 1"),setTimeout(t,3e3)},function(){e.Oi.info(kn+" timeout, retry upload charge info 2"),t()})}).catch(function(r){if(r==="appid userid token not exist")return e.Oi.info(kn+" stop retry upload charge info."),void(e._chargeInfoSending=!1);e.Oi.info(kn+" open socket error, retry upload charge info 3"),setTimeout(t,3e3)})}};t()}},n.prototype.uploadChargeInfos=function(e){var t,i=(t=this.Oi.url)===null||t===void 0?void 0:t.split("/")[2];if(i){i!==""&&(this._logDomain=i);var r=Math.round(new Date().getTime()/1e3),s=this._getSpeedLogHead(r),o={charge_infos:e,client_type:2};this.Oi.info("zc.uslg.cgif call, chargeinfos:"+JSON.stringify({_SpeedLogHead:s,_QualityEvent:o}));var u=this._createStreamQualityPacket(s,o);this._cacheChargeInfoPackets.push(u),this._sendPacketFromCache()}},n.prototype.streamQualityUpload=function(e){if(Object.keys(this.Ri.publisherList).length>0||Object.keys(this.Ri.playerList).length>0||e){var t=this._getSpeedLogHead(),i={publish_quality_infos:this.publishQualityInfos,play_quality_infos:this.playQualityInfos,network_type:(0,g.getNetTypeNum)(),client_type:2};this.uploadQuality(this.Ee,t,i)}},n.prototype._getStreamReportSocket=function(e){var t=this;return new Ge(function(i,r){var s,o,u,m,f=!1,a=function(){var Te;t.Oi.info(kn+" speed log socket open"),f=!0,t.qualityWebsocket&&i(t.qualityWebsocket),(Te=t.qualityWebsocket)===null||Te===void 0||Te.removeEventListener("open",a)},S=function(){var Te;t.Oi.info(kn+" speed log socket close"),f||r("not open, socket closed"),(Te=t.qualityWebsocket)===null||Te===void 0||Te.removeEventListener("close",S)},F=function(){(function(){var Te;(Te=t.qualityWebsocket)===null||Te===void 0||Te.addEventListener("open",a)})(),function(){var Te;(Te=t.qualityWebsocket)===null||Te===void 0||Te.addEventListener("close",S)}()};if(t.qualityWebsocket&&t.qualityWebsocket.readyState!=2&&t.qualityWebsocket.readyState!=3)t.qualityWebsocket.readyState==1?(f=!0,i(t.qualityWebsocket)):F();else{var ee=t._i.appid,ie=t._i.idName,ae=(s=t._i.roomList[0])===null||s===void 0?void 0:s.token;if(!ee||!ie||!ae)return t.Oi.error(kn+" appid userid token not exist"),void r("appid userid token not exist");var be="wss://".concat(e,"/ws/report/stream?appid=").concat(ee,"&product=rtc&token=").concat(encodeURIComponent(ae),"&id_name=").concat(ie);t.qualityWebsocket=(o=be,(m=1)===void 0&&(m=1),(u=g.ZegoExpressWebRTM.proxyCtrl)?u.createSocket(o,m):new WebSocket(o)),F()}setTimeout(function(){f||r("not open, timeout, socket closed")},1e4)})},n.prototype._createStreamQualityPacket=function(e,t){var i=pu.SpeedLogHead.create(e),r=pu.QualityEvent.create(t),s=pu.SpeedLogHead.encode(i).finish(),o=pu.QualityEvent.encode(r).finish(),u=this.getQualityHead(s,o),m=new Uint8Array(12+s.length+o.length);return m.set(u),m.set(s,12),m.set(o,12+s.length),m},n.prototype._sendMessageWithCallback=function(e,t,i,r,s,o){var u=this,m=!1,f=!1;e.readyState!==1&&!f&&r&&r(),e.onmessage=function(a){(a.data+"").includes("success")?(u.Oi.info(kn+" quality (".concat(o||"",") upload success")),!f&&i&&i(),m=!0):(!f&&r&&r(),m=!0),e.onmessage=null},e.send(t),setTimeout(function(){m||(s&&s(),f=!0)},15e3)},n.prototype.uploadQuality=function(e,t,i,r){var s,o=this,u=this._createStreamQualityPacket(t,i),m=(s=this.Oi.url)===null||s===void 0?void 0:s.split("/")[2];if(m){var f=function(){return o._getStreamReportSocket(m)};f().then(function(a){var S=Date.now()%1e4,F=!1;o._sendMessageWithCallback(a,u,function(){F=!0,o.delStreamData(e),r&&o.streamStoreHandler.removeStoreFromStorage(r),setTimeout(function(){o.checkCacheDataToReport()},1e3)},void 0,void 0,S),setTimeout(function(){return Xl(o,void 0,void 0,function(){return $l(this,function(ee){switch(ee.label){case 0:return F?[3,2]:[4,f()];case 1:ee.sent().send(u),this.Oi.info(kn+" retry upload quality (".concat(S,"), length: ")+u.length+"."),ee.label=2;case 2:return[2]}})})},3e3),o.Oi.info(kn+" upload quality (".concat(S,"), length: ")+u.length+".")})}},n.prototype.checkCacheDataToReport=function(){return Xl(this,void 0,void 0,function(){var e;return $l(this,function(t){switch(t.label){case 0:return[4,this.streamStoreHandler.getUnReportCachedDatas(this.Ee+"")];case 1:return e=t.sent(),this.uploadUnReportDatas(e),[2]}})})},n.prototype.getQualityHead=function(e,t){var i=new Uint8Array(12);i[0]=0,i[1]=12,i[2]=e.length>>8,i[3]=e.length-(i[2]<<8),i[4]=t.length>>24,i[5]=t.length-(i[4]<<24)>>16,i[6]=t.length-(i[4]<<24)-(i[5]<<16)>>8,i[7]=t.length-(i[4]<<24)-(i[5]<<16)-(i[6]<<8);var r=Math.ceil(new Date().getTime()/1e3);return i[8]=r>>24,i[9]=r-(i[8]<<24)>>16,i[10]=r-(i[8]<<24)-(i[9]<<16)>>8,i[11]=r-(i[8]<<24)-(i[9]<<16)-(i[10]<<8),i},n.prototype.handlePublishQualityData=function(e){var t=this.publishQualityInfos.find(function(r){return r.stream_id==e.stream_id&&r.video_width==e.frameWidth&&r.video_height==e.frameHeight});if(!t){var i=this.Ri.getRoomByStreamID(e.stream_id);t={stream_id:e.stream_id,session_id:i?Number(i.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:i?i.roomID:"",evnvironment:1,room_session_id:i?Number(i.roomSessionID):0,resource_type:2},this.publishQualityInfos.push(t)}t.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(1e3*e.currentRoundTripTime)||0,audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(e.audioLevel),sample_time_offset:Math.round((e.timeStamp-this.Ee)/10)}),this.saveStreamInfo("publish",t)},n.prototype.handlePlayQualityData=function(e){var t,i=this.playQualityInfos.find(function(o){return o.stream_id==e.stream_id&&o.video_width==e.frameWidth&&o.video_height==e.frameHeight});if(!i){var r=this.Ri.getRoomByStreamID(e.stream_id),s=(t=this.Ri.playerList[e.stream_id])===null||t===void 0?void 0:t.player;i={stream_id:e.stream_id,session_id:r?Number(r.sessionID):0,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:r?r.roomID:"",room_session_id:r?Number(r.roomSessionID):0,resource_type:(s==null?void 0:s.resourceMode)===0?2:3},this.playQualityInfos.push(i)}i.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:Math.round(1e3*e.currentRoundTripTime)||0,rendered_sound_level:Math.round(e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_offset:Math.round((e.timeStamp-this.Ee)/10),peer_to_peer_plr:e.peerToPeerPacketLostRate,peer_to_peer_delay:e.peerToPeerDelay}),this.saveStreamInfo("play",i)},n.prototype._saveSpeedLogHead=function(){var e=this._getSpeedLogHead();this.streamStoreHandler.saveItem(this.Ee+"_head",e)},n.prototype.saveStreamInfo=function(e,t){this.streamStoreHandler.saveItem("".concat(this.Ee,"_").concat(e).concat(t.stream_id),t)},n.prototype.delStreamData=function(e){this.streamStoreHandler.clearItems(e+"")},n.prototype._getSpeedLogHead=function(e){return{version:14,timestamp:e||Math.round(this.Ee/1e3),event:0,app_id:this._i.appid,user_id:this._i.idName,biz_type:1,time_offset:ug().MAX_VALUE,os_type:(0,g.getOsType)(),scenario:this._i.scenario===100?void 0:this._i.scenario,sdk_version:v}},n.prototype.checkStreamReport=function(){var e=this;this.streamStoreHandler.getStoresFromStorage().forEach(function(t){return Xl(e,void 0,void 0,function(){var i;return $l(this,function(r){switch(r.label){case 0:return[4,this.streamStoreHandler.getCacheStoreData(t)];case 1:return i=r.sent(),this.uploadUnReportDatas(i,t),[2]}})})})},n.prototype.uploadUnReportDatas=function(e,t){var i=this;this._i.roomList.length<=0?this.Oi.warn("zc.sqr.uud no room"):e.length>0&&e.forEach(function(r){var s=r.timestamp,o=r.head,u={publish_quality_infos:r.publishInfos,play_quality_infos:r.playInfos,network_type:(0,g.getNetTypeNum)(),client_type:2};i.Oi.info(kn+" start upload cache quality. "),i.uploadQuality(s,o,u,t)})},n.prototype.resetReport=function(){var e=this;this.publishQualityInfos=[],this.playQualityInfos=[],this.Ee=0,this.ke=0,setTimeout(function(){e.qualityWebsocket&&(e.qualityWebsocket.close(),e.qualityWebsocket=void 0,e._chargeInfoSending=!1)},2e4)},n}();function fg(){var n={},e=this,t={init:function(i){importScripts(i),e._ModuleFn(n)},parseToMiniSdp:function(i,r){var s=n._parseToMiniSdp,o=n._getBuffer,u=n.HEAPU8,m=n._free,f=(0,n.allocateUTF8)(i),a=s(f);if(a<0)return e.postMessage({code:a,eventId:r});var S=o(),F=new Uint8Array(u.subarray(S,S+a-1))||new Uint8Array;e.postMessage({code:0,data:F,eventId:r});try{m(f),m(a),m(S)}catch(ee){console.error(ee)}},loadMiniSdpToOriginSdp:function(i,r){var s,o,u,m=n._loadMiniSdpToSdp,f=n.UTF8ToString,a=n.HEAPU8,S=n._free,F=(0,n._malloc)(i.length);a.set(i,F);for(var ee=f(m(F,i.byteLength))||"",ie=ee.split(`\r
`)||[],ae=["ice-ufrag","ice-pwd","ice-options","fingerprint","setup","mid","extmap","sendrecv","sendonly","recvonly","inactive","rtpmap","rtcp-fb","fmtp","ssrc","candidate","msid"];ie.length;){var be=ie.length,Te=(o=(s=ie[be-1])===null||s===void 0?void 0:s.split("=")[1])===null||o===void 0?void 0:o.split(":")[0];if(((u=ie[be-1])===null||u===void 0?void 0:u.indexOf("="))!=-1&&ae.includes(Te))break;ie.pop()}ee=ie.join(`\r
`),e.postMessage({code:0,data:ee+=`\r
`,eventId:r});try{S(F)}catch(Pe){console.error(Pe)}}};onmessage=function(i){t[i.data.command]?t[i.data.command](i.data.val,i.data.eventId):console.error("the command is invalid")}}var Ts,pg=__webpack_require__(6531).G,mu=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},gu=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},yf=function(){function n(){var e=this;this.msgSuccessCallBack={};var t=fg.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],i=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));this.worker=new Worker(i);var r=Uc("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"),s=pg.decompress(Array.from(r)),o=URL.createObjectURL(new window.Blob([s],{type:"text/javascript"}));this.worker.postMessage({command:"init",val:o}),this.worker.onmessage=function(u){var m=u.data;m.eventId&&wn(e.msgSuccessCallBack[m.eventId])&&(e.msgSuccessCallBack[m.eventId]({code:m.code,data:m.data}),delete e.msgSuccessCallBack[m.eventId])},this.worker.onmessageerror=function(u){console.error("Error receiving message from worker: ".concat(u))},this.worker.onerror=function(u){console.error(u)}}return n.prototype.messageHandler=function(e){var t=this;return new Ge(function(i){var r=Math.floor(10*Math.random());e.eventId="".concat(e.command,`_ 
        `).concat(Date.now().toString(16).slice(r,r+6)),t.worker.postMessage(e),t.msgSuccessCallBack[e.eventId]=function(s){i(s)}})},n.prototype.parseToMiniSdp=function(e){return mu(this,void 0,void 0,function(){var t=this;return gu(this,function(i){return[2,new Ge(function(r,s){return mu(t,void 0,void 0,function(){var o,u;return gu(this,function(m){switch(m.label){case 0:return bi(e)&&e?[4,this.messageHandler({command:"parseToMiniSdp",val:e})]:(s(_t),[2]);case 1:if((o=m.sent()).code===0)r(o.data);else{switch(u=void 0,o.code){case-1:u=Nu;break;case-2:u=Lu;break;case-3:u=pc}s(u)}return[2]}})})})]})})},n.prototype.loadMiniSdpToOriginSdp=function(e){return mu(this,void 0,void 0,function(){var t=this;return gu(this,function(i){return[2,new Ge(function(r,s){return mu(t,void 0,void 0,function(){var o;return gu(this,function(u){switch(u.label){case 0:return tl(e)?[4,this.messageHandler({command:"loadMiniSdpToOriginSdp",val:e})]:(s(_t),[2]);case 1:return(o=u.sent()).code==0&&r(o.data),[2]}})})})]})})},Object.defineProperty(n,"isSupported",{get:function(){return!(!window.WebAssembly||!window.Worker)},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){this.worker.terminate()},n}();(function(n){n.SAVED_CHARGEINFO_REPORT="zc.bill.scir",n.CHARGEINFO_SAVING_LOCALSTORAGE="zc.bill.cisl",n.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE="zc.bill.cigrl",n.START_CHARGE_INFO_TIMER="zc.bill.tm.scit"})(Ts||(Ts={}));var mg=function(){function n(e,t){var i;this.Oi=e,this._i=t,this._chargeInfosInterval=6e4,this.reporting=!1,this._useNTP=!1,this._chargeInfos={};var r=(i=this._i.rtm)===null||i===void 0?void 0:i.getNetworkInfo().timestamp;r&&(this.Oi.info("zc.bill.tm.r.0 use ntp. gap: "+(r-Date.now())),this._useNTP=!0)}return Object.defineProperty(n.prototype,"Ri",{get:function(){return this._i.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"streamReport",{get:function(){var e;return(e=this.Ri)===null||e===void 0?void 0:e.streamReport},enumerable:!1,configurable:!0}),n.prototype.isAllPlayingCdnAndL3=function(){var e=0,t=0,i=this.Ri.playerList;for(var r in i){var s=i[r];s.player.state==G&&(e++,s.player.resourceMode!==0&&t++)}return e==t&&e!==0},n.prototype._now=function(){return this._useNTP?this._i.rtm.getNetworkInfo().timestamp:Date.now()},Object.defineProperty(n.prototype,"roomChargeInfos",{get:function(){return this._roomChargeInfos||(this._roomChargeInfos={roomid:"",timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]}),this._roomChargeInfos.timestamp_begin=this._now(),this._roomChargeInfos.timestamp_end!==0?(this._roomChargeInfos.timestamp_diff=this._roomChargeInfos.timestamp_begin-this._roomChargeInfos.timestamp_end,this._roomChargeInfos.timestamp_diff_flag=1):(this._roomChargeInfos.timestamp_diff=0,this._roomChargeInfos.timestamp_diff_flag=0),this._roomChargeInfos.timestamp_end=this._now(),this._roomChargeInfos.infos=[{is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[],no_playing:1}],this._roomChargeInfos},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shouldEnd",{get:function(){var e;return!!this.reporting&&(this.shouldReportRoomTime?((e=this._i.rtm)===null||e===void 0?void 0:e.stateCenter.roomModulesList.filter(function(t){return!t.isLogout()||!t.isDisConnect()}).length)===0:!this.Ri||!this.Ri.signalList||Object.keys(this.Ri.signalList).length===0)},enumerable:!1,configurable:!0}),n.prototype.report=function(){var e=this;this.Ri?this.isAllPlayingCdnAndL3()?this.Oi.info("zc.bill.tm.r.0 not report"):this.getRoomIDList().forEach(function(t){var i,r=e.samplingChargeInfos(t);(i=e.streamReport)===null||i===void 0||i.uploadChargeInfos(r)}):this.Oi.info("zc.bill.tm.r.0 no stream center")},Object.defineProperty(n.prototype,"shouldReportRoomTime",{get:function(){var e,t,i;return!(!(!((e=this._i.rtm)===null||e===void 0)&&e.stateCenter.appConfig)||!(!((t=this._i.rtm)===null||t===void 0)&&t.stateCenter.appConfig.speedlog_config)||((i=this._i.rtm)===null||i===void 0?void 0:i.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing)!==1)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isReporting",{get:function(){return this.reporting},enumerable:!1,configurable:!0}),n.prototype.startChargeInfoTimer=function(){var e=this;if(this._chargeInfosTimer&&(clearTimeout(Number(this._chargeInfosTimer)),this._chargeInfosTimer=null,this.shouldEnd))return this.Oi.info(Ts.START_CHARGE_INFO_TIMER+" chargeinfos timer report ended"),void(this.reporting=!1);this._chargeInfosTimer=setTimeout(function(){e.report(),e.startChargeInfoTimer()},this._chargeInfosInterval)},n.prototype.startChargeInfosUpload=function(){this.reporting||(this.reporting=!0,this.shouldReportRoomTime&&this.report(),this.startChargeInfoTimer(),this.Oi.info("zsc.sciu.0 call"))},n.prototype.stopChargeInfosUpload=function(){this.Oi.info("zsc.sciu.1 call"),this._chargeInfosTimer&&this.shouldEnd&&(this.Oi.info("zsc.sciu.1 stop"),clearTimeout(Number(this._chargeInfosTimer)),this._chargeInfosTimer=null,this.shouldReportRoomTime&&this.report(),this.reporting=!1,this.Oi.info("zsc.sciu.1 chargeinfos timer report ended"))},n.prototype.destroy=function(){this.Oi.info("zsc.ds.0 call"),this._chargeInfosTimer&&(clearTimeout(Number(this._chargeInfosTimer)),this._chargeInfosTimer=null),this.reporting=!1},n.prototype.getRoomIDList=function(){var e,t=[];return(e=this._i.rtm)===null||e===void 0||e.stateCenter.roomModulesList.filter(function(i){t.push(i.roomID)}),t},n.prototype.samplingChargeInfos=function(e){return this.Ri?this._getChargeInfos(e):this.roomChargeInfos},n.prototype._getChargeInfos=function(e){this.Oi.debug("zsc.cci.0 call"),this._chargeInfos[e]||(this._chargeInfos[e]={roomid:e,timestamp_begin:0,timestamp_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]});var t=this._chargeInfos[e],i={is_publishing:0,play_max_audio_bitrate:0,play_stream_resolution_infos:[]};this.shouldReportRoomTime&&(i.no_playing=1),t.timestamp_begin=this._now();var r=this.Ri,s=r.publisherList,o=r.playerList;for(var u in s)if(s[u].room.roomID===e){s[u].publisher.state===le&&(i.is_publishing=1);break}i.play_max_audio_bitrate=0;var m=function(a){if(o[a].room.roomID!==e)return"continue";var S={width:o[a].player.qualityHandler.lastPlayStats.frameWidth,height:o[a].player.qualityHandler.lastPlayStats.frameHeight};if(!S.height||!S.width){var F=o[a].player.playStream;S=F&&F.getVideoTracks().length!==0?F.getVideoTracks()[0].getSettings():void 0}var ee={video_width:S&&S.width?S.width:0,video_height:S&&S.height?S.height:0,count:1};if(!i.play_stream_resolution_infos.find(function(ae){return ae.video_width==ee.video_width&&ae.video_height==ee.video_height&&(ae.count++,!0)})&&i.play_stream_resolution_infos.push(ee),ee.video_width==0&&ee.video_height==0){var ie=1e3*o[a].player.qualityHandler.lastPlayStats.audioBitrate;ie>i.play_max_audio_bitrate&&(i.play_max_audio_bitrate=Math.round(ie))}};for(var f in o)m(f);return i.play_stream_resolution_infos.length!==0&&this.shouldReportRoomTime&&(i.no_playing=0),t.timestamp_end!==0?(t.timestamp_diff=t.timestamp_begin-t.timestamp_end,t.timestamp_diff_flag=1):(t.timestamp_diff=0,t.timestamp_diff_flag=0),t.timestamp_end=this._now(),t.infos=[i],t},n}(),gg=function(){function n(e,t){var i=this;this.Oi=e,this._i=t,this.beforeunloadListener=function(){var r;if(i.billingTimer.isReporting){var s=[];(r=i._i.rtm)===null||r===void 0||r.stateCenter.roomModulesList.forEach(function(o){s.push(i.billingTimer.samplingChargeInfos(o.roomID))}),i.saveChargeInfosByLocalStorage(s)}},this.bindListener(),this.bindDestroyListener()}return Object.defineProperty(n.prototype,"billingTimer",{get:function(){return this._i.streamCenter.billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"KEY",{get:function(){var e;return"z_cginfos_cache_".concat((e=this._i.rtm)===null||e===void 0?void 0:e.stateCenter.appid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"streamReport",{get:function(){var e;return(e=this._i.streamCenter)===null||e===void 0?void 0:e.streamReport},enumerable:!1,configurable:!0}),n.prototype.bindListener=function(){window.addEventListener("beforeunload",this.beforeunloadListener)},n.prototype.offListener=function(){window.removeEventListener("beforeunload",this.beforeunloadListener)},n.prototype.bindDestroyListener=function(){var e=this;this._i.listenerList._engineDestroy.push(function(){e.offListener()})},n.prototype.saveChargeInfosByLocalStorage=function(e){return this.Oi.info(Ts.CHARGEINFO_SAVING_LOCALSTORAGE+" call"),localStorage&&localStorage.setItem(this.KEY,JSON.stringify(e))},n.prototype.getAndRemoveChargeInfosFromLocalStorage=function(){this.Oi.info(Ts.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE+" call");try{var e=localStorage.getItem(this.KEY);return localStorage.removeItem(this.KEY),e}catch{return null}},n.prototype.report=function(e){var t;(t=this.streamReport)===null||t===void 0||t.uploadChargeInfos(e)},n.prototype.checkAndReport=function(){this.Oi.info(Ts.SAVED_CHARGEINFO_REPORT+" call");var e=this.getAndRemoveChargeInfosFromLocalStorage();if(e!=null){var t=JSON.parse(e);this.report(t),this.Oi.info(Ts.SAVED_CHARGEINFO_REPORT+" reported")}},n}(),vg=function(){function n(){this.trackStopTimeMap={},this.trackMaxStop2EndedDelayMs=500}return n.prototype.isTrackStopBySDK=function(e){return this.trackStopTimeMap[e.id]!==void 0&&performance.now()-this.trackStopTimeMap[e.id]<=this.trackMaxStop2EndedDelayMs},n.prototype.recordStopTrack=function(e){e&&(this.trackStopTimeMap[e.id]=performance.now())},n}(),yg=function(){function n(e){this.logger=e,this.deviceCaptureExceptionDetection=new vg}return n.prototype.isTrackStopBySDK=function(e){return this.deviceCaptureExceptionDetection.isTrackStopBySDK(e)},n.prototype.stopTrack=function(e){e&&(this.logger.info("zc.tk.ut track "+e.id+" stop"),this.deviceCaptureExceptionDetection.recordStopTrack(e),e.stop())},n}();function _g(){var n=this,e=243,t=new Uint8Array([0,0,0,1,101,184,0,4,0,0,9,255,254,222,35,192,166,30,73,128]),i=new Uint8Array([0,0,0,1,103,77,64,51,140,141,78,64,60,34,17,168,0,0,0,1,104,238,60,128]),r={},s={},o={},u={},m=function(){function be(Te){this.view=Te,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=Te.byteLength}return be.prototype.FindStartCode=function(){var Te=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;Te>=3;){if(this.view.getUint8(this.offset)==0&&this.view.getUint8(this.offset+1)==0&&this.view.getUint8(this.offset+2)==1)return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&this.view.getUint8(this.offset-1)==0&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--Te,++this.offset}return!1},be.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},be.prototype.NextNalu=function(Te){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,this.offset>=this.view.byteLength||!this.FindStartCode()?!1:(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,Te&&(31&this.view.getUint8(this.nalu_start+this.start_code_size))!=6?!0:this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0))},be}();function f(be,Te){Te===void 0&&(Te=0);for(var Pe=be.length,Ae=[],Be=0;Be<Pe;)Be>=Te&&Pe-Be>=3&&!be[Be]&&!be[Be+1]&&be[Be+2]==3?(Ae.push(be[Be++]),Ae.push(be[Be++]),Be++):Ae.push(be[Be++]);var Ze=new Uint8Array(Ae);return{output:Ze,outLength:Ze.length}}function a(be){var Te=0,Pe=0;return Te=be[Pe++]<<24,Te|=be[Pe++]<<16,Te|=be[Pe++]<<8,Te|=be[Pe++]}function S(be,Te,Pe){var Ae=be.byteLength,Be=parseInt(Ae/255),Ze=Ae%255,st=new ArrayBuffer(1+(Be+1)+Ae+1),Rt=new DataView(st),At=0;Rt.setUint8(At++,Te===1?5:e);for(var vt=0;vt<Be;vt++)Rt.setUint8(At++,255);Rt.setUint8(At++,Ze);var Ft=new DataView(be);for(vt=0;vt<(be==null?void 0:be.byteLength);vt++)Rt.setInt8(At++,Ft.getInt8(vt));Rt.setInt8(At++,128);var Ct=new Uint8Array(st),Mt=Ct;if(Pe){var Gt=function(li){for(var kt=[],ti=li.length,vi=0,Lt=0;Lt<ti;++Lt){var ui=li[Lt];ui<=3&&vi>=2&&(kt.push(3),vi=0),kt.push(li[Lt]),ui==0?++vi:vi=0}var Jt=new Uint8Array(kt);return{output:Jt,outLength:Jt.length}}(Ct).output;Mt=Gt}return{rbspView:Mt,ebspLength:Mt.length}}function F(be,Te,Pe,Ae,Be){var Ze=void 0,st=Be[Ae],Rt=st.isLowStream,At=st.kind;if(At=At||"video",Rt=Rt||!1,be==="encode"?Ze=function(Ft,Ct){At==="audio"?Ct.enqueue(Ft):st.onlyAudio?function(Mt,Gt,li,kt){var ti=r[li];if(ti){var vi=kt?ti.lowStreamSideInfos:ti.sideInfos,Lt=0;Mt.type==="key"&&(Lt=i.length+t.length);var ui=0,Jt=[];if(vi.length>0){for(var ai=0;ai<vi.length;ai++){var Vi=S(vi[ai],ti.type,ti.emulationPreventionByte);ui+=5+(Or=Vi.ebspLength),Jt.push(Vi)}kt?ti.lowStreamSideInfos=[]:ti.sideInfos=[]}var Fi=new ArrayBuffer(ui+Lt),Ni=new DataView(Fi),ir=0;if(Mt.type==="key")for(var Rr=new DataView(i.buffer),Oi=0;Oi<i.length;Oi++)Ni.setInt8(ir++,Rr.getInt8(Oi));for(ai=0;ai<Jt.length;ai++){var fr=Jt[ai],jr=fr.rbspView,Or=fr.ebspLength;Ni.setUint8(ir++,0),Ni.setUint8(ir++,0),Ni.setUint8(ir++,0),Ni.setUint8(ir++,1),Ni.setUint8(ir++,6);for(var Cr=0;Cr<Or;Cr++)Ni.setInt8(ir++,jr[Cr-0])}if(Mt.type==="key"){var uo=new DataView(t.buffer);for(Oi=0;Oi<t.length;Oi++)Ni.setInt8(ir++,uo.getInt8(Oi))}Mt.data=Fi,Gt.enqueue(Mt)}else Gt.enqueue(Mt)}(Ft,Ct,Ae,Rt):function(Mt,Gt,li,kt){var ti=r[li];if(ti){var vi=kt?ti.lowStreamSideInfos:ti.sideInfos;if(vi.length>0){for(var Lt=new DataView(Mt.data),ui=[],Jt=0,ai=0;ai<vi.length;ai++){var Vi=S(vi[ai],ti.type,ti.emulationPreventionByte);Jt+=5+(ln=Vi.ebspLength),ui.push(Vi)}kt?ti.lowStreamSideInfos=[]:ti.sideInfos=[];for(var Fi=new ArrayBuffer(Jt+Mt.data.byteLength),Ni=new DataView(Fi),ir=0,Rr=new m(Lt),Oi=0,fr=!1,jr=!1;Rr.NextNalu();){var Or=31&Lt.getUint8(Rr.nalu_start+Rr.start_code_size);if(Or==7)fr=!0,Oi+=Rr.nalu_size;else if(Or==8)jr=!0,Oi+=Rr.nalu_size;else if(Or==9)continue;if(fr&&jr)break}for(var Cr=0;Cr<Oi;Cr++)Ni.setInt8(ir++,Lt.getInt8(Cr));for(ai=0;ai<ui.length;ai++){var uo=ui[ai],ei=uo.rbspView,ln=uo.ebspLength;Ni.setUint8(ir++,0),Ni.setUint8(ir++,0),Ni.setUint8(ir++,0),Ni.setUint8(ir++,1),Ni.setUint8(ir++,6);for(var mn=0;mn<ln;mn++)Ni.setInt8(ir++,ei[mn-0])}for(Cr=Oi;Cr<Mt.data.byteLength;Cr++)Ni.setInt8(ir++,Lt.getInt8(Cr));Mt.data=Fi}Gt.enqueue(Mt)}else Gt.enqueue(Mt)}(Ft,Ct,Ae,Rt)}:be==="decode"&&(Ze=function(Ft,Ct){At==="audio"?Ct.enqueue(Ft):function(Mt,Gt,li){var kt=s[li];if(kt)if(kt.codec==="VP8")Gt.enqueue(Mt);else{for(var ti=new DataView(Mt.data),vi=0,Lt=new m(ti),ui=0,Jt=!1;Lt.NextNalu(Jt);)if((ui=31&ti.getUint8(Lt.nalu_start+Lt.start_code_size))!=7&&ui!=8&&ui!=9){if(ui!=6)break;var ai=new Uint8Array(Mt.data).slice(Lt.nalu_start+Lt.start_code_size,Lt.nalu_start+Lt.start_code_size+Lt.nalu_size);kt.emulationPreventionByte&&(ai=f(ai).output),vi=1,Jt=!0;for(var Vi=0;ai[vi]===255;)Vi+=255,vi++;if((Vi+=ai[vi++])===e||Vi===5||Vi===100){for(var Fi=0;ai[vi]===255;)Fi+=255,vi++;if(Fi+=ai[vi++],Mt.data.byteLength-vi<Fi)break;var Ni=new Uint8Array(4+Fi);switch(Ni[0]=0,Ni[1]=0,Vi){case 100:Ni[2]=3,Ni[3]=235;break;case 5:Ni[2]=3,Ni[3]=236;break;case e:Ni[2]=3,Ni[3]=237}for(var ir=0;ir<Fi;ir++)Ni[4+ir-0]=ai[vi++];var Rr=!1;if(Vi===e)Rr=!0;else if(Vi===5){var Oi=kt.unregisterSeiFilter;if(Oi){var fr=Ni.slice(4,4+kt.filterSize),jr=void 0,Or=!0;if((jr=typeof Oi=="string"?Uint8Array.from(Array.from(unescape(encodeURIComponent(Oi))).map(function(b0){return b0.charCodeAt(0)})):Oi).length===0)Or=!1;else for(var Cr=0;Cr<jr.length;Cr++)if(jr[Cr]!==fr[Cr]){Or=!1;break}Rr=Or}else Rr=!0}Rr&&n.postMessage({cmd:"recvSEI",streamID:li,buffer:Array.from(Ni)})}else if(Vi===244){for(Fi=0;ai[vi]===255;)Fi+=255,vi++;if(Fi+=ai[vi++],Mt.data.byteLength-vi<Fi)break;var uo=parseInt(Fi/5+""),ei=ai.slice(vi,vi+=Fi),ln=[];for(Cr=0;Cr<uo;Cr++){var mn=5*Cr,is=ei.slice(mn,mn+4),y0=ei.slice(mn+4,mn+5),_0=a(is);ln.push({soundLevelID:_0,value:y0[0]})}n.postMessage({cmd:"mixSoundLevel",soundLevelList:ln,streamID:kt.streamID})}}Gt.enqueue(Mt)}else Gt.enqueue(Mt)}(Ft,Ct,Ae)}),Ze){var vt=new TransformStream({transform:Ze});Te.pipeThrough(vt).pipeTo(Pe)}}function ee(be){var Te=r[be];return Te||(r[be]={streamID:be,sideInfos:[],lowStreamSideInfos:[],type:243,emulationPreventionByte:!1},r[be])}function ie(be){var Te=s[be];return Te||(s[be]={streamID:be,emulationPreventionByte:!1,codec:"",unregisterSeiFilter:"",filterSize:0},s[be])}function ae(be){var Te=be.cmd;if(Te==="encode"){var Pe=be.readable,Ae=be.writable,Be=be.streamID,Ze=be.type,st=be.isLowStream,Rt=be.emulationPreventionByte,At=be.onlyAudio;if((Ft=be.kind)!=="audio"){var vt=ee(Be);vt.type=Ze,vt.emulationPreventionByte=Rt}o[Be]={isLowStream:st,kind:Ft,onlyAudio:At},F(Te,Pe,Ae,Be,o)}else if(Te==="decode"){Pe=be.readable,Ae=be.writable,Be=be.streamID,Rt=be.emulationPreventionByte;var Ft,Ct=be.codec,Mt=be.unregisterSeiFilter,Gt=be.filterSize;if((Ft=be.kind)!=="audio"){var li=ie(Be);li.emulationPreventionByte=Rt,li.codec=Ct,li.unregisterSeiFilter=Mt,li.filterSize=Gt}u[Be]={isLowStream:!1,kind:Ft},F(Te,Pe,Ae,Be,u)}}onmessage=function(be){var Te=be.data,Pe=Te.cmd;try{switch(Pe){case"encode":case"decode":ae(Te);break;case"updatePlayer":var Ae=Te.codec;ie(vt=Te.streamID).codec=Ae;break;case"pushSideInfo":var Be=Te.buffer,Ze=Te.hasLowStream,st=Te.maxLength,Rt=ee(vt=Te.streamID);Rt.sideInfos.length>st?console.error("Send SEI Failed. The number of inserted sei exceeds the limit."):(Rt.sideInfos.push(Be),Ze&&Rt.lowStreamSideInfos.push(Be));break;case"publishStreamType":var At=o[vt=Te.streamID];At&&(At.onlyAudio=Te.onlyAudio);break;case"clear":var vt=Te.streamID;Te.type=="push"?(delete r[vt],delete o[vt]):(delete u[vt],delete s[vt])}}catch(Ft){n.postMessage({cmd:"error",error:Ft})}},n.RTCTransformEvent&&(n.onrtctransform=function(be){var Te=be.transformer;ae(Object.assign({readable:Te.readable,writable:Te.writable},Te.options))})}var io,bg=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rs=function(){return Rs=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Rs.apply(this,arguments)},_f=Ys.webrtc_cmd;(function(n){n[n.NotReUse=0]="NotReUse",n[n.TheSameReUse=1]="TheSameReUse",n[n.DiffReUse=2]="DiffReUse",n[n.AllReUse=3]="AllReUse"})(io||(io={}));var Io=xi,ed=Io.event,rc=Io.error,ro=sr,nc=ro.event,no=ro.error,Oo=G,vu=at,Sg=function(n){function e(t,i,r,s,o,u){var m,f,a=this;return(a=n.call(this)||this).Oi=t,a._i=i,a.dataReport=r,a.rtm=s,a.acMgr=o,a.geo=u,a.testEnvironment=!1,a.playModule=null,a.heartbeatTimer=null,a.heartbeatInterval=1e4,a.trackUtils=new yg(a.Oi),a.qualityTimerInterval=3e3,a.qualityUploadInterval=3e3,a.previewStreamList=[],a.signalList={},a.soundLevelDelegate=!1,a.soundLevelInterval=1e3,a.enableInBackground=!1,a.isPeer=!0,a.probeList={},a.isMicEnabled=!0,a.isDataChannelEnabled=!1,a.targetQuality=it.MiddleMinQuality,a.gwNode="",a.playerList={},a.stopedPlayerList={},a.publisherList={},a.playSuccessCallBackList={},a.playErrorCallBackList={},a.waitPublishList=[],a.waitPlayList=[],a.autoSwitchProtocol=!0,a.udpFailNum=0,a.maxUdpFailNum=2,a.qualityInterval=3e3,a.switchScore=60,a.defaultBadQualityTime=3e4,a.l3BadQualityTime=1e4,a.switchDetectResultScore=60,a.cdnBadQualityScore=60,a.l3BadQualityScore=60,a.multiPlaySwitchRate=.8,a.protocolBadQualityCount=3,a.protocolBadQualityTime=12e3,a.protocolQualityCacheExpiredTime=18e4,a.fallbackInhibitionTime=18e4,a.probeExpiredTime=3e4,a.minProbeInterval=15e3,a.l3DetectedTimestamp=0,a.l3DetectResult=0,a.isL3Fallback=!1,a.cdnProtocolBadTimestamp=0,a.l3ProtocolBadTimestamp=0,a.lastHandleCDNBadTimestamp=0,a.lastHandleL3BadTimestamp=0,a.cdnProtocolBadTime=0,a.l3ProtocolBadTime=0,a.probeStartedNum=3,a.cachedGwNodesList={},a.cachedGwNodesMode=io.TheSameReUse,a.txQuality=-1,a.rxQuality=-1,a.isRegisterQualityPush=!1,a.netTimer=null,a.useCopyMusic=!1,a.playEventKeys={},a.isCustomVC=!1,a.lazyEndSignalHandler=(f={},{isLazyEnd:function(){return!0},startLazyEndTimer:function(S,F){f[S]&&clearTimeout(f[S].timer),f[S]={},f[S].callback=F,f[S].timer=setTimeout(function(){F(),delete f[S]},9e4)},clearLazyEndTimer:function(S){f[S]&&(clearTimeout(f[S].timer),delete f[S])},endAll:function(){for(var S in f)clearTimeout(f[S].timer),f[S].callback(),delete f[S]},hasEndTask:function(S){return!!f[S]},end:function(S){f[S]&&(clearTimeout(f[S].timer),f[S].callback(),delete f[S])}}),a.miniSdpWorker=null,a.tryCountConnectInterval=3e3,a.checkMessageTimeout=function(){for(var S in a.signalList)a.signalList[S].signal&&a.signalList[S].signal.checkMessageTimeout()},a.getAllInUseUrl=function(){var S=[];for(var F in a.signalList)S.push(F);return S},a.onDisconnectHandle=function(S,F){if(a.Oi.info("zsc.od.0 call"),a.signalList[S]){for(var ee=a.signalList[S],ie=0;ie<ee.publishConnectedList.length;ie++){var ae=a.publisherList[ee.publishConnectedList[ie]];ae&&ae.publisher&&ae.publisher.onDisconnect(F)}for(ie=0;ie<ee.playConnectedList.length;ie++){var be=a.playerList[ee.playConnectedList[ie]];be&&be.player&&be.player.onDisconnect(F)}delete a.signalList[S],a.stopSignalHeartbeat(),a.billingTimer.stopChargeInfosUpload(),a.stopSoundLevel()}},a.onReconnectHandle=function(S){var F;for(var ee in a.Oi.info("zsc.orh.0 call"),a.publisherList){var ie=a.publisherList[ee].publisher,ae=a.publisherList[ee].retryStreamHandler;ie.state==$||ie.stateNego!==He.iceConnected?!ae.isOverTime&&ae.publishStateHandle(bt,ee,rc.yt):ie.state==le&&ae.stopMaxTime()}for(var ee in a.playerList){var be=a.playerList[ee],Te=be.player;ae=be.retryStreamHandler,((F=Te.signal)===null||F===void 0?void 0:F.server)===S&&(Te.state==M||be.playMode!==tt.CDN&&Te.stateNego!==ve.iceConnected?!ae.isOverTime&&ae.playStateHandle(vu,ee,no.ei):Te.state==Oo&&ae.stopMaxTime())}},a.eventHandler={visibilitychange:function(){!a.enableInBackground&&a.soundLevelDelegate&&(Tt.hidden?(a.soundLevelTimer&&clearTimeout(a.soundLevelTimer),a.soundLevelTimer=null,a.enableSoundLevelProcessor(!1)):(a.enableSoundLevelProcessor(!0),a.activeSoundLevel(),a.ac.state==="suspended"&&a.ac.resume()))}},a.isNotSupportSeiWorker=!1,a.turnServers=void 0,a.rtm._on("_roomStateUpdate",function(S,F){for(var ee in a.playerList){var ie=a.playerList[ee],ae=ie.cdnPlayer,be=ie.player;ie.room.roomID==S&&ae&&be.state===Oo&&ie.playMode==tt.CDN&&(F=="CONNECTED"?(ae.canRetry=!0,be.CDNBrokenCnt++,ae.retry()):F==="DISCONNECTED"&&a.stopPlayingStream(ee))}}),Tt.addEventListener("visibilitychange",a.eventHandler.visibilitychange),(m=a.rtm.netAgent)===null||m===void 0||m.on("clientInfo",function(S){if(a._i.accessClientIp&&(S!=null&&S.clientIP)&&a._i.accessClientIp!==S.clientIP){for(var F in a.Oi.info(Xd+" client ip changed "+a._i.accessClientIp+" "+S.clientIP),a.publisherList){var ee=a.publisherList[F].publisher;ee.resetGwNodes(),a.clearCachedGwNodesList(ee,!0)}for(var F in a.playerList){var ie=a.playerList[F].player;ie.resetGwNodes(),a.clearCachedGwNodesList(ie,!1)}}a._i.accessClientIp=S.clientIP,qi(S==null?void 0:S.timeOffset)&&(a._i.clientTimeOffset=S==null?void 0:S.timeOffset),a.updateTimeOffsetInterval(),a._i.accessClientIp=S.clientIP}),a.streamReport=new hg(t,i,a),a}return bg(e,n),Object.defineProperty(e.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!!(g.ZegoExpressWebRTM.proxyCtrl&&this._i.engineConfig.notProxyRTC!==!0||this.isLocalProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocalProxy",{get:function(){return!!this.turnServers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this._billingTimer||(this._billingTimer=new mg(this.Oi,this._i)),this._billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chargeInfosSaver",{get:function(){return this._chargeInfosSaver||(this._chargeInfosSaver=new gg(this.Oi,this._i)),this._chargeInfosSaver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find(function(t){return t.previewType==="camera"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"microphonePreviews",{get:function(){return this.previewStreamList.filter(function(t){return t.previewType==="camera"&&t.micTrack})},enumerable:!1,configurable:!0}),e.prototype.initMiniSdpWorker=function(t){var i;t&&yf.isSupported?this.miniSdpWorker=this.miniSdpWorker||new yf:((i=this.miniSdpWorker)===null||i===void 0||i.destroy(),this.miniSdpWorker=null)},e.prototype.onSignalDisconnected=function(t){},e.prototype.setQualityMonitorCycle=function(t){var i=this;return this.Oi.debug("zsc.qmc.0 timeInterval "+t),Object.keys(this.publisherList).length==0?this.qualityTimerInterval=t:Object.keys(this.publisherList).forEach(function(r){i.publisherList[r].publisher.qualityTimeInterval=t,i.publisherList[r].publisher.qualityHandler.setPublishQualityTimer()}),!0},e.prototype.setSessionInfo=function(t,i,r){this.Oi.debug("zsc.ssi.0 called"),this.appid=t,this.userid=i,this.testEnvironment=r},e.prototype.onPlayStateUpdate=function(t,i,r,s){},e.prototype.onPlayQualityUpdate=function(t,i){},e.prototype.onPublishStateUpdate=function(t,i,r){},e.prototype.onPublishQualityUpdate=function(t,i){},e.prototype.onUpdateHeartBeatIntervalHandle=function(t){t!=this.heartbeatInterval&&(this.Oi.debug("zsc.uhb.0 update "+t),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=t,this.startSignalHeartbeat())},e.prototype.setPublishStateStart=function(t,i,r,s,o,u){var m,f,a=this;this.Oi.info("zsc.pss.0 call "+i);var S=this.checkPreview(r);if(!S)return this.Oi.error("zsc.pss.0 stream not found"),!1;if(this.publisherList[i])return this.Oi.error("zsc.pss.0 publisher already exist"),this.ji.spanSetAttributes({key:ed,par:i},{error:rc.qt.code,message:rc.qt.message}),!1;var F=new Gl(i,this.Oi,this.dataReport,this._i.engineConfig.publishQualityInterval||this.qualityTimerInterval,this.qualityUploadInterval,this,this._i,S);this.isProxy&&this.isPeer&&this.setIsPeer(!1),F.isPeer=this.isPeer,F.reportSeq=this._i.reportSeqList.startPublish[i],F.isExternal=!0,F.cachedGwNodesMode=this.cachedGwNodesMode,F.parentSpanKey=Ur.event;var ee=(m=S==null?void 0:S.videoTrack)===null||m===void 0?void 0:m.label,ie="",ae="",be=r.getAudioTracks()[0]&&r.getAudioTracks()[0].label;try{ie=(f=S==null?void 0:S.videoTrack)===null||f===void 0?void 0:f.getSettings().deviceId,ae=r.getAudioTracks()[0]&&r.getAudioTracks()[0].getSettings().deviceId}catch(Pe){this.Oi.warn("zsc.pss.0 get device id failed. error: "+Pe)}var Te=new gf(this.Oi,this._i,this,!0);return this.publisherList[i]={seq:0,room:t,localStream:r,publisher:F,serverUrls:[],ttl:0,isCenterNode:!0,streamID:i,publishOption:s,cameraLabel:ee||"",microLabel:be||"",cameraDeviceId:ie||"",microDeviceId:ae||"",deviceStateCount:0,retryStreamHandler:Te,retryDispatchHandler:new vf(this.Oi,this._i,this.rtm,this),isDataChannel:u,streamSid:o,isRetweetCDN:!1},F.onPublishStateUpdate=function(Pe,Ae,Be,Ze,st,Rt){var At=a.publisherList[Ae];At?At.retryStreamHandler.publishStateHandle(Pe,At.streamID,Be,Ze,st,Rt):a.Oi.error("zsc.psuh.0 cannot find publish "+i)},F.onPublishQualityUpdate=function(Pe,Ae){var Be=a.publisherList[Pe];Be?(a._i.deviceStateOut&&Ae.audio.audioBitrate===0?(Be.deviceStateCount++,Be.deviceStateCount>=2&&(Be.deviceStateCount=0,a._i.deviceStateOut=!1,a.Oi.warn("zsc.pss.0 publish audio error by device"))):Be.deviceStateCount=0,a.onPublishQualityUpdate(Be.streamID,Ae)):a.Oi.error("zsc.psuh.0 cannot find publish "+i)},!0},e.prototype.retweetCDN=function(t,i,r){var s=this;return new Promise(function(o,u){s.Oi.info("zsc.rwc.0 call ".concat(i," ").concat(t," ").concat(r));var m=s.getRoomByStreamID(i);m?m.streamHandler._publishTarget({type:t==="add"?"addpush":"delpush",streamID:i,pushUrl:r},function(){s.Oi.info("zsc.rwc.0 suc "+i),o(void 0)},function(f){s.Oi.warn("zsc.rwc.0 fail "+i+" "+JSON.stringify(f)),u(f)}):s.Oi.info("zsc.rwc.0 no room")})},e.prototype.startPublishingStream=function(t,i){var r,s=this;this.Oi.info("zsc.sps.0 call");var o=this.publisherList[t];if(!o)return this.Oi.error("zsc.sps.0 publisher don't exist"),!1;!((r=o.publishOption)===null||r===void 0)&&r.cdnUrl&&!o.isRetweetCDN&&this.retweetCDN("add",t,o.publishOption.cdnUrl).then(function(){s.Oi.info("zsc.sps.0 add cdn suc"),o.isRetweetCDN=!0}).catch(function(m){s.Oi.warn("zsc.sps.0 add cdn fail "+JSON.stringify(m))});var u=o.retryStreamHandler;return u.invalid(),u.init(this._i.streamRetryTime),u.initStream(t,o.serverUrls),u.startMaxTime(),u.activePublish(0)},e.prototype.updateWaitingList=function(t,i,r,s,o){var u={streamID:r,success:s,error:o};i?t.publishWaitingList.push(u):t.playWaitingList.push(u)},e.prototype.publishStream=function(t){var i=this;this.Oi.info("zsc.ps.0 ".concat(t," call"));var r=this.publisherList[t].publisher;if(r)if(this.Oi.info("zsc.ps.0 ".concat(t," state ").concat(r.state)),r.state===$){var s=null,o=null,u=this.publisherList[t].publishOption,m=this.checkPreview(this.publisherList[t].localStream);m?(o=m.videoInfo,(s=m.localStream)&&s.getTracks().forEach(function(f){Jr(f,i.Oi,"zsc.ps.0")}),this.ji.spanSetAttributes({key:ed,par:t},{cap_w:Io.cap_w(m.videoInfo.width),cap_h:Io.cap_h(m.videoInfo.height),w:Io.w(m.videoInfo.width),h:Io.h(m.videoInfo.height),video_en_fps:Io.video_en_fps(m.videoInfo.frameRate),video_en_bps:Io.video_en_bps(1e3*m.videoInfo.bitRate)}),s?(this.Oi.info("zsc.ps.0 call success"),this.setStreamGwNode(r,!0),r.startPublish(t,s,o,m.mediaStreamConfig,u)):this.Oi.error("zsc.ps.0 no localStream found")):this.Oi.error("zsc.ps.0 no preview found")}else this.Oi.warn("zsc.ps.0 ".concat(t," publisher is progress"));else this.Oi.info("zsc.ps.0 publisher don't exist")},e.prototype.connectPublishServer=function(t,i){var r=this,s=this.publisherList[t];if(!s)return this.Oi.error("zsc.cps.0 publisher don't exist"),!1;var o=Date.now();return this.ji.createSpan(It.H,{key:s.publisher.parentSpanKey,par:t},{key:fi,par:t},fi,!0),this.connectWithReuseSignalServer(t,!0,i,function(u,m,f){var a=r.publisherList[u];if(a){var S=a.publisher;if(S){var F=Date.now()-o;r.ji.spanSetAttributes({key:S.parentSpanKey,par:u},{dispatch_consume:Un.dispatch_consume(F)}),S.reportSpan.setAttributes({server_url:Ls.server_url(f)}),r.ji.spanSetAttributes({key:ed,par:u},{server_url:Io.server_url(f)}),r.ji.spanEnd({key:fi,par:u},{result:0,server_url:Ci(f)}),r.Oi.info("zsc.cps.0 update token success"),S.signal=m.signal,r.server=f}else r.Oi.info("zsc.cps.1 check publisher don't exist")}else r.Oi.info("zsc.cps.0 after connect publisher don't exist")},function(u,m){r.Oi.error("zsc.cps.0 "+u+" connect fail "+JSON.stringify(m));var f=r.publisherList[u];if(f)if(f.publisher){var a,S=!1;m&&m.code===Ve.code?(a=Rs({},Ve),S=!0):((a=Rs({},jt)).message=a.message+" "+m,m===1008&&(a=qt,S=!0),m===20010&&(S=!0,a=JSON.parse(JSON.stringify(Zi)))),r.ji.spanEnd({key:fi,par:u},{result:m,error:a.code,message:a.message}),f.retryStreamHandler.publishStateHandle(bt,u,a,S)}else r.Oi.info("zsc.cps.1 check publisher don't exist");else r.Oi.info("zsc.cps.0 after connect publisher don't exist")},function(u,m){r.Oi.info("zsc.cps.0 "+t+" connect complete");var f=r.publisherList[t];if(f){var a=f.publisher;a?(a.signal=m.signal,r._i.useNetAgent&&r.startPublishingTask(u)):r.Oi.info("zsc.cps.1 check publisher don't exist")}else r.Oi.info("zsc.cps.0 after connect publisher don't exist")}),!0},e.prototype.startPublishingTask=function(t){this.Oi.info("zsc.spt.0 call "+t),this.publishStream(t),this.billingTimer.startChargeInfosUpload(),this.activeSoundLevel()},e.prototype.startPlayingTask=function(t,i){this.Oi.info("zsc.spt.1 call "+t),this.playStream(t,i),this.billingTimer.startChargeInfosUpload(),this.activeSoundLevel()},e.prototype.stopPublishingStream=function(t,i){var r=this;this.Oi.info("zsc.sps.0.1 call "+t+" "+JSON.stringify(i));var s=this.publisherList[t];if(s){var o=s.retryStreamHandler;for(var u in o&&(o.stopMaxTime(),o.invalid()),this.signalList)this.signalList[u].publishWaitingList=this.signalList[u].publishWaitingList.filter(function(f){return f.streamID!==t});s.isRetweetCDN&&s.publishOption.cdnUrl&&this.retweetCDN("del",t,s.publishOption.cdnUrl).then(function(){s.isRetweetCDN=!1,r.Oi.info("zsc.sps.0.1 del cdn suc")}).catch(function(f){r.Oi.warn("zsc.sps.0.1 del cdn fail "+JSON.stringify(f))}),delete this.publisherList[t],this.resetNetworkData();var m=s.publisher;m&&(o.getTryTime(m),m.stopPublish(i),delete s.publisher),this.removeStreamFromSignal(!0,t),this.stopSignalHeartbeat(),this.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),this.Oi.info("zsc.sps.0.1 call success")}else this.Oi.warn("zsc.sps.0.1 publisher don't exist")},e.prototype.getSignalNodes=function(){var t;if(this._i.customUrl&&this._i.customUrl.length!=0)this.Oi.info("zsc.gsn customUrl "+JSON.stringify(this._i.customUrl)),t=this._i.customUrl;else{var i=this._i.settingConfig.getSetting("signal_nodes",!0);i&&In(i)&&i.length>0&&(t=i,this.Oi.info("zsc.gsn setting config signal_nodes "+JSON.stringify(i)))}return t},e.prototype.isUseAgentByServerURL=function(t){return["unified_rtc","unified_l3"].includes(t)},e.prototype.createStreamSignal=function(t,i){var r=this.isUseAgentByServerURL(t),s=new uf(this.Oi,this._i,this.rtm.netAgent,r);if(this._i.clientIP=this.rtm.netAgent.clientIP,s.setSessionInfo(this.appid,this.userid),s.onDisconnect=this.onDisconnectHandle,s.onReConnect=this.onReconnectHandle,i){var o=this.publisherList[i]||this.playerList[i]||null,u=o==null?void 0:o.retryStreamHandler;if(this._i.streamConnectTime)s.tryConnectInterval=this._i.streamConnectTime;else if(u&&u.retryActiveCount){var m=u.retryActiveCount*(u.retryActiveCount-1)/2+2;s.tryConnectInterval=1e3*(m=m>12?12:m)}}else s.tryConnectInterval=1e3*this._i.defaultConnTime;return this.signalList[t]={signal:s,state:E.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},s},e.prototype.onSignalConnSuccess=function(t,i,r){this.Oi.info("zsc.crss.0 connected success "+i),t.state=E.connected,t.tokenInfo=r,t.publishWaitingList.forEach(function(s){s.success&&s.success(s.streamID,t,i),t&&t.publishConnectedList.push(s.streamID)}),t.playWaitingList.forEach(function(s){s.success&&s.success(s.streamID,t,i),t&&t.playConnectedList.push(s.streamID)}),t.publishWaitingList=[],t.playWaitingList=[],this._i.useNetAgent||this.heartbeatTimer!=null||this.startSignalHeartbeat()},e.prototype.onSignalConnFailed=function(t,i,r,s){this.Oi.info("zsc.crss.0 connect failed "+r);for(var o=t.publishWaitingList,u=o.length-1;u>=0;u--)(f=o[u]).error&&f.error(f.streamID,i);var m=t.playWaitingList;for(u=m.length-1;u>=0;u--){var f;(f=m[u]).error&&f.error(f.streamID,i)}delete this.signalList[s]},e.prototype.connectWithReuseSignalServer=function(t,i,r,s,o,u){var m=this;this.Oi.info("zsc.crss.0 begin "+r),this.lazyEndSignalHandler.isLazyEnd()&&this.lazyEndSignalHandler.clearLazyEndTimer(r);var f=null;if(this.signalList[r])(f=this.signalList[r]).state==E.connected?(this.Oi.info("zsc.crss.0 already connected "+r+" streamId: "+t),i?f.publishConnectedList.push(t):f.playConnectedList.push(t),u(t,f),s(t,f,r)):f.state==E.connecting&&(this.Oi.info("zsc.crss.0 signal is connecting "+r+" streamId: "+t),u(t,f),this.updateWaitingList(f,i,t,s,o));else{this.Oi.info("zsc.crss.0 new signal "+r+", streamId: "+t);var a=this.createStreamSignal(r,t);this.updateWaitingList(this.signalList[r],i,t,s,o);var S=this.publisherList[t]||this.playerList[t]||null,F=S==null?void 0:S.room.token,ee=S==null?void 0:S.room.roomID;this.Oi.remoteReport("zsc.crss.0 "+F),a.connectServer(ee||this._i.roomList[0].roomID,F||this._i.roomList[0].token,r,function(ie,ae,be){f=m.signalList[r],ie!=0?m.onSignalConnFailed(f,ie,ae,r):(m.onSignalConnSuccess(f,ae,be),m.billingTimer.startChargeInfosUpload(),m.activeSoundLevel())}),u(t,this.signalList[r])}},e.prototype.connectStreamSignal=function(t,i){var r=this;this.Oi.info("zsc.cnss.0 call");var s,o=this.getSignalNodes();if(o?s=o[0]:this._i.useNetAgent&&(s="unified_rtc"),s&&this.isUseAgentByServerURL(s)&&!this.signalList[s]){this.Oi.info("zsc.cnss.0 create signal");var u=this.createStreamSignal(s),m=i||this.rtm.getToken(t);u.connectServer(t||this._i.roomList[0].roomID,m||this._i.roomList[0].token,s,function(f,a,S){var F=r.signalList[s];f!=0?(r.Oi.info("zsc.cnss.0 signal conn fail"),r.onSignalConnFailed(F,f,a,s)):(r.Oi.info("zsc.cnss.0 signal conn success"),r.onSignalConnSuccess(F,a,S),F&&F.publishConnectedList.length==0&&F.playConnectedList.length==0&&F.publishWaitingList.length==0&&F.playWaitingList.length==0&&(r.Oi.info("zsc.cnss.0 no publishing and playing stream"),r.disconnectSignalURL(s,!0)))})}this.Oi.info("zsc.cnss.0 call success")},e.prototype.disconnectStreamSignal=function(){var t,i=this,r=this.getSignalNodes();r?t=r[0]:this._i.useNetAgent&&(t="unified_rtc"),!i.rtm.stateCenter.roomModulesList.some(function(s){return s.roomState!=="DISCONNECTED"})&&this.disconnectSignalURL(t,!1)},e.prototype.disconnectSignalURL=function(t,i){var r=this;this.Oi.info("zsc.dcsu.0 "+t+" "+i+" call");var s=this.signalList[t];if(s!=null&&s.signal){var o=s.signal;i&&this.lazyEndSignalHandler.isLazyEnd()?(this.Oi.info("zsc.dcsu.0 lazy end"),this.lazyEndSignalHandler.startLazyEndTimer(t,function(){r.Oi.info("zsc.dcsu.0 lazy end start"),o&&o.disconnectServer(),r.stopSignalHeartbeat(),delete r.signalList[t],r.Oi.info("zsc.dcsu.0 lazy end signal")})):this.lazyEndSignalHandler.isLazyEnd()&&this.lazyEndSignalHandler.hasEndTask(t)?(this.Oi.info("zsc.dcsu.0 has task to end"),this.lazyEndSignalHandler.end(t)):(this.Oi.info("zsc.dcsu.0 direct disconnect"),o&&o.disconnectServer(),delete this.signalList[t]),this.Oi.info("zsc.dcsu.0 call success")}else this.Oi.info("zsc.dcsu.0 "+t+"  already disconnect.")},e.prototype.reConnectSignals=function(){var t=this;this.Oi.info("zsc.rcs.0 call");var i=function(o){var u=r.signalList[o],m=u.signal;m&&u.state===E.connecting&&m.connectServer(m.roomID||r._i.roomList[0].roomID,m.token||r._i.roomList[0].token,o,function(f,a,S){f!=0?t.onSignalConnFailed(u,f,a,o):t.onSignalConnSuccess(u,a,S)})},r=this;for(var s in this.signalList)i(s)},e.prototype.setPlayStateStart=function(t,i,r,s){var o=this;if(this.Oi.info("zsc.pss.1 call "+t),this.rtm.isDisConnect()&&this._i.networkState==he.offline)return this.Oi.error("zsc.pss.1 network offline"),no.ei;if(this.playerList[t])return this.Oi.error("zsc.pss.1 player already exist"),this.ji.spanEnd({key:nc,par:t},{error:no.ci.code,message:no.ci.message}),no.Zt;var u=this.getPlayRoom(t)||this._i.roomList[0];if(!u)return this.Oi.error("zsc.pss.1 not login room"),this.ji.spanEnd({key:nc,par:t},{error:no.Yt.code,message:no.Yt.message}),no.Yt;var m=new og(t,this.Oi,null,this.dataReport,this._i.engineConfig.playQualityInterval||this.qualityTimerInterval,this.qualityUploadInterval,this,this.ac,this._i);!this.getStream(u,t)&&(m.streamInRoom=!1),i&&[0,1,2,3].includes(i.resourceMode)&&(m.resourceMode=i.resourceMode),this.isProxy&&this.isPeer&&this.setIsPeer(!1),m.isPeer=this.isPeer,m.reportSeq=this._i.reportSeqList.startPlay[t],m.isExternal=!0,m.cachedGwNodesMode=this.cachedGwNodesMode,m.parentSpanKey=Un.event,m.beginTime=new Date().getTime();var f=new gf(this.Oi,this._i,this,!1),a=tt.CDN,S="cdn",F=new Date().getTime();for(var ee in this.playerList)if(this.playerList[ee].playMode==tt.L3){a=tt.L3,S="l3";break}this.cdnProtocolBadTimestamp&&this.cdnProtocolBadTimestamp+this.protocolQualityCacheExpiredTime>F&&this.l3ProtocolBadTimestamp==0&&(a=tt.L3,S="l3"),this.ji.spanSetAttributes({key:nc,par:t},{resource_mode:ro.resource_mode(m.resourceMode),src:ro.src(m.resourceMode===Et.DG?S:ls(m.resourceMode)),room_id:ro.room_id(u==null?void 0:u.roomID),room_sid_string:ro.room_sid_string(u==null?void 0:u.roomSessionID),is_multi:ro.is_multi(this._i.isMultiRoom)}),m.playMode=a;var ie=this.ji;return this.playerList[t]={seq:0,room:u,player:m,signal:null,serverUrls:[],ttl:0,isCenterNode:!0,streamID:t,playOption:i,retryStreamHandler:f,retryDispatchHandler:new vf(this.Oi,this._i,this.rtm,this),isDataChannel:s,cdnPlayer:i==null?void 0:i.CDNPlayer,playMode:a,streamSid:r,stopCDNPlayer:function(){this.cdnPlayer&&(this.cdnPlayer.stop(),ie.spanEnd({key:Le,par:this.streamID}),this.player.updateCDNValidTime())}},m.onPlayStateUpdate=function(ae,be,Te,Pe,Ae,Be){var Ze=o.playerList[be];Ze?f.playStateHandle(ae,Ze.streamID,Te,Pe,Ae,Be):o.Oi.error("zsc.pss.1 cannot find play "+be)},m.onPlayQualityUpdate=function(ae,be){var Te=o.playerList[ae];Te?o.onPlayQualityUpdate(Te.streamID,be):o.Oi.error("zsc.pss.1 cannot find play "+ae)},m.onRemoteCameraStatusUpdate=function(ae,be,Te){var Pe=o.playerList[ae];Pe?o.onRemoteCameraStatusUpdate(Pe.streamID,be,Te):o.Oi.error("zsc.pss.1 cannot find play "+ae)},m.onRemoteMicStatusUpdate=function(ae,be,Te){var Pe=o.playerList[ae];Pe?o.onRemoteMicStatusUpdate(Pe.streamID,be,Te):o.Oi.error("zsc.pss.1 cannot find play "+ae)},!0},e.prototype.onRemoteMicStatusUpdate=function(t,i,r){},e.prototype.onRemoteCameraStatusUpdate=function(t,i,r){},e.prototype.startPlayingStream=function(t,i,r,s){var o;this.Oi.info("zsc.sps.1 start play called");var u=this.playerList[t];if(!((o=u.playOption)===null||o===void 0)&&o.CDNVideo&&u.player.firstPlay){var m=u.playOption.CDNVideo;u.player._CDNPlayerClone=m.cloneNode(),u.player.initPoster=(m==null?void 0:m.getAttribute("poster"))||"",u.player.initVideoStyle=(m==null?void 0:m.getAttribute("style"))||"",u.player.firstPlay=!1}if(s)return this.playCDN(t,this.playerList[t].playOption,this.playSuccessCallBackList[t],this.playErrorCallBackList[t]),!0;if(!u)return this.Oi.error("zsc.sps.1 player don't exist"),!1;var f=u.player;t.indexOf("zegoprobe-")==-1&&u.playMode==tt.L3&&this.ji.createSpan(It.H,{key:sr.event,par:t},{key:Xe,par:t},Xe).setAttributes({tryidx:Ot(f.tryidx),biz_product:mi(u.playOption.resourceMode==Et.DG?1:0)}),this.ji.spanSetAttributes({key:nc,par:t},{urls:ro.urls(u.serverUrls),is_center:ro.is_center(u.isCenterNode)});var a=u.retryStreamHandler;return a.invalid(),a.init(this._i.streamRetryTime),a.initStream(t,u.serverUrls),a.startMaxTime(),a.activePull(0,r)},e.prototype.connectPlayServer=function(t,i,r){var s=this,o=this.playerList[t];if(!o)return this.Oi.error("zsc.cps.1 player don't exist"),!1;this.ji.createSpan(It.H,{key:o.player.parentSpanKey,par:t},{key:Pc,par:t},Pc,!0);var u=Date.now();return this.connectWithReuseSignalServer(t,!1,r,function(m,f,a){var S=s.playerList[m];if(S){var F=S.player;if(F){F.reportSpan.setAttributes({server_url:ho.server_url(a)});var ee=Date.now()-u;s.ji.spanSetAttributes({key:F.parentSpanKey,par:m},{dispatch_consume:Un.dispatch_consume(ee)}),s.ji.spanSetAttributes({key:nc,par:m},{server_url:ro.server_url(a)}),s.ji.spanEnd({key:Pc,par:m},{result:0,server_url:a}),s.Oi.info("zsc.cps.1 update token success"),F.signal=f.signal,s.server=a}else s.Oi.error("zsc.cps.1 checkplayer don't exist")}else s.Oi.error("zsc.cps.1 after connect player don't exist")},function(m,f){var a=s.playerList[m];if(a){var S=Rs({},jt);S.message=S.message+" "+f,f===1008&&(S=qt),s.ji.spanEnd({key:Pc,par:m},{result:f,error:S.code,message:S.message});var F=f==1008;f===20010&&(F=!0,S=r==="unified_l3"?gn:Ln),a.retryStreamHandler.playStateHandle(vu,m,S,F)}else s.Oi.error("zsc.cps.1 after connect player don't exist")},function(m,f){var a=s.playerList[m];if(a){var S=a.player;S?(S.signal=f.signal,s._i.useNetAgent&&s.startPlayingTask(t,i)):s.Oi.error("zsc.cps.1 checkplayer don't exist")}else s.Oi.error("zsc.cps.1 after connect player don't exist")}),!0},e.prototype.playStream=function(t,i){this.Oi.info("zsc.ps.1 ".concat(t," call"));var r=this.playerList[t].player;r?(this.Oi.info("zsc.ps.1 ".concat(t," state ").concat(r.state)),r.state===M?(this.Oi.info("zsc.ps.1 call success"),this.setStreamGwNode(r,!1),r.startPlay(t,i,this.playerList[t].playOption)):this.Oi.warn("zsc.ps.1 ".concat(t," player is progress"))):this.Oi.warn("zsc.ps.1 player don't exist")},e.prototype.stopSignalHeartbeat=function(){this.Oi.debug("zsc.ssh.1 call");var t=0;for(var i in this.signalList)t+=1;this.heartbeatTimer&&t==0&&(this.Oi.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},e.prototype.removeStreamFromSignal=function(t,i){var r=this;this.Oi.info("zsc.rsfs.0 call "+t+" "+i);var s=[],o=function(f){var a=u.signalList[f];if(t){for(var S=0;S<a.publishConnectedList.length;S++)if(a.publishConnectedList[S]===i){u.Oi.debug("zsc.rsfs.0 found from publish"),a.publishConnectedList.splice(S,1);break}for(S=0;S<a.publishWaitingList.length;S++)if(a.publishWaitingList[S].streamID===i){u.Oi.debug("zsc.rsfs.0 found from publish"),a.publishWaitingList.splice(S,1);break}}else{for(var F=0;F<a.playConnectedList.length;F++)if(a.playConnectedList[F]===i){u.Oi.debug("zsc.rsfs.0 found from play"),a.playConnectedList.splice(F,1);break}for(F=0;F<a.playWaitingList.length;F++)if(a.playWaitingList[F].streamID===i){u.Oi.debug("zsc.rsfs.0 found from play"),a.playWaitingList.splice(F,1);break}}var ee=function(){for(var ie=0;ie<s.length;ie++)delete r.signalList[s[ie]],r.server==s[ie]&&(r.server="")};a.publishConnectedList.length==0&&a.playConnectedList.length==0&&a.publishWaitingList.length==0&&a.playWaitingList.length==0&&(u.lazyEndSignalHandler.isLazyEnd()?(u.Oi.info("zsc.rsfs.0 lazy end "),u.lazyEndSignalHandler.startLazyEndTimer(f,function(){r.Oi.info("zsc.rsfs.0 lazy end start"),a.signal.disconnectServer(),s.push(f),ee(),r.stopSignalHeartbeat()})):(a.signal.disconnectServer(),s.push(f))),ee()},u=this;for(var m in this.signalList)o(m)},e.prototype.stopPlayingStream=function(t,i,r){var s=this.playerList[t];if(s){var o=s.retryStreamHandler,u=s.cdnPlayer;for(var m in o&&(o.stopMaxTime(),o.invalid()),this.signalList)this.signalList[m].playWaitingList=this.signalList[m].playWaitingList.filter(function(S){return S.streamID!==t});s.playMode==tt.CDN&&u&&s.stopCDNPlayer();var f=s.player;if(f.playStream&&xl.sourceDisConnect(f.playStream),delete this.playerList[t],this.resetNetworkData(),f){o.getTryTime(f),f.stopPlay(i,r);var a=f.rtcViewer;a&&a.stop()}this.removeStreamFromSignal(!1,t),this.stopSignalHeartbeat(),this.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[t],delete this.playErrorCallBackList[t],this.Oi.debug("zsc.sps.1.1 call success")}else this.Oi.info("zsc.sps.1.1 player don't exist")},e.prototype.reset=function(t,i,r){var s,o;for(var u in this.Oi.info("zsc.rs call "+t+" "+i+" "+r),this.publisherList){var m=this.publisherList[u];if(m.room.roomID==t||!t){var f=m.publisher,a=!1;i===0?(a=!0,f.stopReason="Logout"):i==1002031&&(f.stopReason="ReachMaxAVRetryTime");var S=i==1002031?rc.It:{code:i||0,message:""};a&&!f.se&&(S=rc.Jt),(o=(s=m.room)===null||s===void 0?void 0:s.streamHandler)===null||o===void 0||o.onPublishStateUpdate(bt,u,S),r&&this._i.waitPublishStreamList[u]?this._i.waitPublishStreamList[u].retryStart=!0:r||delete this._i.waitPublishStreamList[u],this.stopPublishingStream(u,S),delete this._i.publishStreamList[u]}}for(var F in this.playerList){a=!1;var ee=this.playerList[F],ie=ee==null?void 0:ee.player,ae=ie==null?void 0:ie.state;i===0?(a=!0,ee.player.stopReason="Logout"):ee.player.stopReason="ReachMaxAVRetryTime";var be=ee.room;r&&ae!==void 0&&ae<=Oo&&(this.stopedPlayerList[F]={streamID:F,playStream:ie.playStream,roomID:be.roomID,playOption:ee.playOption,state:ae,sucCallBack:ae!==Oo?this.playSuccessCallBackList[F]:void 0,errCallBack:ae!==Oo?this.playErrorCallBackList[F]:void 0});var Te=be&&be.roomID==t,Pe=this._i.roomList.length;if(S=i==1002031?no.si:{code:i||0,message:""},a&&ae!==void 0&&ae!==Oo&&(S=no.di),Te&&(this.getStream(be,F)||Pe==1))this.onPlayStateUpdate(vu,F,S),this.stopPlayingStream(F,S);else if(Te&&Pe>1){var Ae=this._i.roomList.find(function(Be){return Be.roomID!==t});Ae?this.playerList[F].room=Ae:(this.stopPlayingStream(F,S),this.onPlayStateUpdate(vu,F,S))}}Object.keys(this.publisherList).length==0&&Object.keys(this.playerList).length==0&&(this.probeList={},this.destroySEIWorker()),this.waitPublishList=[],this.waitPlayList=[],this.l3DetectedTimestamp=0,this.l3DetectResult=0,this.isL3Fallback=!1,this.cdnProtocolBadTimestamp=0,this.l3ProtocolBadTimestamp=0,this.lastHandleCDNBadTimestamp=0,this.lastHandleL3BadTimestamp=0,this.cdnProtocolBadTime=0,this.l3ProtocolBadTime=0,this.streamReport.resetReport(),this.Oi.info("zsc.rs call success")},e.prototype.startSignalHeartbeat=function(){var t=this;this.Oi.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout(function(){t.checkSignalHeartbeat()},this.heartbeatInterval)},e.prototype.checkSignalHeartbeat=function(){for(var t in this.Oi.debug("zsc.csh.0 call"),this.signalList)this.signalList[t].signal&&this.signalList[t].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},e.prototype.getPublisher=function(t){var i=null;if(bi(t)&&this.publisherList[t]&&this.publisherList[t].publisher)i=this.publisherList[t].publisher;else if(Ar(t)){var r=this.checkPublish(t);r&&(i=r==null?void 0:r.publisher)}return i},e.prototype.getPreviewer=function(t){var i,r=null;return bi(t)&&this.publisherList[t]&&this.publisherList[t].publisher?r=(i=this.publisherList[t].publisher)===null||i===void 0?void 0:i.previewer:Ar(t)&&(r=this.checkPreview(t)),r},e.prototype.checkPlayer=function(t){var i=Object.values(this.playerList).find(function(r){return r.player.playStream===t});return(i==null?void 0:i.player)||null},e.prototype.checkPreview=function(t){for(var i=0;i<this.previewStreamList.length;i++)if(this.previewStreamList[i].localStream===t||t&&!Ar(t)&&t.zegoStream&&this.previewStreamList[i].zegoCaptureStream==t.zegoStream)return this.previewStreamList[i];return null},e.prototype.checkPublish=function(t){for(var i in this.publisherList)if(this.publisherList[i].localStream==t)return this.publisherList[i];return null},e.prototype.getPublishList=function(t,i){var r;i===void 0&&(i=!0);var s=[],o=this.checkPreview(t);for(var u in i&&(o!=null&&o.zegoCaptureStream)&&(!((r=o.zegoCaptureStream)===null||r===void 0)&&r.stream)&&(t=o.zegoCaptureStream.stream),this.publisherList)this.publisherList[u].localStream==t&&s.push(this.publisherList[u]);return s},e.prototype.removePreview=function(t){for(var i=0;i<this.previewStreamList.length;i++)if(this.previewStreamList[i]===t){this.previewStreamList.splice(i,1);break}},e.prototype.onPlayerStreamUrlUpdate=function(t,i,r){},e.prototype.getScreenConstrains=function(t){var i={};if(Li(t)&&t)i={audio:!1,video:{frameRate:Y.frameRate},bitRate:this._i.settingConfig.getSetting("screen_video_bitrate")||Y.bitRate};else if(tr(t)){switch(t.videoQuality){case 1:i={video:{frameRate:se.frameRate},bitRate:se.bitRate};break;case 3:i={video:{frameRate:pe.frameRate},bitRate:pe.bitRate};break;case 4:i={video:{frameRate:t.frameRate,width:t.width,height:t.height},bitRate:t.bitRate};break;case 2:i={video:{frameRate:Y.frameRate},bitRate:Y.bitRate};break;default:i={video:{frameRate:Y.frameRate},bitRate:this._i.settingConfig.getSetting("screen_video_bitrate")||Y.bitRate}}i.audio=!!Li(t.audio)&&t.audio,i=Rs(Rs({},t),i)}return i},e.prototype.createScreenPreviewer=function(t,i){var r=new vs(this.Oi,this._i,this,"screen"),s=t.getVideoTracks()[0].getSettings();return this.previewStreamList.push(r),r.mediaStreamConfig=i,r.localStream=t,r.initMediaTrack(t),r.videoInfo={width:s.width,height:s.height,frameRate:s.frameRate||15,bitRate:(i==null?void 0:i.bitRate)||1e3,startBitrate:(i==null?void 0:i.startBitrate)||this._i.settingConfig.getSetting("bitrate_mode"),minBitrate:i==null?void 0:i.minBitrate,keyFrameInterval:i==null?void 0:i.keyFrameInterval,channelCount:i==null?void 0:i.channelCount},r.previewSuc=!0,r.previewType="screen",r.videoPreviewType="screen",r.audioPreviewType="screen",i!=null&&i.videoOptimizationMode&&this.setVideoTrackContentHint(t,i==null?void 0:i.videoOptimizationMode),r},e.prototype.createCompositingPreviewer=function(t,i,r){var s=new vs(this.Oi,this._i,this,"compositing"),o=t.getVideoTracks()[0].getSettings();return this.previewStreamList.push(s),s.mediaStreamConfig=i,t.getAudioTracks().length>0&&(s.audioTrack=t.getAudioTracks()[0]),s.localStream=t,s.videoInfo={width:(i==null?void 0:i.width)||o.width,height:(i==null?void 0:i.height)||o.height,frameRate:(i==null?void 0:i.frameRate)||o.frameRate||15,bitRate:i==null?void 0:i.bitrate},s.previewSuc=!0,s.inputStreamOptions=r,s},e.prototype.setSoundLevelDelegate=function(t,i,r){r===void 0&&(r=!1),this.Oi.info("zsc.ssd.0 call"),this.soundLevelDelegate=t,this.enableInBackground=r,i&&this.setSoundLevelInterval(i),this.enableSoundLevelProcessor(t),t?(this.Oi.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.Oi.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},e.prototype.setSoundLevelInterval=function(t){var i,r;if(t&&this.soundLevelDelegate){for(var s in this.soundLevelInterval=t,this.previewStreamList)(i=this.previewStreamList[s].soundMeterWorklet)===null||i===void 0||i.setInterval(t);for(var s in this.playerList)(r=this.playerList[s].player.soundMeterWorklet)===null||r===void 0||r.setInterval(t)}},e.prototype.enableSoundLevelProcessor=function(t){for(var i in this.previewStreamList){var r=this.previewStreamList[i];t?r.startSoundLevel():r.stopSoundLevel()}for(var i in this.playerList){var s=this.playerList[i].player;t?s.startSoundLevel():s.stopSoundLevel()}},Object.defineProperty(e.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.signalList).length>0},enumerable:!1,configurable:!0}),e.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},e.prototype.startSoundLevel=function(){var t=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.hasRemoteStream&&this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout(function(){t.startSoundLevel()},this.soundLevelInterval))},e.prototype.checkSoundLevel=function(){this.Oi.debug("zsc.csl.0 call");var t=[];for(var i in this.publisherList){var r=0,s=this.publisherList[i].publisher,o=s.previewer;o&&(r=o.soundLevel),t.push({streamID:this.getBackStreamId(s.streamId),soundLevel:r,type:"push"})}for(var i in this.playerList){var u=this.playerList[i].player;u.streamId&&!u.isProbe&&t.push({streamID:this.getBackStreamId(u.streamId),soundLevel:u.soundLevel,type:"pull"})}this.soundLevelDelegate&&t.length>0&&this.onSoundLevelUpdate(t)},e.prototype.checkMicSoundLevel=function(){if(this.microphonePreviews.length&&this.soundLevelDelegate){var t=this.microphonePreviews.reduce(function(i,r){return r.soundLevel>i?r.soundLevel:i},0);this.onMicSoundLevelUpdate(t)}},e.prototype.getBackStreamId=function(t){return this.testEnvironment&&t?t.replace("zegotest-"+this.appid+"-",""):t},e.prototype.onSoundLevelUpdate=function(t){},e.prototype.onMicSoundLevelUpdate=function(t){},e.prototype.stopSoundLevel=function(){this.soundLevelTimer&&!this.hasRemoteStream&&this.previewStreamList.length===0&&(this.Oi.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},e.prototype.startNetProbe=function(t,i,r,s){var o=this,u=this.ji.createSpan(It.H,{key:xr},{key:""},d);if(this.isPeer)if(s){var m="zegoprobe-"+new Date().getTime();this.setPlayStateStart(m);var f=this.playerList[m]?this.playerList[m].player:null;if(!f)return;f.isProbe=!0,this.playerList[m].serverUrls=["unified_l3"],this.startPlayingStream(m,!0,function(){}),this.playerList[m].player.isProbeByDG=!0,f.onCalNetQualityResult=function(S,F){o.Oi.info("zc.ocnqr.0 l3 detect "+S+" "+F),o.stopPlayingStream(m),o.l3DetectResult=F,o.l3DetectedTimestamp=new Date().getTime()}}else{var a=!0;r&&r.length==0&&i&&(a=!1,r=t?this.publisherList[i.streamId].serverUrls:this.playerList[i.streamId].serverUrls),r&&i&&r.forEach(function(S){if(!(o.probeList[S]&&o.probeList[S].timeStamp+9e5<new Date().getTime()||i.probeState==w.probed)){var F="zegoprobe-"+new Date().getTime();o.setPlayStateStart(F);var ee=o.playerList[F]?o.playerList[F].player:null;ee&&(ee.isProbe=!0,a?(ee.gwNode=S,ee.signal=i.signal,ee.startPlay(F,function(){})):o.connectPlayServer(F,function(){},S),ee.onCalNetQualityResult=function(ie,ae){o.Oi.info("zc.ocnqr.0 "+ee.gwNode+" "+ie+" "+ae),o.probeList[S]={result:ie,netQuality:ae,timeStamp:new Date().getTime()};var be=Object.keys(o.probeList),Te=r&&r.every(function(Pe){return be.findIndex(function(Ae){return Ae===Pe})>=0});i.gwNode==S||i.signal.server==S?i.netQuality=ae:o.handleCalNetQualityResult(t,ie,ae,i,S,Te),o.stopPlayingStream(F),u.setAttributes({net_quality:T(parseInt(i.netQuality+"")),node_list:N(r)}),u.end()})}})}else this.ji.setError(u,{code:-1,message:"not support peer"})},e.prototype.handleCalNetQualityResult=function(t,i,r,s,o,u){if(this.Oi.info("zc.hcqr.0 "+s.netQuality+" probe "+r+" "+o),i===0){var m=this.ji.createSpan(It.H,{key:xr},{key:""},Q.event),f=!1;r>Math.max(40,s.netQuality+20)&&s.probeState==w.tryProbe?(this.Oi.info("zc.hcqr.0 "+s.streamId+" switch "+o),f=!0,this.retryStream(s,t,o),s.probeState=w.probed):(f=!1,s.probeState==w.tryProbe&&u&&(this.Oi.info("zc.hcqr.0 "+s.streamId+" last "),s.isProbeDispatch||s.netProbeToReDispatch()));var a=Q;m.setAttributes({is_switch:a.is_switch(f),is_publish:a.is_publish(t),stream_id:a.stream_id(s.streamId),result:a.result(i),node:a.node(o),net_quality:a.net_quality(parseInt(s.netQuality+"")),probe_net_quality:a.probe_net_quality(parseInt(r+""))}),m.end()}},e.prototype.retryStream=function(t,i,r){if(i){var s=t,o=s.streamId,u=s.localStream,m=s.videoInfo,f=s.mediaStreamConfig,a=s.publishOption;s.sessionId!=0&&s.signal&&s.shouldSendCloseSession()&&(s.signal.sendCloseSession(this._i.getSeq(),s.sessionId,1),s.signal.removeSession(s.sessionId),s.closeSessionSignal=!0),s.resetPublish(),this.publisherList[o].isCenterNode?(s.gwNode=r,s.startPublish(o,u,m,f,a)):(s.isExternal=!1,this.connectPublishServer(o,r))}else{var S=t,F=(o=S.streamId,S.getRemoteStreamSuc),ee=S.playOption;S.sessionId!=0&&S.signal&&S.shouldSendCloseSession()&&(S.signal.sendCloseSession(this._i.getSeq(),S.sessionId,1),S.signal.removeSession(S.sessionId),S.closeSessionSignal=!0),S.resetPlay(),this.onPlayStateUpdate(ke,o,{code:tn.code,message:tn.message}),this.playerList[o].isCenterNode?(S.gwNode=r,S.startPlay(o,F,ee)):(S.isExternal=!1,this.connectPlayServer(o,F,r))}},e.prototype.getRoomByStreamID=function(t){return this.publisherList[t]?this.publisherList[t].room:this.playerList[t]?this.playerList[t].room:void 0},e.prototype.setVideoTrackContentHint=function(t,i){if(bi(i)){var r=i.toLowerCase();if(["default","motion","detail","text"].includes(r)){var s=t.getVideoTracks()[0];s?"contentHint"in s?(this.Oi.info("zc.svtch "+r),s.contentHint=r=="default"?"":r):this.Oi.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.Oi.warn("zc.svtch video track no found")}else this.Oi.warn("zc.svtch videoOptimizationMode wrong")}else this.Oi.warn("zc.svtch videoOptimizationMode type wrong")},e.prototype.getPlayRoom=function(t){var i=this;return this._i.roomList.find(function(r){return!!i.getStream(r,t)})},e.prototype.getStream=function(t,i){return t.streamList.find(function(r){return r.stream_id==i})},e.prototype.updateQuality=function(t,i){this.streamReport.updateQuality(t,i)},e.prototype.checkStreamReport=function(){this.streamReport.checkStreamReport()},e.prototype.stopToReport=function(t){this.streamReport.updateQuality(t,void 0,!0)},e.prototype.setIsPeer=function(t){this.isPeer=t,Object.values(this.publisherList).forEach(function(i){i.publisher.isPeer=t}),Object.values(this.playerList).forEach(function(i){i.player.isPeer=t})},e.prototype.getCDNUrl=function(t,i){var r,s,o,u=((r={})[Et.RTC]=1,r[Et.CDN]=0,r[Et.L3]=2,r[Et.DG]=3,r),m=this._i.appConfig.media_config.play_config.resource_info;if(m.length){var f=m.find(function(ie){return ie.resource_type==u[i]});if(f)for(var a=0;a<f.service_info.length;a++){var S=f.service_info[a],F=S.protocol,ee=S.url_template.replace("{STREAM_NAME}",t);switch(F){case U.FLV:s=ee;break;case U.HLS:o=ee}}}return{flv:s,hls:o}},e.prototype.playCDN=function(t,i,r,s){var o,u=this,m=this.ji.createSpan(It.H,{key:sr.event,par:t},{key:Le,par:t},Le,!0),f=function(Ct){m.setAttributes({stop_reason:gt(Ct)}),s&&s()};if(!i.CDNVideo)return this.Oi.error("zsc.pc.1 cdn video no found"),f("cdn video no found"),!1;var a="",S=(o=this.getPlayRoom(t))===null||o===void 0?void 0:o.streamList.find(function(Ct){return Ct.stream_id==t}),F=this.playerList[t],ee=F.cdnPlayer,ie=F.playOption.resourceMode,ae=F.player;ae.streamId=t,ae.playOption=F.playOption,ae.tryidx++,m.setAttributes({tryidx:Ot(ae.tryidx),biz_product:mi(ie==Et.DG?1:0)});var be=S||{},Te=be.urls_flv,Pe=be.urls_flv_plus,Ae=be.urls_m3u8,Be=be.urls_m3u8_plus;if(!(S&&(ie!=Et.CDN||Te&&Ae)&&(ie!=Et.DG||Pe&&Be))){if(!this._i.appConfig||!ie)return this.Oi.error("zsc.pss.1 stream info no found"),f("stream info no found"),!1;var Ze=this.getCDNUrl(t,ie),st=Ze.flv,Rt=Ze.hls;ie==Et.DG?(Pe=st?[st]:[],Be=Rt?[Rt]:[]):(Te=st?[st]:[],Ae=Rt?[Rt]:[])}if(!F||!ee)return f("no cdn player"),!1;ie===Et.DG&&(ae.useResourceTypes.push("cdn"),ae.useResourceTypes=Array.from(new Set(ae.useResourceTypes)));var At=ie==Et.DG?Pe:Te,vt=ie==Et.DG?Be:Ae;if(ee.isSupportFLV()&&(At==null?void 0:At.length)>0)a=At[0],m.setAttributes({protocol:ot("flv")});else if(ee.isSupportHLS()&&(vt==null?void 0:vt.length)>0)a=vt[0],m.setAttributes({protocol:ot("hls")});else if(!F.cdnUrl)return this.Oi.error("zsc.pc.1 can not find cdn urls"),f("cdn protocol not support."),!1;if((a=a.replace("http://","https://"))!==F.cdnUrl&&ae.tryidx>1){var Ft=this.ji.createSpan(It.H,{key:sr.event,par:t},{key:""},_i);Ft.setAttributes({src:ni(a),last_src:Yt(F.cdnUrl)}),Ft.end()}return F.cdnUrl=a||F.cdnUrl,m.setAttributes({url:Ye(F.cdnUrl)}),F.playMode==tt.CDN&&(ee.play(F.cdnUrl,i.CDNVideo),i.CDNVideo.srcObject=null,this.onPlayStateUpdate(R,t,{code:0,message:"success"},{isCDN:!0}),ee.onQualityUpdate=function(Ct,Mt){Mt<=u.cdnBadQualityScore?u.handleQualityBad(t,i.resourceMode,tt.CDN):(F.qualityBadCount=0,u.cdnProtocolBadTimestamp=0,u.lastHandleCDNBadTimestamp=0)},ee.onComplete=function(){if(F.playMode==tt.CDN&&ae.state==Oo)ee.retry(),ae.CDNBrokenCnt++;else var Ct=ae.initPoster,Mt=ae.initVideoStyle,Gt=F.playOption.CDNVideo,li=setTimeout(function(){clearTimeout(li),Gt&&Gt.setAttribute("style",Mt),Gt&&Gt.setAttribute("poster",Ct)},1e3);ae.updateCDNValidTime()},ee.onError=function(Ct){u._i.networkState==he.offline&&(ee.canRetry=!1),m.setAttributes({stop_reason:gt(Ct)}),ae.updateCDNValidTime()},ee.onCanplay=function(){if(ae.state!=Oo&&(ae.state=Oo,ae.firstFrameTime==0)){ae.firstFrameTime=Date.now()-ae.beginTime;var Ct=u.ji.createSpan(It.H,{key:sr.event,par:t},{key:""},go.event);Ct.setAttributes({fft_consumed:go.fft_consumed(ae.firstFrameTime),biz_product:go.biz_product(i.resourceMode==Et.DG?1:0)}),Ct.end()}ae.cdnPlayTime==0&&ae.playMode==tt.CDN&&(ae.cdnPlayTime=Date.now())},r&&r(),!0)},e.prototype.handleQualityBad=function(t,i,r){var s=this;if(this.Oi.info("zsc.hqb.0 call ".concat(t," ").concat(i," ").concat(r)),i!==Et.DG)return!1;this.fetchL3CDNCloudSetting();var o=new Date().getTime(),u=0;for(var m in this.playerList)this.playerList[m].isQualityBad&&u++;r==tt.CDN?(this.cdnProtocolBadTime=this.cdnProtocolBadTime+(this.lastHandleCDNBadTimestamp==0?this.qualityInterval:o-this.lastHandleCDNBadTimestamp),(u>=this.protocolBadQualityCount||this.cdnProtocolBadTime>=this.protocolBadQualityTime)&&(this.cdnProtocolBadTime=0,this.cdnProtocolBadTimestamp=new Date().getTime())):r==tt.L3&&(this.l3ProtocolBadTime=this.l3ProtocolBadTime+(this.lastHandleL3BadTimestamp==0?this.qualityInterval:o-this.lastHandleL3BadTimestamp),(u>=this.protocolBadQualityCount||this.l3ProtocolBadTime>=this.protocolBadQualityTime)&&(this.l3ProtocolBadTime=0,this.l3ProtocolBadTimestamp=new Date().getTime()));var f=!1,a=this.playerList[t],S=a.qualityBadCount?a.qualityBadCount*this.qualityInterval:0;if((r==tt.L3&&S>this.l3BadQualityTime||r==tt.CDN&&this.isL3Fallback&&S>this.fallbackInhibitionTime||r==tt.CDN&&!this.isL3Fallback&&S>this.defaultBadQualityTime)&&(f=!0),f){for(var F in a.isQualityBad=!0,u=0,this.playerList)this.playerList[F].isQualityBad&&u++;if(r==tt.CDN&&(this.l3DetectedTimestamp==0||this.l3DetectedTimestamp+this.probeExpiredTime<o&&this.l3DetectedTimestamp+this.minProbeInterval<o)&&(this.l3DetectedTimestamp=new Date().getTime(),this.startNetProbe(!1,void 0,void 0,!0)),u/Object.keys(this.playerList).filter(function(ie){return!ie.includes("zegoprobe")}).length>this.multiPlaySwitchRate){this.Oi.error("zsc.hqb.0 low quality "+(r==0?"CDN":"L3"));var ee=Object.keys(this.playerList).filter(function(ie){return!ie.includes("zegoprobe")});return ee.forEach(function(ie,ae){var be=s.playerList[ie],Te=be.player;r==tt.L3?(s.stopPlayingStream(ie,void 0,!0),Te.updateValidTime(),s.playerList[ie]=be,be.isQualityBad=!1,be.playMode=Te.playMode=tt.CDN,be.qualityBadCount=0,s.playCDN(ie,be.playOption,s.playSuccessCallBackList[ie],s.playErrorCallBackList[ie])):s.l3DetectResult>s.switchDetectResultScore&&(be.qualityBadCount=0,s.l3DetectedTimestamp=0,ae==ee.length-1&&(s.l3DetectResult=0),s.cdnSwitchL3(be))}),r==tt.L3&&(this.isL3Fallback=!0),!0}}return qi(a.qualityBadCount)?a.qualityBadCount++:a.qualityBadCount=1,!1},e.prototype.cdnSwitchL3=function(t){var i,r=this,s=t.streamID,o=this._i.useNetAgent,u=t.player;if(t.playMode=u.playMode=tt.L3,this.stopPlayingStream(s,void 0,!0),this.playerList[s]=t,t.isQualityBad=!1,((i=t.playOption)===null||i===void 0?void 0:i.resourceMode)==Et.DG&&(u.useResourceTypes.push("l3"),u.useResourceTypes=Array.from(new Set(u.useResourceTypes))),o)this._i.appConfig?(t.serverUrls=["unified_l3"],this.startPlayingStream(s,o,function(f){r.Oi.info("zsc.cqi.1 switch l3 success");var a=u.initPoster,S=u.initVideoStyle,F=t.playOption.CDNVideo;if(r._i.browser==="safari"&&F&&u._CDNPlayerClone){var ee=F.parentElement;if(ee){var ie=Tt.createElement("style"),ae=F.cloneNode(!0),be=Date.now().toString(16);ie.innerText=".zego_cdn_video_".concat(be," .zego_clone_video_").concat(be,"{width:").concat(F.offsetWidth,"px;height:").concat(F.offsetHeight,"px;}")+".zego_cdn_video_".concat(be," .hide_").concat(be,"{display:none!important;width:0;height:0}"),Tt.head.append(ie),ae.classList.add("zego_clone_video_".concat(be)),ae.id=t.streamID+"_clone",ae.src="",ae.srcObject=f,ae.classList.add("hide_".concat(be)),F.before(ae),ee.classList.add("zego_cdn_video_".concat(be));var Te=setTimeout(function(){clearTimeout(Te),F.classList.add("hide_".concat(be)),ae.classList.remove("hide_".concat(be))},2e3),Pe=setTimeout(function(){clearTimeout(Pe),t.playOption.CDNVideo=ae,t.stopCDNPlayer(),ee.classList.remove("zego_cdn_video_".concat(be)),F.classList.remove("zego_cdn_video_".concat(be)),ae.classList.remove("zego_clone_video_".concat(be)),ae.id=F.id,ie.remove(),F.remove()},4e3)}}else{t.stopCDNPlayer();var Ae=setTimeout(function(){clearTimeout(Ae),F&&F.setAttribute("style",S),F&&F.setAttribute("poster",a)},1e3);f&&F&&(F.srcObject=f)}})):this.waitPlayList.push(s);else{var m=this.playerList[s].retryDispatchHandler;m.stopMaxTime(),m.invalid(),m.initStream(s,t.playOption,!1),m.startMaxTime(),m.active(0)}},e.prototype.fetchL3CDNCloudSetting=function(){this.switchScore=this._i.settingConfig.getSetting("switch_score")||60,this.defaultBadQualityTime=this._i.settingConfig.getSetting("default_bad_quality_time")||3e4,this.l3BadQualityTime=this._i.settingConfig.getSetting("l3_bad_quality_time")||1e4,this.switchDetectResultScore=this._i.settingConfig.getSetting("switch_detect_result_score")||60,this.cdnBadQualityScore=this._i.settingConfig.getSetting("cdn_bad_quality_score")||60,this.l3BadQualityScore=this._i.settingConfig.getSetting("l3_bad_quality_score")||60,this.multiPlaySwitchRate=this._i.settingConfig.getSetting("multi_play_switch_rate")||.8,this.protocolBadQualityCount=this._i.settingConfig.getSetting("protocol_bad_quality_count")||3,this.protocolBadQualityTime=this._i.settingConfig.getSetting("protocol_bad_quality_time")||12e3,this.protocolQualityCacheExpiredTime=this._i.settingConfig.getSetting("protocol_quality_cache_expired_time	")||18e4,this.fallbackInhibitionTime=this._i.settingConfig.getSetting("fallback_inhibition_time")||18e4,this.probeExpiredTime=this._i.settingConfig.getSetting("probe_expired_time")||3e4,this.minProbeInterval=this._i.settingConfig.getSetting("min_probe_interval")||15e3},e.prototype.setStreamGwNode=function(t,i){this.Oi.info(Sl+" call "+t.streamId),this.checkCachedNodesUse(t,i),t.gwNodesTTL&&t.gwNodesTTL<new Date().getTime()&&(this.Oi.info(Sl+" call "+t.streamId+" ttl timeout, reset gw"),t.gwNode="",t.gwNodeList=[],t.gwNodesTTL=0),this.gwNode&&(t.gwNode=this.gwNode);var r=this._i.settingConfig.getSetting("gw_nodes");r&&In(r)&&r.length>0&&(this.Oi.info(gr+" setting "+JSON.stringify(r)),t.gwNodeList=r,t.gwNode=t.gwNodeList[0]||t.gwNode),this.Oi.info(Sl+" end "+t.streamId+" "+t.gwNode)},e.prototype.getNodeIndex=function(t,i){var r="",s=i?"publish":"play",o="";switch(i||(t.resourceMode==0?o="_rtc":[2,3].includes(t.resourceMode)&&(o="_l3")),t.cachedGwNodesMode){case io.NotReUse:break;case io.TheSameReUse:r=s+"_"+t.streamId+o;break;case io.DiffReUse:r=s;break;case io.AllReUse:r="stream"}return r},e.prototype.checkCachedNodesUse=function(t,i){if(this.Oi.info(hs+" call "+t.streamId+" "+t.cachedGwNodesMode),t.isExternal)if(i&&t.isCustomCdn())this.Oi.info(hs+" call "+t.streamId+" custom cdn");else if(this._i.useNetAgent&&this._i.isMultiOuter)this.Oi.info(hs+" call "+t.streamId+" multi outer");else{var r=this.getNodeIndex(t,i);if(this.Oi.info(hs+" "+t.streamId+" "+r),r){var s=this.cachedGwNodesList[r];s&&s.gwNodesTTL>new Date().getTime()&&(s==null?void 0:s.gwNodes.length)>0&&(this.Oi.info(hs+" "+t.streamId+" use cache gwnodes"),t.gwNodeList=s.gwNodes,t.gwNodesTTL=s.gwNodesTTL,t.gwNode=t.gwNodeList[0])}this.Oi.info(hs+" end "+t.streamId+" "+t.gwNode)}else this.Oi.info(hs+" "+t.streamId+" retry internal")},e.prototype.updateCachedGwNodesList=function(t,i,r,s){if(this.Oi.info(Jd+" call "+t.streamId),s===0)this.setCachedGwNodesMode(io.NotReUse);else if(s>0){var o=this.getNodeIndex(t,i);this.Oi.info(Jd+" "+t.streamId+" nodeIndex "+o),o&&(this.cachedGwNodesList[o]={gwNodes:r,gwNodesTTL:new Date().getTime()+1e3*s})}},e.prototype.clearCachedGwNodesList=function(t,i){var r=this.getNodeIndex(t,i);this.Oi.info("zsc.ccgl "+t.streamId+" nodeIndex "+r),r&&delete this.cachedGwNodesList[r]},e.prototype.setCachedGwNodesMode=function(t){this.cachedGwNodesMode=t,Object.values(this.publisherList).forEach(function(i){i.publisher.cachedGwNodesMode=t}),Object.values(this.playerList).forEach(function(i){i.player.cachedGwNodesMode=t})},e.prototype.updateTimeOffsetInterval=function(){var t,i,r=this;qi((t=this.rtm)===null||t===void 0?void 0:t.netAgent.timeOffset)&&(this._i.clientTimeOffset=(i=this.rtm)===null||i===void 0?void 0:i.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout(function(){r.updateTimeOffsetInterval()},9e5)},e.prototype.changeRxQuality=function(t){this.rxQuality=t,this.startPublishNetWorkQuality()},e.prototype.changeTxQuality=function(t,i,r){this.txQuality=t,this.sendNetQuality(i,r),this.startPublishNetWorkQuality()},e.prototype.sendNetQuality=function(t,i){var r;this.Oi.info("zc.sc.snq call");var s=_f.WebrtcCmdReqMsg.encode({net_quality_grade:{rx_quality:this.rxQuality,tx_quality:this.txQuality}}).finish();(r=this.signalList[this.server])===null||r===void 0||r.signal.sendGWCmd(t,{peer_id:i,cmd_id:6},s,function(o,u,m){var f=_f.WebrtcCmdRspMsg.decode(m.body);Ho(f[Object.keys(f)[0]])},function(o){})},e.prototype.startPublishNetWorkQuality=function(){var t=this;this.netTimer===null&&(this.netTimer=setInterval(function(){t._i.actionListener("networkQuality","",t.txQuality,t.rxQuality)},3e3))},e.prototype.resetNetworkData=function(){Object.keys(this.playerList).length<1&&(this.rxQuality=-1),Object.keys(this.publisherList).length<1&&(this.txQuality=-1),Object.keys(this.playerList).length<1&&Object.keys(this.publisherList).length<1&&(clearInterval(this.netTimer),this.netTimer=null)},e.prototype.getCloudSoundInterval=function(){var t=this._i.settingConfig.getSetting("sound_sample_interval");return t&&(t<100&&(t=100),t>3e3&&(t=3e3),this.Oi.info("zc.gsl setting sound_sample_interval "+t)),t},e.prototype.createSoundLevel=function(t,i,r,s,o){r===void 0&&(r=this.soundLevelInterval),o===void 0&&(o=function(f){});var u=new xl(this.Oi,this._i,r,s),m=u.getSrcSource(t,i);return u.initAudioWorklet(t,m),u.onSoundLevelUpdate=function(f){o(f)},{mic:m,soundMeter:u}},e.prototype.createSEIWorker=function(){if(this.isNotSupportSeiWorker)return null;var t=this.seiWorker;if(t)return t;var i=_g.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],r=URL.createObjectURL(new window.Blob([i],{type:"text/javascript"}));return t=this.seiWorker=new Worker(r),this.Oi.info("zsc.gseiw init sei"),t},e.prototype.handleSeiRollBack=function(){this.isNotSupportSeiWorker=!0,this.destroySEIWorker()},e.prototype.destroySEIWorker=function(){var t;(t=this.seiWorker)===null||t===void 0||t.terminate(),this.seiWorker=void 0},e.prototype.destroy=function(){var t;this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.timeOffsetUpdateTimer&&clearTimeout(this.timeOffsetUpdateTimer),this.netTimer&&clearInterval(this.netTimer),(t=this._billingTimer)===null||t===void 0||t.destroy(),Tt.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},e}(Qm),Eg=__webpack_require__(5515),bf=function(){function n(e){this.v=e}return n.prototype.takeStreamSnapshot=function(e){return this.v.takeStreamSnapshot(e)},n.prototype.play=function(e,t){return this.v.play(e,t)},n.prototype.stop=function(){return this.v.stop()},n.prototype.resume=function(){this.v.resume()},n.prototype.setAudioMuted=function(e){return this.v.setAudioMuted(e)},n.prototype.setVideoMuted=function(e){return this.v.setVideoMuted(e)},n.prototype.useAudioOutputDevice=function(e){return this.v.useAudioOut(e)},n.prototype.setVolume=function(e){return this.v.setVolume(e)},n.prototype.on=function(e,t){return this.v.on(e,t)},n.prototype.off=function(e,t){return this.v.off(e,t)},n}(),Tg=function(){function n(){this.defaultSetting={publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:void 0,AGC:void 0,ANS:void 0,resource_mode:0,bitrate_mode:"default",auto_to_tcp:!1,udp_max_fail_num:2,probe_started_num:3,udp_or_tcp:"udp",hardware_encode:!1,camera_hard_encode:!1,custom_hard_encode:!1,bg_fps_stat:0,camera_width:720,camera_height:480,camera_framerate:15,camera_audio_bitrate:48,open_mini_sdp:!1,sound_level_api_type:Si.useAnalyzer,sound_sample_interval:200,scenario_configs:[],dtx:0},this.userChangedKey={},this.arrObjKeys=["scenario"],this.arrObjItemKeys=["scenario_configs"],this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return n.prototype.setSetting=function(e,t){var i=Array.isArray(t)&&t.length>0;for(var r in e)if(this.arrObjKeys.includes(r))for(var s in e[r])this.setting[r+"_"+s]=e[r][s];else for(var s in e[r])if(!s.endsWith("_ctrlmode")){if(i&&t.indexOf(s)==-1)continue;var o=e[r][s+"_ctrlmode"];o===1?this.userChangedKey[s]||(this.setting[s]=e[r][s]):o===2?this.setting[s]=e[r][s]:this.defaultSetting[s]&&(this.setting[s]=this.defaultSetting[s]),typeof o=="number"&&(this.setting[s+"_ctrlmode"]=e[r][s+"_ctrlmode"])}},n.prototype.getSetting=function(e,t){return t===void 0&&(t=!1),this.arrObjItemKeys.includes(e)?this.setting[e]:t?this.setting[e+"_ctrlmode"]==2?this.setting[e]:void 0:this.setting[e]},n.prototype.setUserValue=function(e,t){this.setting[e+"_ctrlmode"]!==2&&(this.userChangedKey[e]=!0,this.setting[e]=t)},n.prototype.getCloudSettingScenario=function(e,t,i){var r=this;t===void 0&&(t=!1),i===void 0&&(i=!1);var s=this.getSetting("scenario_configs").find(function(ie){return ie.scenario===e}),o={};if(s){var u=s.a_chn_count,m=s.a_bitrate,f=s.ctrlmode;[["ANS","ANS",s.ans_status,!0],["AGC","AGC",s.agc_status,!0],["AEC","AEC",s.aec_status,!0],["audioBitrate","camera_audio_bitrate",isNaN(m)?void 0:m/1e3,!1],["channelCount","",u,!1]].forEach(function(ie){var ae,be,Te,Pe,Ae;ae=ie[0],be=ie[1],Pe=ie[3],Ae=f,typeof(Te=ie[2])=="number"?(t&&Ae===2||!t&&[1,2].includes(Ae))&&(Pe?(Te===1&&(o[ae]=!0),Te===0&&(o[ae]=!1)):o[ae]=Te):!i&&be&&(o[ae]=r.getSetting(be,t))})}else{if(i)return{};var a=this.getSetting("ANS",t);Li(a)&&(o.ANS=a);var S=this.getSetting("AGC",t);Li(S)&&(o.AGC=S);var F=this.getSetting("AEC",t);Li(F)&&(o.AEC=F);var ee=this.getSetting("camera_audio_bitrate",t);qi(ee)&&(o.audioBitrate=ee)}return o},n}(),oc=function(){return oc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},oc.apply(this,arguments)},Rg=function(){function n(e,t,i){this.Se=e,this.Ie=t,this.Ri=i,this._initTime=Date.now()}return Object.defineProperty(n.prototype,"appid",{get:function(){return this.Ie.appid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"device_id",{get:function(){return this.Se.deviceID},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"product",{get:function(){return this.Se.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdk_version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sys_info",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"report_version",{get:function(){return this.Ie.sdkVerNum},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"browser",{get:function(){return this.Ie.browser},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id_name",{get:function(){return this.Se.idName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nick_name",{get:function(){return this.Se.nickName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"use_na",{get:function(){return this.Ie.useNetAgent?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userid",{get:function(){return this.Se.userid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"network_state",{get:function(){return this.Ie.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"init_time",{get:function(){return this._initTime},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"net_type",{get:function(){var e;return((e=navigator.connection)===null||e===void 0?void 0:e.effectiveType)||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"room_server",{get:function(){return this.Se.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"device_infos",{get:function(){return this.Ie.deviceInfos},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"room_list",{get:function(){var e=this,t={};return this.Ie.roomList.forEach(function(i){var r,s,o,u=e.Se.roomModulesList.find(function(f){return f.roomID===i.roomID}),m={roomSessionID:i.roomSessionID,sessionID:i.sessionID,streamList:i.streamList,token:i.token,role:e.Se.role,roomCreateFlag:e.Se.roomCreateFlag,loginTime:u==null?void 0:u.loginTime,heartbeatInterval:(r=u==null?void 0:u.heartBeatHandler)===null||r===void 0?void 0:r.heartbeatInterval,roomExtraInfos:(s=u==null?void 0:u.messageHandler)===null||s===void 0?void 0:s.transSeqMap,roomRetryTime:(o=u==null?void 0:u.roomTryHandler)===null||o===void 0?void 0:o.RETRY_MAX_TIME};t[i.roomID]=m}),t},enumerable:!1,configurable:!0}),n.prototype.getRoomList=function(e,t){var i=this;return this.room_id_list.slice(e,t).map(function(r){return oc({roomID:r},i.room_list[r])})},Object.defineProperty(n.prototype,"room_id_list",{get:function(){return this.Ie.roomList.map(function(e){return e.roomID})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"roomListSize",{get:function(){return this.room_id_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userLoginState",{get:function(){var e,t=this.Se.roomModulesList[0],i=t.runState,r=t.lastRunState;return i===de.logout?e=ne.logout:i===de.login?e=ne.login:r===de.logout?e=ne.trylogin:r===de.login&&(e=ne.reconnect),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"publishStreamList",{get:function(){return Object.keys(this.Ri.publisherList)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"publishList",{get:function(){var e=this,t={};return this.publishStreamList.forEach(function(i){var r,s,o,u=e.Ri.publisherList[i],m=u==null?void 0:u.publisher,f=m==null?void 0:m.publishStat;t[i]={streamSid:u==null?void 0:u.streamSid,roomID:(r=u==null?void 0:u.room)===null||r===void 0?void 0:r.roomID,roomSessionID:(s=u==null?void 0:u.room)===null||s===void 0?void 0:s.roomSessionID,cameraLabel:u==null?void 0:u.cameraLabel,microLabel:u==null?void 0:u.microLabel,cameraStatus:m==null?void 0:m.camera_status,micStatus:m==null?void 0:m.mic_status,sessionId:m==null?void 0:m.sessionId,publishBeginTime:m==null?void 0:m.reportPublishStateTime,serverUrl:(o=m==null?void 0:m.signal)===null||o===void 0?void 0:o.server,gwNode:m==null?void 0:m.gwNode,proto:"webrtc",frameWidth:f==null?void 0:f.frameWidth,frameHeight:f==null?void 0:f.frameHeight,rtt:f==null?void 0:f.currentRoundTripTime,videoPacketsLostRate:f==null?void 0:f.videoPacketsLostRate,audioPacketsLostRate:f==null?void 0:f.audioPacketsLostRate,videoTargetBitrate:f==null?void 0:f.videoTargetBitrate,videoBitrate:f==null?void 0:f.videoBitrate,audioTargetBitrate:f==null?void 0:f.audioTargetBitrate,audioBitrate:f==null?void 0:f.audioBitrate,videoTargetFPS:f==null?void 0:f.videoTargetFPS,videoFPS:f==null?void 0:f.videoFPS,audioFPS:f==null?void 0:f.audioFPS,videoCodecName:f==null?void 0:f.videoCodecName,audioCodecName:f==null?void 0:f.audioCodecName}}),t},enumerable:!1,configurable:!0}),n.prototype.getPublishList=function(e,t){var i=this;return this.publishStreamList.slice(e,t).map(function(r){return oc({streamID:r},i.publishList[r])})},Object.defineProperty(n.prototype,"publishListSize",{get:function(){return this.publishStreamList.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playStreamList",{get:function(){return Object.keys(this.Ri.playerList)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playList",{get:function(){var e=this,t={};return this.playStreamList.forEach(function(i){var r,s,o,u=e.Ri.playerList[i],m=u==null?void 0:u.player,f=m==null?void 0:m.playStat;t[i]={streamSid:u==null?void 0:u.streamSid,roomID:(r=u==null?void 0:u.room)===null||r===void 0?void 0:r.roomID,roomSessionID:(s=u==null?void 0:u.room)===null||s===void 0?void 0:s.roomSessionID,cameraStatus:m==null?void 0:m.cameraStatus,micStatus:m==null?void 0:m.micStatus,sessionId:m==null?void 0:m.sessionId,playBeginTime:m==null?void 0:m.reportPlayStateTime,serverUrl:(o=m==null?void 0:m.signal)===null||o===void 0?void 0:o.server,gwNode:m==null?void 0:m.gwNode,proto:"webrtc",frameWidth:f==null?void 0:f.frameWidth,frameHeight:f==null?void 0:f.frameHeight,rtt:f==null?void 0:f.currentRoundTripTime,videoPacketsLostRate:f==null?void 0:f.videoPacketsLostRate,audioPacketsLostRate:f==null?void 0:f.audioPacketsLostRate,videoBitrate:f==null?void 0:f.videoBitrate,audioBitrate:f==null?void 0:f.audioBitrate,videoFPS:f==null?void 0:f.videoFPS,audioFPS:f==null?void 0:f.audioFPS,videoCodecName:f==null?void 0:f.videoCodecName,audioCodecName:f==null?void 0:f.audioCodecName,peerToPeerDelay:f==null?void 0:f.peerToPeerDelay,firstFrameTime:f==null?void 0:f.firstFrameTime,videoJitter:f==null?void 0:f.videoJitter,audioJitter:f==null?void 0:f.audioJitter}}),t},enumerable:!1,configurable:!0}),n.prototype.getPlayList=function(e,t){var i=this;return this.playStreamList.slice(e,t).map(function(r){return oc({streamID:r},i.playList[r])})},Object.defineProperty(n.prototype,"playListSize",{get:function(){return this.playStreamList.length},enumerable:!1,configurable:!0}),n}(),na="zc.ac.mer",Cg=function(){function n(e,t,i){var r=this;this.Oi=e,this.ac=t,this.audio=i,this.error=!1,this.effectMode=1,this.eventHandler={volumechange:function(s){var o=s.target;o&&r.localOutPutNode&&(o.muted||o.paused?(r.Oi.info(na+" local audio muted disconnect"),r.localOutPutNode.disconnect()):(r.Oi.info(na+" local audio is connected"),r.localOutPutNode.connect(r.ac.destination)))}},this.Oi.info(na+" create audio renderer"),this.error=!this.init(),this.error||(i.addEventListener("volumechange",this.eventHandler.volumechange),i.addEventListener("pause",this.eventHandler.volumechange),i.addEventListener("play",this.eventHandler.volumechange))}return n.prototype.init=function(){var e=this.ac;try{var t=Qt().match(/iPhone\sOS\s(\d+)_(\d+)_?(\d+)?/);if(t&&+t[1]==17&&+t[2]==0&&+t[3]<4)throw" iOS 17 not suppot createMediaElementSource.";this.audio.crossOrigin!=="anonymous"&&this.Oi.info(na+" Media element does not support cross-origin. Maybe no sound can be played"),this.srcNode=e.createMediaElementSource(this.audio),(this.localOutPutNode=e.createGain()).connect(e.destination),this.ac.state==="suspended"&&this.ac.resume()}catch(i){return this.Oi.warn(na+" create src failed."+i),!1}return!0},n.prototype.getMixNode=function(){var e=this.mixOutputNode;return e||(e=this.mixOutputNode=this.ac.createGain()),this.setVoiceChangeNode(this.effectMode,this.voiceChangerNode,!0),{mixOutputNode:e}},Object.defineProperty(n.prototype,"effectOnLocal",{get:function(){return[Vs.Local,Vs.All].includes(this.effectMode)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"effectOnMix",{get:function(){return[Vs.Publish,Vs.All].includes(this.effectMode)},enumerable:!1,configurable:!0}),n.prototype.setVoiceChangeNode=function(e,t,i){if(i===void 0&&(i=!1),this.localOutPutNode&&this.srcNode&&(i||this.voiceChangerNode!==t||this.effectMode!==e)){this.effectMode=e,this.srcNode.disconnect();var r=this,s=r.mixOutputNode,o=r.effectOnLocal,u=r.effectOnMix;if(this.Oi.info(na+" set voice changer render. ".concat(JSON.stringify({mode:e,node:!!t,force:i,effectOnLocal:o,effectOnMix:u}))),t)t.disconnect(),this.srcNode.connect(t),o?t.connect(this.localOutPutNode):this.srcNode.connect(this.localOutPutNode),s&&(u?t.connect(s):this.srcNode.connect(s)),this.voiceChangerNode=t;else{var m=this.srcNode;m.connect(this.localOutPutNode),this.mixOutputNode&&m.connect(this.mixOutputNode),this.voiceChangerNode=void 0}}},n.prototype.destroy=function(){var e;(e=this.localOutPutNode)===null||e===void 0||e.connect(this.ac.destination),this.audio.removeEventListener("volumechange",this.eventHandler.volumechange),this.audio.removeEventListener("pause",this.eventHandler.volumechange),this.audio.removeEventListener("play",this.eventHandler.volumechange)},n}(),wg=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Ig=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Og=function(){function n(e){var t=this;this.Oi=e,this.isResuming=!1,this.elementNodeMap=new Map,this.workletMap=new Map,this.eventHandler={resumeAudioContext:function(r){var s=t.ac.state;s==="running"||t.isResuming?t.offCheckAudioContextListener():(t.Oi.info("zc.ac.rs call "+s+", "+r.type),t.isResuming=!0,t.ac.resume().then(function(){t.isResuming=!1,t.Oi.info("zc.ac.rs end "+t.ac.state+", "+r.type)}))}},this.id=Date.now();var i=window.AudioContext||window.webkitAudioContext;this.ac=new i,this.Oi.info("zc.ac.0 ".concat(this.id," ").concat(this.ac.state,", ").concat(this.ac.sampleRate)),this.ac.addEventListener("statechange",function(){var r,s=(r=t.ac)===null||r===void 0?void 0:r.state;t.Oi.info("zc.ac.sc ".concat(t.id," ").concat(s)),s!=="running"&&t.checkAudioContext()}),this.checkAudioContext()}return n.create=function(e){return n.mgr?n.mgr.Oi=e:n.mgr=new n(e),n.mgr},n.prototype.getMediaElementRenderer=function(e){var t=this.elementNodeMap.get(e);return t||((t=new Cg(this.Oi,this.ac,e)).error?null:(this.elementNodeMap.set(e,t),t))},n.prototype.checkAudioContext=function(){this.Oi.info("zc.ac.cac call"),this.ac&&this.ac.state==="suspended"&&window.addEventListener("mousedown",this.eventHandler.resumeAudioContext)},n.prototype.offCheckAudioContextListener=function(){this.Oi.info("zc.ac.ocac call"),window.removeEventListener("mousedown",this.eventHandler.resumeAudioContext)},n.prototype.registerModule=function(e,t){return wg(this,void 0,void 0,function(){var i,r,s;return Ig(this,function(o){switch(o.label){case 0:if(this.workletMap.get(e))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),i=new Blob([t],{type:"text/javascript"}),r=URL.createObjectURL(i),[4,this.ac.audioWorklet.addModule(r)];case 2:return o.sent(),this.workletMap.set(e,!0),[3,4];case 3:return s=o.sent(),this.Oi.error("zc.ac.rm.0 ".concat(e," fail ").concat(s.toString())),[3,4];case 4:return[2]}})})},n.prototype.destroy=function(){this.offCheckAudioContextListener()},n}(),Cs=function(){return Cs=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Cs.apply(this,arguments)},ko=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Po=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},kg=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},ws=function(){function n(e,t,i,r,s,o){o===void 0&&(o=Vt.Default);var u=this;this.logger=e,this.reporter=i,this.recordedBlobs=[],this.mediaRecorder=null,n.isInstantiated=!0,this.Oi=e,this.dataReport=t,this.acMgr=Og.create(this.Oi),this.stateCenter=new bm(this.Oi,this.dataReport),this._i=this.stateCenter,this._i.clientType="webrtc",this._i.settingConfig=new Tg,this.RTM=r,this._i.appid=r.getAppID(),this.streamCenter=new Sg(this.Oi,this._i,this.dataReport,this.RTM,this.acMgr,{type:n.geoFenceType,areaList:n.geoFenceAreaList}),this.Ri=this.streamCenter,this._i.browser=Eg.browserDetails.browser,this._i.browserInfo=wt(),this.getSDKVersionNum(),this.RTM.cloudSetting.setEnvVariable("sdk_version",v),this.initTracer(i),this.rtcModules=new Ja(this.Oi,this.dataReport,this._i,this.Ri,this.RTM,this.ac,this),this.RTM.cloudSetting.getSettingCache("rtc").then(function(m){var f,a;u.Oi.info(Bd+" streamConfig "+JSON.stringify(m));var S=u.ji.createSpan(It.H,{key:Cn},{key:""},te);S.setAttributes({files:ge([{name:"rtc",content:JSON.stringify(m==null?void 0:m.setting),versions:JSON.stringify(m==null?void 0:m.versions),code:0,message:""}])}),S.end(),u._i.settingConfig.setSetting(m==null?void 0:m.setting),!((f=m==null?void 0:m.setting)===null||f===void 0)&&f.open_mini_sdp&&((a=u.Ri)===null||a===void 0||a.initMiniSdpWorker(m.setting.open_mini_sdp.open_mini_sdp))}).catch(function(m){u.Oi.warn(Bd+" streamConfig "+JSON.stringify(m))}),this._i.rtm=this.RTM,this._i.streamCenter=this.Ri,[3,4,5,6,7,8].includes(o)?(this._i.scenario=o,this.Oi.info(wl+" "+o+" success")):o===100?(this.stateCenter.scenario=o,this.Oi.info(wl+" "+o+" liveroom set")):(this._i.scenario=Vt.Default,this.Oi.error(wl+" "+o+"  please use valid scenario"))}return Object.defineProperty(n.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.setGeoFence=function(e,t){if(n.isInstantiated)throw Re;n.geoFenceType=e,n.geoFenceAreaList=t},n.setEngineOptions=function(e){n.engineOptions=e,e.geoFenceType&&(n.geoFenceType=e.geoFenceType),e.geoFenceAreaList&&(n.geoFenceAreaList=e.geoFenceAreaList)},n.prototype.destroyEngineHandler=function(){var e=this;this.Oi.info(zd+" call");var t=function(){return!e.RTM.stateCenter.roomModulesList.some(function(r){return!(r.isLogout()||r.roomState==="DISCONNECTED")})},i=function(){e.RTM.destroyRTM();for(var r=0,s=e.Ri.previewStreamList;r<s.length;r++){var o=s[r];o.localStream&&e.destroyStream(o.localStream)}e.RTM.netAgent.destroy(),e._i.actionListener("_engineDestroy"),e.acMgr.destroy(),e.Ri.destroy(),e._i.destroy(),e.Oi.info(zd+" call success"),e.Oi.destroy()};t()?i():(this.RTM.stateCenter.onListener("_roomStateUpdate",function(r,s){s==="DISCONNECTED"&&t()&&i()}),this.RTM.logoutRoom())},n.prototype.mutePublishStreamVideo=function(e,t,i){return!1},n.prototype.mutePublishStreamAudio=function(e,t){return!1},n.prototype.mutePlayStreamVideo=function(e,t){return new Ge(function(i,r){console.error("should install advanced module"),i(!1)})},n.prototype.mutePlayStreamAudio=function(e,t){return new Ge(function(i,r){console.error("should install advanced module"),i(!1)})},n.prototype.muteMicrophone=function(e){return!1},n.prototype.isMicrophoneMuted=function(){return!this.Ri.isMicEnabled},n.prototype.setAudioOutput=function(e,t){return this.Oi.info("zc.sao call"),bi(t)?this.rtcModules.playModule.setStreamAudioOutput(e,t):(this.Oi.error("audiooutput is not string"),!1)},n.prototype.setCustomSignalUrl=function(e){if(this.Oi.info(hl+" call: "+e),e&&e.length!=0){var t=!0;e.forEach(function(i){return i.indexOf("wss://")!=0&&(t=!1)}),t?this._i.customUrl=e:this.Oi.error(hl+" url is not correct")}else this.Oi.error(hl+" param error")},n.prototype.setGWNode=function(e){bi(e)&&e.length>0&&(this.Ri.gwNode=e)},n.prototype.setQualityMonitorCycle=function(e){return qi(e)&&e>=1e3?(this.Ri.setQualityMonitorCycle(e),!0):(this.Oi.error("zc.sqmc.0 time must be number and bigger than 1000"),!1)},n.prototype.startPlayingStream=function(e,t,i){return this.Oi.info(Na+" call by user"),this.rtcModules.playModule.startPlayingStream(e,t,i)},n.prototype.stopPlayingStream=function(e){this.Oi.info(zc+" call by user"),this.rtcModules.playModule.stopPlayingStream(e,void 0,!0)},n.prototype.setPlayAccelerate=function(e){this._i.playAccelerate=e},n.prototype.setTurnOverTcpOnly=function(e){this.Oi.info("zc.stoto call "+e),Li(e)?this._i.turnOverTcpOnly=e:this.Oi.error("zc.p.stoto.0 param must be param")},n.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e)},n.prototype.createZegoStream=function(e){return this.rtcModules.publishModule.createZegoStream(e)},n.prototype.setRoomScenario=function(e){return[3,4,5,6,7,8].includes(e)?(this.Oi.info(Xc+" "+e+" called"),this._i.roomList.length?(this.Oi.error(Xc+" "+JSON.stringify(Du)),!1):(this._i.scenario=e,this.Oi.info(Xc+" "+e+" called success"),!0)):(this.Oi.error(Xc+" "+e+" please use valid scenario"),!1)},n.prototype.destroyStream=function(e){this.rtcModules.publishModule.destroyStream(e)},n.prototype.startPublishingStream=function(e,t,i,r){return this.Oi.info(Zr+" call by user"),this.rtcModules.publishModule.startPublishingStream(e,t,i&&Cs({},i),r)},n.prototype.updatePublishingStream=function(e,t){return this.Oi.info(Il+" call by user"),this.rtcModules.publishModule.updatePublishingStream(e,t)},n.prototype.activateSEIInsert=function(e){return console.error("should install advanced module"),!1},n.prototype.setSEIConfig=function(e){this.Oi.info("zc.ssc "+JSON.stringify(e)),this._i.seiConfig=Cs(Cs({},this._i.seiConfig),e),this._i.player265ReceiverList.forEach(function(t){t.sendMsg({type:"SEIConfigUpdate"})})},n.prototype.sendSEI=function(e,t){return this.rtcModules.publishModule.sendSEI(e,t)},n.prototype.stopPublishingStream=function(e){return this.Oi.info(dl+" call by user"),this.rtcModules.publishModule.stopPublishingStream(e,void 0,!0,!0)},n.prototype.setVideoConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setVideoConfig(e,t):new Ge(function(i,r){console.error("should install advanced module"),i({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.setAudioConfig=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setAudioConfig(e,t):new Ge(function(i,r){console.error("should install advanced module"),i({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.replaceTrack=function(e,t,i){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.replaceTrack(e,t,i):new Ge(function(r,s){console.error("should install advanced module"),r({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.preloadEffect=function(e,t,i){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.preloadEffect(e,t,i):console.error("未引入混音模块")},n.prototype.getEffectDuration=function(e){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.getEffectDuration(e):(console.error("未引入混音模块"),0)},n.prototype.getEffectCurrentProgress=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.getEffectProgress(e,t):(console.error("未引入混音模块"),0)},n.prototype.seekAudioEffect=function(e,t,i){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.seekAudioEffect(e,t,i):(console.error("未引入混音模块"),!1)},n.prototype.playEffect=function(e,t,i){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.playEffect(e,t,i):console.error("未引入混音模块")},n.prototype.pauseEffect=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.pauseEffect(e,t):(console.error("未引入混音模块"),!1)},n.prototype.resumeEffect=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.resumeEffect(e,t):(console.error("未引入混音模块"),!1)},n.prototype.stopEffect=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopEffect(e,t):(console.error("未引入混音模块"),!1)},n.prototype.unloadEffect=function(e){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.unloadEffect(e):(console.error("未引入混音模块"),!1)},n.prototype.setEffectVolume=function(e,t,i,r){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.setEffectVolume(e,t,i,r):(console.error("未引入混音模块"),!1)},n.prototype.startMixingAudio=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.startMixingAudio(e,t):(console.error("未引入混音模块"),!1)},n.prototype.stopMixingAudio=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopMixingAudio(e,t):(console.error("未引入混音模块"),!1)},n.prototype.mixingBuffer=function(e,t,i,r){this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.mixingBuffer(e,t,i,r):console.error("未引入混音模块")},n.prototype.stopMixingBuffer=function(e,t){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.stopMixingBuffer(e,t):(console.error("未引入混音模块"),!1)},n.prototype.setMixingAudioVolume=function(e,t,i){return this.rtcModules.audioMixModule!==void 0?this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,i):(console.error("未引入混音模块"),!1)},n.prototype.checkSystemRequirements=function(e,t){var i=this,r=navigator&&navigator.mediaDevices&&(n.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.Oi.info("zc.csr call"+Qt()),new Ge(function(s){var o=i.ji.createSpan(It.H,{key:Cn},{key:""},Hr),u=t||"all",m=function(f){o.setAttributes({capability:Uo(f)}),o.end();var a=i._i.checkList.indexOf(u);i._i.checkList.splice(a,1),s(f)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","all"].includes(u)&&[0,1].includes(e)?i._i.checkList.includes(u)||i._i.checkList.includes("all")?m({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(i._i.checkList.push(u),void xd(r,m,e,t,i._i.customUa)):m({result:!1,errInfo:{extendedDate:"param error"}})})},n.prototype.enumDevices=function(e,t){return ko(this,void 0,void 0,function(){var i,r,s,o,u,m,f,a,S,F,ee,ie,ae,be=this;return Po(this,function(Te){switch(Te.label){case 0:return this.Oi.info("zc.ed.0 call"),i=function(){return new Ge(function(Pe,Ae){var Be=be.ji.createSpan(It.H,{key:xr},{key:""},nn);be.rtcModules.publishModule.recordDevices(function(Ze){var st=[],Rt=!0,At=!0;Ze.cameras.forEach(function(vt){vt.deviceID===""&&(Rt=!1),st.push({device:vt.deviceID,device_name:vt.deviceName,type:0})}),Ze.microphones.forEach(function(vt){vt.deviceID===""&&(At=!1),st.push({device:vt.deviceID,device_name:vt.deviceName,type:1})}),Ze.speakers.forEach(function(vt){return st.push({device:vt.deviceID,device_name:vt.deviceName,type:2})}),Be.setAttributes({dev_list:Ra(st),dev_kind:Cc(t||"all")}),Be.end(),Pe({devices:Ze,enableCamera:Rt,enableMic:At})},function(Ze){be.ji.setError(Be,Ze),Ae(Ze)})})},[4,i()];case 1:return r=Te.sent(),s=r.enableCamera,o=r.enableMic,u=r.devices,e?(this.Oi.info("zc.ed.0 check permission"),m={video:!0,audio:!0},t==="videoinput"?m.audio=!1:t!=="audioinput"&&t!=="audiooutput"||(m.video=!1),a=m.audio&&!o,(f=m.video&&!s)||a?(this.Oi.info("zc.ed.0 need to get device permission. needCamera: ".concat(f,", needMic: ").concat(a)),[4,Pd(m).catch(function(){})]):[3,4]):[3,4];case 2:return(S=Te.sent())&&S.getTracks().forEach(function(Pe){Pe.stop()}),[4,i()];case 3:F=Te.sent(),ee=F.devices,ie=F.enableCamera,ae=F.enableMic,m.video&&!ie&&this.Oi.warn("zc.ed.0 get video device permission failed."),m.audio&&!ae&&this.Oi.warn("zc.ed.0 get audio device permission failed."),u=ee,Te.label=4;case 4:return[2,u]}})})},n.prototype.getCameras=function(){return ko(this,void 0,void 0,function(){return Po(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"videoinput")];case 1:return[2,e.sent().cameras]}})})},n.prototype.getMicrophones=function(){return ko(this,void 0,void 0,function(){return Po(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audioinput")];case 1:return[2,e.sent().microphones]}})})},n.prototype.getSpeakers=function(){return ko(this,void 0,void 0,function(){return Po(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audiooutput")];case 1:return[2,e.sent().speakers]}})})},n.prototype.getAudioInfo=function(e,t,i){},n.prototype.getSoundLevel=function(e,t,i){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.getSoundLevel(e,t,i):console.error("未引入混音模块")},n.prototype.stopSoundLevel=function(e){this.rtcModules.audioMixModule?this.rtcModules.audioMixModule.stopSoundLevel(e):console.error("未引入混音模块")},n.prototype.handleDataAvailable=function(e){e.data&&e.data.size>0&&n.recordedBlobs.push(e.data)},n.prototype.setAudioFrameCallback=function(e,t,i){return this.rtcModules.playModule.setAudioFrameCallback(e,t,i)},n.prototype.startRecord=function(e){var t=this,i=this.Ri.checkPreview(e);if(!i)throw"start record failed. streamNotFromZegoStr.";var r=e.clone(),s=r.getAudioTracks();s.length>0&&i.hasEmptyAudioTrack&&s.forEach(function(u){r.removeTrack(u)}),this.recordedBlobs=[];var o={mimeType:"video/webm;codecs=vp9"};console.log("MediaRecorder",MediaRecorder),MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:"video/webm"},MediaRecorder.isTypeSupported(o.mimeType)||(o={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(r,o)}catch(u){return void this.Oi.error("zc.mdrcd Exception while creating ZegoMediaRecorder:",u)}this.mediaRecorder.onstop=function(u){t.Oi.warn("zc.mdrcd Recorder stopped: "+u)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)},n.prototype.stopRecord=function(){this.mediaRecorder?this.mediaRecorder.stop():this.Oi.warn("zc.mdrcd please invoke startRecord first")},n.prototype.resumeRecord=function(){this.mediaRecorder?this.mediaRecorder.resume():this.Oi.warn("zc.mdrcd please invoke startRecord first")},n.prototype.pauseRecord=function(){this.mediaRecorder?this.mediaRecorder.pause():this.Oi.warn("zc.mdrcd please invoke startRecord first")},n.prototype.saveRecord=function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),i=window.URL.createObjectURL(t),r=Tt.createElement("a");r.style.display="none",r.href=i,r.download=e+".webm",Tt.body.appendChild(r),r.click(),setTimeout(function(){Tt.body.removeChild(r),window.URL.revokeObjectURL(i)},100)}else this.Oi.warn("please invoke startRecord first")},n.prototype.useVideoDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useVideoDevice(e,t):new Ge(function(i,r){i({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.useAudioDevice=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.useAudioDevice(e,t):(console.error("should use advanced module first"),new Ge(function(i,r){i({errorCode:-1,extendedData:"should install advanced module"})}))},n.prototype.useFrontCamera=function(e,t){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.useFrontCamera(e,t);throw new Error("should use advanced module first")},n.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},n.prototype.setSoundLevelDelegate=function(e,t,i){this.Oi.info("zc.ssd.0 call"),Li(e)?t&&(!cr(t)||t<100||t>3e3)?this.Oi.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.Ri.setSoundLevelDelegate(e,t,i):this.Oi.error("zc.ssd.0 param 1 must be boolean")},n.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},n.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},n.prototype.getVersion=function(){return v},n.prototype.setStreamExtraInfo=function(e,t){return this.rtcModules.streamCommon.setStreamExtraInfo(e,t)},n.prototype.addPublishCdnUrl=function(e,t){return this.Oi.info("zg.cm.apu call "+e+" "+t),this.rtcModules.streamCDNModule?this.rtcModules.streamCDNModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):new Ge(function(i,r){console.error("should install advanced module"),i({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.removePublishCdnUrl=function(e,t){return this.Oi.info("zg.cm.apu call "+e+" "+t),this.rtcModules.streamCDNModule?this.rtcModules.streamCDNModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Ge(function(i,r){console.error("should install advanced module"),i({errorCode:-1,extendedData:"should install advanced module"})})},n.prototype.startMixerTask=function(e){return new Ge(function(t,i){console.error("未引入混流模块"),i()})},n.prototype.setMixerTaskConfig=function(e){return new Ge(function(t,i){console.error("未引入混流模块"),i()})},n.prototype.stopMixerTask=function(e){return new Ge(function(t,i){console.error("未引入混流模块"),i()})},n.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},n.use=function(e){switch(e.type){case"AudioMix":e.install(Ja,Gl);break;case"MixStream":e.install(n,Za,Ja);break;case"StreamCDN":e.install(n,Ja,Za);break;case"Advance":e.install(n,Ja,Za,vs,Qh,Wh,Gl,uf);break;case"BeautyEffect":case"VoiceChanger":e.install(n,vs);break;case"RangeAudio":case"DataChannel":case"AiDenoise":case"BackgroundProcess":case"CopyrightedMusic":case"StreamCompositor":e.install(n)}},n.prototype.createRangeAudioInstance=function(){throw new Error("should use range audio module")},n.prototype.createCopyrightedMusic=function(){throw new Error("should use copyrighted music module")},n.prototype.destroyCopyrightedMusic=function(){throw new Error("should use copyrighted music module")},n.prototype.createRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},n.prototype.destroyRealTimeSequentialDataManager=function(e){throw new Error("should use datachannel module")},n.prototype.enableDataChannel=function(e){Li(e)&&(this.Ri.isDataChannelEnabled=e)},n.prototype.addTrack=function(e,t){return new Ge(function(i,r){throw new Error("use advanced module first")})},n.prototype.removeTrack=function(e,t){return new Ge(function(i,r){throw new Error("use advanced module first")})},n.prototype.setBeautyEffect=function(e,t,i){return new Ge(function(r,s){console.error("should install video effect module and advanced module"),r({errorCode:-1,extendedData:"should install video effect module and advanced module"})})},n.prototype.setLowlightEnhance=function(e,t){return new Ge(function(i,r){console.error("should install video effect module and advanced module"),i({errorCode:-1,extendedData:"should install video effect module and advanced module"})})},n.prototype.getPublishingStreamQuality=function(e){return this.rtcModules.publishModule.getStreamStats(e)},n.prototype.getPlayingStreamQuality=function(e){return this.rtcModules.playModule.getStreamStats(e)},n.prototype.checkAudioTrackIsActive=function(e){var t=this;return this.Oi.info("zc.caia.0 call"),new Ge(function(i,r){if(e=_r(e,t.Oi),!t.checkTrackParam(e,1))return t.Oi.info("zc.caia.0 param active: false"),i(!1);var s=0;try{var o=0,u=t.Ri.createSoundLevel(t.ac,e,50,50,function(f){f*=100;var a=!1;o>=4?(m.destroy(),(f>0||s>0)&&(a=!0),t.Oi.info("zc.caia.0 active: "+a),i(a)):s=Math.max(f,s),o++}),m=u.soundMeter;m&&u.mic||(t.Oi.error("zc.cvia.1 checkVideoTrackIsActive not supported"),i(!1))}catch(f){t.Oi.error("zc.cvia.1 "+f),i(!1)}})},n.prototype.checkVideoTrackIsActive=function(e){var t=this;this.Oi.info("zc.cvia.0 call");var i=this;return new Ge(function(r,s){if(e=_r(e,t.Oi),!t.checkTrackParam(e,0))return t.Oi.info("zc.cvia.1 param active: false"),r(!1);var o=oi(1,1),u=Ii(160,120).getContext("2d");u&&(u!=null&&u.drawImage)&&(u!=null&&u.getImageData)||(i.Oi.error("zc.cvia.1 checkVideoTrackIsActive not supported"),r(!1)),o.style.position="fixed",o.style.left="-1000px",o.style.opacity="0.01",Tt.body.appendChild(o),o.srcObject=e;var m=null;function f(){u=null;try{o.pause(),o.remove(),o.srcObject=null}catch{}}function a(){o.play();var S=setTimeout(function(){clearTimeout(S),S=null,o.removeEventListener("canplay",a),u==null||u.drawImage(o,0,0,160,120);var F=setTimeout(function(){clearTimeout(F),F=null;var ee=u==null?void 0:u.getImageData(0,0,160,120),ie=(ee==null?void 0:ee.data)&&Math.floor(ee.data.length/3);if(ie){for(var ae=3;ae<ie;ae+=4)if(ee.data[ae-1]!==0||ee.data[ae-2]!==0||ee.data[ae-3]!==0)return i.Oi.info("zc.cvia.0 active: true"),r(!0),void f();f(),i.Oi.info("zc.cvia.1 active: false"),r(!1)}},20)},200)}o.addEventListener("canplay",a),m=setTimeout(function(){clearTimeout(m),o.removeEventListener("canplay",a),f(),r(!1)},1e3)})},n.prototype.checkTrackParam=function(e,t){var i,r=this;if(this.Oi.info("zc.ctp.0 call type:"+t),!Ar(e))return this.Oi.error("zc.ctp.1 param 1 must be MediaStream"),!1;var s=this.Ri.checkPreview(e),o=Object.keys(this.Ri.playerList).find(function(m){var f,a;return((a=(f=r.Ri.playerList[m])===null||f===void 0?void 0:f.player)===null||a===void 0?void 0:a.playStream)===e});if(!s&&!o)return this.Oi.error("zc.ctp.1 "+y),!1;var u=e[t==0?"getVideoTracks":"getAudioTracks"]()[0];return u?u.readyState!=="live"||!u.enabled||u.muted?(this.Oi.info("zc.ctp.0 type:".concat(t," state:").concat(u.readyState," enabled:").concat(u.enabled," muted:").concat(u.muted)),!1):!o||((i=this.Ri.playerList[o])===null||i===void 0?void 0:i.player.micStatus)===0:(this.Oi.error("zc.cvia.1 the stream has not track"),!1)},n.prototype.setDummyCaptureImagePath=function(e,t){return this.rtcModules.advancedModule?this.rtcModules.advancedModule.setDummyCaptureImagePath(e,t):new Ge(function(i,r){console.error("should install advanced module"),i(!1)})},n.prototype.setAccess=function(e){this.RTM.setAccess(e),this._i.useNetAgent=this.RTM.getSettingUnify(!0),this.RTM.setAccess(this._i.useNetAgent),this._i.useNetAgent=this.RTM.isUseNetAgent},n.prototype.setTestPackageSize=function(e){this.RTM.setTestPackageSize(!0),this._i.testNetPackageSize=e},n.prototype.setAudioOutputDevice=function(e,t){return ko(this,void 0,void 0,function(){var i,r=this;return Po(this,function(s){return i=e==null?void 0:e.setSinkId,this.Oi.info("zc.saopd call:"+t),[2,new Ge(function(o,u){return ko(r,void 0,void 0,function(){var m,f,a,S=this;return Po(this,function(F){switch(F.label){case 0:if(m=function(ee){S.Oi.info("zc.saopd error"+JSON.stringify(ee)),u({errorCode:ee.code,extendedData:ee.message})},!i)return[3,5];if(e.setsinkid&&(e.setsinkid.enabled=!0),!t||!bi(t))return[2,m({code:Lr.code,message:"the 'deviceID' is invalid"})];F.label=1;case 1:return F.trys.push([1,3,,4]),[4,i.call(e,t)];case 2:return F.sent(),[3,4];case 3:return f=F.sent(),(a=e.srcObject)&&!a.getAudioTracks()[0]?[2,m(Sa)]:[2,m({code:Mo,message:f})];case 4:return[2,o(!0)];case 5:throw Error("Browser not support set audio output.")}})})})]})})},n.prototype.enableCameraCapturing=function(e,t){return ko(this,void 0,void 0,function(){return Po(this,function(i){return console.error("should use advanced module first"),[2,!1]})})},n.prototype.enableDualStream=function(e){this.rtcModules.advancedModule?this.rtcModules.advancedModule.enableDualStream(e):console.error("use advance module first")},n.prototype.setLowStreamParameter=function(e,t){this.rtcModules.advancedModule?this.rtcModules.advancedModule.setLowStreamParameter(e,t):console.error("use advance module first")},n.prototype.setRemoteDefaultVideoStreamType=function(e){this.Oi.info("zc.srdvs call"),[0,1,2].includes(e)?this._i.streamType=e:this.Oi.error("zc.srdvs streamType must be number 0 or 1 or 2")},n.prototype.enableVideoHardwareEncoder=function(e){if(Li(e)){var t=this._i.settingConfig;t.setUserValue("hardware_encode",e),t.setUserValue("camera_hard_encode",e),t.setUserValue("custom_hard_encode",e)}},n.prototype.createLocalViewer=function(e){var t=this.Ri.checkPreview(e),i=t==null?void 0:t.getViewer();if(!i)throw Error("create viewer failed.");return new bf(i)},n.prototype.createRemoteViewer=function(e){var t=this.Ri.checkPlayer(e),i=t==null?void 0:t.getViewer();if(!i)throw Error("create viewer failed.");return new bf(i)},n.prototype.createStreamCompositor=function(){throw new Error("should use stream compositor module")},n.prototype.enableAiDenoise=function(e,t){return new Ge(function(i,r){console.error("should install ai denoise module and advanced module"),r({errorCode:Ne,extendedData:"should install ai denoise module and advanced module"})})},n.prototype.setVoiceChangerPreset=function(e,t){return new Ge(function(i,r){console.error("should install voice changer module and advanced module"),r({errorCode:Ne,extendedData:"should install voice changer module and advanced module"})})},n.prototype.enableLiveAudioEffect=function(e,t,i){return new Ge(function(r,s){console.error("should install voice changer module and advanced module"),s({errorCode:Ne,extendedData:"should install voice changer module and advanced module"})})},n.prototype.loadBackgroundBlurModule=function(){return new Ge(function(e,t){console.error("should install blur background module and advanced module"),e({errorCode:-1,extendedData:"should install blur background module and advanced module"})})},n.prototype.initBackgroundModule=function(e,t){return new Ge(function(i,r){console.error("should install blur background module and advanced module"),i({errorCode:-1,extendedData:"should install blur background module and advanced module"})})},n.prototype.setBackgroundBlurOptions=function(e,t){throw console.error("should install blur background module and advanced module"),new Error("should install blur background module and advanced module")},n.prototype.setVirtualBackgroundOptions=function(e,t){throw console.error("should install blur background module and advanced module"),new Error("should install blur background module and advanced module")},n.prototype.setTransparentBackgroundOptions=function(e){throw console.error("should install blur background module and advanced module"),new Error("should install blur background module and advanced module")},n.prototype.enableBackgroundProcess=function(e,t,i){return new Ge(function(r,s){console.error("should install blur background module and advanced module"),r({errorCode:-1,extendedData:"should install blur background module and advanced module"})})},n.prototype.enableAutoSwitchDevice=function(e){if(this.rtcModules.advancedModule)return this.rtcModules.advancedModule.enableAutoSwitchDevice(e);throw new Error("should use advanced module first")},n.prototype.getSDKVersionNum=function(){var e=this.getReporterVersion(_.SDKProject_ZegoWebRTC,v);this._i.sdkVerNum=e},n.prototype.initTracer=function(e){this._i.reporter=e;var t=new Rg(this.RTM.stateCenter,this._i,this.Ri);this.ji.setCommonStates(t),this.ji.setResource({sdk_version:v,report_version:this._i.sdkVerNum})},n.prototype.getReporterVersion=function(e,t){var i=t.split(".").map(function(r){return parseInt(r)});return e<<28|i[0]<<20|i[1]<<8|i[2]},n.prototype.setEngineConfig=function(e){if(this._i.engineConfig=Cs(Cs({},this._i.engineConfig),e),this.checkQualityInterval(),this._i.actionListener("_engineConfigUpdate",this._i.engineConfig),e.adaptCustomUA){var t=Qt();this._i.customUa=t.includes("iOS"),this.Oi.info("zc.sec.0 custom ua ".concat(t))}},n.prototype.checkQualityInterval=function(){var e=this._i.engineConfig,t=e.publishQualityInterval,i=e.playQualityInterval;qi(t)&&t!==0&&t<ze&&(this._i.engineConfig.publishQualityInterval=ze),qi(i)&&i!==0&&i<ze&&(this._i.engineConfig.playQualityInterval=ze)},n.prototype.inject=function(e,t){var i=this;if(e!=="ZegoExpressPlayer")throw new Error("You are not authorized to use 'inject' method!");t({appid:this._i.appid,logger:this.Oi,validateToken:function(r,s){return ko(i,void 0,void 0,function(){return Po(this,function(o){switch(o.label){case 0:return this._i.player265Validated?[2,!0]:[4,this.RTM.fetchAppConfigByTargetToken(r,s)];case 1:return o.sent()&&(this._i.player265Validated=!0),[2,!!this._i.player265Validated]}})})},isLogin:function(){return i._i.rtm&&i._i.rtm.stateCenter.roomModulesList.some(function(r){return r.isLogin()})},seiConfig:function(){return i._i.seiConfig},addReceiver:function(r){i._i.player265ReceiverList.push(r)},removeReceiver:function(r){i._i.player265ReceiverList=i._i.player265ReceiverList.filter(function(s){return s!=r})}})},n.prototype.setStreamAlignmentProperty=function(e,t){return ko(this,void 0,void 0,function(){var i,r,s,o;return Po(this,function(u){switch(u.label){case 0:return i="zc.ssap",r=bi(e),this.Oi.info(i+" call. "+(r?e:e==null?void 0:e.id)+" alignment: ".concat(t)),s=null,(s=r?this.Ri.publisherList[e]:this.Ri.checkPublish(e))&&s.publisher.state===6?[4,s.publisher.setStreamAlignmentProperty(t)]:(this.Oi.error(i+" failed.  setStreamAlignmentProperty failed, stream not published."),[2,!1]);case 1:return o=u.sent(),this.Oi.info(i+" end. "+o),[2,o]}})})},n.prototype.setTurnServer=function(e){if(!In(e))throw"'setTurnServer' failed. param error.";this.streamCenter.turnServers=kg([],e,!0)},n.prototype.destroyEngine=function(){if(this._i.engineDestroy)throw new Error("ZegoExpressEngine has been destroyed.");this.destroyEngineHandler(),this._i.engineDestroy=!0},n.prototype.uploadLog=function(){return this.RTM.uploadLog()},n.screenShotReady=!1,n.isInstantiated=!1,n}();window.addEventListener("message",function(n){n.data.type==="SS_PING"&&(ws.screenShotReady=!0)});var yu,td=function(){return td=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},td.apply(this,arguments)},Pg=function(){function n(e,t){this.Oe=e,this.Ae=t}return n.prototype.start=function(e,t,i,r){this.Oe.playEffect(td({stream:this.Ae,effectID:e},t||{}),i,r)},n.prototype.stop=function(e){return this.Oe.stopEffect(this.Ae,e)},n.prototype.pause=function(e){return this.Oe.pauseEffect(this.Ae,e)},n.prototype.resume=function(e){return this.Oe.resumeEffect(this.Ae,e)},n.prototype.setVolume=function(e,t,i){return this.Oe.setEffectVolume(this.Ae,t,e,i)},n.prototype.getTotalDuration=function(e){return this.Oe.getEffectDuration(e)},n.prototype.getCurrentProgress=function(e){return this.Oe.getEffectCurrentProgress(this.Ae,e)},n.prototype.seekTo=function(e,t){return this.Oe.seekAudioEffect(this.Ae,e,t)},n}(),Ag=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),oo=function(n){function e(t,i,r){var s=this;return g.ZegoExpressWebRTMEngine.version="3.2.0",(s=n.call(this,t,i,0,arguments[2])||this).zegoWebRTC=new ws(s.logger,s.dataReport,s.reporter,s.zegoWebRTM,0,r==null?void 0:r.scenario),s}return Ag(e,n),e.prototype.setEngineConfig=function(t){this.zegoWebRTC.setEngineConfig(t)},e.setEngineOptions=function(t){g.ZegoExpressWebRTMEngine.setEngineOptions(t),ws.setEngineOptions(t)},e.setGeoFence=function(t,i){ws.setGeoFence(t,i),g.ZegoExpressWebRTMEngine.setGeoFence(t,i)},e.prototype.setRoomScenario=function(t){return this.zegoWebRTC.setRoomScenario(t)},e.prototype.setSEIConfig=function(t){this.zegoWebRTC.setSEIConfig(t)},e.use=function(t){g.ZegoExpressWebRTMEngine.use(t),ws.use(t)},e.prototype.checkSystemRequirements=function(t,i){return i===void 0&&(i=0),this.zegoWebRTC.checkSystemRequirements(i,t)},e.prototype.off=function(t,i){return this.zegoWebRTM.stateCenter.listenerList[t]?this.zegoWebRTM.off(t,i):!!this.zegoWebRTC.stateCenter.listenerList[t]&&this.zegoWebRTC.off(t,i)},e.prototype.on=function(t,i){return this.zegoWebRTM.stateCenter.listenerList[t]?this.zegoWebRTM.on(t,i):!!this.zegoWebRTC.stateCenter.listenerList[t]&&this.zegoWebRTC.on(t,i)},e.prototype.createStream=function(t){return this.zegoWebRTC.createStream(t)},e.prototype.createZegoStream=function(t){return this.zegoWebRTC.createZegoStream(t)},e.prototype.getPublishingStreamQuality=function(t){return this.zegoWebRTC.getPublishingStreamQuality(t)},e.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},e.prototype.destroyStream=function(t){return this.zegoWebRTC.destroyStream(t)},e.prototype.startPublishingStream=function(t,i,r){return this.zegoWebRTC.startPublishingStream(t,i,r)},e.prototype.updatePublishingStream=function(t,i){return this.zegoWebRTC.updatePublishingStream(t,i)},e.prototype.stopPublishingStream=function(t){return this.zegoWebRTC.stopPublishingStream(t)},e.prototype.sendSEI=function(t,i){return this.zegoWebRTC.sendSEI(t,i)},e.prototype.setVideoConfig=function(t,i){return this.zegoWebRTC.setVideoConfig(t,i)},e.prototype.setAudioConfig=function(t,i){return this.zegoWebRTC.setAudioConfig(t,i)},e.prototype.replaceTrack=function(t,i){return this.zegoWebRTC.replaceTrack(t,i)},e.prototype.addTrack=function(t,i){return this.zegoWebRTC.addTrack(t,i)},e.prototype.removeTrack=function(t,i){return this.zegoWebRTC.removeTrack(t,i)},e.prototype.setCaptureVolume=function(t,i){return this.zegoWebRTC.setCaptureVolume(t,i)},e.prototype.setDummyCaptureImagePath=function(t,i){return this.zegoWebRTC.setDummyCaptureImagePath(t,i)},e.prototype.setStreamExtraInfo=function(t,i){return this.zegoWebRTC.setStreamExtraInfo(t,i)},e.prototype.enableVideoCaptureDevice=function(t,i){return this.zegoWebRTC.enableCameraCapturing(t,i)},e.prototype.addPublishCdnUrl=function(t,i){return arguments.length===3?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(t,i)},e.prototype.removePublishCdnUrl=function(t,i){return arguments.length===3?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(t,i)},e.prototype.mutePublishStreamVideo=function(t,i,r){return this.zegoWebRTC.mutePublishStreamVideo(t,i,r)},e.prototype.mutePublishStreamAudio=function(t,i){return this.zegoWebRTC.mutePublishStreamAudio(t,i)},e.prototype.setEffectsBeauty=function(t,i,r){return this.zegoWebRTC.setBeautyEffect(t,i,r)},e.prototype.setLowlightEnhancement=function(t,i){return this.zegoWebRTC.setLowlightEnhance(t,i)},e.prototype.enableDualStream=function(t){return this.zegoWebRTC.enableDualStream(t)},e.prototype.setLowStreamParameter=function(t,i){return this.zegoWebRTC.setLowStreamParameter(t,i)},e.prototype.enableHardwareEncoder=function(t){this.zegoWebRTC.enableVideoHardwareEncoder(t)},e.prototype.enableAutoSwitchDevice=function(t){return this.zegoWebRTC.enableAutoSwitchDevice(t)},e.prototype.initBackgroundModule=function(t,i){return this.zegoWebRTC.initBackgroundModule(t,i)},e.prototype.setBackgroundBlurOptions=function(t,i){return this.zegoWebRTC.setBackgroundBlurOptions(t,i)},e.prototype.setTransparentBackgroundOptions=function(t){return this.zegoWebRTC.setTransparentBackgroundOptions(t)},e.prototype.setVirtualBackgroundOptions=function(t,i){return this.zegoWebRTC.setVirtualBackgroundOptions(t,i)},e.prototype.enableBackgroundProcess=function(t,i,r){return this.zegoWebRTC.enableBackgroundProcess(t,i,r)},e.prototype.setVoiceChangerPreset=function(t,i){return this.zegoWebRTC.setVoiceChangerPreset(i,{voiceChanger:t})},e.prototype.setVoiceChangerParam=function(t,i){return this.zegoWebRTC.setVoiceChangerPreset(t,{voiceParam:i})},e.prototype.setReverbPreset=function(t,i){return this.zegoWebRTC.setVoiceChangerPreset(t,{reverb:i})},e.prototype.enableVirtualStereo=function(t,i,r){return this.zegoWebRTC.setVoiceChangerPreset(t,{stereo:{enable:i,angle:r}})},e.prototype.enableLiveAudioEffect=function(t,i,r){return this.zegoWebRTC.enableLiveAudioEffect(t,r,{liveEffect:i})},e.prototype.setAudioChangerParam=function(t,i,r){return this.zegoWebRTC.enableLiveAudioEffect(t,r,{pitch:i})},e.prototype.enableAiDenoise=function(t,i){return this.zegoWebRTC.enableAiDenoise(t,i)},e.prototype.startPlayingStream=function(t,i){return this.zegoWebRTC.startPlayingStream(t,i)},e.prototype.stopPlayingStream=function(t){return this.zegoWebRTC.stopPlayingStream(t)},e.prototype.mutePlayStreamVideo=function(t,i){return this.zegoWebRTC.mutePlayStreamVideo(t,i)},e.prototype.mutePlayStreamAudio=function(t,i){return this.zegoWebRTC.mutePlayStreamAudio(t,i)},e.prototype.setAudioFrameCallback=function(t,i,r){return this.zegoWebRTC.setAudioFrameCallback(t,i,r)},e.prototype.getPlayingStreamQuality=function(t){return this.zegoWebRTC.getPlayingStreamQuality(t)},e.prototype.createLocalStreamView=function(t){return this.zegoWebRTC.createLocalViewer(t)},e.prototype.createRemoteStreamView=function(t){return this.zegoWebRTC.createRemoteViewer(t)},e.prototype.startMixerTask=function(t){return this.zegoWebRTC.startMixerTask(t)},e.prototype.stopMixerTask=function(t){return this.zegoWebRTC.stopMixerTask(t)},e.prototype.setMixerTaskConfig=function(t){return this.zegoWebRTC.setMixerTaskConfig(t)},e.prototype.startMixingAudio=function(t,i){return this.zegoWebRTC.startMixingAudio(t,i)},e.prototype.stopMixingAudio=function(t,i){return this.zegoWebRTC.stopMixingAudio(t,i)},e.prototype.setMixingAudioVolume=function(t,i,r){return this.zegoWebRTC.setMixingAudioVolume(t,i,r)},e.prototype.createAudioEffectPlayer=function(t){if(t instanceof MediaStream||t.getTracks)return new Pg(this.zegoWebRTC,t);throw Error("Param localStream is not instance of MediaStream or ZegoLocalStream.")},e.prototype.loadAudioEffect=function(t,i){var r=this;return new Promise(function(s,o){r.zegoWebRTC.preloadEffect(t,i,function(u){u&&o(u),s(t)})})},e.prototype.unloadAudioEffect=function(t){return this.zegoWebRTC.unloadEffect(t)},e.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},e.prototype.getCameras=function(){return this.zegoWebRTC.getCameras()},e.prototype.getMicrophones=function(){return this.zegoWebRTC.getMicrophones()},e.prototype.getSpeakers=function(){return this.zegoWebRTC.getSpeakers()},e.prototype.useVideoDevice=function(t,i){return this.zegoWebRTC.useVideoDevice(t,i)},e.prototype.useAudioDevice=function(t,i){return this.zegoWebRTC.useAudioDevice(t,i)},e.prototype.useAudioOutputDevice=function(t,i){return this.zegoWebRTC.setAudioOutputDevice(t,i)},e.prototype.useFrontCamera=function(t,i){return this.zegoWebRTC.useFrontCamera(t,i)},e.prototype.setSoundLevelDelegate=function(t,i,r){return this.zegoWebRTC.setSoundLevelDelegate(t,i,r==null?void 0:r.enableInBackground)},e.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},e.prototype.muteMicrophone=function(t){return this.zegoWebRTC.muteMicrophone(t)},e.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},e.prototype.createRealTimeSequentialDataManager=function(t){return this.zegoWebRTC.createRealTimeSequentialDataManager(t)},e.prototype.destroyRealTimeSequentialDataManager=function(t){this.zegoWebRTC.destroyRealTimeSequentialDataManager(t)},e.prototype.createCopyrightedMusic=function(){return this.zegoWebRTC.createCopyrightedMusic()},e.prototype.checkVideoTrackIsActive=function(t){return this.zegoWebRTC.checkVideoTrackIsActive(t)},e.prototype.checkAudioTrackIsActive=function(t){return this.zegoWebRTC.checkAudioTrackIsActive(t)},e.prototype.destroyCopyrightedMusic=function(){return this.zegoWebRTC.destroyCopyrightedMusic()},e.prototype.getNetworkTimeInfo=function(){return this.zegoWebRTC.RTM.getNetworkInfo()},e.prototype.setStreamAlignmentProperty=function(t,i){return this.zegoWebRTC.setStreamAlignmentProperty(t,i)},e.prototype.destroyEngine=function(){return this.zegoWebRTC.destroyEngine()},e.prototype.uploadLog=function(){return this.zegoWebRTC.uploadLog()},e.prototype.createStreamCompositor=function(){return this.zegoWebRTC.createStreamCompositor()},e.prototype.setTurnServer=function(t){this.zegoWebRTC.setTurnServer(t)},e}(g.ZegoExpressWebRTMEngine),Dg=__webpack_require__(5533),Ng=__webpack_require__.n(Dg),Lg=__webpack_require__(4295),Mg=__webpack_require__.n(Lg),Nn="zc.svc",id="zc.sac",rd="zc.rp",Sf="zc.es",Ef="zc.emo",Is="zc.asi",_u="zc.mpsv.0",bu="zc.mpsa.0",nd="zc.mm",Tf="zc.mpsv.1",Rf="zc.mpsa.1",ur="zc.ht",xg="stream",Cf="/sdk/start_publish",Su="/sdk/start_play",Eu={event:"/sdk/set_video_config",error:{tt:_t,mi:yt},video_params:nr,video_conf:nr},Ao={event:"/sdk/set_audio_config",error:{tt:_t,mi:yt},audio_params:nr,audio_conf:nr},Ug="/sdk/api/publish_video_en_size",Bg=Dt,zg=Dt,Fg="/sdk/api/publish_video_en_bps",Hg=Dt,qg="/sdk/api/publish_video_en_fps",jg=Dt,od={event:"/sdk/replace_track",error:{tt:_t},track_kind:Kt},zr={event:"/device/api/video_c",error:{tt:_t,ze:ma,mi:yt,De:ki},device:Kt,device_name:Kt,facing_mode:Kt},Os={event:"/device/api/audio_c",error:{tt:_t,ze:ma,mi:yt},device:Kt,device_name:Kt},wf={event:"/sdk/play_content_changed",webrtc_sid:Dt,video_activate:zi,audio_activate:zi,video_layer:Dt},Vg="/sdk/mute_publish_video",Gg=Dt,Wg=zi,Qg="/sdk/mute_publish_audio",Zg=Dt,Kg="/device/enable_mic",Jg=zi,Yg=nr,Xg="/device/enable_camera",$g=zi,ev=nr,tv="/sdk/mute_play_video",iv=Dt,rv="/sdk/mute_play_audio",nv=Dt,ov="/active/sei",sv=Dt,av=Dt,Hn=function(){return Hn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Hn.apply(this,arguments)},oa=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},sa=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}};(function(n){n[n.I=0]="I",n[n.H=10]="H",n[n.M=100]="M",n[n.L=1e3]="L"})(yu||(yu={}));var Xo,cv=function(){function n(e,t,i,r){this.Oi=e,this.Ai=t,this.Ri=i,this._i=r,this.screenShotReady=!1}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.setVideoConfig=function(e,t){var i=this;return yi(this.Oi,Nn),new Ge(function(r,s){var o=_r(e,i.Oi),u=Eu.error,m=u.mi,f=u.tt,a=i._getSpan(o,Eu.event),S=Hn({},t);t.width&&(S.width=JSON.stringify(t.width)),t.height&&(S.height=JSON.stringify(t.height)),t.frameRate&&(S.frameRate=JSON.stringify(t.frameRate)),a.setAttributes({video_params:Eu.video_params(S)});var F,ee,ie=function(ae){i.ji.setError(a,m,ae)};if(!Ar(o))return i.Oi.error(Nn+" localStream not found"),ie("localStream not found"),void s({errorCode:f.code,extendedData:f.message+" localStream no found"});if(!t||!tr(t)||Object.keys(t).length==0)return i.Oi.error(Nn+" constraints wrong"),ie("constraints wrong"),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.width&&qi(t.width)&&!i._i.checkValidNumber(t.width,0,7680))return i.Oi.error(Nn+" constraints width integer number, range[0, 7680]"),ie("constraints width integer number, range[1, 7680]"),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.width&&tr(t.width)){if(!(ee=Nc(t.width,"width",0,7680)).result)return i.Oi.error(Nn+" constraints width: "+ee.message),ie("constraints width: "+ee.message),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"})}else if(t.width&&!qi(t.width)&&!tr(t.width))return i.Oi.error(Nn+" constraints width must be a number or an object. "),ie("constraints width must be a number or an object."),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.height&&qi(t.height)&&!i._i.checkValidNumber(t.height,0,4320))return i.Oi.error(Nn+" constraints height integer number, range[0, 4320]"),ie(" constraints height integer number, range[0, 4320]"),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.height&&tr(t.height)){if(!(ee=Nc(t.height,"height",0,4320)).result)return i.Oi.error(Nn+" constraints height: "+ee.message),ie("constraints height: "+ee.message),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"})}else if(t.height&&!qi(t.height)&&!tr(t.height))return i.Oi.error(Nn+" constraints height must be a number or an object. "),ie(" constraints height must be a number or an object."),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.maxBitrate&&!qi(t.maxBitrate))return i.Oi.error(Nn+(F=" constraints maxBitrate is not a number")),ie(F),void s({errorCode:f.code,extendedData:f.message+F});if(!Yi(t.frameRate)&&!qi(t.frameRate)&&!tr(t.frameRate))return i.Oi.error(Nn+(F=" constraints frameRate is not a number or an object")),ie(F),void s({errorCode:f.code,extendedData:f.message+F});if(qi(t.frameRate)&&!(t.frameRate>0&&t.frameRate%1==0))return i.Oi.error(Nn+" constraints frameRate must be positive integer number"),ie("constraints frameRate must be positive integer number"),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});if(t.frameRate&&tr(t.frameRate)&&!(ee=Nc(t.frameRate,"frameRate")).result)return i.Oi.error(Nn+" constraints frameRate: "+ee.message),ie("constraints frameRate: "+ee.message),void s({errorCode:f.code,extendedData:f.message+" constraints wrong"});i._setPublishStreamConstraints(o,t,a,function(ae){a.setAttributes({error:ae.errorCode,message:ae.extendedData}),a.end(),r(ae)})})},n.prototype.setAudioConfig=function(e,t){var i=this;return yi(this.Oi,id),new Ge(function(r){var s=_r(e,i.Oi),o=i._getSpan(s,Ao.event);if(o.setAttributes({audio_params:Ao.audio_params(t)}),!Ar(s))return i.Oi.error(id+" localStream not found"),i.ji.setError(o,Ao.error.mi),void r({errorCode:Ao.error.tt.code,extendedData:Ao.error.tt.message+" localStream no found"});if(!t||!tr(t)||Object.keys(t).length==0||!Yi(t.AEC)&&!Li(t.AEC)||!Yi(t.AGC)&&!Li(t.AGC)||!Yi(t.ANS)&&!Li(t.ANS))return i.Oi.error(id+" constraints wrong"),i.ji.setError(o,Ao.error.tt," constraints wrong"),void r({errorCode:Ao.error.tt.code,extendedData:Ao.error.tt.message+" constraints wrong"});i._setPublishStreamConstraints(s,t,o,function(u){o.end(),r(u)})})},n.prototype.enableStream=function(e,t){if(yi(this.Oi,Sf),!Li(t.video)&&!Li(t.audio))return this.Oi.error(Sf+" option error"),!1;var i=!0,r=!0,s=t.video,o=t.audio;return Li(s)&&(i=this._enableCamera(e,s,t.retain)),Li(o)&&(r=this._enableMicrophone(e,o)),i&&r},n.prototype.enableMicrophoneOnly=function(e){if(yi(this.Oi,Ef),!Li(e))return!1;for(var t=0;t<this.Ri.previewStreamList.length;t++)if(!this.Ri.previewStreamList[t].enableMicrophoneOnly(e,this.Ri))return this.Oi.error("".concat(Ef,".0 previewer ").concat(t," change mic mute state failed")),!1;return this.Ri.isMicEnabled=e,!0},n.prototype.replaceTrack=function(e,t,i,r){return oa(this,void 0,void 0,function(){var s,o,u,m,f;return sa(this,function(a){return s=this._getSpan(e,od.event),o=od.error.tt,Ar(e)?t&&t instanceof MediaStreamTrack?(u={id:t.id,muted:t.muted,enabled:t.enabled,kind:t.kind,readyState:t.readyState,label:t.label},yi(this.Oi,rd,". ".concat(e.id," track: ")+JSON.stringify(u)),m=!0,this._i.browser==="safari"&&r!==void 0&&(m=r),f=this._replaceTrack(e,t,i,void 0,m),s.setAttributes({track_kind:od.track_kind(t.kind)}),s.end(),[2,f]):(this.Oi.error(rd+" mediastream track no found"),this.ji.setError(s,o,"mediastream track no found"),[2,{errorCode:o.code,extendedData:o.message+" mediastream track no found"}]):(this.Oi.error(rd+" localStream not found"),this.ji.setError(s,o,"localStream not found"),[2,{errorCode:o.code,extendedData:o.message+" localStream no found"}])})})},n.prototype._setPublishStreamConstraints=function(e,t,i,r){var s,o,u=this,m="zsc.spsc.0";this.Oi.info(m+" constraints",JSON.stringify(t));var f=this.Ri.checkPreview(e);if(!f)return this.Oi.error(m+" preview no found"),void(r&&r({errorCode:Ti.code,extendedData:Ti.message}));var a=f.videoTrack,S=f.audioTrack,F=a==null?void 0:a.getSettings(),ee=!1,ie=!1;if(a&&(t.width||t.height||t.frameRate||t.videoQuality)&&(t.videoQuality||(f.mediaStreamConfig.videoQuality=4),ee=!0),t.ANS===void 0&&t.AGC===void 0&&t.AEC===void 0||(ie=!0),ee&&!a)return this.Oi.error(m+" video track not found"),void(r&&r({errorCode:Fr,extendedData:Qr}));if(t.video=!0,ie&&(!S||f.hasEmptyAudioTrack))return this.Oi.error(m+" audio track not found"),void(r&&r({errorCode:Fr,extendedData:Qr}));t.audio=!0;var ae=JSON.parse(JSON.stringify(f.mediaStreamConfig)),be=!1;ae.width===t.width&&ae.height===t.height||(be=!0);var Te,Pe=Object.assign(f.mediaStreamConfig,t);t.maxBitrate&&(Pe.bitRate=t.maxBitrate),f.previewType=="screen"?(Te=this.Ri.getScreenConstrains(Pe)).bitRate!==ae.bitRate&&(t.maxBitrate=Te.bitRate):Te=f.getMediaStreamConstraints(Pe,!0),this.Oi.info(m+" applyConstraints ",JSON.stringify(Te));var Ae=[];if(ee&&a){var Be={};Object.keys(Te.video).forEach(function(At){Be[At]=JSON.stringify(Te.video[At])}),i.setAttributes({video_conf:Eu.video_conf(Be)}),Ae.push(a.applyConstraints(Hn(Hn({},Te.video),{deviceId:void 0})))}var Ze=!0;ie&&(Ze=(S==null?void 0:S.enabled)||!1,i.setAttributes({audio_conf:Ao.audio_conf(Te.audio)}),this.Ri.trackUtils.stopTrack(S),Ae.push(navigator.mediaDevices.getUserMedia({video:!1,audio:Te.audio})));var st=((s=Te.video)===null||s===void 0?void 0:s.maxBitrate)||((o=Te.video)===null||o===void 0?void 0:o.bitRate)||t.maxBitrate,Rt=this.Ri.getPublishList(e);Rt.forEach(function(At){var vt,Ft=At==null?void 0:At.publisher,Ct=((vt=Ft==null?void 0:Ft.peerConnection)===null||vt===void 0?void 0:vt.getSenders())||[];if(Ft.videoInfo.bitRate=st,f.videoInfo.bitRate=st,Ct.length>0&&st){var Mt=Ct.filter(function(kt){return kt.track&&kt.track.kind==="video"});Mt||u.Oi.error(m+" video sender no found");var Gt=Mt.length>1?Mt[1]:Mt[0]?Mt[0]:null;if(Gt){var li=Gt.getParameters();li.encodings||(li.encodings=[{}]),li.encodings[0].maxBitrate=1e3*st,Ae.push(Gt.setParameters(li))}else u.Oi.error(m+" video sender no found")}else st&&(f.videoInfo.bitRate=st)}),Ae.length>0?Promise.all(Ae).then(function(At){var vt,Ft,Ct,Mt=At[1];if(ie){var Gt=(Ct=ee?At[1]:At[0]).getVideoTracks()[0];u.Ri.trackUtils.stopTrack(Gt);var li=Ct.getAudioTracks()[0];li.enabled=Ze,Mt=JSON.stringify(li.getSettings()),f.replacePreviewTrack(li),f.updateZegoStreamCaptureTrack(li);var kt=li;f.insertableaudio&&f.localStream&&(kt=f.localStream.getAudioTracks()[0]),f.destNode||f.onAudioTrackChange(kt)}if(st){var ti=f.videoInfo.bitRate!==st;f.videoInfo.bitRate=st,Rt.forEach(function(Lt){var ui=Lt==null?void 0:Lt.publisher;ui&&(ti&&u.enVideoSpan(Lt.streamID,Fg,{bitrate:Hg(st)}),ui.videoInfo.bitRate=st)})}if(!((vt=Te==null?void 0:Te.video)===null||vt===void 0)&&vt.frameRate){var vi=Te.video.frameRate;f.videoInfo.frameRate=vi,Rt.forEach(function(Lt){var ui=Lt==null?void 0:Lt.publisher;ui&&(ui.videoInfo.frameRate=vi)})}Rt.forEach(function(Lt){var ui,Jt,ai=(Jt=(ui=Lt.localStream)===null||ui===void 0?void 0:ui.getVideoTracks()[0])===null||Jt===void 0?void 0:Jt.getSettings();(F==null?void 0:F.width)===(ai==null?void 0:ai.width)&&(F==null?void 0:F.height)===(ai==null?void 0:ai.height)||u.enVideoSpan(Lt.streamID,Ug,{w:Bg(ai==null?void 0:ai.width),h:zg(ai==null?void 0:ai.height)}),(F==null?void 0:F.frameRate)!==(ai==null?void 0:ai.frameRate)&&u.enVideoSpan(Lt.streamID,qg,{fps:jg(ai==null?void 0:ai.frameRate)})}),ee&&be&&u._i.browser==="safari"&&((Ft=f.videoNodeQueue)===null||Ft===void 0||Ft.replaceNewSourceByTrack(a,void 0,{handleTrackType:V.changeResolution})),u.Oi.info(m+" set constraints success",Mt),r&&r({errorCode:0,extendedData:""})}).catch(function(At){return oa(u,void 0,void 0,function(){var vt,Ft,Ct,Mt,Gt=this;return sa(this,function(li){switch(li.label){case 0:return this.Oi.error(m+" fail reason ",At.name,At.toString()),ie?(vt=f.getMediaStreamConstraints(ae),this.Oi.info(m+" oldMediaStreamConstraints ",JSON.stringify(vt)),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:vt.audio}).catch(function(kt){Gt.Oi.error(m+".1 setbackup fail "+kt.name)})]):[3,2];case 1:(Ft=li.sent())&&(Ft.getTracks().forEach(function(kt){Jr(kt,Gt.Oi,m+".1")}),Ct=e.getVideoTracks()[0],this.Ri.trackUtils.stopTrack(Ct),Mt=Ft.getAudioTracks()[0],f.replacePreviewTrack(Mt),f.updateZegoStreamCaptureTrack(Mt),f.destNode||f.onAudioTrackChange(Mt)),this.Oi.info(m+".1 setbackup suc "),li.label=2;case 2:return r&&r({errorCode:gc,extendedData:"".concat(At.name," ").concat(At.constraint?"constraint:"+At.constraint:"")}),[2]}})})}):(this.Oi.warn(m+" constaints is no changes"),r&&r({errorCode:gc,extendedData:"constraints is no changes"}))},n.prototype.useVideoDevice=function(e,t){var i=this,r="zc.uvd.0";return yi(this.Oi,r),new Ge(function(s){var o=_r(e,i.Oi),u=i._getSpan(o,zr.event);if(u.setAttributes({device:zr.device(t)}),!Ar(o))return i.Oi.error(r+" localStream not found"),i.ji.setError(u,zr.error.mi),void s({errorCode:zr.error.tt.code,extendedData:zr.error.tt.message});if(!bi(t))return i.Oi.error(r+" deviceID must be string"),i.ji.setError(u,zr.error.tt," deviceID must be string"),void s({errorCode:zr.error.tt.code,extendedData:zr.error.tt.message});var m=function(f){u.setAttributes({error:f.errorCode,message:f.extendedData}),u.end(),i.Ri.getPublishList(o).forEach(function(a){var S,F;a.cameraLabel=((F=(S=a.publisher.previewer)===null||S===void 0?void 0:S.videoTrack)===null||F===void 0?void 0:F.label)||a.cameraLabel}),s(f)};i._i.getDevices(function(f){var a=f.cameras.find(function(S){return S.deviceID==t});if(!a)return i.Oi.error(r+" "+H),void m({errorCode:zr.error.ze.code,extendedData:zr.error.ze.message});u.setAttributes({device_name:zr.device_name(a==null?void 0:a.deviceName)}),i.Re("video",o,t,m)},function(f){i.Oi.warn(r+" getDevices err:",f),i.Re("video",o,t,m)})})},n.prototype.useFrontCamera=function(e,t){var i=this,r="zc.ufc.0";return yi(this.Oi,r),new Ge(function(s,o){var u=_r(e,i.Oi),m=i._getSpan(u,zr.event);if(!Ar(u))return i.Oi.error(r+" localStream not found"),i.ji.setError(m,zr.error.mi),void o({errorCode:zr.error.tt.code,extendedData:zr.error.tt.message});if(!Li(t))return i.Oi.error(r+" enable must be boolean"),i.ji.setError(m,zr.error.tt," enable must be boolean"),void o({errorCode:zr.error.tt.code,extendedData:zr.error.tt.message});var f=(0,g.isAndroid)(),a=(0,g.isIos)();if(!f&&!a)return i.Oi.error(r+" must use in mobile"),i.ji.setError(m,zr.error.De," must use in mobile"),void o({errorCode:zr.error.De.code,extendedData:zr.error.De.message});var S=t?"user":"environment";m.setAttributes({facing_mode:zr.facing_mode(S)}),i.Re("video",u,"",function(F){m.setAttributes({error:F.errorCode,message:F.extendedData}),m.end(),i.Ri.getPublishList(u).forEach(function(ee){var ie,ae;ee.cameraLabel=((ae=(ie=ee.publisher.previewer)===null||ie===void 0?void 0:ie.videoTrack)===null||ae===void 0?void 0:ae.label)||ee.cameraLabel}),(F==null?void 0:F.errorCode)===0?s(F):o(F)},{facingMode:S})})},n.prototype.useAudioDevice=function(e,t){var i=this,r="zc.uad.1";return yi(this.Oi,r),new Ge(function(s){var o=_r(e,i.Oi),u=i._getSpan(o,Os.event);u.setAttributes({device:Os.device(t)});var m=function(a,S){i.Oi.error(r+" "+S);var F=a;F.message=F.message+(S?" "+S:""),i.ji.setError(u,a,S),s({errorCode:F.code,extendedData:F.message})},f=function(a){u.setAttributes({error:a.errorCode,message:a.extendedData}),u.end(),i.Ri.getPublishList(o).forEach(function(F){var ee;F.microLabel=((ee=o.getAudioTracks()[0])===null||ee===void 0?void 0:ee.label)||F.microLabel});var S=i.Ri.checkPreview(o);a.errorCode===0&&S&&(S.hasMicTrack=!0),s(a)};Ar(o)?bi(t)?i._i.getDevices(function(a){var S=a.microphones.find(function(F){return F.deviceID==t});if(!S)return i.Oi.error(r+" "+H),void f({errorCode:Os.error.ze.code,extendedData:Os.error.ze.message});u.setAttributes({device_name:Os.device_name(S==null?void 0:S.deviceName)}),i.Re("audio",o,t,f)},function(a){i.Oi.warn(r+" getDevices err:",a),i.Re("audio",o,t,f)}):m(Os.error.tt,"deviceID must be string"):m(Os.error.mi,"localStream not found")})},n.prototype.enableDualStream=function(e){var t="zsc.eds";yi(this.Oi,t);var i=_r(e,this.Oi),r=this.Ri.checkPreview(i);r?r!=null&&r.lowStream?this.Oi.error(t+" low stream already exists"):Ri()&&r.previewType=="custom"?this.Oi.error(t+" can not support firefox"):this.Ri.checkPublish(i)?this.Oi.error(t+" is publishing"):(r.enableDualStream=!0,r.createLowStream()):this.Oi.error(t+" preview no found")},n.prototype.setLowStreamParameter=function(e,t){var i=_r(e,this.Oi),r=this.Ri.checkPreview(i);if(r){var s=r.videoInfo,o=[];for(var u in t)isNaN(+t[u])&&o.push(u);if(o.length)throw new Error('param "'.concat(o.join(","),' type error"'));t.width&&s.width&&t.width>s.width?this.Oi.error("zsc.slsp.0 low stream width can not larger than high stream"):t.height&&s.height&&t.height>s.height?this.Oi.error("zsc.slsp.0 low stream height can not larger than high stream"):t.frameRate&&s.frameRate&&t.frameRate>s.frameRate||t.height&&s.bitRate&&t.bitRate>s.bitRate||(r.lowStreamConfig=Object.assign(r.lowStreamConfig,t))}else this.Oi.error("zsc.slsp.0 preview no found")},n.prototype.handleTrack=function(e,t,i,r,s){var o,u,m,f;return oa(this,void 0,void 0,function(){var a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct,Mt,Gt,li,kt,ti,vi,Lt=this;return sa(this,function(ui){switch(ui.label){case 0:if(yi(this.Oi,ur,". ms id: ".concat(t==null?void 0:t.id,", kind: ").concat(i==null?void 0:i.kind,", track id: ").concat(i==null?void 0:i.id)),a=e==="ADD",S={errorCode:0,extendedData:""},!Ar(t))return this.Oi.error(ur+" stream wrong"),s({errorCode:_t.code,extendedData:_t.message}),[2];if(!(i instanceof MediaStreamTrack))return this.Oi.error(ur+" parameter 2 type error"),s({errorCode:_t.code,extendedData:_t.message}),[2];if(!(F=this.Ri.checkPreview(t)))return this.Oi.error(ur+" stream no found"),s&&s({errorCode:Ti.code,extendedData:Ti.message}),[2];if(i.kind==="video"){if(!((o=F.videoEffect)===null||o===void 0)&&o.enabled)return this.Oi.error(ur+" need to disable video beauty effect first"),s&&s({errorCode:_a,extendedData:"need to disable video beauty effect before add or remove track"}),[2];if(F.enableDualStream)return this.Oi.error(ur+" "+(ee=" can not add/remove track while dual stream enabled.")),s&&s({errorCode:_a,extendedData:ee}),[2];if(F.isBackgroundBlur)return this.Oi.error(ur+" need to disable background process first"),s&&s({errorCode:Hu,extendedData:"need to disable video background process before add or remove track"}),[2]}return F.streamFromCanvas&&i.kind==="video"?(this.Oi.error(ur+" browser not support"),s&&s({errorCode:ya,extendedData:ar}),[2]):(ie=i.kind==="audio"&&this._i.engineConfig.keepAudioTrack&&F.hasEmptyAudioTrack,ae=t.getTracks().length>=2||t.getTracks().find(function(Jt){return Jt.kind==i.kind}),a&&ae&&!ie?(this.Oi.error(ur+" only stream which have one track and kind no exist can add track"),s&&s({errorCode:Kn,extendedData:va}),[2]):e=="REMOVE"&&(t.getTracks().length<=1||i.kind==="video"&&F.hasEmptyAudioTrack||!t.getTracks().find(function(Jt){return Jt.kind===i.kind}))?(this.Oi.error(ur+" can not remove track"),s({errorCode:ya,extendedData:ar}),[2]):!(be=this.Ri.checkPublish(t))||be.publisher.supportTransceiver||be.publisher.stateNego===5&&be.publisher.isUpdateSDP!=1?(Te=function(Jt){var ai=Lt.Ri.previewStreamList.find(function(Vi){return Vi.originVideoTrack===Jt||Vi.originAudioTrack===Jt});if(ai=ai||Lt.Ri.previewStreamList.find(function(Vi){return Vi.localStream.getTracks().find(function(Fi){return Fi==Jt})}),ai)return Lt.Oi.info(ur+" video info: ".concat(JSON.stringify(ai.videoInfo))),ai;Lt.Oi.warn(ur+" ".concat(Jt.kind," track is not created by sdk"))},this._i.engineConfig.keepAudioTrack&&i.kind==="audio"?(a?((vi=(u=Te(i))===null||u===void 0?void 0:u.videoInfo)&&F.updateAudioInfo(vi),this._replaceTrack(t,i,!1,!0),F.hasEmptyAudioTrack=!1):((Pe=F.getEmptyAudioTrack())&&this._replaceTrack(t,Pe,!1,!0),F.hasEmptyAudioTrack=!0),this.Oi.info(ur+" end"),r(S),[2]):(Ae=F.rtcViewer,Be=F,Ze=i.kind=="video"?"videoTrack":"audioTrack",a&&(st=Te(i))&&(i.kind==="video"?(Be.updateMediaStreamConstraints(st.mediaStreamConfig,"video"),F.mediaStreamConfig.video=!0):(Be.updateMediaStreamConstraints(st.mediaStreamConfig,"audio"),F.mediaStreamConfig.audio=!0)),be?(Rt=be.publisher,(At=be.publisher.peerConnection)?(Rt.supportTransceiver?this.Oi.info(ur+" support transceiver"):Rt.isUpdateSDP=!0,Rt.sideMediaConfig.isSEIStart&&i.kind==="video"?(this.Oi.info(ur+" replace sei blank track."),vt=void 0,a?[4,Rt.replacePublishedTrack(i,!1,{handleTrack:e})]:[3,2]):[3,5]):(this.Oi.error(ur+" pc has not created."),[2])):[3,15])):(this.Oi.error(ur+" publish state wrong. "+"".concat(be.publisher.stateNego)),s&&s({errorCode:ns,extendedData:os}),[2]));case 1:return vt=ui.sent(),Rt.handleSEIVideoTrack("add"),[3,4];case 2:return Rt.handleSEIVideoTrack("remove"),[4,Rt.replacePublishedTrack(Rt.sideMediaConfig.track,!1,{handleTrack:e})];case 3:vt=ui.sent(),ui.label=4;case 4:return(vt==null?void 0:vt.errorCode)===0||this.Oi.warn(ur+" enable sei but not found video sender. error: ".concat(JSON.stringify(vt))),[3,11];case 5:return i.kind!=="audio"?[3,6]:(Rt.isUpdateSDP=!1,a?(Be.replacePreviewTrack(i),Ft=Be.audioNodeQueue?(f=(m=Be.audioNodeQueue)===null||m===void 0?void 0:m.destinationNode)===null||f===void 0?void 0:f.stream.getAudioTracks()[0]:i,(Ct=At.getSenders().find(function(Jt){return Jt.track&&Jt.track.kind==="audio"}))?Ct.replaceTrack(Ft):At.addTrack(Ft,t),this.Oi.info(ur+" add audio track. ")):(t.removeTrack(i),Be[Ze]=null,Ae&&Ae.setTrack(!1,null),(Ct=At.getSenders().find(function(Jt){return Jt.track&&Jt.track.kind==="audio"}))&&Ct.replaceTrack(null),this.Oi.info(ur+" remove audio track. ")),this.Oi.info(ur+" end"),r(S),[2]);case 6:return Ct=At.getSenders().find(function(Jt){return Jt.track&&Jt.track.kind==i.kind||Jt.track===null}),Mt=i,Be.zegoCaptureStream&&(Gt=Be.getStreamThroughCanvas(new MediaStream([i])),Mt=Gt.getVideoTracks()[0]),a?Ct?[4,Ct.replaceTrack(i)]:[3,8]:[3,10];case 7:return ui.sent(),this.Oi.info(ur+" sender replace track "+Mt.kind),[3,9];case 8:At.addTrack(Mt,t),this.Oi.info(ur+" pc add track "+Mt.kind),ui.label=9;case 9:return[3,11];case 10:if(!Ct)return this.Oi.error(ur+" sender no found"),s&&s({errorCode:Fr,extendedData:Qr}),[2];try{Ct.replaceTrack(null),this.Oi.info(ur+" sender replace null.")}catch(Jt){this.Oi.error(ur+" "+Jt),s&&s({errorCode:vn,extendedData:vc+" "+Jt})}ui.label=11;case 11:return li=Be.updateVideoInfo(vi=a?st==null?void 0:st.videoInfo:{}),kt=function(){e=="ADD"?(t.addTrack(i),Be[Ze]=i,Ae&&Ae.setTrack(i.kind=="video",i,Lt._i.browser==="safari"),i.kind=="video"&&i.enabled==1?Rt.sendStreamStatus(0,Rt.mic_status,!0):i.enabled==1&&Rt.sendStreamStatus(Rt.camera_status,0,!0),Lt.Oi.info(ur+" add track completely")):(i.kind=="video"?Rt.sendStreamStatus(2,Rt.mic_status,!0):Rt.sendStreamStatus(Rt.camera_status,2,!0),t.removeTrack(i),Be[Ze]=null,Ae&&Ae.setTrack(i.kind=="video",null),Lt.Oi.info(ur+" remove track completely")),F.mediaStreamConfig.video=e=="ADD"},ti=function(){return oa(Lt,void 0,void 0,function(){var Jt,ai,Vi,Fi=this;return sa(this,function(Ni){switch(Ni.label){case 0:Jt={},Ni.label=1;case 1:return Ni.trys.push([1,3,,4]),[4,At.createOffer(Jt)];case 2:return ai=Ni.sent(),Rt.onCreateOfferSuccess(ai,!0,Hn(Hn({},li),{bitRate:a?li.bitRate:50}),function(ir){return oa(Fi,void 0,void 0,function(){return sa(this,function(Rr){return ir!==0?s&&s({errorCode:Sr.code,extendedData:Sr.message}):(kt(),r(S),this.Oi.info(ur+" end")),[2]})})}),[3,4];case 3:return Vi=Ni.sent(),this.Oi.error(ur+" "+Vi),s&&s({errorCode:Bi.code,extendedData:Bi.message+" "+Vi}),[3,4];case 4:return[2]}})})},Rt.isUpdateSDP?(this.Oi.info(ur+" need to update sdp"),[4,ti()]):[3,13];case 12:return ui.sent(),[3,14];case 13:this.Oi.info(ur+" only update track"),kt(),a&&i.kind==="video"&&li.bitRate&&Rt.setBitrate(li.bitRate),r(S),ui.label=14;case 14:return[3,16];case 15:a?((vi=st==null?void 0:st.videoInfo)&&(i.kind==="video"?(Be.updateVideoInfo(vi),F.mediaStreamConfig.video=!0):Be.updateAudioInfo(vi)),t.addTrack(i),Be[Ze]=i,Ae&&Ae.setTrack(i.kind=="video",i)):(t.removeTrack(i),Be[Ze]=null,i.kind==="video"&&(F.mediaStreamConfig.video=!1),Ae&&Ae.setTrack(i.kind=="video",null)),this.Oi.info(ur+" end"),r(S),ui.label=16;case 16:return[2]}})})},n.prototype.Re=function(e,t,i,r,s){return oa(this,void 0,void 0,function(){var o,u,m,f,a,S,F,ee,ie,ae,be,Te=this;return sa(this,function(Pe){switch(Pe.label){case 0:return o=this.Ri.checkPreview(t),u=e==="audio",o?e==="video"&&o.previewType!=="camera"?(this.Oi.error("zsc.sd.0 stream type cannot set device"),r&&r({errorCode:ki.code,extendedData:ki.message}),[2]):e==="video"&&o.mediaStreamConfig.video==0?(this.Oi.error("zsc.sd.0 camera can not be changed when video is false"),r&&r({errorCode:rn.code,extendedData:rn.message}),[2]):u&&o.mediaStreamConfig.audio==0?(this.Oi.error("zsc.sd.0 microphone can not be changed when audio is false"),r&&r({errorCode:ga.code,extendedData:ga.message}),[2]):(i&&delete o.mediaStreamConfig.facingMode,m={},e==="video"?(s!=null&&s.facingMode?m.facingMode=s.facingMode:i&&(m.videoInput=i),f=o.videoTrack):(m.audio=!0,m.audioInput=i,f=o.audioTrack),this._i.browser,a=(0,g.isAndroid)(),Ri()||et()&&a&&Qt().indexOf("Oriole 64-bit")>-1?(this.Ri.trackUtils.stopTrack(f),a&&Ri()?[4,new Promise(function(Ae){setTimeout(function(){Ae(void 0)},100)})]:[3,2]):[3,2]):(this.Oi.error("zsc.sd.0 preview no found"),r&&r({errorCode:Ti.code,extendedData:Ti.message}),[2]);case 1:Pe.sent(),Pe.label=2;case 2:return S=Hn(Hn({},o.mediaStreamConfig),m),u&&i==="default"&&(this.Oi.warn("zsc.sd.0 stop preview audio track"),o.audioTrack&&o.audioTrack.stop()),F=o.getMediaStreamConstraints(S),ee=function(Ae,Be){Be.getTracks().forEach(function(Ze){if(Ze.kind===e){var st=e==="video",Rt=st?"videoTrack":"audioTrack",At=o[Rt];st&&o.streamFromCanvas&&o.stopCanvasStreamTrack(),At&&(Ze.enabled=At.enabled),st&&o.lowStream&&o.lowStream.getTracks().forEach(function(Ft){Te.Ri.trackUtils.stopTrack(Ft)});var vt=Te.Ri.getPublishList(t);vt.length>0&&(!o.muteImage||Ze.enabled||!st)?vt.map(function(Ft){return Ft.publisher}).forEach(function(Ft){Ft.replacePublishedTrack(Ze,!1,{isCamera:!0})}):o&&o.muteImage&&!Ze.enabled&&st?o[Rt]=Ze:o&&o.replacePreviewTrack(Ze,!1,{isCamera:!0}),Te.Ri.trackUtils.stopTrack(At),o.updateZegoStreamCaptureTrack(Ze)}}),o.restartSoundLevel()},u?F.video=!1:F.audio=!1,this.Oi.info("zsc.sd.0 mediaStreamConstraints "+JSON.stringify(F)),ie=rn,e==="audio"&&(ie=ga),ae=function(Ae){for(var Be=0,Ze=Ae.getTracks();Be<Ze.length;Be++)if(Ze[Be].readyState=="ended")return!0;return!1},be=function(Ae){Te.Ri.trackUtils.stopTrack(e=="video"?o.videoTrack:o.audioTrack),Te.Oi.warn("zsc.sd.0 switch "+e+" device failed, stop last device and retry. ",Ae+""),navigator.mediaDevices.getUserMedia(F).then(function(Be){Object.assign(o.mediaStreamConfig,m),ee(0,Be),Te.Oi.info("zsc.sd.0 swtich "+e+" device success"),r&&r({errorCode:0,extendedData:""})},function(Be){Te.Oi.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. ",Be+"");var Ze=o.getMediaStreamConstraints(o.mediaStreamConfig);navigator.mediaDevices.getUserMedia(Ze).then(function(st){ee(0,st),Te.Oi.info("zsc.sd.0 recover last "+e+" device success"),r&&r({errorCode:ie.code,extendedData:ie.message+" "+JSON.stringify(Be)})},function(st){Te.Oi.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. ",st+""),r&&r({errorCode:ie.code,extendedData:ie.message+" "+JSON.stringify(st)})})})},navigator.mediaDevices.getUserMedia(F).then(function(Ae){ae(Ae)&&Te.Oi.error("zsc.sd.0 switch"+e+" device fail, has track ended."),Object.assign(o.mediaStreamConfig,m),ee(0,Ae),Te.Oi.info("zsc.sd.0 switch "+e+" device success"),r&&r({errorCode:0,extendedData:""})},be),[2]}})})},n.prototype._replaceTrack=function(e,t,i,r,s){r===void 0&&(r=!1),s===void 0&&(s=!1);var o=this.Ri.checkPreview(e),u=this.Ri.getPublishList(e,!1);if(!o)return this.Oi.error("zc.rt.0 preview no found"),{errorCode:Ti.code,extendedData:Ti.message};if(o.streamFromCanvas&&t.kind==="video")return this.Oi.error("zc.rt.0 browser not support"),{errorCode:ya,extendedData:ar};var m=e.getTracks().find(function(st){return st.kind===t.kind}),f=t.kind==="audio",a={errorCode:Fr,extendedData:Qr};if(!r&&!m)return this.Oi.error("zc.rt.0 track no found"),a;if(!r&&f&&o.hasEmptyAudioTrack&&(this.Oi.warn("zc.rt.0 replace empty audio track"),!this._i.engineConfig.allowReplaceEmptyTrack))return a;if(r&&f&&!o.mediaStreamConfig.audio){var S=o.mediaStreamConfig;o.mediaStreamConfig.audio=!0;var F=t.getSettings(),ee=F||{},ie=ee.deviceId,ae=ee.echoCancellation,be=ee.noiseSuppression,Te=ee.autoGainControl,Pe=ee.channelCount;this.Oi.info("zc.rt.0 add audio: "+JSON.stringify(F)),ie&&(S.audioInput=ie),Pe&&(S.channelCount=Pe),ae&&(S.AEC=ae),be&&(S.ANS=be),Te&&(S.AGC=Te)}var Ae=this.Ri.soundLevelDelegate&&f,Be=s?{handleTrackType:V.replaceNew}:{};if(u.length){var Ze=null;return Ae&&o.stopSoundLevel(),u.forEach(function(st){var Rt;Ze=(Rt=st.publisher)===null||Rt===void 0?void 0:Rt.replacePublishedTrack(t,!1,Hn({isTrackProcessedFromOriginalStream:i},Be))}),Ae&&o.startSoundLevel(),Ze}return Ae&&o.stopSoundLevel(),o.replacePreviewTrack(t,!1,Hn({isTrackProcessedFromOriginalStream:i},Be)),Ae&&o.startSoundLevel(),{errorCode:0,extendedData:""}},n.prototype._enableMicrophone=function(e,t){var i=this.Ri.checkPreview(e);return i?i.enableMicrophone(t,this.Ri):(this.Oi.error("zsc.em.0 "+I),!1)},n.prototype._enableCamera=function(e,t,i){var r=this.Ri.checkPreview(e);return r?r.enableCamera(t,this.Ri,i):(this.Oi.error("zsc.ec.0 "+I),!1)},n.prototype.setDummyCaptureImagePath=function(e,t){var i=this;return new Ge(function(r,s){var o=_r(t,i.Oi),u=i.Ri.checkPreview(o);if(!u)return i.Oi.error("zc.sdcp.0 preview no found"),void r(!1);if(!bi(e))return i.Oi.error("zc.sdcp.0 filePath type error"),void r(!1);var m=new Image;m.src=e,m.crossOrigin="anonymous",m.onload=function(){u.loadImgTimer&&clearTimeout(u.loadImgTimer),u.loadImgTimer=void 0,i.Oi.info("zc.sdcp.0 load file path success"),u.muteImage=m,r(!0)},u.loadImgTimer=setTimeout(function(){i.Oi.error("zc.sdcp.0 load img timeout"),r(!1)},5e3)})},n.prototype.enableAutoSwitchDevice=function(e){this.Oi.info("zc.easw call. "+JSON.stringify(e)),this._i.autoSwitchDeviceSetting=Hn({},e)},n.prototype._getSpan=function(e,t){var i=this.Ri.checkPublish(e);return this.ji.createSpan(yu.H,i?{key:Cf,par:i.streamID}:{key:xg},{key:""},t)},n.prototype.enVideoSpan=function(e,t,i){var r=this.ji.createSpan(yu.H,{key:Cf,par:e},{key:""},t);r.setAttributes(i),r.end()},n}(),uv=function(){function n(e,t){var i=t.type,r=t.channels,s=r===void 0?1:r,o=t.bufferSize,u=o===void 0?0:o,m=t.sampleBit,f=m===void 0?16:m,a=t.sampleRate,S=a===void 0?44100:a,F=this;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=i,this.channels=s,this.bufferSize=u,this.sampleBit=f,this.sampleRate=S,this.script=e.createScriptProcessor(u,s,s),new Date().getTime(),this.script.addEventListener("audioprocess",function(ee){var ie,ae=ee.inputBuffer.getChannelData(0),be=0,Te=0;for(ie=0;ie<ae.length;++ie)be+=ae[ie]*ae[ie],Math.abs(ae[ie])>.99&&(Te+=1);if(F.instant=Math.sqrt(be/ae.length),F.slow=.95*F.slow+.05*F.instant,F.clip=Te/ae.length,i==="pcm"||i==="wav"){for(var Pe=[],Ae=0;Ae<F.channels;Ae++)Pe.push(ee.inputBuffer.getChannelData(Ae));F.recorderBuffer(Pe)}}),i!=="pcm"&&i!=="wav"||this.initRecorderBuffer(i)}return n.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),Yi(t)||t(null)}catch(i){console.error(i),Yi(t)||t(i)}return this},n.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},n.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker(function(){var i,r,s,o,u,m,f=[];function a(Ae,Be,Ze){for(var st=0;st<Ze.length;st++,Be+=2){var Rt=Math.max(-1,Math.min(1,Ze[st]));Ae.setInt16(Be,Rt<0?32768*Rt:32767*Rt,!0)}}function S(Ae,Be,Ze){for(var st=0;st<Ze.length;st++,Be++){var Rt=Math.max(-1,Math.min(1,Ze[st])),At=Rt<0?128*Rt:127*Rt;Ae.setInt8(Be,At+=128)}}function F(Ae,Be,Ze){for(var st=0;st<Ze.length;st++)Ae.setUint8(Be+st,Ze.charCodeAt(st))}function ee(Ae,Be){for(var Ze=new Float32Array(Be.length/Ae),st=0,Rt=0;st<Ze.length;)Ze[st]=Be[Rt],Rt+=Ae,st++;return Ze}function ie(Ae,Be,Ze){for(var st=new Float32Array(Be*Ae.length),Rt=0,At=0;At<Ze[0].length;At++)st.set(Ze[0][At],Rt),Rt+=Ze[0][At].length;return st}function ae(Ae,Be){for(var Ze=new Float32Array(Ae.length+Be.length),st=0;st<Ae.length+Be.length;st+=2)Ze[st]=Ae[st/2>>0],Ze[st+1]=Be[st/2>>0];return Ze}function be(Ae){var Be,Ze;if(i==1)Be=ie(f[0],u,f),Ae!=1&&(Ze=ee(Ae,Be));else if(i==2){var st=ie(f[0],u,f),Rt=ie(f[1],u,f);Ae!=1?Ze=ae(ee(Ae,st),ee(Ae,Rt)):Be=ae(st,Rt)}return Ae!=1?Ze:Be}function Te(Ae){var Be=function(Ze,st){var Rt;st==8?Rt=Ze.length:st==16&&(Rt=Ze.length,Rt*=2);var At=new ArrayBuffer(Rt),vt=new DataView(At);return st==8?S(vt,0,Ze):r==16&&a(vt,0,Ze),vt}(be(Ae),r);self.postMessage({command:"exportPcmLive",val:Be})}function Pe(Ae){var Be=function(Ze,st){var Rt;st==8?Rt=Ze.length:r==16&&(Rt=Ze.length,Rt*=2);var At=new ArrayBuffer(Rt+44),vt=new DataView(At),Ft=s,Ct=r,Mt=i;return F(vt,0,"RIFF"),vt.setUint32(4,36+Rt,!0),F(vt,8,"WAVE"),F(vt,12,"fmt "),vt.setUint32(16,16,!0),vt.setUint16(20,1,!0),vt.setUint16(22,Mt,!0),vt.setUint32(24,Ft,!0),vt.setUint32(28,Ft*Mt*(Ct/8),!0),vt.setUint16(32,Mt*(Ct/8),!0),vt.setUint16(34,Ct,!0),F(vt,36,"data"),vt.setUint32(40,Rt,!0),r==8?S(vt,44,Ze):r==16&&a(vt,44,Ze),vt}(be(Ae),r);self.postMessage({command:"exportWav",val:Be})}this.onmessage=function(Ae){switch(Ae.data.command){case"init":i=(Be=Ae.data.val).sampleChannel,r=Be.sampleBit,s=Be.sampleRate,o=Be.oldSampleRate,u=Be.bufferSize,m=Be.type;break;case"record":(function(Ze){for(var st=0;st<i;st++)f[st]||(f[st]=[]),f[st].push(Ze[st]);var Rt=Math.round(o/s);m==="pcm"?Te(Rt):m==="wav"&&Pe(Rt),f=[]})(Ae.data.val)}var Be}}),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(i){switch(i.data.command){case"exportPcmLive":t.onReceiveBuffer(i.data.val);break;case"exportWav":t.onReceiveWav(i.data.val)}}},n.prototype.onReceiveBuffer=function(e){},n.prototype.onReceiveWav=function(e){},n.prototype.writeString=function(e,t,i){for(var r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},n.prototype.writeBuffer=function(e,t,i){for(var r=0;r<i.byteLength;r++)e.setUint8(t+r,i[r])},n.prototype.concatenation=function(e){for(var t=0,i=0;i<e.length;++i)t+=e[i].buffer.byteLength;var r=new Uint8Array(t),s=0;for(i=0;i<e.length;++i)r.set(new Uint8Array(e[i].buffer),s),s+=e[i].buffer.byteLength;return r},n.prototype.encodeWave=function(e){var t=this.concatenation(e),i=t.byteLength,r=new ArrayBuffer(i+44),s=new DataView(r),o=this.sampleRate,u=this.sampleBit,m=this.channels;return this.writeString(s,0,"RIFF"),s.setUint32(4,36+i,!0),this.writeString(s,8,"WAVE"),this.writeString(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,m,!0),s.setUint32(24,o,!0),s.setUint32(28,o*m*(u/8),!0),s.setUint16(32,m*(u/8),!0),s.setUint16(34,u,!0),this.writeString(s,36,"data"),s.setUint32(40,i,!0),this.writeBuffer(s,44,t),s},n.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},n.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],i=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(i)}return null},n}(),aa=function(){return aa=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},aa.apply(this,arguments)},$o=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},es=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}};(function(n){n[n.I=0]="I",n[n.H=10]="H",n[n.M=100]="M",n[n.L=1e3]="L"})(Xo||(Xo={}));function Tu(n,e){return n&&n.readyState==="live"?n.enabled===!0?0:n.kind==="video"&&e==="firefox"?2:20:2}var Ru,sd,If,Of={mutePublishStreamVideo:function(n,e,t){var i=_r(n,this.Oi);yi(this.Oi,_u,". "+(i==null?void 0:i.id)+" mute: ".concat(e,", retain: ").concat(t));var r=this.rtcModules.advancedModule,s=r._getSpan(i,Vg),o=this.Ri.checkPreview(i);if(!o)return this.Oi.error(_u+" localStream error"),!1;if(!Li(e)||!Yi(t)&&!Li(t))return this.Oi.error(_u+" option error"),!1;var u=r.enableStream(i,{video:!e,retain:t});return o.syncVideoEnabled=u&&e,s.setAttributes({mute_type:Gg(e?1:0),retain:Wg(t)}),s.end(),hi(this.Oi,_u),u},mutePublishStreamAudio:function(n,e){var t=_r(n,this.Oi);yi(this.Oi,bu,(t==null?void 0:t.id)+" mute: ".concat(e));var i=this.Ri.checkPreview(t);if(!i)return this.Oi.error(bu+" localStream error"),!1;var r=this.rtcModules.advancedModule,s=r._getSpan(t,Qg);if(!Li(e))return this.Oi.error(bu+" option error"),!1;var o=r.enableStream(t,{audio:!e});return i.syncAudioEnabled=o&&e,s.setAttributes({mute_type:Zg(e?1:0)}),s.end(),hi(this.Oi,bu),o},mutePlayStreamVideo:function(n,e){yi(this.Oi,Tf,n+" "+e);var t=this.ji.createSpan(Xo.H,{key:Su,par:n},{key:""},tv);t.setAttributes({mute_type:iv(e?1:0)});var i=this.rtcModules.playModule.mutePlayStream(n,"video",e);return t.end(),this.Oi.info(Tf+" end"),i},mutePlayStreamAudio:function(n,e){yi(this.Oi,Rf,n+" "+e);var t=this.ji.createSpan(Xo.H,{key:Su,par:n},{key:""},rv);t.setAttributes({mute_type:nv(e?1:0)});var i=this.rtcModules.playModule.mutePlayStream(n,"audio",e);return t.end(),this.Oi.info(Rf+"end"),i},muteMicrophone:function(n){this.Oi.info(nd+" call");var e=this.ji.createSpan(Xo.H,{key:Cn},{key:""},Kg);if(!Li(n))return this.Oi.error(nd+" option error"),this.ji.setError(e),!1;var t=this.rtcModules.advancedModule.enableMicrophoneOnly(!n),i=Object.keys(this.Ri.publisherList).map(function(r){return{stream_id:r}});return e.setAttributes({enable:Jg(!n),stream_list:Yg(i)}),e.end(),this.Oi.info(nd+" end"),t},activateSEIInsert:function(n){var e=n.stream,t=n.action,i=n.infoType,r=this.rtcModules.advancedModule._getSpan(n.stream,ov);r.setAttributes({action:sv(n.action),info_type:av(n.infoType)});var s=this.rtcModules.publishModule.activateSEIInsert(e,t,i);return r.end(),s},getAudioInfo:function(n,e,t){if(!n)return this.Oi.error("localStream is empty!"),!1;var i=aa({},t);return new uv(this.ac,i).connectToSource(n,function(r){e(r)})},handleDataAvailable:function(n){n.data&&n.data.size>0&&this.recordedBlobs.push(n.data)},addTrack:function(n,e){var t=this;return new Ge(function(i,r){var s={id:e.id,muted:e.muted,enabled:e.enabled,kind:e.kind,readyState:e.readyState,label:e.label};t.Oi.info("zc.at"+" call. ".concat(n==null?void 0:n.id," track: ")+JSON.stringify(s)),t.rtcModules.advancedModule.handleTrack("ADD",n,e,i,r)})},removeTrack:function(n,e){var t=this;return new Ge(function(i,r){t.Oi.info("zc.rt call"),t.rtcModules.advancedModule.handleTrack("REMOVE",n,e,i,r)})},enableCameraCapturing:function(n,e){return e===void 0&&(e=!0),$o(this,void 0,void 0,function(){var t,i,r,s,o;return es(this,function(u){return t=this.ji.createSpan(Xo.H,{key:Cn},{key:""},Xg),i=_r(n,this.Oi),(r=this.Ri.checkPreview(i))?(s=this.Ri.getPublishList(i),o=s.map(function(m){return{stream_id:m.streamID}}),t.setAttributes({enable:$g(e),stream_list:ev(o)}),t.end(),[2,r.enableCameraCapturing(e)]):(this.Oi.error("zsc.ecc "+I),this.ji.setError(t,Ti),[2,!1])})})}},kf={},Pf={enableCamera:function(n,e,t){var i;return $o(this,void 0,void 0,function(){var r,s,o,u,m,f,a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be=this;return es(this,function(Ze){switch(Ze.label){case 0:return this.localStream&&this.localStream.getVideoTracks().length!=0?(r=this.videoTrack,u=this.lowStream,!n&&this.muteImage?(m=Ii(this.muteImage.width,this.muteImage.height),f=m.getContext("2d"),this.muteImageAnID=setInterval(function(){f.drawImage(Be.muteImage,0,0)},100),s=m.captureStream().getVideoTracks()[0],this.localStream.removeTrack(this.localStream.getVideoTracks()[0]),this.localStream.addTrack(s),this.rtcViewer&&this.rtcViewer.setVideo(s),u&&(o=s.clone())):n&&this.muteImage&&(this.isVideoNodeQueueEnabled?setTimeout(function(){Be.replacePreviewTrack(Be.videoNodeQueue.getDestinationTrack(),!0)},800):this.replacePreviewTrack(this.videoTrack,!1)),a=this._i.browser,t&&!n||!r?t&&!n&&(!((i=this.videoEffect)===null||i===void 0)&&i.enabled||this.isVideoNodeQueueEnabled?this.Oi.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on"):(Te=this.cloneVideoTrack,this.cloneVideoTrack=this.videoTrack.clone(),this.cloneVideoTrack.enabled=!0,this.replacePreviewTrack(this.cloneVideoTrack,!1,{retainTrack:!0}),e.trackUtils.stopTrack(Te))):(r.enabled=n,a==="chrome"&&n&&!Yi(r.getSettings().width)&&r.getSettings().width>0&&(S=Qt())&&(F=0,(ee=(S.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1])&&(F=parseInt(ee.split(",")[0])),F&&F>=87&&F<92&&(ie=r.getSettings().width-1,ae=r.getSettings().height-1,be=r.getSettings().frameRate,r.applyConstraints({width:ie,height:ae,frameRate:be}).then(function(){r.applyConstraints({width:Be.videoInfo.width,height:Be.videoInfo.height,frameRate:be})})))),r&&(r.enabled=n),this.isVideoNodeQueueEnabled?(this.videoNodeQueue.getDestinationTrack().enabled=n,n?[3,2]:[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)]):[3,5]):(this.Oi.error("zp.ec.2 video track no found"),[2,!1]);case 1:Ze.sent(),Ze.label=2;case 2:return n&&r?[4,this.videoNodeQueue.replaceNewSourceByTrack(r,!1)]:[3,4];case 3:Ze.sent(),Ze.label=4;case 4:Ze.label=5;case 5:return u==null||u.getVideoTracks().forEach(function(st){st.enabled=n}),Pe=e.checkPreview(this.localStream),(Ae=e.getPublishList(this.localStream).map(function(st){return st.publisher})).length&&Ae.forEach(function(st){var Rt,At=(Rt=st.peerConnection)===null||Rt===void 0?void 0:Rt.getSenders().filter(function(Ft){var Ct;return((Ct=Ft.track)===null||Ct===void 0?void 0:Ct.kind)==="video"});At&&At.forEach(function(Ft,Ct){if(!n&&Be.muteImage)At.length>1&&Ct===0&&o?Ft==null||Ft.replaceTrack(o):s&&(Ft==null||Ft.replaceTrack(s));else if(n){var Mt=0;Be.isVideoNodeQueueEnabled?(Mt=800,Ft.track!==Be.videoNodeQueue.getDestinationTrack()&&(Ft==null||Ft.replaceTrack(Be.videoNodeQueue.getDestinationTrack()))):Ft.track!==Be.videoTrack&&(Pe!=null&&Pe.streamFromCanvas?Ft==null||Ft.replaceTrack(Pe.streamFromCanvasTrack):At.length>1&&Ct===0?Ft==null||Ft.replaceTrack(u.getVideoTracks()[0]):Ft==null||Ft.replaceTrack(Be.videoTrack)),Mt?setTimeout(function(){Be.muteImageAnID&&clearInterval(Be.muteImageAnID)},Mt):Be.muteImageAnID&&clearInterval(Be.muteImageAnID)}});var vt=Be.muteImage&&!n?0:Tu(Be.videoTrack,a);st.sendStreamStatus(vt,st.mic_status)}),this.isVideoEnabled=n,this.Oi.info("zp.ec.2 call success"),[2,!0]}})})},enableMicrophone:function(n,e){if(!this.localStream)return this.Oi.error("zp.em.2 no localStream"),!1;this.localStream.getAudioTracks().forEach(function(i){i.enabled=n}),this.audioTrack&&(this.audioTrack.enabled=n&&e.isMicEnabled);var t=e.getPublishList(this.localStream).map(function(i){return i.publisher});return t.length&&t.forEach(function(i){i.signal&&i.sendStreamStatus(i.camera_status,n&&e.isMicEnabled?0:2)}),this.isAudioEnabled=n,this.Oi.debug("zp.em.2 call success. "+n),!0},syncTrackState:function(n,e){e.enabled=n.enabled},replacePreviewTrack:function(n,e,t){return e===void 0&&(e=!1),t===void 0&&(t={}),$o(this,void 0,void 0,function(){var i,r,s,o,u,m,f;return es(this,function(a){return this.Oi.info("zsc.rpt.0 call"),n&&n.kind&&this.localStream?(i=(t==null?void 0:t.retainTrack)===!0,s=!(r=n.kind==="audio"),o=r?"audioTrack":"videoTrack",this.syncAudioEnabled&&r&&this.syncTrackState(this.audioTrack,n),s&&this.syncVideoEnabled&&this.syncTrackState(this.videoTrack,n),r&&this.insertableaudio&&this.insertableaudio.track.id!==n.id&&(n=this.insertableaudio.getInsertableStreamTrack(n)),!i&&s&&!e&&this.isVideoNodeQueueEnabled?(this.Oi.info("zsc.rpt.0 videoNodeQueue replaceNewSource"),this._videoNodeQueue.replaceNewSourceByTrack(n,void 0,aa({},t))):r&&this.audioNodeQueue&&!t.isTrackProcessedFromOriginalStream?((u=new MediaStream).addTrack(n),m=this.ac.createMediaStreamSource(u),this.audioNodeQueue.replaceSource(m),this.voiceProccessor&&Ut()&&this.voiceProccessor.resetWorklet()):r&&!this.audioNodeQueue&&this.destNode&&!t.isTrackProcessedFromOriginalStream?(this.createSrcNode(n,!0).connect(this.destNode),this.Oi.info("zsc.rpt.0 replace audio track with audio mix.")):(this.Oi.info("zsc.rpt.0 replace local track"),(f=this.localStream.getTracks().find(function(S){return S.kind===n.kind}))!==n&&(f&&this.localStream.removeTrack(f),this.localStream.addTrack(n)),this.rtcViewer&&(this.rtcViewer.setTrack(s,n),this._i.browser==="safari"&&this.rtcViewer.resume(!0)),!i&&s&&this.enableDualStream&&this.createLowStream()),e||i||t.isTrackProcessedFromOriginalStream||(this[o]=n,t.handleTrack==="REMOVE"&&s&&(this.localStream.removeTrack(n),this.rtcViewer&&this.rtcViewer.setTrack(!0,null),this[o]=null)),this.Ri.soundLevelDelegate&&this.soundMeterWorklet&&(this.mic=this.soundMeterWorklet.replaceSrcSource(this.ac,this.localStream)),r&&this.streamCompositor&&this.streamCompositor.replaceSource(this.localStream),t.isCamera&&(r?this.audioPreviewType="camera":this.videoPreviewType="camera"),this.Oi.info("zsc.rpt.0 end"),[2]):[2]})})},enableCameraCapturing:function(n){return $o(this,void 0,void 0,function(){var e,t,i,r,s,o,u,m,f,a=this;return es(this,function(S){switch(S.label){case 0:return this.localStream&&this.videoTrack&&this.previewType==="camera"?(e=this.Ri.getPublishList(this.localStream).map(function(F){return F.publisher}),n?this.videoTrack.readyState!=="live"?[3,1]:(this.Oi.warn("zp.ecc camera is already capturing"),[3,12]):[3,13]):(this.Oi.error("zp.ecc not camera stream"),[2,!1]);case 1:t=this.getMediaStreamConstraints(aa(aa({},this.mediaStreamConfig),{audio:!1})),S.label=2;case 2:return S.trys.push([2,11,,12]),[4,navigator.mediaDevices.getUserMedia(t)];case 3:return(i=S.sent()).getTracks().forEach(function(F){return Jr(F,a.Oi,"zsc.ecc")}),(r=i.getVideoTracks()[0]).enabled=this.isVideoEnabled,r.enabled===!1&&this.Oi.warn("zp.ecc video is not enabled"),!this.muteImage||this.isVideoEnabled?[3,4]:(this.videoTrack=r,r.enabled=!this.isVideoEnabled,[3,10]);case 4:if(!e.length)return[3,9];s=0,S.label=5;case 5:return s<e.length?[4,e[s].replacePublishedTrack(r)]:[3,8];case 6:if(((o=S.sent())==null?void 0:o.errorCode)!==0)throw o;S.label=7;case 7:return s++,[3,5];case 8:return[3,10];case 9:this.replacePreviewTrack(r),S.label=10;case 10:return this.updateZegoStreamCaptureTrack(r),[3,12];case 11:return u=S.sent(),this.Oi.error("zsc.ecc resume camera capturing failed. "+JSON.stringify(u)),[2,!1];case 12:return[3,15];case 13:return m=this._i.browser,[4,this.stopCaptureVideo()];case 14:S.sent(),e.length&&(f=this.muteImage&&!this.isVideoEnabled?0:Tu(this.videoTrack,m),e.forEach(function(F){F.sendStreamStatus(f,F.mic_status)})),S.label=15;case 15:return[2,!0]}})})},stopCaptureVideo:function(){return $o(this,void 0,void 0,function(){var n,e,t,i,r=this;return es(this,function(s){switch(s.label){case 0:return n=this.lowStream,e=this.videoTrack.enabled,t=this._i.browser==="safari",i=function(){return $o(r,void 0,void 0,function(){return es(this,function(o){switch(o.label){case 0:return this.videoTrack.enabled=!1,n==null||(n.getVideoTracks()[0].enabled=!1),[4,new Promise(function(u){setTimeout(function(){u(void 0)},1e3)})];case 1:return o.sent(),[2]}})})},this._i.engineConfig.previewClearLastFrame?t?[3,2]:(this.videoTrack.enabled=!1,n&&(n.getVideoTracks()[0].enabled=!1),[4,new Ge(function(o){setTimeout(function(){o(void 0)},200)})]):[3,7];case 1:s.sent(),s.label=2;case 2:return this.isVideoNodeQueueEnabled?t?[4,i()]:[3,4]:[3,6];case 3:s.sent(),s.label=4;case 4:return[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)];case 5:s.sent(),s.label=6;case 6:return this.Ri.trackUtils.stopTrack(this.videoTrack),this.Ri.trackUtils.stopTrack(n==null?void 0:n.getVideoTracks()[0]),this.stopCanvasStreamTrack(),this.videoTrack.enabled=e,[3,12];case 7:return this.isVideoNodeQueueEnabled?t?[4,i()]:[3,9]:[3,11];case 8:s.sent(),s.label=9;case 9:return[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)];case 10:s.sent(),s.label=11;case 11:this.Ri.trackUtils.stopTrack(this.videoTrack),this.Ri.trackUtils.stopTrack(n==null?void 0:n.getVideoTracks()[0]),this.stopCanvasStreamTrack(),s.label=12;case 12:return[2]}})})}},Af={mutePlayStream:function(n,e,t){var i=this;return this.Oi.info("zsc.mps.0 call "+e+" "+t),new Ge(function(r,s){if(!bi(n)||n=="")return i.Oi.error("zsc.mps.0 streamID must be string and not empty"),void s(!1);if(!Li(t))return i.Oi.error("zsc.mps.0 mute must be boolean"),void s(!1);var o=i.Ri.playerList[n];if(!o)return i.Oi.error("zsc.mps.0 player not found"),void s(!1);if(e==="video"){if(o.playOption&&o.playOption.video===!1||o.player&&o.player.cameraStatus!==0)return i.Oi.error("zsc.mps.0 stream no contain video"),void s(!1);o.player.signal.ActivatePlayVideoStream(i._i.getSeq(),o.player.sessionId,t,function(){var u,m,f,a;i.Oi.info("zsc.mps.0 suc"),o.player.playMediaStatus.video=!t;var S=wf,F=i.ji.createSpan(Xo.H,{key:Su,par:n},{key:""},S.event);F.setAttributes({webrtc_sid:S.webrtc_sid(o.player.sessionId),video_activate:S.video_activate(!!o.player.playMediaStatus.video),audio_activate:S.audio_activate(!!o.player.playMediaStatus.audio),video_layer:S.video_layer(((m=(u=o.player)===null||u===void 0?void 0:u.playOption)===null||m===void 0?void 0:m.streamType)===2?-1:(a=(f=o.player)===null||f===void 0?void 0:f.playOption)===null||a===void 0?void 0:a.streamType)}),F.end(),r(!0)},function(){i.Oi.error("zsc.mps.0 fail"),s(!1)})}else if(e==="audio"){if(o.playOption&&o.playOption.audio===!1||o.player&&o.player.micStatus!==0)return i.Oi.error("zsc.mps.0 stream no contain audio"),void s(!1);o.player.signal.ActivatePlayAudioStream(i._i.getSeq(),o.player.sessionId,t,function(){i.Oi.info("zsc.mps.0 suc"),o.player.playMediaStatus.audio=!t;var u=wf,m=i.ji.createSpan(Xo.H,{key:Su,par:n},{key:""},u.event);m.setAttributes({webrtc_sid:u.webrtc_sid(o.player.sessionId),video_activate:u.video_activate(!!o.player.playMediaStatus.video),audio_activate:u.audio_activate(!!o.player.playMediaStatus.audio)}),m.end(),r(!0)},function(){i.Oi.error("zsc.mps.0 fail"),s(!1)})}else s(!1)})},setStreamAudioOutput:function(n,e){var t=this;return!(e==null||e.length==0||!n)&&(this.Oi.debug("zsc.ssao.0 device "+e),n?n.sinkId!=="undefined"?(n.setSinkId(e).then(function(){t.Oi.info("zsc.ssao.0 success device: "+e)}).catch(function(i){t.Oi.info("zsc.ssao.0 "+i.name)}),!0):(this.Oi.error("zsc.ssao.0 browser does not suppport"),!1):(this.Oi.error("zsc.ssao.0 no localVideo"),!1))}},Df={activateSEIInsert:function(n,e,t){t===void 0&&(t=0);var i=this.Ri.checkPreview(n);return i?e!==0&&e!==1?(this.Oi.error(Is+" value of “action” should be 0 or 1"),!1):(i.activatesSEIConfig={action:e,infoType:t},this.Ri.getPublishList(n).map(function(r){return r.publisher}).forEach(function(r){r.activateSEIInsert(e,t)}),!0):(this.Oi.error(Is+" stream is not created"),!1)}},Nf={activateSEIInsert:function(n,e){var t=this;return new Ge(function(i,r){return t.signal?(t.signal&&t.signal.activateSEIInsert(t._i.getSeq(),t.sessionId,t.peerID,n,e,function(s,o,u){var m=!1;u.result===0?(t.Oi.info(Is+" called success"),m=!0):u.result===1?(t.Oi.error(Is+" "+u.peer_id+" invalid param."),m=!1):u.result===2&&(t.Oi.error(Is+" peer not exist"),m=!1),i(m)},function(s){s===1&&t.Oi.error(Is+" request timeout")}),!1):i(!1)})},replacePublishedTrack:function(n,e,t){var i;return e===void 0&&(e=!1),t===void 0&&(t={}),$o(this,void 0,void 0,function(){var r,s,o,u,m,f,a,S,F=this;return es(this,function(ee){switch(ee.label){case 0:return(r=this.previewer)==null||r.videoEffect,o=r["".concat(s=n.kind,"Track")],u=(i=this.peerConnection)===null||i===void 0?void 0:i.getSenders().filter(function(ie){var ae;return((ae=ie.track)===null||ae===void 0?void 0:ae.kind)===s}),m=this._i.browser,o||t.handleTrack?(f=0,a=0,s==="video"?(f=Tu(e?o:n,m),a=this.mic_status):s==="audio"&&(a=Tu(n,m),f=this.camera_status),[4,r.replacePreviewTrack(n,e,t)]):[3,2];case 1:return ee.sent(),S=n,n.kind=="audio"&&r.insertableaudio&&(S=r.localStream.getAudioTracks()[0]),u?(u.forEach(function(ie,ae){return $o(F,void 0,void 0,function(){var be,Te,Pe;return es(this,function(Ae){switch(Ae.label){case 0:return be=s==="audio"&&r.destNode,Te=!1,(s!=="video"||!e&&r.isVideoNodeQueueEnabled)&&(s!=="audio"||be)||(Te=!0),Te?s=="video"&&r.lowStream&&u.length>1&&ae==0?[4,ie.replaceTrack(r.lowStream.getVideoTracks()[0])]:[3,2]:[3,6];case 1:return Ae.sent(),[3,6];case 2:return s=="video"&&r.streamFromCanvas?(r.streamFromCanvasTrack&&!r.zegoCaptureStream||(Pe=r.getStreamThroughCanvas(r.localStream),r.streamFromCanvasTrack=Pe.getVideoTracks()[0]),[4,ie.replaceTrack(r.streamFromCanvas?r.streamFromCanvasTrack:S)]):[3,4];case 3:return Ae.sent(),[3,6];case 4:return[4,ie.replaceTrack(S)];case 5:Ae.sent(),Ae.label=6;case 6:return[2]}})})}),this.sendStreamStatus(f,a)):this.Oi.info("zc.rt.1 replace remote track will work after stream published"),this.Oi.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 2:return this.Oi.error("zc.rt.1 publisher track no found"),[2,{errorCode:Fr,extendedData:Qr}]}})})}},Lf={activateSEIInsert:function(n,e,t,i,r,s,o){this.Oi.info(Is+" call "+e);var u="ActivateSEIInsertReq",m=this.webrtcCenterSvr.getBodyData(u,{peer_id:t,action:i,info_type:r});this.sendMessageWithCallback(u,n,e,m,s,o)}},lv={type:"Advance",install:function(n,e,t,i,r,s,o,u){for(var m in Object.defineProperty(e.prototype,"initAdvance",{value:function(){this.advancedModule=new cv(this.Oi,this.dataReport,this.Ri,this._i)},writable:!1}),Of)Object.defineProperty(n.prototype,m,{value:Of[m],writable:!1});for(var m in kf)Object.defineProperty(t.prototype,m,{value:kf[m],writable:!1});for(var m in Pf)Object.defineProperty(i.prototype,m,{value:Pf[m],writable:!1});for(var m in Af)Object.defineProperty(r.prototype,m,{value:Af[m],writable:!1});for(var m in Df)Object.defineProperty(s.prototype,m,{value:Df[m],writable:!1});for(var m in Nf)Object.defineProperty(o.prototype,m,{value:Nf[m],writable:!1});for(var m in Lf)Object.defineProperty(u.prototype,m,{value:Lf[m],writable:!1})}},dv=function(){function n(e,t){this.Oi=e,this._i=t,this.attempt=0,this.baseInterval=.3,this.capInterval=4.8,this.retryRule=0,this.retryTimer=null,this.maxTimer=null,this.isOverTime=!1,this.RETRY_MAX_TIME=60}return n.prototype.setRetryRule=function(e){switch(this.retryRule=e,e){case 1:this.baseInterval=.3,this.capInterval=32;break;case 0:this.baseInterval=.3,this.capInterval=4.8}},n.prototype.getRetryDelayByCount=function(e){var t;t=this.retryRule===1?e+2:e<2?0:e;var i,r,s=Math.min(this.capInterval,this.baseInterval*Math.pow(2,t)),o=(i=0,r=1e3*s,Math.floor(Math.random()*(r-i+1))+i);return this.Oi.info("".concat("zc.hrh.grdbc"," ").concat(this.attempt," ").concat(s," ").concat(o)),o},n.prototype.initCallback=function(e,t){this.sucCallBack=e,this.failCallBack=t},n.prototype.startMaxTime=function(){var e,t=this;this.Oi.info("".concat(eu," ").concat((e=this.requestInfo)===null||e===void 0?void 0:e.streamID," call")),this.maxTimer?this.Oi.warn("".concat(eu," max timer")):(this.maxTimer=setTimeout(function(){var i;t.Oi.warn("".concat(eu," ").concat((i=t.requestInfo)===null||i===void 0?void 0:i.streamID," over max time ").concat(t.RETRY_MAX_TIME,"s, stop retry")),t.isOverTime=!0,t.requestFail(t._err)},1e3*this.RETRY_MAX_TIME),this.Oi.info("".concat(eu," maxTimer=").concat(this.maxTimer)))},n.prototype.invalid=function(){this.clearRetryTimer(),this.attempt=0},n.prototype.clearRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},n.prototype.requestFail=function(e){this.invalid(),this.stopMaxTime(),this.failCallBack&&(this.failCallBack(e),this.resetCallback())},n.prototype.stopMaxTime=function(){this.Oi.info("".concat("zc.hrh.smt.1"," stop max timer")),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},n.prototype.resetCallback=function(){this.sucCallBack=void 0,this.failCallBack=void 0},n}(),hv=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fv=function(n){function e(t,i,r){var s=n.call(this,t,i)||this;return s.Oi=t,s._i=i,s._e=r,s.RETRY_MAX_TIME=8,s}return hv(e,n),e.prototype.initReqParams=function(t,i){this.streamId=t,this.cdnPushConfig=i},e.prototype.active=function(t){var i=this;if(t===void 0&&(t=!1),this.retryTimer)this.Oi.warn("".concat(_h," was actived, ignore"));else if(this.isOverTime)this.Oi.warn("".concat(_h," retry over time, stop retry"));else{var r=function(){i.clearRetryTimer(),i._e.sendCDNRequest(i.streamId,i.cdnPushConfig,function(o,u){var m=o.body;i.invalid(),i.stopMaxTime(),i.sucCallBack&&(i.sucCallBack&&i.sucCallBack(m,u),i.resetCallback())},function(o){i._err=o;var u=o.status_code;i.isOverTime?i.requestFail(o):((u===429||u>=500&&u<600)&&i.setRetryRule(1),i.active())}),t||i.attempt++};if(t)r();else{var s=this.getRetryDelayByCount(this.attempt);this.retryTimer=setTimeout(r,s)}}},e}(dv);Ru=__webpack_require__(1054).proto_media,sd=__webpack_require__(2100),If=__webpack_require__(3720),sd.util.Long=If,sd.configure();var ad,pv=function(){function n(){}return n.prototype.encodeRelayPublishCdnReq=function(e){var t=Ru.RelayPublishCdnRequest.create(e);return Ru.RelayPublishCdnRequest.encode(t).finish()},n.prototype.decodeRelayPublishCdnRsp=function(e){return Ru.RelayPublishCdnResponse.decode(e)},n}();(function(n){n[n.I=0]="I",n[n.H=10]="H",n[n.M=100]="M",n[n.L=1e3]="L"})(ad||(ad={}));var ks,cd,Mf,xf={},Uf={_sendCDNPublishByAccessHub:function(n,e,t,i){var r=this;this.mediaProtoBuf||(this.mediaProtoBuf=new pv);var s=new fv(this.logger,this.stateCenter,this);s.initReqParams(n,e);var o=function(u,m){try{var f=r.mediaProtoBuf.decodeRelayPublishCdnRsp(u),a=(f==null?void 0:f.response)||{};return{code:a.code,msg:a.message}}catch{return{code:-1}}};s.initCallback(function(u,m){var f=o(u),a=f.code,S=f.msg;a&&a!=0?(r.logger.error("zb.sh.pt "+e.type+" error code: "+a+" "+S),i(a===5004?hr:Ie," cmd: ".concat(e.type," ").concat(a," ").concat(S))):(r.logger.info("zb.sh.pt "+e.type+" success"),t&&t({errorCode:0,extendedData:""}))},function(u){console.error("_sendCDNPublishByAccessHub",u);var m=u.status_code,f=u.body,a=u.code,S=u.msg,F=JSON.parse(JSON.stringify(xs.error.Ei)),ee="";if(a)F={code:a,msg:S},ee=S;else if(m===200)r.logger.info("zb.sh.pt error: "),F=xs.error.Ei,ee="cmd: ".concat(e.type);else{var ie="";if(bi(f))ie=f;else{var ae=o(f);ie=ae.code+" "+ae.msg}ee="request media server fail, error: "+m+" "+ie}r.logger.error("zb.sh.pt "+ee),i&&i(F,ee)}),s.startMaxTime(),s.active(!0)},sendCDNRequest:function(n,e,t,i){var r=this,s=e.type==="addpush"?1:2,o={request_seq:this.stateCenter.cdnSeq++,request_cmd:s,streamid:n,cdn_server:e.pushUrl};this.logger.info("zb.sh.scpba "+JSON.stringify(o));var u=this.mediaProtoBuf.encodeRelayPublishCdnReq(o);this.sendHttpPBRequest({interfaceID:6,resID:this.stateCenter.appid+"/"+n},u,function(m,f){r.logger.info("zb.sh.pt receive message"),t&&t(m,f)},function(m){i&&i(m)},{timeout:4e3})},_publishTarget:function(n,e,t){this.logger.info("zb.sh.ptcall");var i=n.streamID;this.stateCenter.testEnvironment&&(i="zegotest-"+this.stateCenter.appid+"-"+n.streamID),this.stateCenter.useNetAgent&&this._sendCDNPublishByAccessHub(i,n,e,t)}},mv=function(){function n(e,t,i,r){this.Oi=e,this.dataReport=t,this.Ri=i,this._i=r,this.screenShotReady=!1}return Object.defineProperty(n.prototype,"ji",{get:function(){return this._i.reporter},enumerable:!1,configurable:!0}),n.prototype.publishTarget=function(e){var t=this,i="";switch(e.type){case"addpush":i=sm;break;case"delpush":case"clearpush":i=am}var r=this.ji.createSpan(ad.H,{key:xi.event,par:e.streamID},{key:""},i);return r.setAttributes({url:cm(e.pushUrl)}),new Ge(function(s,o){var u=function(f,a){t.Oi.error("zb.pt "+(a||f.message)),t.ji.setError(r,f,a),o({errorCode:f.code,extendedData:f.message+(a?" "+a:"")})};if(["addpush","delpush","clearpush"].indexOf(e.type)==-1)return t.Oi.error("zb.sh.pt cdn push type error"),void u(pa,"type error");if(e.streamID&&bi(e.streamID))if(e.pushUrl&&bi(e.pushUrl))if(t._i.publishStreamList[e.streamID]){var m=t.Ri.getRoomByStreamID(e.streamID);m?m.streamHandler._publishTarget(e,function(f){r.end(),s(f)},u):u(xs.error.bi)}else u(xs.error.gi);else u(xs.error.tt,"push url error");else u(xs.error.tt,"stream id type error")})},n}(),gv={type:"StreamCDN",install:function(n,e,t){for(var i in Object.defineProperty(e.prototype,"initStreamCDN",{value:function(){this.streamCDNModule=new mv(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),xf)Object.defineProperty(n.prototype,i,{value:xf[i],writable:!1});for(var i in Uf)Object.defineProperty(t.prototype,i,{value:Uf[i],writable:!1})}},Cu="zc.pe.0",ca="zc.pe.1",Ps="zc.aep",Bf="zc.sev",sc="zc.sma.0",zf="zc.sma.1",wu="zc.mb",Ff="zc.smb",Iu="zc.p.0.pe.0",Hf="zc.p.0.pe.1",qf="zc.p.0.re",jf="zc.p.0.se",ud="zc.p.0.sma.0",Ou="zc.smav",Vf="zc.p.0.mb",ac="zc.p.0.smav",Gf=function(){function n(e,t,i,r,s){this.Oi=e,this.ac=t,this.localStream=i,this.destination=r,this.rtcViewer=s,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return n.prototype.playEffect=function(e,t,i,r,s){var o=this;this.isMixAudio!==!0?this.audioBuffer?(this.startOffset=e||0,this.loop=t||!1,this.replace=i||!1,this.effectEndedCallBack=s,this.mixEffect(this.audioBuffer,function(){o.buffSource.loop=!!t,e?o.buffSource.start(0,e/1e3):o.buffSource.start(0),o.startTimes=Date.now(),o.effectEndedListener=o.effectEndedHandler.bind(o),o.buffSource.addEventListener("ended",o.effectEndedListener),r&&r()})):this.Oi.error("amu.pe.1 no audio buffer found"):this.Oi.warn("amu.pe.1 audio is mixing")},n.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},n.prototype.playRealTimeEffect=function(e){var t=this;this.mixEffect(e,function(){t.buffSource&&t.buffSource.start(0),t.buffSource&&t.buffSource.addEventListener("ended",function(){t.audioBufferList.shift(),t.audioBufferList.length>0&&t.isMixAudio&&t.playRealTimeEffect(t.audioBufferList[0])})})},n.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.Oi.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},n.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.Oi.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},n.prototype.mixEffect=function(e,t){this.localStream?(this.ac.resume(),this.gainNode=this.ac.createGain(),this.delayNode=this.ac.createDelay(1),this.delayNode.delayTime.value=0,this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=e,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&t()):this.Oi.error("amu.me.0 localStream can not be found")},n.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0],t=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==e&&(this.micTrack?t.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.Oi.warn("amu.rt.0 origin track not fonud"),t.includes(e)||(this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e))),this.isMixAudio=!0,!0},n.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},n.prototype.stopMixingAudio=function(e){return e===void 0&&(e=!1),this.paused?(this.Oi.info("amu.sma.1 audioEffect is paused"),!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.audioBufferList=[],!e&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.Oi.error("amu.sma.1 localStream can not be found"),!1):(this.Oi.warn("amu.sma.1 no mixing audio found"),!0)},n.prototype.getProcess=function(){var e=Date.now();return this.paused&&(e=this.pauseTimes),(e-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},n.prototype.seekTo=function(e){e===void 0&&(e=0),this.startOffset=e,this.paused?this.resumeOffset=e:(this.stopMixingAudio(!0),this.playEffect(e,this.loop,this.replace,void 0,this.effectEndedCallBack))},n.prototype.mixingBuffer=function(e,t){var i=this;this.isMixAudio!==!0||this.audioBufferList.length!=0||this.isMixingBuffer!=0?(this.ac.resume(),this.ac.decodeAudioData(e,function(r){i.audioBufferList.push(r),i.audioBufferList.length==1&&i.playRealTimeEffect(i.audioBufferList[0]),i.isMixingBuffer=!0,t&&t()},function(r){i.Oi.error("amu.mb.0 "+r),t&&t({code:mc,message:Wr+" "+r})})):this.Oi.error("amu.mb.0 audio is mixing")},n.prototype.setMixingAudioVolume=function(e){return this.gainNode?(console.error("ktv setVolume",e),this.gainNode.gain.value=e,!0):(this.Oi.error("amu.sma.2 no mixing audio found"),!1)},n.prototype.setDelay=function(e){return this.delayNode?(this.Oi.info("amu.sma.2 set delay: "+e),this.delayNode.delayTime.value=e,!0):(this.Oi.warn("amu.sma.2 no mixing audio found"),!1)},n}(),vv=function(){function n(e,t,i,r,s,o,u){u===void 0&&(u=1);var m=this;this.Oi=e,this.acMgr=t,this.localStream=i,this.browser=r,this.destination=s,this.rtcViewer=o,this.volumeFactor=u,this.isMixAudio=!1,this.maxDelay=1,this.audioCurrentTimer=null,this.audioResumedTimer=null,this.audioEl=null,this.eventHandler={volumechange:function(f){var a=f.target;a&&m.audioNode&&m.isMediaElSrc&&(a.muted||a.paused?(m.Oi.info("amu.sma.0 ".concat(m.id," audio muted disconnect")),m.audioNode.disconnect()):(m.Oi.info("amu.sma.0 ".concat(m.id," audio is connected")),m.audioNode.connect(m.gainNode)))},canplay:function(f){var a=f.target;a&&!m.isMediaElSrc&&m.isMixAudio&&(m.Oi.info("amu.sma.1 ".concat(m.id," canplay, remixing audio")),m.stopMixingAudio(),m.startMixingAudio(a))}},this.isMediaElSrc=!1,this.volume=1,this.delay=0,this.id=Date.now()%1e5+Math.floor(10*Math.random()),e.info("amu.sma.0 ".concat(this.id," init audio mix"))}return Object.defineProperty(n.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),n.prototype.startMixingAudio=function(e){if(this.isMixAudio)return this.Oi.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.Oi.error("amu.sma.0 localStream can not be found"),!1;var t;e.captureStream=e.captureStream||e.mozCaptureStream||e.webkitCaptureStream,this.isMixAudio=!0,this.gainNode||(this.gainNode=this.ac.createGain(),this.setMixingAudioVolume()),this.delayNode||(this.delayNode=this.ac.createDelay(this.maxDelay),this.Oi.info("amu.sma.1 ".concat(this.id," init set delay: ")+this.delay),this.delayNode.delayTime.value=this.delay);var i=this.browser==="safari";this.isMediaElSrc=!0;try{var r=this.acMgr.getMediaElementRenderer(e);if(!r)return!1;this.audioNode=r.getMixNode().mixOutputNode,this.audioEl=e}catch(u){t=u}e.addEventListener("volumechange",this.eventHandler.volumechange),e.addEventListener("pause",this.eventHandler.volumechange),e.addEventListener("play",this.eventHandler.volumechange);var s=this.getBrowserInfo(),o=!1;return i&&(s==null?void 0:s.sysVer)==="10.15.6"&&(s==null?void 0:s.ver)==="13.1.2"&&(o=!0),o&&(this.audioResumedTimer=setInterval(function(){e.currentTime=e.currentTime+.45},6e3)),t?(this.Oi.info("amu.sma.1 ".concat(this.id," create source failed: ")+t),!0):(this.audioNode.connect(this.gainNode),this.Oi.info("amu.sma.1 ".concat(this.id," mix audio success.")),this.replaceTrack())},n.prototype.getBrowserInfo=function(){var e,t={},i=Qt().toLowerCase();e=(i.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),t.sysVer=e;var r=i.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return r&&(t.browser=r[1].replace(/version/,"'safari"),t.ver=r[2]),t},n.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var e=this.destination.stream.getAudioTracks()[0],t=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==e&&(this.micTrack?t.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.Oi.warn("amu.rt.1 origin track not fonud"),t.includes(e)||(this.localStream.addTrack(e),this.rtcViewer&&this.rtcViewer.setAudio(e))),!0},n.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioEl&&(this.audioEl.removeEventListener("volumechange",this.eventHandler.volumechange),this.audioEl.removeEventListener("pause",this.eventHandler.volumechange),this.audioEl.removeEventListener("play",this.eventHandler.volumechange),this.audioEl.removeEventListener("canplay",this.eventHandler.canplay),this.audioEl=null),this.audioNode&&(this.audioNode.disconnect(),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.Oi.info("amu.sma.1 ".concat(this.id," stop mix audio success.")),!0):(this.Oi.error("amu.sma.1 localStream can not be found"),!1):(this.Oi.warn("amu.sma.1 no mixing audio found"),!0)},n.prototype.setMixingAudioVolume=function(e,t){if(e===void 0?e=this.volume:this.volume=e,t===void 0?t=this.volumeFactor:this.volumeFactor=t,!this.gainNode)return this.Oi.error("amu.sma.2 no mixing audio found"),!1;var i=e*this.volumeFactor;return this.Oi.info("amu.sma.2 "+this.id+" set volume: "+i),this.gainNode.gain.value=i,!0},n.prototype.setDelay=function(e){return this.delayNode?(e/=1e3,!isNaN(e)&&(e>this.maxDelay&&(e=this.maxDelay),e<0&&(e=0),this.Oi.info("amu.sma.1 ".concat(this.id," set delay: ")+e),this.delayNode.delayTime.value=e,this.delay=e,!0)):(this.Oi.warn("amu.sma.1 no mixing audio found"),!1)},n}(),yv=function(){function n(e){this.Xi=e,this.audioDestNode=void 0,this._audioMixList=[],this._arrayBufferMap={},this._effectList=[],this.volumeFactor=1}return Object.defineProperty(n.prototype,"delay",{get:function(){return this._i.engineConfig.mixingAudioDelay+this._i.engineConfig.baseMixingAudioDelay},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Oi",{get:function(){return this.Xi.logger},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_localStream",{get:function(){return this.Xi.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Ri",{get:function(){return this.Xi.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_i",{get:function(){return this.Xi.stateCenter},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"acMgr",{get:function(){return this.Xi.acMgr},enumerable:!1,configurable:!0}),n.prototype.startMixingAudio=function(e){var t=this;if(this.Oi.info(ud+" call"),!this._localStream)return this.Oi.error(ud+" localStream not found"),!1;var i=!0;return e.forEach(function(r){if(t._audioMixList.find(function(u){return u.media==r}))t.Oi.warn(ud+" mix audio already exist");else if(t._localStream){t.Ri.soundLevelDelegate&&t.Xi.stopSoundLevel();var s=t.createDestNode(),o=new vv(t.Oi,t.acMgr,t._localStream,t._i.browser,s,t.Xi.rtcViewer,t.volumeFactor);t._audioMixList.push({audioMix:o,media:r}),o.startMixingAudio(r)||(i=!1),o.setDelay(t.delay),t.Ri.soundLevelDelegate&&t.Xi.startSoundLevel()}}),i},n.prototype.stopMixingAudio=function(e){var t=this;return this.Oi.info("zc.p.0.sma.1 call"),e?e.forEach(function(i){for(var r=0;r<t._audioMixList.length;r++)if(t._audioMixList[r].media==i){t._audioMixList[r].audioMix.stopMixingAudio()&&t._audioMixList.splice(r--,1);break}}):(this._audioMixList.forEach(function(i){return i.audioMix.stopMixingAudio()}),this._audioMixList=[]),!0},n.prototype.setVolumeFactor=function(e){this.Oi.info(ac+" set factor: "+e),isNaN(e)&&this.Oi.error(ac+" set factor failed"),this.volumeFactor=e,this._audioMixList.forEach(function(t){t.audioMix.setMixingAudioVolume(void 0,e)})},n.prototype.setMixingAudioVolume=function(e,t){this.Oi.info(ac+" call");var i=this._audioMixList.find(function(r){return r.media===t});return i?(i.audioMix.setMixingAudioVolume(e),this.Oi.info(ac+" call success"),!0):(this.Oi.error(ac+" audio is not mixing"),!1)},n.prototype.playEffect=function(e,t,i,r){var s=this;if(this.Oi.info(Iu+" call"),this._localStream)if(this._effectList.find(function(f){return f.effectID==e.effectID&&f.audioBuffer==t}))this.Oi.warn(Iu+" effect already exist ");else{this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel();var o=this.createDestNode(),u=new Gf(this.Oi,this.ac,this._localStream,o,this.Xi.rtcViewer);u.audioBuffer=t;var m={processor:u,effectID:e.effectID,audioBuffer:t};this._effectList.push(m),u.playEffect(e.playTime,e.loop,!1,function(){i&&i()},function(){for(var f=[],a=0;a<arguments.length;a++)f[a]=arguments[a];s._effectList=s._effectList.filter(function(S){return S!==m}),r&&r.apply(void 0,f)}),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),this.Oi.info(Iu+" play effect "+e.effectID+" success")}else this.Oi.warn(Iu+" stream not found")},n.prototype.pauseEffect=function(e){var t=this._effectList.find(function(i){return i.effectID==e});if(t)this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),t.processor.pauseEffect(),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),this.Oi.info(Hf+" pause "+e+" success");else{if(!Yi(e))return this.Oi.error(Hf+" effect not found"),!1;this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._effectList.forEach(function(i){return i.processor.pauseEffect()}),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel()}return!0},n.prototype.resumeEffect=function(e){var t=this._effectList.find(function(r){return r.effectID==e});if(t){this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel();var i=t.processor.resumeEffect();return this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),this.Oi.info(qf+" resume "+e+" success"),i}return Yi(e)?(this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._effectList.forEach(function(r){return r.processor.resumeEffect()}),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),!0):(this.Oi.error(qf+" no effect found"),!1)},n.prototype.stopEffect=function(e){var t=this._effectList.find(function(i){return i.effectID==e});if(t)this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),t.processor.stopMixingAudio(),this._effectList=this._effectList.filter(function(i){return i!==t}),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),this.Oi.info(jf+" pause "+e+" success");else{if(!Yi(e))return this.Oi.error(jf+" effect not found"),!1;this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._effectList.forEach(function(i){return i.processor.stopMixingAudio()}),this._effectList=[],this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel()}return!0},n.prototype.setEffectVolume=function(e,t,i){var r=this._effectList.find(function(s){return s.effectID==t});if(r)r.processor.setMixingAudioVolume(e),r.processor.setDelay(i||1e-7),this.Oi.info("zp.sev.0 set volume "+t+" success");else{if(!Yi(t))return this.Oi.error("zp.sev.0 effect not found"),!1;this._effectList.forEach(function(s){return s.processor.setMixingAudioVolume(e)})}return!0},n.prototype.mixingBuffer=function(e,t,i){var r=this;if(this.Oi.info(Vf+" call"),this._localStream)if(this._arrayBufferMap[e])this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._arrayBufferMap[e].mixingBuffer(t,function(){r.Ri.soundLevelDelegate&&r.Xi.startSoundLevel(),i&&i()});else{this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel();var s=this.createDestNode(),o=new Gf(this.Oi,this.ac,this._localStream,s,this.Xi.rtcViewer);this._arrayBufferMap[e]=o,o.mixingBuffer(t,function(){r.Ri.soundLevelDelegate&&r.Xi.startSoundLevel(),i&&i()})}},n.prototype.stopMixingBuffer=function(e){if(e&&this._arrayBufferMap[e])return this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._arrayBufferMap[e].stopMixingBuffer(),delete this._arrayBufferMap[e],this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),!0;if(Yi(e)){for(var t in this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),this._arrayBufferMap)this._arrayBufferMap[t].stopMixingBuffer();return this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),!0}return this.Oi.warn(Vf+" arrayBuffer no found"),!1},n.prototype.getEffectProgress=function(e){var t=this._effectList.find(function(i){return i.effectID==e});return t?t.processor.getProcess():(this.Oi.error(Ps+"  effect not found"),0)},n.prototype.seekAudioEffect=function(e,t){var i=this._effectList.find(function(r){return r.effectID==e});return i?(this.Ri.soundLevelDelegate&&this.Xi.stopSoundLevel(),i.processor.seekTo(t),this.Ri.soundLevelDelegate&&this.Xi.startSoundLevel(),!0):(this.Oi.error(Ps+" effect not found"),!1)},n.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},n.prototype.createDestNode=function(){var e=null,t=this.Xi.createDestNode(this._localStream);return this.Xi.audioNodeQueue||((e=this.Xi.createSrcNode()).disconnect(),e.connect(t)),t},n.prototype.setMixingDelay=function(e){this._audioMixList.forEach(function(t){t.audioMix.setDelay(e)})},n}(),_v=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},bv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Sv=function(){function n(e,t,i,r,s,o){var u=this;this.Oi=e,this.dataReport=t,this._i=i,this.Ri=r,this.ac=s,this.rtcModules=o,this.buffer=null,this.blank=null,this.mixingDelay=0,Ut()&&this.blank==null&&this.buffer==null&&(this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start()),this.rtcModules.bindListener("_engineConfigUpdate",function(m){var f=m.mixingAudioDelay+m.baseMixingAudioDelay;isNaN(f)||f===u.mixingDelay||(u.Oi.info("zc.am.mdu delay update:"+f+", origin:"+u.mixingDelay),u.mixingDelay=f,u.Ri.previewStreamList.forEach(function(a){a.audioMixManager&&a.audioMixManager.setMixingDelay(f)}))})}return n.prototype.preloadEffect=function(e,t,i){if(this.checkPreviewer(Cu,{effectID:e},{effectID:!0}))if(t&&bi(t)){if(this._i.audioEffectBuffer[e])return this.Oi.warn(Cu+" audio buffer already exists"),void(i&&i());this.Oi.info(Cu+" start preload effect"),this._preloadEffect(this.ac,e,t,i)}else this.Oi.error(Cu+" params error")},n.prototype.checkPreviewer=function(e,t,i){t===void 0&&(t={});var r=!!(i!=null&&i.effectID),s=!!(i!=null&&i.streamID),o=!!(i!=null&&i.previewer),u=t.effectID,m=t.streamID,f=m&&(bi(m)?m:_r(m,this.Oi));if((s||f)&&!bi(f)&&!Ar(f))return this.Oi.error(e+" stream type error"),!1;if(r&&!u)return this.Oi.error(e+" effectID required"),!1;if(u&&!bi(u))return this.Oi.error(e+" effectID type error"),!1;if(o){var a=this.Ri.getPreviewer(f);return a||(bi(f)?this.Oi.error(e+" "+f+" stream is not publishing"):this.Oi.error(e+" stream doesn't exist"),!1)}return!0},n.prototype.getEffectDuration=function(e){if(!this.checkPreviewer(Ps,{effectID:e},{effectID:!0}))return 0;var t=this._i.audioEffectBuffer[e];return t?t.duration?Math.floor(1e3*t.duration):0:(this.Oi.error(Ps+" effect not found"),0)},n.prototype.getEffectProgress=function(e,t){var i=this.checkPreviewer(Ps,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return Li(i)?0:this.getAudioManager(i).getEffectProgress(t)},n.prototype.seekAudioEffect=function(e,t,i){if(i<0)return this.Oi.error(Ps+" param time error "),!1;var r=this.checkPreviewer(Ps,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return!Li(r)&&this.getAudioManager(r).seekAudioEffect(t,i)},n.prototype.playEffect=function(e,t,i){return _v(this,void 0,void 0,function(){var r,s,o,u,m=this;return bv(this,function(f){switch(f.label){case 0:return r=_r(e.stream,this.Oi)||e.streamID,s=e.path,this.checkPreviewer(ca,{streamID:r,effectID:o=e.effectID},{streamID:!0,effectID:!0})?(u=this._i.audioEffectBuffer[o],s?u?(this.Oi.warn(ca+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new Ge(function(a,S){m.preloadEffect(o,s,function(F){F?(m.Oi.error(ca+" preload audio effect failed"),S(F)):a(void 0)})})];case 2:f.sent(),f.label=3;case 3:return[3,5];case 4:if(!u)return this.Oi.error(ca+" audio effect doesn't exists"),[2];f.label=5;case 5:return this._playEffect(e,t,i),[2]}})})},n.prototype.pauseEffect=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return this._pauseEffect(i,t)},n.prototype.resumeEffect=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return this._resumeEffect(i,t)},n.prototype.stopEffect=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return this._stopEffect(i,t)},n.prototype.unloadEffect=function(e){return!!this.checkPreviewer("zc.ue",{effectID:e},{effectID:!0})&&(delete this._i.audioEffectBuffer[e],!0)},n.prototype.setEffectVolume=function(e,t,i,r){if(!qi(t)||t<0||t>200)return this.Oi.error(Bf+" volume must be a number between 0 and 200"),!1;var s=bi(e)?e:_r(e,this.Oi),o=this.checkPreviewer(Bf,{streamID:s,effectID:i},{streamID:!0,previewer:!0});return!Li(o)&&this.getAudioManager(o).setEffectVolume(t/100,i,r)},n.prototype.startMixingAudio=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return this.Oi.info(sc+" call "+i),i?t?(this.Oi.info(sc+" end "+i),Array.isArray(t)&&t.length!==0&&t.every(function(r){return us(r)})?this.Ce(i,t):(this.Oi.error(sc+" audio list param type error"),!1)):(this.Oi.error(sc+" no audio"),!1):(this.Oi.error(sc+" stream not found"),!1)},n.prototype.stopMixingAudio=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return i?Array.isArray(t)&&t.length!==0||Yi(t)?this._stopMixingAudio(i,t):(this.Oi.error(zf+" audio param type error"),!1):(this.Oi.error(zf+" stream not found"),!1)},n.prototype.mixingBuffer=function(e,t,i,r){var s=bi(e)?e:_r(e,this.Oi);this.Oi.info(wu+" call streamID: "+JSON.stringify(s)+" sourceID:"+t),s?t&&bi(t)?(this._mixingBuffer(s,t,i,r),this.Oi.info(wu+" end")):this.Oi.error(wu+" param source id format error"):this.Oi.error(wu+" param streamid format error")},n.prototype.stopMixingBuffer=function(e,t){var i=bi(e)?e:_r(e,this.Oi);return this._stopMixingBuffer(i,t)},n.prototype.setMixingAudioVolume=function(e,t,i){if(this.Oi.info(Ou+" call"),!e)return this.Oi.error(Ou+" stream not found"),!1;if(!qi(t)||t<0||t>200)return this.Oi.error(Ou+" volume must be a number between 0 and 200"),!1;if(!i||!us(i))return this.Oi.error(Ou+" no audio"),!1;var r=bi(e)?e:_r(e,this.Oi);return this._setMixingAudioVolume(r,t,i)},n.prototype.getSoundLevel=function(e,t,i){var r="zc.gsl";yi(this.Oi,r);var s=this.Ri.getCloudSoundInterval();try{var o=this.Ri.createSoundLevel(this.ac,e,this.Ri.soundLevelInterval,s,function(u){t(u)});this._i.audioStreamList[e.id]={mic:o.mic,script:o.soundMeter}}catch(u){i(u)}fe(this.Oi,r)},n.prototype.stopSoundLevel=function(e){this.Oi.info("zc.ssl call");var t=this._i.audioStreamList[e.id];t.mic.disconnect(),t.script.destroy(),delete this._i.audioStreamList[e.id]},n.prototype._preloadEffect=function(e,t,i,r){var s=this,o=new XMLHttpRequest;o.open("GET",i,!0),o.setRequestHeader("Range","none"),o.responseType="arraybuffer",o.onload=function(){if(o.status==200||o.status==304)e.decodeAudioData(o.response,function(m){s.Oi.info("zc.pe.0 effect '".concat(t,"' preload success")),s._i.audioEffectBuffer[t]=m,r&&r()},function(m){s.Oi.error("zc.pe.0 effect '".concat(t,"' preload fail. ")+m),r&&r(m)});else{var u=o.statusText;s.Oi.error("zc.pe.0 effect '".concat(t,"' preload fail.")+u),r&&r(u)}},o.send()},n.prototype._playEffect=function(e,t,i){var r=_r(e.stream,this.Oi)||e.streamID,s=this._i.audioEffectBuffer[e.effectID];if(s){var o=this.checkPreviewer(ca,{streamID:r,effectID:e.effectID},{streamID:!0,effectID:!0,previewer:!0});Li(o)||this.getAudioManager(o).playEffect(e,s,t,i)}else this.Oi.error(ca+" no audio buffer found")},n.prototype._pauseEffect=function(e,t){var i=this.checkPreviewer("zc.pe.2",{streamID:e,effectID:t},{streamID:!0,previewer:!0});return!Li(i)&&this.getAudioManager(i).pauseEffect(t)},n.prototype._resumeEffect=function(e,t){var i=this.checkPreviewer("zc.re",{streamID:e,effectID:t},{streamID:!0,previewer:!0});return!Li(i)&&this.getAudioManager(i).resumeEffect(t)},n.prototype._stopEffect=function(e,t){var i=this.checkPreviewer("zc.se",{streamID:e,effectID:t},{streamID:!0,previewer:!0});return!Li(i)&&this.getAudioManager(i).stopEffect(t)},n.prototype._setMixingAudioVolume=function(e,t,i){var r=this.Ri.getPreviewer(e);return r?this.getAudioManager(r).setMixingAudioVolume(t/100,i):(this.Oi.error("zc.sma.2 publisher doesn't exist"),!1)},n.prototype.Ce=function(e,t){var i=this.Ri.getPreviewer(e);return i?this.getAudioManager(i).startMixingAudio(t):(bi(e)?this.Oi.error("zc.sma.0 "+e+" stream is not publishing"):this.Oi.error("zc.sma.0 stream doesn't exist"),!1)},n.prototype._stopMixingAudio=function(e,t){var i=this.Ri.getPreviewer(e);return i?this.getAudioManager(i).stopMixingAudio(t):(this.Oi.error("zc.sma.0 stream doesn't exist"),!1)},n.prototype._mixingBuffer=function(e,t,i,r){var s=this.checkPreviewer(Ff,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});Li(s)||(Sd(i)?this.getAudioManager(s).mixingBuffer(t,i,r):this.Oi.error("zc.mb.0 array buffer not found"))},n.prototype._stopMixingBuffer=function(e,t){var i=this.checkPreviewer(Ff,{streamID:e,effectID:t},{effectID:!0,streamID:!0,previewer:!0});return!Li(i)&&this.getAudioManager(i).stopMixingBuffer(t)},n.prototype.getAudioManager=function(e){var t=e.audioMixManager;return t||(t=new yv(e),this._i.engineConfig.choirRole===1&&t.setVolumeFactor(.6),e.audioMixManager=t),t},n}(),Ev={type:"AudioMix",install:function(n){Object.defineProperty(n.prototype,"initAudioMix",{value:function(){this.audioMixModule=new Sv(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac,this)}})}},dr={NOT_LOGIN:Qe,INPUT_PARAM:_t,TIMEOUT:ii,MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_INPUT_PARAMETERS_ERROR:{code:1005027,message:"mix stream input parameters are wrong"},MIXER_INPUT_LABEL_TOO_LONG:{code:1005028,message:"Input stream label text is too long"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_INPUT_IMAGE_URL_TOO_LONG:{code:1005034,message:"Input stream image url too long"},MIXER_INPUT_IMAGE_FORMAT_WRONG:{code:1005035,message:"Input stream image format wrong"},MIXER_INPUT_IMAGE_GET_FAIL:{code:1005036,message:"Input stream image get fail"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}};ks=__webpack_require__(8413).Z.proto_mixstream,cd=__webpack_require__(2100),Mf=__webpack_require__(3720),cd.util.Long=Mf,cd.configure();var ku,cc,Wf=function(){function n(){}return n.prototype.encodeMixStreamStartReq=function(e){var t=ks.MixStreamStartRequest.create(e);return ks.MixStreamStartRequest.encode(t).finish()},n.prototype.decodeMixStreamStartRsp=function(e){return ks.MixStreamStartResponse.decode(e)},n.prototype.encodeMixStreamStopReq=function(e){var t=ks.MixStreamStopRequest.create(e);return ks.MixStreamStopRequest.encode(t).finish()},n.prototype.decodeMixStreamStopRsp=function(e){return ks.MixStreamStopResponse.decode(e)},n}(),wi={event:"/mix/start_mix",error:{tt:dr.INPUT_PARAM,Ne:dr.MIXER_TASK_ID_NULL,xe:dr.MIXER_TASK_ID_TOO_LONG,Te:dr.MIXER_TASK_ID_INVALID_CHARACTER,Pe:dr.MIXER_INPUTLIST_NULL,Me:dr.MIXER_OUTPUTLIST_NULL,Be:dr.MIXER_OUTPUT_TARGET_INVALID,qe:dr.MIXER_NO_OUTPUT_TARGET,je:dr.MIXER_START_REQUEST_ERROR,Le:dr.MIXER_INNER_ERROR,Ue:dr.MIXER_INPUT_LABEL_TOO_LONG,Fe:dr.MIXER_INPUT_IMAGE_URL_TOO_LONG,Qe:dr.MIXER_INPUT_IMAGE_FORMAT_WRONG,Ge:dr.MIXER_WATERMARK_URL_INVALID,bi:dr.NOT_LOGIN},mix_stream_conf:nr,stop_reason:Kt},ua={event:"/mix/stop_mix",error:{tt:dr.INPUT_PARAM,Ne:dr.MIXER_TASK_ID_NULL,je:dr.MIXER_STOP_REQUEST_ERROR,Le:dr.MIXER_INNER_ERROR,bi:dr.NOT_LOGIN}},un={event:"/mix/config_mix",error:{tt:dr.INPUT_PARAM,Je:dr.MIXER_VIDEO_CONFIG_INVALID,Ve:dr.MIXER_BACKGROUND_IMAGE_URL_INVALID,bi:dr.NOT_LOGIN},mix_params:nr},la=function(){return la=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},la.apply(this,arguments)};function Qf(n,e){var t,i="",r=dr;return e.errorCode<2e9&&e.errorCode>1e9?(i=function(s){var o={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",141:"MIXER_INPUT_IMAGE_FORMAT_WRONG",142:"MIXER_INPUT_IMAGE_GET_FAIL",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",179:"MIXER_INPUT_LABEL_TOO_LONG",190:"MIXER_START_REQUEST_ERROR"},u="MIXER_INNER_ERROR";return s>1e9&&o[s-1e9]&&(u=o[s-1e9]),u}(e.errorCode-1e4),t=r[i]):e.errorCode<1e6&&(t=n.decodeServerError(e.errorCode,e.extendedData),i=n.getLiveRoomError(e.errorCode,n.useNetAgent)),{reportErr:t,actualError:r[i]}}ku=__webpack_require__(3720),function(n){n[n.I=0]="I",n[n.H=10]="H",n[n.M=100]="M",n[n.L=1e3]="L"}(cc||(cc={}));var Zf={},Kf={startMixerTask:function(n){var e=this;return new Ge(function(t,i){var r,s,o,u,m,f,a,S,F,ee,ie,ae=e.reporter.createSpan(cc.H,{key:Cn},{key:wi.event,par:n.taskID},wi.event,!0),be={errorCode:dr.MIXER_INPUT_PARAMETERS_ERROR.code,extendedData:dr.MIXER_INPUT_PARAMETERS_ERROR.message};if(n!=null&&n.inputList.find(function(Oi){return Oi.streamID==null&&(be.extendedData=be.extendedData+". streamID should be of string type",!0)}))return e.reporter.setError(ae,dr.MIXER_INPUT_PARAMETERS_ERROR),void i(be);var Te=n.outputConfig;Te&&Te.outputFps&&(Te.outputFPS=Te.outputFps);var Pe=function(Oi){var fr=Qf(e.stateCenter,Oi),jr=fr.reportErr,Or=fr.actualError;Oi.errorCode===1000010150&&ae.setAttributes({stop_reason:"UnmatchStreamId"}),e.reporter.setError(ae,jr||Oi),e.reporter.spanEnd({key:wi.event,par:n.taskID}),Or&&(Oi.errorCode=Or==null?void 0:Or.code,Oi.extendedData=(Or==null?void 0:Or.message)||""),i(Oi)},Ae=e.stateCenter.roomList[0];if(Ae){var Be,Ze,st=[];if(!n.noTaskID&&!n.taskID)return e.logger.error("zb.sh.ums no taskId found"),void Pe({errorCode:wi.error.Ne.code,extendedData:wi.error.Ne.message});if(!n.noTaskID&&!bi(n.taskID))return e.logger.error("zb.rh.lg taskId must be string"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!n.noTaskID&&n.taskID.length>256)return e.logger.error("zb.sh.ums taskId is too long"),void Pe({errorCode:wi.error.xe.code,extendedData:wi.error.xe.message});if(!n.noTaskID&&!Us(n.taskID))return e.logger.error("zb.sh.ums task ID contains illegal characters"),void Pe({errorCode:wi.error.Te.code,extendedData:wi.error.Te.message});if(!n.inputList||n.inputList.length==0)return e.logger.error("zb.sh.ums input list wrong"),void Pe({errorCode:wi.error.Pe.code,extendedData:wi.error.Pe.message});n.inputList.forEach(function(Oi){Oi.contentType==="AUDIO"&&(!Oi.layout&&(Oi.layout={top:0,left:0,bottom:0,right:0}),Oi.layout.top=0,Oi.layout.left=0,Oi.layout.bottom=1,Oi.layout.right=1)});for(var Rt=0;Rt<n.inputList.length;Rt++){var At=n.inputList[Rt],vt={errorCode:wi.error.tt.code,extendedData:wi.error.tt.message};if(!tr(At.layout))return e.logger.error("zb.sh.ums input layout must be object"),void Pe(vt);var Ft=At.layout,Ct=Ft.bottom,Mt=Ft.left,Gt=Ft.right;if(!(cr(Ft.top,!1)&&cr(Ct,!1)&&cr(Mt,!1)&&cr(Gt,!1)))return e.logger.error("zb.sh.ums top、left、bottom、right must be integer number"),void Pe(vt);if(At.renderMode!==void 0&&![0,1].includes(At.renderMode))return e.logger.error("zb.sh.ums render_mode is wrong"),void Pe(vt);if(At.imageInfo!==void 0){if(!bi(At.imageInfo.url))return e.logger.error("zb.sh.ums image url is require string"),void Pe(vt);if(At.imageInfo.url.length>1024)return e.logger.error("zb.sh.ums input image url length too long"),void Pe({errorCode:wi.error.Fe.code,extendedData:wi.error.Fe.message})}if(!Yi(At.label)){if(!bi((r=At.label)===null||r===void 0?void 0:r.text)||((s=At.label)===null||s===void 0?void 0:s.text.length)>=300)return e.logger.error("zb.sh.ums input label text is not string or too long"),void Pe({errorCode:wi.error.Ue.code,extendedData:wi.error.Ue.message});var li=At.label,kt=li.left,ti=li.top;if(kt!==void 0&&!cr(kt,!1)||ti!==void 0&&!cr(ti,!1))return e.logger.error("zb.sh.ums input label left and top should be integer"),void Pe(vt)}if(At.cornerRadius!==void 0&&!cr(At.cornerRadius,!1))return e.logger.error("zb.sh.ums cornerRadius is wrong"),void Pe(vt);if(At.soundLevelID!==void 0&&!cr(At.soundLevelID,!1))return e.logger.error("zb.sh.ums soundLevelID is wrong"),void Pe(vt)}if(!n.outputList||n.outputList.length==0)return e.logger.error("zb.sh.ums no output list found"),void Pe({errorCode:wi.error.Me.code,extendedData:wi.error.Me.message});if(n.outputList.some(function(Oi){return bi(Oi)&&!rl(Oi)&&!Us(Oi)||tr(Oi)&&Oi.target&&!rl(Oi.target)&&!Us(Oi.target)}))return e.logger.error("zb.sh.ums stream output target is incorrect"),void Pe({errorCode:wi.error.Be.code,extendedData:wi.error.Be.message});if(!((Be=n.inputList.every(function(Oi){return Oi.contentType==="AUDIO"}))||Te&&tr(Te)))return e.logger.error("zb.sh.ums no output config found"),void Pe({errorCode:wi.error.qe.code,extendedData:wi.error.qe.message});if(Be&&(n.outputConfig=Te=la(la({},Te||{}),{outputBitrate:.001,outputFPS:1,outputWidth:1,outputHeight:1})),!(Be||Te.outputBitrate&&cr(Te.outputBitrate)))return e.logger.error("zb.sh.ums bitrate param is required and must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Te.outputFPS||!cr(Te.outputFPS))return e.logger.error("zb.sh.ums fps param is required and must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Te.outputWidth||!cr(Te.outputWidth))return e.logger.error("zb.sh.ums width param is required and must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Te.outputHeight||!cr(Te.outputHeight))return e.logger.error("zb.sh.ums height param is required and must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(Te.outputAudioCodecID!==void 0&&!cr(Te.outputAudioCodecID,!1))return e.logger.error("zb.sh.ums AudioCodecID param must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(Te.outputAudioBitrate!==void 0&&!cr(Te.outputAudioBitrate))return e.logger.error("zb.sh.ums AudioBitrate param must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(Te.outputAudioChannels!==void 0&&!cr(Te.outputAudioChannels,!1))return e.logger.error("zb.sh.ums AudioChannels param must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Yi(n.watermark)){if(!bi((o=n.watermark)===null||o===void 0?void 0:o.imageURL))return e.logger.error("zb.sh.ums watermark image type error"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!((Ze=(u=n.watermark)===null||u===void 0?void 0:u.imageURL).startsWith("preset-id://")||Ze.startsWith("http")||Ze.startsWith("https"))||!(Ze.endsWith(".jpg")||Ze.endsWith(".jpeg")||Ze.endsWith(".png")))return e.logger.error("zb.sh.ums watermark image url invalid"),void Pe({errorCode:wi.error.Ge.code,extendedData:wi.error.Ge.message})}if(!Yi(n.whiteboard)){if(!bi((m=n.whiteboard)===null||m===void 0?void 0:m.whiteboardID))return e.logger.error("zb.sh.ums whiteboard is required and must be string"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!tr((f=n.whiteboard)===null||f===void 0?void 0:f.layout))return e.logger.error("zb.sh.ums whiteboard layout must be object"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});var vi=(a=n.whiteboard)===null||a===void 0?void 0:a.layout;if(Ct=vi.bottom,Mt=vi.left,Gt=vi.right,!(cr(vi.top,!1)&&cr(Ct,!1)&&cr(Mt,!1)&&cr(Gt,!1)))return e.logger.error("zb.sh.ums whiteboard top、left、bottom、right must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});var Lt=n.whiteboard,ui=Lt.horizontalRatio,Jt=Lt.verticalRatio,ai=Lt.isPPTAnimation,Vi=Lt.zOrder,Fi=Lt.backgroundColor;if(!Yi(ui)&&!cr(ui))return e.logger.error("zb.sh.ums horizontalRatio must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Yi(Jt)&&!cr(Jt))return e.logger.error("zb.sh.ums verticalRatio must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Yi(ai)&&!Li(ai))return e.logger.error("zb.sh.ums isPPTAnimation must be boolean"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Yi(Vi)&&!cr(Vi,!1))return e.logger.error("zb.sh.ums zOrder must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});if(!Yi(Fi)&&!cr(Fi,!1))return e.logger.error("zb.sh.ums backgroundColor must be integer number"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message})}if(!Yi(n.enableSoundLevel)&&!Li(n.enableSoundLevel))return e.logger.error("zb.sh.ums enableSoundLevel is not bool"),void Pe({errorCode:wi.error.tt.code,extendedData:wi.error.tt.message});for(Rt=0;Rt<n.inputList.length;Rt++){var Ni=n.inputList[Rt],ir=Ni.streamID;e.stateCenter.testEnvironment&&(ir="zegotest-"+e.stateCenter.appid+"-"+Ni.streamID),st.push({stream_id:ir,content_control:Ni.contentType==="AUDIO"?1:0,top:(S=Ni.layout)===null||S===void 0?void 0:S.top,left:(F=Ni.layout)===null||F===void 0?void 0:F.left,bottom:(ee=Ni.layout)===null||ee===void 0?void 0:ee.bottom,right:(ie=Ni.layout)===null||ie===void 0?void 0:ie.right,render_mode:Ni.renderMode,image:Ni.imageInfo,label:Ni.label})}var Rr=[];n.outputList.forEach(function(Oi){var fr="";bi(Oi)?fr=Oi:tr(Oi)&&Oi.target&&(fr=Oi.target);var jr=0;(fr.startsWith("rtmp://")||fr.startsWith("https://")&&fr.endsWith(".flv")||fr.startsWith("https://")&&fr.endsWith(".m3u8"))&&(jr=1),Rr.push({target:fr,is_url:jr?"true":"false"})}),e.reporter.spanSetAttributes({key:wi.event,par:n.taskID},{mix_stream_conf:wi.mix_stream_conf({fps:Te.outputFPS,bitrate:Te.outputBitrate,w:Te.outputWidth,h:Te.outputHeight,stream_cnt:st.length,mix_task_id:n.taskID,input_stream_list:st,output_target_list:Rr})}),Ae.streamHandler.updateMixStream(n,Zf,function(Oi){e.reporter.spanEnd({key:wi.event,par:n.taskID}),t(Oi)},Pe)}else Pe({errorCode:wi.error.bi.code,extendedData:wi.error.bi.message})})},setMixerTaskConfig:function(n){var e=this;return new Ge(function(t,i){var r,s=e.reporter.createSpan(cc.H,{key:Cn},{key:""},un.event),o={},u=function(S){e.reporter.setError(s,S),i(S)};if(n&&n.videoCodec){var m=n.videoCodec.toLowerCase();if(["vp8","h264"].indexOf(m)==-1)return e.logger.error("zb.sh.ums param videoCode error"),u({errorCode:un.error.Je.code,extendedData:un.error.Je.message}),!1;o.videoCodec=m}if(n.backgroundColor){if(!cr(n.backgroundColor))return e.logger.error("zb.sh.ums param backgroundColor must be integer number"),u({errorCode:un.error.tt.code,extendedData:un.error.tt.message}),!1;o.backgroundColor=n.backgroundColor}var f=n.backgroundImage;if(f){if(!bi(f))return e.logger.error("zb.sh.ums param outputBgImage error"),u({errorCode:un.error.tt.code,extendedData:un.error.tt.message}),!1;if(!f.startsWith("preset-id://")||!f.endsWith(".jpg")&&!f.endsWith(".png"))return e.logger.error("zb.sh.ums illegal input background image URL"),u({errorCode:un.error.Ve.code,extendedData:un.error.Ve.message}),!1;o.backgroundImage=f}var a=n&&n.userData;if(a){if(!tl(a))return e.logger.error("zb.sh.ums param userData required Uint8Array"),u({errorCode:un.error.tt.code,extendedData:un.error.tt.message}),!1;if(a.byteLength>1e3)return e.logger.error("zb.sh.ums param userData should shorter than 1000"),u({errorCode:un.error.tt.code,extendedData:un.error.tt.message}),!1;o.userData=a}n.extraParams&&(o.extraParams||(o.extraParams=[]),(r=o.extraParams).push.apply(r,n.extraParams)),Zf=o,s.setAttributes({mix_params:un.mix_params(n)}),e.stateCenter.roomList[0]?(s.end(),t({errorCode:0,extendedData:""})):u({errorCode:un.error.bi.code,extendedData:un.error.bi.message})})},stopMixerTask:function(n){var e=this;return new Ge(function(t,i){var r=e.reporter.createSpan(cc.H,{key:Cn},{key:""},ua.event);if(!n||!bi(n)||n.length>256||!Us(n))return e.logger.error("zb.rh.lg taskID must be string less 256"),e.reporter.setError(r,ua.error.tt," param taskID error"),void i({errorCode:ua.error.tt.code,extendedData:ua.error.tt.message+" param taskID error"});r.setAttributes({mix_task_id:n});var s=function(u){var m=Qf(e.stateCenter,u),f=m.actualError;e.reporter.setError(r,m.reportErr||u),f&&(u.errorCode=f==null?void 0:f.code,u.extendedData=(f==null?void 0:f.message)||""),i(u)},o=e.stateCenter.roomList[0];o?o.streamHandler.stopMixStream(n,function(u){r.end(),t(u)},s):s({errorCode:ua.error.bi.code,extendedData:ua.error.bi.message})})}},Jf={_sendMixStopReqByAccessHub:function(n,e,t){var i=this;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new Wf),n.timestamp=ku.fromInt(Math.ceil(new Date().getTime()/1e3)),this.logger.info("zb.sh.smseba.1 req "+JSON.stringify(n));var r=this.mixStreamProtoBuf.encodeMixStreamStopReq(n),s=function(o,u){try{var m=i.mixStreamProtoBuf.decodeMixStreamStopRsp(o);Ho(m),i.logger.info("zb.sh.smseba.1 rsp "+JSON.stringify(n));var f=(m==null?void 0:m.common_response)||{};return{code:f.code,msg:f.message}}catch{return{code:-1}}};this.sendMixRequest({interfaceID:16},r,function(o,u){var m=s(o),f=m.code,a=m.msg;f!=0&&f!=null||!wn(e)?t&&t({errorCode:f,extendedData:a||""}):e({errorCode:f,extendedData:a})},function(o,u,m){var f="";if(m)return m==dr.TIMEOUT&&(m=wi.error.je),m.code&&m.code===20010&&(m=JSON.parse(JSON.stringify(dr.MIXER_NO_SERVICES))),void(t&&t(m,f));m=wi.error.Le;var a="";if(bi(u))a=u;else{var S=s(u);a=S.code+" "+S.msg}i.logger.error("zb.sh.pt "+(f="request media server fail, error: "+o+" "+a)),t&&t(m,f)})},stopMixStream:function(n,e,t,i,r){this.logger.info("zb.sh.sms call");var s=this.getStopMixStreamParams(n,i,r);this.stateCenter.useNetAgent&&this._sendMixStopReqByAccessHub(s.mixStopReq,e,t)},_sendMixStartReqByAccessHub:function(n,e,t,i){var r=this;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new Wf),n.timestamp=ku.fromInt(Math.ceil(new Date().getTime()/1e3)),this.logger.info("zb.sh.smseba.0 req "+JSON.stringify(n));var s=this.mixStreamProtoBuf.encodeMixStreamStartReq(n),o=function(u,m){try{var f=r.mixStreamProtoBuf.decodeMixStreamStartRsp(u);Ho(f),r.logger.info("zb.sh.smseba.0 rsp "+JSON.stringify(f));var a=f.common_response;return{code:a.code,msg:a.message,data:f.data,errStreamList:f.error_streamid_list}}catch{return{code:-1}}};this.sendMixRequest({interfaceID:15},s,function(u,m){var f=o(u),a=f.code,S=f.errStreamList;if(a===void 0||a==0){var F=f.data.play_infos.map(function(be){var Te={rtmpURL:"",hlsURL:"",flvURL:""},Pe=be.stream_alias||"";return r.stateCenter.testEnvironment&&Pe&&Pe.startsWith(e)&&(Pe=Pe.slice(e.length)),Te.streamID=Pe,be.rtmp_url&&be.rtmp_url.length>0&&(Te.rtmpURL=be.rtmp_url),be.hls_url&&be.hls_url.length>0&&(Te.hlsURL=be.hls_url),be.hdl_url&&be.hdl_url.length>0&&(Te.flvURL=be.hdl_url),Te});t&&t({errorCode:0,extendedData:JSON.stringify({mixerOutputList:F})})}else{var ee="",ie=a+1e9;if(ie==1000000150&&S){var ae=S.map(function(be){return r.stateCenter.testEnvironment&&be.startsWith(e)?be.slice(e.length):be})||[];ae.length>0&&(r.logger.debug("zb.sh.ums not exist streams: "+ae),ee=ae.join(","))}i&&i({errorCode:r.stateCenter.getServerError(1e4+ie,r.stateCenter.useNetAgent).code,extendedData:ee})}},function(u,m,f){var a="";if(f)return f==dr.TIMEOUT&&(f=wi.error.je),f.code&&f.code===20010&&(f=JSON.parse(JSON.stringify(dr.MIXER_NO_SERVICES))),void(i&&i(f,a));f=wi.error.Le;var S="";if(bi(m))S=m;else{var F=o(m);S=F.code+" "+F.msg}r.logger.error("zb.sh.pt "+(a="request media server fail, error: "+u+" "+S)),i&&i(f,a)})},getStartMixStreamParams:function(n,e){var t,i,r=this,s={request_seq:this.stateCenter.getSeq(),mix_protocol_version:1,task_id:n.taskID,room_id:this.roomID,mix_stream_common:{},input_stream:[],advance_config:[],output_stream:[]},o=n.outputConfig||{};o.singleStreamPassThrough&&Li(o.singleStreamPassThrough)&&(s.mix_stream_common.single_stream_pass_through=o.singleStreamPassThrough?1:0);var u=e;if(u&&(u.videoCodec&&((t=s.advance_config)===null||t===void 0||t.push({key:"video_encode",value:u.videoCodec})),u.backgroundColor&&(s.mix_stream_common.output_bg_color=u.backgroundColor),u.backgroundImage&&(s.mix_stream_common.output_bg_image=u.backgroundImage),u.userData&&(s.mix_stream_common.user_data=this.stateCenter.uint8arrayToBase64(u.userData)),u.extraParams&&((i=s.advance_config)===null||i===void 0||i.push.apply(i,u.extraParams))),n.enableSoundLevel!==void 0&&(s.mix_stream_common.with_sound_level=n.enableSoundLevel?1:0),n.inputList.forEach(function(ae,be){var Te,Pe,Ae,Be,Ze,st,Rt,At,vt,Ft,Ct,Mt,Gt,li,kt,ti,vi,Lt,ui,Jt,ai,Vi=ae.streamID;r.stateCenter.testEnvironment&&(Vi="zegotest-"+r.stateCenter.appid+"-"+ae.streamID);var Fi={stream_input_common:{stream_id:Vi,content_control:ae.contentType==="AUDIO"?1:0,layer_rect:{layer:(Te=ae.layout)===null||Te===void 0?void 0:Te.layer,top:(Pe=ae.layout)===null||Pe===void 0?void 0:Pe.top,left:(Ae=ae.layout)===null||Ae===void 0?void 0:Ae.left,bottom:(Be=ae.layout)===null||Be===void 0?void 0:Be.bottom,right:(Ze=ae.layout)===null||Ze===void 0?void 0:Ze.right}},volume:100,audio_h_angle:-1,render_mode:ae.renderMode,corner_radius:ae.cornerRadius};if(!((st=ae.label)===null||st===void 0)&&st.text){var Ni={font_type:((At=(Rt=ae.label)===null||Rt===void 0?void 0:Rt.font)===null||At===void 0?void 0:At.type)||0,font_size:((Ft=(vt=ae.label)===null||vt===void 0?void 0:vt.font)===null||Ft===void 0?void 0:Ft.size)||24,font_color:((Mt=(Ct=ae.label)===null||Ct===void 0?void 0:Ct.font)===null||Mt===void 0?void 0:Mt.color)||16777215,font_transparency:((li=(Gt=ae.label)===null||Gt===void 0?void 0:Gt.font)===null||li===void 0?void 0:li.transparency)||0};Ni.font_border_color=!((ti=(kt=ae.label)===null||kt===void 0?void 0:kt.font)===null||ti===void 0)&&ti.border?(Lt=(vi=ae.label)===null||vi===void 0?void 0:vi.font)===null||Lt===void 0?void 0:Lt.borderColor:-1;var ir={text:(ui=ae.label)===null||ui===void 0?void 0:ui.text,text_left:((Jt=ae.label)===null||Jt===void 0?void 0:Jt.left)||0,text_top:((ai=ae.label)===null||ai===void 0?void 0:ai.top)||0,font:Ni};Fi.label=ir}ae.imageInfo&&(Fi.image=ae.imageInfo),ae.soundLevelID&&(Fi.stream_input_common.sound_level_id=ae.soundLevelID),s.input_stream.push(Fi)}),n.outputList.forEach(function(ae){var be,Te,Pe="";bi(ae)?Pe=ae:tr(ae)&&ae.target?Pe=ae.target:r.logger.error("zb.sh.ums output target required"),rl(Pe)?(be=1,Te=Pe):(be=0,Te=r.stateCenter.testEnvironment?"zegotest-"+r.stateCenter.appid+"-"+Pe:Pe);var Ae={is_url:be,target:Te,video_bitrate:1e3*o.outputBitrate,video_fps:o.outputFPS,video_width:o.outputWidth,video_height:o.outputHeight,output_quality:23};o.outputAudioCodecID&&(Ae.audio_enc_id=o.outputAudioCodecID),u.videoCodec==="vp8"?Ae.audio_enc_id=3:u.videoCodec==="h264"&&(Ae.audio_enc_id=0),o.outputAudioBitrate&&(Ae.audio_bitrate=1e3*o.outputAudioBitrate),s.output_stream.push({output_stream_common:Ae})}),n.watermark&&(s.water_mark={image:n.watermark.imageURL,layout_rect:n.watermark.layout}),n.whiteboard){var m=n.whiteboard,f=m.horizontalRatio,a=m.verticalRatio,S=m.layout,F=m.zOrder,ee=m.isPPTAnimation,ie=m.backgroundColor;s.white_board={whiteboard_id:ku.fromString(m.whiteboardID),horizontal_ratio:f||16,vertical_ratio:a||9,is_ppt_animation:ee===!0?1:0,layout_rect:la(la({},S),{layer:F||0}),background_color:ie||4059296768}}return isNaN(n.streamAlignmentMode)||(s.alignment_type=n.streamAlignmentMode),s.audio_channel_cnt=o.outputAudioChannels?o.outputAudioChannels:1,{mixStartReq:s}},updateMixStream:function(n,e,t,i){this.logger.info("zb.sh.ums call"),this.logger.info("zb.sh.ums send command");var r=this.getStartMixStreamParams(n,e).mixStartReq;return this.stateCenter.useNetAgent&&this._sendMixStartReqByAccessHub(r,"zegotest-"+this.stateCenter.appid+"-",t,i),!0},getStopMixStreamParams:function(n,e,t){var i={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:"3.2.0"},r={request_seq:this.stateCenter.getSeq(),room_id:this.roomID};if(bi(n)&&(i.task_id=n,r.task_id=n),e!=null){var s=void 0;i.stream_id=s=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+e:e,r.is_url=0,r.target=s}else t!=null&&(i.mixurl=t,r.is_url=1,r.target=t);return{req_body:i,mixStopReq:r}}},Tv={type:"MixStream",install:function(n,e){for(var t in Kf)Object.defineProperty(n.prototype,t,{value:Kf[t],writable:!1});for(var t in Jf)Object.defineProperty(e.prototype,t,{value:Jf[t],writable:!1})}},ts=function(){function n(){}return n.generateEls=function(e){if(e===void 0&&(e=30),this.elements.length>=e)this.elements.forEach(function(i){i.dom.play().catch(function(r){})});else{var t=Array(e-this.elements.length).fill(0).map(function(i,r){var s=Tt.createElement("audio");return s.muted=!0,s.setAttribute("autoplay","autoplay"),s.setAttribute("playsInline","playsInline"),s.id="audio"+r,{dom:s,id:r,used:!1}});this.elements=this.elements.concat(t)}},n.useAudioEl=function(){this.elements.length===0&&this.generateEls();var e=this.elements.find(function(t){return!t.used});return e&&(e.used=!0),e},n.stopUsingAudioEl=function(e){var t=this.elements[e];t&&(t.dom.onpause=null,t.dom.onerror=null,t.dom.muted=!0,t.used=!1)},n.elements=[],n}(),Rv=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Cv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Do="zc.ra.3",wv=function(){function n(e,t){this.He=e,this.Oi=t,this.rtcConn=null,this.loopbackConn=null,this.destStream=new MediaStream,this.onError=null}return n.prototype.bindStream=function(e,t){var i,r;return Rv(this,void 0,void 0,function(){var s,o,u,m,f,a,S=this;return Cv(this,function(F){switch(F.label){case 0:return t&&(this.He=t),s=["completed","connected"],this.rtcConn&&this.loopbackConn&&s.includes(this.rtcConn.connectionState)?(o=(i=this.rtcConn)===null||i===void 0?void 0:i.getSenders().find(function(ee){var ie;return((ie=ee.track)===null||ie===void 0?void 0:ie.kind)==="audio"}),e.getTracks().forEach(function(ee){ee.kind==="audio"&&(o==null||o.replaceTrack(ee))}),[3,10]):[3,1];case 1:this.rtcConn=new RTCPeerConnection,this.loopbackConn=new RTCPeerConnection,u={offerVideo:!0,offerAudio:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1},this.rtcConn.onicecandidateerror=function(ee){S.Oi.warn(Do+" ".concat(S.He," loopback in ice error: ").concat(JSON.stringify(ee)))},this.loopbackConn.onicecandidateerror=function(ee){S.Oi.warn(Do+" ".concat(S.He," loopback out ice error: ").concat(JSON.stringify(ee)))},this.rtcConn.onicecandidate=function(ee){var ie,ae=ee.candidate;ae&&(S.Oi.info(Do+" ".concat(S.He," loopback add out candidate: ").concat(ae)),(ie=S.loopbackConn)===null||ie===void 0||ie.addIceCandidate(new RTCIceCandidate(ae)))},this.loopbackConn.onicecandidate=function(ee){var ie,ae=ee.candidate;ae&&(S.Oi.info(Do+" ".concat(S.He," loopback add in candidate: ").concat(ae)),(ie=S.rtcConn)===null||ie===void 0||ie.addIceCandidate(new RTCIceCandidate(ae)))},window.setTimeout(function(){S.rtcConn&&S.loopbackConn&&(s.includes(S.rtcConn.iceConnectionState)&&s.includes(S.loopbackConn.iceConnectionState)?S.Oi.info(Do+" ".concat(S.He," loopback connect ok.")):(S.Oi.warn(Do+" ".concat(S.He," loopback connect failed. in state: ").concat(S.rtcConn.iceConnectionState,", out state: ").concat(S.loopbackConn.iceConnectionState)),S.close(),S.onError&&S.onError("time out")))},2e3),this.loopbackConn.ontrack=function(ee){var ie=ee.track;S.Oi.info(Do+" ".concat(S.He," loopback receive track")),S.replaceTrack(ie)},e.getTracks().find(function(ee){var ie;if(ee.kind==="audio")return(ie=S.rtcConn)===null||ie===void 0||ie.addTrack(ee,e),!0}),F.label=2;case 2:return F.trys.push([2,9,,10]),[4,this.rtcConn.createOffer(u)];case 3:return m=F.sent(),[4,this.rtcConn.setLocalDescription(m)];case 4:return F.sent(),[4,this.loopbackConn.setRemoteDescription(m)];case 5:return F.sent(),[4,this.loopbackConn.createAnswer()];case 6:return(f=F.sent()).sdp=(r=f.sdp)===null||r===void 0?void 0:r.replace(/useinbandfec=/,"stereo=1;useinbandfec="),[4,this.loopbackConn.setLocalDescription(f)];case 7:return F.sent(),[4,this.rtcConn.setRemoteDescription(f)];case 8:return F.sent(),this.Oi.info(Do+" ".concat(this.He," loopback set sdp completed.")),[3,10];case 9:return a=F.sent(),this.Oi.error(Do+" ".concat(this.He," loopback connect failed.").concat(a)),this.close(),this.onError&&this.onError("connect failed"),this.onError=null,[3,10];case 10:return[2,this.destStream]}})})},n.prototype.replaceTrack=function(e){var t=this;e.kind==="audio"&&(this.destStream.getTracks().forEach(function(i){t.destStream.removeTrack(i)}),this.destStream.addTrack(e))},n.prototype.close=function(){var e=this,t=this.rtcConn,i=this.loopbackConn;this.destStream.getTracks().forEach(function(r){e.destStream.removeTrack(r)}),t==null||t.close(),i==null||i.close(),this.rtcConn=null,this.loopbackConn=null},n}(),Yf=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Xf=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},$r="zc.ra.5",ld=function(){function n(e,t){this.Oi=e,this.userID="base"+new Date().getTime(),this.isHide=!1,this.distance=null,this.maxDistance=1e3,this.position=null,this.speaker="",this.audioEl=null,this.sourceNode=null,this.isPlaying=!1,this.config={needLoopback:!0,useGain:!0,playOnAudioContext:!1,useWebAudio:!0},this.volume=1,this.gainNode=null,this.isSpatial=!1,this.panner=null,this.audioCtx=t.audioCtx,this.isSpatial=t.isSpatial,this.setMaxDistance(qi(t.maxDistance)?t.maxDistance:1e5),this.destNode=this.audioCtx.createMediaStreamDestination(),this.setVolume(t.volume),this.setSpeaker(t.speaker).catch(function(i){}),this.inBackground(t.isHide)}return n.prototype.setPosition=function(e){this.Oi.info($r+" ".concat(this.userID," set position: ")+e),this.position=e,this.panner&&(this.panner.positionX!==void 0?(this.panner.positionX.value=e[1],this.panner.positionY.value=e[2],this.panner.positionZ.value=-e[0]):this.panner.setPosition(e[1],e[2],-e[0]))},n.prototype.getDistanceFromListener=function(e){return this.distance=function(t,i){if(!i||!t)return null;var r=[t[0]-i[0],t[1]-i[1],t[2]-i[2]];return Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2))}(this.position,e.position),this.distance},n.prototype.setMaxDistance=function(e){this.maxDistance=e,this.panner&&(e<10&&(e=10),this.panner.maxDistance=2.6*e)},n.prototype.setVolume=function(e){isNaN(e)||(this.volume=e,this.gainNode&&(this.gainNode.gain.value=this.volume))},n.prototype.setSpeaker=function(e){var t;return Yf(this,void 0,void 0,function(){var i,r,s;return Xf(this,function(o){switch(o.label){case 0:if(!bi(e))return[2];if(this.speaker=e,!(i=(t=this.audioEl)===null||t===void 0?void 0:t.dom))return[3,10];if(!(r=i.setSinkId))return[3,8];o.label=1;case 1:return o.trys.push([1,6,,7]),this.config.playOnAudioContext?[3,3]:[4,r.call(i,e||"")];case 2:return o.sent(),[3,5];case 3:return[4,r.call(i,"")];case 4:o.sent(),o.label=5;case 5:return this.Oi.info($r+" ".concat(this.userID," set speaker success. id: ").concat(e,".")),[3,7];case 6:throw s=o.sent(),this.Oi.error($r+" ".concat(this.userID," set speaker failed. id: ").concat(e,"  error: ").concat(s,".")),s;case 7:return[3,9];case 8:throw"setting speaker not support.";case 9:return[3,11];case 10:this.Oi.info($r+" ".concat(this.userID," no element for set speaker.")),o.label=11;case 11:return[2]}})})},n.prototype.initPanner=function(){if(!this.panner){var e=function(i,r,s){var o=s||[0,0,0],u=i.createPanner(),m=i.createGain();return u.panningModel="HRTF",u.distanceModel="linear",u.refDistance=1,u.maxDistance=2.6*r||1,u.rolloffFactor=1,u.coneOuterGain=.4,u.positionX!==void 0?(u.positionX.value=o[1],u.positionY.value=o[2],u.positionZ.value=-o[0]):u.setPosition(o[1],o[2],-o[0]),{panner:u,gainNode:m}}(this.audioCtx,this.maxDistance,this.position),t=e.gainNode;this.panner=e.panner,this.gainNode=t,t.gain.value=this.volume}},n.prototype.changeRenderConfig=function(e,t,i,r){var s,o,u,m,f;return t===void 0&&(t=!1),i===void 0&&(i=!1),r===void 0&&(r=!0),Yf(this,void 0,void 0,function(){var a,S,F,ee,ie,ae,be,Te,Pe,Ae,Be,Ze,st=this;return Xf(this,function(Rt){switch(Rt.label){case 0:return t||this.isSpatial!==e?(this.isSpatial=e,a=di()&&Ce(),[4,np()]):[2];case 1:return S=Rt.sent(),F=S.platform==="Windows"&&S.majorPlatformVersion>=13,ee=this.isHide&&(F||a),ie=this.audioCtx.state!=="running",r&&(ee||ie)&&(this.Oi.warn("".concat($r," ").concat(this.userID," stop web audio. system: ").concat(S.platform," ").concat(S.majorPlatformVersion)),r=!1),this.config.useWebAudio=r,ae=Qt(),be=ae.includes("safari")&&!ae.includes("chrome"),Te=ae.includes("micromessenger")&&new RegExp(/(iphone|ipad|ipod|ios)/i).test(ae),r||this.stream||(i=!0),this.config.playOnAudioContext=i,this.initPanner(),this.isPlaying&&this.sourceNode?(this.lastNode&&this.lastNode.disconnect(),Pe=this.sourceNode,this.sourceNode.disconnect(),(s=this.panner)===null||s===void 0||s.disconnect(),(o=this.gainNode)===null||o===void 0||o.disconnect(),this.gainNode?(r&&(this.config.useGain&&(Pe=this.sourceNode.connect(this.gainNode)),this.panner&&e&&(Pe=Pe.connect(this.panner))),Pe.connect(i?this.audioCtx.destination:this.destNode),this.lastNode=Pe,this.position&&this.setPosition(this.position),this.Oi.info($r+" '".concat(this.userID,"' play ").concat(e?"3d":"normal"," stream on ").concat(i?"audio ctx":"element")),(Ae=(u=this.audioEl)===null||u===void 0?void 0:u.dom)?(Ae.onpause=function(){st.Oi.warn($r+" ".concat(st.streamID," audio paused"))},Ae.onerror=function(At){st.Oi.warn($r+" ".concat(st.streamID," audio error, ").concat(At))},i?(this.stream&&Ae.srcObject!==this.stream&&(Ae.srcObject=this.stream,Ae.muted=!0,Ae.oncanplay=function(){Ae.play().then(function(){st.Oi.info($r+" ".concat(st.userID," ctx autoplay success.")),st.checkPlayStatus()}).catch(function(At){st.Oi.warn($r+" ".concat(st.userID," ctx autoplay failed."))})}),[3,6]):[3,2]):[3,6]):[3,6]):[3,6];case 2:return Be=this.destNode.stream,(Ze=this.config.needLoopback&&!Te&&!be)&&this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null),r||!this.stream?[3,3]:(this.Oi.info("".concat($r," ").concat(this.userID," stop audio api")),this.sourceNode.disconnect(),(m=this.panner)===null||m===void 0||m.disconnect(),(f=this.gainNode)===null||f===void 0||f.disconnect(),Be=this.stream,[3,5]);case 3:return Ze&&Be?(this.loopbackConn=this.loopbackConn||new wv(this.streamID||"",this.Oi),this.loopbackConn.onError=function(At){st.Oi.warn($r+" ".concat(st.userID," loopback failed! ").concat(At)),st.changeRenderConfig(st.isSpatial,!0,!0)},[4,this.loopbackConn.bindStream(Be,this.streamID||void 0)]):[3,5];case 4:return Be=Rt.sent(),[3,5];case 5:Ae.muted=!0,Ae.srcObject=Be,this.setSpeaker(this.speaker).catch(function(At){}),Ae.oncanplay=function(){if(Ae){Ae.muted=!1;var At=function(vt){st.Oi.error($r+" ".concat(st.userID," autoplay failed. error: ").concat(vt)),st.changeRenderConfig(st.isSpatial,!0,!0)};Ae.play().then(function(){Ae!=null&&Ae.paused?At("audio paused"):(st.Oi.info($r+" ".concat(st.userID," element autoplay success.")),st.checkPlayStatus())}).catch(function(vt){At(vt)})}},Rt.label=6;case 6:return[2]}})})},n.prototype.checkPlayStatus=function(){var e=this;setTimeout(function(){var t;if(e.isPlaying){var i=(t=e.audioEl)===null||t===void 0?void 0:t.dom,r=e.audioCtx.state;!i||i.paused||i.muted&&!e.config.playOnAudioContext||r!=="running"?(e.Oi.warn("".concat($r," ").concat(e.userID," play detection is abnormal. audio ctx:").concat(r,", paused:").concat(i==null?void 0:i.paused,", muted:").concat(i==null?void 0:i.muted)),r!=="running"&&(e.audioCtx.resume(),setTimeout(function(){e.Oi.warn("".concat($r," ").concat(e.userID," play resume. audio ctx:").concat(r,", paused:").concat(i==null?void 0:i.paused,", muted:").concat(i==null?void 0:i.muted))},1e3))):e.Oi.info("".concat($r," ").concat(e.userID," play detection is fine"))}},2e3)},n.prototype.inBackground=function(e,t){e===void 0&&(e=!1),this.isHide!==e&&(this.isHide=e,e||this.config.useWebAudio||this.changeRenderConfig(this.isSpatial,!0))},n}(),Iv=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ov=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},kv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Gn="zc.ra.1",dd=function(n){function e(t,i,r){var s=n.call(this,t,r)||this;return s.Oi=t,s.audioTrack=null,s.zegoRTC=r.zegoRTC,s.userID=i.userID,s.teamID=i.teamID,s.raMode=i.raMode!==void 0?i.raMode:bo.World,i.position&&(s.position=i.position),s}return Iv(e,n),Object.defineProperty(e.prototype,"sendMode",{get:function(){return this._sendMode!==void 0?this._sendMode:this.raMode===bo.World?$n.All:$n.Team},set:function(t){this._sendMode=t},enumerable:!1,configurable:!0}),e.prototype.checkTrackChanged=function(){var t;if(this.stream){var i=this.stream.getAudioTracks()[0];i&&i!==this.audioTrack&&(this.Oi.info(Gn+" retry play success, render stream."),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.changeRenderConfig(this.isSpatial,!0),this.audioTrack=i)}},e.prototype.startPlayingAudio=function(t){var i,r;return Ov(this,void 0,void 0,function(){var s,o,u;return kv(this,function(m){switch(m.label){case 0:if(!this.streamID)return[2];m.label=1;case 1:return m.trys.push([1,3,,4]),t&&this.Oi.info(Gn+" ".concat(this.streamID," ")+t),this.isPlaying=!0,s=this,[4,this.zegoRTC.startPlayingStream(this.streamID)];case 2:return s.stream=m.sent(),this.audioTrack=this.stream.getAudioTracks()[0],[3,4];case 3:if(o=m.sent(),this.isPlaying=!1,o.code===1103049)return[2];throw o;case 4:return this.audioEl=this.audioEl||ts.useAudioEl()||null,this.Oi.info(Gn+" ".concat(this.streamID," start using audio el ").concat((i=this.audioEl)===null||i===void 0?void 0:i.id)),(u=(r=this.audioEl)===null||r===void 0?void 0:r.dom)||(this.Oi.error(Gn+" not enough audio elements"),u=Tt.createElement("audio"),this.audioEl={id:-1,dom:u,used:!0},u.setAttribute("autoplay","autoplay")),u.muted=!0,this.stream&&(this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,6];case 5:m.sent(),m.label=6;case 6:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},e.prototype.stopPlayingAudio=function(t){this.isPlaying&&this.streamID?(this.Oi.info(Gn+" ".concat(this.streamID," ")+t),this.zegoRTC.stopPlayingStream(this.streamID),this.isPlaying=!1):this.streamID&&this.Oi.info(Gn+" ".concat(this.streamID," not playing, ")+t),this.stream=void 0,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null);var i=this.audioEl,r=i==null?void 0:i.dom;r&&(r.srcObject=null,r.parentNode&&r.parentNode.removeChild(r));var s=(i==null?void 0:i.id)||-1;i&&s>=0&&(ts.stopUsingAudioEl(s),this.Oi.info(Gn+" ".concat(this.streamID," stop using audio el ").concat(s))),this.audioEl=null,this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null)},e.prototype.isSpeakInTeam=function(t){var i=![this.teamID,t].includes(void 0)&&this.teamID!==""&&this.teamID===t,r=[$n.Team,$n.All].includes(this.sendMode);return i&&r},e}(ld),Pv=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$f=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},ep=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},As="zc.ra.4",Av=function(n){function e(t,i,r){var s=n.call(this,t,r)||this;return s.Oi=t,s.media=i.media,s.position=i.position||null,s.createSource(),s.userID="custom"+new Date().getTime(),s.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},s}return Pv(e,n),e.prototype.createSource=function(){var t=this;if(Ce())return this.Oi.info("".concat(Ce()," ").concat(this.userID," not create src.")),void(this.changeRenderConfig=function(){return $f(t,void 0,void 0,function(){return ep(this,function(i){return[2]})})});this.media&&(this.Oi.info(As+" create el source."),this.sourceNode||(this.sourceNode=this.audioCtx.createMediaElementSource(this.media)),this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"))},e.prototype.startPlayingAudio=function(t){var i,r;return $f(this,void 0,void 0,function(){var s;return ep(this,function(o){switch(o.label){case 0:return this.isPlaying?(this.Oi.info(As+" ".concat(this.userID," is already playing")),[2]):(t&&this.Oi.info(As+" vocal ".concat(this.userID," play for ").concat(t)),this.isPlaying=!0,Ce()?(this.media.muted=!1,[2]):(this.audioEl=this.audioEl||ts.useAudioEl()||null,this.Oi.info(As+" ".concat(this.userID," start using audio el ").concat((i=this.audioEl)===null||i===void 0?void 0:i.id)),(s=(r=this.audioEl)===null||r===void 0?void 0:r.dom)||(this.Oi.error(As+" ".concat(this.userID," not enough audio elements")),s=Tt.createElement("audio"),this.audioEl={id:-1,dom:s,used:!0},s.setAttribute("autoplay","autoplay")),s.muted=!0,s.setAttribute("autoplay","autoplay"),s.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,2]));case 1:o.sent(),o.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},e.prototype.stopPlayingAudio=function(t){if(t===void 0&&(t=""),this.isPlaying&&(this.Oi.info(As+" vocal ".concat(this.userID," stop for ")+t),this.isPlaying=!1),Ce())this.media.muted=!0;else{this.sourceNode&&this.sourceNode.disconnect();var i=this.audioEl,r=i==null?void 0:i.dom;r&&(r.srcObject=null,r.parentNode&&r.parentNode.removeChild(r));var s=(i==null?void 0:i.id)||-1;i&&s>=0&&(ts.stopUsingAudioEl(s),this.Oi.info(As+" ".concat(this.userID," stop using audio el ").concat(s))),this.audioEl=null}},e.prototype.checkIfCanPlay=function(t){var i=this.distance=this.getDistanceFromListener(t);i===null||i>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(i," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},e}(ld),Dv=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tp=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},ip=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},so="zc.ra.4",Nv=function(n){function e(t,i,r){var s=n.call(this,t,r)||this;return s.Oi=t,s.streamView=i.streamView,s.position=i.position||null,s.createSource(),s.userID="stream"+new Date().getTime(),s.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},s.streamView.on("_trackChange",function(o,u){o==="audio"&&(u?s.createSource(!0):s.Oi.error("".concat(so," ").concat(s.userID," audio track lost")))}),s}return Dv(e,n),e.prototype.createSource=function(t){var i=this;if(t===void 0&&(t=!1),Ce())return this.Oi.info("".concat(so," ").concat(this.userID," not create src.")),this.changeRenderConfig=function(){return tp(i,void 0,void 0,function(){return ip(this,function(s){return[2]})})},!1;if(!this.streamView)return!1;if(this.Oi.info(so+" create view source. trackChanged: "+t),!this.sourceNode||t){var r=this.streamView.v.getAudioNodeAndStopRender();if(!r)return this.Oi.error(so+" create view source failed."),!1;this.sourceNode&&this.sourceNode.disconnect(),this.sourceNode=r,this.changeRenderConfig(this.isSpatial,!0)}return this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"),!0},e.prototype.startPlayingAudio=function(t){var i,r;return tp(this,void 0,void 0,function(){var s;return ip(this,function(o){switch(o.label){case 0:return this.isPlaying?(this.Oi.info(so+" ".concat(this.userID," is already playing")),[2]):(t&&this.Oi.info(so+" vocal ".concat(this.userID," play for ").concat(t)),this.isPlaying=!0,Ce()?(this.streamView.setAudioMuted(!1),[2]):(this.audioEl=this.audioEl||ts.useAudioEl()||null,this.Oi.info(so+" ".concat(this.userID," start using audio el ").concat((i=this.audioEl)===null||i===void 0?void 0:i.id)),(s=(r=this.audioEl)===null||r===void 0?void 0:r.dom)||(this.Oi.error(so+" ".concat(this.userID," not enough audio elements")),s=Tt.createElement("audio"),this.audioEl={id:-1,dom:s,used:!0},s.setAttribute("autoplay","autoplay")),s.muted=!0,s.setAttribute("autoplay","autoplay"),s.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,2]));case 1:o.sent(),o.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},e.prototype.stopPlayingAudio=function(t){if(t===void 0&&(t=""),this.isPlaying&&(this.Oi.info(so+" vocal ".concat(this.userID," stop for ")+t),this.isPlaying=!1),Ce())this.streamView.setAudioMuted(!0);else{this.sourceNode&&this.sourceNode.disconnect();var i=this.audioEl,r=i==null?void 0:i.dom;r&&(r.srcObject=null,r.parentNode&&r.parentNode.removeChild(r));var s=(i==null?void 0:i.id)||-1;i&&s>=0&&(ts.stopUsingAudioEl(s),this.Oi.info(so+" ".concat(this.userID," stop using audio el ").concat(s))),this.audioEl=null}},e.prototype.checkIfCanPlay=function(t){var i=this.distance=this.getDistanceFromListener(t);i===null||i>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(i," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},e}(ld),Lv=function(){function n(){this.Ke={}}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.addEventHandler=function(e,t){if(this.Ke[e]||(this.Ke[e]=[]),!wn(t))throw new Error("Params callBack is not a Function");return this.Ke[e].indexOf(t)==-1&&this.Ke[e].push(t),!0},n.prototype.removeEventHandler=function(e,t){return!!this.Ke[e]&&(this.Ke[e]=t?this.Ke[e].filter(function(i){return i!==t}):[],!0)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.Ke[e]&&this.Ke[e].forEach(function(r){try{setTimeout(function(){r.apply(void 0,t)},0)}catch(s){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(s))}})},n.prototype.reset=function(){this.Ke={}},n}(),rp=Lv,Mv=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},xv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},da,Uv=function(){function n(e,t){var i=this;this.raMode=bo.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.enableMic=!1,this.isPublishing=!1,this.streamID=null,this.isDenoise=!1,this.voiceChanger=null,this.voiceParam=null,this.isUpdated=!0,this.zegoRTC=t,this.audioCtx=e,this.audioListener=this.audioCtx.listener,this.eventHandler=rp.getInstance(),this.zegoRTC.on("publisherStateUpdate",function(r){var s=r.state,o=r.errorCode,u=r.extendedData,m=r.streamID.match(/(.*)_(.*)/);if((m==null?void 0:m.length)===3){if(i.userID!==m[1])return;s==="NO_PUBLISH"?(i.isPublishing=!1,i.stopPublishingStream()):(i.isPublishing=!0,i.isUpdated||(i.Oi.info(Gn+" resend stream info"),i.updateSteamExtraInfo())),i.eventHandler.emit("microphoneStateUpdate",{NO_PUBLISH:Ka.Off,PUBLISH_REQUESTING:Ka.TurningOn,PUBLISHING:Ka.On}[s],o,u)}})}return Object.defineProperty(n.prototype,"recvMode",{get:function(){return this._recvMode!==void 0?this._recvMode:[bo.World,bo.SecretTeam].includes(this.raMode)?So.All:So.Team},set:function(e){this._recvMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sendMode",{get:function(){return this._sendMode!==void 0?this._sendMode:this.raMode===bo.World?$n.All:$n.Team},set:function(e){this._sendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Oi",{get:function(){return this.zegoRTC.logger},enumerable:!1,configurable:!0}),n.getInstance=function(e,t){return n.instance||(n.instance=new n(e,t)),n.instance},n.prototype.updateSelfPosition=function(e,t,i){this.position=e,this.forwardAxis=t,Array.isArray(i)&&(this.upAxis=i),this.updateListenerEffect()},n.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},n.prototype.startPublishingStream=function(){var e=this;this.enableMic?this.Oi.warn(Gn+" mic is already enabled"):(this.enableMic=!0,this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioInput:this.micID||void 0,audioBitrate:30}}).then(function(t){return Mv(e,void 0,void 0,function(){return xv(this,function(i){if(!this.userID)throw this.zegoRTC.destroyStream(t),this.enableMic=!1,Error("Enable mic failed. Please log in room first.");return this.audioStream&&this.audioStream!==t&&this.zegoRTC.destroyStream(this.audioStream),this.audioStream=t,this.isDenoise&&this.enableDenoise(this.isDenoise),this.voiceChanger!==null&&this.setVoiceChangerPreset({voiceChanger:this.voiceChanger}),this.voiceParam!==null&&this.setVoiceChangerPreset({voiceParam:this.voiceParam}),this.streamID=this.userID+"_"+Date.now(),this.zegoRTC.startPublishingStream(this.streamID,t,{extraInfo:JSON.stringify(this.getExtraInfo())}),[2]})})}).catch(function(t){throw e.audioStream=null,e.enableMic=!1,t}))},n.prototype.stopPublishingStream=function(){this.isPublishing&&this.streamID&&this.zegoRTC.stopPublishingStream(this.streamID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null),this.enableMic=!1},n.prototype.setCustomMode=function(e,t){var i=!1,r=!1,s=!1;return t!==this.recvMode&&(this.recvMode=t,s=!0),e!==this.sendMode&&(this.sendMode=e,i=!0,r=!0),i&&this.updateSteamExtraInfo(),{sendChange:r,recvChange:s}},n.prototype.setNormalMode=function(e){this.raMode=e,this.updateSteamExtraInfo()},n.prototype.setTeamID=function(e){this.teamID=e,this.updateSteamExtraInfo()},n.prototype.updateSteamExtraInfo=function(){var e=this;this.streamID&&this.isPublishing&&(this.isUpdated=!1,this.Oi.info(Gn+" update stream info"),this.zegoRTC.setStreamExtraInfo(this.streamID,JSON.stringify(this.getExtraInfo())).then(function(t){t.errorCode===0&&(e.Oi.info(Gn+" update stream info success"),e.isUpdated=!0)}))},n.prototype.getExtraInfo=function(){var e,t={range_audio_team_id:this.teamID||"",range_audio_mode:(e=this.raMode,{0:1,1:2,2:3}[e]),r_a_s_flag:1};return this._sendMode===void 0&&this.raMode!==bo.World||(t.r_a_speak=this.sendMode),t},n.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0,this.streamID=null},n.prototype.enableDenoise=function(e){var t=this;return this.audioStream&&this.zegoRTC.enableAiDenoise(this.audioStream,e).catch(function(i){t.isDenoise=!1;var r=i||{};t.eventHandler.emit("aiDenoiseError",r.errorCode,r.extendedData)}),this.isDenoise=e,!0},n.prototype.setVoiceChangerPreset=function(e){var t=this;return this.audioStream&&this.zegoRTC.setVoiceChangerPreset(this.audioStream,e).catch(function(i){t.voiceChanger=null;var r=i||{};t.eventHandler.emit("voiceChangerError",r.errorCode,r.extendedData)}),"voiceChanger"in e&&e.voiceChanger!==void 0?(this.voiceChanger=e.voiceChanger,this.voiceParam=null):"voiceParam"in e&&e.voiceParam!==void 0&&(this.voiceParam=e.voiceParam,this.voiceChanger=null),!0},n}(),Bv=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},uc="zc.ra.2",zv=function(){function n(e,t){this.Oi=e,this.isEnable=!1,this.interval=100,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.userChanged=!1,this.updateUserInterval=1e3,this.updateUserTimer=null,this.audioSourceUpdate=!1,this._maxPlayingQuantity=20,this.allAudioSourceList=[],this.audioSourceWithinRangeList=[],this.localUserList=[],this.rangeListener=t}return n.getInstance=function(e,t){return n.instance||(n.instance=new n(e,t)),n.instance},n.prototype.setAudioSourceUpdate=function(e){this.audioSourceUpdate=e},n.prototype.setListener=function(e){this.rangeListener=e,this.hasChanged=!0,this.userChanged=!0},n.prototype.setAudioSourceList=function(e){this.audioSourceList=e,this.Oi.info("".concat(uc," set src list: [").concat(e.map(function(t){return t.userID}).join(","),"]")),this.hasChanged=!0},n.prototype.setAllAudioSourceList=function(e){e&&(this.allAudioSourceList=e),this.userChanged=!0},n.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasChanged=!0,this.playAudioTask()},n.prototype.playAudioTask=function(){var e=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout(function(){e.playAudioTask()},this.interval)},n.prototype.handlePlayAudioTask=function(){var e=this;if(this.isEnable){this.Oi.info("".concat(uc," handler task start"));var t=Bv([],this.audioSourceList,!0),i=0,r=this.rangeListener.recvMode;if([So.Team,So.All].includes(r)){var s=this.getTeamAudioSourceGroup();t=s.otherList,s.teamList.forEach(function(u){i<e._maxPlayingQuantity&&(u.isPlaying||u.startPlayingAudio("play for team"),i++)})}var o=[So.World,So.All].includes(r);o&&(t.forEach(function(u){u.distance=u.getDistanceFromListener(e.rangeListener)}),t.sort(function(u,m){return u.distance===null?1:m.distance===null||u.distance<m.distance?-1:u.distance>m.distance?1:0})),t.forEach(function(u){var m=[$n.All,$n.World].includes(u.sendMode)&&u.distance!==null&&(e.rangeListener.recvRange===null||u.distance<=e.rangeListener.recvRange);if(o&&i<e._maxPlayingQuantity&&m)u.isPlaying||u.startPlayingAudio("play for range"),i++;else{var f="stop for mode or range. mode: ".concat(u.sendMode,", range: ").concat(u.distance," > ").concat(e.rangeListener.recvRange);u.stopPlayingAudio(f)}}),this.Oi.info(uc+" playing quantity: ".concat(i,"."))}else this.stopPlayingAudioStream()},n.prototype.startCheckUserInRange=function(){this.Oi.info(uc+" start user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null),this.userChanged=!0,this.userCheckTask()},n.prototype.stopCheckUserInRange=function(){this.Oi.info(uc+" stop user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null)},n.prototype.userCheckTask=function(){var e=this;this.userChanged&&(this.userChanged=!1,this.handleUserCheckTask()),this.updateUserTimer=window.setTimeout(function(){e.userCheckTask()},this.updateUserInterval)},n.prototype.handleUserCheckTask=function(){var e=this;if(this.audioSourceUpdate){var t=[];this.allAudioSourceList.forEach(function(i){i.distance=i.getDistanceFromListener(e.rangeListener);var r=i.distance!==null&&(e.rangeListener.recvRange===null||i.distance<=e.rangeListener.recvRange),s=!!e.localUserList.find(function(o){return o.userID===i.userID});r&&s&&t.push({userID:i.userID,position:i.position})}),this.checkAudioSourceListDiff(t,this.audioSourceWithinRangeList)&&this.rangeListener.eventHandler.emit("audioSourceWithinRangeUpdate",t),this.audioSourceWithinRangeList=t}},n.prototype.getTeamAudioSourceGroup=function(){var e=this,t=[],i=[];return this.audioSourceList.forEach(function(r){r.isSpeakInTeam(e.rangeListener.teamID)?t.push(r):i.push(r)}),{teamList:t,otherList:i}},n.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach(function(e){e.stopPlayingAudio("stop for all stream")})},n.prototype.setLocalUserList=function(e){this.localUserList=e,this.userChanged=!0},n.prototype.checkAudioSourceListDiff=function(e,t){for(var i,r=0;r<e.length;r++){i=!1;for(var s=0;s<t.length;s++)if(e[r].userID===t[s].userID){i=!0;break}if(!i)return!0}for(var o=0;o<t.length;o++){i=!1;for(var u=0;u<e.length;u++)if(t[o].userID===e[u].userID){i=!0;break}if(!i)return!0}return!1},n}(),Fv=zv;function hd(n){return!isNaN(Number(n))&&n!==""&&Number.MAX_SAFE_INTEGER>=Number(n)&&Number(n)>=-Number.MAX_SAFE_INTEGER}function ha(n){if(Array.isArray(n)){for(var e=0;e<3;e++)if(!hd(n[e]))return!1;return!0}return!1}(function(n){n[n.Normal=0]="Normal",n[n.Custom=1]="Custom"})(da||(da={}));var Ds=function(){return Ds=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Ds.apply(this,arguments)},lc=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},dc=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Pu=function(n,e,t){if(t||arguments.length===2)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};function np(){var n;return lc(this,void 0,void 0,function(){var e,t,i;return dc(this,function(r){switch(r.label){case 0:return(e=navigator==null?void 0:navigator.userAgentData)?[4,e.getHighEntropyValues(["platformVersion"]).catch(function(){})]:[2,{platform:"",majorPlatformVersion:0}];case 1:return t=r.sent()||{},i=parseInt((n=t.platformVersion)===null||n===void 0?void 0:n.split(".")[0]),[2,{platform:t.platform,majorPlatformVersion:i}]}})})}var lr="zc.ra.0",Hv=function(){function n(e,t){var i=this;this.Oi=t,this.isSpatial=!1,this.audioSourceList=[],this.audioSourceUpdate=!1,this.localUserList=[],this.speakingUserIdList=[],this.vocalSourceMap=new Map,this.volume=1,this.speaker="",this.We=null,this.supportSpeakerSet=!1,this.isHide=!1,this.eventHandler={visibilitychange:function(){return lc(i,void 0,void 0,function(){var r,s,o,u,m,f=this;return dc(this,function(a){switch(a.label){case 0:return Pu(Pu([],this.vocalSourceList,!0),this.audioSourceList,!0).forEach(function(S){S.inBackground(Tt.hidden),f.isHide=Tt.hidden}),r=function(){Pu(Pu([],f.vocalSourceList,!0),f.audioSourceList,!0).forEach(function(S){S.changeRenderConfig(f.isOpen3D(S),!0,!1,!1)})},Tt.hidden?(s=di()&&Ce(),[4,np()]):[3,2];case 1:return o=a.sent(),u=o.platform==="Windows"&&o.majorPlatformVersion>=13,s||u?(this.Oi.warn("".concat(lr," mobile chrome hide page and stop web audio.")),r(),[2]):((m=this.audioCtx.state)!=="running"?(this.Oi.info("".concat(lr," hidden ctx: ").concat(m,", resume ctx")),this.audioCtx.resume(),setTimeout(function(){var S=f.audioCtx.state;f.isHide&&(S==="running"?f.Oi.info("".concat(lr," hidden ctx: ").concat(S,".")):(f.Oi.warn("".concat(lr," hidden ctx: ").concat(S,", ctx resume failed. stop web audio.")),r()))},2e3)):this.Oi.info("".concat(lr," hidden ctx: ").concat(m,".")),[3,3]);case 2:this.audioCtx.resume(),this.audioSourceList.forEach(function(S){var F,ee;S.isPlaying&&((F=S.audioEl)===null||F===void 0||F.dom.pause(),(ee=S.audioEl)===null||ee===void 0||ee.dom.play().catch(function(){f.Oi.warn("".concat(lr," show page and  ").concat(S.userID," replay failed."))}))}),a.label=3;case 3:return[2]}})})}},this.zegoRTC=e,Tt.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.zegoRTC.on("roomStreamUpdate",function(r,s,o){var u=o.map(function(f){var a=i.getStreamInfo(f.extraInfo,f.streamID),S=a.isRangeAudioStream,F=a.teamID,ee=a.raMode,ie=a.sendMode;return Ds(Ds({},f),{isRangeAudioStream:S,teamID:F,raMode:ee,sendMode:ie})}).filter(function(f){return f.isRangeAudioStream}),m=u.map(function(f){return f.user.userID});s==="DELETE"?i.speakingUserIdList=i.speakingUserIdList.filter(function(f){var a=!m.includes(f);if(!a){var S=i.audioSourceMap[f];S&&S.stopPlayingAudio("stop for stream delete")}return a}):s==="ADD"&&(i.speakingUserIdList=i.speakingUserIdList.concat(m),u.forEach(function(f){var a=f.user.userID,S=i.audioSourceMap[a],F=f.teamID,ee=f.raMode,ie=f.sendMode;if(S)S.streamID!==f.streamID&&(S.stopPlayingAudio("stop for old stream"),S.streamID=f.streamID),ee!==void 0&&(S.raMode=ee),F!==S.teamID&&(S.teamID=F),S.changeRenderConfig(i.isOpen3D(S));else{var ae=new dd(i.Oi,{userID:a,teamID:F,raMode:ee,sendMode:ie},{audioCtx:i.audioCtx,zegoRTC:i.zegoRTC,isSpatial:i.isSpatial,maxDistance:i.rangeListener.recvRange,volume:i.volume,speaker:i.speaker,isHide:i.isHide});ae.streamID=f.streamID,i.audioSourceList.push(ae),i.playStreamHandler.hasChanged=!0}})),i.playStreamHandler.setAudioSourceList(i.speakingAudioSourceList)}),this.zegoRTC.on("playerStateUpdate",function(r){var s=i.audioSourceList.find(function(o){return o.streamID===r.streamID});s&&(r.state==="NO_PLAY"?s.isPlaying=!1:(r.state==="PLAYING"&&s.checkTrackChanged(),s.isPlaying=!0))}),this.zegoRTC.on("streamExtraInfoUpdate",function(r,s){i.Oi.info(lr+" recv extra info: "+JSON.stringify(s));var o=!1;s.forEach(function(u){var m=i.audioSourceMap[u.user.userID];if(m&&m.streamID){var f=i.getStreamInfo(u.extraInfo,u.streamID),a=f.teamID,S=f.raMode,F=f.sendMode;a!==m.teamID&&(m.teamID=a,o=!0),S!==void 0&&(m.raMode=S,o=!0),m.sendMode!==F&&(m.sendMode=F,o=!0),i.playStreamHandler.hasChanged=!0}}),o&&i.enableSpatializer(i.isSpatial)}),this.zegoRTC.RTM._on("_roomStateUpdate",function(r,s){s==="CONNECTED"?(i.roomID=r,i.rangeListener.userID=i.zegoRTC.RTM.getUserID(),i.playStreamHandler.hasChanged=!0,i.playStreamHandler.userChanged=!0):s==="DISCONNECTED"&&(i.roomID=void 0,i.rangeListener.reset(),i.enableSpeaker(!1),i.audioSourceList=[],i.playStreamHandler.setAudioSourceList([]),i.localUserList=[],i.playStreamHandler.setLocalUserList([]))}),this.zegoRTC.RTM.on("roomUserUpdate",function(r,s,o){var u;i.Oi.info(lr+" roomUserUpdate: ",r,s,JSON.stringify(o)),s==="ADD"?(u=i.localUserList).push.apply(u,o):s==="DELETE"&&o.forEach(function(m){i.localUserList=i.localUserList.filter(function(f){return f.userID!==m.userID})}),i.playStreamHandler.setLocalUserList(i.localUserList)}),this.zegoRTC.on("publishQualityUpdate",function(r,s){var o=r.match(/(.*)_(.*)/);if((o==null?void 0:o.length)===3){var u=o[1];if(i.rangeListener.userID!==u)return;var m=Ds({},s.audio);i.eventManager.emit("publishQualityUpdate",u,m)}}),this.zegoRTC.on("playQualityUpdate",function(r,s){var o,u=r.match(/(.*)_(.*)/);if((u==null?void 0:u.length)===3){var m=u[1],f=s.audio,a=s.peerToPeerDelay,S=s.peerToPeerPacketLostRate;if(!(!((o=i.audioSourceList)===null||o===void 0)&&o.some(function(ee){return ee.userID===m})))return;var F=Ds(Ds({},f),{peerToPeerDelay:a,peerToPeerPacketLostRate:S});i.eventManager.emit("playQualityUpdate",m,F)}}),this.We=this.Xe(),this.rangeListener=Uv.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=Fv.getInstance(this.Oi,this.rangeListener),this.eventManager=rp.getInstance()}return Object.defineProperty(n.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce(function(e,t){return t.userID&&(e[t.userID]=t),e},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"speakingAudioSourceList",{get:function(){var e=this;return this.audioSourceList.filter(function(t){return e.speakingUserIdList.includes(t.userID)})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"vocalSourceList",{get:function(){for(var e=[],t=this.vocalSourceMap.values(),i=0;i<this.vocalSourceMap.size;i++)e.push(t.next().value);return e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter(function(e){return e.isPlaying})},enumerable:!1,configurable:!0}),n.prototype.Xe=function(){var e=this,t=new(window.AudioContext||window.webkitAudioContext);return t.addEventListener("statechange",function(){t.state==="suspended"&&(e.Oi.info(lr+" audio context suspended"),t.resume())}),t},Object.defineProperty(n.prototype,"audioCtx",{get:function(){return this.We||(this.We=this.Xe()),this.We},enumerable:!1,configurable:!0}),n.getInstance=function(e,t){return n.instance||(n.instance=new n(e,t)),n.instance},n.prototype.resumeAudioContext=function(){return lc(this,void 0,void 0,function(){var e=this;return dc(this,function(t){return[2,new Ge(function(i){ts.generateEls(),e.audioCtx.state==="running"&&i(!0),e.audioCtx.onstatechange=function(){e.audioCtx.state==="running"&&i(!0)},e.audioCtx.resume(),e.Oi.info(lr+" resume audio ctx"),setTimeout(function(){i(!1)},3e3)})]})})},n.prototype.getAudioContextState=function(){return this.audioCtx.state},n.prototype.getStreamInfo=function(e,t){var i=void 0,r=null;try{r=JSON.parse(e)}catch{return this.Oi.warn(lr+" parse room extra info failed. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1}}if(!r.hasOwnProperty("range_audio_team_id")||!r.hasOwnProperty("range_audio_mode"))return this.Oi.warn(lr+" extra info has no mode. ".concat(t," is not ra stream.")),{isRangeAudioStream:!1};i={1:0,2:1,3:2}[r.range_audio_mode];var s=r.r_a_s_flag,o={teamID:r.range_audio_team_id||void 0,raMode:i,isRangeAudioStream:s===void 0||s===1};return r.hasOwnProperty("r_a_speak")&&(o.sendMode=r.r_a_speak),this.Oi.info("".concat(lr," ").concat(t," parse extra info: ").concat(JSON.stringify(o),".")),o},n.prototype.setAudioReceiveRange=function(e){if(!hd(e))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if(e=Number(e),(e=Number(e))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.Oi.info(lr+" set receive range: "+e),this.rangeListener.recvRange=e,this.audioSourceList.forEach(function(t){t.setMaxDistance(e)}),this.playStreamHandler.hasChanged=!0,this.playStreamHandler.userChanged=!0},n.prototype.updateSelfPosition=function(e,t,i,r){var s=this,o=function(u){return"Failed to execute 'updateSelfPosition': Argument '".concat(u,`' requires an array of type number."`)};if(!ha(e))throw new Error(o("position"));if(!ha(t))throw new Error(o("axisForward"));if(!ha(i))throw new Error(o("axisRight"));if(!ha(r))throw new Error(o("axisUp"));this.Oi.info(lr+" set self position [".concat(e,"]")),this.rangeListener&&(this.rangeListener.updateSelfPosition(e,t,r),this.vocalSourceMap.forEach(function(u){u.checkIfCanPlay(s.rangeListener)})),this.playStreamHandler.setListener(this.rangeListener)},n.prototype.updateAudioSource=function(e,t){if(e=String(e),!ha(t))throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");var i=this.audioSourceMap[e];i?i.setPosition(t):(i=new dd(this.Oi,{userID:e,position:t},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.rangeListener.recvRange,volume:this.volume,speaker:this.speaker,isHide:this.isHide}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(i)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList),this.playStreamHandler.setAllAudioSourceList(this.audioSourceList)},n.prototype.enableMicrophone=function(e){if(e===void 0&&(e=!0),!this.rangeListener.userID)throw new Error("Enable mic failed. Please log in room first.");return e?this.rangeListener.startPublishingStream():this.rangeListener.stopPublishingStream()},n.prototype.selectMic=function(e){return lc(this,void 0,void 0,function(){var t,i,r,s;return dc(this,function(o){switch(o.label){case 0:if(!bi(e)&&!Yi(e))throw new Error("Select mic failed. DeviceID error.");if(i=(t=this.rangeListener).audioStream,r=t.isPublishing,this.Oi.info(lr+" select mic: "+e),!i||!r)return[3,5];s={errorCode:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.zegoRTC.useAudioDevice(i,e||"")];case 2:return s=o.sent(),[3,4];case 3:return o.sent(),[2,!1];case 4:return s.errorCode===0?(this.rangeListener.micID=e,[2,!0]):[2,!1];case 5:return this.rangeListener.micID=e,[2,!0];case 6:return[2]}})})},n.prototype.enableSpeaker=function(e){if(e===void 0&&(e=!0),e&&!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=e,this.Oi.info(lr+" enable speaker: "+e),e?(ts.generateEls(),this.playStreamHandler.startPlayingAudioStream()):this.playStreamHandler.stopPlayingAudioStream()},n.prototype.enableSpatializer=function(e){var t=this;e===void 0&&(e=!0),this.Oi.info(lr+" set spatializer: "+e),this.isSpatial=!!e,this.audioSourceList.forEach(function(i){i.changeRenderConfig(t.isOpen3D(i))}),this.vocalSourceList.forEach(function(i){i.changeRenderConfig(e)}),e&&this.rangeListener.updateListenerEffect()},n.prototype.enableAiDenoise=function(e){if(this.Oi.info(lr+" set ai denoise: "+e),!Li(e))return!1;var t=Ce();return(t||window.AudioWorklet)&&window.WebAssembly&&(window.AudioContext||(window==null?void 0:window.webkitAudioContext)).prototype.createScriptProcessor?this.rangeListener.enableDenoise(!!e):(this.Oi.error(lr+"".concat(t&&" mobile"," browser dose not support ai denoise.")),!1)},n.prototype.setVoiceChangerPreset=function(e){this.Oi.info(lr+" set voice changer preset: "+JSON.stringify(e));var t=Ce();return(t||window.AudioWorklet)&&window.WebAssembly&&(window.AudioContext||(window==null?void 0:window.webkitAudioContext)).prototype.createScriptProcessor?this.rangeListener.setVoiceChangerPreset(e):(this.Oi.error(lr+"".concat(t&&" mobile"," browser dose not support voice changer.")),!1)},n.prototype.setRangeAudioTeamID=function(e){this.Oi.info(lr+" set team id: "+e),this.rangeListener.setTeamID(e),this.enableSpatializer(this.isSpatial),this.playStreamHandler.hasChanged=!0},n.prototype.setRangeAudioMode=function(e){if(this.modeType===da.Custom)throw new Error("Failed to execute 'setRangeAudioMode': already use 'setRangeAudioCustomMode'.");this.modeType=da.Normal,this.Oi.info(lr+" set mode "+e),this.rangeListener.setNormalMode(e),this.playStreamHandler.hasChanged=!0},n.prototype.setCustomMode=function(e,t){if(this.modeType===da.Normal)throw new Error("Failed to execute 'setRangeAudioCustomMode': already use 'setRangeAudioMode'.");this.modeType=da.Custom,this.Oi.info(lr+" set custom mode: ".concat(e,", ").concat(t));var i=this.rangeListener.setCustomMode(e,t).recvChange;this.playStreamHandler.hasChanged=!0,i&&this.enableSpatializer(this.isSpatial)},n.prototype.setAudioVolume=function(e){var t=this;if(this.Oi.info(lr+" set volume ".concat(e)),e<0)throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");this.volume=e/100,this.audioSourceList.forEach(function(i){i.setVolume(t.volume)})},n.prototype.selectSpeaker=function(e){var t=this;if(e===void 0&&(e=""),!bi(e))throw new Error("Select speaker failed. Device ID error.");if(!this.supportSpeakerSet){if(!Tt.createElement("audio").setSinkId)throw new Error("Failed to execute 'selectSpeaker': browser not support.");this.supportSpeakerSet=!0}this.speaker=e,this.Oi.info(lr+" set speaker: "+e),e===""&&this.Oi.warn(lr+" set speaker to be default. "),this.audioSourceList.find(function(i){return lc(t,void 0,void 0,function(){var r;return dc(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,i.setSpeaker(e)];case 1:return s.sent(),[3,3];case 2:return r=s.sent(),this.Oi.warn(lr+" set speaker failed. id: ".concat(e,", error: ").concat(r)),[2,!0];case 3:return[2,!1]}})})})},n.prototype.setPositionUpdateFrequency=function(e){if(!(e>=15))throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");this.playStreamHandler.interval=Number(e)||100,this.Oi.info(lr+" set interval: "+e)},n.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},n.prototype.off=function(e,t){return this.eventManager.removeEventHandler(e,t)},n.prototype.enableAudioSourceUpdateChecker=function(e,t){if(this.Oi.info(lr+" set source update: "+e),this.audioSourceUpdate=e,this.playStreamHandler.setAudioSourceUpdate(e),t&&qi(t.frequency)){if(t.frequency<50)throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +].");this.playStreamHandler.updateUserInterval=Number(t.frequency)||1e3,this.Oi.info(lr+" set interval: "+t.frequency)}e?this.playStreamHandler.startCheckUserInRange():this.playStreamHandler.stopCheckUserInRange()},n.prototype.getVocalSource=function(e,t){var i=this.vocalSourceMap.get(e);if(!i){var r={audioCtx:this.audioCtx,isSpatial:this.isSpatial,maxDistance:t||0,volume:this.volume,speaker:this.speaker,isHide:this.isHide};i=us(e)?new Av(this.Oi,{media:e},r):new Nv(this.Oi,{streamView:e},r)}return this.vocalSourceMap.set(e,i),i},n.prototype.setStreamVocalRange=function(e,t){var i=us(e);if(!i&&!(e!=null&&e.v))throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");if(!hd(t))throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");t=Number(t),this.Oi.info(lr+" ".concat(i?"custom":"stream"," set range: ")+t);var r=this.getVocalSource(e,t);r.setMaxDistance(t),r.checkIfCanPlay(this.rangeListener)},n.prototype.updateStreamPosition=function(e,t){if(!us(e)&&!(e!=null&&e.v))throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");if(!ha(t))throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");var i=this.getVocalSource(e);i.setPosition(t),i.checkIfCanPlay(this.rangeListener)},n.prototype.isOpen3D=function(e){return e instanceof dd?(this.rangeListener.recvMode===So.World||!e.isSpeakInTeam(this.rangeListener.teamID))&&this.isSpatial:this.isSpatial},n}(),qv=Hv,jv=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Vv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Gv=function(){function n(e,t){this.Ye=qv.getInstance(e,t)}return n.getInstance=function(e,t){if(!n.instance){if(!e)throw Error("create instance failed.");n.instance=new n(e,t)}return n.instance},n.prototype.enableAiDenoise=function(e){return this.Ye.enableAiDenoise(e)},n.prototype.enableAudioSourceUpdateChecker=function(e,t){this.Ye.enableAudioSourceUpdateChecker(e,t)},n.prototype.on=function(e,t){return this.Ye.on(e,t)},n.prototype.off=function(e,t){return this.Ye.off(e,t)},n.prototype.setAudioReceiveRange=function(e){this.Ye.setAudioReceiveRange(e)},n.prototype.updateSelfPosition=function(e,t,i,r){this.Ye.updateSelfPosition(e,t,i,r)},n.prototype.updateAudioSource=function(e,t){this.Ye.updateAudioSource(e,t)},n.prototype.enableSpatializer=function(e){return this.Ye.enableSpatializer(e)},n.prototype.enableMicrophone=function(e){return this.Ye.enableMicrophone(e)},n.prototype.selectMicrophone=function(e){return jv(this,void 0,void 0,function(){return Vv(this,function(t){switch(t.label){case 0:return[4,this.Ye.selectMic(e)];case 1:return[2,t.sent()]}})})},n.prototype.selectSpeaker=function(e){return this.Ye.selectSpeaker(e)},n.prototype.enableSpeaker=function(e){return this.Ye.enableSpeaker(e)},n.prototype.setRangeAudioCustomMode=function(e,t){this.Ye.setCustomMode(e,t)},n.prototype.setRangeAudioMode=function(e){this.Ye.setRangeAudioMode(e)},n.prototype.setTeamID=function(e){this.Ye.setRangeAudioTeamID(e)},n.prototype.setPositionUpdateFrequency=function(e){return this.Ye.setPositionUpdateFrequency(e)},n.prototype.setRangeAudioVolume=function(e){return this.Ye.setAudioVolume(e)},n.prototype.setVoiceChangerPreset=function(e){return this.Ye.setVoiceChangerPreset({voiceChanger:e})},n.prototype.setVoiceChangerParam=function(e){return this.Ye.setVoiceChangerPreset({voiceParam:e})},n.prototype.isAudioContextRunning=function(){return this.Ye.getAudioContextState()==="running"},n.prototype.resumeAudioContext=function(){return this.Ye.resumeAudioContext()},n.prototype.setStreamVocalRange=function(e,t){this.Ye.setStreamVocalRange(e,t)},n.prototype.updateStreamPosition=function(e,t){this.Ye.updateStreamPosition(e,t)},n.prototype.setCustomSourceVocalRange=function(e,t){this.Ye.setStreamVocalRange(e,t)},n.prototype.updateCustomSourcePosition=function(e,t){this.Ye.updateStreamPosition(e,t)},n}(),Wv={type:"RangeAudio",install:function(n){Object.defineProperty(n.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=Gv.getInstance(this,this.logger)),this.rangeAudio},writable:!1})}},op=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},sp=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},Qv=function(){function n(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.Oi=e.logger}return n.prototype.startBroadcasting=function(e,t){return op(this,void 0,void 0,function(){var i,r,s,o,u;return sp(this,function(m){switch(m.label){case 0:return yi(this.Oi,i="dc.sb.0"),this.pubDataChannelList.includes(e)?(this.Oi.error(i+" datachannel already exist"),[2,!1]):(r=this.zegoWebRTC.streamCenter.publisherList[e])&&r.publisher.dataChannel?(this.pubDataChannelList.push(e),[2,!0]):r&&!r.publisher.dataChannel?(this.Oi.error(i+" publish datachannel no exist, try other stream ID"),[2,!1]):this.broadcastStream?[3,2]:(s=Tt.createElement("canvas"),o=this,[4,this.zegoWebRTC.createStream({custom:{source:s}})]);case 1:o.broadcastStream=m.sent(),m.label=2;case 2:return(u=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),hi(this.Oi,i),[2,u]}})})},n.prototype.stopBroadcasting=function(e){var t="dc.sb.1";yi(this.Oi,t),this.pubDataChannelList=this.pubDataChannelList.filter(function(r){return r!==e});var i=this.zegoWebRTC.streamCenter.publisherList[e];return i?(i.room.roomID==this.roomID&&i.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),hi(this.Oi,t),!0):(this.Oi.error(t+" datachannel no found"),!1)},n.prototype.sendRealTimeSequentialData=function(e,t){if(!Sd(t))return this.Oi.error("dc.srsd data type wrong"),!1;var i=this.zegoWebRTC.streamCenter.publisherList[e];return i&&this.pubDataChannelList.includes(e)?this.sendBCMessage(i.publisher,t):(this.Oi.error("dc.srsd datachannel no found"),!1)},n.prototype.sendBCMessage=function(e,t){var i;if(!e.dataChannelState)return!1;for(var r=new Uint8Array(t),s=0,o=t.byteLength,u=e.send_seq,m=0,f=new Date().getTime(),a=0;o>0;){o>1151?a=1141:(a=o,m=1);var S=new Uint8Array(a+10);S[0]=1,S[1]=m,S[2]=e.send_seq>>8&255,S[3]=255&e.send_seq,S[4]=u>>8&255,S[5]=255&u,S[6]=f>>24&255,S[7]=f>>16&255,S[8]=f>>8&255,S[9]=255&f;for(var F=0;F<a;F++)S[F+10]=r[F+s];o-=a,s+=a,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),(i=e.dataChannel)===null||i===void 0||i.send(S)}return!0},n.prototype.startSubscribing=function(e,t){var i,r;return op(this,void 0,void 0,function(){var s,o,u;return sp(this,function(m){switch(m.label){case 0:return yi(this.Oi,s="dc.ss.0"),this.subDataChannelList.includes(e)?(this.Oi.error(s+" datachannel already exist"),[2,!1]):(o=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:m.sent(),o=this.zegoWebRTC.streamCenter.playerList[e],m.label=2;case 2:return(u=o.player).dataChannel?(!(!((i=u.onDataChannelList)===null||i===void 0)&&i.includes(this.onReceivedDataChannel.bind(this)))&&((r=u.onDataChannelList)===null||r===void 0||r.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),hi(this.Oi,s),[2,!0]):(this.Oi.error(s+" datachannel no exist, try other stream ID"),[2,!1])}})})},n.prototype.stopSubscribing=function(e){var t="dc.ss.1";yi(this.Oi,t),this.subDataChannelList=this.subDataChannelList.filter(function(r){return r!==e});var i=this.zegoWebRTC.streamCenter.playerList[e];return i?(i.room.roomID==this.roomID&&i.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),hi(this.Oi,t),!0):(this.Oi.error(t+" datachannel no subscribe"),!1)},n.prototype.on=function(e,t){this.bindListener(e,t)},n.prototype.off=function(e,t){this.deleteListener(e,t)},n.prototype.bindListener=function(e,t){return this.listenerList[e]?wn(t)?(this.listenerList[e].indexOf(t)==-1&&this.listenerList[e].push(t),!0):(this.Oi.error("zc.o.0 listener callBack must be funciton"),!1):(this.Oi.error("dc.o.0 event "+e+" no found"),!1)},n.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.Oi.error("dc.o.1 listener no found"),!1;var i=this.listenerList[e];return t?i.splice(i.indexOf(t),1):this.listenerList[e]=[],!0},n.prototype.actionListener=function(e){for(var t=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach(function(s){try{setTimeout(function(){s.apply(void 0,i)},0)}catch(o){t.Oi.error("dc.al "+e+" "+o)}})},n.prototype.onReceivedDataChannel=function(e,t,i){this.actionListener("receiveRealTimeSequentialData",e,t,i)},n.prototype.reset=function(){var e=this;for(var t in this.Oi.info("dc.rs call"),this.pubDataChannelList.forEach(function(i){var r=e.zegoWebRTC.streamCenter.publisherList[i];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPublishingStream(i)}),this.subDataChannelList.forEach(function(i){var r=e.zegoWebRTC.streamCenter.playerList[i];r&&r.room.roomID==e.roomID&&r.isDataChannel&&e.zegoWebRTC.stopPlayingStream(i)}),this.listenerList)this.listenerList[t]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,this.Oi.info("dc.rs end")},n}(),Zv=function(){function n(e,t){this.Ze=new Qv(e,t)}return n.prototype.startBroadcasting=function(e){return this.Ze.startBroadcasting(e)},n.prototype.stopBroadcasting=function(e){return this.Ze.stopBroadcasting(e)},n.prototype.sendRealTimeSequentialData=function(e,t){return this.Ze.sendRealTimeSequentialData(e,t)},n.prototype.startSubscribing=function(e){return this.Ze.startSubscribing(e)},n.prototype.stopSubscribing=function(e){return this.Ze.stopSubscribing(e)},n.prototype.on=function(e,t){this.Ze.on(e,t)},n.prototype.off=function(e,t){this.Ze.off(e,t)},n}(),Kv={type:"DataChannel",install:function(n){Object.defineProperty(n.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new Zv(this,e),t.dataChannelManager):(this.logger.error("zc.crsdm room no exist"),null)},writable:!1}),Object.defineProperty(n.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){var t=this.stateCenter.roomList.find(function(i){return i.dataChannelManager==e});t&&(e.dataChannelManager.reset(),t.dataChannelManager=null)},writable:!1})}},Jv=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Yv=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},fd="zc.p.0.sbe.3",Xv=function(){function n(e){this.Oi=e,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return n.prototype.startRecordBeautyEffectOutput=function(e){return Jv(this,void 0,void 0,function(){var t,i,r,s=this;return Yv(this,function(o){switch(o.label){case 0:return t=6,this.recordID?(this.Oi.warn(fd+" detector is already recording"),[2,{result:!0}]):(i=new Date().getTime(),this.recordID=i,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Ge(function(u){window.setTimeout(u,1e3*s.recordingDuration)})]);case 1:return o.sent(),this.recordID!==i?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,r=this.recordedFrameCount/t,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.Oi.warn(fd+" detect effect overload: current fps: "+r),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:r}]):(this.Oi.info(fd+" detect effect current fps: "+r),[2,{result:!0}]))}})})},n.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},n.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},n}();function ap(n){for(var e=n,t="",i=0;i<e.length;i++){var r=e.charCodeAt(i),s=r;r>=65&&r<=90&&(s=(r-65-13+26)%26+65),r>=97&&r<=122&&(s=(r-97-13+26)%26+97),t+=String.fromCharCode(s)}return t}var Au=function(){function n(e,t,i){this.gl=e,this.width=t,this.height=i,this.type="baseShader",this.program=null,this.program=null}return n.prototype.setEffectConfig=function(e){},n.prototype.setConstUniforms=function(){},n.prototype.resetResolution=function(e,t){this.width=e||this.width,this.height=t||this.height},n.prototype.render=function(){},n.prototype.renderPreTextures=function(e,t,i){},n.prototype.makeProgram=function(e,t){var i=this.gl,r=ap(e),s=ap(t),o=this.makeShader(r,i.VERTEX_SHADER),u=this.makeShader(s,i.FRAGMENT_SHADER),m=i.createProgram();return i.attachShader(m,o),i.attachShader(m,u),i.linkProgram(m),i.getProgramParameter(m,i.LINK_STATUS),m},n.prototype.release=function(){},n.prototype.makeShader=function(e,t){var i=this.gl,r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS),r},n}(),cp=`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez uvtuc sybng grkOyheJvqguBssfrg;
havsbez uvtuc sybng grkOyheUrvtugBssfrg;
inelvat irp2 i_grkpbbeq0;
inelvat irp4 grkgherFuvsg_1;
inelvat irp4 grkgherFuvsg_2;
inelvat irp4 grkgherFuvsg_3;
inelvat irp4 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;

  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;

  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);
  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);
}`,up=`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
inelvat uvtuc irp4 grkgherFuvsg_1;
inelvat uvtuc irp4 grkgherFuvsg_2;
inelvat uvtuc irp4 grkgherFuvsg_3;
inelvat uvtuc irp4 grkgherFuvsg_4;
ibvq znva(ibvq) { 
  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;
  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); 
}`,$v=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),e0=function(n){function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.width=i,s.height=r,s.type="BlurShader",s.blurXProgram=null,s.blurYProgram=null,s.diffProgram=null,s.uIntensity=null,s.smoothIntensity=.5,s.blurTextureList=[],s.blurBufferList=[],s.blurXProgram=s.makeProgram(cp,up),s.setBorderBlurProgram(s.blurXProgram,1/(i||1),0),s.blurYProgram=s.makeProgram(cp,up),s.setBorderBlurProgram(s.blurYProgram,0,1/(r||1)),s.diffProgram=s.makeProgram(`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez zng4 hCZIZngevk;
inelvat irp2 i_grkpbbeq0;
ibvq znva()
{
  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
}`,`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
ibvq znva(ibvq) {
  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  irp4 qvssPbybe = vPbybe - zrnaPbybe;
  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);
  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);
  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);
  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);
}`),s.setDiffBlurProgram(s.diffProgram),s.program=s.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
inelvat irp2 i_grkpbbeq0;
havsbez sybng jvqguBssfrg;
havsbez sybng urvtugBssfrg;
inelvat irp2 grkgherFuvsg_1;
inelvat irp2 grkgherFuvsg_2;
inelvat irp2 grkgherFuvsg_3;
inelvat irp2 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));
  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));
}
`,`
cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
havsbez fnzcyre2Q oyheQvssGrkgher;
havsbez ybjc sybng oyheNycun;
ibvq znva(ibvq) {
  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);
  ybjc sybng nycun = oyheNycun * 1.0;
  ybjc sybng gurgn = 0.1;
  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);
  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);
  zrqvhzc sybng xZva = 0.1;
  ybjc irp3 erfhygPbybe;
  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;
  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);
  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));
  ty_SentPbybe = irp4(erfhygPbybe,1.0);
}`),s.initBlurBuffer(),s}return $v(e,n),e.prototype.setEffectConfig=function(t){isNaN(t.smoothIntensity)||(this.smoothIntensity=t.smoothIntensity/100)},e.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},e.prototype.initBlurBuffer=function(){var t=this,i=this.gl;this.blurTextureList.forEach(function(u){var m;u&&((m=t.gl)===null||m===void 0||m.deleteTexture(u))}),this.blurBufferList.forEach(function(u){var m;u&&((m=t.gl)===null||m===void 0||m.deleteFramebuffer(u))}),this.blurTextureList=[],this.blurBufferList=[];for(var r=0;r<3;r++){var s=i.createTexture();if(!s)return;i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null);var o=i.createFramebuffer();if(!o)return;i.bindFramebuffer(i.FRAMEBUFFER,o),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),this.blurTextureList.push(s),this.blurBufferList.push(o)}},e.prototype.renderPreTextures=function(t,i,r){var s=this,o=this.gl,u=[0,1,0],m=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach(function(f,a){if(f){o.useProgram(f);var S=o.getUniformLocation(f,"uTexture");o.uniform1i(S,u[a]);var F=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,F),o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW);var ee=o.createBuffer();o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,ee),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),o.STATIC_DRAW);var ie=o.getAttribLocation(f,"aPosition");o.enableVertexAttribArray(ie),o.vertexAttribPointer(ie,3,o.FLOAT,!1,0,0);var ae=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,ae),o.bufferData(o.ARRAY_BUFFER,new Float32Array(r),o.STATIC_DRAW);var be=o.getAttribLocation(f,"aTexCoordinate");o.enableVertexAttribArray(be),o.vertexAttribPointer(be,2,o.FLOAT,!1,0,0),o.bindFramebuffer(o.FRAMEBUFFER,s.blurBufferList[a]),o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),o.activeTexture(o.TEXTURE0+m[a]),o.bindTexture(o.TEXTURE_2D,s.blurTextureList[a])}})},e.prototype.setConstUniforms=function(){var t=this.width,i=this.height,r=this.program;if(r){var s=this.gl;s.useProgram(r);var o=s.getUniformLocation(r,"widthOffset");s.uniform1f(o,1/t);var u=s.getUniformLocation(r,"heightOffset");s.uniform1f(u,1/i),this.uIntensity=s.getUniformLocation(r,"blurAlpha"),s.uniform1f(this.uIntensity,this.smoothIntensity);var m=s.getUniformLocation(r,"blurTexture");s.uniform1i(m,1);var f=s.getUniformLocation(r,"blurDiffTexture");s.uniform1i(f,2)}},e.prototype.resetResolution=function(t,i){this.width=t||this.width,this.height=i||this.height,this.blurXProgram&&this.setBorderBlurProgram(this.blurXProgram,1/(t||1),0),this.blurYProgram&&this.setBorderBlurProgram(this.blurYProgram,0,1/(i||1)),this.setConstUniforms(),this.initBlurBuffer()},e.prototype.setBorderBlurProgram=function(t,i,r){var s=this.gl;s.useProgram(t);var o=s.getUniformLocation(t,"texBlurWidthOffset");s.uniform1f(o,i);var u=s.getUniformLocation(t,"texBlurHeightOffset");s.uniform1f(u,r)},e.prototype.setDiffBlurProgram=function(t){var i=this.gl;i.useProgram(t);var r=i.getUniformLocation(t,"blurTexture");i.uniform1i(r,1)},e}(Au),t0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),i0=function(n){function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.width=i,s.height=r,s.type="LightShader",s.uLightIntensity=null,s.uRedIntensity=null,s.whitenIntensity=.5,s.rosyIntensity=.5,s.program=s.makeProgram(`cerpvfvba uvtuc sybng;
nggevohgr irp2 nGrkPbbeqvangr;
nggevohgr irp4 nCbfvgvba;
havsbez zng4 hCZIZngevk;
inelvat irp2 iGrkPbbeq;
ibvq znva() {
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    iGrkPbbeq = nGrkPbbeqvangr;
}`,`cerpvfvba uvtuc sybng;
inelvat irp2 iGrkPbbeq;
havsbez fnzcyre2Q hGrkgher;
havsbez sybng vagrafvgl;
havsbez sybng ebflVagrafvgl;
irp3 oevtugarffNaqPbagenfg(irp3 pbybe){
  sybng v = vagrafvgl * 1.0;
  sybng CV = 3.1415926;
  sybng O = 0.12 * v;
  sybng p = 0.1 * v;
  sybng x = gna((45. + 44. * p) / 180.0 * CV);
  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;
  erghea pbybe;
}
ibvq znva() {
  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);
  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);
  ty_SentPbybe = grkgherPbybe;
}`),s}return t0(e,n),e.prototype.setEffectConfig=function(t){isNaN(t.whitenIntensity)||(this.whitenIntensity=t.whitenIntensity/100),isNaN(t.rosyIntensity)||(this.rosyIntensity=t.rosyIntensity/100)},e.prototype.render=function(){var t=this.gl;t.uniform1f(this.uLightIntensity,this.whitenIntensity),t.uniform1f(this.uRedIntensity,this.rosyIntensity)},e.prototype.setConstUniforms=function(){var t=this.program;if(t){var i=this.gl;i.useProgram(t),this.uLightIntensity=i.getUniformLocation(t,"intensity"),i.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=i.getUniformLocation(t,"rosyIntensity"),i.uniform1f(this.uRedIntensity,this.rosyIntensity);var r=i.getUniformLocation(t,"uPMVMatrix");i.uniformMatrix4fv(r,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e}(Au),r0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),n0=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},o0=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},s0=function(n){function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.width=i,s.height=r,s.type="LowLightShader",s.uIntensity=null,s.lowlightEnhancement=!1,s.lutTex=null,s.lutImg=null,s.lutTexIdx=10,s.uLutTex=null,s.program=s.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng grkryJvqgu;
havsbez sybng grkryUrvtug;
inelvat irp2 grkgherPbbeqvangr[9];
inelvat irp2 grkgherPbbeqvangr2;
havsbez zng4 hCZIZngevk;
ibvq znva(){
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);
    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);
    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);
    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);
    
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;
    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;
    
    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;
    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;
    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;
    
    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;
    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;
    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;
}
`,`cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 grkgherPbbeqvangr[9];
inelvat uvtuc irp2 grkgherPbbeqvangr2;
havsbez fnzcyre2Q hGrkgher;
havsbez fnzcyre2Q vachgVzntrGrkgher2;
havsbez uvtuc zng3 zngLHIgbETO;
havsbez uvtuc zng3 zngETOgbLHI;
havsbez sybng hVagrafvgl;
pbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);
irp4 eto2lhi(irp4 vachgETO) {
    irp3 bhgchgLHI;
    bhgchgLHI = zngETOgbLHI * vachgETO.eto;
    bhgchgLHI -= pbzcIrp;
    erghea irp4(pynzc(bhgchgLHI,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgETO.n);
}
irp2 fnghengvba(irp2 bet, sybng snpgbe) {
    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,
                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);
    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));
}
irp4 lhi2eto(irp4 vachgLHI) {
    irp3 bhgchgETO;
    vachgLHI.eto += pbzcIrp;
    bhgchgETO = zngLHIgbETO * vachgLHI.eto;
    erghea irp4(pynzc(bhgchgETO,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgLHI.n);
}
ibvq znva(){
    irp4 lhi[9];
    sbe(vag v = 0; v < 9; v++){
        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));
    }
    sybng fzbbguL = 0.0;
    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;
    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;
    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;
    fzbbguL = fzbbguL / 16.0;
    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;
    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);
    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));
}
`),s}return r0(e,n),e.prototype.setEffectConfig=function(t){this.lowlightEnhancement=t.lowlightEnhancement===1},e.prototype.release=function(){this.gl.deleteTexture(this.lutTex)},e.prototype.render=function(){var t=this.gl;t.uniform1f(this.uIntensity,this.lowlightEnhancement?.6:0);var i=this,r=i.program,s=i.width,o=i.height,u=i.lutTex;if(r){var m=t.getUniformLocation(r,"texelWidth");t.uniform1f(m,1/s);var f=t.getUniformLocation(r,"texelHeight");t.uniform1f(f,1/o),t.activeTexture(t.TEXTURE0+this.lutTexIdx),t.bindTexture(t.TEXTURE_2D,u)}},e.prototype.setConstUniforms=function(){return n0(this,void 0,void 0,function(){var t,i,r,s,o,u,m,f,a,S,F=this;return o0(this,function(ee){switch(ee.label){case 0:return t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[1,1,1,0,-.344,1.772,1.402,-.714,0],r=[.298973,-.168721,.500019,.58706,-.331298,-.41873,.113967,.500019,-.081289],(s=this.program)?((o=this.gl).useProgram(s),this.uIntensity=o.getUniformLocation(s,"uIntensity"),u=o.getUniformLocation(s,"matYUVtoRGB"),o.uniformMatrix3fv(u,!1,i),m=o.getUniformLocation(s,"matRGBtoYUV"),o.uniformMatrix3fv(m,!1,r),f=o.getUniformLocation(s,"uPMVMatrix"),o.uniformMatrix4fv(f,!1,t),a=o.getUniformLocation(s,"inputImageTexture2"),S=this,[4,new Ge(function(ie){var ae=o.createTexture(),be=F.lutTexIdx,Te=F.lutImg;Te||(Te=new Image),Te.onload=function(){o.useProgram(s),F.lutImg=Te,o.activeTexture(o.TEXTURE0+be),o.bindTexture(o.TEXTURE_2D,ae),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,o.LUMINANCE,o.UNSIGNED_BYTE,Te),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.uniform1i(a,be),ae&&ie(ae)},Te.src=`
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAM3mlDQ1BJQ0MgUHJvZmlsZQAAWIWlVwdYU8kWnluS0BJ6lRI60gwoXUqkBpBeBFGJIZBACDEFAbEhiyu4dhHBsqKiKIsdgcWGBQtrB7sLuigo6+IqNixvEopYdt/7vnfzzb3/nXPOnDpnbgBQ5TAFAh4KAMjki4WBUfSEKQmJVNJdIAe0gTKwB8pMlkhAj4gIhSyAn8Vng2+uV+0AkT6v2UnX+pb+rxchhS1iwedxOHJTRKxMAJCJAJC6WQKhGAB5MzhvOlsskOIgiDUyYqJ8IU4CQE5pSFZ6GQWy+Wwhl0UNFDJzqYHMzEwm1dHekRohzErl8r5j9f97ZfIkI7rhUBJlRIfApz20vzCF6SfFrhDvZzH9o4fwk2xuXBjEPgCgJgLxpCiIgyGeKcmIpUNsC3FNqjAgFmIviG9yJEFSPAEATCuPExMPsSHEwfyZYeEQu0PMYYl8EyG2griSw2ZI8wRjhp3nihkxEEN92DNhVpSU3xoAfGIK289/cB5PzcgKkdpgAvFBUXa0/7DNeRzfsEFdeHs6MzgCYguIX7J5gVGD6xD0BOII6ZrwneDH54WFDvpFKGWLZP7Cd0K7mBMjzZkjAEQTsTAmatA2YkwqN4ABcQDEORxhUNSgv8SjAp6szmBMiO+FkqjYQR9JAWx+rHRNaV0sYAr9AwdjRWoCcQgTsEEWmAnvLMAHnYAKRIALsmUoDTBBJhxUaIEtHIGQiw+HEHKIQIaMQwi6RujDElIZAaRkgVTIyYNyw7NUkALlB+Wka2TBIX2Trtstm2MN6bOHw9dwO5DANw7ohXQORJNBh2wmB9qXCZ++cFYCaWkQj9YyKB8hs3XQBuqQ9T1DWrJktjBH5D7b5gvpfJAHZ0TDnuHaOA0fD4cHHop74jSZlBBy5AI72fxE2dyw1s+eS33rGdE6C9o62vvR8RqO4QkoJYbvPOghfyg+ImjNeyiTMST9lZ8r9CRWAkHpskjG9KoRK6gFwhlc1qXlff+StW+1232Rt/DRdSGrlJRv6gLqIlwlXCbcJ1wHVPj8g9BG6IboDuEu/N36blSyRmKQBkfWSAWwv8gNG3LyZFq+tfNzzgbX+WoFBBvhpMtWkVIz4eDKeEQj+ZNALIb3VJm03Ve5C/xab0t+kw6gti89fg5Qa1Qazn6Odhten3RNqSU/lb9CTyCYXpU/wBZ8pkrzwF4c9ioMFNjS9tJ6adtoNbQXtPufOWg3aH/S2mhbIOUptho7hB3BGrBGrBVQ4VsjdgJrkKEarAn+9v1Dhad9p8KlFcMaqmgpVTxUU6Nrf3Rk6aOiJeUfjnD6P9Tr6IqRZux/s2j0Ol92BPbnXUcxpThQSBRrihOFTkEoxvDnSPGByJRiQgmlaENqEMWS4kcZMxKP4VrnDWWY+8X+HrQ4AVKHK4Ev6y5MyCnlYA75+7WP1C+8lHrGHb2rEDLcVdxRPeF7vYj6xc6KhbJcMFsmL5Ltdr5MTvBF/YlkXQjOIFNlOfyObbgh7oAzYAcKB1ScjjvhPkN4sCsN9yVZpnBvSPXC/XBXaR/7oi+w/qv1o3cGm+hOtCT6Ey0/04l+xCBiAHw6SOeJ44jBELtJucTsHLH0kPfNEuQKuWkcMZUOv3LYVAafZW9LdaQ5wNNN+s00+CnwIlL2LYRotbIkwuzBOVx6IwAF+D2lAXThqWoKT2s7qNUFeMAz0x+ed+EgBuZ1OvSDA+0Wwsjmg4WgCJSAFWAtKAebwTZQDWrBfnAYNMEeewZcAJdBG7gDz5Mu8BT0gVdgAEEQEkJG1BFdxAgxR2wQR8QV8UL8kVAkCklAkpE0hI9IkHxkEVKCrELKkS1INbIPaUBOIOeQK8gtpBPpQf5G3qEYqoRqoAaoBToOdUXpaAgag05D09BZaB5aiC5Dy9BKtAatQ0+gF9A2tAN9ivZjAFPEtDBjzA5zxXyxcCwRS8WE2DysGCvFKrFa2ANasGtYB9aLvcWJuDpOxe1gFoPwWJyFz8Ln4UvxcnwnXoefwq/hnXgf/pFAJugTbAjuBAZhCiGNMJtQRCglVBEOEU7DDt1FeEUkErVgflxg3hKI6cQ5xKXEjcQ9xOPEK8SHxH4SiaRLsiF5ksJJTJKYVERaT6ohHSNdJXWR3sgpyhnJOcoFyCXK8eUK5Erldskdlbsq91huQF5F3lzeXT5cPkU+V365/Db5RvlL8l3yAwqqCpYKngoxCukKCxXKFGoVTivcVXihqKhoouimGKnIVVygWKa4V/GsYqfiWyU1JWslX6UkJYnSMqUdSseVbim9IJPJFmQfciJZTF5GriafJN8nv6GoU+wpDEoKZT6lglJHuUp5piyvbK5MV56unKdcqnxA+ZJyr4q8ioWKrwpTZZ5KhUqDyg2VflV1VQfVcNVM1aWqu1TPqXarkdQs1PzVUtQK1baqnVR7qI6pm6r7qrPUF6lvUz+t3qVB1LDUYGika5Ro/KJxUaNPU01zgmacZo5mheYRzQ4tTMtCi6HF01qutV+rXeudtoE2XZutvUS7Vvuq9mudMTo+OmydYp09Om0673Spuv66GbordQ/r3tPD9az1IvVm623SO63XO0ZjjMcY1pjiMfvH3NZH9a31o/Tn6G/Vb9XvNzA0CDQQGKw3OGnQa6hl6GOYbrjG8Khhj5G6kZcR12iN0TGjJ1RNKp3Ko5ZRT1H7jPWNg4wlxluMLxoPmFiaxJoUmOwxuWeqYOpqmmq6xrTZtM/MyGyyWb7ZbrPb5vLmruYc83XmLeavLSwt4i0WWxy26LbUsWRY5lnutrxrRbbytpplVWl1fSxxrOvYjLEbx162Rq2drDnWFdaXbFAbZxuuzUabK7YEWzdbvm2l7Q07JTu6XbbdbrtOey37UPsC+8P2z8aZjUsct3Jcy7iPNCcaD55udxzUHIIdChwaHf52tHZkOVY4Xh9PHh8wfv74+vHPJ9hMYE/YNOGmk7rTZKfFTs1OH5xdnIXOtc49LmYuyS4bXG64arhGuC51PetGcJvkNt+tye2tu7O72H2/+18edh4ZHrs8uidaTmRP3DbxoaeJJ9Nzi2eHF9Ur2etnrw5vY2+md6X3Ax9TnxSfKp/H9LH0dHoN/dkk2iThpEOTXvu6+871Pe6H+QX6Fftd9Ffzj/Uv978fYBKQFrA7oC/QKXBO4PEgQlBI0MqgGwwDBotRzegLdgmeG3wqRCkkOqQ85EGodagwtHEyOjl48urJd8PMw/hhh8NBOCN8dfi9CMuIWRG/RhIjIyIrIh9FOUTlR7VEq0fPiN4V/SpmUszymDuxVrGS2OY45bikuOq41/F+8aviO6aMmzJ3yoUEvQRuQn0iKTEusSqxf6r/1LVTu5KckoqS2qdZTsuZdm663nTe9CMzlGcwZxxIJiTHJ+9Kfs8MZ1Yy+2cyZm6Y2cfyZa1jPU3xSVmT0sP2ZK9iP071TF2V2p3mmbY6rYfjzSnl9HJ9ueXc5+lB6ZvTX2eEZ+zI+MSL5+3JlMtMzmzgq/Ez+KeyDLNysq4IbARFgo5Z7rPWzuoThgirRIhomqherAH/YLZKrCQ/SDqzvbIrst/Mjpt9IEc1h5/TmmuduyT3cV5A3vY5+BzWnOZ84/yF+Z1z6XO3zEPmzZzXPN90fuH8rgWBC3YuVFiYsfC3AlrBqoKXi+IXNRYaFC4ofPhD4A+7iyhFwqIbiz0Wb/4R/5H748Ul45esX/KxOKX4fAmtpLTk/VLW0vM/OfxU9tOnZanLLi53Xr5pBXEFf0X7Su+VO1eprspb9XD15NV1a6hrite8XDtj7bnSCaWb1ymsk6zrKAstq19vtn7F+vflnPK2ikkVezbob1iy4fXGlI1XN/lsqt1ssLlk87ufuT/f3BK4pa7SorJ0K3Fr9tZH2+K2tWx33V5dpVdVUvVhB39Hx86onaeqXaqrd+nvWr4b3S3Z3VOTVHP5F79f6mvtarfs0dpTshfslex9si95X/v+kP3NB1wP1B40P7jhkPqh4jqkLreu7zDncEd9Qv2VhuCG5kaPxkO/2v+6o8m4qeKI5pHlRxWOFh79dCzvWP9xwfHeE2knHjbPaL5zcsrJ66ciT108HXL67JmAMydb6C3HznqebTrnfq7hvOv5wxecL9S1OrUe+s3pt0MXnS/WXXK5VH/Z7XLjlYlXjl71vnrimt+1M9cZ1y+0hbVdaY9tv3kj6UbHzZSb3bd4t57fzr49cGcB/Igvvqdyr/S+/v3K38f+vqfDueNIp19n64PoB3cesh4+/UP0x/uuwkfkR6WPjR5Xdzt2N/UE9Fx+MvVJ11PB04Heoj9V/9zwzOrZwb98/mrtm9LX9Vz4/NPfS1/ovtjxcsLL5v6I/vuvMl8NvC5+o/tm51vXty3v4t89Hpj9nvS+7MPYD40fQz7e/ZT56dN/AC1d8Bx8dIG+AAAAHGlET1QAAAACAAAAAAAAAIAAAAAoAAAAgAAAAIAAAB7VdMrVpAAAHqFJREFUeAHsnHmsnmWZxj9nnBlFUUFcx1FxQ0GsuCG77IsKLavKDrJoQYggIOBgpBQKjYBsEWgxhQoGaiUUSmgpDdghyBIEQpGwhqWhQKCEAoE231zXdd/P897Pu3zntD2HZDJ+f7SHAn/4y7Xdz0fs9f75+SeBfxL4f0zgHb13vvNfm59/WcXPO/7vfHrvfve73vWu/7DPv+fPv9nnna2fJrBBf7KKLEf7X++9D5/V38vPe96z2mqrvds+gJKoiE0m4z84IP3WCqn8w0GAVvDvjTSQ3ofWWuuDa665xhprfOAD73+/aBgO8BCRhERKqWEhmzqaFkLEVAIZxl+tIJeV/sd7n/jPj3/sox/9yIc/BBKOQiwE432r4yN5UCBOpEICtVAq/JiHyl872NgfRw2ln4fBZdA/slIQep9Ze+1PffK/PmEcPvqRRMJUQV1AGAYDVqlwOBC6pjKO+ydTacUiSAPZdBMSqUEMVvzv9db94jpf+PxngeHTzoGCIAjTxFofBAo6RCYJMEQjqcMipNJIzpKEJGilQy5ZPMNg4/9IEk7778Nk0dtgzFfWXw8U1vn85xIG6gHGIIhAIqKgMAgjScPEkd0i0whHck1TJYZG9km/ZAZdPwyfzbAQCVxv4w2/+fWvfXXMV7683pdA4QsJg+RAYxQgmBOMiiALuaSE0YZDLWNMZBr9EvQRf0xA/PcuHOWfrzAc/xd6W26+6cYbbfjNbxDC+hUFqQGuYDxIEBmEzFGRoEPcIsZCMCppsGXt42Gaf0sSsbIxLJFD7ecalu58KcHwrwbB6e24/TZbbbHZJgZhgzGksC61YGJANiAcIIfAQdaQNxATToKiKFBEGAWNhCPGhzGpgHi0DsmkKqFAp/m/f+Cf9Hbd5Xs7br/tVt/ZfNNNNv42lbDBV8eMgRRAwSyBaBAGycE5yBkJBCRBEhFFGwtTRogNjo5uHMEzJFP5Bj/VtNH4y4Aj/9hFofejvXYftzMZbL3lFptturEgMBRkiHW/pGBAMlQYaAtxYFIyIgwEJFEjIVUIRbaIVYkHaMxQwahwNOUhkQSNlESGZgJImUXxQ++g/ff54Z67jd35ezttv+02EALdQCV8XVJgLBgFWAIBmdUAW1Qc6iDqJAKKyEJd0k0jq6Nsl5whaYokLIVIhqETE05v/GEHH7Dvj/baY1cy2GG7bbbacgu6oYAQKEgMhmHtTzMdmhxcES6Jwh7WIJYWVXSmkZG6tehX10ZQRyePOpG6Slqt0zv2qPGHH3IgZLDX7onB1ltCCHADIHyLSmAqQApZCxJDUoMwSA7mCxjDBRFAUBJ1ElEWhS48P21oEEYZonW3DODRINJAstpqvZNPOPaoI35yKGSw9w/23H3cLtLBtltv9R0JQRCSH5yCxeM6X6AnMoYODoyIBIKSqEikzPRd4SUSKlW6SC4ZgkZwy0AeTSLv6U38NRAcfeRPDv3xgfvtAyvsNm6X78MLDAQJYRNTgkGgFEwLTqGJIdnC9eCCaIBoJ2GqSBap6aIFRqs2CrcMweO97+2dPek0IPjF0Uf+9LBDDoIMfpgY7Lj9dttICJshErISFI2QAmJhvXU9Hp1CVAMwWDwEDnRGAUKSCCSiKGoo6iwqGKldO5xCw/gQa59jvYt+99szJpwCBD//2fjDDz2YMoAVdpUOwABm2DK7AZkAJbAfIIVIgcMpi8EjEguKKVlyoCCaIAaSSCisUBseyc0aI3QAjRLH6qv3pl1y4bmTMwI44aD9KQMwGEsv7LjDdttug1TcArEoIQhCikYaImshU1A0AAP3U8LQwaFUhIEwTWhb5XXFpMCHexMfULCP5UT8lRj8w/j0D3XQ8eldfcXUi88/56zTTz3lJKjgqCPghIMPgAxohcQAgWBCqEFIUlAsmCNEQWIoMVRywHzwIaUjwwRRAzEkiYRiEItgk+CTeqf0Zv35ymlTLjrv7DMnEsFxxxx15E/phP33pRWcwXd33CGbYbNNKyWYH9iSY2SIlAsc0bSEegLRkNVADG6LBofsjKo2dI7n7nBNFElRqWKgLnKzShxJF/q9N2/2X66eftklF/7ut5MmnvrfJ/3yuGOOPnI8nXDAfmaF3cbRC8YgCgG5SDskCEoFGsIp6JTowOByoC0KDjkhJIgWEIU76v7IDqlk0chOuSV5RL/3bp9/06wZV14+9ffnnzt50mm/MQQ/G/8TOOHA/c0KuzuDnRiKxsAjwSAgGREKNpgghUyBJWGWSJ4o1JDk0M5BgmiCcHM4iQ5RVCiGYrHGGr2//+22uTdABH+49KLzzjnrDENw7NE/OwJOMBn86Ad77YFakA4QihnC5pspEgIErUYzREkhJQM8gWhwDJaRSknaoslBgugC0U6i7o+AooNF75H771ow78brZlx1+VT44OyMgHl4+KEmg71/qDgYN3ZneCEwUDcwEgoIlEJBQfEYxDAkhtIXxsFAtEiig0QTRQ7OEBdrrtl75tEH7759/pzrZ179x2lTfn/Bub898/QJNMLxx/78KITBYYdABkxENCMisWRg1cCCDBAUCgGCayFRiGJoqqGwhTikJeWV4aUxAERyR7JHC4mA4oO9l559bOG9d9x282yI4IrLLr3ofCH4NRGgFY8cTycoDfaGFfbcvWRgiUAh1CFwLwUK61s6lhSsJ0iBpqiqwlyRbVHnEJxhy7JIy9wcfnf4EcYXmzYUa/XefHnREw/dd+eCW26SCKZefOF550yeNHGCIThGYYBAdBkwDgIDDwSORcai3CA7qB4KCApHdQQoKB49H5sYUjhkOSge2jm4M9oUwSdt++gWTfdoDUWv/+aS5558+P67b7917uxrZ1w1/Q/wAaIAnVghgBMQiCiFffeWFchgF+ZBCgRVA4SQIGzEitzwW6oHKCFLoU4BwZBrgqshqiFjGIJDEREOIh+g0AM/3SQ+1Ov333pl8VOPPHjPHbfNu3HWzKuvvPyyS+ADpGGFgGHAQJQMZAXqYCwZpFCkGVwIyQ0JAkvS/eDZiFgIWqgouBi6McgWQQ8hIPh0nQ4NP7rCJW4cWkh8GAD6y159/ulHF/4dNphzw7Uz/jR92hT4AFFwxmmuAuYhOoGBeCD2ERIRcWDVuPP3vRjUjkhFc0MHhCiFJoXSE+0YJIdhcCitUVdEReIjBNBftvSFZx5/6L67br/1ZokAYfj7CxAFhuDkE084DgiwDOgEymC/fWCFFAe77OzlqEAwISQ3qBwKJUQpwBCqCGxH5gKCoRQDPVFgKF1hGLr04IKogWiSEID+8qUvPvvEw/ffc8df591EEfxx2tRLLkIUTD7zdKrAECAP5QSXQbYCJpIz0EqCGYIQvCEzhOwH3wpcjpmCxSMpBDEMwBDkEDkUxhgKhAHoL3/tpUVPPvLgvXcumD939qyZ11x5xR+mXMwomDypQoBKYC0mGWQrsBacgVYS9nISggqyhMDzAaFQSCGFIw+JJgVGQ4GBjVmpIbSmzUk7MKqTExMiJUSaESksP/YxB9Dvv/7yc08hCO66/bZ5N11PEVwOHzAKzgKC35wiFfzimKMZBnACAvFA7iNZAXEgBiqGncgAgRCEwJXgDSklsB4AwaMRUlA2mhQQjoFCmxiyKYQhcOClqVvTZ3UrhySIZI2PZwD915csfvqxh+6/+46/3jJn9nUzr7lqOnzAKACCiRMyAoYBnIBAVBq0MWA5IhAKIaggGQkbbwQI1pEJAqKxNESg4MGQLJHF0InBbBHzwQZE6YtKERWA/htLnn/m8X88cO/fFiALJQLzwe/OQSEkBMf/4hggMCeYDDwR99wj6gAMGAhioETQUqIQ6hCSH1QQJoWGFkgh5KOeGuSJ4WGwfHAOdRABQP/NV15AFD4oG8y5wURw2aUXX3g+0zAgOPbnCAM4AdOgLoPKCxwIwQzej+YGh+DJWPnBpDAEhUIMNQx1VxRyaOcQAfTffPXFRU8+uvA+2GD+XIjgz1cjDOEDREFAgCMBCBAGdAJ7EWmAcZDjIOcBGAQzZCEMgpBmo0MoteDxGIPBxFBh0FHRwFBw4CsMPnyY46cA0H9r6UvPPYUguOdv/3MrCpEiQBhOQSUqDZMKfnn8ccciDxEG7IQgA19Iu7UxUCpSCHRDE4KSMfghZ6MXZcqFtBiGiSGEpGMo4uGTnywBiMDTDAK0wS1zb5xFEUyfBh9cdD6igIVgcSgEFgYeiEEGXIm77cpuRC9wKFZm8I2QGeRMqOrBotGkUFHAWrDpqI5op1AmpJ2YpoaIoeTwqRqA/rLXXl78zOMIgrvvWDD/ZongT380HzQQIA8ZBnICZRAY7FljkALB67EmhJgJUEIKhToEGqKNwkAxBFMUGBKHOgAQWPL8s088spA2uG3enNkUwVXTkw/OnkwVnMpSPOmXJxxHBAwDTYMKgcdBqQMxUDNwJ/F0KtzQhNAuhUSBlsBqkhZSS+QB2YgGw9Aih7UbAPrLX1/yAqLwoQfuvfP2v5oIMIuumDYVPkAUMA0jAuYhw4CBWMhAB1OdgUIx12NmECIBOyENBSihgFAZIlLIGLwrAwV5IiRkG4YmgP7yN155cdFTj/1DNri1EoH6AD4oEaASmId1J1gr6GiMeVAFAs1QE0KeCRlCSkZO58oQoSLoiEY8yhK5LQer4TMtAPr9N1598bmnH3944X20AbIQdTDjTwzDKahERQFmQTYCETAPmzKQFRiJmYG9IDAU62ao52KEMEAKrVposYSJoamGz7YCwCB4afEzTzzy0P1mAyUBGhFhKB+wECoEJ55wPFoxhUHlBBsHakZjME69IAYeCDRDIQQvSC+HvJstGd0PTSl0U2gVQ8TwuXYA/TeXvvz8s08++o8H2Aa3QgTXQwRoxMsdwblnoxOzCohAeZidkNNAVmAcsBYwD8aNtcORz2k5EDIDj0VFQjcEuyU5G5kK0RCFI3JX1ilENXy+A0D/rddAgEFAGzALWQfXMAzNB0zDiADDQPuw5gTbiLQC46BgoCdFM0NNCO4GRYLKoVBC5QeXQshGSaFJQZbowNAFAARQBk8hCGiDBchCEwEakSJQFKgTJ06wUjxRCMow8GLUTqYVhsfAu0FuKCFYPVR+cCn4CZGksEIU1ukE0F/2+iuIQgTBA3+/i1mIVSQRVD5AFEw+c9LphuBXJ53IYaAwKGWgfUQrtDPwYuAjAgKhxQ0DIJSpEA2RY0EdkavStBDF0A1ABBCFj7IPOQmyCNwHXAUNBKoEq0WfBiYDJiLvpVYdWCCwGYIZJAS5IUVCtkOhhAChHgstFKrhZBS+OAAABgHK4NknH3sYQXCXsrAQASuRCFAIUQVeCUkFPo8oA1rB40C1UGUin9ftZMgMfCMoFuGGARA8FMJWKKQwmMKXBgEgAUahgoA2mH/znNnXX/eXGVejEaddxkrEKmAhVAhOhhGYhzaO8jSQDJiIbgWrhdwLOpoKBl6PvpghhBQJKIe6EjwUBkmhk8K6AwH0WYcvLHr6cQYBbXDrPKyiWdfOvAazSH2AdaxtSASnKQ5/lRFwI6d1pJWsaylaIepAr6rOIJhBQijcgEioQ8ALW4CQpNAwRBuF9YYAAAJLXkAUIghkA2ShRIBGtDCEDy44j/MYnZgR4E6SCjICOxSiDEIcBB3weu4UQnBDN4SaHzKEXBE1Cl8eCgDr8MXnnkEQoA/v5iRwEVQ+8CgoEWgbpUpwJ2QZZCukSNRU5kaiDgoGnoqFECwSBkOgH7qlUFFYf0gAIPDKi4sRBG4D7EKsIiSBiYC7iFHghYBxOOHUX5/y3786Ga3oKshO0EqmDDwRrRl9HnQxiPWoRIAQLBKQi3UIXg9dfijDURS+MjQA1uFLz2MTPWI2QBaiEJkEEgF2EU4kRgHSELOgQFA6wXqRKxlp4ImodaBI9JOppoM8FZWKSQgGQd3gDKpgDBDoh1YpVIYYMwwAIIAyWMQgkA2QhbfMzSKwPrAoUCEYAjyZSAURgTmBvegyMCsoDjoZ5HasdhKEkGKxcEMJwZOxAaEWC8MB0F/2BsrAgoBtcMcCFmISAcPwsilcx0pDdCLGYWoEzsOch9YJCsRKBtYKvpD8XLCbyfMgh6LMkITQ5YYmhOiHIhVkiK8OCwAGwVJFIYOAbaAsTCLAKJAPPApQCB0IPAzohLoMqjhoMsihqHasC6ElEhyCvyhQCYTQLoUNhgegv/xNlAGjEH3INsB5hEJ0EdgomHqpogBpSAQYhw0VHGO1KCcwECEDvqRqI2ok6mjU5cxqzDrIxeCBAAZBCNENVS4OASFL4WvDBIBJ9BqjEEGAPnQbzEtJgGVY+QBpiAuhDUG6lLSO6ARLg8QAt4LHQZ1BLkcPhGQGXU6WCIUQymBsU0KOxq8PGwDrkASwCGQDTIJKBJhFCEP2AXyAKGAhcBkVKshhoIHIZ9RKBihGJaKswMcDXc5BByWDwgyohmFBYD00/PCN4QPov4UyYBQiCB68TzZAIboI0IgIQ94HtgqwDRsIqjxUGNAJTRm4FfSAwjjIDPJIUijKDEEIsR+LlcDVHOzQgPDNFQCgOnzhOQUBbHDPncjCLALMIoUh+sCiQAgwC0wFaRuZCiwM6AQPREsDyUCt4OuAVhiSQUrFuhCqhqxOBz4t6dU9K+FbKwKAdcgoVBCwDSwLTQSYRQpD+ECVyG3IO7EVgW1k1qI7IaSBWyHEQZOBikGBkMyAVEQi1CFgKnkudkHYcIUAGAEFgdkAj2W0geoA21hhCB9YFDAN1YktKrA8ZBi4E3Ip5FYIcRB0kIdiwaA0gydClYsDIHx7xQCwDhmFDAL0YWUDbYKZMxSG2EWqRKWhCqFFBXo8Uy26E0IplFawSGwyUDkWgWD1WBdCFQksh7oSNlpBAEYAUchFsNBtoCzkJpAI+FJgPuCNZIXQYgTbh0TgTrB5pDRQMWYrcCWyFoZgADM0hYCR4ELwSKhD2HhFAeA/LGUZYBNhEaAP78Uy9izEiYgDiWGoPoAPeCPxsYCzoKGCKg/dCdaLKQ2CFRiJQzFIgQAGLUIYAGHFAYjAi4u5CBAEsAGzMIiAYchx7JUIBEzDFgR2JTAPWYsWiE0Z6BUtIKjrQAMhBUJqx4JBNRLcDYyEpIRNVgIACKAMPAgWPuAEVIgSARtRPrBKvJCXcisCGwbMQ3eCBWJKAz0c5IEUGOxRdaMysc7AzFBAwP1YuiFDWBkAKoOXnlcQRBtwFd0wC08lEoH5AJVoUeAITp+odei7QAhSHkYnpFLQ4wnfk/moPgwGKRTrDKp+DG4QhJUCAAIoA26iJzCMgw1wH7kIuAyTDywKpAKLAp5JhkDnsvKQ46h0gtIgy6CbgR9N0EEqBgRCNEOxEVwIdANzcfOVA9BfhjpkFDII0Aa0gbIwicDDEH1AH/BAYCGETkwI+HR2wvFE4GFg0yAFot5OKINohSIStZXFQGO5ZNAhhAhhJQGwDl99WVFofag2YBYGESgMVYlYx0IQo6BAwErwMDAn2KHgB6O/odWskKuxySCEYsWgEkJYSt9ZWQAg8PqrikIsgsoGPA48CSQC94EqsZGGbQiiE1plULOCz4NWBggEM0MFwQazJwKFsOVKA+AgWLpEUfgEbIAgsElg03j29ZxFCEOMAvqAV2KZhtrHjkCvh2xF5qHVYnKCetHTIFlhGAxSMbQwKIWw1SoA6L/1xlJFoQcBRxEnQSEChCFGgfmAz4aKgjALWhDkMEjTQL3INKgnYqgFzYNCB10MqnqkELZeFQCsQ0bhoqefDDbALtR95CKwUcBdpEO5C4HekEMehk6QE0IaWCIGGfhKbGUQQxHNUJnBhbDNKgFQHTIKeRooCFIW3nLzHNsEM3EjIgzNBykKWAgNFUQEpRMUiEEGLVYYggFCsW4GF8K2qwaAdYgy4CZiEOA6uvduLmNkIY/kIILgg9SJrQjYil4JKQzkhAEyyAtJtVDoIA1F6KDOwI+G7VYRgJUBohCLABeyjyJMgtvmJxFcOzOFofsAaZijIJ8IlgVUgSOwZZCcoMcjPSLyMZlpUJOBx4FXI55QUh50MXAzbL+qAPrLVQbaRMEGysIsAjQiwxDjWFHAPsgIzkqHohDo+yQg8EqwM0EXsx6PiIBp4Ecz0oADKceBLyRVY8kgjSTXQdWOO6wyABFAGTAIkg14ICoLlQS8kiUCjgKfhgWCM/1Wzgg4D20fhjBwJ3gvNmTgx8JABraWCzPsuOoAMAhYBopCEdBtgFcCFmIlghSGfDrmOi4RTLLnggEIdCfUZNCwgseBIrFdB3UGO40EAJaBopBBoDbwScBCTCLALGIjZh8MA4HlYQgDrSM+JbfJIFtBcTBcBt8dEQAqA65CI6A2sPOIWTj3JtbBdX9RI+pIVBRkArkTSxVwHpYI9HymZ1QiSGlQyMDjoIrEoXTwvZEBAAK4DGIQ4KUIj2UsxFIECkNEQc0HaRbkgcxrOSJIYZCdkHsxp0EeSDEOUjU2MtG98P0RAsA65C72KOQosklghViJgOdBuw98FtQRlHmoWvT3sw4ZuBUUB4rEgQx2HikAVgbcRB4EHEX33JWyMCcBG1EXkldiNgK3ob0cDkCgWsxO8IVovQgnhHEQrYA46Gawy4gBAAGVgRPgLJQNuAtDErARLQxDJYZZoGUUEfg2UisqDzUQgxNa0sDHgaxQRCJmor5mwnfveEPBRho7duQAsA5fi0GQbJALEdcBr2QPw3ofpDvRxiG/UmQpIguAoMxDPaJyHeVpkAMxJKKsUMVBqoUag3EjCUB1mKJQffjAfXgsy1noSSAR2IVU94EXgsZhJwLlod7SiYDToJEGeSfLCikO2hjsOqIAqjLIfeg2QBZqFWUReBjKB8UwsjtxAAI9nnkY5JFcIMgykBUKBooDVGPWwW4jC4AEuAotCHAfBhuoECkCvJzztYhhGPug2obqxIiAT8jJCI0wGEoGlRUQB6kWMoPdRxiA1aEI6DRAH9IGfCpSIWIaVyKwC6kQQTqS1Ik8EdwIQGDDILWi52GXE8pxUDVjikTUgjMYaQAsgyoKEQRqA74SKAuxirIIrBEhggLBBedbGg5GoPfDHAYxEItS8GJsWsGqkQxGHEAkwNMAfchR5FmIQkwi4DZ2HxiBEAX2ZMRZ0KkCRxDCoBGILgNPxGSFEInUwcgDyAQUBLgPow10IQYR2JkcRZCiQIXQjUBXgudhqMXcCfVi1E5ODPbmt2yIA+pgFADg/5YnRyGDAPchR5FsoOMA95ElgR4KPAyjD2wYZQS8lWtZkIaBXtL5lM4wMCdkBnw6ye9HkkFhBWcwKgAyAZ4GNRtYIZoI8FSSfYAkiKvA0lCdyGXUgcAroRYGGUGXDFIzksHoADACtokQBOpDbwNkIQpRIrgRwzA2oosgPZfYqxk7sQVB1Yo5DEonhHnkMlAiFlZAHOw9SgByECzmcRRtoF3IVdQUQYgCv5FUCG0I0jBQK+rLVX672uqEUgaFFTCU9xktAIkANxGCQH2oNtAkQBYWIvA3QxAIUWCPZiyEtIyiERoIwjIIYZAnYpsMYIV9Rw2AEdAqTEHgowiTwC5EPpdhGNqBlJahCKTnEqWhOpGzwLKA/4XFhFPTnaR3dK8EfsFc1WKxEF0GVTEmK+w3egD6y70M+EpCG6AP1QaaBHwy5SoCAkuCPAryLrKXU6UhC2EIBDkPW53g80gy0KmQrLD/KAJIdYh3IgSB+tBHEWzALOQqSiIoGjH7wKJAaegPJgNUoK+UTAVFGNRLQTJIiXjAqAJQGfCJIAUBryO0ASYBspCFOEAE9nXqxTaMmIYVgjPwYjLxNPyHNjKCjgQNAyKoL4PghDYZHDi6APrL7DJAFCoIog1wHqkQgwjyKEh9YOtYaTgMBLkSWmQwPj0bxDSADA4aZQBVFHoQ8DpCG+BA9CxMIuDLeTWLQh8oCnIaohB8H7epoBtBPhRqMjh4tAGIAJ8IEIUMAl5H0QYqxE4R2HeJlygKmIapE+1KqiHQNjoJ3yU087Dei5UMfjzqAECAlwFXIRcBZ6HaAAdiykKtIjViEAEfS0IlKgqYhj4LhkKQxlGtEzwQKxkcMvoArAwsClMQRBuoEGMdhCRIlah1zChwBOzEOgK9mejbFFOB5WFtILoTfB7xWno7ALAM8EiCd6IqCGADHIiYBMpCm8bVLCpGgfkgR4GpYKUQZCfoUJAMDntbAIAAnolqQYBR5DawQmwVgfvAKpFRwDT0QhikgqIVXQX5Yo4yOPztAZCiMAaB2cAnga8iDkNu46IP3AeqREaBp6GNw6YRdCTwqwQ6wYeBNnJeRz4NTAZvEwASsCjkIrD7kG3gNtBxgPuIz2UFAXs5Tk8FjIISATtR72ZVI/iXKQlBZlBdi+4EBeJP3y4AVgaIwhQE6kO3ASdBWkV1BHg7jz5gFHgaeieuKILSCePfNgB2G3kUahGoDzmKaAM7DhoiSM+m00MlehRUnZgOxVIFvpAblVA64Yj/BQAA//8grTFYAAAMPUlEQVTlm+eOVdcShP3CDAjDAIYBRLZBZGyBSQIHrOsoRzleXSfZBJFEEthYDCCSfEGEEUHH3dVh9Vp7nwH5x5wd5g2m1PVVda99XhrM3N/Tx48e3r/3/zu3b964dvXKX3/+cenC+XNnTp86cfzY0cO///brLz//+L///vD9d99+8/VXX37x+WeffvLxRx9+8P5/3nvv0LvvvP3WwYMH9u/bu3fP7jff3LXzjTde37F9+7atW7ds3rxp48YN69e/9uqr69atXbNm9epVK1euWLF8+bJlS5dOLFmyePErryxatHDhggXj4/Pnz5837+WX586dM2f27NljY7NmzXpp5v7/weDp4ylW4O/bt25cvzr51+U/Ll08f+7s6VMnTxw7euTw76TATyxBVEAlOPQuJDjAEuwhCXaRBK9PI8GqJMGES6AaiATQYGxsbEYFGDx9MvXwwb27qsCVy39eunjh3Nkzp0/SEJACNARQoDIENAU8BDQFB/azBLtJgp0iwbZtW7ds2bypMgWZBK6BjAFLYGMwswIMnj2ZesQK3Ll18/q1SbbBxWSDI7BBPgTJB4eSD4IEO3Zsdwk25EaYXgJ1wpwZFoAUePzowf27DoLSBr/9KjYohgAoiD4IKPh3EigM5s60AINnjkIFQbSBspCHwBQIMCx8oCggGk4nwUrDYcZDABFOmHEBWIGEQrLBZbfBSUqDwEKTQOJA8kB8wCjYpz4oaLhpY8UIdRI4D+fNvAASBg4Cz0OkwXFWgAPxpx89EFMiciQSCWIkJhpaJkKC10IoSioiFHUKYiyOQgAOA0GhNgIGgacBSSAKFJ0gKwWcB6EVVDJxw/qqBFwMJiYyJ4yPj49EAAkDRSE1gmgDqQR5K0q1SGCIPLBITMUIKLBmNEwC0iCWowWjEQBh4J1I8pBrodjAemHZCbQZ5j5IKAg0RDl8IQkWjkgADwNpBAQCtwGaMUgQAjF141COgw+8G4ZAYBzWGyFMwaJRCSBhoCik1YCKMechdgPqhYmFGQm0FgGG0QfaCgwFWTms4FCWBOPhyATwMEAnUhDABmdoN0Ag5iz0IZD1IMsD8oGgwCSgJSn14+kkWDxCASQMgELqRAoCSYNkA92PvBPojpiWRPVBgQJk4otIsGSUAiAMFIW0GjAIog10PUok8C1ZEpFhaD7QSBQUGA0RCLolDZuCiZEKkMKAliMFAbajs26DtB/ZEGg3BgyjD9KtAMeClIlaDuslWDpaAQIKqRMxCPhMwkcCupNoM85IYEMgiejHEvKBtuOAgheSYNmIBXAFCIUKAuShpQGWg0wCZqEMAWCIUqCnAlkQggR0MkIg8LkAK0J1CpaPWgAKA+7FhEK6kjAIOA/VBriTVAJRh0AS0WFI+4FWQzmX4GiGk5FKQGczPheUEqwYvQCqAF3KFARcjN0GfipiFqZOIAsSYGilQFckQUGgoQaClsNSgpUNEMBQSHciA8FzbBCHwGFY6wMEwnQSrGqCAKIAtUIFQcpDZqGUIk+DYkv2IdA9WbbEvBgpDbUW5EZY3QgBFIUFCKINShLo5Ry1yGGYTgXBB+iGwyVY0wwBoICjkBuB5KHvBlka2BDIloxEZBhyKRAfyO24SkNvRjYFa9eubYgApADCgFHIIOBirLUQlUCvBDEQyyGwUiB5ECIxBkJFgnVNEUDikHoxo5AbAUCAtyNRQO6FroA+IKUhYBhqOfY8CChQGnot8FBsjgAZCtEIJA+rNvDtQIYAtYhhONQHeEUZIkGDBGAF6OFIUSgg0Dx87hBwLWIYqg8IBdyL4ANDgdLQM5G3JGJBkwSwMNBOpCCot4Gdy6pDkHxgEtCtAMUoDwR5TtvQKAEsDBIIUIxxKbJz4ZHDdjenXigkkFNJGIJqHmBBUBp6JkKCZgkgYcAo5E4kIMB+yAdTXhCzVqSP6RgCdGNORIVhXSQqCnRD4JsRSdAwATgM6CsCboW8HMmGzLtBqUARBxgCrkUBhtKLzAdAQU5DSNA4ATQMGIW8HHke8sH0+UMQfMCfVVgvslagKPBAIAmaJ4CFAToRGgEeTgQEuQ30YBhIEIaAYBgk4M8K9HKqXxbswLVgawMFyFGoIEhHAgWBvyHqkuwkCEMgR0OLxCgBfWHDj8p0MGmiAAUKEwjqbKCtCBdDuxYpDFMpKFqB05AkaKQAqgBQqCAIeRhsYEuyXEp4CNCNEwwrPkA7xmdWfDqlKWimABYGQCGWI94Ps+3oeFoOhgyBNsPgA9sSvRiRBE0VIEdhAkGVhRqI+RAoDGMpqEMBTUFjBYACdCLQTmQbMn9JEPPQWCjVmEmAexktSApDWRJDHqQFgT+229lcASQM0AqtEaQzCRpB6oX6hSEuJUaCNARyLLFeBB84CnY1WIAMhQEE5RDYcpAPAXfjKgwLHxANmywAK8C9mD8u5dVAN2Q+mgcb2LVMWhEPAb405TigIUhrcupFaMfaCnY3WgCEAZ8IZD1EMc7yMK1HGojYj4wEaQjkUmB5gIc0RcGehgsQUCjLEe6leDkJQ3BUj8b5EIRaJOciKwXwgaJgb9MFyFA4BAS2I0sglkNQwNDyQH2wr/ECGAqlE8UNWUCQeqEcStCKjAQ6BDERCx/sb74ACYU4GAsIuBbWshCBWDMEAsNQCtQHB1ogABQQFOqVpAoCqwRg4ZAhkHMRSkHywcE2CCBhIK3QXg2wGugMoBUxCISFlSHIEhFDkHzwVjsEkDCQSxkaAX9IULGBrEcSiNyKAgmKREx58HZLBNAwSJ2oqkB2KEEg8n6knYCGgN9PQAIrBfDBO20RwMMgLUdxBvxcKL0QgVgdApOA35DwmEpXw9YIkKFQnw/FBTENpBIgEOMQ6ILk6wGGAD441B4BRIGEwpo81GYMFj5/CCQPWiSAhsFQFJoNAgs5EJUE1SEQH7RKgITCSidKC6JUAhxKOBADCfhUEnZE8UG7BIgo1A25yENtxmCht6I0BN6NrRl+0DIBShSWIFAbJBZaK9JOIHfjAMMP2yaAolAvZXg+9BlwG0glcBbmJCh80DoBTIGyE4XtSGwAFnogpmKYD8HH7RNgYL2YD8YCgqwW6s04sZADcegQfNJGAaooDArouVAqgbOQW1HtEHzaSgGGotCPBLIggoUxELM4QCJ+1k4BHATRBWE3EBskFnIg1g/B5y0VwBWoBUG0gbNQW1ExBF+0VQDvxVUF7FaWXo8sEGuG4Mv2CkBD8HgKzyZZGPiZJNiAWciBWDMEX7VYgBoUVtIAlcBZqIEY4+DrNgswDQjUBtKMUQnYBjVD8E2rBRiqgNVC2ACVgFnIgVgOwbftFqBeAc/D8HTCNtAh4ED0O8F3LRegphfzp4XxVgYboBIEFnox/L71AmQozFYDqYXyhso2MBZqK5Ih+KH9AtTbYNKeDWADrwTVIeiAALUKDLFBYKGSoAsCVBXwQ1GwgVeCFIhMgk4IUCiQHs+0FlZsoIHIQ9ANASgM6HOiSjGupIGxMAxBVwSoU0DzsLAB90JlIS/JnRGgqoCBQGqh24ArgbKQq3F3BCgUcBCEUuTNWHshV+MOCRAUCIcizUNsRyhFnAZqA96PuiRAHQq1GCcbeDOW5eBwtwQIQyBXEvnV0eQV5CHe0dkGcQg6JkChgIFA8tBtwM1YWXi0awJEBfxUFvOQ04BtoJXgWOcEcAX4C2N9ORIQ1NrgePcEgAJZK1QQIA9LG5zooABlGCgIJA9RC4MNTnZSALcBu8AeUAUEnIcxDU51U4CggIFAinHFBqc7KoApgB9b8AzopxTIw2iDM10VoEShgKBqg7OdFSBHYSUPLQ3OdVgAswEVggwEmQ3Od1kAV8A6kYAAeWhpcKHTAqgC/oQcQMC1kG1wsdsC5CiMIOA85DS41HEBBs/CtTRuyAwC2KDrAoQw0OUogQA26L4AhkLrRAAB9kPYoAcC5CgUEKAYwwZ9ECBDYQAB5+GVXghACvjDkXQigICL8WQ/BEgo1E7kILjaFwFyFCYQXOuNAKKAvp8mEFzvjwARhQkEN3okQEChdCIGwc0+CZB6MVAIENzqlQAWBrIeAgS3eyZARCFAcKdvAgQUAgR/906AhEIBQf8EcBRiPbzbQwEyFN7rpQABhff7KUBC4YOeCuAofNhXAQyFj3orgKJwqscCCAj6LAAr8KTXAjAK+y0AobDnAgwG/wCbrnNMhT0MDgAAAABJRU5ErkJggg==`})]):[2];case 1:return S.lutTex=ee.sent(),[2]}})})},e}(Au),a0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),c0=function(n){function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.width=i,s.height=r,s.type="SharpnessShader",s.uIntensity=null,s.sharpenIntensity=.5,s.program=s.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng vzntrJvqguSnpgbe;
havsbez sybng vzntrUrvtugSnpgbe;
havsbez sybng funecarff; 
inelvat irp2 iGrkPbbeq;
inelvat irp2 yrsgGrkgherPbbeqvangr;
inelvat irp2 evtugGrkgherPbbeqvangr;
inelvat irp2 gbcGrkgherPbbeqvangr;
inelvat irp2 obggbzGrkgherPbbeqvangr;
inelvat sybng pragreZhygvcyvre;
inelvat sybng rqtrZhygvcyvre;
ibvq znva() {
  ty_Cbfvgvba = nCbfvgvba;
  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);
  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);
  iGrkPbbeq = nGrkPbbeqvangr.kl;
  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;
  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;
  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;
  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;
  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;
  rqtrZhygvcyvre = funecarff;
}
`,`
cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 iGrkPbbeq;
inelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;
inelvat uvtuc irp2 evtugGrkgherPbbeqvangr;
inelvat uvtuc irp2 gbcGrkgherPbbeqvangr;
inelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;
inelvat uvtuc sybng pragreZhygvcyvre;
inelvat uvtuc sybng rqtrZhygvcyvre;
havsbez fnzcyre2Q hGrkgher;
ibvq znva() {
  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;
  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;
  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);
}`),s}return a0(e,n),e.prototype.setEffectConfig=function(t){isNaN(t.sharpenIntensity)||(this.sharpenIntensity=t.sharpenIntensity/100)},e.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},e.prototype.resetResolution=function(t,i){this.width=t||this.width,this.height=i||this.height,this.setConstUniforms()},e.prototype.setConstUniforms=function(){var t=this.width,i=this.height,r=this.program;if(r){var s=this.gl;s.useProgram(r);var o=s.getUniformLocation(r,"imageWidthFactor");s.uniform1f(o,1/t);var u=s.getUniformLocation(r,"imageHeightFactor");s.uniform1f(u,1/i),this.uIntensity=s.getUniformLocation(r,"sharpness"),s.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},e}(Au),lp=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},dp=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},ao="zc.p.0.sbe.2",hp={errorCode:yc,extendedData:ba},u0=function(){function n(e,t){this.Oi=e,this.vcMgr=t,this.gl=null,this.shouldClear=!0,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5,lowlightEnhancement:0},this._originResolution={width:0,height:0},this._shaderList=[],this._frameBufferList=[],this.tn=[],this.en=null,this.isNoInput=!0,this.failedTimes=0,this.onRenderError=function(i){},this.enableBeauty=!1}return n.prototype.setEnableBeauty=function(e){this.enableBeauty=!!e},n.prototype.handleInitError=function(){this.failedTimes++,this.failedTimes>30&&(this.failedTimes=0,this.Oi.error(ao+" get webgl context failed"),this.onRenderError(hp))},n.prototype.init=function(e,t){return lp(this,void 0,void 0,function(){var i,r,s,o,u,m,f,a,S;return dp(this,function(F){switch(F.label){case 0:return this.vcMgr?(s=(i=this.vcMgr).gl,o=i.originWidth,u=i.originHeight,(r=i.canvasEl)&&s&&o&&u?(this._canvasEl=r,this.gl=s,this.initGL(e=e||o,t=t||u),this.en?[4,(m=new s0(this.gl,e,t)).setConstUniforms()]:(this.Oi.error(ao+" input texture not found"),this.handleInitError(),[2])):(this.handleInitError(),[2])):(this.handleInitError(),[2]);case 1:return F.sent(),(f=new e0(this.gl,e,t)).setConstUniforms(),(a=new i0(this.gl,e,t)).setConstUniforms(),(S=new c0(this.gl,e,t)).setConstUniforms(),this._shaderList=[m,f,a,S],this.setEffectConfig(this.effectConfig),[2]}})})},n.prototype.render=function(e){return lp(this,void 0,void 0,function(){var t,i,r,s,o=this;return dp(this,function(u){switch(u.label){case 0:return(t=this.gl)&&this._canvasEl&&!t.isContextLost()?[3,4]:this._canvasEl?(this.Oi.warn(ao+" gl lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight)]):[3,2];case 1:return u.sent(),[3,3];case 2:this.Oi.error(ao+" canvas lost"),this.onRenderError(hp),u.label=3;case 3:return[2];case 4:return(this._originResolution.height!==e.videoHeight||this._originResolution.width!==e.videoWidth)&&(Math.abs(this._originResolution.height-e.videoHeight)>2||Math.abs(this._originResolution.width-e.videoWidth)>2)?e.videoHeight===0||e.videoWidth===0?[2]:(this._canvasEl.width=e.videoWidth,this._canvasEl.height=e.videoHeight,e.setAttribute("width",e.videoWidth.toString()),e.setAttribute("height",e.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,5]:(this.Oi.info(ao+" resolution changed to ".concat(e.videoWidth,"x").concat(e.videoHeight,", reset resolution.")),this.resetResolution(e.videoWidth,e.videoHeight),this._shaderList.forEach(function(m){m.resetResolution(e.videoWidth,e.videoHeight)}),[3,7])):[3,7];case 5:return this.Oi.warn(ao+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(e.videoWidth,e.videoHeight)];case 6:u.sent(),u.label=7;case 7:return i=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],r=[0,1,2,0,2,3],s=[0,0,1,0,1,1,0,1],t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.en),this.isNoInput&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),this._shaderList.forEach(function(m,f){var a=m.program;if(a){m.renderPreTextures&&m.renderPreTextures(i,r,s),t.useProgram(a),m.render();var S=t.getUniformLocation(a,"uTexture"),F=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,F),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var ee=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,ee),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),t.STATIC_DRAW);var ie=t.getAttribLocation(a,"aPosition");t.enableVertexAttribArray(ie),t.vertexAttribPointer(ie,3,t.FLOAT,!1,0,0);var ae=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,ae),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW);var be=t.getAttribLocation(a,"aTexCoordinate");t.enableVertexAttribArray(be),t.vertexAttribPointer(be,2,t.FLOAT,!1,0,0);var Te=f===o._shaderList.length-1?null:o.tn[f];t.bindFramebuffer(t.FRAMEBUFFER,f===o._shaderList.length-1?null:o._frameBufferList[f]),o.shouldClear&&(t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.activeTexture(t.TEXTURE0),Te&&t.bindTexture(t.TEXTURE_2D,Te),t.uniform1i(S,0)}}),[2]}})})},n.prototype.setEffectConfig=function(e){var t=this;isNaN(e.sharpenIntensity)||(this.effectConfig.sharpenIntensity=e.sharpenIntensity),isNaN(e.whitenIntensity)||(this.effectConfig.whitenIntensity=e.whitenIntensity),isNaN(e.rosyIntensity)||(this.effectConfig.rosyIntensity=e.rosyIntensity),isNaN(e.smoothIntensity)||(this.effectConfig.smoothIntensity=e.smoothIntensity),isNaN(e.lowlightEnhancement)||(this.effectConfig.lowlightEnhancement=e.lowlightEnhancement),this._shaderList.forEach(function(i){i.setEffectConfig(t.effectConfig)})},n.prototype.release=function(){var e=this;this._shaderList.forEach(function(t){var i;t.program&&((i=e.gl)===null||i===void 0||i.deleteProgram(t.program))}),this.tn.forEach(function(t){var i;t&&((i=e.gl)===null||i===void 0||i.deleteTexture(t))}),this._frameBufferList.forEach(function(t){var i;t&&((i=e.gl)===null||i===void 0||i.deleteFramebuffer(t))}),this._shaderList.forEach(function(t){t.release()}),this._shaderList=[],this.tn=[],this._frameBufferList=[]},n.prototype.initGL=function(e,t){var i=this.gl;if(!i)return this.Oi.error(ao+" webgl context not found");this.isNoInput&&(this.en=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.en),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR));for(var r=0;4>r;r++){var s=i.createTexture();if(!s)return this.Oi.warn(ao+" create texture failed");i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null);var o=i.createFramebuffer();if(!o)return this.Oi.warn(ao+" create frame buffer failed");i.bindFramebuffer(i.FRAMEBUFFER,o),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),this.tn.push(s),this._frameBufferList.push(o)}i.viewport(0,0,e,t),this._originResolution.width=e,this._originResolution.height=t},n.prototype.setInputInfo=function(e,t){if(this.isNoInput=e,t){var i=t.texture;i&&(this.en=i)}},n.prototype.resetResolution=function(e,t){var i,r=this.gl;if(!r)return this.Oi.warn(ao+" can not find webgl context");for(var s=0;s<this.tn.length;s++)r.bindTexture(r.TEXTURE_2D,this.tn[s]),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null);(i=this.vcMgr)===null||i===void 0||i.resetResolution(e,t),this.onResolutionChange(),r.viewport(0,0,e,t),this._originResolution.width=e,this._originResolution.height=t},n.prototype.onResolutionChange=function(){},n}(),l0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),No=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},Lo=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},d0={errorCode:Ki,extendedData:qu},co="zc.p.0.sbe.1",h0=function(n){function e(t,i,r,s){var o=n.call(this)||this;return o.Oi=t,o.preview=r,o._i=s,o.kind="video",o._enabled=!1,o.effectTrack=null,o.lastRenderTime=0,o.renderCount=0,o.nn=0,o.stateFlag={base:!1,lowLight:!1},o.isStarting=!1,o.animationFrameId=0,o.fps=15,o.detector=new Xv(t),o.lastRenderTime=0,o.manager=new u0(t,o.vcMgr),o.manager.onRenderError=function(u){u.errorCode===1103072&&o.stopEffect(),o.onError(u)},o.manager.onResolutionChange=function(){},o.setVcMgrInfo(),o}return l0(e,n),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return{track:this._output||this.input||null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vcMgr",{get:function(){return this.preview.vcMgr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Qi",{get:function(){return this._i.browser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.manager.effectConfig||{}},enumerable:!1,configurable:!0}),e.prototype.setBeautyEffectOptions=function(t,i){return i===void 0&&(i={}),No(this,void 0,void 0,function(){return Lo(this,function(r){switch(r.label){case 0:return t&&this.manager.setEffectConfig(i),this.enabled===t?[3,5]:(this.manager.setEnableBeauty(t),this.enabled!==t&&this.Oi.info(co+" effect enabled "+t+"; options: "+JSON.stringify(i)),this.enabled=t,t?[4,this.startEffect()]:[3,2]);case 1:return r.sent(),[3,4];case 2:return[4,this.stopEffect()];case 3:r.sent(),r.label=4;case 4:r.label=5;case 5:return[2]}})})},e.prototype.startEffect=function(t){return t===void 0&&(t=!0),No(this,void 0,void 0,function(){var i,r=this;return Lo(this,function(s){switch(s.label){case 0:return this.isStarting=!0,this.Oi.info(co+" call start effect"),this.input?(i=this,[4,this.startWebGLProcessor().catch(function(o){throw r.stopEffect(),o})]):(this.Oi.error(co+" start effect failed, input track is null"),[2]);case 1:return i.effectTrack=s.sent(),this.startEffectTask(t),this.Oi.info(co+" start effect success"),[2]}})})},e.prototype.startEffectTask=function(t){var i,r=this;t===void 0&&(t=!0),this.enabled=!0,this.detector.startRecordBeautyEffectOutput(this.fps).then(function(s){!s.result&&r.onError&&r.onError(d0,{targetFPS:s.targetFPS,currentFPS:s.currentFPS})}),t&&((i=this.vcMgr)===null||i===void 0||i.setRenderTask(!0,"beauty")),this.isStarting=!1},e.prototype.stopEffect=function(t){var i,r;return t===void 0&&(t=!0),No(this,void 0,void 0,function(){var s=this;return Lo(this,function(o){return this.enabled=!1,this.Oi.info(co+" call stop effect"),t&&((i=this.vcMgr)===null||i===void 0||i.setRenderTask(!1,"beauty")),(r=this.vcMgr)===null||r===void 0||r.off("renderFrame"),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),this.renderCount=0,this.removeDomTimer===void 0&&(this.removeDomTimer=window.setTimeout(function(){s.enabled===!1&&s.destroy()},18e4)),[2]})})},e.prototype.destroy=function(){this.Oi.info(co+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},e.prototype.startWebGLProcessor=function(){var t;return No(this,void 0,void 0,function(){return Lo(this,function(i){switch(i.label){case 0:return this.Oi.info(co+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),[4,this.videoRendering()];case 1:return i.sent(),this.setVcMgrInfo(),[2,(t=this.vcMgr)===null||t===void 0?void 0:t.getCanvasTrack()]}})})},e.prototype.setInput=function(t,i){var r,s,o,u,m,f;return No(this,void 0,void 0,function(){var a,S,F=this;return Lo(this,function(ee){return this.Oi.info(co+" input call"),a=!1,t!=null&&t.track&&(S=!1,this.trackWidth===((r=this.vcMgr)===null||r===void 0?void 0:r.originWidth)&&this.trackHeight===((s=this.vcMgr)===null||s===void 0?void 0:s.originHeight)||(S=!0,this.Oi.info(co+" input track wh change")),!S&&this.input===(t==null?void 0:t.track)||this.Qi!=="safari"||(this.Oi.info(co+" input track change"),this.effectTrack=null,this.stopEffect(!1),a=!0),this.input=t==null?void 0:t.track,this.trackWidth=(o=this.vcMgr)===null||o===void 0?void 0:o.originWidth,this.trackHeight=(u=this.vcMgr)===null||u===void 0?void 0:u.originHeight),t&&(this.manager.setInputInfo(this.isFirstNode,t.frameInfo),(m=this.vcMgr)===null||m===void 0||m.off("renderFrame"),(f=this.vcMgr)===null||f===void 0||f.on("renderFrame",function(){F.renderOutput()}),a&&this.startEffect()),this.nn==1&&(this.setVcMgrInfo(),this.nn=0,this.startEffect()),[2]})})},e.prototype.renderOutput=function(){this.renderCount++,this.manager.render(this.videoEl),this.detector.addFrame(),this.renderCount>=3&&this.updateOutput(this.effectTrack)},e.prototype.setVcMgrInfo=function(){var t;if(this.vcMgr&&(!((t=this.vcMgr)===null||t===void 0)&&t.inited)){var i=this.vcMgr,r=i.canvasEl,s=i.videoEl,o=i.originWidth,u=i.originHeight;s&&(this.videoEl=s),r&&(this.canvasEl=r,this.manager.setInputInfo(this.isFirstNode),this.manager.init(o,u))}},e.prototype.videoRendering=function(){return No(this,void 0,void 0,function(){var t=this;return Lo(this,function(i){return[2,new Promise(function(r,s){var o;t.vcMgr&&!(!((o=t.vcMgr)===null||o===void 0)&&o.inited)?(t.vcMgr.onInited=function(){r()},t.vcMgr.onRenderFail=function(u){t.nn=1,s(u)}):r()})]})})},e.prototype.removeInput=function(){return No(this,void 0,void 0,function(){return Lo(this,function(t){switch(t.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return t.sent(),[2]}})})},e.prototype.updateOutput=function(t){return No(this,void 0,void 0,function(){return Lo(this,function(i){switch(i.label){case 0:return this._output===t?[3,3]:(this._output=t,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:i.sent(),i.label=2;case 2:i.label=3;case 3:return[2]}})})},e.prototype.onOutputChange=function(t){var i;return No(this,void 0,void 0,function(){return Lo(this,function(r){switch(r.label){case 0:return[4,(i=this.next)===null||i===void 0?void 0:i.setInput({track:t||this.input||null})];case 1:return r.sent(),[2]}})})},e.prototype.onError=function(t,i){},e}(Pl),fp=h0,pd=function(){return pd=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},pd.apply(this,arguments)},f0=function(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(f){try{m(i.next(f))}catch(a){s(a)}}function u(f){try{m(i.throw(f))}catch(a){s(a)}}function m(f){var a;f.done?r(f.value):(a=f.value,a instanceof t?a:new t(function(S){S(a)})).then(o,u)}m((i=i.apply(n,e||[])).next())})},p0=function(n,e){var t,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(m){return function(f){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!((r=r.length>0&&r[r.length-1])||a[0]!==6&&a[0]!==2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(S){a=[6,S],i=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([m,f])}}},md="zc.p.0.sbe.0",pp={setBeautyEffect:function(n,e,t,i){var r=this;return i===void 0&&(i=!0),new Ge(function(s,o){var u,m,f=_r(n,r.logger);if(!Ar(f))return r.logger.error(md+" localStream not found"),void o({errorCode:1100001,extendedData:" localStream no found"});var a=function(ie){s(ie)},S=r.streamCenter.checkPreview(f);if(!S)return r.logger.error("zc.sbe.0 preview no found"),void a({errorCode:Ti.code,extendedData:Ti.message});var F=((u=S.videoEffect)===null||u===void 0?void 0:u.stateFlag)||{base:!1,lowLight:!1};if(i)!(e=!!e)&&F.lowLight?t={sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:F.lowLight?1:0}:e&&(t=pd({lowlightEnhancement:F.lowLight?1:0},t)),F.base=e;else{var ee=t.lowlightEnhancement;t=!((m=S.videoEffect)===null||m===void 0)&&m.enabled||ee!==1?{lowlightEnhancement:ee}:{sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:ee},F.lowLight=ee===1}S.setBeautyEffect(F.base||F.lowLight,t,F).then(function(){a({errorCode:0,extendedData:""})}).catch(function(ie){o({errorCode:ie.errorCode||ie.code||-1,extendedData:ie.extendedData||ie.message||ie.toString()})})})},setLowlightEnhance:function(n,e){return this.setBeautyEffect(n,!0,{lowlightEnhancement:e},!1)}},mp={setBeautyEffect:function(n,e,t){var i;return f0(this,void 0,void 0,function(){var r,s,o,u=this;return p0(this,function(m){switch(m.label){case 0:if(!this.videoTrack)return this.logger.error(md+" video track no found"),[2];if(Yi(WebGLRenderingContext))throw{errorCode:r=yc,extendedData:s=ba};return o=function(){var f;try{(f=u.vcMgr)===null||f===void 0||f.init(u.videoTrack)}catch(a){if(a.code==1001)throw{errorCode:r,extendedData:s}}},fp?(this.videoEffect||(o(),this.videoEffect=new fp(this.logger,this.videoTrack,this,this.stateCenter),this.videoEffect.onError=function(f,a){u.stateCenter.actionListener("beautyEffectError",u.localStream,f.errorCode,f.extendedData,a)}),n?this.videoNodeQueue.isConnected(this.videoEffect)?[3,4]:this.videoTrack&&((i=this.vcMgr)===null||i===void 0?void 0:i.renderTrack)!==this.videoTrack?[4,this.videoNodeQueue.replaceNewSourceByTrack(this.videoTrack)]:[3,2]:[3,5]):[3,9];case 1:m.sent(),m.label=2;case 2:return[4,this.videoNodeQueue.pushBack(this.videoEffect)];case 3:m.sent(),m.label=4;case 4:return[3,7];case 5:return[4,this.videoNodeQueue.remove(this.videoEffect)];case 6:m.sent(),m.label=7;case 7:return[4,this.videoEffect.setBeautyEffectOptions(n,e)];case 8:return m.sent(),this.videoEffect.stateFlag=t,[3,10];case 9:this.logger.error(md+" beauty effect module no found"),m.label=10;case 10:return[2]}})})}},m0={type:"BeautyEffect",install:function(n,e){for(var t in mp)Object.defineProperty(e.prototype,t,{value:mp[t],writable:!1});for(var t in pp)Object.defineProperty(n.prototype,t,{value:pp[t],writable:!1})}},g0=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();oo.use(Ng()),oo.use(Mg()),oo.use(lv),oo.use(gv),oo.use(Ev),oo.use(Tv),oo.use(Wv),oo.use(Kv),oo.use(m0);var v0=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return g0(e,n),e}(oo)}(),__webpack_exports__}()})})(ZegoExpressWebRTC);var ZegoExpressWebRTCExports=ZegoExpressWebRTC.exports;function bind(c,l){return function(){return c.apply(l,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(c=>l=>{const g=toString.call(l);return c[g]||(c[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=c=>(c=c.toLowerCase(),l=>kindOf(l)===c),typeOfTest=c=>l=>typeof l===c,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(c){return c!==null&&!isUndefined(c)&&c.constructor!==null&&!isUndefined(c.constructor)&&isFunction(c.constructor.isBuffer)&&c.constructor.isBuffer(c)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(c){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(c):l=c&&c.buffer&&isArrayBuffer(c.buffer),l}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=c=>c!==null&&typeof c=="object",isBoolean=c=>c===!0||c===!1,isPlainObject=c=>{if(kindOf(c)!=="object")return!1;const l=getPrototypeOf(c);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=c=>isObject(c)&&isFunction(c.pipe),isFormData=c=>{let l;return c&&(typeof FormData=="function"&&c instanceof FormData||isFunction(c.append)&&((l=kindOf(c))==="formdata"||l==="object"&&isFunction(c.toString)&&c.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(c,l,{allOwnKeys:g=!1}={}){if(c===null||typeof c>"u")return;let v,b;if(typeof c!="object"&&(c=[c]),isArray(c))for(v=0,b=c.length;v<b;v++)l.call(null,c[v],v,c);else{const _=g?Object.getOwnPropertyNames(c):Object.keys(c),E=_.length;let w;for(v=0;v<E;v++)w=_[v],l.call(null,c[w],w,c)}}function findKey(c,l){l=l.toLowerCase();const g=Object.keys(c);let v=g.length,b;for(;v-- >0;)if(b=g[v],l===b.toLowerCase())return b;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=c=>!isUndefined(c)&&c!==_global;function merge(){const{caseless:c}=isContextDefined(this)&&this||{},l={},g=(v,b)=>{const _=c&&findKey(l,b)||b;isPlainObject(l[_])&&isPlainObject(v)?l[_]=merge(l[_],v):isPlainObject(v)?l[_]=merge({},v):isArray(v)?l[_]=v.slice():l[_]=v};for(let v=0,b=arguments.length;v<b;v++)arguments[v]&&forEach(arguments[v],g);return l}const extend=(c,l,g,{allOwnKeys:v}={})=>(forEach(l,(b,_)=>{g&&isFunction(b)?c[_]=bind(b,g):c[_]=b},{allOwnKeys:v}),c),stripBOM=c=>(c.charCodeAt(0)===65279&&(c=c.slice(1)),c),inherits=(c,l,g,v)=>{c.prototype=Object.create(l.prototype,v),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:l.prototype}),g&&Object.assign(c.prototype,g)},toFlatObject=(c,l,g,v)=>{let b,_,E;const w={};if(l=l||{},c==null)return l;do{for(b=Object.getOwnPropertyNames(c),_=b.length;_-- >0;)E=b[_],(!v||v(E,c,l))&&!w[E]&&(l[E]=c[E],w[E]=!0);c=g!==!1&&getPrototypeOf(c)}while(c&&(!g||g(c,l))&&c!==Object.prototype);return l},endsWith=(c,l,g)=>{c=String(c),(g===void 0||g>c.length)&&(g=c.length),g-=l.length;const v=c.indexOf(l,g);return v!==-1&&v===g},toArray=c=>{if(!c)return null;if(isArray(c))return c;let l=c.length;if(!isNumber(l))return null;const g=new Array(l);for(;l-- >0;)g[l]=c[l];return g},isTypedArray=(c=>l=>c&&l instanceof c)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(c,l)=>{const v=(c&&c[Symbol.iterator]).call(c);let b;for(;(b=v.next())&&!b.done;){const _=b.value;l.call(c,_[0],_[1])}},matchAll=(c,l)=>{let g;const v=[];for(;(g=c.exec(l))!==null;)v.push(g);return v},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,v,b){return v.toUpperCase()+b}),hasOwnProperty=(({hasOwnProperty:c})=>(l,g)=>c.call(l,g))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(c,l)=>{const g=Object.getOwnPropertyDescriptors(c),v={};forEach(g,(b,_)=>{let E;(E=l(b,_,c))!==!1&&(v[_]=E||b)}),Object.defineProperties(c,v)},freezeMethods=c=>{reduceDescriptors(c,(l,g)=>{if(isFunction(c)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const v=c[g];if(isFunction(v)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},toObjectSet=(c,l)=>{const g={},v=b=>{b.forEach(_=>{g[_]=!0})};return isArray(c)?v(c):v(String(c).split(l)),g},noop=()=>{},toFiniteNumber=(c,l)=>(c=+c,Number.isFinite(c)?c:l),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(c=16,l=ALPHABET.ALPHA_DIGIT)=>{let g="";const{length:v}=l;for(;c--;)g+=l[Math.random()*v|0];return g};function isSpecCompliantForm(c){return!!(c&&isFunction(c.append)&&c[Symbol.toStringTag]==="FormData"&&c[Symbol.iterator])}const toJSONObject=c=>{const l=new Array(10),g=(v,b)=>{if(isObject(v)){if(l.indexOf(v)>=0)return;if(!("toJSON"in v)){l[b]=v;const _=isArray(v)?[]:{};return forEach(v,(E,w)=>{const O=g(E,b+1);!isUndefined(O)&&(_[w]=O)}),l[b]=void 0,_}}return v};return g(c,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=c=>c&&(isObject(c)||isFunction(c))&&isFunction(c.then)&&isFunction(c.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(c,l,g,v,b){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=c,this.name="AxiosError",l&&(this.code=l),g&&(this.config=g),v&&(this.request=v),b&&(this.response=b)}utils$1.inherits(AxiosError,Error,{toJSON:function c(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(c=>{descriptors[c]={value:c}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(c,l,g,v,b,_)=>{const E=Object.create(prototype$1);return utils$1.toFlatObject(c,E,function(O){return O!==Error.prototype},w=>w!=="isAxiosError"),AxiosError.call(E,c.message,l,g,v,b),E.cause=c,E.name=c.name,_&&Object.assign(E,_),E};const httpAdapter=null;function isVisitable(c){return utils$1.isPlainObject(c)||utils$1.isArray(c)}function removeBrackets(c){return utils$1.endsWith(c,"[]")?c.slice(0,-2):c}function renderKey(c,l,g){return c?c.concat(l).map(function(b,_){return b=removeBrackets(b),!g&&_?"["+b+"]":b}).join(g?".":""):l}function isFlatArray(c){return utils$1.isArray(c)&&!c.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function c(l){return/^is[A-Z]/.test(l)});function toFormData(c,l,g){if(!utils$1.isObject(c))throw new TypeError("target must be an object");l=l||new FormData,g=utils$1.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Y,pe){return!utils$1.isUndefined(pe[Y])});const v=g.metaTokens,b=g.visitor||V,_=g.dots,E=g.indexes,O=(g.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(l);if(!utils$1.isFunction(b))throw new TypeError("visitor must be a function");function U(se){if(se===null)return"";if(utils$1.isDate(se))return se.toISOString();if(!O&&utils$1.isBlob(se))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(se)||utils$1.isTypedArray(se)?O&&typeof Blob=="function"?new Blob([se]):Buffer.from(se):se}function V(se,Y,pe){let ce=se;if(se&&!pe&&typeof se=="object"){if(utils$1.endsWith(Y,"{}"))Y=v?Y:Y.slice(0,-2),se=JSON.stringify(se);else if(utils$1.isArray(se)&&isFlatArray(se)||(utils$1.isFileList(se)||utils$1.endsWith(Y,"[]"))&&(ce=utils$1.toArray(se)))return Y=removeBrackets(Y),ce.forEach(function(P,z){!(utils$1.isUndefined(P)||P===null)&&l.append(E===!0?renderKey([Y],z,_):E===null?Y:Y+"[]",U(P))}),!1}return isVisitable(se)?!0:(l.append(renderKey(pe,Y,_),U(se)),!1)}const C=[],q=Object.assign(predicates,{defaultVisitor:V,convertValue:U,isVisitable});function ue(se,Y){if(!utils$1.isUndefined(se)){if(C.indexOf(se)!==-1)throw Error("Circular reference detected in "+Y.join("."));C.push(se),utils$1.forEach(se,function(ce,X){(!(utils$1.isUndefined(ce)||ce===null)&&b.call(l,ce,utils$1.isString(X)?X.trim():X,Y,q))===!0&&ue(ce,Y?Y.concat(X):[X])}),C.pop()}}if(!utils$1.isObject(c))throw new TypeError("data must be an object");return ue(c),l}function encode$1(c){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,function(v){return l[v]})}function AxiosURLSearchParams(c,l){this._pairs=[],c&&toFormData(c,this,l)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function c(l,g){this._pairs.push([l,g])};prototype.toString=function c(l){const g=l?function(v){return l.call(this,v,encode$1)}:encode$1;return this._pairs.map(function(b){return g(b[0])+"="+g(b[1])},"").join("&")};function encode(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(c,l,g){if(!l)return c;const v=g&&g.encode||encode,b=g&&g.serialize;let _;if(b?_=b(l,g):_=utils$1.isURLSearchParams(l)?l.toString():new AxiosURLSearchParams(l,g).toString(v),_){const E=c.indexOf("#");E!==-1&&(c=c.slice(0,E)),c+=(c.indexOf("?")===-1?"?":"&")+_}return c}class InterceptorManager{constructor(){this.handlers=[]}use(l,g,v){return this.handlers.push({fulfilled:l,rejected:g,synchronous:v?v.synchronous:!1,runWhen:v?v.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){utils$1.forEach(this.handlers,function(v){v!==null&&l(v)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(c=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(c)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(c,l){return toFormData(c,new platform.classes.URLSearchParams,Object.assign({visitor:function(g,v,b,_){return platform.isNode&&utils$1.isBuffer(g)?(this.append(v,g.toString("base64")),!1):_.defaultVisitor.apply(this,arguments)}},l))}function parsePropPath(c){return utils$1.matchAll(/\w+|\[(\w*)]/g,c).map(l=>l[0]==="[]"?"":l[1]||l[0])}function arrayToObject(c){const l={},g=Object.keys(c);let v;const b=g.length;let _;for(v=0;v<b;v++)_=g[v],l[_]=c[_];return l}function formDataToJSON(c){function l(g,v,b,_){let E=g[_++];if(E==="__proto__")return!0;const w=Number.isFinite(+E),O=_>=g.length;return E=!E&&utils$1.isArray(b)?b.length:E,O?(utils$1.hasOwnProp(b,E)?b[E]=[b[E],v]:b[E]=v,!w):((!b[E]||!utils$1.isObject(b[E]))&&(b[E]=[]),l(g,v,b[E],_)&&utils$1.isArray(b[E])&&(b[E]=arrayToObject(b[E])),!w)}if(utils$1.isFormData(c)&&utils$1.isFunction(c.entries)){const g={};return utils$1.forEachEntry(c,(v,b)=>{l(parsePropPath(v),b,g,0)}),g}return null}function stringifySafely(c,l,g){if(utils$1.isString(c))try{return(l||JSON.parse)(c),utils$1.trim(c)}catch(v){if(v.name!=="SyntaxError")throw v}return(g||JSON.stringify)(c)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function c(l,g){const v=g.getContentType()||"",b=v.indexOf("application/json")>-1,_=utils$1.isObject(l);if(_&&utils$1.isHTMLForm(l)&&(l=new FormData(l)),utils$1.isFormData(l))return b?JSON.stringify(formDataToJSON(l)):l;if(utils$1.isArrayBuffer(l)||utils$1.isBuffer(l)||utils$1.isStream(l)||utils$1.isFile(l)||utils$1.isBlob(l))return l;if(utils$1.isArrayBufferView(l))return l.buffer;if(utils$1.isURLSearchParams(l))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let w;if(_){if(v.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(l,this.formSerializer).toString();if((w=utils$1.isFileList(l))||v.indexOf("multipart/form-data")>-1){const O=this.env&&this.env.FormData;return toFormData(w?{"files[]":l}:l,O&&new O,this.formSerializer)}}return _||b?(g.setContentType("application/json",!1),stringifySafely(l)):l}],transformResponse:[function c(l){const g=this.transitional||defaults.transitional,v=g&&g.forcedJSONParsing,b=this.responseType==="json";if(l&&utils$1.isString(l)&&(v&&!this.responseType||b)){const E=!(g&&g.silentJSONParsing)&&b;try{return JSON.parse(l)}catch(w){if(E)throw w.name==="SyntaxError"?AxiosError.from(w,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):w}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function c(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],c=>{defaults.headers[c]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=c=>{const l={};let g,v,b;return c&&c.split(`
`).forEach(function(E){b=E.indexOf(":"),g=E.substring(0,b).trim().toLowerCase(),v=E.substring(b+1).trim(),!(!g||l[g]&&ignoreDuplicateOf[g])&&(g==="set-cookie"?l[g]?l[g].push(v):l[g]=[v]:l[g]=l[g]?l[g]+", "+v:v)}),l},$internals=Symbol("internals");function normalizeHeader(c){return c&&String(c).trim().toLowerCase()}function normalizeValue(c){return c===!1||c==null?c:utils$1.isArray(c)?c.map(normalizeValue):String(c)}function parseTokens(c){const l=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let v;for(;v=g.exec(c);)l[v[1]]=v[2];return l}const isValidHeaderName=c=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim());function matchHeaderValue(c,l,g,v,b){if(utils$1.isFunction(v))return v.call(this,l,g);if(b&&(l=g),!!utils$1.isString(l)){if(utils$1.isString(v))return l.indexOf(v)!==-1;if(utils$1.isRegExp(v))return v.test(l)}}function formatHeader(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,g,v)=>g.toUpperCase()+v)}function buildAccessors(c,l){const g=utils$1.toCamelCase(" "+l);["get","set","has"].forEach(v=>{Object.defineProperty(c,v+g,{value:function(b,_,E){return this[v].call(this,l,b,_,E)},configurable:!0})})}class AxiosHeaders{constructor(l){l&&this.set(l)}set(l,g,v){const b=this;function _(w,O,U){const V=normalizeHeader(O);if(!V)throw new Error("header name must be a non-empty string");const C=utils$1.findKey(b,V);(!C||b[C]===void 0||U===!0||U===void 0&&b[C]!==!1)&&(b[C||O]=normalizeValue(w))}const E=(w,O)=>utils$1.forEach(w,(U,V)=>_(U,V,O));return utils$1.isPlainObject(l)||l instanceof this.constructor?E(l,g):utils$1.isString(l)&&(l=l.trim())&&!isValidHeaderName(l)?E(parseHeaders(l),g):l!=null&&_(g,l,v),this}get(l,g){if(l=normalizeHeader(l),l){const v=utils$1.findKey(this,l);if(v){const b=this[v];if(!g)return b;if(g===!0)return parseTokens(b);if(utils$1.isFunction(g))return g.call(this,b,v);if(utils$1.isRegExp(g))return g.exec(b);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,g){if(l=normalizeHeader(l),l){const v=utils$1.findKey(this,l);return!!(v&&this[v]!==void 0&&(!g||matchHeaderValue(this,this[v],v,g)))}return!1}delete(l,g){const v=this;let b=!1;function _(E){if(E=normalizeHeader(E),E){const w=utils$1.findKey(v,E);w&&(!g||matchHeaderValue(v,v[w],w,g))&&(delete v[w],b=!0)}}return utils$1.isArray(l)?l.forEach(_):_(l),b}clear(l){const g=Object.keys(this);let v=g.length,b=!1;for(;v--;){const _=g[v];(!l||matchHeaderValue(this,this[_],_,l,!0))&&(delete this[_],b=!0)}return b}normalize(l){const g=this,v={};return utils$1.forEach(this,(b,_)=>{const E=utils$1.findKey(v,_);if(E){g[E]=normalizeValue(b),delete g[_];return}const w=l?formatHeader(_):String(_).trim();w!==_&&delete g[_],g[w]=normalizeValue(b),v[w]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const g=Object.create(null);return utils$1.forEach(this,(v,b)=>{v!=null&&v!==!1&&(g[b]=l&&utils$1.isArray(v)?v.join(", "):v)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,g])=>l+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...g){const v=new this(l);return g.forEach(b=>v.set(b)),v}static accessor(l){const v=(this[$internals]=this[$internals]={accessors:{}}).accessors,b=this.prototype;function _(E){const w=normalizeHeader(E);v[w]||(buildAccessors(b,E),v[w]=!0)}return utils$1.isArray(l)?l.forEach(_):_(l),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:c},l)=>{let g=l[0].toUpperCase()+l.slice(1);return{get:()=>c,set(v){this[g]=v}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(c,l){const g=this||defaults$1,v=l||g,b=AxiosHeaders$1.from(v.headers);let _=v.data;return utils$1.forEach(c,function(w){_=w.call(g,_,b.normalize(),l?l.status:void 0)}),b.normalize(),_}function isCancel(c){return!!(c&&c.__CANCEL__)}function CanceledError(c,l,g){AxiosError.call(this,c??"canceled",AxiosError.ERR_CANCELED,l,g),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(c,l,g){const v=g.config.validateStatus;!g.status||!v||v(g.status)?c(g):l(new AxiosError("Request failed with status code "+g.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}const cookies=platform.hasStandardBrowserEnv?{write(c,l,g,v,b,_){const E=[c+"="+encodeURIComponent(l)];utils$1.isNumber(g)&&E.push("expires="+new Date(g).toGMTString()),utils$1.isString(v)&&E.push("path="+v),utils$1.isString(b)&&E.push("domain="+b),_===!0&&E.push("secure"),document.cookie=E.join("; ")},read(c){const l=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(c){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(c)}function combineURLs(c,l){return l?c.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):c}function buildFullPath(c,l){return c&&!isAbsoluteURL(l)?combineURLs(c,l):l}const isURLSameOrigin=platform.hasStandardBrowserEnv?function c(){const l=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a");let v;function b(_){let E=_;return l&&(g.setAttribute("href",E),E=g.href),g.setAttribute("href",E),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return v=b(window.location.href),function(E){const w=utils$1.isString(E)?b(E):E;return w.protocol===v.protocol&&w.host===v.host}}():function c(){return function(){return!0}}();function parseProtocol(c){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return l&&l[1]||""}function speedometer(c,l){c=c||10;const g=new Array(c),v=new Array(c);let b=0,_=0,E;return l=l!==void 0?l:1e3,function(O){const U=Date.now(),V=v[_];E||(E=U),g[b]=O,v[b]=U;let C=_,q=0;for(;C!==b;)q+=g[C++],C=C%c;if(b=(b+1)%c,b===_&&(_=(_+1)%c),U-E<l)return;const ue=V&&U-V;return ue?Math.round(q*1e3/ue):void 0}}function progressEventReducer(c,l){let g=0;const v=speedometer(50,250);return b=>{const _=b.loaded,E=b.lengthComputable?b.total:void 0,w=_-g,O=v(w),U=_<=E;g=_;const V={loaded:_,total:E,progress:E?_/E:void 0,bytes:w,rate:O||void 0,estimated:O&&E&&U?(E-_)/O:void 0,event:b};V[l?"download":"upload"]=!0,c(V)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(c){return new Promise(function(g,v){let b=c.data;const _=AxiosHeaders$1.from(c.headers).normalize();let{responseType:E,withXSRFToken:w}=c,O;function U(){c.cancelToken&&c.cancelToken.unsubscribe(O),c.signal&&c.signal.removeEventListener("abort",O)}let V;if(utils$1.isFormData(b)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)_.setContentType(!1);else if((V=_.getContentType())!==!1){const[Y,...pe]=V?V.split(";").map(ce=>ce.trim()).filter(Boolean):[];_.setContentType([Y||"multipart/form-data",...pe].join("; "))}}let C=new XMLHttpRequest;if(c.auth){const Y=c.auth.username||"",pe=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";_.set("Authorization","Basic "+btoa(Y+":"+pe))}const q=buildFullPath(c.baseURL,c.url);C.open(c.method.toUpperCase(),buildURL(q,c.params,c.paramsSerializer),!0),C.timeout=c.timeout;function ue(){if(!C)return;const Y=AxiosHeaders$1.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),ce={data:!E||E==="text"||E==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:Y,config:c,request:C};settle(function(P){g(P),U()},function(P){v(P),U()},ce),C=null}if("onloadend"in C?C.onloadend=ue:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(ue)},C.onabort=function(){C&&(v(new AxiosError("Request aborted",AxiosError.ECONNABORTED,c,C)),C=null)},C.onerror=function(){v(new AxiosError("Network Error",AxiosError.ERR_NETWORK,c,C)),C=null},C.ontimeout=function(){let pe=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ce=c.transitional||transitionalDefaults;c.timeoutErrorMessage&&(pe=c.timeoutErrorMessage),v(new AxiosError(pe,ce.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,c,C)),C=null},platform.hasStandardBrowserEnv&&(w&&utils$1.isFunction(w)&&(w=w(c)),w||w!==!1&&isURLSameOrigin(q))){const Y=c.xsrfHeaderName&&c.xsrfCookieName&&cookies.read(c.xsrfCookieName);Y&&_.set(c.xsrfHeaderName,Y)}b===void 0&&_.setContentType(null),"setRequestHeader"in C&&utils$1.forEach(_.toJSON(),function(pe,ce){C.setRequestHeader(ce,pe)}),utils$1.isUndefined(c.withCredentials)||(C.withCredentials=!!c.withCredentials),E&&E!=="json"&&(C.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&C.addEventListener("progress",progressEventReducer(c.onDownloadProgress,!0)),typeof c.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",progressEventReducer(c.onUploadProgress)),(c.cancelToken||c.signal)&&(O=Y=>{C&&(v(!Y||Y.type?new CanceledError(null,c,C):Y),C.abort(),C=null)},c.cancelToken&&c.cancelToken.subscribe(O),c.signal&&(c.signal.aborted?O():c.signal.addEventListener("abort",O)));const se=parseProtocol(q);if(se&&platform.protocols.indexOf(se)===-1){v(new AxiosError("Unsupported protocol "+se+":",AxiosError.ERR_BAD_REQUEST,c));return}C.send(b||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(c,l)=>{if(c){try{Object.defineProperty(c,"name",{value:l})}catch{}Object.defineProperty(c,"adapterName",{value:l})}});const renderReason=c=>`- ${c}`,isResolvedHandle=c=>utils$1.isFunction(c)||c===null||c===!1,adapters={getAdapter:c=>{c=utils$1.isArray(c)?c:[c];const{length:l}=c;let g,v;const b={};for(let _=0;_<l;_++){g=c[_];let E;if(v=g,!isResolvedHandle(g)&&(v=knownAdapters[(E=String(g)).toLowerCase()],v===void 0))throw new AxiosError(`Unknown adapter '${E}'`);if(v)break;b[E||"#"+_]=v}if(!v){const _=Object.entries(b).map(([w,O])=>`adapter ${w} `+(O===!1?"is not supported by the environment":"is not available in the build"));let E=l?_.length>1?`since :
`+_.map(renderReason).join(`
`):" "+renderReason(_[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+E,"ERR_NOT_SUPPORT")}return v},adapters:knownAdapters};function throwIfCancellationRequested(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new CanceledError(null,c)}function dispatchRequest(c){return throwIfCancellationRequested(c),c.headers=AxiosHeaders$1.from(c.headers),c.data=transformData.call(c,c.transformRequest),["post","put","patch"].indexOf(c.method)!==-1&&c.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(c.adapter||defaults$1.adapter)(c).then(function(v){return throwIfCancellationRequested(c),v.data=transformData.call(c,c.transformResponse,v),v.headers=AxiosHeaders$1.from(v.headers),v},function(v){return isCancel(v)||(throwIfCancellationRequested(c),v&&v.response&&(v.response.data=transformData.call(c,c.transformResponse,v.response),v.response.headers=AxiosHeaders$1.from(v.response.headers))),Promise.reject(v)})}const headersToObject=c=>c instanceof AxiosHeaders$1?c.toJSON():c;function mergeConfig(c,l){l=l||{};const g={};function v(U,V,C){return utils$1.isPlainObject(U)&&utils$1.isPlainObject(V)?utils$1.merge.call({caseless:C},U,V):utils$1.isPlainObject(V)?utils$1.merge({},V):utils$1.isArray(V)?V.slice():V}function b(U,V,C){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined(U))return v(void 0,U,C)}else return v(U,V,C)}function _(U,V){if(!utils$1.isUndefined(V))return v(void 0,V)}function E(U,V){if(utils$1.isUndefined(V)){if(!utils$1.isUndefined(U))return v(void 0,U)}else return v(void 0,V)}function w(U,V,C){if(C in l)return v(U,V);if(C in c)return v(void 0,U)}const O={url:_,method:_,data:_,baseURL:E,transformRequest:E,transformResponse:E,paramsSerializer:E,timeout:E,timeoutMessage:E,withCredentials:E,withXSRFToken:E,adapter:E,responseType:E,xsrfCookieName:E,xsrfHeaderName:E,onUploadProgress:E,onDownloadProgress:E,decompress:E,maxContentLength:E,maxBodyLength:E,beforeRedirect:E,transport:E,httpAgent:E,httpsAgent:E,cancelToken:E,socketPath:E,responseEncoding:E,validateStatus:w,headers:(U,V)=>b(headersToObject(U),headersToObject(V),!0)};return utils$1.forEach(Object.keys(Object.assign({},c,l)),function(V){const C=O[V]||b,q=C(c[V],l[V],V);utils$1.isUndefined(q)&&C!==w||(g[V]=q)}),g}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((c,l)=>{validators$1[c]=function(v){return typeof v===c||"a"+(l<1?"n ":" ")+c}});const deprecatedWarnings={};validators$1.transitional=function c(l,g,v){function b(_,E){return"[Axios v"+VERSION+"] Transitional option '"+_+"'"+E+(v?". "+v:"")}return(_,E,w)=>{if(l===!1)throw new AxiosError(b(E," has been removed"+(g?" in "+g:"")),AxiosError.ERR_DEPRECATED);return g&&!deprecatedWarnings[E]&&(deprecatedWarnings[E]=!0,console.warn(b(E," has been deprecated since v"+g+" and will be removed in the near future"))),l?l(_,E,w):!0}};function assertOptions(c,l,g){if(typeof c!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const v=Object.keys(c);let b=v.length;for(;b-- >0;){const _=v[b],E=l[_];if(E){const w=c[_],O=w===void 0||E(w,_,c);if(O!==!0)throw new AxiosError("option "+_+" must be "+O,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new AxiosError("Unknown option "+_,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(l){this.defaults=l,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(l,g){try{return await this._request(l,g)}catch(v){if(v instanceof Error){let b;Error.captureStackTrace?Error.captureStackTrace(b={}):b=new Error;const _=b.stack?b.stack.replace(/^.+\n/,""):"";v.stack?_&&!String(v.stack).endsWith(_.replace(/^.+\n.+\n/,""))&&(v.stack+=`
`+_):v.stack=_}throw v}}_request(l,g){typeof l=="string"?(g=g||{},g.url=l):g=l||{},g=mergeConfig(this.defaults,g);const{transitional:v,paramsSerializer:b,headers:_}=g;v!==void 0&&validator.assertOptions(v,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),b!=null&&(utils$1.isFunction(b)?g.paramsSerializer={serialize:b}:validator.assertOptions(b,{encode:validators.function,serialize:validators.function},!0)),g.method=(g.method||this.defaults.method||"get").toLowerCase();let E=_&&utils$1.merge(_.common,_[g.method]);_&&utils$1.forEach(["delete","get","head","post","put","patch","common"],se=>{delete _[se]}),g.headers=AxiosHeaders$1.concat(E,_);const w=[];let O=!0;this.interceptors.request.forEach(function(Y){typeof Y.runWhen=="function"&&Y.runWhen(g)===!1||(O=O&&Y.synchronous,w.unshift(Y.fulfilled,Y.rejected))});const U=[];this.interceptors.response.forEach(function(Y){U.push(Y.fulfilled,Y.rejected)});let V,C=0,q;if(!O){const se=[dispatchRequest.bind(this),void 0];for(se.unshift.apply(se,w),se.push.apply(se,U),q=se.length,V=Promise.resolve(g);C<q;)V=V.then(se[C++],se[C++]);return V}q=w.length;let ue=g;for(C=0;C<q;){const se=w[C++],Y=w[C++];try{ue=se(ue)}catch(pe){Y.call(this,pe);break}}try{V=dispatchRequest.call(this,ue)}catch(se){return Promise.reject(se)}for(C=0,q=U.length;C<q;)V=V.then(U[C++],U[C++]);return V}getUri(l){l=mergeConfig(this.defaults,l);const g=buildFullPath(l.baseURL,l.url);return buildURL(g,l.params,l.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function c(l){Axios.prototype[l]=function(g,v){return this.request(mergeConfig(v||{},{method:l,url:g,data:(v||{}).data}))}});utils$1.forEach(["post","put","patch"],function c(l){function g(v){return function(_,E,w){return this.request(mergeConfig(w||{},{method:l,headers:v?{"Content-Type":"multipart/form-data"}:{},url:_,data:E}))}}Axios.prototype[l]=g(),Axios.prototype[l+"Form"]=g(!0)});const Axios$1=Axios;class CancelToken{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(_){g=_});const v=this;this.promise.then(b=>{if(!v._listeners)return;let _=v._listeners.length;for(;_-- >0;)v._listeners[_](b);v._listeners=null}),this.promise.then=b=>{let _;const E=new Promise(w=>{v.subscribe(w),_=w}).then(b);return E.cancel=function(){v.unsubscribe(_)},E},l(function(_,E,w){v.reason||(v.reason=new CanceledError(_,E,w),g(v.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const g=this._listeners.indexOf(l);g!==-1&&this._listeners.splice(g,1)}static source(){let l;return{token:new CancelToken(function(b){l=b}),cancel:l}}}const CancelToken$1=CancelToken;function spread(c){return function(g){return c.apply(null,g)}}function isAxiosError(c){return utils$1.isObject(c)&&c.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([c,l])=>{HttpStatusCode[l]=c});const HttpStatusCode$1=HttpStatusCode;function createInstance(c){const l=new Axios$1(c),g=bind(Axios$1.prototype.request,l);return utils$1.extend(g,Axios$1.prototype,l,{allOwnKeys:!0}),utils$1.extend(g,l,null,{allOwnKeys:!0}),g.create=function(b){return createInstance(mergeConfig(c,b))},g}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function c(l){return Promise.all(l)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=c=>formDataToJSON(utils$1.isHTMLForm(c)?new FormData(c):c);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const _sfc_main={components:{},data(){return{appID:142874099,server:"wss://webliveroom142874099-api.coolzcloud.com/ws",user_id:"USER_002",userName:"USER_002",token:"",room_id:"0007",streamID:"0007",streamSecondID:"0008",isChecked:!1,isLogin:!1,localStream:null,remoteStream:null,published:!1,publishVideo:!1,played:!1,mesaageList:[],userMsg:null,videoCodec:localStorage.getItem("VideoCodec")==="H.264"?"H264":"VP8",zg:null}},methods:{createZegoExpressEngine(){this.zg=new ZegoExpressWebRTCExports.ZegoExpressEngine(this.appID,this.server),this.genrateToken()},genrateToken(){axios.get("https://dhwaniastro.democlicks.com/api/zego_access_token",{params:{roomId:this.room_id,userID:this.user_id}}).then(c=>{console.log(c),c.data.status==!0?this.token=c.data._token:console.log("token not genrate")})},initEvent(){this.zg.on("roomStateUpdate",(c,l,g,v)=>{}),this.zg.on("roomUserUpdate",(c,l,g)=>{console.warn(`roomUserUpdate: room ${c}, user ${l==="ADD"?"added":"left"} `,JSON.stringify(g))}),this.zg.on("roomStreamUpdate",async(c,l,g,v)=>{l=="ADD"?(this.streamID=g[0].streamID,this.startPlaying()):l=="DELETE"&&this.stopPlaying(),console.log("roomStreamUpdate roomID ",c,g)}),this.zg.on("IMRecvBroadcastMessage",(c,l)=>{for(let g=0;g<l.length;g++)console.log({username:l[g].fromUser.userName,message:l[g].message}),this.mesaageList.push({username:l[g].fromUser.userName,message:l[g].message})})},loginRoom(){if(!this.isLogin)try{return this.isLogin=!0,this.zg.loginRoom(this.room_id,this.token,{userID:this.user_id,userName:this.userName})}catch(c){throw c}},startPlaying(){this.startPlayingStream(this.streamID)},stopPlaying(){this.stopPlayingStream(this.streamID)},logoutRoom(){this.zg.logoutRoom(this.room_id)},sendUserMessage(){const c=this.userMsg;this.sendBroadcastMessage(this.room_id,c),this.mesaageList.push({username:this.userName,message:c}),this.userMsg=null},async startPlayingStream(c,l={}){const g=await this.zg.startPlayingStream(c);this.$refs.remoteVideo.srcObject=g},async stopPlayingStream(c){this.zg.stopPlayingStream(c)},async sendBroadcastMessage(c,l){try{return await this.zg.sendBroadcastMessage(c,l)}catch(g){return{errorCode:1,extendedData:JSON.stringify(g)}}},startPublishing(){const c={camera:{video:!0,audio:!0}};this.startPlayingStream(this.streamSecondID,c),this.publishVideo=!0},async startPublishingStream(c,l={}){try{return this.localStream=await this.zg.createZegoStream(l),console.log(l),this.zg.startPublishingStream(c,this.localStream),this.localStream.playVideo(document.querySelector("#local-video")),this.isload=!0,!0}catch{return!1}}},watch:{token(){this.loginRoom()},isLogin(){this.isLogin==!0&&this.startPlaying()}},mounted(){this.createZegoExpressEngine(),this.initEvent()}},_hoisted_1={class:"container"},_hoisted_2={class:"row"},_hoisted_3={class:"col-sm-6"},_hoisted_4={ref:"remoteVideo",autoplay:"",playsinline:"",muted:!0,style:{width:"300px"}},_hoisted_5=createBaseVNode("div",null,[createBaseVNode("div",{id:"local-video"})],-1),_hoisted_6={class:"col-sm-6"},_hoisted_7=createBaseVNode("h3",null,"Message",-1),_hoisted_8={class:"list-group"},_hoisted_9={class:"list-group-item"},_hoisted_10={class:"input-group mb-3"},_hoisted_11=createBaseVNode("span",{class:"input-group-text btn btn-info"},"Send",-1),_hoisted_12=[_hoisted_11];function _sfc_render(c,l,g,v,b,_){return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",null,[createBaseVNode("video",_hoisted_4,null,512)]),_hoisted_5,createBaseVNode("div",null,[createBaseVNode("a",{href:"#",onClick:l[0]||(l[0]=E=>_.logoutRoom()),class:"btn btn-danger"},"Logout Room"),createBaseVNode("a",{href:"#",onClick:l[1]||(l[1]=E=>_.startPublishing()),class:"btn btn-info"},"Start"),createBaseVNode("a",{href:"#",onClick:l[2]||(l[2]=E=>_.stopPlaying()),class:"btn btn-warning"},"Stop")])]),createBaseVNode("div",_hoisted_6,[_hoisted_7,createBaseVNode("ul",_hoisted_8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(b.mesaageList,E=>(openBlock(),createElementBlock("li",_hoisted_9,toDisplayString(E.username)+" : "+toDisplayString(E.message),1))),256))]),createBaseVNode("div",_hoisted_10,[withDirectives(createBaseVNode("input",{type:"text",class:"form-control","onUpdate:modelValue":l[3]||(l[3]=E=>b.userMsg=E),placeholder:"Your Message"},null,512),[[vModelText,b.userMsg]]),createBaseVNode("div",{class:"input-group-append",onClick:l[4]||(l[4]=E=>_.sendUserMessage())},_hoisted_12)])])])])}const HomeView=_export_sfc(_sfc_main,[["render",_sfc_render]]),router=createRouter({history:createWebHistory("/zegocloud-vue/"),routes:[{path:"/",name:"home",component:HomeView},{path:"/host",name:"host",component:()=>__vitePreload(()=>import("./HostView-CEsxr5IG.js"),__vite__mapDeps([0,1]))}]}),app=createApp(App);app.use(createPinia());app.use(router);app.mount("#app");export{Fragment as F,ZegoExpressWebRTCExports as Z,_export_sfc as _,axios as a,createBaseVNode as b,createElementBlock as c,openBlock as o,renderList as r,toDisplayString as t,vModelText as v,withDirectives as w};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/HostView-CEsxr5IG.js","assets/HostView-BDdPKWb4.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
